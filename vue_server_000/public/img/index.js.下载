webpackJsonp([0],[function(e,t,a){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,a){"use strict";t.__esModule=!0;var n=a(13),o=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":(0,o.default)(t))&&"function"!=typeof t?e:t}},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=a(199),i=n(o),s=a(203),r=n(s),c=a(13),l=n(c);t.default=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,l.default)(t)));e.prototype=(0,r.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(i.default?(0,i.default)(e,t):e.__proto__=t)}},function(e,t,a){"use strict";t.__esModule=!0;var n=a(123),o=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),(0,o.default)(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}()},function(e,t){e.exports=React},function(t,a,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(a,"__esModule",{value:!0}),a.globalData=a.appMethod=a.appInstance=a.setApp=void 0;var i=n(9),s=o(i),r=n(84),c=o(r),l=n(22),d=o(l),u=n(13),m=o(u);n(92),n(23);var p=n(131),f=o(p),g=n(74),h=n(34),v=n(38),_=n(6),y=n(30),E=n(15),b=n(235),N=n(12),R=o(N),k=n(138),w=o(k),x=n(534),C=o(x),D=n(535),S=n(537),I=n(539),M=null,T={appId:(0,v.getAppId)(),historyDataId:"",tabBarPagePathArr:[],homepageRouter:"",formData:null,userInfo:{},systemInfo:null,sessionKey:"",notBindXcxAppId:!1,waimaiTotalNum:0,waimaiTotalPrice:0,takeoutLocate:{},takeoutRefresh:!1,communityGroupRefresh:!1,isLogin:!1,locationInfo:{latitude:"",longitude:"",address:"",info:{}},getDistributionInfo:"",getDistributorInfo:"",PromotionUserToken:"",communityUserToken:"",previewGoodsOrderGoodsInfo:[],goodsAdditionalInfo:{},urlLocationId:"",turnToPageFlag:!1,wxParseOldPattern:"_listVesselRichText_",cdnUrl:"http://cdn.jisuapp.cn",defaultPhoto:"http://cdn.jisuapp.cn/zhichi_frontend/static/webapp/images/default_photo.png",siteBaseUrl:location.origin,userDomain:location.origin,appTitle:"",appDescription:"",appLogo:"",p_u:"",hasFranchiseeList:!1,hasFranchiseeChain:!1,chainAppId:"",hasTopicCom:!1,pageScrollTop:0,topicRefresh:!1,kbHeight:"",goodsStoreConfig:"",goodsfranchiseeStoreConfig:{},susTopicsMap:{},needRefreshPages:[],newCountDataOnPage:{},tabbarInfo:{},currentPages:[]},P=function(e){a.appInstance=M=e},L={globalData:T,socket:null,onLaunch:function(){var e=void 0;(e=this.getStorageSync("userInfo"))&&(this.globalData.userInfo=e),this.appInitial(),this.getShareAppSetting()},appInitial:function(){var e=this;this._getSystemInfo({success:function(t){e.setSystemInfoData(t)}})},onShow:function(e){},onPageNotFound:function(){this.turnToPage(this.getHomepageRouter())},onError:function(e){},onHide:function(){},bindUserTokenByPid:function(e){var t=this;t.sendRequest({url:"/index.php?r=AppDistribution/GetUserTokenByPId",data:{p_id:e},success:function(e){e.data&&e.data.user_token&&(t.globalData.communityUserToken=e.data.user_token,t._getPromotionUserToken({user_token:e.data.user_token}))}})},_getPromotionUserToken:function(e){},returnSubPackageRouter:function(e){},_getSystemInfo:function(e){},sendRequest:function(e){var t=this,a=e.data||{};e.subshop&&(a.app_id=e.subshop,e.chain=!1),e.chain&&this.globalData.chainAppId&&(a.app_id=this.getChainAppId()),a.app_id||(a.app_id=this.getAppId());var n="boolean"!=typeof e.hideLoading||e.hideLoading;(0,h.ajax)({url:e.url,data:a,type:e.method||"GET",headers:e.header,loading:!n,success:function(a,n){if(n.statusCode&&200!=n.statusCode)return t.hideToast(),t.showToast({title:""+n.errMsg,icon:"none"}),void("function"==typeof e.successStatusAbnormal&&e.successStatusAbnormal(n.data));if(a.status&&0!=a.status){if(2==a.status||401==a.status)return t.setIsLogin(!1),void t.goLogin();if(5==a.status)return void("function"==typeof e.successStatus5&&e.successStatus5(a));if("function"==typeof e.successStatusAbnormal&&!1===e.successStatusAbnormal(a))return;return t.hideToast(),void t.showModal({content:""+a.data,confirm:function(){"function"==typeof e.successShowModalConfirm&&e.successShowModalConfirm(a)}})}e.success&&e.success(a)},error:function(t){e.fail&&e.fail(t)},complete:function(t){e.complete&&e.complete(t)}})},turnToPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments[2],n=e.split("/"),o=n[n.length-1].split("?")[0];"object"!==(void 0===t?"undefined":(0,m.default)(t))&&(t={},a=Boolean(t)||!1);var i=Object.assign(t,(0,_.getUrlQueryStringObj)(e)),s=(0,_.getUrlSearch)(i),r=location.pathname.split("/");if("loginPage"!==r[r.length-1]||"loginPage"!==o){if(0===o.indexOf("plugin"))return void d.default.info("插件不支持跳转");if({classifyGoodsListPage:!0,collectStars:!0,luckyWheelDetail:!0,goldenEggs:!0,scratch:!0,numberOfStampsOrderDetail:!0,numberOfStampsUsed:!0,exchangeCouponDetail:!0,exchangeCouponDetailOrder:!0,previewSeckillOrder:!0,seckillDetail:!0,gpgoodsList:!0,gpgoodsDetail:!0,gpgroupDetail:!0,gpmyOrder:!0,gporderDetail:!0,gppaySuccess:!0,gpplaylaws:!0,previewGroupOrder:!0,presellList:!0,presellDetail:!0,presellOrderDetail:!0,presellOrderList:!0,presellPaySuccess:!0,previewPresellOrder:!0,previewOrderDetail:!0,paySuccess:!0,tostoreOrderDetail:!0,tostoreComment:!0,makeTostoreComment:!0,previewTakeoutOrder:!0,takeoutOrderDetail:!0,takeoutMakeComment:!0,orderTracking:!0,takeoutFeedback:!0,indemnityOrder:!0,cancelOrder:!0,checkRowNumberDetail:!0,previewRowNumberOrder:!0,rowNumberOrderDetail:!0}[o])return void d.default.info(React.createElement("div",null,React.createElement("div",null,"当前功能测试中"),React.createElement("div",null,"即将开放使用")));if(w.default[o]||M.state.appData[o]){if(a)return void g.history.replace("/"+o+s,i);g.history.push("/"+o+s,i)}else if(C.default[o]){var c="/app?_app_id="+(0,v.getAppId)()+"&"+C.default[o](i);window.location.href=c}else{if(b.noDevPageList.hasOwnProperty(o))return void(0,b.showNoDevToast)();d.default.info("跳转页面不存在")}}},connectSocket:function(e){var t=e.url;e.header,e.method;this.socket=new WebSocket(t)},onSocketOpen:function(e){this.socket.onopen=function(t){console.warn("socket连接成功"),e(t)}},sendSocketMessage:function(e){1==this.socket.readyState&&(this.socket.send(e),console.warn("socket向服务器发送数据",e))},onSocketMessage:function(e){1==this.socket.readyState&&(this.socket.onmessage=function(t){console.warn("socket服务器端返回数据",t),e(t)})},closeSocket:function(){this.socket.close()},onSocketClose:function(e){3===this.socket.readyState&&e()},onSocketError:function(e){this.socket.onerror=function(){e()}},chainTurnToPage:function(e){},reLaunch:function(e){this.setPageRouter(e.url),this.turnToPage(e.url)},switchToTab:function(e){},turnBack:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Number(e.delta)||1;g.history.go(-t)},navigateToXcx:function(){d.default.info("web端不支持跳转到微信小程序")},setNavigationBarTitle:function(e){var t=e.title,a=e.success,n=(e.fail,e.complete);this.setPageTitle(t),n&&n(),a&&a()},setPageTitle:function(e){if(document.title=e,this.isWeixin()){var t=(document.getElementsByTagName("body")[0],document.createElement("iframe"));t.setAttribute("src","/favicon.ico"),t.setAttribute("style","display:none"),t.addEventListener("load",function(){setTimeout(function(){try{t.removeEventListener("load")}catch(e){}document.body.removeChild(t)},0)}),document.body.appendChild(t)}},showToast:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.duration=e.duration?e.duration/1e3:1.5,"success"==e.icon?d.default.success(e.title,e.duration,e.success||null,e.mask||!1):"fail"==e.icon?d.default.fail(e.title,e.duration,e.success||null,e.mask||!1):"offline"==e.icon?d.default.offline(e.title,e.duration,e.success||null,e.mask||!1):d.default.info(e.title,e.duration,e.success||null,e.mask||!1)},hideToast:function(){d.default.hide()},showLoading:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.duration=e.duration?e.duration/1e3:1.5,d.default.loading(e.title||"加载中...",e.duration1,e.success||null,e.mask||!0)},hideLoading:function(){d.default.hide()},showModal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[{text:e.confirmText||"确定",onPress:function(t){return"function"==typeof e.confirm&&e.confirm(t)},style:{color:e.confirmColor||"#3CC51F"}}];e.showCancel&&t.unshift({text:e.cancelText||"取消",onPress:function(t){return"function"==typeof e.cancel&&e.cancel(t)},style:{color:e.cancelColor||"#000000"}}),c.default.alert(e.title||"",e.content,t)},chooseVideo:function(e,t,a){},getVideoUpToken:function(e,t){},uploadSuccessCallback:function(e,t){},getVideoUrlById:function(e,t){e&&this.sendRequest({url:"/index.php?r=AppVideo/GetVideoLibURL",data:{id:e},success:function(e){"function"==typeof t&&t(e.data)},error:function(e){console.log(e)}})},chooseImage:function(e){var t=this,a=document.createElement("input");a.type="file",a.style="width:0;height:0;opacity:0;padding:0;margin:0;border:none;",a.accept="image/jpg, image/jpeg, image/gif, image/bmp, image/jp2, image/x-ms-bmp, image/x-png, image/png",document.body.appendChild(a),a.onchange=function(n){t.showLoading({title:"上传中...",icon:"loading",duration:1e4});var o=n.target.files[0];if(o){var i={width:750,quality:.8};(0,f.default)(o,i).then(function(n){(0,h.ajax)({url:"/index.php?r=AppData/uploadImg",data:{img_data:n.base64,org:1},success:function(t){if(0!==t.status)return void d.default.info("图片上传失败，请重试");e&&e(t.data)},complete:function(){t.hideLoading(),a.remove()}})})}},a.click(),setTimeout(function(){a.click()},100)},previewImage:function(e){this.isWeixin()?wx.previewImage({current:e.current||"",urls:e.urls||[e.current]}):ReactDOM.render(React.createElement(D.PreviewImage,{options:e}),document.getElementById("popup"))},saveImageToPhotosAlbum:function(e){},playVoice:function(e){},pauseVoice:function(){},countUserShareApp:function(e){},getShareKey:function(){var e=this;e.sendRequest({url:"/index.php?r=AppShare/GetAppShareKey",success:function(t){0==t.status&&(e.globalData.pageShareKey=t.data)}})},getShareAppSetting:function(){var e=this;this.sendRequest({url:"/index.php?r=AppConfig/GetAppPageShareConfig",data:{},success:function(t){e.globalData.share_img=t.data.share_img,e.globalData.share_title=t.data.share_title}})},shareClickEvent:function(){var e=this;if(this.isWeixin()){var t=document.createElement("div");t.style="position:fixed;top:0;left:0;right:0;bottom:0;background-color:rgba(0,0,0,.6);z-index:50",t.innerHTML='\n      <div><img style="width: 1.2rem;position: absolute;top: .1rem;right: .5rem;" src="https://img.zhichiwangluo.com/zcimgdir/album/file_5d75fa1ace466.png" /></div>\n      <div style="color: #fff;font-size: 0.4rem;text-align: center;margin-top: 3rem;">快速分享给好友</div>\n      <div style="color: #fff;font-size: .3rem;text-align: center;margin-top: .1rem;line-height: 1rem;">点击屏幕右上角 <span style="display: inline-block;font-size: 0.6rem;vertical-align: top;">·</span><span style="display: inline-block;font-size: 0.8rem;vertical-align: top;">·</span><span style="display: inline-block;font-size: 0.6rem;vertical-align: top;">·</span> 按钮，进行分享</div>\n      <div style="text-align: center;margin-top: 0.3rem;">\n        <div style="display:inline-block;margin: 0 0.5rem;"><img style="width: 2rem;" src="https://img.zhichiwangluo.com/zcimgdir/album/file_5d75f79c8d589.png" /><span style="display: block;width: .5rem;height: .5rem;margin: .1rem auto;text-align: center;line-height: .5rem;font-size: .28rem;border-radius:50%;background-color: #fff;">1</span></div>\n        <div style="display:inline-block;margin: 0 0.5rem;"><img style="width: 2rem;" src="https://img.zhichiwangluo.com/zcimgdir/album/file_5d75f79d4e270.png" /><span style="display: block;width: .5rem;height: .5rem;margin: .1rem auto;text-align: center;line-height: .5rem;font-size: .28rem;border-radius:50%;background-color: #fff;">2</span></div>\n      </div>',t.onclick=function(){t.remove()},document.body.appendChild(t)}else{var a=this.getAppCurrentPage();this.setClipboardData({data:a.shareData.path,success:function(){e.showToast({title:"网址已经复制，可以粘贴发给别人"})}})}},shareAppMessage:function(e){var t=this,a="",n="",o=this.getAppCurrentPage(),i=t.globalData.pageShareKey,s=(t.globalData.pageShareType,e.path);return s=i?s.indexOf("?")<0?s+"?psid="+i:s+"&psid="+i:s,n=e.title?e.title:o.data.page_config&&o.data.page_config.share?o.data.page_config.share_title:this.globalData.share_title||this.getAppTitle()||"即速应用",a=e.imageUrl?e.imageUrl:o.data.page_config&&o.data.page_config.share?o.data.page_config.share_img||"":this.globalData.share_img?this.globalData.share_img||"":this.globalData.appLogo,void 0!==t.globalData.p_id&&(s+=~s.indexOf("?")?"&":"?",s+="p_id="+t.globalData.p_id),{title:n,path:s,imageUrl:a}},goPay:function(e){M.payRef.current.showPay({orderId:e.orderId,orderType:e.orderType||1,franchisee:e.franchisee||"",successUrl:e.successUrl||"",failUrl:e.failUrl||"",cancel:e.cancel})},makePhoneCall:function(e){window.location.href="tel:"+e},getLocation:function(e){this.isWeixin()?wx.getLocation({type:e.type||"gcj02",success:function(t){"function"==typeof e.success&&e.success(t)},fail:function(t){"function"==typeof e.fail&&e.fail(t)}}):navigator.geolocation?navigator.geolocation.getCurrentPosition(function(t){var a={latitude:t.coords.latitude,longitude:t.coords.longitude};"function"==typeof e.success&&e.success(a),"function"==typeof e.complete&&e.complete()},function(t){"function"==typeof e.fail&&e.fail(t)}):"function"==typeof e.fail&&e.fail(res)},chooseLocation:function(e){ReactDOM.render(React.createElement(S.ChooseLocation,{options:e}),document.getElementById("popup"))},openLocation:function(e){this.isWeixin()?wx.openLocation({latitude:e.latitude,longitude:e.longitude,scale:e.scale||24,name:e.name||"",address:e.address||"",infoUrl:e.infoUrl||"",success:function(t){"function"==typeof e.success&&e.success(t)},fail:function(t){"function"==typeof e.fail&&e.fail(t)}}):ReactDOM.render(React.createElement(I.OpenLocation,{options:e}),document.getElementById("popup"))},getLatLng:function(e){var t=this,a=t.globalData.locationInfo;if(a.latitude){var n={latitude:a.latitude,longitude:a.longitude};"function"==typeof e.success&&e.success(n)}else this.getLocation({type:"gcj02",success:function(a){var n=a.latitude,o=a.longitude;if(n){t.sendRequest({hideLoading:!0,url:"/index.php?r=Map/GetAreaInfoByLatAndLng",data:{latitude:n,longitude:o},success:function(e){t.setLocationInfo({latitude:n,longitude:o,address:e.data.formatted_addresses.recommend,info:e.data})}});var i={latitude:n,longitude:o};"function"==typeof e.success&&e.success(i)}else"function"==typeof e.fail&&e.fail()},fail:function(){"function"==typeof e.fail&&e.fail()}})},setClipboardData:function(e){var t=document.createElement("input");t.setAttribute("readonly","readonly"),t.setAttribute("value",e.data||""),document.body.appendChild(t),t.setSelectionRange(0,9999),document.execCommand("copy")&&(t.select(),document.execCommand("copy"),"function"==typeof e.success&&e.success()),document.body.removeChild(t)},getClipboardData:function(e){},showShareMenu:function(e){},scanCode:function(e){this.isWeixin()?wx.scanQRCode({needResult:e.needResult||1,scanType:["qrCode","barCode"],success:e.success,fail:e.fail,complete:e.complete}):d.default.info("暂不支持扫码功能")},pageScrollTo:function(e){document.body.scrollTop=document.documentElement.scrollTop=e||0,document.getElementsByClassName("custom-page")[0]&&(document.getElementsByClassName("custom-page")[0].scrollTop=e||0)},getAuthSetting:function(){},getStorage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.getAppId()+"_webapp_"+e.key,a=JSON.parse(localStorage.getItem(t));e.success&&e.success({data:a}),e.complete&&e.complete({data:a})},getStorageSync:function(e){var t=this.getAppId()+"_webapp_"+e;return JSON.parse(localStorage.getItem(t))},setStorage:function(e){e=e||{};var t=this.getAppId()+"_webapp_"+e.key;localStorage.setItem(t,JSON.stringify(e.data))},removeStorage:function(e){e=e||{};var t=this.getAppId()+"_webapp_"+e.key;localStorage.removeItem(t),"function"==typeof e.success&&e.success()},createAnimation:function(e){return{}},chooseAddress:function(e){this.isWeixin()?wx.openAddress({success:function(t){"function"==typeof e.success&&e.success(t)},fail:function(t){"function"==typeof e.fail&&e.fail()}}):d.default.info("除微信里面，其他地方暂时不支持导入")},downloadFile:function(e,t){},connectWifi:function(e){},startWifi:function(e){},wifiErrCode:function(e){},checkSession:function(e){},wechatGzhLogining:!1,goLogin:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(1!=(0,_.getQueryString)("is_preview")){if(this.isWeixin()){if(this.wechatGzhLogining)return;this.wechatGzhLogining=!0;var t=encodeURIComponent(window.location.href);return void(window.location.href="/index.php?r=Weixin/GzhLogin&app_id="+this.getAppId()+"&redirect_url="+t)}this.globalData.currentPages.length>1?this.turnToPage("loginPage",{},1):this.turnToPage("loginPage"),e.success&&(this.getCurrentPage().callbackFun=e.success)}},isLogin:function(){return this.getIsLogin()},requestUserInfo:function(){var e=this;this.sendRequest({url:"/index.php?r=AppData/getUserInfo",type:"get",success:function(t){t.data&&(e.setUserInfoStorage(t.data),setTimeout(function(){e.setPageUserInfo()},0))}})},onPageLoad:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=this,n=this.getAppCurrentPage()||{},o=t.detail||"",i=t.franchisee,s=t.promotionName;n.sharePageParams=t,o&&(n.dataId=o),i&&(n.franchiseeId=i,n.fmode=e.fmode,n.setData({franchiseeInfo:{id:e.franchisee,mode:e.fmode||""}})),s&&this.setPageTitle(s),n.setData({dataId:o,addShoppingCartShow:!1,addTostoreShoppingCartShow:!1,canIUseOfficialAccount:a.globalData.canIUseOfficialAccount,sessionFrom:this.getPageFranchiseeId()||this.globalData.appId}),this.setPageUserInfo(),this.globalData.takeoutRefresh=!1,this.globalData.tostoreRefresh=!1,this.checkTechSupport(),a.globalData.isGoBindPhone&&(a.loginForRewardPoint(a.globalData.loginGetIntegralTime),a.globalData.loginGetIntegralTime="",a.globalData.isGoBindPhone=!1),this.globalData.chainNotLoading||(this.pageDataInitial(),"userCenterComponentPage"===n.data.router&&this.getAppECStoreConfig(function(e){n.setData({storeStyle:e.color_config})}))},toCompareRole:function(e){var t=this.getAppCurrentPage(),a=t.data.customFeature.appRoleData,n=this.getUserInfo();if(!n.role_name)return void("function"==typeof e&&e(!0));if(n.role_name.length>0){var o=!1;n.role_name.forEach(function(e){a.forEach(function(t){if(e==t.role_name)return void(o=!0)})}),o?"function"==typeof e&&e(!1):"function"==typeof e&&e(!0)}else 0===n.role_name.length&&"function"==typeof e&&e(!0)},pullRefreshTime:"",onPagePullDownRefresh:function(){},setPageScroll:function(e){for(var t=this,a=-1,n={bbs:"bbsScrollFuc","list-vessel":"pageScrollFunc","goods-list":"goodsScrollFunc",seckill:"seckillScrollFunc","video-list":"videoScrollFunc",news:"getNewsList",topic:"getTopListData","franchisee-list":"franchiseeScrollFunc","exchange-coupon":"exchangeCouponScrollFunc","dynamic-classify":"pageScrollFunc","community-group":"communityGroupScrollFunc","group-buy-list":"catchMoreGroupList",presell:"catchMorePresellList"},o=0;o<e.data.eles;o++){var i=e.data.eles[o];if(!i||!i.hidden){var s=i.type,r=i.customFeature;n[s]&&("news"==s&&void 0===r.vesselAutoheight||1==r.vesselAutoheight&&0==r.loadingMethod||"bbs"==s)&&(a=o)}}if(-1===a)return void(e.reachBottomFuc=[]);var c=e.data.eles[a],l=c.type,d={param:{compIndex:a}};if("list-vessel"===l||"dynamic-classify"===l)d.triggerFuc=function(e){t.pageScrollFunc(e.compIndex)};else{if(!type2MethodName[l])return;d.triggerFuc=function(t){e.callComponentMethod({componentIndex:a,methodName:type2MethodName[l],argvs:[t.compIndex]})}}e.reachBottomFuc=[d]},pageDataInitial:function(e,t,a){var n=this,o=t||this.getAppCurrentPage(),i=o.requestNum;if(o.downcountObject={},Number(o.data.customFeature.AppRole)&&!a)return void(o.isCompareRole||(o.isCompareRole=!0,this.isLogin()?n.toCompareRole(function(a){a?n.showModal({content:"您暂时没有浏览该页面的权限，请联系小程序管理员开通。",confirm:function(e){o.isCompareRole=!1,n.turnBack()}}):(o.isCompareRole=!1,n.pageDataInitial(e,t,!0))}):this.goLogin({success:function(){n.toCompareRole(function(a){a?n.showModal({content:"您暂时没有浏览该页面的权限，请联系小程序管理员开通。",confirm:function(e){o.isCompareRole=!1,n.turnBack()}}):(o.isCompareRole=!1,n.pageDataInitial(e,t,!0))})}})));if(e||n.setPageScroll(o),o.dataId&&o.data.customFeature.form){var s=parseInt(o.dataId),r={};r.data_id=s,r.form=o.data.customFeature.form,o.requestNum=i+1,n.sendRequest({hideLoading:1!=i++,url:"/index.php?r=AppData/getFormData",data:r,method:"post",chain:!0,success:function(e){var t={},a=e.data[0].form_data;for(var s in a)"category"!=s&&/region/.test(s);t.detailData=a,o.setData(t);var r=n.getFormPageField(o.data);for(var c in a)!function(e){if(r.indexOf(e)>-1&&a[e]instanceof Object&&"video"===a[e].type){var t=a[e];o.requestNum=i+1,n.sendRequest({hideLoading:1!=i++,url:"/index.php?r=AppVideo/GetVideoLibUrl",data:{id:t.id},chain:!0,method:"get",success:function(t){var a=t.data,n={};n["detailData."+e+".videoUrl"]=a,o.setData(n)}})}}(c);o.data.eles.forEach(function(e,t){"dynamic-vessel"===e.type&&o.callComponentMethod({componentIndex:t,methodName:"detailPageInit",argvs:[t,o,a]})})},complete:function(){o.setData({page_hidden:!1})}})}else!o.dataId&&o.data.customFeature.form?n.showModal({content:"数据id为空，页面绑定详情页，需要从列表页跳转"}):o.setData({page_hidden:!1})},onPageScroll:function(e){var t=this.getAppCurrentPage(),a=t.page_router;if(this.globalData.susTopicCompindexs=this.globalData.susTopicsMap[a],this.globalData.susTopicCompindexs&&this.globalData.susTopicCompindexs.length){var n=e.scrollTop>0&&this.globalData.pageScrollTop-e.scrollTop>0;for(var o in this.globalData.susTopicCompindexs){var i=this.globalData.susTopicCompindexs[o];(t.data.eles[i].topicSuspension.topBtnShow||!1)!==n&&t.setData((0,s.default)({},"eles["+i+"].topicSuspension.topBtnShow",n))}}this.globalData.pageScrollTop=e.scrollTop},getIntegralLog:function(e){},CountSpreadCount:function(e){this.sendRequest({hideLoading:!0,url:"/index.php?r=AppSNS/CountSpreadCount",data:{article_id:e},success:function(e){}})},formVirtualPrice:function(e){var t=[],a="";for(var n in e.goods_model)t.push(""==e.goods_model[n].virtual_price?0:Number(e.goods_model[n].virtual_price));return Math.min.apply(Math,t)==Math.max.apply(Math,t)?e.virtual_price instanceof Object?(a=e.virtual_price,a[0].text=Math.min.apply(Math,t).toFixed(2)):a=Math.min.apply(Math,t).toFixed(2):e.virtual_price instanceof Object?(a=e.virtual_price,a[0].text=Math.min.apply(Math,t).toFixed(2)+"~"+Math.max.apply(Math,t).toFixed(2)):a=Math.min.apply(Math,t).toFixed(2)+"~"+Math.max.apply(Math,t).toFixed(2),a},getListVessel:function(e){var t=this,a=[];if("[object Array]"==Object.prototype.toString.call(e.content))for(var n=0;n<e.content.length;n++){var o=e.content[n];if("object"==(0,m.default)(o.content)){var i=t.getListVessel(o);a=a.concat(i)}else o.customFeature&&o.customFeature.segment&&(a.push(o.customFeature.segment),"default_map"==o.customFeature.segment&&(a=a.concat(["region_lng","region_lat","region_string","region_detail"])))}else for(var s in e.content)for(var r=e.content[s],c=0;c<r.length;c++){var l=r[c];if("object"==(0,m.default)(l.content)){var d=t.getListVessel(l);a=a.concat(d)}else l.customFeature&&l.customFeature.segment&&(a.push(l.customFeature.segment),"default_map"==l.customFeature.segment&&(a=a.concat(["region_lng","region_lat","region_string","region_detail"])))}return a},getFormPageField:function(e){var t=this,a=[],n=!0,o=!1,i=void 0;try{for(var s,r=e.eles[Symbol.iterator]();!(n=(s=r.next()).done);n=!0){var c=s.value;if("object"==(0,m.default)(c.content)){var l=t.getListVessel(c);a=a.concat(l)}else c.customFeature&&c.customFeature.segment&&(a.push(c.customFeature.segment),"default_map"==c.customFeature.segment&&(a=a.concat(["region_lng","region_lat","region_string","region_detail"])))}}catch(e){o=!0,i=e}finally{try{!n&&r.return&&r.return()}finally{if(o)throw i}}return a},getElementById:function(e,t){t=t||this.getAppCurrentPage();var a=t.data.eles,n="";for(var o in a){var i=a[o];if(i.type&&i.customFeature.id==e&&!i.hidden){n={index:o,data:i};break}}return n},findComponentIndexById:function(e,t){return t=t||this.getAppCurrentPage(),(t.data.eles||[]).findIndex(function(t){return t.type&&t.customFeature.id==e&&!t.hidden})},getInvolvedFromRefreshObject:function(e,t,a,n){n=n||this.getAppCurrentPage();var o=n.data.eles,i="";a=a||"refresh_object";for(var s in o){var r=o[s];if(r.type&&t==r.type&&r.customFeature[a]==e&&!r.hidden){i={index:s,data:r};break}}return i},getObjectByPath:function(e,t){e=e.replace(/\[(\w+)\]/g,".$1");for(var a=e.split("."),n=0;n<a.length;n++){var o=a[n];if(!t.hasOwnProperty(o))break;t=t[o]}return t},tapEventCommonHandler:function(e){var t=JSON.parse(e.currentTarget.dataset.eventParams),a=e.currentTarget.dataset.compindex;!t.compindex&&a&&(t.compindex=a),(0,E.customEvent)({customFeature:t,event:event})},getAddressByLatLng:function(e,t){this.sendRequest({hideLoading:!0,url:"/index.php?r=Map/getAreaInfoByLatAndLng",data:{latitude:e.lat,longitude:e.lng},success:function(e){t(e)}})},onPageShareAppMessage:function(e){var t=this.getAppCurrentPage(),a=t.route,n=e.target?e.target.dataset.image:"",o=e.target?e.target.dataset.desc:"";a=window.location.origin+"/zc_webapp/"+a,t.setData({pageQRCodeData:{shareDialogShow:"100%",shareMenuShow:!1}});var i={detail:t.dataId,user_token:this.globalData.PromotionUserToken,vcard_user_id:this.globalData.HasCardToShareUserId,franchisee:t.franchiseeId};for(var s in i)i[s]&&(a.indexOf("?")<0?a+="?":a+="&",a+=s+"="+i[s]);return this.shareAppMessage({path:a,imageUrl:n,title:o})},onPageShow:function(){},onPageHide:function(){},returnListHeight:function(e,t,a){return this.getSystemInfoSync().windowHeight},onPageReachBottom:function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach(function(e){e.triggerFuc(e.param)})},onPageUnload:function(e){var t=e||this.getAppCurrentPage(),a=e?e.page_router:t.page_router;this._logining=!1;var n=t.downcountArr;if(n&&n.length)for(var o=0;o<n.length;o++)n[o]&&n[o].clear();this.globalData.newCountDataOnPage[a]&&delete this.globalData.newCountDataOnPage[a];var i=t.downcountObject;for(var s in i){var r=i[s];if(r&&r.length)for(var c=0;c<r.length;c++)r[c]&&r[c].clear()}t.data.eles.forEach(function(e){"vertical-list"===e.type&&e.timer&&clearInterval(e.timer)}),t.data.eles.forEach(function(e,t){"dynamic-classify"===e.type&&(e.classify_observer&&clearInterval(e.classify_observer),e.list_observer&&clearInterval(e.list_observer))})},tapPrevewPictureHandler:function(e){var t=(e.currentTarget.dataset.img,JSON.parse(e.currentTarget.dataset.imgarr));this.previewImage({current:e.currentTarget.dataset.img||t[0],urls:t instanceof Array?t:[t]})},pageScrollFunc:function(e){var t=this.getAppCurrentPage(),a="object"==(void 0===e?"undefined":(0,m.default)(e))?e.currentTarget.dataset.compindex:e,n=t.data.eles[a];if(!n)return void console.log("pageScrollFunc is not find compData");if(n.is_search){var o=n.searchEle;t.callComponentMethod({componentIndex:o,methodName:"searchList",argvs:[o,e]})}else this._pageScrollFunc(e)},_pageScrollFunc:function(e){var t=this.getAppCurrentPage(),a="object"==(void 0===e?"undefined":(0,m.default)(e))?e.currentTarget.dataset.compindex:e,n=t.data.eles[a],o=(n.curpage||0)+1,i={},s={},r=this,c=n.customFeature,l="/index.php?r=AppData/getFormDataList";if("news"===n.type)return n.pageObj.noMore&&"object"==(void 0===e?"undefined":(0,m.default)(e))&&"tap"==e.type?void r.showModal({content:"已经加载到最后了"}):void t.callComponentMethod({componentIndex:a,methodName:"getNewsList",argvs:[{compindex:a,pageInstance:t}]});if(n.is_more||"object"!=(void 0===e?"undefined":(0,m.default)(e))||"tap"!=e.type||r.showModal({content:"已经加载到最后了"}),!n.loading&&n.is_more){if(i["eles["+a+"].loading"]=!0,i["eles["+a+"].loadingFail"]=!1,t.setData(i),"list-vessel"===n.type&&(s=t.data.eles[a].param),s.form=c.form,s.need_column_arr=n.need_column_arr,"dynamic-classify"===n.type){var d=n.currentCategory.length,u=n.currentCategory[d-1];if(2==d)for(var p=n.currentCategory[0],f=0;f<n.classifyData.length;f++){var g=n.classifyData[f];if(g.category_id==p&&0==g.subclass.length){u=p;break}}s={form:n.classifyGroupForm,page_size:n.customFeature.loadingNum||15,idx_arr:{idx:"category",idx_value:u},sort_key:void 0===n.sort_key?"":n.sort_key,sort_direction:void 0===n.sort_direction?"":n.sort_direction}}"group_buy"==c.form&&(l="/index.php?r=AppGroupBuy/GetGroupBuyGoodsList",s.current_status=0),c.source&&"none"!==c.source&&(s.idx_arr={idx:"category",idx_value:c.source}),s.page_size=c.loadingNum||10,s.page=o,this.sendRequest({url:l,data:s,method:"post",hideLoading:!0,chain:!0,subshop:t.franchiseeId||"",success:function(e){i={};var o=n.list_data?n.list_data.length:0;for(var s in e.data){"group_buy"==c.form&&(e.data[s]={form_data:Object.assign({},e.data[s])});for(var l in e.data[s].form_data)if("category"!=l&&!/region/.test(l)){"goods_model"==l&&(e.data[s].form_data.virtual_price=r.formVirtualPrice(e.data[s].form_data)),"distance"==l&&(e.data[s].form_data[l]=R.default.formatDistance(e.data[s].form_data[l]));var d=e.data[s].form_data[l];n.listField&&n.listField.indexOf(l)<0&&/<("[^"]*"|'[^']*'|[^'">])*>/.test(d)&&(e.data[s].form_data[l]="")}i["eles["+a+"].list_data["+(+s+o)+"]"]=e.data[s]}i["eles["+a+"].is_more"]=e.is_more,i["eles["+a+"].curpage"]=e.current_page,i["eles["+a+"].loading"]=!1,i["eles["+a+"].loadingFail"]=!1,t.setData(i)},fail:function(){var e={};e["eles["+a+"].loadingFail"]=!0,e["eles["+a+"].loading"]=!1,t.setData(e)},complete:function(){}})}},franchiseeScrollFunc:function(e){},changeCountRequert:{},changeCount:function(e){var t=e.currentTarget.dataset,a=this,n=this.getAppCurrentPage(),o={},i=t.counted,s=t.compindex,r=t.objrel,c=(t.form,t.index),l=t.parentcompindex||-1,d=l>-1?n.data.eles[l]:null,u=t.parenttype,m=void 0,p=s+"_"+r;m=1==i?"/index.php?r=AppData/delCount":"/index.php?r=AppData/addCount",a.changeCountRequert[p]||(a.changeCountRequert[p]=!0,a.sendRequest({url:m,data:{obj_rel:r},chain:!0,subshop:n.franchiseeId||"",success:function(e){o={},l>-1?"list-vessel"===d.type?(o["eles["+l+"].list_data["+c+"].count_num"]=1==i?parseInt(n.data.eles[l].list_data[c].count_num)-1:parseInt(e.data.count_num),o["eles["+l+"].list_data["+c+"].has_count"]=1==i?0:parseInt(e.data.has_count)):"bbs"===d.type?(o["eles["+l+"].content.data["+c+"].count_num"]=1==i?parseInt(n.data.eles[l].content.data[c].count_num)-1:parseInt(e.data.count_num),o["eles["+l+"].content.data["+c+"].has_count"]=1==i?0:parseInt(e.data.has_count)):"free-vessel"===d.type||"popup-window"===d.type||"dynamic-vessel"===d.type?(path="eles["+l+"].content["+s+"]",o[path+".count_data.count_num"]=parseInt(e.data.count_num),o[path+".count_data.has_count"]=parseInt(e.data.has_count)):u&&0===u.indexOf("list_vessel")&&(o[u+".list_data["+c+"].count_num"]=parseInt(e.data.count_num),o[u+".list_data["+c+"].has_count"]=parseInt(e.data.has_count)):(o["eles["+s+".count_data.count_num"]=parseInt(e.data.count_num),o["eles["+s+".count_data.has_count"]=parseInt(e.data.has_count),n.setData(o)),n.setData(o),a.changeCountRequert[p]=!1},complete:function(){a.changeCountRequert[p]=!1}}))},tapMapDetail:function(e){var t=e.currentTarget.dataset,a=t.eventParams;a&&(a=JSON.parse(a)[0],this.openLocation({latitude:+a.latitude,longitude:+a.longitude,name:a.desc||"",address:a.name||""}))},listVesselTurnToPage:function(e){var t=e.currentTarget.dataset,a=this.getAppCurrentPage(),n=t.dataid,o=t.router,i=t.isseckill,s=t.compindex,r=t.index,c=a.data.eles[s],l=c.list_data[r],d=l.form_data||l;if(this.isTurnToListVesselDetail)return void this.showToast({title:"正在跳转，请勿重复点击",icon:"none"});if(this.isTurnToListVesselDetail=!0,c.haveViewCountEle){c.form}else this.isTurnToListVesselDetail=!1,this.listVesselTurnToPageAct(o,d,n,i)},listVesselTurnToPageAct:function(e,t,a,n){if(""!=e&&-1!=e&&"-1"!=e){var o=this.getPageFranchiseeId(),i=o?"&franchisee="+o:"";if("tostoreDetail"==e)this.turnToPage("toStoreDetail?detail="+a+i);else if("goodsDetail"==e)if(1==n){var s=t.is_seckill_activity?t.is_seckill_activity[0].text:"",r=t.seckill_activity_id?t.seckill_activity_id[0].text:"",c=t.seckill_activity_time_id?t.seckill_activity_time_id[0].text:"";this.turnToPage("seckillDetail?id="+a+"&sec_act_id="+r+"&sec_t_id="+c+"&secType="+s)}else if(t.is_group_buy&&1==t.is_group_buy[0].text){a=t.goods_id[0].text;var l=t.activity_id[0].text||"";this.turnToPage("gpgoodsDetail?goods_id="+a+"&activity_id="+l+i)}else this.turnToPage("goodsDetail?detail="+a+i);else if("videoDetail"==e)this.turnToPage("videoDetail?detail="+a+i);else if("groupGoodsDetail"==e){a=t.goods_id[0].text;var d=t.activity_id[0].text||"";this.turnToPage("gpgoodsDetail?goods_id="+a+"&activity_id="+d+i)}else if("franchiseeDetail"==e){var u=t.mode_id[0].text;this.goToFranchisee(u,{detail:a})}else this.turnToPage(e+"?detail="+a)}},userCenterTurnToPage:function(e){var t=this;if(!this.isLogin())return void this.goLogin({success:function(){t._userCenterToPage(e)}});var a=e.currentTarget.dataset,n=a.router,o=a.openVerifyPhone,i=a.eventParams,s=a.goodsType,r=a.needCollectInfo,c=a.index,l=JSON.parse(i||'""'),d=c;return"myPresale"===n?void this.turnToPage("presellOrderList"):"newsPocketsBalance"===n?void this.turnToPage(n):o&&"false"!==o&&!this.getUserInfo().phone?void this.turnToPage("bindCellphone"):"myOrder"==n&&s?void this.turnToPage(n,{goodsType:s,currentIndex:d}):"vipCard"==n&&T.hasFranchiseeList?1==r?void this.turnToPage(n,{is_member:1,franchisee:T.chainAppId||""}):void this.turnToPage("vipCardList",{from:"userCenterEle"}):void this.turnToPage(n+"?"+l,{from:"userCenterEle"})},turnToGoodsDetail:function(e){var t=e.currentTarget.dataset,a=t.id,n=t.contact,o=t.goodsType,i=t.group,s=t.hidestock,r=t.isshowvirtualprice,c=t.unit,l=this.getPageFranchiseeId(),d=l?"&franchisee="+l:"";if(t.appId&&t.appId!==this.getAppId()&&""===d&&(d+="&franchisee="+t.appId),i&&1==i)return void this.turnToPage("gpgoodsDetail?goods_id="+a+"&activity_id="+t.groupid+"&contact="+n+d);switch(+o){case 0:this.turnToPage("goodsDetail?detail="+a+"&contact="+n+"&hidestock="+s+"&isShowVirtualPrice="+r+d);break;case 1:this.turnToPage("goodsDetail?detail="+a+"&contact="+n+"&hidestock="+s+d);break;case 3:this.turnToPage("toStoreDetail?detail="+a+d);break;case 10:c?this.turnToPage("hotel?contact="+n+"&hidestock="+s+d):this.turnToPage("newAppointmentDetail?detail="+a+"&contact="+n+"&hidestock="+s+d)}},goToFranchisee:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n="";n=1==e?"franchiseeWaimai":3==e?"franchiseeTostore":2==e?"franchiseeDetail4":"franchiseeDetail",this.turnToPage(n,t,a)},_sortListVessel:function(e){var t=this,a=this.getAppCurrentPage(),n=e.compindex,o={},i=a.data.eles[n].need_column_arr||[],s=a.data.eles[n].listField;if(o["eles["+n+"].loading"]=!0,o["eles["+n+"].loadingFail"]=!1,o["eles["+n+"].is_more"]=1,o["eles["+n+"].list_data"]=[],a.setData(o),i.length&&(e.param.need_column_arr=i),"app_shop"==e.param.form&&(s.indexOf("distance")>-1||"distance"==e.param.sort_key)){var r=t.globalData.locationInfo;if(r.latitude)e.param.extra_cond_arr={},e.param.extra_cond_arr.latitude=r.latitude,e.param.extra_cond_arr.longitude=r.longitude;else if("distance"==e.param.sort_key)return void t.getLatLng({success:function(a){e.param.extra_cond_arr={},e.param.extra_cond_arr.latitude=a.latitude,e.param.extra_cond_arr.longitude=a.longitude,t._sortListVessel(e)},fail:function(){t.showToast({title:"定位失败，店铺距离将获取不到",icon:"none"}),e.param.sort_key="",t._sortListVessel(e)}})}this.sendRequest({url:"/index.php?r=AppData/getFormDataList",data:e.param,method:"post",hideLoading:!0,chain:!0,subshop:a.franchiseeId||"",success:function(o){var i={};for(var r in o.data)for(var c in o.data[r].form_data)if("category"!=c&&!/region/.test(c)){"goods_model"==c&&(o.data[r].form_data.virtual_price=t.formVirtualPrice(o.data[r].form_data)),"distance"==c&&(o.data[r].form_data[c]=R.default.formatDistance(o.data[r].form_data[c]));var l=o.data[r].form_data[c];s.indexOf(c)<0&&/<("[^"]*"|'[^']*'|[^'">])*>/.test(l)&&(o.data[r].form_data[c]="")}i["eles["+n+"].list_data"]=o.data,i["eles["+n+"].is_more"]=o.is_more,i["eles["+n+"].curpage"]=1,i["eles["+n+"].loading"]=!1,i["eles["+n+"].loadingFail"]=!1,"dynamic-classify"===a.data.eles[n].type&&(i["eles["+n+"].sort_key"]=e.param.sort_key||"",i["eles["+n+"].sort_direction"]=e.param.sort_direction),a.setData(i)},fail:function(e){var t={};t["eles["+n+"].loadingFail"]=!0,t["eles["+n+"].loading"]=!1,a.setData(t)}})},_sortGoodsList:function(e){var t=this,a=this.getAppCurrentPage(),n=e.compindex,o={},i=a.data.eles[n];if(e.param.page_size=i.customFeature.loadingNum||10,o["eles["+n+"].loading"]=!0,o["eles["+n+"].loadingFail"]=!1,o["eles["+n+"].is_more"]=1,o["eles["+n+"].goods_data"]=[],o["eles["+n+"].param.sort_key"]=e.param.sort_key,o["eles["+n+"].param.sort_direction"]=e.param.sort_direction,a.setData(o),"new_appointment"==i.customFeature.form&&!i.customFeature.tpl_id){var s={};return s["eles["+n+"].is_more"]=0,s["eles["+n+"].loadingFail"]=!1,s["eles["+n+"].loading"]=!1,void a.setData(s)}this.sendRequest({url:"/index.php?r=AppShop/GetGoodsList",data:e.param,method:"post",hideLoading:!0,chain:!0,subshop:a.franchiseeId||"",success:function(i){if(0==i.status){var s=t.getAppId(),r=i.data;r.map(function(t){t.form_data.goods_model&&delete t.form_data.goods_model,1==+e.param.is_app_shop_cate_goods&&t.form_data.app_id!==s?t.form_data.isSubShopGoods=!0:t.form_data.isSubShopGoods=!1}),o["eles["+n+"].goods_data"]=r,o["eles["+n+"].is_more"]=i.is_more,o["eles["+n+"].curpage"]=1,o["eles["+n+"].loading"]=!1,o["eles["+n+"].loadingFail"]=!1,a.setData(o)}},fail:function(e){var t={};t["eles["+n+"].loadingFail"]=!0,t["eles["+n+"].loading"]=!1,a.setData(t)}})},_sortFranchiseeList:function(e){var t=this,a=this.getAppCurrentPage(),n=e.compindex,o={},i=a.data.eles[n];if(e.param.latitude=i.param.latitude,e.param.longitude=i.param.longitude,o["eles["+n+"].loading"]=!0,o["eles["+n+"].loadingFail"]=!1,o["eles["+n+"].is_more"]=1,o["eles["+n+"].curpage"]=0,o["eles["+n+"].franchisee_data"]=[],o["eles["+n+"].param"]=e.param,a.setData(o),"distance"==e.param.sort_key&&!e.param.latitude)return void t.showModal({content:"未获取到定位！"});this.sendRequest({url:"/index.php?r=AppShop/GetAppShopByPage",data:e.param,method:"post",success:function(e){if(0==e.status){var o={};for(var i in e.data){var s=e.data[i].distance;e.data[i].distance=R.default.formatDistance(s)}t._getMyAppShopList(n,a),o["eles["+n+"].franchisee_data"]=e.data,o["eles["+n+"].is_more"]=e.is_more,o["eles["+n+"].curpage"]=1,o["eles["+n+"].loading"]=!1,o["eles["+n+"].loadingFail"]=!1,a.setData(o)}},fail:function(e){var t={};t["eles["+n+"].loadingFail"]=!0,t["eles["+n+"].loading"]=!1,a.setData(t)}})},_getMyAppShopList:function(e,t){var a=this;a.sendRequest({url:"/index.php?r=AppShop/GetMyAppShopList",data:{parent_app_id:a.getAppId()},hideLoading:!0,success:function(a){var n={},o=t.data.eles[e].franchisee_data||[],i=a.data,s=[];if(reset){for(var r=0,c=0;c<o.length&&2==o[c].is_audit;c++)r++;o.splice(0,r)}for(var l=0;l<i.length;l++)2==i[l].is_audit&&(o.unshift(i[l]),s.push(i[l].id));if(reset)for(var d=0;d<o.length;d++)1==o[d].is_audit&&s.indexOf(o[d].id)>-1&&o.splice(d,1);n["eles["+e+".franchisee_data"]=o,t.setData(n)}})},_sortVideoList:function(e){var t=this,a=this.getAppCurrentPage(),n=e.compindex,o={};o["eles["+n+"].loading"]=!0,o["eles["+n+"].loadingFail"]=!1,o["eles["+n+"].is_more"]=1,o["eles["+n+"].video_data"]=[],o["eles["+n+"].param"]=e.param,a.setData(o),this.sendRequest({url:"/index.php?r=AppVideo/GetVideoList",data:e.param,method:"post",hideLoading:!0,chain:!0,subshop:a.franchiseeId||"",success:function(e){for(var o=e.data,i={},s=0;s<o.length;s++)o[s].video_view=t.handlingNumber(o[s].video_view);i["eles["+n+"].video_data"]=o,i["eles["+n+"].is_more"]=e.is_more,i["eles["+n+"].curpage"]=e.current_page,i["eles["+n+"].loading"]=!1,i["eles["+n+"].loadingFail"]=!1,a.setData(i)},fail:function(e){var t={};t["eles["+n+"].loadingFail"]=!0,t["eles["+n+"].loading"]=!1,a.setData(t)}})},callPhone:function(e){var t=e.currentTarget.dataset.phone;this.makePhoneCall(t)},getNationList:function(e){var t=this.getAppCurrentPage(),a={};this.sendRequest({url:"/index.php?r=Region/getNationList",data:{page:1,page_size:10},success:function(n){a["eles["+e+"].nationList"]=n.data.reverse(),t.setData(a)}})},tapRefreshListHandler:function(e,t){var a=this.getAppCurrentPage(),n=t||JSON.parse(e.currentTarget.dataset.eventParams),o=n.refresh_object,i=this.findComponentIndexById(o);if(i>-1){var s=a.data.eles[i],r=s.type,c=s.param||{},l={compindex:i,param:c};this._refreshPageList(r,n,l,a)}},_refreshPageList:function(e,t,a,n){var o=-1==t.index_value?"":t.index_value,i={page:1,form:a.param.form,is_integral:a.param.is_integral,is_count:a.param.form&&a.param.is_count?1:0,idx_arr:{idx:t.index_segment,idx_value:o}},s={};if(s["eles["+a.compindex+"].is_search"]=!1,n.setData(s),a.param.idx_arr=i.idx_arr,"goods-list"===e||"list-vessel"===e||"topic-list"===e||"group-buy-list"==e){var r=n.data.eles[a.compindex].customFeature;if(i.page_size=r.loadingNum||10,"goods-list"===e&&(r.isShowGroupBuyGoods&&(i.is_group_buy=1),r.controlCheck?i.is_integral=3:r.isIntegral?i.is_integral=1:i.is_integral=5),i.tpl_id=a.param.tpl_id,"new_appointment"==i.form&&!i.tpl_id){var c={};return c["eles["+a.compindex+"].goods_data"]=[],c["eles["+a.compindex+"].is_more"]=0,void n.setData(c)}}switch(e){case"goods-list":n.callComponentMethod({componentIndex:a.compindex,methodName:"_refreshGoodsList",argvs:[a.compindex,i,n]});break;case"list-vessel":n.callComponentMethod({componentIndex:a.compindex,methodName:"_refreshListVessel",argvs:[a.compindex,i,n]});break;case"franchisee-list":n.callComponentMethod({componentIndex:a.compindex,methodName:"_refreshFranchiseeList",argvs:[a.compindex,i,n]});break;case"topic-list":n.callComponentMethod({componentIndex:a.compindex,methodName:"_refreshTopicList",argvs:[a.compindex,i,n]});break;case"news-list":n.callComponentMethod({componentIndex:a.compindex,methodName:"_refreshNewsList",argvs:[a.compindex,i,n]});break;case"video-list":n.callComponentMethod({componentIndex:a.compindex,methodName:"_refreshVideoList",argvs:[a.compindex,i,n]});break;case"group-buy-list":n.callComponentMethod({componentIndex:a.compindex,methodName:"_refreshGroupBuyList",argvs:[a.compindex,i,n]}),this._refreshGroupBuyList(a.compindex,i,n)}},_isOpenCommunityGroup:function(e){var t=this;this.sendRequest({url:"/index.php?r=AppDistribution/getDistributionInfo",success:function(a){if(a.data&&a.data.app_id){if(t.globalData.getDistributionInfo=a.data,"function"==typeof e)return void e(a.data);t._isOpenCommunityGroupCenter(!0)}else t.showModal({content:"暂未开启推广"})}})},_isOpenCommunityGroupCenter:function(e){var t=this;this.sendRequest({hideLoading:!0,url:"/index.php?r=AppDistribution/getDistributorInfo",success:function(a){if(e){var n=+t.globalData.getDistributionInfo.threshold_type,o=a.data&&a.data.dis_group_info?+a.data.dis_group_info.is_block_up:"",i=a.data&&a.data.dis_group_info?a.data.dis_group_info.is_audit:"";t.globalData.getDistributorInfo=a.data,1==+i||1==+o?t.turnToPage("/communityGroup/pages/communityGroupUserCenter/communityGroupUserCenter"):2==+i||3==+i?t.turnToPage("/communityGroup/pages/communityGroupApplyStatus/communityGroupApplyStatus"):1!=n?t.turnToPage("/communityGroup/pages/communityGroupDoor/communityGroupDoor"):0==+t.globalData.getDistributionInfo.role_setting[6].pop_up_type&&t.globalData.getDistributionInfo.role_setting[6].illustration?t.turnToPage("/communityGroup/pages/communityRecruit/communityRecruit"):t.turnToPage("/communityGroup/pages/communityGroupApply/communityGroupApply")}else a.data&&(t.globalData.p_id=a.data.id,t.globalData.PromotionUserToken=a.data.user_token)}})},_isOpenPromotion:function(e){},_isPromotionPerson:function(e){},_hasSelfCard:function(){},showGoodsShoppingcart:function(e){var t=this.getAppCurrentPage(),a=e.currentTarget.dataset,n=a.id,o=a.buynow,i=a.isshowvirtualprice||"",s={goodsId:n,showBuynow:o,showVirtualPrice:i,franchisee:t.franchiseeId||this.getChainId()};a.appId&&a.appId!==this.getAppId()&&(s.franchisee=a.appId),M.goodsShoppingCartRef.current.showDialog(s)},showAddShoppingcart:function(e){var t=this.getAppCurrentPage(),a=e.currentTarget.dataset,n=a.id,o={goodsId:n,franchisee:t.franchiseeId||this.getChainId()};a.appId&&a.appId!==this.getAppId()&&(o.franchisee=a.appId),M.tostoreShoppingCartRef.current.show(o)},getTostoreCartList:function(){var e=this.getAppCurrentPage(),t=e.franchiseeId||this.getChainId();this.sendRequest({url:"/index.php?r=AppShop/cartList",data:{page:1,page_size:100,sub_shop_app_id:t||"",parent_shop_app_id:t?this.getAppId():""},success:function(t){for(var a=0,n=0,o=0,i=!1,s=t.data.length-1;s>=0;s--){var r=t.data[s];3==r.goods_type&&(i=!0,a+=+r.num*+r.price,n+=+r.num),e.goodsId==r.goods_id&&(o=r.num,e.cart_id=r.id)}e.setData({tostoreTypeFlag:i,cartGoodsNum:n,cartGoodsTotalPrice:a.toFixed(2),addToShoppingCartCount:o})}})},turnToSearchPage:function(e){var t=this.getAppCurrentPage(),a=e.target.dataset.listid,n="";if(a){var o="",i=this.findComponentIndexById(a,t),s=t.data.eles[i].customFeature;o=s.controlCheck?3:s.isIntegral?1:5,n="&isHideStock="+s.isHideStock+"&isHideSales="+s.isHideSales+"&isShowVirtualPrice="+s.isShowVirtualPrice+"&isShoppingCart="+s.isShoppingCart+"&isBuyNow="+s.isBuyNow,s.source&&"none"!==s.source&&(n+="&category="+s.source),o&&(n+="&integral="+o),"goods"===s.form&&s.isShowFranchiseeGoods&&!t.franchiseeId&&(n+="&isShowFG=1")}e.target.dataset.param?this.turnToPage("advance-search?param="+e.target.dataset.param+n):this.turnToPage("advance-search?form="+e.target.dataset.form+n)},getBoundingClientRect:function(e,t){var a=document.querySelectorAll(e),n=[];a.forEach(function(e){n.push({id:e.id,left:e.offsetLeft,right:e.offsetLeft+e.offsetWidth,top:e.offsetTop,bottom:e.offsetTop+e.offsetHeight,width:e.offsetWidth,height:e.offsetHeight})}),"function"==typeof t&&t(n)},beforeSeckillDownCount:function(e,t,a){var n=this;return n.seckillDownCount({startTime:e.server_time,endTime:e.seckill_start_time,showDays:!0,callback:function(){var o={};o[a+".seckill_start_state"]=1,o[a+".server_time"]=e.seckill_start_time,t.setData(o),e.server_time=e.seckill_start_time,n.duringSeckillDownCount(e,t,a)}},t,a+".downCount")},duringSeckillDownCount:function(e,t,a){var n=this;return n.seckillDownCount({startTime:e.server_time,endTime:e.seckill_end_time,showDays:!0,callback:function(){var e={};e[a+".seckill_start_state"]=2,t.setData(e)}},t,a+".downCount")},beforeGroupDownCount:function(e,t,a){var n=this;return n.seckillDownCount({startTime:e.server_time,endTime:e.seckill_start_time,showDays:!0,callback:function(){var o={};o[a+".status"]=3,o[a+".current_status"]=3,o[a+".server_time"]=e.seckill_start_time,t.setData(o),e.server_time=e.seckill_start_time,n.duringGroupDownCount(e,t,a);a.split(".")[0]}},t,a+".downCount")},duringGroupDownCount:function(e,t,a){var n=this;return n.seckillDownCount({startTime:e.server_time,endTime:e.seckill_end_time,showDays:!0,callback:function(){var e={};e[a+".status"]=4,e[a+".current_status"]=4,t.setData(e),"myTeams"==a&&t.loadMyTeams()}},t,a+".downCount")},seckillFunc:{},seckillInterval:"",seckillDownCount:function(e,t,a){var n=this,o={startTime:e.startTime||null,endTime:e.endTime||null,callback:e.callback,showDays:e.showDays||!1},i=this.isIos();i&&/\-/g.test(o.endTime)&&(o.endTime=o.endTime.replace(/\-/g,"/")),i&&/\-/g.test(o.startTime)&&(o.startTime=o.startTime.replace(/\-/g,"/")),/^\d+$/.test(o.endTime)&&(o.endTime=1e3*o.endTime),/^\d+$/.test(o.startTime)&&(o.startTime=1e3*o.startTime);var s=new Date(o.endTime),r=new Date(o.startTime),c=s-r,l={},d="sk"+parseInt(1e8*Math.random());return l={opts:e,page:t,path:a,difference:c,index:d},n.seckillFunc[d]=l,n.seckillInterval||(n.seckillInterval=setInterval(function(){var e={},t=n.seckillFunc;for(var a in t){var o=t[a],i=o.difference,s=o.path,r=o.page,c=r.id;if(e[c]||(e[c]={page:r,data:{}}),i<0){var l=t[a].opts.callback;l&&"function"==typeof l&&l(),delete n.seckillFunc[a]}else{var d=n.seckillCountTime(i,o.opts);e[c].data[s+".hours"]=d[0],e[c].data[s+".minutes"]=d[1],e[c].data[s+".seconds"]=d[2],o.opts.showDays&&(e[c].data[s+".days"]=d[3]),n.seckillFunc[a].difference-=1e3}}for(var u in e)e[u].page.setData(e[u].data)},1e3)),{isClear:!1,clear:function(){this.isClear||(this.isClear=!0,delete n.seckillFunc[d],R.default.isPlainObject(n.seckillFunc)&&(clearInterval(n.seckillInterval),n.seckillInterval=""))}}},seckillCountTime:function(e,t){if(e<0)return["00","00","00"];var a=[],n="",o=Math.floor(e/36e5),i=Math.floor(e%36e5/6e4),s=Math.floor(e%6e4/1e3);return t.showDays&&(n=Math.floor(e/864e5),o=Math.floor(e%864e5/36e5)),o=String(o).length>=2?o:"0"+o,i=String(i).length>=2?i:"0"+i,s=String(s).length>=2?s:"0"+s,a[0]=o,a[1]=i,a[2]=s,t.showDays&&(a[3]=n),a},getAssessList:function(e){e.url="/index.php?r=AppShop/GetAssessList",this.sendRequest(e)},getOrderDetail:function(e){e.url="/index.php?r=AppShop/getOrder",this.sendRequest(e)},showUpdateTip:function(){},textToMap:function(e){},turnToVideoDetail:function(e){var t=e.currentTarget.dataset.id,a=this.getPageFranchiseeId(),n=a?"&franchisee="+a:"";this.turnToPage("videoDetail?detail="+t+n)},handlingNumber:function(e){return e=+e,e>1e6?Math.floor(e/1e4)+"万":e>1e4?(e/1e4).toString().replace(/([0-9]+.[0-9]{1})[0-9]*/,"$1")+"万":e},needParseRichText:function(e){return!1},calculationDistanceByLatLng:function(e,t,a,n){var o=Math.PI,i=(e-a)*o/180,s=(t-n)*o/180,r=2*Math.asin(Math.sqrt(Math.pow(Math.sin(i/2),2)+Math.cos(e*o/180)*Math.cos(a*o/180)*Math.pow(Math.sin(s/2),2)));return r*=6378137,r=Math.round(1e4*r)/1e4},isNeedRewardModal:function(){var e=this;e.sendRequest({hideLoading:!0,url:"/index.php?r=appShop/isNeedLogin",data:{},success:function(t){0!=t.status||1!=t.data||e.isLogin()||e.goLogin({})}})},loginForRewardPoint:function(e){},getCollectActivity:function(){},recvCollectRewards:function(){},getEffectActivity:function(e){},getRecvChance:function(e,t,a){},recvRewards:function(e){},rewardPointCB:function(e){},animationEnd:function(e){},getAppECStoreConfig:function(e,t){var a=this;return this.globalData.goodsStoreConfig&&!t?void e(this.globalData.goodsStoreConfig):t&&this.globalData.goodsfranchiseeStoreConfig[t]?void e(this.globalData.goodsfranchiseeStoreConfig[t]):(t=t||this.getPageFranchiseeId(),void this.sendRequest({url:"/index.php?r=AppEcommerce/getAppBECStoreConfig",data:{sub_shop_app_id:t||""},success:function(n){t?a.globalData.goodsfranchiseeStoreConfig[t]=n.data:a.globalData.goodsStoreConfig=n.data,e&&e(n.data)}}))},addLog:function(){},addDebug:function(){},addInfo:function(){},addWarn:function(){},addError:function(){},saveLog:function(e,t){},sendLog:function(){},getChainStoreInfo:function(){},businessTimeCompare:function(e){var t=new Date,a=t.getMinutes().toString();a.length<=1&&(a="0"+a);for(var n=+(t.getHours().toString()+a),o=!1,i=0;i<e.length;i++)n>+e[i].start_time_str&&n<+e[i].end_time_str&&(o=!0);return o},clearChainInfo:function(){this.globalData.chainAppId="",this.globalData.chainHistoryDataId="",this.globalData.indexPageRefresh=!0,this.globalData.p_u=""},getPageFranchiseeId:function(){return(this.getAppCurrentPage()||{}).franchiseeId||this.getChainId()||""},setCommunityGroupRefresh:function(){},setNowGommunityToken:function(e){this.setStorage({key:"nowGommunityToken",data:e})},getNowGommunityToken:function(){return this.getStorageSync("nowGommunityToken")},getCommunityActiveMessage:function(){},pageRoot:{},addSubShopView:function(e){this.sendRequest({url:"/index.php?r=AppShopManage/AddSubShopView",data:{sub_app_id:e},success:function(e){},fail:function(){}})},getPromotionPersonId:function(e){},checkTechSupport:function(e){var t=this;if(e=e||this.getAppCurrentPage(),t.globalData.techSupport)return void e.setData({techSupport:t.globalData.techSupport});this.sendRequest({hideLoading:!0,url:"/index.php?r=AppData/CheckTechSupport",success:function(a){t.globalData.techSupport=a.data,e.setData({techSupport:a.data})}})},checkIsSubOrParentShop:function(){var e=this;this.globalData.shopTypeData||this.sendRequest({url:"/index.php?r=AppShopManage/CheckIsAppSubOrParentShop",success:function(t){t.data&&e.setShopTypeData(t.data)}})},getHomepageRouter:function(){return this.globalData.homepageRouter},setAppId:function(e){(0,v.setAppId)(e),this.globalData.appId=e},getAppId:function(){return this.globalData.appId||(0,v.getAppId)()},getChainAppId:function(){return this.globalData.chainAppId||this.globalData.appId},getChainId:function(){return this.globalData.chainAppId||""},getPageRouter:function(){var e=this.getAppCurrentPage();return e?e.data.router:this.globalData.pageRouter},setPageRouter:function(e){var t=e.match(/.*\/(\w+)\??$/);t&&(this.globalData.pageRouter=t[1])},getLastPageRouter:function(){this.getAppCurrentPage();return y.pageInstance?y.pageInstance.data.router:this.globalData.pageRouter},getDefaultPhoto:function(){return this.globalData.defaultPhoto},getSessionKey:function(){},setSessionKey:function(e){},getUserInfo:function(e){return e?this.globalData.userInfo[e]:this.globalData.userInfo},setUserInfoStorage:function(e){for(var t in e)this.globalData.userInfo[t]=e[t];this.setStorage({key:"userInfo",data:this.globalData.userInfo})},setPageUserInfo:function(e){var t=this.getAppCurrentPage();if(t){var a={};a.userInfo=this.getUserInfo(),t.setData(a)}},getAppCurrentPage:function(e){return y.pageInstance},getTabPagePathArr:function(){return this.globalData.tabBarPagePathArr},getAppTitle:function(){return this.globalData.appTitle},getWxParseResult:function(e){return e},getAppDescription:function(){return this.globalData.appDescription},setLocationInfo:function(e){this.globalData.locationInfo=e},getLocationInfo:function(){return this.globalData.locationInfo},getSiteBaseUrl:function(){return this.globalData.siteBaseUrl},getCdnUrl:function(){return this.globalData.cdnUrl},getUrlLocationId:function(){return this.globalData.urlLocationId},getPreviewGoodsInfo:function(){return this.globalData.previewGoodsOrderGoodsInfo},setPreviewGoodsInfo:function(e){this.globalData.previewGoodsOrderGoodsInfo=e},getGoodsAdditionalInfo:function(){return this.globalData.goodsAdditionalInfo},setGoodsAdditionalInfo:function(e){this.globalData.goodsAdditionalInfo=e},showQRRemark:function(e){var t={},a=e.currentTarget.dataset.compindex,n=e.currentTarget.dataset.isshow,o=this.getAppCurrentPage();if("true"==n){t["eles["+a+"].userData.qrRemarkShow"]=!0,o.setData(t);var i=e.currentTarget.dataset.id,s=e.currentTarget.dataset.type;this.sendRequest({url:"/index.php?r=appVipCard/getVipQRCode",data:{id:i,is_paid_vip:s},chain:!0,subshop:o.franchiseeId||"",success:function(e){var t={};t["eles["+a+"].qrData"]=e.data,o.setData(t)}})}else t["eles["+a+"].userData.qrRemarkShow"]=!1,o.setData(t)},getIsLogin:function(){var e=this.getAppId();return 1==_.docCookies.getItem(e+"_webappLogin")},setIsLogin:function(e){var t=this.getAppId();if(e){var a=new Date;a.setMinutes(a.getMinutes()+120),_.docCookies.setItem("webappLogin","1",a),_.docCookies.setItem(t+"_webappLogin","1",a),this.globalData.isLogin=!0}else _.docCookies.setItem("webappLogin","0"),_.docCookies.setItem(t+"_webappLogin","0"),this.globalData.isLogin=!1},getSystemInfoData:function(){var e={};if(this.globalData.systemInfo)return this.globalData.systemInfo;try{this.isWeixin()?(e=wx.getSystemInfoSync(),e.rpxRatio=750/e.windowWidth):e.rpxRatio=750/window.screen.width,this.setSystemInfoData(e)}catch(e){this.showModal({content:"获取系统信息失败 请稍后再试"})}return e||{}},setSystemInfoData:function(e){this.isWeixin()?e.rpxRatio=750/e.windowWidth:e.rpxRatio=750/window.screen.width,this.globalData.systemInfo=e},setShopTypeData:function(e){this.globalData.shopTypeData=e},getShopTypeData:function(){return this.globalData.shopTypeData},isTabBarPage:function(){var e=this.getAppCurrentPage(),t=!1;return e&&this.globalData.tabBarPagePathArr.indexOf(e.route)>-1&&(t=!0),t},getCurrentPages:function(){return this.globalData.currentPages},getCurrentPage:function(){var e=this.getCurrentPages();return e[e.length-1]},autoTouristLogin:function(){var e=this;this.sendRequest({url:"/index.php?r=AppUser/phoneReg",data:{phone:"16666666666",code:"123456"},success:function(){e.setIsLogin(!0),e.requestUserInfo()}})},createVideoContext:function(e){return document.getElementById(e)},getSystemInfo:function(e){return{screenWidth:window.screen.width,screenHeight:window.screen.height,windowWidth:window.innerWidth,windowHeight:window.innerHeight}},getSystemInfoSync:function(e){return this.getSystemInfo(e)},isWeixin:function(){var e=!1;return"micromessenger"==navigator.userAgent.toLowerCase().match(/MicroMessenger/i)&&(e=!0),function(){return e}}(),isAndroid:function(){var e=navigator.userAgent.toLowerCase();return e.indexOf("android")>-1||e.indexOf("linux")>-1},isIos:function(){return!!navigator.userAgent.toLowerCase().match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)},isPC:function(){return!navigator.userAgent.match(/(Android|webOS|iPhone|iPad|iPod|BlackBerry|Windows Phone)/i)}};a.setApp=P,a.appInstance=M,a.appMethod=L,a.globalData=T},function(e,t,a){"use strict";function n(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),a=window.location.search.substr(1).match(t);return null!=a?decodeURIComponent(a[2]):""}function o(e,t,a){if(!a)return e;var n=new RegExp("([?&])"+t+"=.*?(&|$)","i"),o=-1!==e.indexOf("?")?"&":"?";return e.match(n)?e.replace(n,"$1"+t+"="+a+"$2"):e+o+t+"="+a}function i(e,t){window.history.replaceState(null,"",o(window.location.href,""+e,""+t))}function s(e){var t=/-(\w)/g;return e.replace(t,function(e,t){return t.toUpperCase()})}function r(e){var t={};for(var a in e)t[s(a)]=e[a];return t}function c(e){var t={};for(var a in e){var n=e[a];n===n+""&&(n=n.replace(/;/gi,""),n.indexOf("px")>-1&&(isNaN(Number(n.replace(/px/gi,"")))||(n=v(n,320)))),t[s(a)]=n}return t}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t={};return d(e).split(";").forEach(function(e){if(e){var a=e.split(/:/);a.length>2&&(a[1]=a.slice(1).join(":"));var n=s(a[0].trim()),o=a[1].trim();t[n]=o}}),t}function d(e){return u(u(e,.01,"rpx","rem"),.02,"px","rem")}function u(e,t,a,n){var o=new RegExp("\\s*(\\d+)*(\\.)*(\\d+)*(-)*(\\d+)"+a,"img"),i=n||a;return e.replace(o,function(e){var n=e.trim().replace(a,"");return" "+(n=parseInt(1e4*+n,10)*t/1e4)+i})}function m(e){var t=/style={([\s\S]*?)}/gm,a=/style="([\s\S]*?)"/gm;return e.replace(t,"style={convertLineStyleData($1)}").replace(a,"style={convertLineStyleData('$1')}")}function p(e){var t={Block:"React.Fragment",View:"div",Text:"span",Form:"form",Video:"video",Label:"label",Button:"button",Input:"input",Image:"img"},a=/(<Block)|(<View)|(<Text)|(<Form)|(<Video)|(<Label)|(<Button)|(<Input)|(<Image)/g,n=/(<\/Block>)|(<\/View>)|(<\/Text>)|(<\/Form>)|(<\/Video>)|(<\/Label>)|(<\/Button>)|(<\/Input>)|(<\/Image>)/g;return e.replace(a,function(e){return"<"+t[e.replace(/</,"")]}).replace(n,function(e){return"</Input>"===e||"</Image>"===e?e.replace(e,""):"</"+t[e.replace(/<\/|>/g,"")]+">"})}function f(e){return!!/^1\d{10}$/.test(e.trim())}function g(e){var t,a,n,o,i,s,r,c="";for(t in e)if((a=e[t])instanceof Array)for(r=0;r<a.length;++r)i=a[r],n=t+"["+r+"]",s={},s[n]=i,c+=g(s)+"&";else if(a instanceof Object)for(o in a)i=a[o],n=t+"["+o+"]",s={},s[n]=i,c+=g(s)+"&";else void 0!==a&&null!==a&&(c+=encodeURIComponent(t)+"="+encodeURIComponent(a)+"&");return c.length?c.substr(0,c.length-1):c}function h(e){var e=e||"PHPSESSID",t=new RegExp("(^|\\D)"+e+"=([^&]*?)($|;)"),a=document.cookie.match(t);return null!=a?decodeURIComponent(a[2]):null}function v(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:750;return e===+e?7.5*e/t+"rem":e===e+""?e.indexOf("rem")>-1?e:7.5*Number(e.replace(/px/gi,""))/t+"rem":"0rem"}function _(e){switch(e){case"goods":return 0;case"appointment":return 1;case"waimai":return 2;case"tostore":return 3;case"new_appointment":return 10;default:return 0}}function y(e){switch(+e||0){case 0:return"goods";case 1:return"appointment";case 2:return"waimai";case 3:return"tostore";case 10:return"new_appointment";default:return"goods"}}function E(e){for(var t=e.split("?")[1],a={},n=t?t.split("&"):[],o=null,i=0;i<n.length;i++){o=n[i].split("=");var s=decodeURIComponent(o[0]),r=decodeURIComponent(o[1]);s&&(a[s]=r)}return a}function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="";for(var a in e)""+e[a]&&"undefined"!=e[a]&&void 0!==e[a]&&(t+=a+"="+encodeURIComponent(e[a])+"&");return t?"?"+t:""}function N(){var e={},t=window.location.search;-1!==t.indexOf("?")&&t.substring(1).split("&").forEach(function(t){var a=t.split("=");e[decodeURIComponent(a[0])]=decodeURIComponent(a[1])});return e}function R(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t="",a=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],n=0;n<e;n++){t+=a[Math.round(Math.random()*(a.length-1))]}return t}Object.defineProperty(t,"__esModule",{value:!0}),t.getQueryString=n,t.updateQueryStringParameter=o,t.updateUrlParam=i,t.cssStyle2DomStyle=s,t.cssObj2DomObj=r,t.convertStyleData=c,t.convertLineStyleData=l,t.getOld2NewCssData=d,t.zoomUnit=u,t.convertTagStyle=m,t.convertHtmlTag=p,t.checkIfPhone=f,t.tranform2UrlEncode=g,t.getCookiePara=h,t.transformPx2Rem=v,t.getGoodsTypeByForm=_,t.getFormByGoodsType=y,t.getUrlQueryStringObj=E,t.getUrlSearch=b,t.getCurrentPageQueryParams=N,t.randomWord=R;t.docCookies={getItem:function(e){return decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(e).replace(/[-.+*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null},setItem:function(e,t,a,n,o,i){if(!e||/^(?:expires|max\-age|path|domain|secure)$/i.test(e))return!1;var s="";if(a)switch(a.constructor){case Number:s=a===1/0?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+a;break;case String:s="; expires="+a;break;case Date:s="; expires="+a.toUTCString()}return document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+s+(o?"; domain="+o:"")+(n?"; path="+n:"")+(i?"; secure":""),!0},removeItem:function(e,t,a){return!(!e||!this.hasItem(e))&&(document.cookie=encodeURIComponent(e)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(a?"; domain="+a:"")+(t?"; path="+t:""),!0)},hasItem:function(e){return new RegExp("(?:^|;\\s*)"+encodeURIComponent(e).replace(/[-.+*]/g,"\\$&")+"\\s*\\=").test(document.cookie)},keys:function(){for(var e=document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/),t=0;t<e.length;t++)e[t]=decodeURIComponent(e[t]);return e}}},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t,a){Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:function(){return"props"===a?e.props:(0,f.default)({},e.props,e.state)}})}Object.defineProperty(t,"__esModule",{value:!0});var i=a(0),s=n(i),r=a(3),c=n(r),l=a(1),d=n(l),u=a(2),m=n(u),p=a(8),f=n(p),g=a(4),h=n(g),v=a(111),_=a(30),y=a(6),E=a(5),b=a(112),N=function(e,t,a){return null==e?e:(0,v.baseSet)(e,t,a)},R=function(e){function t(e){(0,s.default)(this,t);var a=(0,d.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.id=(0,y.randomWord)(8),a.route=a.props.location.pathname.split("/")[1],a.shareData={},a.setData=function(e,t){var n=Object.assign({},a.state);Object.keys(e).forEach(function(t){N(n,t,e[t])}),Object.assign(a.state,n),a.setState(n),setTimeout(function(){"function"==typeof t&&t()},0)},a.setShareData=function(){if(a.onShareAppMessage){a.shareData=a.onShareAppMessage();var e=a.shareData.path,t=e.split("/");e=window.location.origin+"/zc_webapp/"+t[t.length-1],/app_id/.test(e)||(e=e.indexOf("?")<0?e+"?app_id="+E.appMethod.getAppId():e+"&app_id="+E.appMethod.getAppId()),a.shareData.path=e,E.appMethod.isWeixin()&&(0,b.configWxShare)({title:a.shareData.title,link:a.shareData.path,imgUrl:a.shareData.imageUrl})}},a.shareClickEvent=function(){E.appMethod.shareClickEvent()},o(a,"data","state"),(0,_.setPage)(a),a}return(0,m.default)(t,e),(0,c.default)(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){e.setShareData()},4e3)}}]),t}(h.default.Component);t.default=R},function(e,t,a){"use strict";t.__esModule=!0;var n=a(170),o=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=o.default||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}},function(e,t,a){"use strict";t.__esModule=!0;var n=a(123),o=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=function(e,t,a){return t in e?(0,o.default)(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}},function(e,t,a){var n,o;/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/
!function(){"use strict";function a(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var o=typeof n;if("string"===o||"number"===o)e.push(n);else if(Array.isArray(n)&&n.length){var s=a.apply(null,n);s&&e.push(s)}else if("object"===o)for(var r in n)i.call(n,r)&&n[r]&&e.push(r)}}return e.join(" ")}var i={}.hasOwnProperty;void 0!==e&&e.exports?(a.default=a,e.exports=a):(n=[],void 0!==(o=function(){return a}.apply(t,n))&&(e.exports=o))}()},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ScrollView=void 0;var o=a(8),i=n(o),s=a(0),r=n(s),c=a(3),l=n(c),d=a(1),u=n(d),m=a(2),p=n(m),f=a(4),g=n(f);a(5);a(344);t.ScrollView=function(e){function t(e){(0,r.default)(this,t);var a=(0,u.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.topTimer=null,a.leftTimer=null,a.oldScrollTop=0,a.oldScrollLeft=0,a.scrollAllowBottom=!0,a.scrollAllowTop=!0,a.scrollAllowLeft=!0,a.scrollAllowRight=!0,a.scrollEvent=function(e){var t=a.scrollDiv.current;a.props.bindscroll&&a.props.bindscroll((0,i.default)({},e,{detail:{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop,scrollHeight:t.scrollHeight,scrollWidth:t.scrollWidth,deltaX:a.oldScrollLeft-t.scrollLeft,deltaY:a.oldScrollTop-t.scrollTop}}));var n=a.props["lower-threshold"]||0,o=a.props["upper-threshold"]||0;t.scrollTop+t.clientHeight>=t.scrollHeight-n&&a.oldScrollTop!=t.scrollTop&&a.scrollAllowBottom&&a.scrollY?(a.scrollAllowBottom=!1,a.props.bindscrolltolower&&a.props.bindscrolltolower((0,i.default)({},e,{detail:{direction:"bottom"}}))):t.scrollTop+t.clientHeight<t.scrollHeight-n&&(a.scrollAllowBottom=!0),t.scrollLeft+t.clientWidth>=t.scrollWidth-n&&a.oldScrollLeft!=t.scrollLef&&a.scrollAllowRight&&a.scrollX?(a.scrollAllowRight=!1,a.props.bindscrolltolower&&a.props.bindscrolltolower((0,i.default)({},e,{detail:{direction:"right"}}))):t.scrollLeft+t.clientWidth<t.scrollWidth-n&&(a.scrollAllowRight=!0),t.scrollTop<=0+o&&a.oldScrollTop!=t.scrollTop&&a.scrollAllowTop&&a.scrollY?(a.scrollAllowTop=!1,a.props.bindscrolltoupper&&a.props.bindscrolltoupper((0,i.default)({},e,{detail:{direction:"top"}}))):t.scrollTop>0+o&&(a.scrollAllowTop=!0),t.scrollLeft<=0+o&&a.oldScrollLeft!=t.scrollLeft&&a.scrollAllowLeft&&a.scrollX?(a.scrollAllowLeft=!1,a.props.bindscrolltoupper&&a.props.bindscrolltoupper((0,i.default)({},e,{detail:{direction:"left"}}))):t.scrollLeft>0+o&&(a.scrollAllowLeft=!0),a.oldScrollTop=t.scrollTop,a.oldScrollLeft=t.scrollLeft},a.scrollDiv=g.default.createRef(),a.scrollY=!1,a.scrollX=!1,a}return(0,p.default)(t,e),(0,l.default)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=this.scrollDiv.current;if(this.scrollY=!(!e["scroll-y"]||"false"==e["scroll-y"]),this.scrollX=!(!e["scroll-x"]||"false"==e["scroll-x"]),e["scroll-top"]&&this.setScrollTop(e["scroll-top"]),e["scroll-left"]&&this.setScrollLeft(e["scroll-left"]),e["scroll-into-view"]){var a=document.getElementById(e["scroll-into-view"]);this.scrollX&&this.setScrollLeft(a.offsetLeft-t.offsetLeft),this.scrollY&&this.setScrollTop(a.offsetTop-t.offsetTop)}}},{key:"componentDidUpdate",value:function(e){var t=this.props,a=this.scrollDiv.current;if(t["scroll-top"]!=e["scroll-top"]&&this.setScrollTop(t["scroll-top"]),t["scroll-left"]!=e["scroll-left"]&&this.setScrollLeft(t["scroll-left"]),t["scroll-into-view"]!=e["scroll-into-view"]){var n=document.getElementById(t["scroll-into-view"]);this.scrollX&&this.setScrollLeft(n.offsetLeft-a.offsetLeft),this.scrollY&&this.setScrollTop(n.offsetTop-a.offsetTop)}}},{key:"setScrollTop",value:function(e){var t=this,a=this.scrollDiv.current;if(this.props["scroll-with-animation"]){var n=a.scrollTop;cancelAnimationFrame(this.topTimer);var o=Math.abs(e-n),i=Math.ceil(o/10),s=0,r=function r(){var c=n<e?t.easeInOut(s,n,o,i):n-t.easeInOut(s,e,o,i)+e;a.scrollTop=c,s<i&&(s++,t.topTimer=requestAnimationFrame(r))};this.topTimer=requestAnimationFrame(r)}else a.scrollTop=e}},{key:"setScrollLeft",value:function(e){var t=this,a=this.scrollDiv.current;if(this.props["scroll-with-animation"]){var n=a.scrollLeft;cancelAnimationFrame(this.leftTimer);var o=Math.abs(e-n),i=Math.ceil(o/10),s=0,r=function r(){var c=n<e?t.easeInOut(s,n,o,i):n-t.easeInOut(s,e,o,i)+e;a.scrollLeft=c,s<i&&(s++,t.leftTimer=requestAnimationFrame(r))};this.leftTimer=requestAnimationFrame(r)}else a.scrollLeft=e}},{key:"easeInOut",value:function(e,t,a,n){return(e/=n/2)<1?a/2*e*e*e+t:a/2*((e-=2)*e*e+2)+t}},{key:"render",value:function(){var e=this,t=this.props,a=t.id,n=t.className,o=t.style,s=t.hidden,r=t.children,c={};for(var l in this.props)this.props.hasOwnProperty(l)&&0===l.indexOf("data-")&&(c[l]=this.props[l]);(0,i.default)({},o);return g.default.createElement("div",(0,i.default)({ref:this.scrollDiv,id:a,className:"jisu-component scroll-view scroll-view-wrapper "+n,style:(0,i.default)({},o,{overflowX:this.props["scroll-x"]?"auto":"hidden",overflowY:this.props["scroll-y"]?"auto":"hidden"})},c,{hidden:s,onScroll:function(t){e.scrollEvent(t)}}),r)}}]),t}(g.default.Component)},function(e,t,a){"use strict";function n(e){e||(e=new Date);var t=e.getFullYear(),a=e.getMonth()+1,n=e.getDate(),i=e.getHours(),s=e.getMinutes(),r=e.getSeconds();return[t,a,n].map(o).join("-")+" "+[i,s,r].map(o).join(":")}function o(e){return e=e.toString(),e[1]?e:"0"+e}function i(e,t){e=e?/^\d+$/.test(e)?new Date(1e3*e):"string"==typeof e?new Date(e.replace(/\-/g,"/")):e:new Date,t=t||"YYYY-MM-DD hh:mm:ss";var a={"M+":e.getMonth()+1,"D+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds()};/(Y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));for(var n in a)new RegExp("("+n+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?a[n]:("00"+a[n]).substr((""+a[n]).length)));return t}function s(e){return e?(e=+e,e<1e3?Math.round(e)+"m":(e/1e3).toFixed(1)+"km"):0}function r(e){for(var t in e)return!1;return!0}function c(e){return/^1\d{10}$/.test(e)}function l(){var e=getCurrentPages();return e[e.length-1].route}function d(){var e=getCurrentPages(),t=e[e.length-1],a=t.route,n=t.options,o=a+"?";for(var i in n){o+=i+"="+n[i]+"&"}return o=o.substring(0,o.length-1)}function u(){var e=getCurrentPages(),t=e[e.length-1],a=t.options,n="";for(var o in a){n+=o+"="+a[o]+"&"}return n=n.substring(0,n.length-1)}function m(e){switch(e){case"goods":return 0;case"appointment":return 1;case"waimai":return 2;case"tostore":return 3;case"new_appointment":return 10;default:return 0}}function p(e){switch(+e||0){case 0:return"goods";case 1:return"appointment";case 2:return"waimai";case 3:return"tostore";case 10:return"new_appointment";default:return"goods"}}function f(e,t){var a=[];for(var n in e)a.push(t.call(this,e[n],n));return a}function g(e,t){var a=[];return f(e,function(e){t(e)&&a.push(e)}),a}function h(e,t,a){var n=a,o=this;return void 0===n&&(n=e[0],e=e.slice(1)),f(e,function(a,i){n=t.call(o,n,a,i,e)}),n}function v(e){var t=e.split(/[.\[\]]/)||[],a=function(e){return e},n=function(e){return/^\d+$/.test(e)?+e:e};return f(g(t,a),n)}function _(e,t){var a=function(e,t){return e&&e[t]};return h(v(t),a,e)}e.exports={formatTime:n,formatTimeYMD:i,formatNumber:o,isPlainObject:r,isPhoneNumber:c,formatDistance:s,getCurrentPageUrl:l,getCurrentPageUrlWithArgs:d,getCurrentPageArgs:u,getGoodsTypeByForm:m,getFormByGoodsType:p,getValueByAttrStr:_}},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=a(180),i=n(o),s=a(189),r=n(s),c="function"==typeof r.default&&"symbol"==typeof i.default?function(e){return typeof e}:function(e){return e&&"function"==typeof r.default&&e.constructor===r.default&&e!==r.default.prototype?"symbol":typeof e};t.default="function"==typeof r.default&&"symbol"===c(i.default)?function(e){return void 0===e?"undefined":c(e)}:function(e){return e&&"function"==typeof r.default&&e.constructor===r.default&&e!==r.default.prototype?"symbol":void 0===e?"undefined":c(e)}},function(e,t,a){e.exports=a(167)()},function(e,t,a){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.customFeature;if(t.action)return c[t.action]?void c[t.action](e):void i.default.info("当前点击事件尚未开发")}Object.defineProperty(t,"__esModule",{value:!0}),t.clickEventHandler=t.customEvent=void 0;var o=a(22),i=function(e){return e&&e.__esModule?e:{default:e}}(o);a(23);var s=a(30),r=a(5),c={"goods-trade":function(e){var t=e.customFeature,a=e.franchisee,n=t["goods-type"]||t.goods_type,o=t["goods-id"]||t.goods_id;if(o){var i="";i=3==n?"toStoreDetail":10==n?3==t.unit?"hotel":"newAppointmentDetail":"goodsDetail",r.appMethod.turnToPage(i,{detail:o,franchisee:a||r.appMethod.getPageFranchiseeId()||""})}},"to-seckill":function(e){var t=e.customFeature,a=e.franchisee,n=t["seckill-id"]||t.seckill_id;if(n){var o=t["seckill-activity-id"]||0;r.appMethod.turnToPage("seckillDetail",{detail:n,franchisee:a||r.appMethod.getPageFranchiseeId()||"",sec_act_id:o||0,sec_t_id:t["seckill-activity-time-id"]||0,secType:0!=o?1:0})}},"inner-link":function(e){var t=e.customFeature,a=e.franchisee,n=t["inner-page-link"]||t["page-link"]||t.inner_page_link,o=r.appMethod.getAppCurrentPage();if("prePage"===n)r.appMethod.turnBack();else{var i=1==t.is_redirect;o.state.router!=r.appMethod.globalData.homepageRouter&&-1===r.appMethod.getTabPagePathArr().indexOf(n)||(i=!1),r.appMethod.turnToPage(n,{franchisee:a||r.appMethod.getPageFranchiseeId()||""},i)}},"group-buy":function(e){var t=e.customFeature,a=e.franchisee,n=t["goods-id"]||t.goods_id;n&&r.appMethod.turnToPage("gpgoodsDetail",{goods_id:n,activity_id:t["active-id"]||t.active_id,franchisee:a||r.appMethod.getPageFranchiseeId()||""})},presell:function(e){var t=e.customFeature,a=e.franchisee,n=t["goods-id"]||t.goods_id;n&&r.appMethod.turnToPage("gpgoodsDetail",{goods_id:n,activity_id:t["active-id"]||t.active_id,franchisee:a||r.appMethod.getPageFranchiseeId()||""})},call:function(e){var t=e.customFeature,a=(e.franchisee,e.event);if(t&&"dynamic"===t.phoneNumberSource){var n=a.currentTarget.dataset,o=n.realValue?n.realValue[0].text:"";if(!o)return;return void r.appMethod.makePhoneCall(o)}var i=t["phone-num"]||t.phone_num;r.appMethod.makePhoneCall(i)},"get-coupon":function(e){var t=e.customFeature,a=e.franchisee,n=t["coupon-id"]||t.coupon_id;n&&r.appMethod.turnToPage("couponDetail",{detail:n,recv_type:t.recv_type,franchisee:a||r.appMethod.getPageFranchiseeId()||""})},community:function(e){var t=e.customFeature,a=e.franchisee;r.appMethod.turnToPage("communityPage",{detail:t["community-id"]||t.community_id,franchisee:a||r.appMethod.getPageFranchiseeId()||""})},"franchisee-enter":function(){r.appMethod.turnToPage("franchiseeEnter")},"franchisee-cooperation":function(){r.appMethod.turnToPage("franchiseeCooperation")},"to-franchisee":function(e){var t=e.customFeature,a=t["franchisee-id"]||t.franchisee_id;r.appMethod.sendRequest({url:"/index.php?r=AppShop/GetAppShopByPage",data:{sub_shop_app_id:a},success:function(e){if(0===e.status&&Array.isArray(e.data)&&e.data[0]){var t=e.data[0],n=t.sub_app_bar,o=a,i=t.is_audit,s=t.mode_id,c=t.id,l=n.mode_id||"",d=n["homepage-router"]||"",u={};if(u.detail=o,2==i&&(u.shop_id=c),d){switch(s=l,d.trim()){case"franchiseeWaimai":return void r.appMethod.goToFranchisee(1,u);case"franchiseeTostore":return void r.appMethod.goToFranchisee(3,u);case"franchiseeDetail4":return void r.appMethod.goToFranchisee(2,u);case"franchiseeDetail":return void r.appMethod.goToFranchisee(0,u)}return void r.appMethod.turnToPage(d,{franchisee:a,fmode:s})}r.appMethod.goToFranchisee(s,u)}else r.appMethod.showModal({content:"获取子店信息失败"})},error:function(){r.appMethod.showModal({content:"获取子店信息失败"})}})},"to-promotion":function(){r.appMethod._isOpenPromotion()},"coupon-receive-list":function(){r.appMethod.turnToPage("couponReceiveListPage")},recharge:function(){r.appMethod.turnToPage("recharge")},"lucky-wheel":function(e){var t=e.franchisee;r.appMethod.turnToPage("luckyWheelDetail",{franchisee:t||r.appMethod.getPageFranchiseeId()||""})},"golden-eggs":function(e){var t=e.franchisee;r.appMethod.turnToPage("goldenEggs",{franchisee:t||r.appMethod.getPageFranchiseeId()||""})},"scratch-card":function(e){var t=e.franchisee;r.appMethod.turnToPage("scratch",{franchisee:t||r.appMethod.getPageFranchiseeId()||""})},"collect-stars":function(e){var t=e.franchisee;r.appMethod.turnToPage("collectStars",{franchisee:t||r.appMethod.getPageFranchiseeId()||""})},video:function(e){var t=e.customFeature,a=e.franchisee,n=t["video-id"];r.appMethod.turnToPage("videoDetail",{detail:n,franchisee:a||r.appMethod.getPageFranchiseeId()||""})},"video-detail":function(e){var t=e.customFeature,a=e.franchisee,n=t.video_id||t["video-id"];r.appMethod.turnToPage("videoDetail",{detail:n,franchisee:a||r.appMethod.getPageFranchiseeId()||""})},"video-play":function(e){var t=e.customFeature,a=r.appMethod.getAppCurrentPage(),n=t.compindex,o=t["video-id"];r.appMethod.sendRequest({url:"/index.php?r=AppVideo/GetVideoLibURL",method:"get",data:{id:o},success:function(e){var t={};t["eles["+n+"].videoUrl"]=e.data,t["eles["+n+"].carouselVideoTop"]=a.data.page_hasNavBar?r.appMethod.globalData.topNavBarHeight:0,a.setData(t)}})},transfer:function(e){var t=e.franchisee;r.appMethod.turnToPage("transferPage",{franchisee:t||r.appMethod.getPageFranchiseeId()||""})},"turn-to-xcx":function(e){e.customFeature;i.default.info(React.createElement("div",null,React.createElement("div",null,"暂不支持"),React.createElement("div",null,"【跳转小程序】功能")))},contact:function(){i.default.info(React.createElement("div",null,React.createElement("div",null,"暂不支持"),React.createElement("div",null,"【联系客服】功能")))},wifi:function(e){e.customFeature,e.franchisee;i.default.info("当前不支持wifi功能")},"plugin-link":function(e){e.customFeature,e.franchisee;i.default.info("当前不支持跳转插件")},topic:function(e){var t=e.customFeature,a=e.franchisee,n=t["topic-id"]||t.topic_id;n&&r.appMethod.turnToPage("communityDetail",{detail:n,franchisee:a||r.appMethod.getPageFranchiseeId()||""})},news:function(e){var t=e.customFeature,a=e.franchisee,n=t["news-id"]||t.news_id;n&&r.appMethod.turnToPage("newsDetail",{detail:n,franchisee:a||r.appMethod.getPageFranchiseeId()||""})},"page-share":function(e){var t=e.customFeature,a=(e.franchisee,r.appMethod.getAppCurrentPage()),n="";for(var o in a.sharePageParams)n+="&"+o+"="+a.sharePageParams[o];var i=a.state.router,s="newsDetail"==i?a.options.detail:i,c="newsDetail"==i?17:11;r.appMethod.sendRequest({url:"/index.php?r=AppDistribution/DistributionShareQRCode",data:{obj_id:s,type:c,text:t.pageShareCustomText,goods_img:t.pageShareImgUrl,params:n,p_id:r.appMethod.globalData.p_id},success:function(e){r.appInstance.pageQrcodeRef.current.show({pageQRCodeData:{shareDialogShow:0,shareMenuShow:!0,goodsInfo:e.data}})}})},share:function(e){e.customFeature;r.appMethod.shareClickEvent()},"wx-coupon":function(e){e.customFeature;return void i.default.info("当前不支持微信优惠券")},"vip-card-list":function(e){var t=e.franchisee;r.appMethod.turnToPage("vipCard",{franchisee:t||r.appMethod.getPageFranchiseeId()||""})},"goods-foot-print":function(){r.appMethod.turnToPage("goodsFootPrint")},"goods-favorites":function(){r.appMethod.turnToPage("goodsFavorites")},"vip-interests":function(e){var t=e.franchisee;t=t||r.appMethod.getPageFranchiseeId()||"";r.appMethod.turnToPage("vipBenefits",{franchisee:t||r.appMethod.getPageFranchiseeId()||""})},"goods-scan-code":function(){r.appMethod.getAppECStoreConfig(function(e){1==e.cart_config.shopping_by_scanning_code?r.appMethod.turnToPage("shoppingCart?goodsScanCode=true"):r.appMethod.showModal({content:"暂未开通扫码购"})})},"preview-picture":function(e){var t=e.event,a=t.currentTarget.dataset,n=a.imgarr instanceof Array?a.imgarr:[a.imgarr];(a.imgarr||a.img)&&r.appMethod.previewImage({current:a.img||n[0],urls:n})},"popup-window-control":function(e){var t=e.customFeature,a=t.windowControl,n=null,o=s.pageInstance.state.eles.find(function(e,t){if(e.customFeature.id===a.popupWindowId)return n=t,!0});o&&("show"===a.action?o.showPopupWindow=!0:"hide"===a.action&&(o.showPopupWindow=!1),s.pageMethod.setCustomComponentData(n,o),o.customFeature.autoClose&&setTimeout(function(){o.showPopupWindow=!1,s.pageMethod.setCustomComponentData(n,o)},1e3*+o.customFeature.closeDelay))},"sidebar-control":function(e){var t=e.customFeature,a=t.sidebarControl,n=null,o=s.pageInstance.state.eles.find(function(e,t){if(e.customFeature.id===a.sidebarId)return n=t,!0});o&&("show"===a.action?o.showSidebar=!0:"hide"===a.action&&(o.hideSidebar=!0),s.pageMethod.setCustomComponentData(n,o))},"refresh-list":function(e){var t=e.customFeature;r.appMethod.tapRefreshListHandler(null,{refresh_object:t.refresh_object,index_segment:t.index_segment,index_value:t.index_value})},search:function(e){for(var t=e.customFeature,a=r.appMethod.getAppCurrentPage(),n=t.search.listId,o=a.data.eles,i=-1,s=0;s<o.length;s++)if(o[s].customFeature&&n==o[s].customFeature.id){i=s;break}if(i>-1){var c=a.data.eles[i];if("goods-list"!=c.type)return void r.appMethod.showModal({content:"搜索的点击事件只能关联电商、到店、预约列表"});r.appMethod.turnToPage("classifyGoodsListPage",{form:c.customFeature.form})}else r.appMethod.showModal({content:"找不到搜索关联的列表"})},top:function(){r.appMethod.pageScrollTo(0)},"click-event":function(e){var t=e.customFeature,a=t["look-link"];r.appMethod.turnToPage(a,{franchisee:franchisee||r.appMethod.getPageFranchiseeId()||""})},"wx-vip-card":function(e){e.customFeature;i.default.info("暂不支持微信会员卡")},"differential-mall":function(){r.appMethod.turnToPage("dMWebView",{franchisee:franchisee||r.appMethod.getPageFranchiseeId()||""})},"goods-classify":function(e){var t=e.customFeature,a="goods";0==form.goods_type?a="goods":3==form.goods_type?a="tostore":1==form.goods_type&&(a="appointment"),franchiseeId=franchiseeId||r.appMethod.getPageFranchiseeId(),r.appMethod.turnToPage("goodsMore",{detail:a,categroy:t.id,categroyName:t.name,franchisee:franchisee||r.appMethod.getPageFranchiseeId()||""})}},l=function(){var e={};for(var t in c)!function(t){e[t]=function(e,a,n){c[t]({customFeature:e,franchisee:a,event:n})}}(t);return e}();t.customEvent=n,t.clickEventHandler=l},function(e,t,a){"use strict";a(144),a(259)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.nonsense=void 0;var o=a(0),i=n(o),s=a(1),r=n(s),c=a(2),l=n(c),d=a(4),u=n(d),m=a(240),p=n(m),f=a(14),g=n(f),h=a(246),v=n(h),_=(t.nonsense=u.default.createElement("div",null),function(e){function t(){(0,i.default)(this,t);var e=(0,r.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.popupProps=v.default,e}return(0,l.default)(t,e),t}(p.default));t.default=_,_.defaultProps=(0,m.getDefaultProps)(),_.contextTypes={antLocale:g.default.object}},function(e,t,a){"use strict";var n=function(){};e.exports=n},function(e,t,a){"use strict";a(211),a(212)},function(e,t){var a=e.exports={version:"2.6.5"};"number"==typeof __e&&(__e=a)},function(e,t,a){"use strict";function n(e){var t=e.is,a=e.hor,n={requestLoading:function(e){return React.createElement(i,e)},requestNone:function(e){return React.createElement(s,e)},requestFail:function(e){return React.createElement(r,e)},requestAll:function(e){return React.createElement(c,e)}};return n[t]?React.createElement("div",{className:"common request-status "+(a&&"hor-request-status")},n[t](e)):null}Object.defineProperty(t,"__esModule",{value:!0}),t.RequestStatus=n;var o=a(5);a(549);var i=function(){return React.createElement("div",{className:"loading-wrap"},React.createElement("div",{className:"loading-view"},React.createElement("div",{className:"loading-dot1"}),React.createElement("div",{className:"loading-dot2"})))},s=function(e){var t=e.data.data;return React.createElement("div",{className:"request-none"},React.createElement("img",{src:"http://cdn.jisuapp.cn/static/webapp/images/request-none.png"}),React.createElement("div",null,t||"暂无数据"))},r=function(e){var t=e.data,a=t.compindex,n=t.refreshEvent;return React.createElement("div",{className:"request-fail"},React.createElement("div",null,"数据加载失败~ "),React.createElement("button",{className:"request-refresh-btn","data-compindex":a,bindtap:o.appMethod[n]},"刷新重试"))},c=function(){return React.createElement("div",{className:"request-all"},"没有更多了")}},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var a;h&&(h.destroy(),h=null),p.default.newInstance({prefixCls:v,style:{},transitionName:"am-fade",className:(0,l.default)((a={},(0,r.default)(a,v+"-mask",e),(0,r.default)(a,v+"-nomask",!e),a))},function(e){return t&&t(e)})}function i(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,n=arguments[3],i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],s={info:"",success:"success",fail:"fail",offline:"dislike",loading:"loading"},r=s[t];o(i,function(t){h=t,t.notice({duration:a,style:{},content:r?u.default.createElement("div",{className:v+"-text "+v+"-text-icon",role:"alert","aria-live":"assertive"},u.default.createElement(g.default,{type:r,size:"lg"}),u.default.createElement("div",{className:v+"-text-info"},e)):u.default.createElement("div",{className:v+"-text",role:"alert","aria-live":"assertive"},u.default.createElement("div",null,e)),closable:!0,onClose:function(){n&&n(),t.destroy(),t=null,h=null}})})}Object.defineProperty(t,"__esModule",{value:!0});var s=a(9),r=n(s),c=a(10),l=n(c),d=a(4),u=n(d),m=a(209),p=n(m),f=a(44),g=n(f),h=void 0,v="am-toast";t.default={SHORT:3,LONG:8,show:function(e,t,a){return i(e,"info",t,function(){},a)},info:function(e,t,a,n){return i(e,"info",t,a,n)},success:function(e,t,a,n){return i(e,"success",t,a,n)},fail:function(e,t,a,n){return i(e,"fail",t,a,n)},offline:function(e,t,a,n){return i(e,"offline",t,a,n)},loading:function(e,t,a,n){return i(e,"loading",t,a,n)},hide:function(){h&&(h.destroy(),h=null)}},e.exports=t.default},function(e,t,a){"use strict";a(19),a(45),a(215)},function(e,t){e.exports=ReactDOM},function(e,t,a){"use strict";function n(e){return"[object Array]"===k.call(e)}function o(e){return"[object ArrayBuffer]"===k.call(e)}function i(e){return"undefined"!=typeof FormData&&e instanceof FormData}function s(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer}function r(e){return"string"==typeof e}function c(e){return"number"==typeof e}function l(e){return void 0===e}function d(e){return null!==e&&"object"==typeof e}function u(e){return"[object Date]"===k.call(e)}function m(e){return"[object File]"===k.call(e)}function p(e){return"[object Blob]"===k.call(e)}function f(e){return"[object Function]"===k.call(e)}function g(e){return d(e)&&f(e.pipe)}function h(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams}function v(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}function _(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)}function y(e,t){if(null!==e&&void 0!==e)if("object"!=typeof e&&(e=[e]),n(e))for(var a=0,o=e.length;a<o;a++)t.call(null,e[a],a,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}function E(){function e(e,a){"object"==typeof t[a]&&"object"==typeof e?t[a]=E(t[a],e):t[a]=e}for(var t={},a=0,n=arguments.length;a<n;a++)y(arguments[a],e);return t}function b(e,t,a){return y(t,function(t,n){e[n]=a&&"function"==typeof t?N(t,a):t}),e}var N=a(132),R=a(218),k=Object.prototype.toString;e.exports={isArray:n,isArrayBuffer:o,isBuffer:R,isFormData:i,isArrayBufferView:s,isString:r,isNumber:c,isObject:d,isUndefined:l,isDate:u,isFile:m,isBlob:p,isFunction:f,isStream:g,isURLSearchParams:h,isStandardBrowserEnv:_,forEach:y,merge:E,extend:b,trim:v}},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(9),i=n(o),s=a(8),r=n(s),c=a(0),l=n(c),d=a(3),u=n(d),m=a(1),p=n(m),f=a(2),g=n(f),h=a(10),v=n(h),_=a(4),y=n(_),E=a(347),b=n(E),N=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&(a[n[o]]=e[n[o]]);return a},R=function(e){function t(e){(0,l.default)(this,t);var a=(0,p.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.onChange=function(e){a.setState({selectedIndex:e},function(){a.props.afterChange&&a.props.afterChange(e)})},a.state={selectedIndex:a.props.selectedIndex},a}return(0,g.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this.props,t=e.infinite,a=e.selectedIndex,n=e.beforeChange,o=(e.afterChange,e.dots),s=N(e,["infinite","selectedIndex","beforeChange","afterChange","dots"]),c=s.prefixCls,l=s.dotActiveStyle,d=s.dotStyle,u=s.className,m=s.vertical,p=(0,r.default)({},s,{wrapAround:t,slideIndex:a,beforeSlide:n}),f=[];o&&(f=[{component:function(e){for(var t=e.slideCount,a=e.slidesToScroll,n=e.currentSlide,o=[],s=0;s<t;s+=a)o.push(s);var r=o.map(function(e){var t=(0,v.default)(c+"-wrap-dot",(0,i.default)({},c+"-wrap-dot-active",e===n)),a=e===n?l:d;return y.default.createElement("div",{className:t,key:e},y.default.createElement("span",{style:a}))});return y.default.createElement("div",{className:c+"-wrap"},r)},position:"BottomCenter"}]);var g=(0,v.default)(c,u,(0,i.default)({},c+"-vertical",m));return y.default.createElement(b.default,(0,r.default)({},p,{className:g,decorators:f,afterSlide:this.onChange}))}}]),t}(y.default.Component);t.default=R,R.defaultProps={prefixCls:"am-carousel",dots:!0,arrows:!1,autoplay:!1,infinite:!1,cellAlign:"center",selectedIndex:0,dotStyle:{},dotActiveStyle:{}},e.exports=t.default},function(e,t,a){"use strict";a(19),a(351)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t,a){Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:function(){return"props"===a?e.props:(0,m.default)({},e.props,e.state)}})}Object.defineProperty(t,"__esModule",{value:!0});var i=a(0),s=n(i),r=a(1),c=n(r),l=a(2),d=n(l),u=a(8),m=n(u),p=a(4),f=n(p),g=a(111),h=function(e,t,a){return null==e?e:(0,g.baseSet)(e,t,a)},v=function(e){function t(e){(0,s.default)(this,t);var a=(0,c.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.setData=function(e,t){var n=Object.assign({},a.state);Object.keys(e).forEach(function(t){h(n,t,e[t])}),Object.assign(a.state,n),a.setState(n),setTimeout(function(){"function"==typeof t&&t()},0)},o(a,"data","state"),a}return(0,d.default)(t,e),t}(f.default.Component);t.default=v},function(e,t,a){var n=a(81)("wks"),o=a(61),i=a(42).Symbol,s="function"==typeof i;(e.exports=function(e){return n[e]||(n[e]=s&&i[e]||(s?i:o)("Symbol."+e))}).store=n},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=null,o=[],i={getCustomComponentData:function(e){return n.state.eles[e]},setCustomComponentData:function(e,t){var a={};a["eles["+e+"]"]=t,n.setData(a)}},s=function(e){t.pageInstance=n=e,t.pageComponentRefs=o=[]};t.setPage=s,t.pageInstance=n,t.pageMethod=i,t.pageComponentRefs=o},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(8),i=n(o),s=a(9),r=n(s),c=a(0),l=n(c),d=a(3),u=n(d),m=a(1),p=n(m),f=a(2),g=n(f),h=a(10),v=n(h),_=a(4),y=n(_),E=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&(a[n[o]]=e[n[o]]);return a},b=function(e){function t(){(0,l.default)(this,t);var e=(0,p.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.onChange=function(t){var a=t.target.checked;e.props.onChange&&e.props.onChange(a)},e.onClick=function(t){if(e.props.onClick){var a=void 0;a=t&&t.target&&void 0!==t.target.checked?t.target.checked:e.props.checked,e.props.onClick(a)}},e}return(0,g.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this.props,t=e.prefixCls,a=e.name,n=e.checked,o=e.disabled,s=e.className,c=e.platform,l=e.color,d=E(e,["prefixCls","name","checked","disabled","className","platform","color"]),u=(0,v.default)(t,s,(0,r.default)({},t+"-android","android"===c)),m=(0,v.default)("checkbox",(0,r.default)({},"checkbox-disabled",o)),p=Object.keys(d).reduce(function(e,t){return"aria-"!==t.substr(0,5)&&"data-"!==t.substr(0,5)&&"role"!==t||(e[t]=d[t]),e},{}),f=this.props.style||{};return l&&n&&(f.backgroundColor=l),y.default.createElement("label",{className:u},y.default.createElement("input",(0,i.default)({type:"checkbox",name:a,className:t+"-checkbox",disabled:o,checked:n,onChange:this.onChange,value:n?"on":"off"},o?{}:{onClick:this.onClick},p)),y.default.createElement("div",(0,i.default)({className:m,style:f},o?{onClick:this.onClick}:{})))}}]),t}(y.default.Component);t.default=b,b.defaultProps={prefixCls:"am-switch",name:"",checked:!1,disabled:!1,onChange:function(){},platform:"ios",onClick:function(){}},e.exports=t.default},function(e,t,a){"use strict";a(19),a(374)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e.data.hidden)return null;var t=e.data.type;if(!t)return null;if(m.default[t]){var a=e.forwardedRef,n=(0,c.default)(e,["forwardedRef"]);return m.default[t](n,a)}return f[t]?null:d.default.createElement(p,null)}Object.defineProperty(t,"__esModule",{value:!0});var i=a(8),s=n(i),r=a(51),c=n(r),l=a(4),d=n(l),u=a(543),m=n(u);a(730);var p=function(){return d.default.createElement("div",{className:"custom-component develop"},"该组件正在火速开发中")},f={"user-center":!0,"bottom-nav":!0};t.default=d.default.forwardRef(function(e,t){return d.default.createElement(o,(0,s.default)({},e,{forwardedRef:t}))})},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e.url)return console.log("请填写接口地址"),!1;e.loading&&c.default.loading("加载中",0);var t={method:e.type||"post",url:e.url,headers:e.headers||{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},timeout:e.timeout||3e4,responsoType:e.dataType||"json"};return e.data=e.data||{},e.data=(0,s.default)({},JSON.parse(JSON.stringify(e.data)),{_source_type:"webapp"}),"get"===t.method||"GET"===t.method?t.params=e.data:"post"!==t.method&&"POST"!==t.method||(t.data=e.data,t.transformRequest=[function(e,t){return(0,u.tranform2UrlEncode)(e)}]),(0,d.default)(t).then(function(t){e.loading&&c.default.hide(),200==t.status&&e.success&&e.success(t.data,t),e.complete&&e.complete(t.data,t)}).catch(function(t){e.loading&&c.default.hide(),console.log("回调处理错误",t),e.error?e.error(t):console.log("网络故障"),e.complete&&e.complete()})}Object.defineProperty(t,"__esModule",{value:!0});var i=a(8),s=n(i),r=a(22),c=n(r);t.ajax=o,a(23);var l=a(216),d=n(l),u=a(6)},function(e,t,a){"use strict";a(19),a(261)},function(e,t,a){"use strict";t.__esModule=!0;var n=a(264),o=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=function(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return(0,o.default)(e)}},function(e,t,a){"use strict";var n=function(e,t,a,n,o,i,s,r){if(!e){var c;if(void 0===t)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[a,n,o,i,s,r],d=0;c=new Error(t.replace(/%s/g,function(){return l[d++]})),c.name="Invariant Violation"}throw c.framesToPop=1,c}};e.exports=n},function(e,t,a){"use strict";function n(e){return sessionStorage.setItem(r,e)}function o(){return sessionStorage.getItem(r)}function i(){var e=o();return 1==s.docCookies.getItem(e+"_webappLogin")}Object.defineProperty(t,"__esModule",{value:!0}),t.setAppId=n,t.getAppId=o,t.checkIfLogin=i;var s=a(6),r="jisuWebAppId"},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(8),i=n(o),s=a(0),r=n(s),c=a(3),l=n(c),d=a(1),u=n(d),m=a(2),p=n(m),f=a(10),g=n(f),h=a(4),v=n(h),_=a(254),y=n(_),E=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&(a[n[o]]=e[n[o]]);return a},b=function(e){function t(){return(0,r.default)(this,t),(0,u.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,p.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this.props,t=e.prefixCls,a=e.children,n=e.className,o=e.style,s=e.renderHeader,r=e.renderFooter,c=E(e,["prefixCls","children","className","style","renderHeader","renderFooter"]),l=(0,g.default)(t,n);return v.default.createElement("div",(0,i.default)({className:l,style:o},c),s?v.default.createElement("div",{className:t+"-header"},"function"==typeof s?s():s):null,a?v.default.createElement("div",{className:t+"-body"},a):null,r?v.default.createElement("div",{className:t+"-footer"},"function"==typeof r?r():r):null)}}]),t}(v.default.Component);t.default=b,b.Item=y.default,b.defaultProps={prefixCls:"am-list"},e.exports=t.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.customFeature,a=(0,c.default)(e,["customFeature"]),n=t.loadingStyle,o=t.loadingImg,i=t.loadingColor,r=t.loadingText;return React.createElement("div",(0,s.default)({className:"common loading-btn"},a),"img"==n&&React.createElement("img",{src:o}),"text"==n&&React.createElement("span",{style:{color:i}},r))}Object.defineProperty(t,"__esModule",{value:!0});var i=a(8),s=n(i),r=a(51),c=n(r);t.LoadingBtn=o,a(550)},function(e,t,a){var n=a(42),o=a(20),i=a(75),s=a(52),r=a(49),c=function(e,t,a){var l,d,u,m=e&c.F,p=e&c.G,f=e&c.S,g=e&c.P,h=e&c.B,v=e&c.W,_=p?o:o[t]||(o[t]={}),y=_.prototype,E=p?n:f?n[t]:(n[t]||{}).prototype;p&&(a=t);for(l in a)(d=!m&&E&&void 0!==E[l])&&r(_,l)||(u=d?E[l]:a[l],_[l]=p&&"function"!=typeof E[l]?a[l]:h&&d?i(u,n):v&&E[l]==u?function(e){var t=function(t,a,n){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,a)}return new e(t,a,n)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(u):g&&"function"==typeof u?i(Function.call,u):u,g&&((_.virtual||(_.virtual={}))[l]=u,e&c.R&&y&&!y[l]&&s(y,l,u)))};c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,e.exports=c},function(e,t){var a=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=a)},function(e,t,a){var n=a(47),o=a(118),i=a(76),s=Object.defineProperty;t.f=a(48)?Object.defineProperty:function(e,t,a){if(n(e),t=i(t,!0),n(a),o)try{return s(e,t,a)}catch(e){}if("get"in a||"set"in a)throw TypeError("Accessors not supported!");return"value"in a&&(e[t]=a.value),e}},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(8),i=n(o),s=a(0),r=n(s),c=a(3),l=n(c),d=a(1),u=n(d),m=a(2),p=n(m),f=a(10),g=n(f),h=a(4),v=n(h),_=a(210),y=n(_),E=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&(a[n[o]]=e[n[o]]);return a},b=function(e){function t(){return(0,r.default)(this,t),(0,u.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,p.default)(t,e),(0,l.default)(t,[{key:"componentDidMount",value:function(){(0,y.default)()}},{key:"render",value:function(){var e=this.props,t=e.type,a=e.className,n=e.size,o=E(e,["type","className","size"]),s=(0,g.default)(a,"am-icon","am-icon-"+t,"am-icon-"+n);return v.default.createElement("svg",(0,i.default)({className:s},o),v.default.createElement("use",{xlinkHref:"#"+t}))}}]),t}(v.default.Component);t.default=b,b.defaultProps={size:"md"},e.exports=t.default},function(e,t,a){"use strict";a(214)},function(e,t,a){"use strict";function n(e){return"/"===e.charAt(0)}function o(e,t){for(var a=t,n=a+1,o=e.length;n<o;a+=1,n+=1)e[a]=e[n];e.pop()}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=e&&e.split("/")||[],i=t&&t.split("/")||[],s=e&&n(e),r=t&&n(t),c=s||r;if(e&&n(e)?i=a:a.length&&(i.pop(),i=i.concat(a)),!i.length)return"/";var l=void 0;if(i.length){var d=i[i.length-1];l="."===d||".."===d||""===d}else l=!1;for(var u=0,m=i.length;m>=0;m--){var p=i[m];"."===p?o(i,m):".."===p?(o(i,m),u++):u&&(o(i,m),u--)}if(!c)for(;u--;u)i.unshift("..");!c||""===i[0]||i[0]&&n(i[0])||i.unshift("");var f=i.join("/");return l&&"/"!==f.substr(-1)&&(f+="/"),f}function s(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(Array.isArray(e))return Array.isArray(t)&&e.length===t.length&&e.every(function(e,a){return s(e,t[a])});var a=void 0===e?"undefined":m(e);if(a!==(void 0===t?"undefined":m(t)))return!1;if("object"===a){var n=e.valueOf(),o=t.valueOf();if(n!==e||o!==t)return s(n,o);var i=Object.keys(e),r=Object.keys(t);return i.length===r.length&&i.every(function(a){return s(e[a],t[a])})}return!1}Object.defineProperty(t,"__esModule",{value:!0});var r=a(18),c=a.n(r),l=a(37),d=a.n(l),u=i,m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p=s,f=function(e){return"/"===e.charAt(0)?e:"/"+e},g=function(e){return"/"===e.charAt(0)?e.substr(1):e},h=function(e,t){return new RegExp("^"+t+"(\\/|\\?|#|$)","i").test(e)},v=function(e,t){return h(e,t)?e.substr(t.length):e},_=function(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e},y=function(e){var t=e||"/",a="",n="",o=t.indexOf("#");-1!==o&&(n=t.substr(o),t=t.substr(0,o));var i=t.indexOf("?");return-1!==i&&(a=t.substr(i),t=t.substr(0,i)),{pathname:t,search:"?"===a?"":a,hash:"#"===n?"":n}},E=function(e){var t=e.pathname,a=e.search,n=e.hash,o=t||"/";return a&&"?"!==a&&(o+="?"===a.charAt(0)?a:"?"+a),n&&"#"!==n&&(o+="#"===n.charAt(0)?n:"#"+n),o},b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},N=function(e,t,a,n){var o=void 0;"string"==typeof e?(o=y(e),o.state=t):(o=b({},e),void 0===o.pathname&&(o.pathname=""),o.search?"?"!==o.search.charAt(0)&&(o.search="?"+o.search):o.search="",o.hash?"#"!==o.hash.charAt(0)&&(o.hash="#"+o.hash):o.hash="",void 0!==t&&void 0===o.state&&(o.state=t));try{o.pathname=decodeURI(o.pathname)}catch(e){throw e instanceof URIError?new URIError('Pathname "'+o.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):e}return a&&(o.key=a),n?o.pathname?"/"!==o.pathname.charAt(0)&&(o.pathname=u(o.pathname,n.pathname)):o.pathname=n.pathname:o.pathname||(o.pathname="/"),o},R=function(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash&&e.key===t.key&&p(e.state,t.state)},k=function(){var e=null,t=function(t){return c()(null==e,"A history supports only one prompt at a time"),e=t,function(){e===t&&(e=null)}},a=function(t,a,n,o){if(null!=e){var i="function"==typeof e?e(t,a):e;"string"==typeof i?"function"==typeof n?n(i,o):(c()(!1,"A history needs a getUserConfirmation function in order to use a prompt message"),o(!0)):o(!1!==i)}else o(!0)},n=[];return{setPrompt:t,confirmTransitionTo:a,appendListener:function(e){var t=!0,a=function(){t&&e.apply(void 0,arguments)};return n.push(a),function(){t=!1,n=n.filter(function(e){return e!==a})}},notifyListeners:function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];n.forEach(function(e){return e.apply(void 0,t)})}}},w=k,x=!("undefined"==typeof window||!window.document||!window.document.createElement),C=function(e,t,a){return e.addEventListener?e.addEventListener(t,a,!1):e.attachEvent("on"+t,a)},D=function(e,t,a){return e.removeEventListener?e.removeEventListener(t,a,!1):e.detachEvent("on"+t,a)},S=function(e,t){return t(window.confirm(e))},I=function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&(window.history&&"pushState"in window.history)},M=function(){return-1===window.navigator.userAgent.indexOf("Trident")},T=function(){return-1===window.navigator.userAgent.indexOf("Firefox")},P=function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")},L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},F=function(){try{return window.history.state||{}}catch(e){return{}}},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};d()(x,"Browser history needs a DOM");var t=window.history,a=I(),n=!M(),o=e.forceRefresh,i=void 0!==o&&o,s=e.getUserConfirmation,r=void 0===s?S:s,l=e.keyLength,u=void 0===l?6:l,m=e.basename?_(f(e.basename)):"",p=function(e){var t=e||{},a=t.key,n=t.state,o=window.location,i=o.pathname,s=o.search,r=o.hash,l=i+s+r;return c()(!m||h(l,m),'You are attempting to use a basename on a page whose URL path does not begin with the basename. Expected path "'+l+'" to begin with "'+m+'".'),m&&(l=v(l,m)),N(l,n,a)},g=function(){return Math.random().toString(36).substr(2,u)},y=w(),b=function(e){A($,e),$.length=t.length,y.notifyListeners($.location,$.action)},R=function(e){P(e)||O(p(e.state))},k=function(){O(p(F()))},T=!1,O=function(e){if(T)T=!1,b();else{y.confirmTransitionTo(e,"POP",r,function(t){t?b({action:"POP",location:e}):B(e)})}},B=function(e){var t=$.location,a=G.indexOf(t.key);-1===a&&(a=0);var n=G.indexOf(e.key);-1===n&&(n=0);var o=a-n;o&&(T=!0,V(o))},j=p(F()),G=[j.key],q=function(e){return m+E(e)},U=function(e,n){c()(!("object"===(void 0===e?"undefined":L(e))&&void 0!==e.state&&void 0!==n),"You should avoid providing a 2nd state argument to push when the 1st argument is a location-like object that already has state; it is ignored");var o=N(e,n,g(),$.location);y.confirmTransitionTo(o,"PUSH",r,function(e){if(e){var n=q(o),s=o.key,r=o.state;if(a)if(t.pushState({key:s,state:r},null,n),i)window.location.href=n;else{var l=G.indexOf($.location.key),d=G.slice(0,-1===l?0:l+1);d.push(o.key),G=d,b({action:"PUSH",location:o})}else c()(void 0===r,"Browser history cannot push state in browsers that do not support HTML5 history"),window.location.href=n}})},z=function(e,n){c()(!("object"===(void 0===e?"undefined":L(e))&&void 0!==e.state&&void 0!==n),"You should avoid providing a 2nd state argument to replace when the 1st argument is a location-like object that already has state; it is ignored");var o=N(e,n,g(),$.location);y.confirmTransitionTo(o,"REPLACE",r,function(e){if(e){var n=q(o),s=o.key,r=o.state;if(a)if(t.replaceState({key:s,state:r},null,n),i)window.location.replace(n);else{var l=G.indexOf($.location.key);-1!==l&&(G[l]=o.key),b({action:"REPLACE",location:o})}else c()(void 0===r,"Browser history cannot replace state in browsers that do not support HTML5 history"),window.location.replace(n)}})},V=function(e){t.go(e)},W=function(){return V(-1)},H=function(){return V(1)},J=0,Y=function(e){J+=e,1===J?(C(window,"popstate",R),n&&C(window,"hashchange",k)):0===J&&(D(window,"popstate",R),n&&D(window,"hashchange",k))},Q=!1,K=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=y.setPrompt(e);return Q||(Y(1),Q=!0),function(){return Q&&(Q=!1,Y(-1)),t()}},X=function(e){var t=y.appendListener(e);return Y(1),function(){Y(-1),t()}},$={length:t.length,action:"POP",location:j,createHref:q,push:U,replace:z,go:V,goBack:W,goForward:H,block:K,listen:X};return $},B=O,j=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},G={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+g(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:g,decodePath:f},slash:{encodePath:f,decodePath:f}},q=function(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)},U=function(e){return window.location.hash=e},z=function(e){var t=window.location.href.indexOf("#");window.location.replace(window.location.href.slice(0,t>=0?t:0)+"#"+e)},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};d()(x,"Hash history needs a DOM");var t=window.history,a=T(),n=e.getUserConfirmation,o=void 0===n?S:n,i=e.hashType,s=void 0===i?"slash":i,r=e.basename?_(f(e.basename)):"",l=G[s],u=l.encodePath,m=l.decodePath,p=function(){var e=m(q());return c()(!r||h(e,r),'You are attempting to use a basename on a page whose URL path does not begin with the basename. Expected path "'+e+'" to begin with "'+r+'".'),r&&(e=v(e,r)),N(e)},g=w(),y=function(e){j(ee,e),ee.length=t.length,g.notifyListeners(ee.location,ee.action)},b=!1,k=null,I=function(){var e=q(),t=u(e);if(e!==t)z(t);else{var a=p(),n=ee.location;if(!b&&R(n,a))return;if(k===E(a))return;k=null,M(a)}},M=function(e){if(b)b=!1,y();else{g.confirmTransitionTo(e,"POP",o,function(t){t?y({action:"POP",location:e}):P(e)})}},P=function(e){var t=ee.location,a=O.lastIndexOf(E(t));-1===a&&(a=0);var n=O.lastIndexOf(E(e));-1===n&&(n=0);var o=a-n;o&&(b=!0,H(o))},L=q(),A=u(L);L!==A&&z(A);var F=p(),O=[E(F)],B=function(e){return"#"+u(r+E(e))},V=function(e,t){c()(void 0===t,"Hash history cannot push state; it is ignored");var a=N(e,void 0,void 0,ee.location);g.confirmTransitionTo(a,"PUSH",o,function(e){if(e){var t=E(a),n=u(r+t);if(q()!==n){k=t,U(n);var o=O.lastIndexOf(E(ee.location)),i=O.slice(0,-1===o?0:o+1);i.push(t),O=i,y({action:"PUSH",location:a})}else c()(!1,"Hash history cannot PUSH the same path; a new entry will not be added to the history stack"),y()}})},W=function(e,t){c()(void 0===t,"Hash history cannot replace state; it is ignored");var a=N(e,void 0,void 0,ee.location);g.confirmTransitionTo(a,"REPLACE",o,function(e){if(e){var t=E(a),n=u(r+t);q()!==n&&(k=t,z(n));var o=O.indexOf(E(ee.location));-1!==o&&(O[o]=t),y({action:"REPLACE",location:a})}})},H=function(e){c()(a,"Hash history go(n) causes a full page reload in this browser"),t.go(e)},J=function(){return H(-1)},Y=function(){return H(1)},Q=0,K=function(e){Q+=e,1===Q?C(window,"hashchange",I):0===Q&&D(window,"hashchange",I)},X=!1,$=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=g.setPrompt(e);return X||(K(1),X=!0),function(){return X&&(X=!1,K(-1)),t()}},Z=function(e){var t=g.appendListener(e);return K(1),function(){K(-1),t()}},ee={length:t.length,action:"POP",location:F,createHref:B,push:V,replace:W,go:H,goBack:J,goForward:Y,block:$,listen:Z};return ee},W=V,H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},J=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Y=function(e,t,a){return Math.min(Math.max(e,t),a)},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.getUserConfirmation,a=e.initialEntries,n=void 0===a?["/"]:a,o=e.initialIndex,i=void 0===o?0:o,s=e.keyLength,r=void 0===s?6:s,l=w(),d=function(e){J(x,e),x.length=x.entries.length,l.notifyListeners(x.location,x.action)},u=function(){return Math.random().toString(36).substr(2,r)},m=Y(i,0,n.length-1),p=n.map(function(e){return"string"==typeof e?N(e,void 0,u()):N(e,void 0,e.key||u())}),f=E,g=function(e,a){c()(!("object"===(void 0===e?"undefined":H(e))&&void 0!==e.state&&void 0!==a),"You should avoid providing a 2nd state argument to push when the 1st argument is a location-like object that already has state; it is ignored");var n=N(e,a,u(),x.location);l.confirmTransitionTo(n,"PUSH",t,function(e){if(e){var t=x.index,a=t+1,o=x.entries.slice(0);o.length>a?o.splice(a,o.length-a,n):o.push(n),d({action:"PUSH",location:n,index:a,entries:o})}})},h=function(e,a){c()(!("object"===(void 0===e?"undefined":H(e))&&void 0!==e.state&&void 0!==a),"You should avoid providing a 2nd state argument to replace when the 1st argument is a location-like object that already has state; it is ignored");var n=N(e,a,u(),x.location);l.confirmTransitionTo(n,"REPLACE",t,function(e){e&&(x.entries[x.index]=n,d({action:"REPLACE",location:n}))})},v=function(e){var a=Y(x.index+e,0,x.entries.length-1),n=x.entries[a];l.confirmTransitionTo(n,"POP",t,function(e){e?d({action:"POP",location:n,index:a}):d()})},_=function(){return v(-1)},y=function(){return v(1)},b=function(e){var t=x.index+e;return t>=0&&t<x.entries.length},R=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return l.setPrompt(e)},k=function(e){return l.appendListener(e)},x={length:p.length,action:"POP",location:p[m],index:m,entries:p,createHref:f,push:g,replace:h,go:v,goBack:_,goForward:y,canGo:b,block:R,listen:k};return x},K=Q;a.d(t,"createBrowserHistory",function(){return B}),a.d(t,"createHashHistory",function(){return W}),a.d(t,"createMemoryHistory",function(){return K}),a.d(t,"createLocation",function(){return N}),a.d(t,"locationsAreEqual",function(){return R}),a.d(t,"parsePath",function(){return y}),a.d(t,"createPath",function(){return E})},function(e,t,a){var n=a(53);e.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},function(e,t,a){e.exports=!a(54)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t){var a={}.hasOwnProperty;e.exports=function(e,t){return a.call(e,t)}},function(e,t,a){var n=a(121),o=a(78);e.exports=function(e){return n(o(e))}},function(e,t,a){"use strict";t.__esModule=!0,t.default=function(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}},function(e,t,a){var n=a(43),o=a(57);e.exports=a(48)?function(e,t,a){return n.f(e,t,o(1,a))}:function(e,t,a){return e[t]=a,e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){e.exports={}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(8),o=a.n(n),i=a(0),s=a.n(i),r=a(3),c=a.n(r),l=a(1),d=a.n(l),u=a(2),m=a.n(u),p=a(4),f=a.n(p),g=a(10),h=a.n(g),v=function(e){function t(){s()(this,t);var e=d()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.state={active:!1},e.onTouchStart=function(t){e.triggerEvent("TouchStart",!0,t)},e.onTouchMove=function(t){e.triggerEvent("TouchMove",!1,t)},e.onTouchEnd=function(t){e.triggerEvent("TouchEnd",!1,t)},e.onTouchCancel=function(t){e.triggerEvent("TouchCancel",!1,t)},e.onMouseDown=function(t){e.triggerEvent("MouseDown",!0,t)},e.onMouseUp=function(t){e.triggerEvent("MouseUp",!1,t)},e.onMouseLeave=function(t){e.triggerEvent("MouseLeave",!1,t)},e}return m()(t,e),c()(t,[{key:"componentDidUpdate",value:function(){this.props.disabled&&this.state.active&&this.setState({active:!1})}},{key:"triggerEvent",value:function(e,t,a){var n="on"+e,o=this.props.children;o.props[n]&&o.props[n](a),t!==this.state.active&&this.setState({active:t})}},{key:"render",value:function(){var e=this.props,t=e.children,a=e.disabled,n=e.activeClassName,i=e.activeStyle,s=a?void 0:{onTouchStart:this.onTouchStart,onTouchMove:this.onTouchMove,onTouchEnd:this.onTouchEnd,onTouchCancel:this.onTouchCancel,onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onMouseLeave:this.onMouseLeave},r=f.a.Children.only(t);if(!a&&this.state.active){var c=r.props,l=c.style,d=c.className;return!1!==i&&(i&&(l=o()({},l,i)),d=h()(d,n)),f.a.cloneElement(r,o()({className:d,style:l},s))}return f.a.cloneElement(r,s)}}]),t}(f.a.Component),_=v;v.defaultProps={disabled:!1},a.d(t,"default",function(){return _})},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.MemberDiscount=void 0;var o=a(0),i=n(o),s=a(3),r=n(s),c=a(1),l=n(c),d=a(2),u=n(d),m=a(4),p=n(m),f=a(28),g=n(f),h=a(5),v=a(11);a(375);t.MemberDiscount=function(e){function t(e){(0,i.default)(this,t);var a=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.show=function(e){var t=e.discountType,n=e.franchisee,o=e.afterSelectedDiscount;a.setData({discountType:t,franchisee:n}),a.afterSelectedDiscount=o},a.showDialog=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";a.getAppECStoreConfig();var n=e.discount_type,o=a.data.currentDiscount,i=a.data.currentTab,s=0;if(!n){var r="";return a.data.discountType.map(function(e){e.value.length>0&&(r=e.label,s++)}),void a.setData({isVisibled:!0,selectedDiscount:{discount_type:r,franchisee:t},currentTab:r,currentDiscount:{type:"",index:0},isShowTarbar:1!==s})}a.data.discountType.map(function(t){if(t.label===n||"vip"===t.label&&"paid_vip"===n||"vip"===t.label&&"vip_benefit_day"===n){if(1===e.no_use_benefit)return o={type:"",index:0},void(i=n);"coupon"===n?(t.value.forEach(function(t,a){t.coupon_id==e.coupon_id&&(o={type:"coupon",index:a})}),i="coupon"):"vip"===n||"paid_vip"===n||"vip_benefit_day"===n?t.value.forEach(function(t,a){t.vip_id==e.vip_id&&t.discount_type==e.discount_type&&(o={type:"vip",index:a},i="vip")}):"integral"===n&&(o={type:"integral",index:0},i="integral")}t.value instanceof Array&&t.value.length>0&&s++}),a.tipNameInit(),a.setData({isVisibled:!0,selectedDiscount:e,currentDiscount:o,currentTab:i,isShowTarbar:1!==s})},a.tipNameInit=function(){var e=[];a.data.discountType.map(function(t){"coupon"===t.label&&t.value.length?e.push("优惠券"):"vip"===t.label&&t.value.length?e.push("会员卡"):"integral"===t.label&&t.value.length&&e.push("积分")}),a.setData({tipName:e.length>1?e.join("、"):""})},a.selectedDiscount=function(e){var t=e.currentTarget.dataset.type,n=+e.currentTarget.dataset.index,o=e.currentTarget.dataset.disabled||!1,i=a.data.selectedDiscount,s=a.data.currentDiscount;o||(a.data.discountType.map(function(e){e.label===t&&(t===s.type&&n===s.index?("combine"===i.type?i.no_use_benefit=1:i={title:"不使用优惠",name:"无",no_use_benefit:1},s={type:"",index:0}):("combine"===i.type?(i.no_use_benefit=0,"coupon"===i.discount_type&&(i.coupon_id=e.value[n].coupon_id),"vip"!==i.discount_type&&"paid_vip"!==i.discount_type&&"vip_benefit_day"!==i.discount_type||(i.discount_type=e.value[n].discount_type,i.vip_id=e.value[n].vip_id)):i=e.value[n],s={type:t,index:n}),a.setData({selectedDiscount:i,currentDiscount:s}))}),a.afterSelectedDiscount&&a.afterSelectedDiscount({selectedDiscount:i}),a.setData({isVisibled:!1}))},a.hiddenDialog=function(e){a.setData({isVisibled:!1})},a.noUseDiscount=function(){var e=a.data.selectedDiscount;"combine"===e.type?e.no_use_benefit=1:e={title:"不使用优惠",name:"无",no_use_benefit:1},a.setData({selectedDiscount:e,currentDiscount:{type:"",index:0},isVisibled:!1}),a.afterSelectedDiscount&&a.afterSelectedDiscount({selectedDiscount:e})},a.checkType=function(e){e.stopPropagation();var t=e.currentTarget.dataset.label;a.setData({currentTab:t})},a.isShowTipChange=function(){a.setData({isShowTip:!1})},a.getVipCardInfo=function(){var e=a;h.appMethod.sendRequest({url:"/index.php?r=AppShop/GetVIPInfo",data:{sub_shop_app_id:e.data.franchisee},hideLoading:!0,success:function(t){var a=e.data.discountType;a.map(function(e){e.label}),e.setData({discountType:a})}})},a.getAppECStoreConfig=function(){h.appMethod.getAppECStoreConfig(function(e){a.setData({themeColor:e.color_config.theme})},a.data.franchiseeId)},a.options=a.props.options,a.state={discountType:[{label:"coupon",value:[]},{label:"vip",value:[]},{label:"integral",value:[]}],isVisibled:!1,isShowTip:!0,tipName:"",selectedDiscount:{},currentDiscount:{type:"",index:0},themeColor:{type:"",value:""},isShowTarbar:!0,currentTab:"",franchisee:"",appLogo:h.appMethod.globalData.appLogo},a}return(0,u.default)(t,e),(0,r.default)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.isVisibled,n=t.selectedDiscount,o=t.isShowTip,i=t.tipName,s=t.themeColor,r=t.isShowTarbar,c=t.currentTab,l=t.discountType,d=t.currentDiscount,u=t.appLogo;return a?p.default.createElement(p.default.Fragment,null,p.default.createElement("div",{className:"common-component member-discount"},a&&p.default.createElement("div",null,p.default.createElement("div",{className:"discount-wrapper"},p.default.createElement("div",{className:"title"},p.default.createElement("span",{className:"title-text"},"请选择","combine"!==n.type?"会员优惠":"vip"===n.discount_type||"paid_vip"===n.discount_type||"vip_benefit_day"===n.discount_type?"会员卡优惠":"coupon"===n.discount_type?"优惠券优惠":"integral"===n.discount_type?"积分优惠":"会员优惠"),p.default.createElement("div",{className:"ico-moon icon-closes",onClick:this.hiddenDialog})),o&&""!==i&&p.default.createElement("div",{className:"tip-mess",style:{color:s,backgroundColor:s+"33"}},p.default.createElement("span",{className:"ico-moon icon-remind"}),p.default.createElement("span",null,"只能选用会员卡或优惠券其中一种，作为会员优惠使用。"),p.default.createElement("div",{className:"ico-moon icon-closes",onClick:this.isShowTipChange})),p.default.createElement("div",{className:"tab"},r&&p.default.createElement("div",{className:"tab-bar"},l.length>0&&l.map(function(t,a){return p.default.createElement("div",{className:"tab-item "+(t.label===c?"active":""),key:t.label,hidden:t.value.length<1,"data-label":t.label,onClick:e.checkType},p.default.createElement("span",{className:"tab-item-text",style:t.label===c?{color:s,borderColor:s}:{}},"coupon"===t.label?"优惠券":"vip"===t.label?"会员卡":"integral"===t.label?"积分":""))})),p.default.createElement(v.ScrollView,{"scroll-y":"true",className:"my-coupon my-discount",hidden:"coupon"!==c},l.map(function(t,a){return"coupon"===t.label&&p.default.createElement("div",{key:a},t.value.map(function(t,a){return p.default.createElement("div",{className:"coupon-item",key:a,style:{borderTop:".08rem solid "+("coupon"===d.type&&d.index===a?"#FF4D65":"#d9d9d9")},"data-type":"coupon","data-index":a,"data-disabled":t.disabled,onClick:e.selectedDiscount},p.default.createElement("div",{className:"info",style:{color:"coupon"===d.type&&d.index===a?"#666":"#ccc"}},p.default.createElement("div",{className:"coupon-title text-overflow",style:{color:"coupon"===d.type&&d.index===a?"#333":"#ccc"}},t.title),0==t.type&&p.default.createElement("div",{className:"use-condition"},"使用条件：满",t.condition,"元，减",t.value,"元"),1==t.type&&p.default.createElement("div",{className:"use-condition"},"使用条件: 打",t.value,"折"),2==t.type&&p.default.createElement("div",{className:"use-condition"},"使用条件：可抵扣",t.value,"元"),3==t.type&&p.default.createElement("div",{className:"use-condition"},""==t.extra_condition?p.default.createElement("span",null,"使用条件: 直接兑换",t.coupon_goods_info&&t.coupon_goods_info.title," "):t.extra_condition.price?p.default.createElement("span",null,"使用条件: 消费满",t.extra_condition&&t.extra_condition.price,"元可兑换",t.coupon_goods_info&&t.coupon_goods_info.title):t.extra_condition.goods_id?p.default.createElement("span",null,"使用条件: 购买",t.condition_goods_info&&t.condition_goods_info.title,"可兑换",t.coupon_goods_info&&t.coupon_goods_info.title):""),4==t.type&&p.default.createElement("div",{className:"use-condition"},"使用条件: 储值金可充值",t.value,"元"),5==t.type&&p.default.createElement("div",{className:"use-condition"},"使用条件: ",t.extra_condition),"coupon"===d.type&&d.index===a&&p.default.createElement("div",{className:"ico-moon icon-success-tip"}),!("coupon"===d.type&&d.index===a)&&p.default.createElement("div",{className:"icon-no-use"}),p.default.createElement("div",{className:"background-word-area",style:{border:"2rpx solid "+("coupon"===d.type&&d.index===a?"#FF4D65":"#ccc")}},p.default.createElement("div",{className:"background-circle",style:{background:"coupon"===d.type&&d.index===a?"#FF4D65":"#ccc"}}),0==t.type&&p.default.createElement("div",{className:"background-word"},"减"),1==t.type&&p.default.createElement("div",{className:"background-word"},"折"),2==t.type&&p.default.createElement("div",{className:"background-word"},"代"),3==t.type&&p.default.createElement("div",{className:"background-word"},"兑"),4==t.type&&p.default.createElement("div",{className:"background-word"},"储"),5==t.type&&p.default.createElement("div",{className:"background-word"},"通")),p.default.createElement("div",{className:"time-block"},p.default.createElement("div",{className:"effective-time",style:{color:"coupon"===d.type&&d.index===a?"#999":"#ccc"}},t.active_title),!t.disabled&&t.expire_day_count&&p.default.createElement("div",{className:"maturity-time",style:{color:"coupon"===d.type&&d.index===a?"#FF4D65":"#ccc"}},t.expire_day_count,"天后即将过期 "),t.disabled&&p.default.createElement("div",{className:"disabled-text",style:{color:s}},t.cant_use_reason))))}),0===t.value.length&&p.default.createElement("div",{className:"empty"},p.default.createElement("img",{src:"http://www.zhichiwangluo.com/zhichi_frontend/static/webapp/images/transfer/empty.png"}),"暂无任何数据"))})),p.default.createElement(v.ScrollView,{"scroll-y":"true",className:"my-card my-discount",hidden:"vip"!==c},l.map(function(t,a){return"vip"===t.label&&p.default.createElement("div",{key:a},t.value.map(function(t,a){return p.default.createElement("div",{className:"card-item",key:a,"data-type":"vip","data-index":a,onClick:e.selectedDiscount,style:{backgroundImage:"url('http://www.zhichiwangluo.com/zhichi_frontend/static/webapp/images/transfer/vip-card-default.png')"}},p.default.createElement("div",{className:"card-img-block",style:{border:"6rpx solid "+(t.logo?"#ffc790":"#fff")}},t.logo?p.default.createElement("img",{className:"card-img",src:t.logo}):p.default.createElement("img",{className:"app-logo-img",src:u})),p.default.createElement("div",{className:"card-info"},p.default.createElement("div",{className:"card-name text-overflow"},t.app_name+" "+t.name," "),0!=t.discount&&p.default.createElement("div",{className:"card-mess text-overflow"},"可享 ",t.discount,"折")),p.default.createElement("div",{className:"card-btn"},"vip"===d.type&&d.index===a?"使用中":"立即使用"))}),0===t.value.length&&p.default.createElement("div",{className:"empty"},p.default.createElement("img",{src:"http://www.zhichiwangluo.com/zhichi_frontend/static/webapp/images/transfer/empty.png"}),"暂无任何数据"))})),p.default.createElement(v.ScrollView,{"scroll-y":"true",className:"my-integral my-discount",hidden:"integral"!==c},l.map(function(t,a){return"integral"===t.label&&p.default.createElement("div",{key:a},t.value.map(function(t,a){return p.default.createElement("div",{className:"integral-item",key:a,style:{borderTop:"8rpx solid "+("integral"===d.type&&d.index===a?"#FF4D65":"#d9d9d9")},"data-type":"integral","data-index":a,onClick:e.selectedDiscount},p.default.createElement("div",{className:"info",style:{color:"integral"===d.type&&d.index===a?"#333":"#ccc"}},p.default.createElement("div",{className:"integral-title"},"积分抵扣 ",p.default.createElement("span",{className:"red-text",style:{color:"integral"===d.type&&d.index===a?"#FF4D65":"#ccc"}},t.max_can_use_integral,"积分可用")),p.default.createElement("div",{className:"use-condition"},"积分使用 : 100积分 抵1元"),"integral"===d.type&&d.index===a&&p.default.createElement("div",{className:"ico-moon icon-success-tip"}),!("integral"===d.type&&d.index===a)&&p.default.createElement("div",{className:"icon-no-use"}),p.default.createElement("div",{className:"background-word-area",style:{border:"2rpx solid "+("integral"===d.type&&d.index===a?"#FF4D65":"#ccc")}},p.default.createElement("div",{className:"background-circle",style:{background:"integral"===d.type&&d.index===a?"#FF4D65":"#ccc"}}),p.default.createElement("div",{className:"background-word"},"积"))))}),0===t.value.length&&p.default.createElement("div",{className:"empty"},p.default.createElement("img",{src:"http://www.zhichiwangluo.com/zhichi_frontend/static/webapp/images/transfer/empty.png"}),"暂无任何数据"))})),p.default.createElement("div",{className:"no-use-btn",onClick:this.noUseDiscount},"不使用该优惠")))))):null}}]),t}(g.default)},function(e,t,a){var n=a(120),o=a(82);e.exports=Object.keys||function(e){return n(e,o)}},function(e,t){e.exports=!0},function(e,t){var a=0,n=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++a+n).toString(36))}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,a){var n=a(78);e.exports=function(e){return Object(n(e))}},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ModalComponent=void 0;var o=a(8),i=n(o),s=a(9),r=n(s),c=a(3),l=n(c),d=a(0),u=n(d),m=a(1),p=n(m),f=a(2),g=n(f),h=a(10),v=n(h),_=a(4),y=n(_),E=a(128),b=n(E),N=a(56),R=n(N),k=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&(a[n[o]]=e[n[o]]);return a},w=t.ModalComponent=function(e){function t(){return(0,u.default)(this,t),(0,p.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,g.default)(t,e),t}(y.default.Component),x=function(e){function t(){return(0,u.default)(this,t),(0,p.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,g.default)(t,e),(0,l.default)(t,[{key:"renderFooterButton",value:function(e,t,a){var n={};if(e.style&&"string"==typeof(n=e.style)){n={cancel:{},default:{},destructive:{color:"red"}}[n]||{}}var o=function(t){t.preventDefault(),e.onPress&&e.onPress()};return y.default.createElement(R.default,{activeClassName:t+"-button-active",key:a},y.default.createElement("a",{className:t+"-button",role:"button",style:n,onClick:o},e.text||"Button"))}},{key:"render",value:function(){var e,t=this,a=this.props,n=a.prefixCls,o=a.className,s=a.wrapClassName,c=a.transitionName,l=a.maskTransitionName,d=a.style,u=a.platform,m=a.footer,p=void 0===m?[]:m,f=a.operation,g=a.animated,h=a.transparent,_=a.popup,E=a.animationType,N=k(a,["prefixCls","className","wrapClassName","transitionName","maskTransitionName","style","platform","footer","operation","animated","transparent","popup","animationType"]),R=(0,v.default)(n+"-button-group-"+(2!==p.length||f?"v":"h"),n+"-button-group-"+(f?"operation":"normal")),w=p.length?y.default.createElement("div",{className:R,role:"group"},p.map(function(e,a){return t.renderFooterButton(e,n,a)})):null,x=void 0,C=void 0;g&&(x=C=h?"am-fade":"am-slide-up",_&&(x="slide-up"===E?"am-slide-up":"am-slide-down",C="am-fade"));var D=(0,v.default)(s,(0,r.default)({},n+"-wrap-popup",_)),S=(0,v.default)(o,(e={},(0,r.default)(e,n+"-transparent",h),(0,r.default)(e,n+"-popup",_),(0,r.default)(e,n+"-popup-"+E,_&&E),(0,r.default)(e,n+"-android","android"===u),e));return y.default.createElement(b.default,(0,i.default)({},N,{prefixCls:n,className:S,wrapClassName:D,transitionName:c||x,maskTransitionName:l||C,style:d,footer:w}))}}]),t}(w);t.default=x,x.defaultProps={prefixCls:"am-modal",transparent:!1,popup:!1,animationType:"slide-down",animated:!0,style:{},onShow:function(){},footer:[],closable:!1,operation:!1,platform:"ios"}},function(e,t,a){"use strict";var n=a(182)(!0);a(124)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,a=this._i;return a>=t.length?{value:void 0,done:!0}:(e=n(t,a),this._i+=e.length,{value:e,done:!1})})},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(8),i=n(o),s=a(4),r=n(s),c=a(10),l=n(c),d=a(241),u=n(d),m=function(e){var t=e.prefixCls,a=e.className,n=e.rootNativeProps,o=e.children,s=e.style,c=e.getValue(),d=r.default.Children.map(o,function(t,a){return r.default.cloneElement(t,{selectedValue:c[a],onValueChange:function(){for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];return e.onValueChange.apply(e,[a].concat(n))},onScrollChange:e.onScrollChange&&function(){for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];return e.onScrollChange.apply(e,[a].concat(n))}})});return r.default.createElement("div",(0,i.default)({},n,{style:s,className:(0,l.default)(a,t)}),d)};t.default=(0,u.default)(m),e.exports=t.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(9),i=n(o),s=a(8),r=n(s),c=a(0),l=n(c),d=a(3),u=n(d),m=a(1),p=n(m),f=a(2),g=n(f),h=a(4),v=n(h),_=a(10),y=n(_),E=a(242),b=n(E),N=function(e){function t(e){(0,l.default)(this,t);var a=(0,p.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.scrollHanders=function(){var e=-1,t=0,n=0,o=!1,i=!1,s=function(e,t){e.transform=t,e.webkitTransform=t},r=function(e,t){e.transition=t,e.webkitTransition=t},c=function(t,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.3;e!==n&&(e=n,o&&!a.props.noAnimate&&r(a.contentRef.style,"cubic-bezier(0,0,0.2,1.15) "+o+"s"),s(a.contentRef.style,"translate3d(0,"+-n+"px,0)"),setTimeout(function(){a.scrollingComplete(),a.contentRef&&r(a.contentRef.style,"")},1e3*+o))},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,a=0,n=0,o=0,i={record:function(i){var s=+new Date;o=(i-n)/(s-a),s-a>=e&&(o=s-a<=t?o:0,n=i,a=s)},getVelocity:function(e){return e!==n&&i.record(e),o}};return i}(),d=function(){i=!1;var t=e,n=(a.props.children.length-1)*a.itemHeight,o=.3,s=4*l.getVelocity(t);s&&(t=40*s+t,o=.1*Math.abs(s)),t%a.itemHeight!=0&&(t=Math.round(t/a.itemHeight)*a.itemHeight),t<0?t=0:t>n&&(t=n),c(0,t,o<.3?.3:o),a.onScrollChange()},u=function(a){o||(i=!0,n=a,t=e)},m=function(r){!o&&i&&(e=t-r+n,l.record(e),a.onScrollChange(),s(a.contentRef.style,"translate3d(0,"+-e+"px,0)"))};return{touchstart:function(e){return u(e.touches[0].screenY)},mousedown:function(e){return u(e.screenY)},touchmove:function(e){e.preventDefault(),m(e.touches[0].screenY)},mousemove:function(e){e.preventDefault(),m(e.screenY)},touchend:function(){return d()},touchcancel:function(){return d()},mouseup:function(){return d()},getValue:function(){return e},scrollTo:c,setDisabled:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];o=e}}}(),a.scrollTo=function(e){a.scrollHanders.scrollTo(0,e)},a.scrollToWithoutAnimation=function(e){a.scrollHanders.scrollTo(0,e,0)},a.fireValueChange=function(e){e!==a.state.selectedValue&&("selectedValue"in a.props||a.setState({selectedValue:e}),a.props.onValueChange&&a.props.onValueChange(e))},a.onScrollChange=function(){var e=a.scrollHanders.getValue();if(e>=0){var t=v.default.Children.toArray(a.props.children),n=a.props.computeChildIndex(e,a.itemHeight,t.length);if(a.scrollValue!==n){a.scrollValue=n;var o=t[n];o&&a.props.onScrollChange?a.props.onScrollChange(o.props.value):!o&&console.warn&&console.warn("child not found",t,n)}}},a.scrollingComplete=function(){var e=a.scrollHanders.getValue();e>=0&&a.props.doScrollingComplete(e,a.itemHeight,a.fireValueChange)};var n=void 0,o=a.props,i=o.selectedValue,s=o.defaultSelectedValue;if(void 0!==i)n=i;else if(void 0!==s)n=s;else{var r=v.default.Children.toArray(a.props.children);n=r&&r[0]&&r[0].props.value}return a.state={selectedValue:n},a}return(0,g.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.contentRef,a=this.indicatorRef,n=this.maskRef,o=this.rootRef,i=o.getBoundingClientRect().height,s=this.itemHeight=a.getBoundingClientRect().height,r=Math.floor(i/s);r%2==0&&r--,r--,r/=2,t.style.padding=s*r+"px 0",a.style.top=s*r+"px",n.style.backgroundSize="100% "+s*r+"px",this.scrollHanders.setDisabled(this.props.disabled),this.props.select(this.state.selectedValue,this.itemHeight,this.scrollTo);var c=this.passiveSupported(),l=!!c&&{passive:!1},d=!!c&&{passive:!0};Object.keys(this.scrollHanders).forEach(function(t){if(0===t.indexOf("touch")||0===t.indexOf("mouse")){var a=t.indexOf("move")>=0?l:d;o.addEventListener(t,e.scrollHanders[t],a)}})}},{key:"componentWillUnmount",value:function(){var e=this;Object.keys(this.scrollHanders).forEach(function(t){0!==t.indexOf("touch")&&0!==t.indexOf("mouse")||e.rootRef.removeEventListener(t,e.scrollHanders[t])})}},{key:"passiveSupported",value:function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",null,t)}catch(e){}return e}},{key:"componentWillReceiveProps",value:function(e){var t=this;"selectedValue"in e&&this.state.selectedValue!==e.selectedValue&&this.setState({selectedValue:e.selectedValue},function(){t.props.select(e.selectedValue,t.itemHeight,e.noAnimate?t.scrollToWithoutAnimation:t.scrollTo)}),this.scrollHanders.setDisabled(e.disabled)}},{key:"shouldComponentUpdate",value:function(e,t){return this.state.selectedValue!==t.selectedValue||this.props.children!==e.children}},{key:"componentDidUpdate",value:function(){this.props.select(this.state.selectedValue,this.itemHeight,this.scrollToWithoutAnimation)}},{key:"getValue",value:function(){if("selectedValue"in this.props)return this.props.selectedValue;var e=v.default.Children.toArray(this.props.children);return e&&e[0]&&e[0].props.value}},{key:"render",value:function(){var e,t=this,a=this.props,n=a.prefixCls,o=a.itemStyle,s=a.indicatorStyle,c=a.indicatorClassName,l=void 0===c?"":c,d=a.children,u=this.state.selectedValue,m=n+"-item",p=m+" "+n+"-item-selected",f=function(e){var t=e.props,a=t.className,n=void 0===a?"":a,i=t.style,s=t.value;return v.default.createElement("div",{style:(0,r.default)({},o,i),className:(u===s?p:m)+" "+n,key:s},e.children||e.props.children)},g=v.default.Children?v.default.Children.map(d,f):[].concat(d).map(f),h=(e={},(0,i.default)(e,a.className,!!a.className),(0,i.default)(e,n,!0),e);return v.default.createElement("div",{className:(0,y.default)(h),ref:function(e){return t.rootRef=e},style:this.props.style},v.default.createElement("div",{className:n+"-mask",ref:function(e){return t.maskRef=e}}),v.default.createElement("div",{className:n+"-indicator "+l,ref:function(e){return t.indicatorRef=e},style:s}),v.default.createElement("div",{className:n+"-content",ref:function(e){return t.contentRef=e}},g))}}]),t}(v.default.Component);N.defaultProps={prefixCls:"rmc-picker"},t.default=(0,b.default)(N),e.exports=t.default},function(e,t){var a=Array.isArray;e.exports=a},function(e,t,a){var n=a(104),o=n(Object,"create");e.exports=o},function(e,t,a){function n(e,t){for(var a=e.length;a--;)if(o(e[a][0],t))return a;return-1}var o=a(151);e.exports=n},function(e,t,a){function n(e,t){var a=e.__data__;return o(t)?a["string"==typeof t?"string":"hash"]:a.map}var o=a(305);e.exports=n},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ImgUpload=void 0;var o=a(22),i=n(o),s=a(0),r=n(s),c=a(3),l=n(c),d=a(1),u=n(d),m=a(2),p=n(m);a(23);var f=a(4),g=n(f),h=a(131),v=n(h),_=a(34);a(321);t.ImgUpload=function(e){function t(e){(0,r.default)(this,t);var a=(0,u.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleImgResize=function(e){var t=e.target.files[0];if(t){var n={width:a.options.width||500,quality:a.options.quality||1};(0,v.default)(t,n).then(function(e){(0,_.ajax)({url:"/index.php?r=AppData/uploadImg",data:{img_data:e.base64,org:1},success:function(e){if(0!==e.status)return void i.default.info("图片上传失败，请重试");a.props.complete(e.data)}})})}},a.options=a.props.options||{},a}return(0,p.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){return g.default.createElement("input",{className:"common img-upload",id:this.options.id,type:"file",accept:"image/jpg,image/jpeg, image/gif, image/bmp, image/jp2, image/x-ms-bmp, image/x-png",onChange:this.handleImgResize})}}]),t}(g.default.Component)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.GoodsShoppingCart=void 0;var o=a(0),i=n(o),s=a(3),r=n(s),c=a(1),l=n(c),d=a(2),u=n(d),m=a(4),p=n(m),f=a(28),g=n(f),h=a(5);a(30);a(355);t.GoodsShoppingCart=function(e){function t(e){(0,i.default)(this,t);var a=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.goodsId="",a.franchiseeId="",a.show=function(e){var t=e.afterSelectedGoods;a.afterSelectedGoods=t},a.showDialog=function(e){a.goodsId=e.goodsId,a.franchiseeId=e.franchisee||"";var t=h.appMethod.getAppCurrentPage();a.setData({isShowBottom:t.data.isShowBottom||"",showBuyNow:e.showBuynow||"",showVirtualPrice:e.showVirtualPrice||""}),a.getGoodsDetail(),a.getAppECStoreConfig()},a.getGoodsDetail=function(){var e=a;h.appMethod.sendRequest({url:"/index.php?r=AppShop/getGoods",data:{data_id:e.goodsId,sub_shop_app_id:a.franchiseeId},method:"post",success:function(t){var a=t.data[0].form_data,n=a.model_items[0],o=[],i=[],s=0,r=0,c=void 0,l="",d="",u="",m=a.is_vip_goods,p=0;a.model_items.length?(s=n.price,r=n.stock,p=n.vip_price||n.price,c=n.id,d=n.img_url,u=n.virtual_price):(s=a.price,p=a.vip_goods_price||a.price,r=a.stock,d=a.cover,u=a.virtual_price);for(var f in a.model)if(f){var g=a.model[f];o.push(g),i.push(g.subModelId[0]),l+="“"+g.subModelName[0]+"” "}a.model=o,e.setData({isVisibled:!0,goodsInfo:a,"selectGoodsModelInfo.price":s,"selectGoodsModelInfo.is_vip_goods":m,"selectGoodsModelInfo.vipprice":p,"selectGoodsModelInfo.stock":r,"selectGoodsModelInfo.buyCount":1,"selectGoodsModelInfo.buyTostoreCount":0,"selectGoodsModelInfo.cart_id":"","selectGoodsModelInfo.models":i,"selectGoodsModelInfo.modelId":c||"","selectGoodsModelInfo.models_text":l,"selectGoodsModelInfo.imgurl":d,"selectGoodsModelInfo.virtual_price":u,"selectGoodsModelInfo.max_can_use_integral":a.max_can_use_integral})}})},a.selectGoodsSubModel=function(e){var t=e.target.dataset,n=t.modelIndex,o=t.submodelIndex,i={},s=a.data.selectGoodsModelInfo.models,r=a.data.goodsInfo.model,c="";s[n]=r[n].subModelId[o];for(var l=0;l<s.length;l++)for(var d=r[l].subModelId,u=0;u<d.length;u++)s[l]==d[u]&&(c+="“"+r[l].subModelName[u]+"” ");i["selectGoodsModelInfo.models"]=s,i["selectGoodsModelInfo.models_text"]=c,a.setData(i),a.resetSelectCountPrice()},a.resetSelectCountPrice=function(){var e=a.data.selectGoodsModelInfo.models.join(","),t=a.data.goodsInfo.model_items,n={},o=a.data.goodsInfo.cover;n["selectGoodsModelInfo.buyCount"]=1,n["selectGoodsModelInfo.buyTostoreCount"]=0;for(var i=t.length-1;i>=0;i--)if(t[i].model==e){n["selectGoodsModelInfo.stock"]=t[i].stock,n["selectGoodsModelInfo.price"]=t[i].price,n["selectGoodsModelInfo.modelId"]=t[i].id||"",n["selectGoodsModelInfo.imgurl"]=t[i].img_url||o,n["selectGoodsModelInfo.virtual_price"]=t[i].virtual_price,n["selectGoodsModelInfo.vipprice"]=t[i].vip_price;break}a.setData(n)},a.inputBuyCount=function(e){a.setData({"selectGoodsModelInfo.buyCount":e.target.value})},a.clickGoodsMinusButton=function(){var e=a.data.selectGoodsModelInfo.buyCount;e<=1||a.setData({"selectGoodsModelInfo.buyCount":e-1})},a.clickGoodsPlusButton=function(){var e=a.data.selectGoodsModelInfo,t=e.buyCount;t>=e.stock||a.setData({"selectGoodsModelInfo.buyCount":t+1})},a.sureAddToShoppingCart=function(){var e=a,t={goods_id:e.data.goodsInfo.id,model_id:e.data.selectGoodsModelInfo.modelId||"",num:e.data.selectGoodsModelInfo.buyCount,sub_shop_app_id:a.franchiseeId,message_notice_type:1};h.appMethod.sendRequest({url:"/index.php?r=AppShop/addCart",data:t,success:function(t){e.afterSelectedGoods&&e.afterSelectedGoods(),e.hideDialog()}})},a.hideDialog=function(){a.setData({isVisibled:!1})},a.getAppECStoreConfig=function(){h.appMethod.getAppECStoreConfig(function(e){a.setData({storeStyle:e.color_config})},a.franchiseeId)},a.goPreviewGoodsOrder=function(){var e=a,t={goods_id:e.data.goodsInfo.id,model_id:e.data.selectGoodsModelInfo.modelId||"",num:e.data.selectGoodsModelInfo.buyCount,sub_shop_app_id:a.franchiseeId,message_notice_type:1};h.appMethod.sendRequest({url:"/index.php?r=AppShop/addCart",data:t,success:function(t){var a=[t.data],n="/eCommerce/pages/previewGoodsOrder/previewGoodsOrder?cart_arr="+encodeURIComponent(a);e.hideDialog(),h.appMethod.turnToPage(n)}})},a.options=a.props.options,a.state={isVisibled:!1,showBuyNow:!1,showVirtualPrice:!1,goodsInfo:{},selectGoodsModelInfo:{buyCount:0},isShowBottom:!1,storeStyle:{}},a}return(0,u.default)(t,e),(0,r.default)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.isVisibled,n=t.showBuyNow,o=t.showVirtualPrice,i=t.goodsInfo,s=t.selectGoodsModelInfo,r=t.isShowBottom,c=t.storeStyle,l=h.appMethod.isTabBarPage();return p.default.createElement("div",{className:"common-component goods-shopping-cart goodsPayDialog",style:{bottom:l?"48px":""},hidden:!a},p.default.createElement("div",{className:"goods-detail-contain",style:r?{bottom:"48px"}:{}},p.default.createElement("div",{className:"ico-moon icon-closes",onClick:this.hideDialog.bind(this)}),p.default.createElement("div",{className:"goods-detail-header"},p.default.createElement("img",{className:"goods-cover",src:s.imgurl||i.cover}),p.default.createElement("div",{className:"select-goods-info"},p.default.createElement("div",{className:"goods-price"},1!=s.is_vip_goods?p.default.createElement(p.default.Fragment,null,p.default.createElement("span",{style:{color:c.theme}},"¥",s.price),o&&0!=s.virtual_price&&p.default.createElement("span",{className:"virtualPrice"},"¥",s.virtual_price)):p.default.createElement("div",{className:"pay-current-price member-status"},p.default.createElement("div",{className:"member-price memeber-item",style:{display:"inline-block"}},p.default.createElement("span",null,"¥"),p.default.createElement("span",null,s.vipprice)),s.vipPrice!=s.price&&p.default.createElement("div",{className:"member-logo memeber-item"},"会员价"),p.default.createElement("div",{className:"memebr-origin-price memeber-item",style:{color:"#999",display:"inline-block"}},o&&0!=selectModelInfo.virtualPrice&&p.default.createElement("span",{className:"virtualPrice",style:{marginLeft:0}},"￥",s.virtual_price)))),p.default.createElement("div",{className:"goods-stock"},"库存",s.stock),s.models_text&&p.default.createElement("div",{className:"select-model"},"已选：",s.models_text))),p.default.createElement("div",{className:"goods-detail-content"},p.default.createElement("div",{className:"goods-dialog-content",hidden:!(i.model_items&&i.model_items.length)},i.model&&i.model.map(function(t,a){return p.default.createElement("div",{className:"goods-model",key:a},p.default.createElement("div",{className:"model-title"},t.name),p.default.createElement("div",{className:"sub-model"},t.subModelName.map(function(n,o){return p.default.createElement("span",{className:"subModel "+(s.models[a]==t.subModelId[o]?"select":""),key:o,"data-model-index":a,"data-submodel-index":o,"data-submodel-id":t.subModelId[o],onClick:e.selectGoodsSubModel.bind(e),style:s.models[a]==t.subModelId[o]?{background:c.theme+"33",color:c.theme,borderColor:c.theme}:{}},n)})))}))),p.default.createElement("div",{className:"goods-num-contain"},p.default.createElement("span",{className:"goods-num-title"},"购买数量："),p.default.createElement("div",{className:"good-number-box pull-right"},p.default.createElement("div",{className:"goods-minus",onClick:this.clickGoodsMinusButton},"-"),p.default.createElement("input",{className:"goods-count",type:"number",value:s.buyCount,onInput:this.inputBuyCount,onChange:this.inputBuyCount}),p.default.createElement("div",{className:"goods-plus",onClick:this.clickGoodsPlusButton},"+"))),p.default.createElement("div",{className:"goods-shopping-bottom"},p.default.createElement("div",{className:"add-shoppingcart",style:{background:c.secondary,color:"#ACD3FA"==c.secondary||"#FFCFDF"==c.secondary||"#ffffff"==c.secondary||"#DFF3ED"==c.secondary||"#FAF7ED"==c.secondary?c.theme:""},onClick:this.sureAddToShoppingCart.bind(this)},"加入购物车"),n&&p.default.createElement("div",{className:"now-buy",style:{background:c.theme},onClick:this.goPreviewGoodsOrder},"立即购买"))))}}]),t}(g.default)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unlisten=t.location=t.history=void 0;var n=a(8),o=function(e){return e&&e.__esModule?e:{default:e}}(n),i=a(46),s=a(5),r=a(6),c=(0,i.createBrowserHistory)({basename:"/zc_webapp"}),l=c.location,d=c.listen(function(e,t){var a=s.appMethod.getAppCurrentPage();if(a&&a.customPageRef&&s.appMethod.onPageUnload(),console.log("路由处理中...","location:",e,"action:",t),(0,r.updateUrlParam)("app_id",s.appMethod.getAppId()),window.top!==window){var n=JSON.stringify({name:"turnToPage",url:window.location.href});window.parent.postMessage(n,"*")}var i=e.pathname.split("/")[1],c={route:i,data:{},callbackData:null,setData:function(e){this.callbackData?this.callbackData=(0,o.default)({},this.callbackData,e):this.callbackData=e},clearCallbackData:function(){this.callbackData=null}};"PUSH"===t||"REPLACE"===t?s.appMethod.globalData.tabBarPagePathArr.indexOf(i)>-1?s.appMethod.globalData.currentPages=[c]:("REPLACE"===t&&s.appMethod.globalData.currentPages.pop(),"REPLACE"!==t&&s.appMethod.getAppCurrentPage()&&s.appMethod.getAppCurrentPage().state&&(s.appMethod.getCurrentPage().data=JSON.parse(JSON.stringify(s.appMethod.getAppCurrentPage().state))),s.appMethod.globalData.currentPages.push(c)):"POP"===t&&(s.appMethod.globalData.currentPages.length>1?s.appMethod.globalData.currentPages.pop():s.appMethod.globalData.currentPages=[c])});t.history=c,t.location=l,t.unlisten=d},function(e,t,a){var n=a(173);e.exports=function(e,t,a){if(n(e),void 0===t)return e;switch(a){case 1:return function(a){return e.call(t,a)};case 2:return function(a,n){return e.call(t,a,n)};case 3:return function(a,n,o){return e.call(t,a,n,o)}}return function(){return e.apply(t,arguments)}}},function(e,t,a){var n=a(53);e.exports=function(e,t){if(!n(e))return e;var a,o;if(t&&"function"==typeof(a=e.toString)&&!n(o=a.call(e)))return o;if("function"==typeof(a=e.valueOf)&&!n(o=a.call(e)))return o;if(!t&&"function"==typeof(a=e.toString)&&!n(o=a.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},function(e,t){var a={}.toString;e.exports=function(e){return a.call(e).slice(8,-1)}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t){var a=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:a)(e)}},function(e,t,a){var n=a(81)("keys"),o=a(61);e.exports=function(e){return n[e]||(n[e]=o(e))}},function(e,t,a){var n=a(20),o=a(42),i=o["__core-js_shared__"]||(o["__core-js_shared__"]={});(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:n.version,mode:a(60)?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(179),i=n(o),s=a(64),r=n(s),c=a(207),l=n(c),d=a(208),u=n(d);r.default.alert=i.default,r.default.prompt=u.default,r.default.operation=l.default,t.default=r.default,e.exports=t.default},function(e,t,a){"use strict";function n(e,t){for(var a=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector,n=e;n;){if(a.call(n,t))return n;n=n.parentElement}return null}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n,e.exports=t.default},function(e,t,a){var n=a(47),o=a(184),i=a(82),s=a(80)("IE_PROTO"),r=function(){},c=function(){var e,t=a(119)("iframe"),n=i.length;for(t.style.display="none",a(185).appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write("<script>document.F=Object<\/script>"),e.close(),c=e.F;n--;)delete c.prototype[i[n]];return c()};e.exports=Object.create||function(e,t){var a;return null!==e?(r.prototype=n(e),a=new r,r.prototype=null,a[s]=e):a=c(),void 0===t?a:o(a,t)}},function(e,t,a){var n=a(43).f,o=a(49),i=a(29)("toStringTag");e.exports=function(e,t,a){e&&!o(e=a?e:e.prototype,i)&&n(e,i,{configurable:!0,value:t})}},function(e,t,a){a(186);for(var n=a(42),o=a(52),i=a(55),s=a(29)("toStringTag"),r="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),c=0;c<r.length;c++){var l=r[c],d=n[l],u=d&&d.prototype;u&&!u[s]&&o(u,s,l),i[l]=i.Array}},function(e,t,a){t.f=a(29)},function(e,t,a){var n=a(42),o=a(20),i=a(60),s=a(89),r=a(43).f;e.exports=function(e){var t=o.Symbol||(o.Symbol=i?{}:n.Symbol||{});"_"==e.charAt(0)||e in t||r(t,e,{value:s.f(e)})}},function(e,t,a){var n=a(62),o=a(57),i=a(50),s=a(76),r=a(49),c=a(118),l=Object.getOwnPropertyDescriptor;t.f=a(48)?l:function(e,t){if(e=i(e),t=s(t,!0),c)try{return l(e,t)}catch(e){}if(r(e,t))return o(!n.f.call(e,t),e[t])}},function(e,t,a){"use strict";a(19),a(213)},function(e,t,a){"use strict";(function(t){function n(e,t){!o.isUndefined(e)&&o.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var o=a(25),i=a(220),s={"Content-Type":"application/x-www-form-urlencoded"},r={adapter:function(){var e;return"undefined"!=typeof XMLHttpRequest?e=a(134):void 0!==t&&(e=a(134)),e}(),transformRequest:[function(e,t){return i(t,"Content-Type"),o.isFormData(e)||o.isArrayBuffer(e)||o.isBuffer(e)||o.isStream(e)||o.isFile(e)||o.isBlob(e)?e:o.isArrayBufferView(e)?e.buffer:o.isURLSearchParams(e)?(n(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):o.isObject(e)?(n(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}};r.headers={common:{Accept:"application/json, text/plain, */*"}},o.forEach(["delete","get","head"],function(e){r.headers[e]={}}),o.forEach(["post","put","patch"],function(e){r.headers[e]=o.merge(s)}),e.exports=r}).call(t,a(133))},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return"string"==typeof e}function i(e){return o(e.type)&&D(e.props.children)?b.default.cloneElement(e,{},e.props.children.split("").join(" ")):o(e)?(D(e)&&(e=e.split("").join(" ")),b.default.createElement("span",null,e)):e}Object.defineProperty(t,"__esModule",{value:!0});var s=a(8),r=n(s),c=a(9),l=n(c),d=a(0),u=n(d),m=a(3),p=n(m),f=a(1),g=n(f),h=a(2),v=n(h),_=a(10),y=n(_),E=a(4),b=n(E),N=a(56),R=n(N),k=a(44),w=n(k),x=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&(a[n[o]]=e[n[o]]);return a},C=/^[\u4e00-\u9fa5]{2}$/,D=C.test.bind(C),S=function(e){function t(){return(0,u.default)(this,t),(0,g.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,v.default)(t,e),(0,p.default)(t,[{key:"render",value:function(){var e,t=this.props,a=t.children,n=t.className,o=t.prefixCls,s=t.type,c=t.size,d=t.inline,u=t.disabled,m=t.icon,p=t.loading,f=t.activeStyle,g=t.activeClassName,h=t.onClick,v=x(t,["children","className","prefixCls","type","size","inline","disabled","icon","loading","activeStyle","activeClassName","onClick"]),_=p?"loading":m,E=(0,y.default)(o,n,(e={},(0,l.default)(e,o+"-primary","primary"===s),(0,l.default)(e,o+"-ghost","ghost"===s),(0,l.default)(e,o+"-warning","warning"===s),(0,l.default)(e,o+"-small","small"===c),(0,l.default)(e,o+"-inline",d),(0,l.default)(e,o+"-disabled",u),(0,l.default)(e,o+"-loading",p),(0,l.default)(e,o+"-icon",!!_),e)),N=b.default.Children.map(a,i),k=void 0;if("string"==typeof _)k=b.default.createElement(w.default,{"aria-hidden":"true",type:_,size:"small"===c?"xxs":"md",className:o+"-icon"});else if(_){var C=_.props&&_.props.className,D=(0,y.default)("am-icon",o+"-icon","small"===c?"am-icon-xxs":"am-icon-md");k=b.default.cloneElement(_,{className:C?C+" "+D:D})}return b.default.createElement(R.default,{activeClassName:g||(f?o+"-active":void 0),disabled:u,activeStyle:f},b.default.createElement("a",(0,r.default)({role:"button",className:E},v,{onClick:u?void 0:h,"aria-disabled":u}),k,N))}}]),t}(b.default.Component);S.defaultProps={prefixCls:"am-button",size:"large",inline:!1,disabled:!1,loading:!1,activeStyle:{}},t.default=S,e.exports=t.default},function(e,t,a){"use strict";function n(e,t,a,n){var o={};if(t&&t.antLocale&&t.antLocale[a])o=t.antLocale[a];else{var i=n();o=i.default||i}var r=(0,s.default)({},o);return e.locale&&(r=(0,s.default)({},r,e.locale),e.locale.lang&&(r.lang=(0,s.default)({},o.lang,e.locale.lang))),r}function o(e){var t=e.antLocale&&e.antLocale.locale;return e.antLocale&&e.antLocale.exist&&!t?"zh-cn":t}Object.defineProperty(t,"__esModule",{value:!0});var i=a(8),s=function(e){return e&&e.__esModule?e:{default:e}}(i);t.getComponentLocale=n,t.getLocaleCode=o},function(e,t,a){"use strict";a(19),a(45),a(257)},function(e,t,a){function n(e,t){return o(e)?e:i(e,t)?[e]:s(r(e))}var o=a(68),i=a(276),s=a(280),r=a(309);e.exports=n},function(e,t,a){function n(e){return"symbol"==typeof e||i(e)&&o(e)==s}var o=a(99),i=a(103),s="[object Symbol]";e.exports=n},function(e,t,a){function n(e){return null==e?void 0===e?c:r:l&&l in Object(e)?i(e):s(e)}var o=a(100),i=a(278),s=a(279),r="[object Null]",c="[object Undefined]",l=o?o.toStringTag:void 0;e.exports=n},function(e,t,a){var n=a(101),o=n.Symbol;e.exports=o},function(e,t,a){var n=a(277),o="object"==typeof self&&self&&self.Object===Object&&self,i=n||o||Function("return this")();e.exports=i},function(e,t){var a;a=function(){return this}();try{a=a||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(a=window)}e.exports=a},function(e,t){function a(e){return null!=e&&"object"==typeof e}e.exports=a},function(e,t,a){function n(e,t){var a=i(e,t);return o(a)?a:void 0}var o=a(287),i=a(292);e.exports=n},function(e,t){function a(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}e.exports=a},function(e,t,a){function n(e){if("string"==typeof e||o(e))return e;var t=e+"";return"0"==t&&1/e==-i?"-0":t}var o=a(98),i=1/0;e.exports=n},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(8),i=n(o),s=a(0),r=n(s),c=a(3),l=n(c),d=a(1),u=n(d),m=a(2),p=n(m),f=a(14),g=n(f),h=a(4),v=n(h),_=a(324),y=n(_),E=a(326),b=n(E),N=a(95),R=a(327),k=function(e){function t(){(0,r.default)(this,t);var e=(0,u.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.setScrollValue=function(t){e.scrollValue=t},e.onOk=function(t){void 0!==e.scrollValue&&(t=e.scrollValue),e.props.onChange&&e.props.onChange(t),e.props.onOk&&e.props.onOk(t)},e.onVisibleChange=function(t){e.scrollValue=void 0,e.props.onVisibleChange&&e.props.onVisibleChange(t)},e.fixOnOk=function(t){t&&(t.onOk=e.onOk)},e}return(0,p.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this.props,t=this.context,n=e.children,o=e.value,s=e.popupPrefixCls,r=(0,N.getComponentLocale)(e,t,"DatePicker",function(){return a(328)}),c=r.okText,l=r.dismissText,d=r.extra,u=r.DatePickerLocale,m=v.default.createElement(y.default,{minuteStep:e.minuteStep,locale:u,minDate:e.minDate,maxDate:e.maxDate,mode:e.mode,pickerPrefixCls:e.pickerPrefixCls,prefixCls:e.prefixCls,defaultDate:o||new Date,use12Hours:e.use12Hours,onValueChange:e.onValueChange,onScrollChange:this.setScrollValue});return v.default.createElement(b.default,(0,i.default)({datePicker:m,WrapComponent:"div",transitionName:"am-slide-up",maskTransitionName:"am-fade"},e,{prefixCls:s,date:o||new Date,dismissText:this.props.dismissText||l,okText:this.props.okText||c,ref:this.fixOnOk,onVisibleChange:this.onVisibleChange}),n&&v.default.isValidElement(n)&&v.default.cloneElement(n,{extra:o?(0,R.formatFn)(this,o):this.props.extra||d}))}}]),t}(v.default.Component);t.default=k,k.defaultProps={mode:"datetime",prefixCls:"am-picker",pickerPrefixCls:"am-picker-col",popupPrefixCls:"am-picker-popup",minuteStep:1,use12Hours:!1},k.contextTypes={antLocale:g.default.object},e.exports=t.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(155),i=n(o),s=a(336),r=n(s);i.default.RadioItem=r.default,t.default=i.default,e.exports=t.default},function(e,t,a){"use strict";a(16)},function(e,t,a){"use strict";a(19),a(35),a(337)},function(e,t,a){"use strict";(function(e){function n(e,t){return null==e?void 0:e[t]}function o(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function i(e){var t=-1,a=e?e.length:0;for(this.clear();++t<a;){var n=e[t];this.set(n[0],n[1])}}function s(){this.__data__=ke?ke(null):{}}function r(e){return this.has(e)&&delete this.__data__[e]}function c(e){var t=this.__data__;if(ke){var a=t[e];return a===Q?void 0:a}return _e.call(t,e)?t[e]:void 0}function l(e){var t=this.__data__;return ke?void 0!==t[e]:_e.call(t,e)}function d(e,t){return this.__data__[e]=ke&&void 0===t?Q:t,this}function u(e){var t=-1,a=e?e.length:0;for(this.clear();++t<a;){var n=e[t];this.set(n[0],n[1])}}function m(){this.__data__=[]}function p(e){var t=this.__data__,a=R(t,e);return!(a<0)&&(a==t.length-1?t.pop():Ne.call(t,a,1),!0)}function f(e){var t=this.__data__,a=R(t,e);return a<0?void 0:t[a][1]}function g(e){return R(this.__data__,e)>-1}function h(e,t){var a=this.__data__,n=R(a,e);return n<0?a.push([e,t]):a[n][1]=t,this}function v(e){var t=-1,a=e?e.length:0;for(this.clear();++t<a;){var n=e[t];this.set(n[0],n[1])}}function _(){this.__data__={hash:new i,map:new(Re||u),string:new i}}function y(e){return D(this,e).delete(e)}function E(e){return D(this,e).get(e)}function b(e){return D(this,e).has(e)}function N(e,t){return D(this,e).set(e,t),this}function R(e,t){for(var a=e.length;a--;)if(F(e[a][0],t))return a;return-1}function k(e,t){t=I(t,e)?[t]:C(t);for(var a=0,n=t.length;null!=e&&a<n;)e=e[P(t[a++])];return a&&a==n?e:void 0}function w(e){return!(!B(e)||T(e))&&(O(e)||o(e)?Ee:se).test(L(e))}function x(e){if("string"==typeof e)return e;if(G(e))return xe?xe.call(e):"";var t=e+"";return"0"==t&&1/e==-K?"-0":t}function C(e){return De(e)?e:Ce(e)}function D(e,t){var a=e.__data__;return M(t)?a["string"==typeof t?"string":"hash"]:a.map}function S(e,t){var a=n(e,t);return w(a)?a:void 0}function I(e,t){if(De(e))return!1;var a=void 0===e?"undefined":(0,J.default)(e);return!("number"!=a&&"symbol"!=a&&"boolean"!=a&&null!=e&&!G(e))||(te.test(e)||!ee.test(e)||null!=t&&e in Object(t))}function M(e){var t=void 0===e?"undefined":(0,J.default)(e);return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function T(e){return!!he&&he in e}function P(e){if("string"==typeof e||G(e))return e;var t=e+"";return"0"==t&&1/e==-K?"-0":t}function L(e){if(null!=e){try{return ve.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function A(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError(Y);var a=function a(){var n=arguments,o=t?t.apply(this,n):n[0],i=a.cache;if(i.has(o))return i.get(o);var s=e.apply(this,n);return a.cache=i.set(o,s),s};return a.cache=new(A.Cache||v),a}function F(e,t){return e===t||e!==e&&t!==t}function O(e){var t=B(e)?ye.call(e):"";return t==X||t==$}function B(e){var t=void 0===e?"undefined":(0,J.default)(e);return!!e&&("object"==t||"function"==t)}function j(e){return!!e&&"object"===(void 0===e?"undefined":(0,J.default)(e))}function G(e){return"symbol"===(void 0===e?"undefined":(0,J.default)(e))||j(e)&&ye.call(e)==Z}function q(e){return null==e?"":x(e)}function U(e,t){var a=void 0===e?"undefined":(0,J.default)(e);return!!(t=null==t?de:t)&&("number"==a||"symbol"!=a&&ue.test(e))&&e>-1&&e%1==0&&e<t}function z(e,t,a){"__proto__"==t?Object.defineProperty(e,t,{configurable:!0,enumerable:!0,value:a,writable:!0}):e[t]=a}function V(e,t,a){var n=e[t];_e.call(e,t)&&F(n,a)&&(void 0!==a||t in e)||z(e,t,a)}function W(e,t,a,n){if(!B(e))return e;t=C(t,e);for(var o=t.length,i=o-1,s=-1,r=e;null!=r&&++s<o;){var c=P(t[s]),l=a;if(s!=i){var d=r[c];l=n?n(d,c,r):void 0,void 0===l&&(l=B(d)?d:U(t[s+1])?[]:{})}V(r,c,l),r=r[c]}return e}Object.defineProperty(t,"__esModule",{value:!0});var H=a(13),J=function(e){return e&&e.__esModule?e:{default:e}}(H);t.baseGet=k,t.baseSet=W;var Y="Expected a function",Q="__lodash_hash_undefined__",K=1/0,X="[object Function]",$="[object GeneratorFunction]",Z="[object Symbol]",ee=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,te=/^\w*$/,ae=/^\./,ne=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,oe=/[\\^$.*+?()[\]{}|]/g,ie=/\\(\\)?/g,se=/^\[object .+?Constructor\]$/,re="object"===(void 0===e?"undefined":(0,J.default)(e))&&e&&e.Object===Object&&e,ce="object"===("undefined"==typeof self?"undefined":(0,J.default)(self))&&self&&self.Object===Object&&self,le=re||ce||Function("return this")(),de=9007199254740991,ue=/^(?:0|[1-9]\d*)$/,me=Array.prototype,pe=Function.prototype,fe=Object.prototype,ge=le["__core-js_shared__"],he=function(){var e=/[^.]+$/.exec(ge&&ge.keys&&ge.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),ve=pe.toString,_e=fe.hasOwnProperty,ye=fe.toString,Ee=RegExp("^"+ve.call(_e).replace(oe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),be=le.Symbol,Ne=me.splice,Re=S(le,"Map"),ke=S(Object,"create"),we=be?be.prototype:void 0,xe=we?we.toString:void 0;i.prototype.clear=s,i.prototype.delete=r,i.prototype.get=c,i.prototype.has=l,i.prototype.set=d,u.prototype.clear=m,u.prototype.delete=p,u.prototype.get=f,u.prototype.has=g,u.prototype.set=h,v.prototype.clear=_,v.prototype.delete=y,v.prototype.get=E,v.prototype.has=b,v.prototype.set=N;var Ce=A(function(e){e=q(e);var t=[];return ae.test(e)&&t.push(""),e.replace(ne,function(e,a,n,o){t.push(n?o.replace(ie,"$1"):a||e)}),t});A.Cache=v;var De=Array.isArray,_e=Object.prototype.hasOwnProperty}).call(t,a(102))},function(e,t,a){"use strict";function n(){(0,i.ajax)({url:"/index.php?r=AppConfig/GetSmartyVar",type:"get",success:function(e){var t=e.data.is_custom_domain,a="//www.zhichiwangluo.com";"1"==t&&(a="//gzh.zhichiwangluo.com"),(0,i.ajax)({url:a+"/index.php?r=Share/appJsConfig",type:"get",success:function(e){wx.config({debug:!1,appId:e.appId,timestamp:e.timestamp,nonceStr:e.nonceStr,signature:e.signature,jsApiList:["updateAppMessageShareData","updateTimelineShareData","onMenuShareWeibo","onMenuShareQZone","startRecord","stopRecord","onVoiceRecordEnd","playVoice","pauseVoice","stopVoice","onVoicePlayEnd","uploadVoice","downloadVoice","chooseImage","previewImage","uploadImage","downloadImage","translateVoice","openLocation","getLocation","scanQRCode","chooseWXPay","addCard","chooseCard","openCard","openProductSpecificView","hideOptionMenu","showOptionMenu","hideMenuItems","showMenuItems","closeWindow","openAddress"],fail:function(e){console.log(e)}})}})}})}function o(e){wx.ready(function(){wx.updateAppMessageShareData({title:e.title,desc:e.desc,link:e.link,imgUrl:e.imgUrl,success:function(t){"function"==typeof e.success&&e.success(t)},fail:function(t){"function"==typeof e.fail&&e.fail(t)}}),wx.updateTimelineShareData({title:e.title,link:e.link,imgUrl:e.imgUrl,success:function(t){"function"==typeof e.success&&e.success(t)},fail:function(t){"function"==typeof e.fail&&e.fail(t)}})})}Object.defineProperty(t,"__esModule",{value:!0}),t.configWxSDK=n,t.configWxShare=o;var i=a(34)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Map=void 0;var o=a(0),i=n(o),s=a(3),r=n(s),c=a(1),l=n(c),d=a(2),u=n(d),m=a(4),p=n(m);a(5);a(394);t.Map=function(e){function t(e){(0,i.default)(this,t);var a=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.getCenterLocation=function(e){var t=a.mapInstance.getCenter();t?"function"==typeof e.success&&e.success({longitude:t.lng,latitude:t.lat}):"function"==typeof e.fail&&e.fail(),"function"==typeof e.complete&&e.complete()},a.mapInstance=null,a.markersArr=[],a.circleInstance=null,a.controlsArr=[],a.latitude=a.props.latitude,a.longitude=a.props.longitude,a}return(0,u.default)(t,e),(0,r.default)(t,[{key:"componentDidMount",value:function(){var e=this;if(!this.latitude||!this.longitude)return void console.error("map组件，经纬度是必填参数");this.mapInstance=new qq.maps.Map(document.getElementById("map-inner"),{zoom:+this.props.scale||16,zoomControl:!1,panControl:!1,mapTypeControl:!1}),this.mapInstance.panTo(new qq.maps.LatLng(this.latitude,this.longitude)),this.props.markers&&this.setMarkers(this.props.markers),this.props.circles&&this.setCircle(this.props.circles),this.props.controls&&this.setcontrols(this.props.controls),qq.maps.event.addListener(this.mapInstance,"dragend",function(t){e.props.bindregionchange&&e.props.bindregionchange({type:"end",causedBy:"drag"})}),qq.maps.event.addListener(this.mapInstance,"dragstart",function(t){e.props.bindregionchange&&e.props.bindregionchange({type:"begin",causedBy:"drag"})}),qq.maps.event.addListener(this.mapInstance,"zoom_changed",function(t){e.props.bindregionchange&&e.props.bindregionchange({type:"end",causedBy:"scale"})})}},{key:"componentDidUpdate",value:function(e){this.props.markers&&this.setMarkers(this.props.markers),this.props.circles&&this.setCircle(this.props.circles),this.props.controls&&this.setcontrols(this.props.controls)}},{key:"setMarkers",value:function(e){var t=this;this.markersArr.map(function(e,t){e.setMap(null)}),this.markersArr=[],e.map(function(e,a){t.setMarker(e)})}},{key:"setMarker",value:function(e){var t=this;if(!e.latitude||!e.longitude)return void console.error("map组件markers属性如果有，markers属性里面的字段latitude，longitude是必填参数。可以参考微信小程序map组件");var a={map:this.mapInstance,position:new qq.maps.LatLng(e.latitude,e.longitude),title:e.title||""};if(e.iconPath){var n="",o=new qq.maps.Point(0,0);(e.width||e.height)&&(n=new qq.maps.Size(e.width||20,e.height||30)),a.icon=new qq.maps.MarkerImage(e.iconPath,n,o,null,n)}e.zIndex&&(a.zIndex=e.zIndex);var i=new qq.maps.Marker(a);this.markersArr.push(i),qq.maps.event.addListener(i,"click",function(){t.props.bindmarkertap&&t.props.bindmarkertap({markerId:e.id||""})})}},{key:"setCircle",value:function(e){if(!e.latitude||!e.longitude||!e.radius)return void console.error("map组件circle属性如果有，circle属性里面的字段latitude，longitude，radius是必填参数。可以参考微信小程序map组件");this.circleInstance&&this.circleInstance.setMap(null),this.circleInstance=new qq.maps.Circle({map:this.mapInstance,center:new qq.maps.LatLng(e.latitude,e.longitude),radius:e.radius,fillColor:e.fillColor||"",strokeWeight:e.strokeWidth||""})}},{key:"setcontrols",value:function(e){var t=this;this.controlsArr.map(function(e,t){e.remove()}),this.controlsArr=[],e.map(function(e,a){t.setcontrol(e)})}},{key:"setcontrol",value:function(e){var t=this;if(!e.iconPath)return void console.error("map组件controls属性如果有，iconPath是必填参数。可以参考微信小程序map组件");var a=document.createElement("div");a.style.cssText=(e.position&&e.position.width?"width: "+e.position.width+"px;":"")+(e.position&&e.position.height?"height: "+e.position.height+"px;":"")+"margin-left: "+(e.position&&e.position.left?e.position.left:0)+"px; margin-top:"+(e.position&&e.position.top?e.position.top:0)+"px;",a.innerHTML='<img style="width: 100%; height: 100%;" src="'+e.iconPath+'" />',a.index=3,this.mapInstance.controls[qq.maps.ControlPosition.LEFT_TOP].push(a),this.controlsArr.push(a),e.clickable&&qq.maps.event.addListener(a,"click",function(){t.props.bindcontroltap&&t.props.bindcontroltap({controlId:e.id||""})})}},{key:"render",value:function(){return p.default.createElement("div",{className:"jisu-component map map-wrapper "+this.props.className,style:this.props.style},p.default.createElement("div",{className:"map-inner",id:"map-inner",style:this.props.style}))}}]),t}(p.default.Component)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(0),i=n(o),s=a(3),r=n(s),c=a(1),l=n(c),d=a(2),u=n(d),m=a(10),p=n(m),f=a(156),g=n(f),h=a(4),v=n(h),_=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&(a[n[o]]=e[n[o]]);return a},y=function(e){function t(){return(0,i.default)(this,t),(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,u.default)(t,e),(0,r.default)(t,[{key:"render",value:function(){var e=this.props,t=e.className,a=e.style,n=_(e,["className","style"]),o=n.prefixCls,i=n.children,s=(0,p.default)(o+"-wrapper",t);"class"in n&&delete n.class;var r=v.default.createElement("label",{className:s,style:a},v.default.createElement(g.default,n),i);return this.props.wrapLabel?r:v.default.createElement(g.default,this.props)}}]),t}(v.default.Component);t.default=y,y.defaultProps={prefixCls:"am-checkbox",wrapLabel:!0},e.exports=t.default},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function m(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function N(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}function R(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function w(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function x(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function D(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function S(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}function I(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function M(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function T(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function P(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function L(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function A(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function F(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}Object.defineProperty(t,"__esModule",{value:!0});var O=a(18),B=a.n(O),j=a(4),G=a.n(j),q=a(14),U=a.n(q),z=a(46),V=a(37),W=a.n(V),H=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},J=function(e){function t(){var a,i,s;n(this,t);for(var r=arguments.length,c=Array(r),l=0;l<r;l++)c[l]=arguments[l];return a=i=o(this,e.call.apply(e,[this].concat(c))),i.state={match:i.computeMatch(i.props.history.location.pathname)},s=a,o(i,s)}return i(t,e),t.prototype.getChildContext=function(){return{router:H({},this.context.router,{history:this.props.history,route:{location:this.props.history.location,match:this.state.match}})}},t.prototype.computeMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}},t.prototype.componentWillMount=function(){var e=this,t=this.props,a=t.children,n=t.history;W()(null==a||1===G.a.Children.count(a),"A <Router> may have only one child element"),this.unlisten=n.listen(function(){e.setState({match:e.computeMatch(n.location.pathname)})})},t.prototype.componentWillReceiveProps=function(e){B()(this.props.history===e.history,"You cannot change <Router history>")},t.prototype.componentWillUnmount=function(){this.unlisten()},t.prototype.render=function(){var e=this.props.children;return e?G.a.Children.only(e):null},t}(G.a.Component);J.propTypes={history:U.a.object.isRequired,children:U.a.node},J.contextTypes={router:U.a.object},J.childContextTypes={router:U.a.object.isRequired};var Y=J,Q=Y,K=function(e){function t(){var a,n,o;s(this,t);for(var i=arguments.length,c=Array(i),l=0;l<i;l++)c[l]=arguments[l];return a=n=r(this,e.call.apply(e,[this].concat(c))),n.history=Object(z.createBrowserHistory)(n.props),o=a,r(n,o)}return c(t,e),t.prototype.componentWillMount=function(){B()(!this.props.history,"<BrowserRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { BrowserRouter as Router }`.")},t.prototype.render=function(){return G.a.createElement(Q,{history:this.history,children:this.props.children})},t}(G.a.Component);K.propTypes={basename:U.a.string,forceRefresh:U.a.bool,getUserConfirmation:U.a.func,keyLength:U.a.number,children:U.a.node};var X=K,$=function(e){function t(){var a,n,o;l(this,t);for(var i=arguments.length,s=Array(i),r=0;r<i;r++)s[r]=arguments[r];return a=n=d(this,e.call.apply(e,[this].concat(s))),n.history=Object(z.createHashHistory)(n.props),o=a,d(n,o)}return u(t,e),t.prototype.componentWillMount=function(){B()(!this.props.history,"<HashRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { HashRouter as Router }`.")},t.prototype.render=function(){return G.a.createElement(Q,{history:this.history,children:this.props.children})},t}(G.a.Component);$.propTypes={basename:U.a.string,getUserConfirmation:U.a.func,hashType:U.a.oneOf(["hashbang","noslash","slash"]),children:U.a.node};var Z=$,ee=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},te=function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)},ae=function(e){function t(){var a,n,o;p(this,t);for(var i=arguments.length,s=Array(i),r=0;r<i;r++)s[r]=arguments[r];return a=n=f(this,e.call.apply(e,[this].concat(s))),n.handleClick=function(e){if(n.props.onClick&&n.props.onClick(e),!e.defaultPrevented&&0===e.button&&!n.props.target&&!te(e)){e.preventDefault();var t=n.context.router.history,a=n.props,o=a.replace,i=a.to;o?t.replace(i):t.push(i)}},o=a,f(n,o)}return g(t,e),t.prototype.render=function(){var e=this.props,t=(e.replace,e.to),a=e.innerRef,n=m(e,["replace","to","innerRef"]);W()(this.context.router,"You should not use <Link> outside a <Router>"),W()(void 0!==t,'You must specify the "to" property');var o=this.context.router.history,i="string"==typeof t?Object(z.createLocation)(t,null,null,o.location):t,s=o.createHref(i);return G.a.createElement("a",ee({},n,{onClick:this.handleClick,href:s,ref:a}))},t}(G.a.Component);ae.propTypes={onClick:U.a.func,target:U.a.string,replace:U.a.bool,to:U.a.oneOfType([U.a.string,U.a.object]).isRequired,innerRef:U.a.oneOfType([U.a.string,U.a.func])},ae.defaultProps={replace:!1},ae.contextTypes={router:U.a.shape({history:U.a.shape({push:U.a.func.isRequired,replace:U.a.func.isRequired,createHref:U.a.func.isRequired}).isRequired}).isRequired};var ne=ae,oe=function(e){function t(){var a,n,o;h(this,t);for(var i=arguments.length,s=Array(i),r=0;r<i;r++)s[r]=arguments[r];return a=n=v(this,e.call.apply(e,[this].concat(s))),n.history=Object(z.createMemoryHistory)(n.props),o=a,v(n,o)}return _(t,e),t.prototype.componentWillMount=function(){B()(!this.props.history,"<MemoryRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { MemoryRouter as Router }`.")},t.prototype.render=function(){return G.a.createElement(Y,{history:this.history,children:this.props.children})},t}(G.a.Component);oe.propTypes={initialEntries:U.a.array,initialIndex:U.a.number,getUserConfirmation:U.a.func,keyLength:U.a.number,children:U.a.node};var ie=oe,se=ie,re=a(116),ce=a.n(re),le={},de=0,ue=function(e,t){var a=""+t.end+t.strict+t.sensitive,n=le[a]||(le[a]={});if(n[e])return n[e];var o=[],i=ce()(e,o,t),s={re:i,keys:o};return de<1e4&&(n[e]=s,de++),s},me=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments[2];"string"==typeof t&&(t={path:t});var n=t,o=n.path,i=n.exact,s=void 0!==i&&i,r=n.strict,c=void 0!==r&&r,l=n.sensitive,d=void 0!==l&&l;if(null==o)return a;var u=ue(o,{end:s,strict:c,sensitive:d}),m=u.re,p=u.keys,f=m.exec(e);if(!f)return null;var g=f[0],h=f.slice(1),v=e===g;return s&&!v?null:{path:o,url:"/"===o&&""===g?"/":g,isExact:v,params:p.reduce(function(e,t,a){return e[t.name]=h[a],e},{})}},pe=me,fe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},ge=function(e){return 0===G.a.Children.count(e)},he=function(e){function t(){var a,n,o;y(this,t);for(var i=arguments.length,s=Array(i),r=0;r<i;r++)s[r]=arguments[r];return a=n=E(this,e.call.apply(e,[this].concat(s))),n.state={match:n.computeMatch(n.props,n.context.router)},o=a,E(n,o)}return b(t,e),t.prototype.getChildContext=function(){return{router:fe({},this.context.router,{route:{location:this.props.location||this.context.router.route.location,match:this.state.match}})}},t.prototype.computeMatch=function(e,t){var a=e.computedMatch,n=e.location,o=e.path,i=e.strict,s=e.exact,r=e.sensitive;if(a)return a;W()(t,"You should not use <Route> or withRouter() outside a <Router>");var c=t.route,l=(n||c.location).pathname;return pe(l,{path:o,strict:i,exact:s,sensitive:r},c.match)},t.prototype.componentWillMount=function(){B()(!(this.props.component&&this.props.render),"You should not use <Route component> and <Route render> in the same route; <Route render> will be ignored"),B()(!(this.props.component&&this.props.children&&!ge(this.props.children)),"You should not use <Route component> and <Route children> in the same route; <Route children> will be ignored"),B()(!(this.props.render&&this.props.children&&!ge(this.props.children)),"You should not use <Route render> and <Route children> in the same route; <Route children> will be ignored")},t.prototype.componentWillReceiveProps=function(e,t){B()(!(e.location&&!this.props.location),'<Route> elements should not change from uncontrolled to controlled (or vice versa). You initially used no "location" prop and then provided one on a subsequent render.'),B()(!(!e.location&&this.props.location),'<Route> elements should not change from controlled to uncontrolled (or vice versa). You provided a "location" prop initially but omitted it on a subsequent render.'),this.setState({match:this.computeMatch(e,t.router)})},t.prototype.render=function(){var e=this.state.match,t=this.props,a=t.children,n=t.component,o=t.render,i=this.context.router,s=i.history,r=i.route,c=i.staticContext,l=this.props.location||r.location,d={match:e,location:l,history:s,staticContext:c};return n?e?G.a.createElement(n,d):null:o?e?o(d):null:"function"==typeof a?a(d):a&&!ge(a)?G.a.Children.only(a):null},t}(G.a.Component);he.propTypes={computedMatch:U.a.object,path:U.a.string,exact:U.a.bool,strict:U.a.bool,sensitive:U.a.bool,component:U.a.func,render:U.a.func,children:U.a.oneOfType([U.a.func,U.a.node]),location:U.a.object},he.contextTypes={router:U.a.shape({history:U.a.object.isRequired,route:U.a.object.isRequired,staticContext:U.a.object})},he.childContextTypes={router:U.a.object.isRequired};var ve=he,_e=ve,ye=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},be=function(e){var t=e.to,a=e.exact,n=e.strict,o=e.location,i=e.activeClassName,s=e.className,r=e.activeStyle,c=e.style,l=e.isActive,d=e["aria-current"],u=N(e,["to","exact","strict","location","activeClassName","className","activeStyle","style","isActive","aria-current"]),m="object"===(void 0===t?"undefined":Ee(t))?t.pathname:t,p=m&&m.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1");return G.a.createElement(_e,{path:p,exact:a,strict:n,location:o,children:function(e){var a=e.location,n=e.match,o=!!(l?l(n,a):n);return G.a.createElement(ne,ye({to:t,className:o?[s,i].filter(function(e){return e}).join(" "):s,style:o?ye({},c,r):c,"aria-current":o&&d||null},u))}})};be.propTypes={to:ne.propTypes.to,exact:U.a.bool,strict:U.a.bool,location:U.a.object,activeClassName:U.a.string,className:U.a.string,activeStyle:U.a.object,style:U.a.object,isActive:U.a.func,"aria-current":U.a.oneOf(["page","step","location","date","time","true"])},be.defaultProps={activeClassName:"active","aria-current":"page"};var Ne=be,Re=function(e){function t(){return R(this,t),k(this,e.apply(this,arguments))}return w(t,e),t.prototype.enable=function(e){this.unblock&&this.unblock(),this.unblock=this.context.router.history.block(e)},t.prototype.disable=function(){this.unblock&&(this.unblock(),this.unblock=null)},t.prototype.componentWillMount=function(){W()(this.context.router,"You should not use <Prompt> outside a <Router>"),this.props.when&&this.enable(this.props.message)},t.prototype.componentWillReceiveProps=function(e){e.when?this.props.when&&this.props.message===e.message||this.enable(e.message):this.disable()},t.prototype.componentWillUnmount=function(){this.disable()},t.prototype.render=function(){return null},t}(G.a.Component);Re.propTypes={when:U.a.bool,message:U.a.oneOfType([U.a.func,U.a.string]).isRequired},Re.defaultProps={when:!0},Re.contextTypes={router:U.a.shape({history:U.a.shape({block:U.a.func.isRequired}).isRequired}).isRequired};var ke=Re,we=ke,xe={},Ce=0,De=function(e){var t=e,a=xe[t]||(xe[t]={});if(a[e])return a[e];var n=ce.a.compile(e);return Ce<1e4&&(a[e]=n,Ce++),n},Se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"/"===e?e:De(e)(t,{pretty:!0})},Ie=Se,Me=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Te=function(e){function t(){return x(this,t),C(this,e.apply(this,arguments))}return D(t,e),t.prototype.isStatic=function(){return this.context.router&&this.context.router.staticContext},t.prototype.componentWillMount=function(){W()(this.context.router,"You should not use <Redirect> outside a <Router>"),this.isStatic()&&this.perform()},t.prototype.componentDidMount=function(){this.isStatic()||this.perform()},t.prototype.componentDidUpdate=function(e){var t=Object(z.createLocation)(e.to),a=Object(z.createLocation)(this.props.to);if(Object(z.locationsAreEqual)(t,a))return void B()(!1,"You tried to redirect to the same route you're currently on: \""+a.pathname+a.search+'"');this.perform()},t.prototype.computeTo=function(e){var t=e.computedMatch,a=e.to;return t?"string"==typeof a?Ie(a,t.params):Me({},a,{pathname:Ie(a.pathname,t.params)}):a},t.prototype.perform=function(){var e=this.context.router.history,t=this.props.push,a=this.computeTo(this.props);t?e.push(a):e.replace(a)},t.prototype.render=function(){return null},t}(G.a.Component);Te.propTypes={computedMatch:U.a.object,push:U.a.bool,from:U.a.string,to:U.a.oneOfType([U.a.string,U.a.object]).isRequired},Te.defaultProps={push:!1},Te.contextTypes={router:U.a.shape({history:U.a.shape({push:U.a.func.isRequired,replace:U.a.func.isRequired}).isRequired,staticContext:U.a.object}).isRequired};var Pe=Te,Le=Pe,Ae=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Fe=function(e){return"/"===e.charAt(0)?e:"/"+e},Oe=function(e,t){return e?Ae({},t,{pathname:Fe(e)+t.pathname}):t},Be=function(e,t){if(!e)return t;var a=Fe(e);return 0!==t.pathname.indexOf(a)?t:Ae({},t,{pathname:t.pathname.substr(a.length)})},je=function(e){return"string"==typeof e?e:Object(z.createPath)(e)},Ge=function(e){return function(){W()(!1,"You cannot %s with <StaticRouter>",e)}},qe=function(){},Ue=function(e){function t(){var a,n,o;I(this,t);for(var i=arguments.length,s=Array(i),r=0;r<i;r++)s[r]=arguments[r];return a=n=M(this,e.call.apply(e,[this].concat(s))),n.createHref=function(e){return Fe(n.props.basename+je(e))},n.handlePush=function(e){var t=n.props,a=t.basename,o=t.context;o.action="PUSH",o.location=Oe(a,Object(z.createLocation)(e)),o.url=je(o.location)},n.handleReplace=function(e){var t=n.props,a=t.basename,o=t.context;o.action="REPLACE",o.location=Oe(a,Object(z.createLocation)(e)),o.url=je(o.location)},n.handleListen=function(){return qe},n.handleBlock=function(){return qe},o=a,M(n,o)}return T(t,e),t.prototype.getChildContext=function(){return{router:{staticContext:this.props.context}}},t.prototype.componentWillMount=function(){B()(!this.props.history,"<StaticRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { StaticRouter as Router }`.")},t.prototype.render=function(){var e=this.props,t=e.basename,a=(e.context,e.location),n=S(e,["basename","context","location"]),o={createHref:this.createHref,action:"POP",location:Be(t,Object(z.createLocation)(a)),push:this.handlePush,replace:this.handleReplace,go:Ge("go"),goBack:Ge("goBack"),goForward:Ge("goForward"),listen:this.handleListen,block:this.handleBlock};return G.a.createElement(Y,Ae({},n,{history:o}))},t}(G.a.Component);Ue.propTypes={basename:U.a.string,context:U.a.object.isRequired,location:U.a.oneOfType([U.a.string,U.a.object])},Ue.defaultProps={basename:"",location:"/"},Ue.childContextTypes={router:U.a.object.isRequired};var ze=Ue,Ve=ze,We=function(e){function t(){return P(this,t),L(this,e.apply(this,arguments))}return A(t,e),t.prototype.componentWillMount=function(){W()(this.context.router,"You should not use <Switch> outside a <Router>")},t.prototype.componentWillReceiveProps=function(e){B()(!(e.location&&!this.props.location),'<Switch> elements should not change from uncontrolled to controlled (or vice versa). You initially used no "location" prop and then provided one on a subsequent render.'),B()(!(!e.location&&this.props.location),'<Switch> elements should not change from controlled to uncontrolled (or vice versa). You provided a "location" prop initially but omitted it on a subsequent render.')},t.prototype.render=function(){var e=this.context.router.route,t=this.props.children,a=this.props.location||e.location,n=void 0,o=void 0;return G.a.Children.forEach(t,function(t){if(null==n&&G.a.isValidElement(t)){var i=t.props,s=i.path,r=i.exact,c=i.strict,l=i.sensitive,d=i.from,u=s||d;o=t,n=pe(a.pathname,{path:u,exact:r,strict:c,sensitive:l},e.match)}}),n?G.a.cloneElement(o,{location:a,computedMatch:n}):null},t}(G.a.Component);We.contextTypes={router:U.a.shape({route:U.a.object.isRequired}).isRequired},We.propTypes={children:U.a.node,location:U.a.object};var He=We,Je=He,Ye=Ie,Qe=pe,Ke=a(117),Xe=a.n(Ke),$e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Ze=function(e){var t=function(t){var a=t.wrappedComponentRef,n=F(t,["wrappedComponentRef"]);return G.a.createElement(ve,{children:function(t){return G.a.createElement(e,$e({},n,t,{ref:a}))}})};return t.displayName="withRouter("+(e.displayName||e.name)+")",t.WrappedComponent=e,t.propTypes={wrappedComponentRef:U.a.func},Xe()(t,e)},et=Ze,tt=et;a.d(t,"BrowserRouter",function(){return X}),a.d(t,"HashRouter",function(){return Z}),a.d(t,"Link",function(){return ne}),a.d(t,"MemoryRouter",function(){return se}),a.d(t,"NavLink",function(){return Ne}),a.d(t,"Prompt",function(){return we}),a.d(t,"Redirect",function(){return Le}),a.d(t,"Route",function(){return _e}),a.d(t,"Router",function(){return Q}),a.d(t,"StaticRouter",function(){return Ve}),a.d(t,"Switch",function(){return Je}),a.d(t,"generatePath",function(){return Ye}),a.d(t,"matchPath",function(){return Qe}),a.d(t,"withRouter",function(){return tt})},function(e,t,a){function n(e,t){for(var a,n=[],o=0,i=0,s="",r=t&&t.delimiter||"/";null!=(a=_.exec(e));){var d=a[0],u=a[1],m=a.index;if(s+=e.slice(i,m),i=m+d.length,u)s+=u[1];else{var p=e[i],f=a[2],g=a[3],h=a[4],v=a[5],y=a[6],E=a[7];s&&(n.push(s),s="");var b=null!=f&&null!=p&&p!==f,N="+"===y||"*"===y,R="?"===y||"*"===y,k=a[2]||r,w=h||v;n.push({name:g||o++,prefix:f||"",delimiter:k,optional:R,repeat:N,partial:b,asterisk:!!E,pattern:w?l(w):E?".*":"[^"+c(k)+"]+?"})}}return i<e.length&&(s+=e.substr(i)),s&&n.push(s),n}function o(e,t){return r(n(e,t))}function i(e){return encodeURI(e).replace(/[\/?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function s(e){return encodeURI(e).replace(/[?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function r(e){for(var t=new Array(e.length),a=0;a<e.length;a++)"object"==typeof e[a]&&(t[a]=new RegExp("^(?:"+e[a].pattern+")$"));return function(a,n){for(var o="",r=a||{},c=n||{},l=c.pretty?i:encodeURIComponent,d=0;d<e.length;d++){var u=e[d];if("string"!=typeof u){var m,p=r[u.name];if(null==p){if(u.optional){u.partial&&(o+=u.prefix);continue}throw new TypeError('Expected "'+u.name+'" to be defined')}if(v(p)){if(!u.repeat)throw new TypeError('Expected "'+u.name+'" to not repeat, but received `'+JSON.stringify(p)+"`");if(0===p.length){if(u.optional)continue;throw new TypeError('Expected "'+u.name+'" to not be empty')}for(var f=0;f<p.length;f++){if(m=l(p[f]),!t[d].test(m))throw new TypeError('Expected all "'+u.name+'" to match "'+u.pattern+'", but received `'+JSON.stringify(m)+"`");o+=(0===f?u.prefix:u.delimiter)+m}}else{if(m=u.asterisk?s(p):l(p),!t[d].test(m))throw new TypeError('Expected "'+u.name+'" to match "'+u.pattern+'", but received "'+m+'"');o+=u.prefix+m}}else o+=u}return o}}function c(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function l(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function d(e,t){return e.keys=t,e}function u(e){return e.sensitive?"":"i"}function m(e,t){var a=e.source.match(/\((?!\?)/g);if(a)for(var n=0;n<a.length;n++)t.push({name:n,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return d(e,t)}function p(e,t,a){for(var n=[],o=0;o<e.length;o++)n.push(h(e[o],t,a).source);return d(new RegExp("(?:"+n.join("|")+")",u(a)),t)}function f(e,t,a){return g(n(e,a),t,a)}function g(e,t,a){v(t)||(a=t||a,t=[]),a=a||{};for(var n=a.strict,o=!1!==a.end,i="",s=0;s<e.length;s++){var r=e[s];if("string"==typeof r)i+=c(r);else{var l=c(r.prefix),m="(?:"+r.pattern+")";t.push(r),r.repeat&&(m+="(?:"+l+m+")*"),m=r.optional?r.partial?l+"("+m+")?":"(?:"+l+"("+m+"))?":l+"("+m+")",i+=m}}var p=c(a.delimiter||"/"),f=i.slice(-p.length)===p;return n||(i=(f?i.slice(0,-p.length):i)+"(?:"+p+"(?=$))?"),i+=o?"$":n&&f?"":"(?="+p+"|$)",d(new RegExp("^"+i,u(a)),t)}function h(e,t,a){return v(t)||(a=t||a,t=[]),a=a||{},e instanceof RegExp?m(e,t):v(e)?p(e,t,a):f(e,t,a)}var v=a(169);e.exports=h,e.exports.parse=n,e.exports.compile=o,e.exports.tokensToFunction=r,e.exports.tokensToRegExp=g;var _=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g")},function(e,t,a){"use strict";var n={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,arguments:!0,arity:!0},i="function"==typeof Object.getOwnPropertySymbols;e.exports=function(e,t,a){if("string"!=typeof t){var s=Object.getOwnPropertyNames(t);i&&(s=s.concat(Object.getOwnPropertySymbols(t)));for(var r=0;r<s.length;++r)if(!(n[s[r]]||o[s[r]]||a&&a[s[r]]))try{e[s[r]]=t[s[r]]}catch(e){}}return e}},function(e,t,a){e.exports=!a(48)&&!a(54)(function(){return 7!=Object.defineProperty(a(119)("div"),"a",{get:function(){return 7}}).a})},function(e,t,a){var n=a(53),o=a(42).document,i=n(o)&&n(o.createElement);e.exports=function(e){return i?o.createElement(e):{}}},function(e,t,a){var n=a(49),o=a(50),i=a(175)(!1),s=a(80)("IE_PROTO");e.exports=function(e,t){var a,r=o(e),c=0,l=[];for(a in r)a!=s&&n(r,a)&&l.push(a);for(;t.length>c;)n(r,a=t[c++])&&(~i(l,a)||l.push(a));return l}},function(e,t,a){var n=a(77);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},function(e,t,a){var n=a(79),o=Math.min;e.exports=function(e){return e>0?o(n(e),9007199254740991):0}},function(e,t,a){e.exports={default:a(177),__esModule:!0}},function(e,t,a){"use strict";var n=a(60),o=a(41),i=a(125),s=a(52),r=a(55),c=a(183),l=a(87),d=a(126),u=a(29)("iterator"),m=!([].keys&&"next"in[].keys()),p=function(){return this};e.exports=function(e,t,a,f,g,h,v){c(a,t,f);var _,y,E,b=function(e){if(!m&&e in w)return w[e];switch(e){case"keys":case"values":return function(){return new a(this,e)}}return function(){return new a(this,e)}},N=t+" Iterator",R="values"==g,k=!1,w=e.prototype,x=w[u]||w["@@iterator"]||g&&w[g],C=x||b(g),D=g?R?b("entries"):C:void 0,S="Array"==t?w.entries||x:x;if(S&&(E=d(S.call(new e)))!==Object.prototype&&E.next&&(l(E,N,!0),n||"function"==typeof E[u]||s(E,u,p)),R&&x&&"values"!==x.name&&(k=!0,C=function(){return x.call(this)}),n&&!v||!m&&!k&&w[u]||s(w,u,C),r[t]=C,r[N]=p,g)if(_={values:R?C:b("values"),keys:h?C:b("keys"),entries:D},v)for(y in _)y in w||i(w,y,_[y]);else o(o.P+o.F*(m||k),t,_);return _}},function(e,t,a){e.exports=a(52)},function(e,t,a){var n=a(49),o=a(63),i=a(80)("IE_PROTO"),s=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=o(e),n(e,i)?e[i]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?s:null}},function(e,t,a){var n=a(120),o=a(82).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,o)}},function(e,t,a){"use strict";function n(){}function o(){}Object.defineProperty(t,"__esModule",{value:!0});var i=a(8),s=a.n(i),r=a(0),c=a.n(r),l=a(3),d=a.n(l),u=a(1),m=a.n(u),p=a(2),f=a.n(p),g=a(4),h=a.n(g),v=a(24),_=a.n(v),y=a(129),E=function(e){function t(){return c()(this,t),m()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return f()(t,e),d()(t,[{key:"shouldComponentUpdate",value:function(e){return!!e.hiddenClassName||!!e.visible}},{key:"render",value:function(){var e=this.props.className;this.props.hiddenClassName&&!this.props.visible&&(e+=" "+this.props.hiddenClassName);var t=s()({},this.props);return delete t.hiddenClassName,delete t.visible,t.className=e,h.a.createElement("div",s()({},t))}}]),t}(h.a.Component),b=E,N=function(e){function t(){c()(this,t);var e=m()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.getDialogElement=function(){var t=e.props,a=t.closable,n=t.prefixCls,o=void 0;t.footer&&(o=h.a.createElement("div",{className:n+"-footer",ref:function(t){return e.footerRef=t}},t.footer));var i=void 0;t.title&&(i=h.a.createElement("div",{className:n+"-header",ref:function(t){return e.headerRef=t}},h.a.createElement("div",{className:n+"-title"},t.title)));var s=void 0;a&&(s=h.a.createElement("button",{onClick:e.close,"aria-label":"Close",className:n+"-close"},h.a.createElement("span",{className:n+"-close-x"})));var r=e.getTransitionName(),c=h.a.createElement(b,{key:"dialog-element",role:"document",ref:function(t){return e.dialogRef=t},style:t.style||{},className:n+" "+(t.className||""),visible:t.visible},h.a.createElement("div",{className:n+"-content"},s,i,h.a.createElement("div",{className:n+"-body",style:t.bodyStyle,ref:function(t){return e.bodyRef=t}},t.children),o));return h.a.createElement(y.a,{key:"dialog",showProp:"visible",onAppear:e.onAnimateAppear,onLeave:e.onAnimateLeave,transitionName:r,component:"",transitionAppear:!0},c)},e.onAnimateAppear=function(){document.body.style.overflow="hidden"},e.onAnimateLeave=function(){document.body.style.overflow="",e.wrapRef&&(e.wrapRef.style.display="none"),e.props.onAnimateLeave&&e.props.onAnimateLeave(),e.props.afterClose&&e.props.afterClose()},e.close=function(t){e.props.onClose&&e.props.onClose(t)},e.onMaskClick=function(t){t.target===t.currentTarget&&e.close(t)},e}return f()(t,e),d()(t,[{key:"componentWillUnmount",value:function(){document.body.style.overflow="",this.wrapRef&&(this.wrapRef.style.display="none")}},{key:"getZIndexStyle",value:function(){var e={},t=this.props;return void 0!==t.zIndex&&(e.zIndex=t.zIndex),e}},{key:"getWrapStyle",value:function(){var e=this.props.wrapStyle||{};return s()({},this.getZIndexStyle(),e)}},{key:"getMaskStyle",value:function(){var e=this.props.maskStyle||{};return s()({},this.getZIndexStyle(),e)}},{key:"getMaskTransitionName",value:function(){var e=this.props,t=e.maskTransitionName,a=e.maskAnimation;return!t&&a&&(t=e.prefixCls+"-"+a),t}},{key:"getTransitionName",value:function(){var e=this.props,t=e.transitionName,a=e.animation;return!t&&a&&(t=e.prefixCls+"-"+a),t}},{key:"getMaskElement",value:function(){var e=this.props,t=void 0;if(e.mask){var a=this.getMaskTransitionName();t=h.a.createElement(b,s()({style:this.getMaskStyle(),key:"mask-element",className:e.prefixCls+"-mask",hiddenClassName:e.prefixCls+"-mask-hidden",visible:e.visible},e.maskProps)),a&&(t=h.a.createElement(y.a,{key:"mask",showProp:"visible",transitionAppear:!0,component:"",transitionName:a},t))}return t}},{key:"render",value:function(){var e=this,t=this.props,a=t.prefixCls,n=t.maskClosable,o=this.getWrapStyle();return t.visible&&(o.display=null),h.a.createElement("div",null,this.getMaskElement(),h.a.createElement("div",s()({className:a+"-wrap "+(t.wrapClassName||""),ref:function(t){return e.wrapRef=t},onClick:n?this.onMaskClick:void 0,role:"dialog","aria-labelledby":t.title,style:o},t.wrapProps),this.getDialogElement()))}}]),t}(h.a.Component),R=N;N.defaultProps={afterClose:n,className:"",mask:!0,visible:!1,closable:!0,maskClosable:!0,prefixCls:"rmc-dialog",onClose:n};var k=!!_.a.createPortal,w=!("undefined"==typeof window||!window.document||!window.document.createElement),x=function(e){function t(){c()(this,t);var e=m()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.saveRef=function(t){k&&(e._component=t)},e.getComponent=function(t){var a=s()({},e.props);return["visible","onAnimateLeave"].forEach(function(e){a.hasOwnProperty(e)&&delete a[e]}),h.a.createElement(R,s()({},a,{visible:t,onAnimateLeave:e.removeContainer,ref:e.saveRef}))},e.removeContainer=function(){e.container&&(k||_.a.unmountComponentAtNode(e.container),e.container.parentNode.removeChild(e.container),e.container=null)},e.getContainer=function(){if(!e.container){var t=document.createElement("div"),a=e.props.prefixCls+"-container-"+(new Date).getTime();t.setAttribute("id",a),document.body.appendChild(t),e.container=t}return e.container},e}return f()(t,e),d()(t,[{key:"componentDidMount",value:function(){this.props.visible&&this.componentDidUpdate()}},{key:"shouldComponentUpdate",value:function(e){var t=e.visible;return!(!this.props.visible&&!t)}},{key:"componentWillUnmount",value:function(){this.props.visible?k?this.removeContainer():this.renderDialog(!1):this.removeContainer()}},{key:"componentDidUpdate",value:function(){k||this.renderDialog(this.props.visible)}},{key:"renderDialog",value:function(e){_.a.unstable_renderSubtreeIntoContainer(this,this.getComponent(e),this.getContainer())}},{key:"render",value:function(){if(!w)return null;var e=this.props.visible;return k&&(e||this._component)?_.a.createPortal(this.getComponent(e),this.getContainer()):null}}]),t}(h.a.Component);t.default=x;x.defaultProps={visible:!1,prefixCls:"rmc-dialog",onClose:o}},function(e,t,a){"use strict";function n(e){var t=[];return D.a.Children.forEach(e,function(e){t.push(e)}),t}function o(e,t){var a=null;return e&&e.forEach(function(e){a||e&&e.key===t&&(a=e)}),a}function i(e,t,a){var n=null;return e&&e.forEach(function(e){if(e&&e.key===t&&e.props[a]){if(n)throw new Error("two child with same key for <rc-animate> children");n=e}}),n}function s(e,t,a){var n=e.length===t.length;return n&&e.forEach(function(e,o){var i=t[o];e&&i&&(e&&!i||!e&&i?n=!1:e.key!==i.key?n=!1:a&&e.props[a]!==i.props[a]&&(n=!1))}),n}function r(e,t){var a=[],n={},i=[];return e.forEach(function(e){e&&o(t,e.key)?i.length&&(n[e.key]=i,i=[]):i.push(e)}),t.forEach(function(e){e&&Object.prototype.hasOwnProperty.call(n,e.key)&&(a=a.concat(n[e.key])),a.push(e)}),a=a.concat(i)}function c(e,t,a){e.addEventListener(t,a,!1)}function l(e,t,a){e.removeEventListener(t,a,!1)}function d(e,t){for(var a=window.getComputedStyle(e,null),n="",o=0;o<W.length&&!(n=a.getPropertyValue(W[o]+t));o++);return n}function u(e){if(z){var t=parseFloat(d(e,"transition-delay"))||0,a=parseFloat(d(e,"transition-duration"))||0,n=parseFloat(d(e,"animation-delay"))||0,o=parseFloat(d(e,"animation-duration"))||0,i=Math.max(a+t,o+n);e.rcEndAnimTimeout=setTimeout(function(){e.rcEndAnimTimeout=null,e.rcEndListener&&e.rcEndListener()},1e3*i+200)}}function m(e){e.rcEndAnimTimeout&&(clearTimeout(e.rcEndAnimTimeout),e.rcEndAnimTimeout=null)}function p(e){var t=e.children;return D.a.isValidElement(t)&&!t.key?D.a.cloneElement(t,{key:Z}):t}function f(){}var g=a(8),h=a.n(g),v=a(9),_=a.n(v),y=a(0),E=a.n(y),b=a(3),N=a.n(b),R=a(1),k=a.n(R),w=a(2),x=a.n(w),C=a(4),D=a.n(C),S=a(14),I=a.n(S),M=a(24),T=a.n(M),P=a(13),L=a.n(P),A={transitionstart:{transition:"transitionstart",WebkitTransition:"webkitTransitionStart",MozTransition:"mozTransitionStart",OTransition:"oTransitionStart",msTransition:"MSTransitionStart"},animationstart:{animation:"animationstart",WebkitAnimation:"webkitAnimationStart",MozAnimation:"mozAnimationStart",OAnimation:"oAnimationStart",msAnimation:"MSAnimationStart"}},F={transitionend:{transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"mozTransitionEnd",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd"},animationend:{animation:"animationend",WebkitAnimation:"webkitAnimationEnd",MozAnimation:"mozAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd"}},O=[],B=[];"undefined"!=typeof window&&"undefined"!=typeof document&&function(){function e(e,t){for(var n in e)if(e.hasOwnProperty(n)){var o=e[n];for(var i in o)if(i in a){t.push(o[i]);break}}}var t=document.createElement("div"),a=t.style;"AnimationEvent"in window||(delete A.animationstart.animation,delete F.animationend.animation),"TransitionEvent"in window||(delete A.transitionstart.transition,delete F.transitionend.transition),e(A,O),e(F,B)}();var j={startEvents:O,addStartEventListener:function(e,t){if(0===O.length)return void window.setTimeout(t,0);O.forEach(function(a){c(e,a,t)})},removeStartEventListener:function(e,t){0!==O.length&&O.forEach(function(a){l(e,a,t)})},endEvents:B,addEndEventListener:function(e,t){if(0===B.length)return void window.setTimeout(t,0);B.forEach(function(a){c(e,a,t)})},removeEndEventListener:function(e,t){0!==B.length&&B.forEach(function(a){l(e,a,t)})}},G=j,q=a(206),U=a.n(q),z=0!==G.endEvents.length,V=["Webkit","Moz","O","ms"],W=["-webkit-","-moz-","-o-","ms-",""],H=function(e,t,a){var n="object"===(void 0===t?"undefined":L()(t)),o=n?t.name:t,i=n?t.active:t+"-active",s=a,r=void 0,c=void 0,l=U()(e);return a&&"[object Object]"===Object.prototype.toString.call(a)&&(s=a.end,r=a.start,c=a.active),e.rcEndListener&&e.rcEndListener(),e.rcEndListener=function(t){t&&t.target!==e||(e.rcAnimTimeout&&(clearTimeout(e.rcAnimTimeout),e.rcAnimTimeout=null),m(e),l.remove(o),l.remove(i),G.removeEndEventListener(e,e.rcEndListener),e.rcEndListener=null,s&&s())},G.addEndEventListener(e,e.rcEndListener),r&&r(),l.add(o),e.rcAnimTimeout=setTimeout(function(){e.rcAnimTimeout=null,l.add(i),c&&setTimeout(c,0),u(e)},30),{stop:function(){e.rcEndListener&&e.rcEndListener()}}};H.style=function(e,t,a){e.rcEndListener&&e.rcEndListener(),e.rcEndListener=function(t){t&&t.target!==e||(e.rcAnimTimeout&&(clearTimeout(e.rcAnimTimeout),e.rcAnimTimeout=null),m(e),G.removeEndEventListener(e,e.rcEndListener),e.rcEndListener=null,a&&a())},G.addEndEventListener(e,e.rcEndListener),e.rcAnimTimeout=setTimeout(function(){for(var a in t)t.hasOwnProperty(a)&&(e.style[a]=t[a]);e.rcAnimTimeout=null,u(e)},0)},H.setTransition=function(e,t,a){var n=t,o=a;void 0===a&&(o=n,n=""),n=n||"",V.forEach(function(t){e.style[t+"Transition"+n]=o})},H.isCssAnimationSupported=z;var J=H,Y={isAppearSupported:function(e){return e.transitionName&&e.transitionAppear||e.animation.appear},isEnterSupported:function(e){return e.transitionName&&e.transitionEnter||e.animation.enter},isLeaveSupported:function(e){return e.transitionName&&e.transitionLeave||e.animation.leave},allowAppearCallback:function(e){return e.transitionAppear||e.animation.appear},allowEnterCallback:function(e){return e.transitionEnter||e.animation.enter},allowLeaveCallback:function(e){return e.transitionLeave||e.animation.leave}},Q=Y,K={enter:"transitionEnter",appear:"transitionAppear",leave:"transitionLeave"},X=function(e){function t(){return E()(this,t),k()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return x()(t,e),N()(t,[{key:"componentWillUnmount",value:function(){this.stop()}},{key:"componentWillEnter",value:function(e){Q.isEnterSupported(this.props)?this.transition("enter",e):e()}},{key:"componentWillAppear",value:function(e){Q.isAppearSupported(this.props)?this.transition("appear",e):e()}},{key:"componentWillLeave",value:function(e){Q.isLeaveSupported(this.props)?this.transition("leave",e):e()}},{key:"transition",value:function(e,t){var a=this,n=T.a.findDOMNode(this),o=this.props,i=o.transitionName,s="object"==typeof i;this.stop();var r=function(){a.stopper=null,t()};if((z||!o.animation[e])&&i&&o[K[e]]){var c=s?i[e]:i+"-"+e,l=c+"-active";s&&i[e+"Active"]&&(l=i[e+"Active"]),this.stopper=J(n,{name:c,active:l},r)}else this.stopper=o.animation[e](n,r)}},{key:"stop",value:function(){var e=this.stopper;e&&(this.stopper=null,e.stop())}},{key:"render",value:function(){return this.props.children}}]),t}(D.a.Component);X.propTypes={children:I.a.any};var $=X,Z="rc_animate_"+Date.now(),ee=function(e){function t(e){E()(this,t);var a=k()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return te.call(a),a.currentlyAnimatingKeys={},a.keysToEnter=[],a.keysToLeave=[],a.state={children:n(p(e))},a.childrenRefs={},a}return x()(t,e),N()(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.showProp,a=this.state.children;t&&(a=a.filter(function(e){return!!e.props[t]})),a.forEach(function(t){t&&e.performAppear(t.key)})}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.nextProps=e;var a=n(p(e)),s=this.props;s.exclusive&&Object.keys(this.currentlyAnimatingKeys).forEach(function(e){t.stop(e)});var c=s.showProp,l=this.currentlyAnimatingKeys,d=s.exclusive?n(p(s)):this.state.children,u=[];c?(d.forEach(function(e){var t=e&&o(a,e.key),n=void 0;(n=t&&t.props[c]||!e.props[c]?t:D.a.cloneElement(t||e,_()({},c,!0)))&&u.push(n)}),a.forEach(function(e){e&&o(d,e.key)||u.push(e)})):u=r(d,a),this.setState({children:u}),a.forEach(function(e){var a=e&&e.key;if(!e||!l[a]){var n=e&&o(d,a);if(c){var s=e.props[c];if(n){!i(d,a,c)&&s&&t.keysToEnter.push(a)}else s&&t.keysToEnter.push(a)}else n||t.keysToEnter.push(a)}}),d.forEach(function(e){var n=e&&e.key;if(!e||!l[n]){var s=e&&o(a,n);if(c){var r=e.props[c];if(s){!i(a,n,c)&&r&&t.keysToLeave.push(n)}else r&&t.keysToLeave.push(n)}else s||t.keysToLeave.push(n)}})}},{key:"componentDidUpdate",value:function(){var e=this.keysToEnter;this.keysToEnter=[],e.forEach(this.performEnter);var t=this.keysToLeave;this.keysToLeave=[],t.forEach(this.performLeave)}},{key:"isValidChildByKey",value:function(e,t){var a=this.props.showProp;return a?i(e,t,a):o(e,t)}},{key:"stop",value:function(e){delete this.currentlyAnimatingKeys[e];var t=this.childrenRefs[e];t&&t.stop()}},{key:"render",value:function(){var e=this,t=this.props;this.nextProps=t;var a=this.state.children,n=null;a&&(n=a.map(function(a){if(null===a||void 0===a)return a;if(!a.key)throw new Error("must set key for <rc-animate> children");return D.a.createElement($,{key:a.key,ref:function(t){e.childrenRefs[a.key]=t},animation:t.animation,transitionName:t.transitionName,transitionEnter:t.transitionEnter,transitionAppear:t.transitionAppear,transitionLeave:t.transitionLeave},a)}));var o=t.component;if(o){var i=t;return"string"==typeof o&&(i=h()({className:t.className,style:t.style},t.componentProps)),D.a.createElement(o,i,n)}return n[0]||null}}]),t}(D.a.Component);ee.isAnimate=!0,ee.propTypes={component:I.a.any,componentProps:I.a.object,animation:I.a.object,transitionName:I.a.oneOfType([I.a.string,I.a.object]),transitionEnter:I.a.bool,transitionAppear:I.a.bool,exclusive:I.a.bool,transitionLeave:I.a.bool,onEnd:I.a.func,onEnter:I.a.func,onLeave:I.a.func,onAppear:I.a.func,showProp:I.a.string,children:I.a.node},ee.defaultProps={animation:{},component:"span",componentProps:{},transitionEnter:!0,transitionLeave:!0,transitionAppear:!1,onEnd:f,onEnter:f,onLeave:f,onAppear:f};var te=function(){var e=this;this.performEnter=function(t){e.childrenRefs[t]&&(e.currentlyAnimatingKeys[t]=!0,e.childrenRefs[t].componentWillEnter(e.handleDoneAdding.bind(e,t,"enter")))},this.performAppear=function(t){e.childrenRefs[t]&&(e.currentlyAnimatingKeys[t]=!0,e.childrenRefs[t].componentWillAppear(e.handleDoneAdding.bind(e,t,"appear")))},this.handleDoneAdding=function(t,a){var o=e.props;if(delete e.currentlyAnimatingKeys[t],!o.exclusive||o===e.nextProps){var i=n(p(o));e.isValidChildByKey(i,t)?"appear"===a?Q.allowAppearCallback(o)&&(o.onAppear(t),o.onEnd(t,!0)):Q.allowEnterCallback(o)&&(o.onEnter(t),o.onEnd(t,!0)):e.performLeave(t)}},this.performLeave=function(t){e.childrenRefs[t]&&(e.currentlyAnimatingKeys[t]=!0,e.childrenRefs[t].componentWillLeave(e.handleDoneLeaving.bind(e,t)))},this.handleDoneLeaving=function(t){var a=e.props;if(delete e.currentlyAnimatingKeys[t],!a.exclusive||a===e.nextProps){var o=n(p(a));if(e.isValidChildByKey(o,t))e.performEnter(t);else{var i=function(){Q.allowLeaveCallback(a)&&(a.onLeave(t),a.onEnd(t,!1))};s(e.state.children,o,a.showProp)?i():e.setState({children:o},i)}}}};t.a=ee},function(e,t){e.exports=function(e,t){if(e.indexOf)return e.indexOf(t);for(var a=0;a<e.length;++a)if(e[a]===t)return a;return-1}},function(e,t,a){!function(t,a){e.exports=a()}(0,function(){return function(e){function t(n){if(a[n])return a[n].exports;var o=a[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var a={};return t.m=e,t.c=a,t.p="",t(0)}([function(e,t,a){a(6),a(7),e.exports=a(8)},function(e,t,a){(function(t){!function(a){function n(e,t){return function(){e.apply(t,arguments)}}function o(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],d(e,n(s,this),n(r,this))}function i(e){var t=this;return null===this._state?void this._deferreds.push(e):void u(function(){var a=t._state?e.onFulfilled:e.onRejected;if(null===a)return void(t._state?e.resolve:e.reject)(t._value);var n;try{n=a(t._value)}catch(t){return void e.reject(t)}e.resolve(n)})}function s(e){try{if(e===this)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var t=e.then;if("function"==typeof t)return void d(n(t,e),n(s,this),n(r,this))}this._state=!0,this._value=e,c.call(this)}catch(e){r.call(this,e)}}function r(e){this._state=!1,this._value=e,c.call(this)}function c(){for(var e=0,t=this._deferreds.length;t>e;e++)i.call(this,this._deferreds[e]);this._deferreds=null}function l(e,t,a,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=a,this.reject=n}function d(e,t,a){var n=!1;try{e(function(e){n||(n=!0,t(e))},function(e){n||(n=!0,a(e))})}catch(e){if(n)return;n=!0,a(e)}}var u="function"==typeof t&&t||function(e){setTimeout(e,1)},m=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};o.prototype.catch=function(e){return this.then(null,e)},o.prototype.then=function(e,t){var a=this;return new o(function(n,o){i.call(a,new l(e,t,n,o))})},o.all=function(){var e=Array.prototype.slice.call(1===arguments.length&&m(arguments[0])?arguments[0]:arguments);return new o(function(t,a){function n(i,s){try{if(s&&("object"==typeof s||"function"==typeof s)){var r=s.then;if("function"==typeof r)return void r.call(s,function(e){n(i,e)},a)}e[i]=s,0==--o&&t(e)}catch(e){a(e)}}if(0===e.length)return t([]);for(var o=e.length,i=0;i<e.length;i++)n(i,e[i])})},o.resolve=function(e){return e&&"object"==typeof e&&e.constructor===o?e:new o(function(t){t(e)})},o.reject=function(e){return new o(function(t,a){a(e)})},o.race=function(e){return new o(function(t,a){for(var n=0,o=e.length;o>n;n++)e[n].then(t,a)})},o._setImmediateFn=function(e){u=e},o.prototype.always=function(e){var t=this.constructor;return this.then(function(a){return t.resolve(e()).then(function(){return a})},function(a){return t.resolve(e()).then(function(){throw a})})},void 0!==e&&e.exports?e.exports=o:a.Promise||(a.Promise=o)}(this)}).call(t,a(2).setImmediate)},function(e,t,a){(function(e,n){function o(e,t){this._id=e,this._clearFn=t}var i=a(3).nextTick,s=Function.prototype.apply,r=Array.prototype.slice,c={},l=0;t.setTimeout=function(){return new o(s.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new o(s.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},t.setImmediate="function"==typeof e?e:function(e){var a=l++,n=!(arguments.length<2)&&r.call(arguments,1);return c[a]=!0,i(function(){c[a]&&(n?e.apply(null,n):e.call(null),t.clearImmediate(a))}),a},t.clearImmediate="function"==typeof n?n:function(e){delete c[e]}}).call(t,a(2).setImmediate,a(2).clearImmediate)},function(e,t){function a(){l=!1,s.length?c=s.concat(c):d=-1,c.length&&n()}function n(){if(!l){var e=setTimeout(a);l=!0;for(var t=c.length;t;){for(s=c,c=[];++d<t;)s&&s[d].run();d=-1,t=c.length}s=null,l=!1,clearTimeout(e)}}function o(e,t){this.fun=e,this.array=t}function i(){}var s,r=e.exports={},c=[],l=!1,d=-1;r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var a=1;a<arguments.length;a++)t[a-1]=arguments[a];c.push(new o(e,t)),1!==c.length||l||setTimeout(n,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=i,r.addListener=i,r.once=i,r.off=i,r.removeListener=i,r.removeAllListeners=i,r.emit=i,r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(e,t){var a=function(){try{return new Blob,!0}catch(e){return!1}}()?window.Blob:function(e,t){var a=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MSBlobBuilder||window.MozBlobBuilder);return e.forEach(function(e){a.append(e)}),a.getBlob(t?t.type:void 0)},n=function(){function e(){var e=this,n=[],o=Array(21).join("-")+(+new Date*(1e16*Math.random())).toString(36),i=XMLHttpRequest.prototype.send;this.getParts=function(){return n.toString()},this.append=function(e,t,a){n.push("--"+o+'\r\nContent-Disposition: form-data; name="'+e+'"'),t instanceof Blob?(n.push('; filename="'+(a||"blob")+'"\r\nContent-Type: '+t.type+"\r\n\r\n"),n.push(t)):n.push("\r\n\r\n"+t),n.push("\r\n")},t++,XMLHttpRequest.prototype.send=function(s){var r,c,l=this;s===e?(n.push("--"+o+"--\r\n"),c=new a(n),r=new FileReader,r.onload=function(){i.call(l,r.result)},r.onerror=function(e){throw e},r.readAsArrayBuffer(c),this.setRequestHeader("Content-Type","multipart/form-data; boundary="+o),0==--t&&(XMLHttpRequest.prototype.send=i)):i.call(this,s)}}var t=0;return e.prototype=Object.create(FormData.prototype),e}();e.exports={Blob:a,FormData:function(){return~navigator.userAgent.indexOf("Android")&&~navigator.vendor.indexOf("Google")&&!~navigator.userAgent.indexOf("Chrome")&&navigator.userAgent.match(/AppleWebKit\/(\d+)/).pop()<=534||/MQQBrowser/g.test(navigator.userAgent)}()?n:FormData}},function(e,t,a){var n,o;(function(){function a(e){return!!e.exifdata}function i(e,t){t=t||e.match(/^data\:([^\;]+)\;base64,/im)[1]||"",e=e.replace(/^data\:([^\;]+)\;base64,/gim,"");for(var a=atob(e),n=a.length,o=new ArrayBuffer(n),i=new Uint8Array(o),s=0;n>s;s++)i[s]=a.charCodeAt(s);return o}function s(e,t){var a=new XMLHttpRequest;a.open("GET",e,!0),a.responseType="blob",a.onload=function(e){(200==this.status||0===this.status)&&t(this.response)},a.send()}function r(e,t){function a(a){var n=c(a),o=l(a);e.exifdata=n||{},e.iptcdata=o||{},t&&t.call(e)}if(e.src)if(/^data\:/i.test(e.src)){var n=i(e.src);a(n)}else if(/^blob\:/i.test(e.src)){var o=new FileReader;o.onload=function(e){a(e.target.result)},s(e.src,function(e){o.readAsArrayBuffer(e)})}else{var r=new XMLHttpRequest;r.onload=function(){200==this.status||0===this.status?a(r.response):t(new Error("Could not load image")),r=null},r.open("GET",e.src,!0),r.responseType="arraybuffer",r.send(null)}else if(window.FileReader&&(e instanceof window.Blob||e instanceof window.File)){var o=new FileReader;o.onload=function(e){g&&console.log("Got file of length "+e.target.result.byteLength),a(e.target.result)},o.readAsArrayBuffer(e)}}function c(e){var t=new DataView(e);if(g&&console.log("Got file of length "+e.byteLength),255!=t.getUint8(0)||216!=t.getUint8(1))return g&&console.log("Not a valid JPEG"),!1;for(var a,n=2,o=e.byteLength;o>n;){if(255!=t.getUint8(n))return g&&console.log("Not a valid marker at offset "+n+", found: "+t.getUint8(n)),!1;if(a=t.getUint8(n+1),g&&console.log(a),225==a)return g&&console.log("Found 0xFFE1 marker"),f(t,n+4,t.getUint16(n+2));n+=2+t.getUint16(n+2)}}function l(e){var t=new DataView(e);if(g&&console.log("Got file of length "+e.byteLength),255!=t.getUint8(0)||216!=t.getUint8(1))return g&&console.log("Not a valid JPEG"),!1;for(var a=2,n=e.byteLength;n>a;){if(function(e,t){return 56===e.getUint8(t)&&66===e.getUint8(t+1)&&73===e.getUint8(t+2)&&77===e.getUint8(t+3)&&4===e.getUint8(t+4)&&4===e.getUint8(t+5)}(t,a)){var o=t.getUint8(a+7);o%2!=0&&(o+=1),0===o&&(o=4);return d(e,a+8+o,t.getUint16(a+6+o))}a++}}function d(e,t,a){for(var n,o,i,s,r=new DataView(e),c={},l=t;t+a>l;)28===r.getUint8(l)&&2===r.getUint8(l+1)&&(s=r.getUint8(l+2))in b&&(i=r.getInt16(l+3),i+5,o=b[s],n=p(r,l+5,i),c.hasOwnProperty(o)?c[o]instanceof Array?c[o].push(n):c[o]=[c[o],n]:c[o]=n),l++;return c}function u(e,t,a,n,o){var i,s,r,c=e.getUint16(a,!o),l={};for(r=0;c>r;r++)i=a+12*r+2,s=n[e.getUint16(i,!o)],!s&&g&&console.log("Unknown tag: "+e.getUint16(i,!o)),l[s]=m(e,i,t,a,o);return l}function m(e,t,a,n,o){var i,s,r,c,l,d,u=e.getUint16(t+2,!o),m=e.getUint32(t+4,!o),f=e.getUint32(t+8,!o)+a;switch(u){case 1:case 7:if(1==m)return e.getUint8(t+8,!o);for(i=m>4?f:t+8,s=[],c=0;m>c;c++)s[c]=e.getUint8(i+c);return s;case 2:return i=m>4?f:t+8,p(e,i,m-1);case 3:if(1==m)return e.getUint16(t+8,!o);for(i=m>2?f:t+8,s=[],c=0;m>c;c++)s[c]=e.getUint16(i+2*c,!o);return s;case 4:if(1==m)return e.getUint32(t+8,!o);for(s=[],c=0;m>c;c++)s[c]=e.getUint32(f+4*c,!o);return s;case 5:if(1==m)return l=e.getUint32(f,!o),d=e.getUint32(f+4,!o),r=new Number(l/d),r.numerator=l,r.denominator=d,r;for(s=[],c=0;m>c;c++)l=e.getUint32(f+8*c,!o),d=e.getUint32(f+4+8*c,!o),s[c]=new Number(l/d),s[c].numerator=l,s[c].denominator=d;return s;case 9:if(1==m)return e.getInt32(t+8,!o);for(s=[],c=0;m>c;c++)s[c]=e.getInt32(f+4*c,!o);return s;case 10:if(1==m)return e.getInt32(f,!o)/e.getInt32(f+4,!o);for(s=[],c=0;m>c;c++)s[c]=e.getInt32(f+8*c,!o)/e.getInt32(f+4+8*c,!o);return s}}function p(e,t,a){var n,o="";for(n=t;t+a>n;n++)o+=String.fromCharCode(e.getUint8(n));return o}function f(e,t){if("Exif"!=p(e,t,4))return g&&console.log("Not valid EXIF data! "+p(e,t,4)),!1;var a,n,o,i,s,r=t+6;if(18761==e.getUint16(r))a=!1;else{if(19789!=e.getUint16(r))return g&&console.log("Not valid TIFF data! (no 0x4949 or 0x4D4D)"),!1;a=!0}if(42!=e.getUint16(r+2,!a))return g&&console.log("Not valid TIFF data! (no 0x002A)"),!1;var c=e.getUint32(r+4,!a);if(8>c)return g&&console.log("Not valid TIFF data! (First offset less than 8)",e.getUint32(r+4,!a)),!1;if(n=u(e,r,r+c,_,a),n.ExifIFDPointer){i=u(e,r,r+n.ExifIFDPointer,v,a);for(o in i){switch(o){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":i[o]=E[o][i[o]];break;case"ExifVersion":case"FlashpixVersion":i[o]=String.fromCharCode(i[o][0],i[o][1],i[o][2],i[o][3]);break;case"ComponentsConfiguration":i[o]=E.Components[i[o][0]]+E.Components[i[o][1]]+E.Components[i[o][2]]+E.Components[i[o][3]]}n[o]=i[o]}}if(n.GPSInfoIFDPointer){s=u(e,r,r+n.GPSInfoIFDPointer,y,a);for(o in s){switch(o){case"GPSVersionID":s[o]=s[o][0]+"."+s[o][1]+"."+s[o][2]+"."+s[o][3]}n[o]=s[o]}}return n}var g=!1,h=function(e){return e instanceof h?e:this instanceof h?void(this.EXIFwrapped=e):new h(e)};void 0!==e&&e.exports&&(t=e.exports=h),t.EXIF=h;var v=h.Tags={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"},_=h.TiffTags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},y=h.GPSTags={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},E=h.StringValues={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}},b={120:"caption",110:"credit",25:"keywords",55:"dateCreated",80:"byline",85:"bylineTitle",122:"captionWriter",105:"headline",116:"copyright",15:"category"};h.getData=function(e,t){return!((e instanceof Image||e instanceof HTMLImageElement)&&!e.complete)&&(a(e)?t&&t.call(e):r(e,t),!0)},h.getTag=function(e,t){return a(e)?e.exifdata[t]:void 0},h.getAllTags=function(e){if(!a(e))return{};var t,n=e.exifdata,o={};for(t in n)n.hasOwnProperty(t)&&(o[t]=n[t]);return o},h.pretty=function(e){if(!a(e))return"";var t,n=e.exifdata,o="";for(t in n)n.hasOwnProperty(t)&&(o+="object"==typeof n[t]?n[t]instanceof Number?t+" : "+n[t]+" ["+n[t].numerator+"/"+n[t].denominator+"]\r\n":t+" : ["+n[t].length+" values]\r\n":t+" : "+n[t]+"\r\n");return o},h.readFromBinaryFile=function(e){return c(e)},n=[],void 0!==(o=function(){return h}.apply(t,n))&&(e.exports=o)}).call(this)},function(e,t,a){var n,o;!function(){function a(e){var t=e.naturalWidth;if(t*e.naturalHeight>1048576){var a=document.createElement("canvas");a.width=a.height=1;var n=a.getContext("2d");return n.drawImage(e,1-t,0),0===n.getImageData(0,0,1,1).data[3]}return!1}function i(e,t,a){var n=document.createElement("canvas");n.width=1,n.height=a;var o=n.getContext("2d");o.drawImage(e,0,0);for(var i=o.getImageData(0,0,1,a).data,s=0,r=a,c=a;c>s;){0===i[4*(c-1)+3]?r=c:s=c,c=r+s>>1}var l=c/a;return 0===l?1:l}function s(e,t,a){var n=document.createElement("canvas");return r(e,n,t,a),n.toDataURL("image/jpeg",t.quality||.8)}function r(e,t,n,o){var s=e.naturalWidth,r=e.naturalHeight,l=n.width,d=n.height,u=t.getContext("2d");u.save(),c(t,u,l,d,n.orientation),a(e)&&(s/=2,r/=2);var m=1024,p=document.createElement("canvas");p.width=p.height=m;for(var f=p.getContext("2d"),g=o?i(e,s,r):1,h=Math.ceil(m*l/s),v=Math.ceil(m*d/r/g),_=0,y=0;r>_;){for(var E=0,b=0;s>E;)f.clearRect(0,0,m,m),f.drawImage(e,-E,-_),u.drawImage(p,0,0,m,m,b,y,h,v),E+=m,b+=h;_+=m,y+=v}u.restore(),p=f=null}function c(e,t,a,n,o){switch(o){case 5:case 6:case 7:case 8:e.width=n,e.height=a;break;default:e.width=a,e.height=n}switch(o){case 2:t.translate(a,0),t.scale(-1,1);break;case 3:t.translate(a,n),t.rotate(Math.PI);break;case 4:t.translate(0,n),t.scale(1,-1);break;case 5:t.rotate(.5*Math.PI),t.scale(1,-1);break;case 6:t.rotate(.5*Math.PI),t.translate(0,-n);break;case 7:t.rotate(.5*Math.PI),t.translate(a,-n),t.scale(-1,1);break;case 8:t.rotate(-.5*Math.PI),t.translate(-a,0)}}function l(e){if(window.Blob&&e instanceof Blob){var t=new Image,a=window.URL&&window.URL.createObjectURL?window.URL:window.webkitURL&&window.webkitURL.createObjectURL?window.webkitURL:null;if(!a)throw Error("No createObjectURL function found to create blob url");t.src=a.createObjectURL(e),this.blob=e,e=t}if(!e.naturalWidth&&!e.naturalHeight){var n=this;e.onload=function(){var e=n.imageLoadListeners;if(e){n.imageLoadListeners=null;for(var t=0,a=e.length;a>t;t++)e[t]()}},this.imageLoadListeners=[]}this.srcImage=e}l.prototype.render=function(e,t,a){if(this.imageLoadListeners){var n=this;return void this.imageLoadListeners.push(function(){n.render(e,t,a)})}t=t||{};var o=this.srcImage,i=o.src,c=i.length,l=o.naturalWidth,d=o.naturalHeight,u=t.width,m=t.height,p=t.maxWidth,f=t.maxHeight,g=this.blob&&"image/jpeg"===this.blob.type||0===i.indexOf("data:image/jpeg")||i.indexOf(".jpg")===c-4||i.indexOf(".jpeg")===c-5;u&&!m?m=d*u/l<<0:m&&!u?u=l*m/d<<0:(u=l,m=d),p&&u>p&&(u=p,m=d*u/l<<0),f&&m>f&&(m=f,u=l*m/d<<0);var h={width:u,height:m};for(var v in t)h[v]=t[v];var _=e.tagName.toLowerCase();"img"===_?e.src=s(this.srcImage,h,g):"canvas"===_&&r(this.srcImage,e,h,g),"function"==typeof this.onrender&&this.onrender(e),a&&a()},n=[],void 0!==(o=function(){return l}.apply(t,n))&&(e.exports=o)}()},function(e,t){function a(e){function t(e){for(var t=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],a=0;64>a;a++){var n=R((t[a]*e+50)/100);1>n?n=1:n>255&&(n=255),k[G[a]]=n}for(var o=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],i=0;64>i;i++){var s=R((o[i]*e+50)/100);1>s?s=1:s>255&&(s=255),w[G[i]]=s}for(var r=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],c=0,l=0;8>l;l++)for(var d=0;8>d;d++)x[c]=1/(k[G[c]]*r[l]*r[d]*8),C[c]=1/(w[G[c]]*r[l]*r[d]*8),c++}function a(e,t){for(var a=0,n=0,o=new Array,i=1;16>=i;i++){for(var s=1;s<=e[i];s++)o[t[n]]=[],o[t[n]][0]=a,o[t[n]][1]=i,n++,a++;a*=2}return o}function n(){_=a(q,U),y=a(W,H),E=a(z,V),b=a(J,Y)}function o(){for(var e=1,t=2,a=1;15>=a;a++){for(var n=e;t>n;n++)S[32767+n]=a,D[32767+n]=[],D[32767+n][1]=a,D[32767+n][0]=n;for(var o=-(t-1);-e>=o;o++)S[32767+o]=a,D[32767+o]=[],D[32767+o][1]=a,D[32767+o][0]=t-1+o;e<<=1,t<<=1}}function i(){for(var e=0;256>e;e++)j[e]=19595*e,j[e+256>>0]=38470*e,j[e+512>>0]=7471*e+32768,j[e+768>>0]=-11059*e,j[e+1024>>0]=-21709*e,j[e+1280>>0]=32768*e+8421375,j[e+1536>>0]=-27439*e,j[e+1792>>0]=-5329*e}function s(e){for(var t=e[0],a=e[1]-1;a>=0;)t&1<<a&&(P|=1<<L),a--,0>--L&&(255==P?(r(255),r(0)):r(P),L=7,P=0)}function r(e){T.push(B[e])}function c(e){r(e>>8&255),r(255&e)}function l(e,t){var a,n,o,i,s,r,c,l,d,u=0;for(d=0;8>d;++d){a=e[u],n=e[u+1],o=e[u+2],i=e[u+3],s=e[u+4],r=e[u+5],c=e[u+6],l=e[u+7];var m=a+l,p=a-l,f=n+c,g=n-c,h=o+r,v=o-r,_=i+s,y=i-s,E=m+_,b=m-_,N=f+h,R=f-h;e[u]=E+N,e[u+4]=E-N;var k=.707106781*(R+b);e[u+2]=b+k,e[u+6]=b-k,E=y+v,N=v+g,R=g+p;var w=.382683433*(E-R),x=.5411961*E+w,C=1.306562965*R+w,D=.707106781*N,S=p+D,M=p-D;e[u+5]=M+x,e[u+3]=M-x,e[u+1]=S+C,e[u+7]=S-C,u+=8}for(u=0,d=0;8>d;++d){a=e[u],n=e[u+8],o=e[u+16],i=e[u+24],s=e[u+32],r=e[u+40],c=e[u+48],l=e[u+56];var T=a+l,P=a-l,L=n+c,A=n-c,F=o+r,O=o-r,B=i+s,j=i-s,G=T+B,q=T-B,U=L+F,z=L-F;e[u]=G+U,e[u+32]=G-U;var V=.707106781*(z+q);e[u+16]=q+V,e[u+48]=q-V,G=j+O,U=O+A,z=A+P;var W=.382683433*(G-z),H=.5411961*G+W,J=1.306562965*z+W,Y=.707106781*U,Q=P+Y,K=P-Y;e[u+40]=K+H,e[u+24]=K-H,e[u+8]=Q+J,e[u+56]=Q-J,u++}var X;for(d=0;64>d;++d)X=e[d]*t[d],I[d]=X>0?X+.5|0:X-.5|0;return I}function d(){c(65504),c(16),r(74),r(70),r(73),r(70),r(0),r(1),r(1),r(0),c(1),c(1),r(0),r(0)}function u(e,t){c(65472),c(17),r(8),c(t),c(e),r(3),r(1),r(17),r(0),r(2),r(17),r(1),r(3),r(17),r(1)}function m(){c(65499),c(132),r(0);for(var e=0;64>e;e++)r(k[e]);r(1);for(var t=0;64>t;t++)r(w[t])}function p(){c(65476),c(418),r(0);for(var e=0;16>e;e++)r(q[e+1]);for(var t=0;11>=t;t++)r(U[t]);r(16);for(var a=0;16>a;a++)r(z[a+1]);for(var n=0;161>=n;n++)r(V[n]);r(1);for(var o=0;16>o;o++)r(W[o+1]);for(var i=0;11>=i;i++)r(H[i]);r(17);for(var s=0;16>s;s++)r(J[s+1]);for(var l=0;161>=l;l++)r(Y[l])}function f(){c(65498),c(12),r(3),r(1),r(0),r(2),r(17),r(3),r(17),r(0),r(63),r(0)}function g(e,t,a,n,o){var i,r=o[0],c=o[240];for(var d=l(e,t),u=0;64>u;++u)M[G[u]]=d[u];var m=M[0]-a;a=M[0],0==m?s(n[0]):(i=32767+m,s(n[S[i]]),s(D[i]));for(var p=63;p>0&&0==M[p];p--);if(0==p)return s(r),a;for(var f,g=1;p>=g;){for(var h=g;0==M[g]&&p>=g;++g);var v=g-h;if(v>=16){f=v>>4;for(var _=1;f>=_;++_)s(c);v&=15}i=32767+M[g],s(o[(v<<4)+S[i]]),s(D[i]),g++}return 63!=p&&s(r),a}function h(){for(var e=String.fromCharCode,t=0;256>t;t++)B[t]=e(t)}function v(e){if(0>=e&&(e=1),e>100&&(e=100),N!=e){var a=0;a=50>e?Math.floor(5e3/e):Math.floor(200-2*e),t(a),N=e}}var _,y,E,b,N,R=(Math.round,Math.floor),k=new Array(64),w=new Array(64),x=new Array(64),C=new Array(64),D=new Array(65535),S=new Array(65535),I=new Array(64),M=new Array(64),T=[],P=0,L=7,A=new Array(64),F=new Array(64),O=new Array(64),B=new Array(256),j=new Array(2048),G=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],q=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],U=[0,1,2,3,4,5,6,7,8,9,10,11],z=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],V=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],W=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],H=[0,1,2,3,4,5,6,7,8,9,10,11],J=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Y=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];this.encode=function(e,t,a){(new Date).getTime();t&&v(t),T=new Array,P=0,L=7,c(65496),d(),m(),u(e.width,e.height),p(),f();var n=0,o=0,i=0;P=0,L=7,this.encode.displayName="_encode_";for(var r,l,h,N,R,k,w,D,S,I=e.data,M=e.width,B=e.height,G=4*M,q=0;B>q;){for(r=0;G>r;){for(R=G*q+r,k=R,w=-1,D=0,S=0;64>S;S++)D=S>>3,w=4*(7&S),k=R+D*G+w,q+D>=B&&(k-=G*(q+1+D-B)),r+w>=G&&(k-=r+w-G+4),l=I[k++],h=I[k++],N=I[k++],A[S]=(j[l]+j[h+256>>0]+j[N+512>>0]>>16)-128,F[S]=(j[l+768>>0]+j[h+1024>>0]+j[N+1280>>0]>>16)-128,O[S]=(j[l+1280>>0]+j[h+1536>>0]+j[N+1792>>0]>>16)-128;n=g(A,x,n,_,E),o=g(F,C,o,y,b),i=g(O,C,i,y,b),r+=32}q+=8}if(L>=0){var U=[];U[1]=L+1,U[0]=(1<<L+1)-1,s(U)}if(c(65497),a){for(var z=T.length,V=new Uint8Array(z),W=0;z>W;W++)V[W]=T[W].charCodeAt();return T=[],(new Date).getTime(),V}var H="data:image/jpeg;base64,"+btoa(T.join(""));return T=[],(new Date).getTime(),H},function(){(new Date).getTime();e||(e=50),h(),n(),o(),i(),v(e),(new Date).getTime()}()}e.exports=a},function(e,t,a){function n(e,t){var a=this;if(!e)throw new Error("没有收到图片，可能的解决方案：https://github.com/think2011/localResizeIMG/issues/7");t=t||{},a.defaults={width:null,height:null,fieldName:"file",quality:.7},a.file=e;for(var n in t)t.hasOwnProperty(n)&&(a.defaults[n]=t[n]);return this.init()}function o(e){var t;t=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):unescape(e.split(",")[1]);for(var a=e.split(",")[0].split(":")[1].split(";")[0],n=new Uint8Array(t.length),o=0;o<t.length;o++)n[o]=t.charCodeAt(o);return new s.Blob([n.buffer],{type:a})}a.p=function(e){var t=null;return t=e?[].filter.call(document.scripts,function(t){return-1!==t.src.indexOf(e)})[0]:document.scripts[document.scripts.length-1],t?t.src.substr(0,t.src.lastIndexOf("/")):null}("lrz")+"/",window.URL=window.URL||window.webkitURL;var i=a(1),s=a(4),r=a(5),c=function(e){var t=/OS (\d)_.* like Mac OS X/g.exec(e),a=/Android (\d.*?);/g.exec(e)||/Android\/(\d.*?) /g.exec(e);return{oldIOS:!!t&&+t.pop()<8,oldAndroid:!!a&&+a.pop().substr(0,3)<4.5,iOS:/\(i[^;]+;( U;)? CPU.+Mac OS X/.test(e),android:/Android/g.test(e),mQQBrowser:/MQQBrowser/g.test(e)}}(navigator.userAgent);n.prototype.init=function(){var e=this,t=e.file,a="string"==typeof t,n=/^data:/.test(t),r=new Image,c=document.createElement("canvas"),l=a?t:URL.createObjectURL(t);if(e.img=r,e.blob=l,e.canvas=c,e.fileName=a?n?"base64.jpg":t.split("/").pop():t.name,!document.createElement("canvas").getContext)throw new Error("浏览器不支持canvas");return new i(function(a,i){r.onerror=function(){var e=new Error("加载图片文件失败");throw i(e),e},r.onload=function(){e._getBase64().then(function(e){if(e.length<10){var t=new Error("生成base64失败");throw i(t),t}return e}).then(function(n){var i=null;"object"==typeof e.file&&n.length>e.file.size?(i=new FormData,t=e.file):(i=new s.FormData,t=o(n)),i.append(e.defaults.fieldName,t,e.fileName.replace(/\..+/g,".jpg")),a({formData:i,fileLen:+t.size,base64:n,base64Len:n.length,origin:e.file,file:t});for(var r in e)e.hasOwnProperty(r)&&(e[r]=null);URL.revokeObjectURL(e.blob)})},!n&&(r.crossOrigin="*"),r.src=l})},n.prototype._getBase64=function(){var e=this,t=e.img,a=e.file,n=e.canvas;return new i(function(o){try{r.getData("object"==typeof a?a:t,function(){e.orientation=r.getTag(this,"Orientation"),e.resize=e._getResize(),e.ctx=n.getContext("2d"),n.width=e.resize.width,n.height=e.resize.height,e.ctx.fillStyle="#fff",e.ctx.fillRect(0,0,n.width,n.height),c.oldIOS?e._createBase64ForOldIOS().then(o):e._createBase64().then(o)})}catch(e){throw new Error(e)}})},n.prototype._createBase64ForOldIOS=function(){var e=this,t=e.img,n=e.canvas,o=e.defaults,s=e.orientation;return new i(function(e){!function(){var i=[a(6)];(function(a){var i=new a(t);"5678".indexOf(s)>-1?i.render(n,{width:n.height,height:n.width,orientation:s}):i.render(n,{width:n.width,height:n.height,orientation:s}),e(n.toDataURL("image/jpeg",o.quality))}).apply(null,i)}()})},n.prototype._createBase64=function(){var e=this,t=e.resize,n=e.img,o=e.canvas,s=e.ctx,r=e.defaults;switch(e.orientation){case 3:s.rotate(180*Math.PI/180),s.drawImage(n,-t.width,-t.height,t.width,t.height);break;case 6:s.rotate(90*Math.PI/180),s.drawImage(n,0,-t.width,t.height,t.width);break;case 8:s.rotate(270*Math.PI/180),s.drawImage(n,-t.height,0,t.height,t.width);break;case 2:s.translate(t.width,0),s.scale(-1,1),s.drawImage(n,0,0,t.width,t.height);break;case 4:s.translate(t.width,0),s.scale(-1,1),s.rotate(180*Math.PI/180),s.drawImage(n,-t.width,-t.height,t.width,t.height);break;case 5:s.translate(t.width,0),s.scale(-1,1),s.rotate(90*Math.PI/180),s.drawImage(n,0,-t.width,t.height,t.width);break;case 7:s.translate(t.width,0),s.scale(-1,1),s.rotate(270*Math.PI/180),s.drawImage(n,-t.height,0,t.height,t.width);break;default:s.drawImage(n,0,0,t.width,t.height)}return new i(function(e){c.oldAndroid||c.mQQBrowser||!navigator.userAgent?function(){var t=[a(7)];(function(t){var a=new t,n=s.getImageData(0,0,o.width,o.height);e(a.encode(n,100*r.quality))}).apply(null,t)}():e(o.toDataURL("image/jpeg",r.quality))})},n.prototype._getResize=function(){var e=this,t=e.img,a=e.defaults,n=a.width,o=a.height,i=e.orientation,s={width:t.width,height:t.height};if("5678".indexOf(i)>-1&&(s.width=t.height,s.height=t.width),s.width<n||s.height<o)return s;var r=s.width/s.height;for(n&&o?r>=n/o?s.width>n&&(s.width=n,s.height=Math.ceil(n/r)):s.height>o&&(s.height=o,s.width=Math.ceil(o*r)):n?n<s.width&&(s.width=n,s.height=Math.ceil(n/r)):o&&o<s.height&&(s.width=Math.ceil(o*r),s.height=o);s.width>=3264||s.height>=2448;)s.width*=.8,s.height*=.8;return s},window.lrz=function(e,t){return new n(e,t)},window.lrz.version="4.9.40",e.exports=window.lrz}])})},function(e,t,a){"use strict";e.exports=function(e,t){return function(){for(var a=new Array(arguments.length),n=0;n<a.length;n++)a[n]=arguments[n];return e.apply(t,a)}}},function(e,t){function a(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function o(e){if(d===setTimeout)return setTimeout(e,0);if((d===a||!d)&&setTimeout)return d=setTimeout,setTimeout(e,0);try{return d(e,0)}catch(t){try{return d.call(null,e,0)}catch(t){return d.call(this,e,0)}}}function i(e){if(u===clearTimeout)return clearTimeout(e);if((u===n||!u)&&clearTimeout)return u=clearTimeout,clearTimeout(e);try{return u(e)}catch(t){try{return u.call(null,e)}catch(t){return u.call(this,e)}}}function s(){g&&p&&(g=!1,p.length?f=p.concat(f):h=-1,f.length&&r())}function r(){if(!g){var e=o(s);g=!0;for(var t=f.length;t;){for(p=f,f=[];++h<t;)p&&p[h].run();h=-1,t=f.length}p=null,g=!1,i(e)}}function c(e,t){this.fun=e,this.array=t}function l(){}var d,u,m=e.exports={};!function(){try{d="function"==typeof setTimeout?setTimeout:a}catch(e){d=a}try{u="function"==typeof clearTimeout?clearTimeout:n}catch(e){u=n}}();var p,f=[],g=!1,h=-1;m.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var a=1;a<arguments.length;a++)t[a-1]=arguments[a];f.push(new c(e,t)),1!==f.length||g||o(r)},c.prototype.run=function(){this.fun.apply(null,this.array)},m.title="browser",m.browser=!0,m.env={},m.argv=[],m.version="",m.versions={},m.on=l,m.addListener=l,m.once=l,m.off=l,m.removeListener=l,m.removeAllListeners=l,m.emit=l,m.prependListener=l,m.prependOnceListener=l,m.listeners=function(e){return[]},m.binding=function(e){throw new Error("process.binding is not supported")},m.cwd=function(){return"/"},m.chdir=function(e){throw new Error("process.chdir is not supported")},m.umask=function(){return 0}},function(e,t,a){"use strict";var n=a(25),o=a(221),i=a(223),s=a(224),r=a(225),c=a(135),l="undefined"!=typeof window&&window.btoa&&window.btoa.bind(window)||a(226);e.exports=function(e){return new Promise(function(t,d){var u=e.data,m=e.headers;n.isFormData(u)&&delete m["Content-Type"];var p=new XMLHttpRequest,f="onreadystatechange",g=!1;if("undefined"==typeof window||!window.XDomainRequest||"withCredentials"in p||r(e.url)||(p=new window.XDomainRequest,f="onload",g=!0,p.onprogress=function(){},p.ontimeout=function(){}),e.auth){var h=e.auth.username||"",v=e.auth.password||"";m.Authorization="Basic "+l(h+":"+v)}if(p.open(e.method.toUpperCase(),i(e.url,e.params,e.paramsSerializer),!0),p.timeout=e.timeout,p[f]=function(){if(p&&(4===p.readyState||g)&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))){var a="getAllResponseHeaders"in p?s(p.getAllResponseHeaders()):null,n=e.responseType&&"text"!==e.responseType?p.response:p.responseText,i={data:n,status:1223===p.status?204:p.status,statusText:1223===p.status?"No Content":p.statusText,headers:a,config:e,request:p};o(t,d,i),p=null}},p.onerror=function(){d(c("Network Error",e,null,p)),p=null},p.ontimeout=function(){d(c("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED",p)),p=null},n.isStandardBrowserEnv()){var _=a(227),y=(e.withCredentials||r(e.url))&&e.xsrfCookieName?_.read(e.xsrfCookieName):void 0;y&&(m[e.xsrfHeaderName]=y)}if("setRequestHeader"in p&&n.forEach(m,function(e,t){void 0===u&&"content-type"===t.toLowerCase()?delete m[t]:p.setRequestHeader(t,e)}),e.withCredentials&&(p.withCredentials=!0),e.responseType)try{p.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&p.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&p.upload&&p.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(e){p&&(p.abort(),d(e),p=null)}),void 0===u&&(u=null),p.send(u)})}},function(e,t,a){"use strict";var n=a(222);e.exports=function(e,t,a,o,i){var s=new Error(e);return n(s,t,a,o,i)}},function(e,t,a){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,a){"use strict";function n(e){this.message=e}n.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},n.prototype.__CANCEL__=!0,e.exports=n},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(236),i=n(o),s=a(238),r=n(s),c=a(323),l=n(c),d=a(339),u=n(d),m=a(341),p=n(m),f=a(343),g=n(f),h=a(346),v=n(h),_=a(354),y=n(_),E=a(357),b=n(E),N=a(359),R=n(N),k=a(361),w=n(k),x=a(363),C=n(x),D=a(365),S=n(D),I=a(367),M=n(I),T=a(369),P=n(T),L=a(371),A=n(L),F=a(373),O=n(F),B=a(377),j=n(B),G=a(379),q=n(G),U=a(381),z=n(U),V=a(383),W=n(V),H=a(385),J=n(H),Y=a(387),Q=n(Y),K=a(389),X=n(K),$=a(391),Z=n($),ee=a(393),te=n(ee),ae=a(396),ne=n(ae),oe=a(398),ie=n(oe),se=a(400),re=n(se),ce=a(402),le=n(ce),de=a(404),ue=n(de),me=a(406),pe=n(me),fe=a(408),ge=n(fe),he=a(410),ve=n(he),_e=a(412),ye=n(_e),Ee=a(414),be=n(Ee),Ne=a(416),Re=n(Ne),ke=a(418),we=n(ke),xe=a(420),Ce=n(xe),De=a(422),Se=n(De),Ie=a(424),Me=n(Ie),Te=a(426),Pe=n(Te),Le=a(428),Ae=n(Le),Fe=a(430),Oe=n(Fe),Be=a(432),je=n(Be),Ge=a(435),qe=n(Ge),Ue=a(437),ze=n(Ue),Ve=a(439),We=n(Ve),He=a(441),Je=n(He),Ye=a(443),Qe=n(Ye),Ke=a(445),Xe=n(Ke),$e=a(447),Ze=n($e),et=a(449),tt=n(et),at=a(451),nt=n(at),ot=a(453),it=n(ot),st=a(455),rt=n(st),ct=a(457),lt=n(ct),dt=a(459),ut=n(dt),mt=a(461),pt=n(mt),ft=a(463),gt=n(ft),ht=a(465),vt=n(ht),_t=a(467),yt=n(_t),Et=a(469),bt=n(Et),Nt=a(471),Rt=n(Nt),kt=a(473),wt=n(kt),xt=a(475),Ct=n(xt),Dt=a(477),St=n(Dt),It=a(479),Mt=n(It),Tt=a(481),Pt=n(Tt),Lt=a(483),At=n(Lt),Ft=a(484),Ot=n(Ft),Bt=a(486),jt=n(Bt),Gt=a(488),qt=n(Gt),Ut=a(490),zt=n(Ut),Vt=a(492),Wt=n(Vt),Ht=a(494),Jt=n(Ht),Yt=a(496),Qt=n(Yt),Kt=a(498),Xt=n(Kt),$t=a(506),Zt=n($t),ea=a(508),ta=n(ea),aa=a(510),na=n(aa),oa=a(512),ia=n(oa),sa=a(514),ra=n(sa),ca=a(516),la=n(ca),da=a(518),ua=n(da),ma=a(520),pa=n(ma),fa=a(522),ga=n(fa),ha=a(524),va=n(ha),_a=a(526),ya=n(_a),Ea=a(528),ba=n(Ea),Na=a(532),Ra=n(Na),ka={loginPage:function(e){return React.createElement(i.default,e)},userInfoPage:function(e){return React.createElement(r.default,e)},userCenter:function(e){return React.createElement(l.default,e)},bindPhonePage:function(e){return React.createElement(u.default,e)},recharge:function(e){return React.createElement(p.default,e)},balance:function(e){return React.createElement(g.default,e)},goodsDetail:function(e){return React.createElement(v.default,e)},shoppingCart:function(e){return React.createElement(y.default,e)},goodsShoppingCart:function(e){return React.createElement(y.default,e)},myOrder:function(e){return React.createElement(b.default,e)},myAddress:function(e){return React.createElement(w.default,e)},goodsOrderDetail:function(e){return React.createElement(R.default,e)},goodsOrderProgress:function(e){return React.createElement(C.default,e)},logisticsPage:function(e){return React.createElement(S.default,e)},makeComment:function(e){return React.createElement(M.default,e)},previewGoodsRefund:function(e){return React.createElement(P.default,e)},goodsRefundPage:function(e){return React.createElement(A.default,e)},previewGoodsOrder:function(e){return React.createElement(O.default,e)},addAddress:function(e){return React.createElement(j.default,e)},goodsOrderPaySuccess:function(e){return React.createElement(q.default,e)},goodsComment:function(e){return React.createElement(z.default,e)},goodsAdditionalInfo:function(e){return React.createElement(W.default,e)},goodsFavorites:function(e){return React.createElement(J.default,e)},goodsFootPrint:function(e){return React.createElement(Q.default,e)},goodsCustomerService:function(e){return React.createElement(X.default,e)},goodsAfterSaleDetail:function(e){return React.createElement(Z.default,e)},searchAddress:function(e){return React.createElement(te.default,e)},couponList:function(e){return React.createElement(ne.default,e)},goodsReturnInfor:function(e){return React.createElement(ie.default,e)},goodsDeliveryList:function(e){return React.createElement(re.default,e)},goodsAlreadyRefunded:function(e){return React.createElement(le.default,e)},seckillDetail:function(e){return React.createElement(ue.default,e)},couponListPage:function(e){return React.createElement(pe.default,e)},couponGoodsListPage:function(e){return React.createElement(ge.default,e)},couponReceiveListPage:function(e){return React.createElement(ve.default,e)},vipCard:function(e){return React.createElement(ye.default,e)},vipBenefits:function(e){return React.createElement(be.default,e)},previewSeckillOrder:function(e){return React.createElement(Re.default,e)},transactionSuccess:function(e){return React.createElement(we.default,e)},sameJourneyLogistic:function(e){return React.createElement(Ce.default,e)},shareGifts:function(e){return React.createElement(Se.default,e)},diningOrderDetail:function(e){return React.createElement(Me.default,e)},refundDishesDetail:function(e){return React.createElement(Pe.default,e)},verificationCodePage:function(e){return React.createElement(Ae.default,e)},goodsSameJourney:function(e){return React.createElement(Oe.default,e)},memberDay:function(e){return React.createElement(je.default,e)},memberDayDetail:function(e){return React.createElement(qe.default,e)},memberDayList:function(e){return React.createElement(ze.default,e)},transferPage:function(e){return React.createElement(We.default,e)},couponDescription:function(e){return React.createElement(Je.default,e)},makeAppointment:function(e){return React.createElement(Qe.default,e)},transferOrderDetail:function(e){return React.createElement(Xe.default,e)},transferPaySuccess:function(e){return React.createElement(Ze.default,e)},myGroup:function(e){return React.createElement(tt.default,e)},previewAppointmentOrder:function(e){return React.createElement(nt.default,e)},appointmentOrderDetail:function(e){return React.createElement(it.default,e)},winningRecord:function(e){return React.createElement(rt.default,e)},myMessage:function(e){return React.createElement(lt.default,e)},myIntegral:function(e){return React.createElement(ut.default,e)},groupRules:function(e){return React.createElement(pt.default,e)},groupOrderDetail:function(e){return React.createElement(gt.default,e)},groupCenter:function(e){return React.createElement(vt.default,e)},vipCardList:function(e){return React.createElement(yt.default,e)},myFormMessage:function(e){return React.createElement(bt.default,e)},orderDetail:function(e){return React.createElement(Rt.default,e)},toStoreDetail:function(e){return React.createElement(wt.default,e)},couponDetail:function(e){return React.createElement(Ct.default,e)},bindCellphone:function(e){return React.createElement(St.default,e)},advanceSearch:function(e){return React.createElement(Mt.default,e)},extensionPage:function(e){return React.createElement(Pt.default,e)},mapDetail:function(e){return React.createElement(At.default,e)},paying:function(e){return React.createElement(Ot.default,e)},collectStars:function(e){return React.createElement(jt.default,e)},luckyWheelDetail:function(e){return React.createElement(qt.default,e)},glodenEggs:function(e){return React.createElement(zt.default,e)},scratch:function(e){return React.createElement(Wt.default,e)},numberOfStampsOrderDetail:function(e){return React.createElement(Jt.default,e)},numberOfStampsUsed:function(e){return React.createElement(Qt.default,e)},exchangeCouponDetail:function(e){return React.createElement(Xt.default,e)},exchangeCouponDetailOrder:function(e){return React.createElement(Zt.default,e)},checkRowNumberDetail:function(e){return React.createElement(ta.default,e)},previewRowNumberOrder:function(e){return React.createElement(na.default,e)},rowNumberOrderDetail:function(e){return React.createElement(ia.default,e)},gpgoodsDetail:function(e){return React.createElement(ra.default,e)},gpplaylaws:function(e){return React.createElement(la.default,e)},previewGroupOrder:function(e){return React.createElement(ua.default,e)},gppaySuccess:function(e){return React.createElement(pa.default,e)},gpmyOrder:function(e){return React.createElement(ga.default,e)},gporderDetail:function(e){return React.createElement(va.default,e)},previewPresellOrder:function(e){return React.createElement(ya.default,e)},presellPaySuccess:function(e){return React.createElement(ba.default,e)},presellOrderDetail:function(e){return React.createElement(Ra.default,e)}};t.default=ka},function(e,t,a){!function(t,a){e.exports=a()}(0,function(){"use strict";function e(e,t,a){a=a||{},a.childrenKeyName=a.childrenKeyName||"children";var n=e||[],o=[],i=0;do{var s=n.filter(function(e){return t(e,i)})[0];if(!s)break;o.push(s),n=s[a.childrenKeyName]||[],i+=1}while(n.length>0);return o}return e})},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(8),i=n(o),s=a(0),r=n(s),c=a(3),l=n(c),d=a(1),u=n(d),m=a(2),p=n(m),f=a(4),g=n(f),h=a(139),v=n(h),_=a(66),y=n(_),E=a(67),b=n(E),N=function(e){function t(){(0,r.default)(this,t);var e=(0,u.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.state={value:e.getValue(e.props.data,e.props.defaultValue||e.props.value)},e.onValueChange=function(t,a){var n=(0,v.default)(e.props.data,function(e,n){return n<=a&&e.value===t[n]}),o=n[a],i=void 0;for(i=a+1;o&&o.children&&o.children.length&&i<e.props.cols;i++)o=o.children[0],t[i]=o.value;t.length=i,e.setState({value:t}),e.props.onChange&&e.props.onChange(t)},e}return(0,p.default)(t,e),(0,l.default)(t,[{key:"componentWillReceiveProps",value:function(e){"value"in e&&this.setState({value:this.getValue(e.data,e.value)})}},{key:"getValue",value:function(e,t){var a=e||this.props.data,n=t||this.props.value||this.props.defaultValue;if(!n||!n.length||n.indexOf(void 0)>-1){n=[];for(var o=0;o<this.props.cols;o++)a&&a.length&&(n[o]=a[0].value,a=a[0].children)}return n}},{key:"getCols",value:function(){var e=this.props,t=e.data,a=e.cols,n=e.pickerPrefixCls,o=e.disabled,i=e.pickerItemStyle,s=e.indicatorStyle,r=this.state.value,c=(0,v.default)(t,function(e,t){return e.value===r[t]}).map(function(e){return e.children}),l=a-c.length;if(l>0)for(var d=0;d<l;d++)c.push([]);return c.length=a-1,c.unshift(t),c.map(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1];return g.default.createElement(b.default,{key:t,prefixCls:n,style:{flex:1},disabled:o,itemStyle:i,indicatorStyle:s},e.map(function(e){return g.default.createElement(b.default.Item,{value:e.value,key:e.value},e.label)}))})}},{key:"render",value:function(){var e=this.props,t=e.prefixCls,a=e.className,n=e.rootNativeProps,o=e.style,s=this.getCols(),r=(0,i.default)({flexDirection:"row",alignItems:"center"},o);return g.default.createElement(y.default,{style:r,prefixCls:t,className:a,selectedValue:this.state.value,rootNativeProps:n,onValueChange:this.onValueChange,onScrollChange:e.onScrollChange},s)}}]),t}(g.default.Component);N.defaultProps={cols:3,prefixCls:"rmc-cascader",pickerPrefixCls:"rmc-picker",data:[],disabled:!1},t.default=N,e.exports=t.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(4),i=n(o),s=a(128),r=n(s),c=a(244),l=n(c),d=a(56),u=n(d),m=function(e,t,a){var n=a.getContent,o=a.hide,s=a.onDismiss,c=a.onOk;if(!t)return null;var l=e.prefixCls;return i.default.createElement(r.default,{prefixCls:""+l,className:e.className||"",visible:!0,closable:!1,transitionName:e.transitionName||e.popupTransitionName,maskTransitionName:e.maskTransitionName,onClose:o,style:e.style},i.default.createElement("div",null,i.default.createElement("div",{className:l+"-header"},i.default.createElement(u.default,{activeClassName:l+"-item-active"},i.default.createElement("div",{className:l+"-item "+l+"-header-left",onClick:s},e.dismissText)),i.default.createElement("div",{className:l+"-item "+l+"-title"},e.title),i.default.createElement(u.default,{activeClassName:l+"-item-active"},i.default.createElement("div",{className:l+"-item "+l+"-header-right",onClick:c},e.okText))),n()))};t.default=(0,l.default)(m,{prefixCls:"rmc-picker-popup",WrapComponent:"span",triggerType:"onClick",pickerValueProp:"selectedValue",pickerValueChangeProp:"onValueChange"}),e.exports=t.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.canUseDOM=!("undefined"==typeof window||!window.document||!window.document.createElement);t.IS_IOS=n&&/iphone|ipad|ipod/i.test(window.navigator.userAgent)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(0),i=n(o),s=a(3),r=n(s),c=a(1),l=n(c),d=a(2),u=n(d),m=a(10),p=n(m),f=a(4),g=n(f),h=function(e){function t(){return(0,i.default)(this,t),(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,u.default)(t,e),(0,r.default)(t,[{key:"render",value:function(){var e=this.props,t=e.prefixCls,a=e.size,n=e.className,o=e.style,i=e.onClick,s=(0,p.default)(t,t+"-"+a,n);return g.default.createElement("div",{className:s,style:o,onClick:i})}}]),t}(g.default.Component);t.default=h,h.defaultProps={prefixCls:"am-whitespace",size:"md"},e.exports=t.default},function(e,t,a){"use strict";a(19),a(258)},function(e,t,a){"use strict";a(19),a(263)},function(e,t,a){"use strict";function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];var n=1,o=t[0],i=t.length;if("function"==typeof o)return o.apply(null,t.slice(1));if("string"==typeof o){for(var s=String(o).replace(ue,function(e){if("%%"===e)return"%";if(n>=i)return e;switch(e){case"%s":return String(t[n++]);case"%d":return Number(t[n++]);case"%j":try{return JSON.stringify(t[n++])}catch(e){return"[Circular]"}break;default:return e}}),r=t[n];n<i;r=t[++n])s+=" "+r;return s}return o}function o(e){return"string"===e||"url"===e||"hex"===e||"email"===e||"pattern"===e}function i(e,t){return void 0===e||null===e||(!("array"!==t||!Array.isArray(e)||e.length)||!(!o(t)||"string"!=typeof e||e))}function s(e,t,a){function n(e){o.push.apply(o,e),++i===s&&a(o)}var o=[],i=0,s=e.length;e.forEach(function(e){t(e,n)})}function r(e,t,a){function n(s){if(s&&s.length)return void a(s);var r=o;o+=1,r<i?t(e[r],n):a([])}var o=0,i=e.length;n([])}function c(e){var t=[];return Object.keys(e).forEach(function(a){t.push.apply(t,e[a])}),t}function l(e,t,a,n){if(t.first){return r(c(e),a,n)}var o=t.firstFields||[];!0===o&&(o=Object.keys(e));var i=Object.keys(e),l=i.length,d=0,u=[],m=function(e){u.push.apply(u,e),++d===l&&n(u)};i.forEach(function(t){var n=e[t];-1!==o.indexOf(t)?r(n,a,m):s(n,a,m)})}function d(e){return function(t){return t&&t.message?(t.field=t.field||e.fullField,t):{message:t,field:t.field||e.fullField}}}function u(e,t){if(t)for(var a in t)if(t.hasOwnProperty(a)){var n=t[a];"object"===(void 0===n?"undefined":de()(n))&&"object"===de()(e[a])?e[a]=ae()({},e[a],n):e[a]=n}return e}function m(e,t,a,o,s,r){!e.required||a.hasOwnProperty(e.field)&&!i(t,r||e.type)||o.push(n(s.messages.required,e.fullField))}function p(e,t,a,o,i){(/^\s+$/.test(t)||""===t)&&o.push(n(i.messages.whitespace,e.fullField))}function f(e,t,a,o,i){if(e.required&&void 0===t)return void pe(e,t,a,o,i);var s=["integer","float","array","regexp","object","method","email","number","date","url","hex"],r=e.type;s.indexOf(r)>-1?he[r](t)||o.push(n(i.messages.types[r],e.fullField,e.type)):r&&(void 0===t?"undefined":de()(t))!==e.type&&o.push(n(i.messages.types[r],e.fullField,e.type))}function g(e,t,a,o,i){var s="number"==typeof e.len,r="number"==typeof e.min,c="number"==typeof e.max,l=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,d=t,u=null,m="number"==typeof t,p="string"==typeof t,f=Array.isArray(t);if(m?u="number":p?u="string":f&&(u="array"),!u)return!1;f&&(d=t.length),p&&(d=t.replace(l,"_").length),s?d!==e.len&&o.push(n(i.messages[u].len,e.fullField,e.len)):r&&!c&&d<e.min?o.push(n(i.messages[u].min,e.fullField,e.min)):c&&!r&&d>e.max?o.push(n(i.messages[u].max,e.fullField,e.max)):r&&c&&(d<e.min||d>e.max)&&o.push(n(i.messages[u].range,e.fullField,e.min,e.max))}function h(e,t,a,o,i){e[ye]=Array.isArray(e[ye])?e[ye]:[],-1===e[ye].indexOf(t)&&o.push(n(i.messages[ye],e.fullField,e[ye].join(", ")))}function v(e,t,a,o,i){if(e.pattern)if(e.pattern instanceof RegExp)e.pattern.lastIndex=0,e.pattern.test(t)||o.push(n(i.messages.pattern.mismatch,e.fullField,t,e.pattern));else if("string"==typeof e.pattern){var s=new RegExp(e.pattern);s.test(t)||o.push(n(i.messages.pattern.mismatch,e.fullField,t,e.pattern))}}function _(e,t,a,n,o){var s=[];if(e.required||!e.required&&n.hasOwnProperty(e.field)){if(i(t,"string")&&!e.required)return a();Ne.required(e,t,n,s,o,"string"),i(t,"string")||(Ne.type(e,t,n,s,o),Ne.range(e,t,n,s,o),Ne.pattern(e,t,n,s,o),!0===e.whitespace&&Ne.whitespace(e,t,n,s,o))}a(s)}function y(e,t,a,n,o){var s=[];if(e.required||!e.required&&n.hasOwnProperty(e.field)){if(i(t)&&!e.required)return a();Ne.required(e,t,n,s,o),void 0!==t&&Ne.type(e,t,n,s,o)}a(s)}function E(e,t,a,n,o){var s=[];if(e.required||!e.required&&n.hasOwnProperty(e.field)){if(i(t)&&!e.required)return a();Ne.required(e,t,n,s,o),void 0!==t&&(Ne.type(e,t,n,s,o),Ne.range(e,t,n,s,o))}a(s)}function b(e,t,a,n,o){var s=[];if(e.required||!e.required&&n.hasOwnProperty(e.field)){if(i(t)&&!e.required)return a();Ne.required(e,t,n,s,o),void 0!==t&&Ne.type(e,t,n,s,o)}a(s)}function N(e,t,a,n,o){var s=[];if(e.required||!e.required&&n.hasOwnProperty(e.field)){if(i(t)&&!e.required)return a();Ne.required(e,t,n,s,o),i(t)||Ne.type(e,t,n,s,o)}a(s)}function R(e,t,a,n,o){var s=[];if(e.required||!e.required&&n.hasOwnProperty(e.field)){if(i(t)&&!e.required)return a();Ne.required(e,t,n,s,o),void 0!==t&&(Ne.type(e,t,n,s,o),Ne.range(e,t,n,s,o))}a(s)}function k(e,t,a,n,o){var s=[];if(e.required||!e.required&&n.hasOwnProperty(e.field)){if(i(t)&&!e.required)return a();Ne.required(e,t,n,s,o),void 0!==t&&(Ne.type(e,t,n,s,o),Ne.range(e,t,n,s,o))}a(s)}function w(e,t,a,n,o){var s=[];if(e.required||!e.required&&n.hasOwnProperty(e.field)){if(i(t,"array")&&!e.required)return a();Ne.required(e,t,n,s,o,"array"),i(t,"array")||(Ne.type(e,t,n,s,o),Ne.range(e,t,n,s,o))}a(s)}function x(e,t,a,n,o){var s=[];if(e.required||!e.required&&n.hasOwnProperty(e.field)){if(i(t)&&!e.required)return a();Ne.required(e,t,n,s,o),void 0!==t&&Ne.type(e,t,n,s,o)}a(s)}function C(e,t,a,n,o){var s=[];if(e.required||!e.required&&n.hasOwnProperty(e.field)){if(i(t)&&!e.required)return a();Ne.required(e,t,n,s,o),t&&Ne[Te](e,t,n,s,o)}a(s)}function D(e,t,a,n,o){var s=[];if(e.required||!e.required&&n.hasOwnProperty(e.field)){if(i(t,"string")&&!e.required)return a();Ne.required(e,t,n,s,o),i(t,"string")||Ne.pattern(e,t,n,s,o)}a(s)}function S(e,t,a,n,o){var s=[];if(e.required||!e.required&&n.hasOwnProperty(e.field)){if(i(t)&&!e.required)return a();if(Ne.required(e,t,n,s,o),!i(t)){var r=void 0;r="number"==typeof t?new Date(t):t,Ne.type(e,r,n,s,o),r&&Ne.range(e,r.getTime(),n,s,o)}}a(s)}function I(e,t,a,n,o){var i=[],s=Array.isArray(t)?"array":void 0===t?"undefined":de()(t);Ne.required(e,t,n,i,o,s),a(i)}function M(e,t,a,n,o){var s=e.type,r=[];if(e.required||!e.required&&n.hasOwnProperty(e.field)){if(i(t,s)&&!e.required)return a();Ne.required(e,t,n,r,o,s),i(t,s)||Ne.type(e,t,n,r,o)}a(r)}function T(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var e=JSON.parse(JSON.stringify(this));return e.clone=this.clone,e}}}function P(e){this.rules=null,this._messages=je,this.define(e)}function L(e){return e.displayName||e.name||"WrappedComponent"}function A(e,t){return e.displayName="Form("+L(t)+")",e.WrappedComponent=t,et()(e,t)}function F(e){if(!e||!e.target)return e;var t=e.target;return"checkbox"===t.type?t.checked:t.value}function O(e){return e?e.map(function(e){return e&&e.message?e.message:e}):e}function B(e){return 0===Object.keys(e).length}function j(e){return Array.prototype.concat.apply([],e)}function G(e){return e}function q(e){return!!e&&e.some(function(e){return!!e.rules&&e.rules.length})}function U(e,t,a){var n=e,o=a,i=t;return void 0===a&&("function"==typeof n?(o=n,i={},n=void 0):Array.isArray(e)?"function"==typeof i?(o=i,i={}):i=i||{}:(o=i,i=n||{},n=void 0)),{names:n,callback:o,options:i}}function z(e){var t=e.indexOf(tt),a=e.indexOf(at),n=void 0;return-1===t&&-1===a?{name:e}:(n=-1===t?a:-1===a?t:Math.min(t,a),{name:e.slice(0,n),isNested:!0})}function V(e){var t={};return e.forEach(function(e){t[z(e).name]=1}),Object.keys(t)}function W(e,t,a){a[e]&&a[e].virtual&&Object.keys(t).forEach(function(a){z(a).name===e&&delete t[a]})}function H(e){var t={};return Object.keys(e).forEach(function(a){var n=e[a].leadingName;n&&e[n].virtual&&(n in t?t[n].push(a):t[n]=[a])}),t}function J(e,t,a){var n=e.map(function(e){var t=ae()({},e,{trigger:e.trigger||[]});return"string"==typeof t.trigger&&(t.trigger=[t.trigger]),t});return t&&n.push({trigger:a?[].concat(a):[],rules:t}),n}function Y(e){return new ot(e)}function Q(){function e(e){return A(ce()({displayName:"Form",mixins:a,getInitialState:function(){var e=this,t=s&&s(this.props);return this.fieldsStore=Y(t||{}),this.instances={},this.cachedBind={},["getFieldsValue","getFieldValue","setFieldsInitialValue","getFieldsError","getFieldError","isFieldValidating","isFieldsValidating","isFieldsTouched","isFieldTouched"].forEach(function(t){return e[t]=function(){var a;return Ue()(!1,"you should not use `ref` on enhanced form, please use `wrappedComponentRef`. See: https://github.com/react-component/form#note-use-wrappedcomponentref-instead-of-withref-after-rc-form140"),(a=e.fieldsStore)[t].apply(a,arguments)}}),{submitting:!1}},componentWillReceiveProps:function(e){s&&this.fieldsStore.updateFields(s(e))},onCollectCommon:function(e,t,a){var n=e,o=this.fieldsStore.getFieldMeta(n);if(o[t])o[t].apply(o,oe()(a));else if(o.originalProps&&o.originalProps[t]){var i;(i=o.originalProps)[t].apply(i,oe()(a))}var s=o.getValueFromEvent?o.getValueFromEvent.apply(o,oe()(a)):F.apply(void 0,oe()(a));c&&s!==this.fieldsStore.getFieldValue(n)&&c(this.props,Ye()({},n,s));var r=z(n);this.fieldsStore.getFieldMeta(r.name).exclusive&&(n=r.name);var l=this.fieldsStore.getField(n);return{name:n,field:ae()({},l,{value:s,touched:!0}),fieldMeta:o}},onCollect:function(e,t){for(var a=arguments.length,n=Array(a>2?a-2:0),o=2;o<a;o++)n[o-2]=arguments[o];var i=this.onCollectCommon(e,t,n),s=i.name,r=i.field,c=i.fieldMeta,l=c.validate,d=ae()({},r,{dirty:q(l)});this.setFields(ee()({},s,d))},onCollectValidate:function(e,t){for(var a=arguments.length,n=Array(a>2?a-2:0),o=2;o<a;o++)n[o-2]=arguments[o];var i=this.onCollectCommon(e,t,n),s=i.field,r=i.fieldMeta,c=ae()({},s,{dirty:!0});this.validateFieldsInternal([c],{action:t,options:{firstFields:!!r.validateFirst}})},getCacheBind:function(e,t,a){var n=this.cachedBind[e]=this.cachedBind[e]||{};return n[t]||(n[t]=a.bind(this,e,t)),n[t]},getFieldDecorator:function(e,t){var a=this,n=this.getFieldProps(e,t);return function(t){var o=a.fieldsStore.getFieldMeta(e),i=t.props;return o.originalProps=i,o.ref=t.ref,se.a.cloneElement(t,ae()({},n,a.fieldsStore.getFieldValuePropValue(o)))}},getFieldProps:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)throw new Error("Must call `getFieldProps` with valid name string!");var n=z(e),o=n.name,i=ae()({valuePropName:"value",validate:[],trigger:st,leadingName:o,name:e},a),s=i.rules,r=i.trigger,c=i.validateTrigger,m=void 0===c?r:c,p=i.exclusive,f=i.validate,g=this.fieldsStore.getFieldMeta(e);"initialValue"in i&&(g.initialValue=i.initialValue);var h=this.fieldsStore.getFieldMeta(o);n.isNested&&(h.virtual=!p,h.hidden=!p,h.exclusive=p);var v=ae()({},this.fieldsStore.getFieldValuePropValue(i),{ref:this.getCacheBind(e,e+"__ref",this.saveRef)});l&&(v[l]=e);var _=J(f,s,m),y=_.filter(function(e){return!!e.rules&&e.rules.length}).map(function(e){return e.trigger}).reduce(function(e,t){return e.concat(t)},[]);y.forEach(function(a){v[a]||(v[a]=t.getCacheBind(e,a,t.onCollectValidate))}),r&&-1===y.indexOf(r)&&(v[r]=this.getCacheBind(e,r,this.onCollect));var E=ae()({},g,i,{validate:_});return this.fieldsStore.setFieldMeta(e,E),d&&(v[d]=E),u&&(v[u]=this.fieldsStore.getField(e)),v},getFieldInstance:function(e){return this.instances[e]},getRules:function(e,t){return j(e.validate.filter(function(e){return!t||e.trigger.indexOf(t)>=0}).map(function(e){return e.rules}))},setFields:function(e){var t=this;if(this.fieldsStore.setFields(e),r){var a={};Object.keys(e).forEach(function(e){a[e]=t.fieldsStore.getField(e)}),r(this.props,a)}this.forceUpdate()},resetFields:function(e){var t=this.fieldsStore.resetFields(e);Object.keys(t).length>0&&this.setFields(t)},setFieldsValue:function(e){c&&c(this.props,e);var t={},a=this.fieldsStore,n=a.fieldsMeta,o=a.fields,i=H(n);Object.keys(e).forEach(function(a){var s=e[a];if(n[a]&&n[a].virtual){W(a,o,n);for(var r=0,c=i[a].length;r<c;r++){var l=i[a][r];He()(e,l)&&(t[l]={name:l,value:Ve()(e,l)})}}else n[a]?t[a]={name:a,value:s}:Ue()(!1,"Cannot use `setFieldsValue` until you use `getFieldDecorator` or `getFieldProps` to register it.")}),this.setFields(t)},saveRef:function(e,t,a){if(!a)return this.fieldsStore.clearField(e),delete this.instances[e],void delete this.cachedBind[e];var n=this.fieldsStore.getFieldMeta(e);if(n){var o=n.ref;if(o){if("string"==typeof o)throw new Error("can not set ref string for "+e);o(a)}}this.instances[e]=a},validateFieldsInternal:function(e,t,a){var o=this,i=t.fieldNames,s=t.action,r=t.options,c=void 0===r?{}:r,l={},d={},u={},m={};if(e.forEach(function(e){var t=e.name;if(!0!==c.force&&!1===e.dirty)return void(e.errors&&Ye()(m,t,{errors:e.errors}));var a=o.fieldsStore.getFieldMeta(t),n=ae()({},e);n.errors=void 0,n.validating=!0,n.dirty=!0,l[t]=o.getRules(a,s),d[t]=n.value,u[t]=n}),this.setFields(u),Object.keys(d).forEach(function(e){d[e]=o.fieldsStore.getFieldValue(e)}),a&&B(u))return void a(B(m)?null:m,this.fieldsStore.getFieldsValue(V(i)));var p=new Ge(l);n&&p.messages(n),p.validate(d,c,function(e){var t=ae()({},m);e&&e.length&&e.forEach(function(e){var a=e.field;He()(t,a)||Ye()(t,a,{errors:[]}),Ve()(t,a.concat(".errors")).push(e)});var n=[],s={};Object.keys(l).forEach(function(e){var a=Ve()(t,e),i=o.fieldsStore.getField(e);i.value!==d[e]?n.push({name:e}):(i.errors=a&&a.errors,i.value=d[e],i.validating=!1,i.dirty=!1,s[e]=i)}),o.setFields(s),a&&(n.length&&n.forEach(function(e){var a=e.name,n=[{message:a+" need to revalidate",field:a}];Ye()(t,a,{expired:!0,errors:n})}),a(B(t)?null:t,o.fieldsStore.getFieldsValue(V(i))))})},validateFields:function(e,t,a){var n=this,o=U(e,t,a),i=o.names,s=o.callback,r=o.options,c=i||this.fieldsStore.getValidFieldsName(),l=c.filter(function(e){return q(n.fieldsStore.getFieldMeta(e).validate)}).map(function(e){var t=n.fieldsStore.getField(e);return t.value=n.fieldsStore.getFieldValue(e),t});if(!l.length)return void(s&&s(null,this.fieldsStore.getFieldsValue(V(c))));"firstFields"in r||(r.firstFields=c.filter(function(e){return!!n.fieldsStore.getFieldMeta(e).validateFirst})),this.validateFieldsInternal(l,{fieldNames:c,options:r},s)},isSubmitting:function(){return this.state.submitting},submit:function(e){var t=this,a=function(){t.setState({submitting:!1})};this.setState({submitting:!0}),e(a)},render:function(){var t=this.props,a=t.wrappedComponentRef,n=$()(t,["wrappedComponentRef"]),o=ee()({},p,this.getForm());f?(Ue()(!1,"`withRef` is deprecated, please use `wrappedComponentRef` instead. See: https://github.com/react-component/form#note-use-wrappedcomponentref-instead-of-withref-after-rc-form140"),o.ref="wrappedComponent"):a&&(o.ref=a);var s=i.call(this,ae()({},o,n));return se.a.createElement(e,s)}}),e)}var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=t.validateMessages,o=t.mapProps,i=void 0===o?G:o,s=t.mapPropsToFields,r=t.onFieldsChange,c=t.onValuesChange,l=t.fieldNameProp,d=t.fieldMetaProp,u=t.fieldDataProp,m=t.formPropName,p=void 0===m?"form":m,f=t.withRef;return e}function K(e){return rt(e,[ct])}Object.defineProperty(t,"__esModule",{value:!0});var X=a(51),$=a.n(X),Z=a(9),ee=a.n(Z),te=a(8),ae=a.n(te),ne=a(36),oe=a.n(ne),ie=a(4),se=a.n(ie),re=a(271),ce=a.n(re),le=a(13),de=a.n(le),ue=/%[sdj%]/g,me=function(){},pe=m,fe=p,ge={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,url:new RegExp("^(?!mailto:)(?:(?:http|https|ftp)://|//)(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))|localhost)(?::\\d{2,5})?(?:(/|\\?|#)[^\\s]*)?$","i"),hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},he={integer:function(e){return he.number(e)&&parseInt(e,10)===e},float:function(e){return he.number(e)&&!he.integer(e)},array:function(e){return Array.isArray(e)},regexp:function(e){if(e instanceof RegExp)return!0;try{return!!new RegExp(e)}catch(e){return!1}},date:function(e){return"function"==typeof e.getTime&&"function"==typeof e.getMonth&&"function"==typeof e.getYear},number:function(e){return!isNaN(e)&&"number"==typeof e},object:function(e){return"object"===(void 0===e?"undefined":de()(e))&&!he.array(e)},method:function(e){return"function"==typeof e},email:function(e){return"string"==typeof e&&!!e.match(ge.email)&&e.length<255},url:function(e){return"string"==typeof e&&!!e.match(ge.url)},hex:function(e){return"string"==typeof e&&!!e.match(ge.hex)}},ve=f,_e=g,ye="enum",Ee=h,be=v,Ne={required:pe,whitespace:fe,type:ve,range:_e,enum:Ee,pattern:be},Re=_,ke=y,we=E,xe=b,Ce=N,De=R,Se=k,Ie=w,Me=x,Te="enum",Pe=C,Le=D,Ae=S,Fe=I,Oe=M,Be={string:Re,method:ke,number:we,boolean:xe,regexp:Ce,integer:De,float:Se,array:Ie,object:Me,enum:Pe,pattern:Le,date:Ae,url:Oe,hex:Oe,email:Oe,required:Fe},je=T();P.prototype={messages:function(e){return e&&(this._messages=u(T(),e)),this._messages},define:function(e){if(!e)throw new Error("Cannot configure a schema with no rules");if("object"!==(void 0===e?"undefined":de()(e))||Array.isArray(e))throw new Error("Rules must be an object");this.rules={};var t=void 0,a=void 0;for(t in e)e.hasOwnProperty(t)&&(a=e[t],this.rules[t]=Array.isArray(a)?a:[a])},validate:function(e){function t(e){var t=void 0,a=void 0,n=[],o={};for(t=0;t<e.length;t++)!function(e){Array.isArray(e)?n=n.concat.apply(n,e):n.push(e)}(e[t]);if(n.length)for(t=0;t<n.length;t++)a=n[t].field,o[a]=o[a]||[],o[a].push(n[t]);else n=null,o=null;c(n,o)}var a=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments[2],s=e,r=o,c=i;if("function"==typeof r&&(c=r,r={}),!this.rules||0===Object.keys(this.rules).length)return void(c&&c());if(r.messages){var m=this.messages();m===je&&(m=T()),u(m,r.messages),r.messages=m}else r.messages=this.messages();var p=void 0,f=void 0,g={};(r.keys||Object.keys(this.rules)).forEach(function(t){p=a.rules[t],f=s[t],p.forEach(function(n){var o=n;"function"==typeof o.transform&&(s===e&&(s=ae()({},s)),f=s[t]=o.transform(f)),o="function"==typeof o?{validator:o}:ae()({},o),o.validator=a.getValidationMethod(o),o.field=t,o.fullField=o.fullField||t,o.type=a.getType(o),o.validator&&(g[t]=g[t]||[],g[t].push({rule:o,value:f,source:s,field:t}))})});var h={};l(g,r,function(e,t){function a(e,t){return ae()({},t,{fullField:i.fullField+"."+e})}function o(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],c=o;if(Array.isArray(c)||(c=[c]),c.length&&P.warning("async-validator:",c),c.length&&i.message&&(c=[].concat(i.message)),c=c.map(d(i)),r.first&&c.length)return h[i.field]=1,t(c);if(s){if(i.required&&!e.value)return c=i.message?[].concat(i.message).map(d(i)):r.error?[r.error(i,n(r.messages.required,i.field))]:[],t(c);var l={};if(i.defaultField)for(var u in e.value)e.value.hasOwnProperty(u)&&(l[u]=i.defaultField);l=ae()({},l,e.rule.fields);for(var m in l)if(l.hasOwnProperty(m)){var p=Array.isArray(l[m])?l[m]:[l[m]];l[m]=p.map(a.bind(null,m))}var f=new P(l);f.messages(r.messages),e.rule.options&&(e.rule.options.messages=r.messages,e.rule.options.error=r.error),f.validate(e.value,e.rule.options||r,function(e){t(e&&e.length?c.concat(e):e)})}else t(c)}var i=e.rule,s=!("object"!==i.type&&"array"!==i.type||"object"!==de()(i.fields)&&"object"!==de()(i.defaultField));s=s&&(i.required||!i.required&&e.value),i.field=e.field;var c=i.validator(i,e.value,o,e.source,r);c&&c.then&&c.then(function(){return o()},function(e){return o(e)})},function(e){t(e)})},getType:function(e){if(void 0===e.type&&e.pattern instanceof RegExp&&(e.type="pattern"),"function"!=typeof e.validator&&e.type&&!Be.hasOwnProperty(e.type))throw new Error(n("Unknown rule type %s",e.type));return e.type||"string"},getValidationMethod:function(e){if("function"==typeof e.validator)return e.validator;var t=Object.keys(e),a=t.indexOf("message");return-1!==a&&t.splice(a,1),1===t.length&&"required"===t[0]?Be.required:Be[this.getType(e)]||!1}},P.register=function(e,t){if("function"!=typeof t)throw new Error("Cannot register a validator by type, validator is not a function");Be[e]=t},P.warning=me,P.messages=je;var Ge=P,qe=a(18),Ue=a.n(qe),ze=a(150),Ve=a.n(ze),We=a(152),He=a.n(We),Je=a(154),Ye=a.n(Je),Qe=a(0),Ke=a.n(Qe),Xe=a(3),$e=a.n(Xe),Ze=a(117),et=a.n(Ze),tt=".",at="[",nt={},ot=function(){function e(t){Ke()(this,e),it.call(this),this.fields=t,this.fieldsMeta={}}return $e()(e,[{key:"updateFields",value:function(e){ae()(this.fields,e)}},{key:"setFields",value:function(e){var t=this,a=this.fieldsMeta,n=ae()({},this.fields,e),o={};Object.keys(a).forEach(function(e){var i=z(e),s=i.name;i.isNested&&a[s].exclusive||(o[e]=t.getValueFromFields(e,n))}),Object.keys(o).forEach(function(e){var i=o[e],s=a[e];if(s&&s.normalize){var r=s.normalize(i,t.getValueFromFields(e,t.fields),o);r!==i&&(n[e]=ae()({},n[e],{value:r}))}}),this.fields=n}},{key:"resetFields",value:function(e){var t={},a=this.fields;return(e||Object.keys(a)).forEach(function(e){var n=a[e];n&&"value"in n&&(t[e]={})}),t}},{key:"getValueFromFieldsInternal",value:function(e,t){var a=t[e];if(a&&"value"in a)return a.value;var n=this.fieldsMeta[e];return n&&n.initialValue}},{key:"getValueFromFields",value:function(e,t){var a=this,n=this.fieldsMeta;if(n[e]&&n[e].virtual){var o={};return Object.keys(n).forEach(function(n){var i=z(n);i.name===e&&i.isNested&&Ye()(o,n,a.getValueFromFieldsInternal(n,t))}),o[e]}return this.getValueFromFieldsInternal(e,t)}},{key:"getValidFieldsName",value:function(){var e=this.fieldsMeta;return e?Object.keys(e).filter(function(t){return!e[t].hidden}):[]}},{key:"getFieldValuePropValue",value:function(e){var t=e.exclusive,a=e.leadingName,n=e.name,o=e.getValueProps,i=e.valuePropName,s=this.fieldsMeta,r=t?this.getField(a):this.getField(n),c=nt;return r&&"value"in r&&(c=r.value),c===nt&&(c=t?s[a].initialValue:e.initialValue),o?o(c):ee()({},i,c)}},{key:"getField",value:function(e){return ae()({},this.fields[e],{name:e})}},{key:"getFieldMember",value:function(e,t){return this.getField(e)[t]}},{key:"getFieldMeta",value:function(e){return this.fieldsMeta[e]||(this.fieldsMeta[e]={}),this.fieldsMeta[e]}},{key:"setFieldMeta",value:function(e,t){this.fieldsMeta[e]=t}},{key:"clearField",value:function(e){delete this.fields[e],delete this.fieldsMeta[e]}}]),e}(),it=function(){var e=this;this.getFieldsValue=function(t){var a=t||V(e.getValidFieldsName()),n={};return a.forEach(function(t){Ye()(n,t,e.getFieldValue(t))}),n},this.getFieldValue=function(t){var a=e.fields;return e.getValueFromFields(t,a)},this.getFieldsError=function(t){var a=t||V(e.getValidFieldsName()),n={};return a.forEach(function(t){Ye()(n,t,e.getFieldError(t))}),n},this.getFieldError=function(t){return O(e.getFieldMember(t,"errors"))},this.setFieldsInitialValue=function(t){var a=e.fieldsMeta,n=H(a);Object.keys(t).forEach(function(e){if(a[e]&&a[e].virtual)for(var o=0,i=n[e].length;o<i;o++){var s=n[e][o];He()(t,s)&&(a[s]=ae()({},a[s],{initialValue:Ve()(t,s)}))}else a[e]&&(a[e]=ae()({},a[e],{initialValue:t[e]}))})},this.isFieldValidating=function(t){return e.getFieldMember(t,"validating")},this.isFieldsValidating=function(t){return(t||e.getValidFieldsName()).some(function(t){return e.isFieldValidating(t)})},this.isFieldTouched=function(t){return e.getFieldMember(t,"touched")},this.isFieldsTouched=function(t){return(t||e.getValidFieldsName()).some(function(t){return e.isFieldTouched(t)})}},st="onChange",rt=Q,ct={getForm:function(){return{getFieldsValue:this.fieldsStore.getFieldsValue,getFieldValue:this.fieldsStore.getFieldValue,getFieldInstance:this.getFieldInstance,setFieldsValue:this.setFieldsValue,setFields:this.setFields,setFieldsInitialValue:this.fieldsStore.setFieldsInitialValue,getFieldDecorator:this.getFieldDecorator,getFieldProps:this.getFieldProps,getFieldsError:this.fieldsStore.getFieldsError,getFieldError:this.fieldsStore.getFieldError,isFieldValidating:this.fieldsStore.isFieldValidating,isFieldsValidating:this.fieldsStore.isFieldsValidating,isFieldsTouched:this.fieldsStore.isFieldsTouched,isFieldTouched:this.fieldsStore.isFieldTouched,isSubmitting:this.isSubmitting,submit:this.submit,validateFields:this.validateFields,resetFields:this.resetFields}}},lt=K;a.d(t,"createForm",function(){return lt})},function(e,t,a){var n=a(148),o=a(29)("iterator"),i=a(55);e.exports=a(20).getIteratorMethod=function(e){if(void 0!=e)return e[o]||e["@@iterator"]||i[n(e)]}},function(e,t,a){var n=a(77),o=a(29)("toStringTag"),i="Arguments"==n(function(){return arguments}()),s=function(e,t){try{return e[t]}catch(e){}};e.exports=function(e){var t,a,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(a=s(t=Object(e),o))?a:i?n(t):"Object"==(r=n(t))&&"function"==typeof t.callee?"Arguments":r}},function(e,t,a){"use strict";function n(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}/*
object-assign
(c) Sindre Sorhus
@license MIT
*/
var o=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},a=0;a<10;a++)t["_"+String.fromCharCode(a)]=a;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(e){n[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var a,r,c=n(e),l=1;l<arguments.length;l++){a=Object(arguments[l]);for(var d in a)i.call(a,d)&&(c[d]=a[d]);if(o){r=o(a);for(var u=0;u<r.length;u++)s.call(a,r[u])&&(c[r[u]]=a[r[u]])}}return c}},function(e,t,a){function n(e,t,a){var n=null==e?void 0:o(e,t);return void 0===n?a:n}var o=a(275);e.exports=n},function(e,t){function a(e,t){return e===t||e!==e&&t!==t}e.exports=a},function(e,t,a){function n(e,t){return null!=e&&i(e,t,o)}var o=a(312),i=a(313);e.exports=n},function(e,t){function a(e,t){var a=typeof e;return!!(t=null==t?n:t)&&("number"==a||"symbol"!=a&&o.test(e))&&e>-1&&e%1==0&&e<t}var n=9007199254740991,o=/^(?:0|[1-9]\d*)$/;e.exports=a},function(e,t,a){function n(e,t,a){return null==e?e:o(e,t,a)}var o=a(317);e.exports=n},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(8),i=n(o),s=a(0),r=n(s),c=a(3),l=n(c),d=a(1),u=n(d),m=a(2),p=n(m),f=a(10),g=n(f),h=a(156),v=n(h),_=a(4),y=n(_),E=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&(a[n[o]]=e[n[o]]);return a},b=function(e){function t(){return(0,r.default)(this,t),(0,u.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,p.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this.props,t=e.className,a=e.style,n=E(e,["className","style"]),o=n.prefixCls,s=n.children,r=(0,g.default)(o+"-wrapper",t);"class"in n&&delete n.class;var c=y.default.createElement("label",{className:r,style:a},y.default.createElement(v.default,(0,i.default)({},n,{type:"radio"})),s);return this.props.wrapLabel?c:y.default.createElement(v.default,(0,i.default)({},this.props,{type:"radio"}))}}]),t}(y.default.Component);t.default=b,b.defaultProps={prefixCls:"am-radio",wrapLabel:!0},e.exports=t.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(8),o=a.n(n),i=a(9),s=a.n(i),r=a(51),c=a.n(r),l=a(0),d=a.n(l),u=a(3),m=a.n(u),p=a(1),f=a.n(p),g=a(2),h=a.n(g),v=a(4),_=a.n(v),y=a(14),E=a.n(y),b=a(330),N=a.n(b),R=a(10),k=a.n(R),w=function(e){function t(e){d()(this,t);var a=f()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));x.call(a);var n="checked"in e?e.checked:e.defaultChecked;return a.state={checked:n},a}return h()(t,e),m()(t,[{key:"componentWillReceiveProps",value:function(e){"checked"in e&&this.setState({checked:e.checked})}},{key:"shouldComponentUpdate",value:function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return N.a.shouldComponentUpdate.apply(this,t)}},{key:"render",value:function(){var e,t=this.props,a=t.prefixCls,n=t.className,i=t.style,r=t.name,l=t.type,d=t.disabled,u=t.readOnly,m=t.tabIndex,p=t.onClick,f=t.onFocus,g=t.onBlur,h=c()(t,["prefixCls","className","style","name","type","disabled","readOnly","tabIndex","onClick","onFocus","onBlur"]),v=Object.keys(h).reduce(function(e,t){return"aria-"!==t.substr(0,5)&&"data-"!==t.substr(0,5)&&"role"!==t||(e[t]=h[t]),e},{}),y=this.state.checked,E=k()(a,n,(e={},s()(e,a+"-checked",y),s()(e,a+"-disabled",d),e));return _.a.createElement("span",{className:E,style:i},_.a.createElement("input",o()({name:r,type:l,readOnly:u,disabled:d,tabIndex:m,className:a+"-input",checked:!!y,onClick:p,onFocus:f,onBlur:g,onChange:this.handleChange},v)),_.a.createElement("span",{className:a+"-inner"}))}}]),t}(_.a.Component);w.propTypes={prefixCls:E.a.string,className:E.a.string,style:E.a.object,name:E.a.string,type:E.a.string,defaultChecked:E.a.oneOfType([E.a.number,E.a.bool]),checked:E.a.oneOfType([E.a.number,E.a.bool]),disabled:E.a.bool,onFocus:E.a.func,onBlur:E.a.func,onChange:E.a.func,onClick:E.a.func,tabIndex:E.a.string,readOnly:E.a.bool},w.defaultProps={prefixCls:"rc-checkbox",className:"",style:{},type:"checkbox",defaultChecked:!1,onFocus:function(){},onBlur:function(){},onChange:function(){}};var x=function(){var e=this;this.handleChange=function(t){var a=e.props;a.disabled||("checked"in a||e.setState({checked:t.target.checked}),a.onChange({target:o()({},a,{checked:t.target.checked}),stopPropagation:function(){t.stopPropagation()},preventDefault:function(){t.preventDefault()}}))}},C=w;a.d(t,"default",function(){return C})},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.SinkingModal=void 0;var o=a(0),i=n(o),s=a(3),r=n(s),c=a(1),l=n(c),d=a(2),u=n(d),m=a(4),p=n(m),f=a(28),g=n(f),h=a(5),v=a(15);a(352);t.SinkingModal=function(e){function t(e){(0,i.default)(this,t);var a=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.getUserSetNoticesList=function(){var e=a,t={};h.appMethod.sendRequest({url:"/index.php?r=EventMessage/GetEventNoticeList",hideLoading:!0,success:function(a){var n=a.data;if(!n||"[]"===JSON.stringify(n)||"{}"===JSON.stringify(n))return!1;t["sinkingModalData.id"]=a.id;var o=n.page_url;o="string"==typeof o?JSON.parse(o):o,t["sinkingModalData.eventParams"]=o,t["sinkingModalData.showModal"]=!0,t["sinkingModalData.isSinking"]=!0,t["sinkingModalData.pushContent"]=n.content||"",e.setData(t),setTimeout(function(){e.setData({"sinkingModalData.isSinking":!1})},3e3)},fail:function(e){console.log(e)}})},a.tapEventCommonHandler=function(e){var t=a.data.sinkingModalData.id||"",n=e.currentTarget.dataset.eventParams;n=JSON.parse(n),h.appMethod.sendRequest({url:"/index.php?r=EventMessage/SetMsgReadById",hideLoading:!0,data:{msg_id:t},success:function(){n&&n.action&&"none"!=n.action&&(0,v.customEvent)({customFeature:n})}})},a.state={sinkingModalData:{showModal:!1,isSinking:!1,pushContent:"",eventParams:{}}},a}return(0,u.default)(t,e),(0,r.default)(t,[{key:"componentDidMount",value:function(){this.getUserSetNoticesList()}},{key:"render",value:function(){var e=this.state.sinkingModalData;return e.showModal?p.default.createElement("div",{className:"common-component sinking-modal-wrap "+(e.isSinking?"show-modal":"hide-modal"),onClick:this.tapEventCommonHandler,"data-event-params":JSON.stringify(e.eventParams)},p.default.createElement("div",{className:"sinking-modal"},p.default.createElement("span",{className:"tip-txt"},e.pushContent),e.eventParams&&p.default.createElement("span",{className:"btn-txt"},"查看"))):null}}]),t}(g.default)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=a(499),i=n(o),s=a(502),r=n(s);t.default=function(){function e(e,t){var a=[],n=!0,o=!1,i=void 0;try{for(var s,c=(0,r.default)(e);!(n=(s=c.next()).done)&&(a.push(s.value),!t||a.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{!n&&c.return&&c.return()}finally{if(o)throw i}}return a}return function(t,a){if(Array.isArray(t))return t;if((0,i.default)(Object(t)))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=a(565),i=n(o),s=a(568),r=n(s);t.default=function e(t,a,n){null===t&&(t=Function.prototype);var o=(0,r.default)(t,a);if(void 0===o){var s=(0,i.default)(t);return null===s?void 0:e(s,a,n)}if("value"in o)return o.value;var c=o.get;if(void 0!==c)return c.call(n)}},function(e,t,a){var n=a(41),o=a(20),i=a(54);e.exports=function(e,t){var a=(o.Object||{})[e]||Object[e],s={};s[e]=t(a),n(n.S+n.F*i(function(){a(1)}),"Object",s)}},function(e,t,a){"use strict";function n(e,t){return Object.keys(t).some(function(a){return e.target===(0,h.findDOMNode)(t[a])})}function o(e,t){var a=t.min,n=t.max;return e<a||e>n}function i(e){return e.touches.length>1||"touchend"===e.type.toLowerCase()&&e.touches.length>0}function s(e,t){var a=t.marks,n=t.step,o=t.min,i=Object.keys(a).map(parseFloat);if(null!==n){var s=Math.round((e-o)/n)*n+o;i.push(s)}var r=i.map(function(t){return Math.abs(e-t)});return i[r.indexOf(Math.min.apply(Math,(0,g.default)(r)))]}function r(e){var t=e.toString(),a=0;return t.indexOf(".")>=0&&(a=t.length-t.indexOf(".")-1),a}function c(e,t){return e?t.clientY:t.pageX}function l(e,t){return e?t.touches[0].clientY:t.touches[0].pageX}function d(e,t){var a=t.getBoundingClientRect();return e?a.top+.5*a.height:a.left+.5*a.width}function u(e,t){var a=t.max,n=t.min;return e<=n?n:e>=a?a:e}function m(e,t){var a=t.step,n=s(e,t);return null===a?n:parseFloat(n.toFixed(r(a)))}function p(e){e.stopPropagation(),e.preventDefault()}Object.defineProperty(t,"__esModule",{value:!0});var f=a(36),g=function(e){return e&&e.__esModule?e:{default:e}}(f);t.isEventFromHandle=n,t.isValueOutOfRange=o,t.isNotTouchEvent=i,t.getClosestPoint=s,t.getPrecision=r,t.getMousePosition=c,t.getTouchPosition=l,t.getHandleCenterPosition=d,t.ensureValueInRange=u,t.ensureValuePrecision=m,t.pauseEvent=p;var h=a(24)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultTabBar=void 0;var o=a(3),i=n(o),s=a(8),r=n(s),c=a(0),l=n(c),d=a(1),u=n(d),m=a(2),p=n(m),f=a(4),g=n(f),h=a(682),v=t.DefaultTabBar=function(e){function t(){return(0,l.default)(this,t),(0,u.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,p.default)(t,e),t}(h.DefaultTabBar);v.defaultProps=(0,r.default)({},h.DefaultTabBar.defaultProps,{prefixCls:"am-tabs-default-bar"});var _=function(e){function t(){(0,l.default)(this,t);var e=(0,u.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.renderTabBar=function(t){var a=e.props.renderTab;return g.default.createElement(v,(0,r.default)({},t,{renderTab:a}))},e}return(0,p.default)(t,e),(0,i.default)(t,[{key:"render",value:function(){return g.default.createElement(h.Tabs,(0,r.default)({renderTabBar:this.renderTabBar},this.props))}}]),t}(g.default.PureComponent);t.default=_,_.DefaultTabBar=v,_.defaultProps={prefixCls:"am-tabs"}},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(9),i=n(o),s=a(0),r=n(s),c=a(3),l=n(c),d=a(1),u=n(d),m=a(2),p=n(m),f=a(10),g=n(f),h=a(4),v=n(h),_=function(e){function t(){return(0,r.default)(this,t),(0,u.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,p.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e,t=this.props,a=t.prefixCls,n=t.className,o=t.animating,s=t.toast,r=t.size,c=t.text,l=(0,g.default)(a,n,(e={},(0,i.default)(e,a+"-lg","large"===r),(0,i.default)(e,a+"-sm","small"===r),(0,i.default)(e,a+"-toast",!!s),e)),d=(0,g.default)(a+"-spinner",(0,i.default)({},a+"-spinner-lg",!!s||"large"===r));return o?s?v.default.createElement("div",{className:l},c?v.default.createElement("div",{className:a+"-content"},v.default.createElement("span",{className:d,"aria-hidden":"true"}),v.default.createElement("span",{className:a+"-toast"},c)):v.default.createElement("div",{className:a+"-content"},v.default.createElement("span",{className:d,"aria-label":"Loading"}))):c?v.default.createElement("div",{className:l},v.default.createElement("span",{className:d,"aria-hidden":"true"}),v.default.createElement("span",{className:a+"-tip"},c)):v.default.createElement("div",{className:l},v.default.createElement("span",{className:d,"aria-label":"loading"})):null}}]),t}(v.default.Component);t.default=_,_.defaultProps={prefixCls:"am-activity-indicator",animating:!0,size:"small",panelColor:"rgba(34,34,34,0.6)",toast:!1},e.exports=t.default},function(e,t,a){"use strict";a(19),a(683)},function(e,t,a){"use strict";a(19),a(684)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var o=a(4),i=n(o),s=a(24),r=n(s),c=a(115),l=a(74),d=a(541),u=n(d);a(753),r.default.render(i.default.createElement(c.Router,{history:l.history},i.default.createElement(u.default,null)),document.getElementById("app"))},function(e,t,a){"use strict";function n(){}function o(){}var i=a(168);o.resetWarningCache=n,e.exports=function(){function e(e,t,a,n,o,s){if(s!==i){var r=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw r.name="Invariant Violation",r}}function t(){return e}e.isRequired=e;var a={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:n};return a.PropTypes=a,a}},function(e,t,a){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},function(e,t,a){e.exports={default:a(171),__esModule:!0}},function(e,t,a){a(172),e.exports=a(20).Object.assign},function(e,t,a){var n=a(41);n(n.S+n.F,"Object",{assign:a(174)})},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,a){"use strict";var n=a(59),o=a(83),i=a(62),s=a(63),r=a(121),c=Object.assign;e.exports=!c||a(54)(function(){var e={},t={},a=Symbol(),n="abcdefghijklmnopqrst";return e[a]=7,n.split("").forEach(function(e){t[e]=e}),7!=c({},e)[a]||Object.keys(c({},t)).join("")!=n})?function(e,t){for(var a=s(e),c=arguments.length,l=1,d=o.f,u=i.f;c>l;)for(var m,p=r(arguments[l++]),f=d?n(p).concat(d(p)):n(p),g=f.length,h=0;g>h;)u.call(p,m=f[h++])&&(a[m]=p[m]);return a}:c},function(e,t,a){var n=a(50),o=a(122),i=a(176);e.exports=function(e){return function(t,a,s){var r,c=n(t),l=o(c.length),d=i(s,l);if(e&&a!=a){for(;l>d;)if((r=c[d++])!=r)return!0}else for(;l>d;d++)if((e||d in c)&&c[d]===a)return e||d||0;return!e&&-1}}},function(e,t,a){var n=a(79),o=Math.max,i=Math.min;e.exports=function(e,t){return e=n(e),e<0?o(e+t,0):i(e,t)}},function(e,t,a){a(178);var n=a(20).Object;e.exports=function(e,t,a){return n.defineProperty(e,t,a)}},function(e,t,a){var n=a(41);n(n.S+n.F*!a(48),"Object",{defineProperty:a(43).f})},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){function a(){c.default.unmountComponentAtNode(l),l&&l.parentNode&&l.parentNode.removeChild(l)}function n(e){if(/iPhone|iPod|iPad/i.test(navigator.userAgent)){(0,d.default)(e.target,"."+p+"-footer")||e.preventDefault()}}var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[{text:"确定"}],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"ios",r=!1;if(!e&&!t)return{close:function(){}};var l=document.createElement("div");document.body.appendChild(l);var u=o.map(function(e){var t=e.onPress||function(){};return e.onPress=function(){if(!r){var e=t();e&&e.then?e.then(function(){r=!0,a()}).catch(function(){}):(r=!0,a())}},e}),p="am-modal";return c.default.render(s.default.createElement(m.default,{visible:!0,transparent:!0,title:e,transitionName:"am-zoom",closable:!1,maskClosable:!1,footer:u,maskTransitionName:"am-fade",platform:i,wrapProps:{onTouchStart:n}},s.default.createElement("div",{className:p+"-alert-content"},t)),l),{close:a}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var i=a(4),s=n(i),r=a(24),c=n(r),l=a(85),d=n(l),u=a(64),m=n(u);e.exports=t.default},function(e,t,a){e.exports={default:a(181),__esModule:!0}},function(e,t,a){a(65),a(88),e.exports=a(89).f("iterator")},function(e,t,a){var n=a(79),o=a(78);e.exports=function(e){return function(t,a){var i,s,r=String(o(t)),c=n(a),l=r.length;return c<0||c>=l?e?"":void 0:(i=r.charCodeAt(c),i<55296||i>56319||c+1===l||(s=r.charCodeAt(c+1))<56320||s>57343?e?r.charAt(c):i:e?r.slice(c,c+2):s-56320+(i-55296<<10)+65536)}}},function(e,t,a){"use strict";var n=a(86),o=a(57),i=a(87),s={};a(52)(s,a(29)("iterator"),function(){return this}),e.exports=function(e,t,a){e.prototype=n(s,{next:o(1,a)}),i(e,t+" Iterator")}},function(e,t,a){var n=a(43),o=a(47),i=a(59);e.exports=a(48)?Object.defineProperties:function(e,t){o(e);for(var a,s=i(t),r=s.length,c=0;r>c;)n.f(e,a=s[c++],t[a]);return e}},function(e,t,a){var n=a(42).document;e.exports=n&&n.documentElement},function(e,t,a){"use strict";var n=a(187),o=a(188),i=a(55),s=a(50);e.exports=a(124)(Array,"Array",function(e,t){this._t=s(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,a=this._i++;return!e||a>=e.length?(this._t=void 0,o(1)):"keys"==t?o(0,a):"values"==t?o(0,e[a]):o(0,[a,e[a]])},"values"),i.Arguments=i.Array,n("keys"),n("values"),n("entries")},function(e,t){e.exports=function(){}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,a){e.exports={default:a(190),__esModule:!0}},function(e,t,a){a(191),a(196),a(197),a(198),e.exports=a(20).Symbol},function(e,t,a){"use strict";var n=a(42),o=a(49),i=a(48),s=a(41),r=a(125),c=a(192).KEY,l=a(54),d=a(81),u=a(87),m=a(61),p=a(29),f=a(89),g=a(90),h=a(193),v=a(194),_=a(47),y=a(53),E=a(50),b=a(76),N=a(57),R=a(86),k=a(195),w=a(91),x=a(43),C=a(59),D=w.f,S=x.f,I=k.f,M=n.Symbol,T=n.JSON,P=T&&T.stringify,L=p("_hidden"),A=p("toPrimitive"),F={}.propertyIsEnumerable,O=d("symbol-registry"),B=d("symbols"),j=d("op-symbols"),G=Object.prototype,q="function"==typeof M,U=n.QObject,z=!U||!U.prototype||!U.prototype.findChild,V=i&&l(function(){return 7!=R(S({},"a",{get:function(){return S(this,"a",{value:7}).a}})).a})?function(e,t,a){var n=D(G,t);n&&delete G[t],S(e,t,a),n&&e!==G&&S(G,t,n)}:S,W=function(e){var t=B[e]=R(M.prototype);return t._k=e,t},H=q&&"symbol"==typeof M.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof M},J=function(e,t,a){return e===G&&J(j,t,a),_(e),t=b(t,!0),_(a),o(B,t)?(a.enumerable?(o(e,L)&&e[L][t]&&(e[L][t]=!1),a=R(a,{enumerable:N(0,!1)})):(o(e,L)||S(e,L,N(1,{})),e[L][t]=!0),V(e,t,a)):S(e,t,a)},Y=function(e,t){_(e);for(var a,n=h(t=E(t)),o=0,i=n.length;i>o;)J(e,a=n[o++],t[a]);return e},Q=function(e,t){return void 0===t?R(e):Y(R(e),t)},K=function(e){var t=F.call(this,e=b(e,!0));return!(this===G&&o(B,e)&&!o(j,e))&&(!(t||!o(this,e)||!o(B,e)||o(this,L)&&this[L][e])||t)},X=function(e,t){if(e=E(e),t=b(t,!0),e!==G||!o(B,t)||o(j,t)){var a=D(e,t);return!a||!o(B,t)||o(e,L)&&e[L][t]||(a.enumerable=!0),a}},$=function(e){for(var t,a=I(E(e)),n=[],i=0;a.length>i;)o(B,t=a[i++])||t==L||t==c||n.push(t);return n},Z=function(e){for(var t,a=e===G,n=I(a?j:E(e)),i=[],s=0;n.length>s;)!o(B,t=n[s++])||a&&!o(G,t)||i.push(B[t]);return i};q||(M=function(){if(this instanceof M)throw TypeError("Symbol is not a constructor!");var e=m(arguments.length>0?arguments[0]:void 0),t=function(a){this===G&&t.call(j,a),o(this,L)&&o(this[L],e)&&(this[L][e]=!1),V(this,e,N(1,a))};return i&&z&&V(G,e,{configurable:!0,set:t}),W(e)},r(M.prototype,"toString",function(){return this._k}),w.f=X,x.f=J,a(127).f=k.f=$,a(62).f=K,a(83).f=Z,i&&!a(60)&&r(G,"propertyIsEnumerable",K,!0),f.f=function(e){return W(p(e))}),s(s.G+s.W+s.F*!q,{Symbol:M});for(var ee="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),te=0;ee.length>te;)p(ee[te++]);for(var ae=C(p.store),ne=0;ae.length>ne;)g(ae[ne++]);s(s.S+s.F*!q,"Symbol",{for:function(e){return o(O,e+="")?O[e]:O[e]=M(e)},keyFor:function(e){if(!H(e))throw TypeError(e+" is not a symbol!");for(var t in O)if(O[t]===e)return t},useSetter:function(){z=!0},useSimple:function(){z=!1}}),s(s.S+s.F*!q,"Object",{create:Q,defineProperty:J,defineProperties:Y,getOwnPropertyDescriptor:X,getOwnPropertyNames:$,getOwnPropertySymbols:Z}),T&&s(s.S+s.F*(!q||l(function(){var e=M();return"[null]"!=P([e])||"{}"!=P({a:e})||"{}"!=P(Object(e))})),"JSON",{stringify:function(e){for(var t,a,n=[e],o=1;arguments.length>o;)n.push(arguments[o++]);if(a=t=n[1],(y(t)||void 0!==e)&&!H(e))return v(t)||(t=function(e,t){if("function"==typeof a&&(t=a.call(this,e,t)),!H(t))return t}),n[1]=t,P.apply(T,n)}}),M.prototype[A]||a(52)(M.prototype,A,M.prototype.valueOf),u(M,"Symbol"),u(Math,"Math",!0),u(n.JSON,"JSON",!0)},function(e,t,a){var n=a(61)("meta"),o=a(53),i=a(49),s=a(43).f,r=0,c=Object.isExtensible||function(){return!0},l=!a(54)(function(){return c(Object.preventExtensions({}))}),d=function(e){s(e,n,{value:{i:"O"+ ++r,w:{}}})},u=function(e,t){if(!o(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!i(e,n)){if(!c(e))return"F";if(!t)return"E";d(e)}return e[n].i},m=function(e,t){if(!i(e,n)){if(!c(e))return!0;if(!t)return!1;d(e)}return e[n].w},p=function(e){return l&&f.NEED&&c(e)&&!i(e,n)&&d(e),e},f=e.exports={KEY:n,NEED:!1,fastKey:u,getWeak:m,onFreeze:p}},function(e,t,a){var n=a(59),o=a(83),i=a(62);e.exports=function(e){var t=n(e),a=o.f;if(a)for(var s,r=a(e),c=i.f,l=0;r.length>l;)c.call(e,s=r[l++])&&t.push(s);return t}},function(e,t,a){var n=a(77);e.exports=Array.isArray||function(e){return"Array"==n(e)}},function(e,t,a){var n=a(50),o=a(127).f,i={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],r=function(e){try{return o(e)}catch(e){return s.slice()}};e.exports.f=function(e){return s&&"[object Window]"==i.call(e)?r(e):o(n(e))}},function(e,t){},function(e,t,a){a(90)("asyncIterator")},function(e,t,a){a(90)("observable")},function(e,t,a){e.exports={default:a(200),__esModule:!0}},function(e,t,a){a(201),e.exports=a(20).Object.setPrototypeOf},function(e,t,a){var n=a(41);n(n.S,"Object",{setPrototypeOf:a(202).set})},function(e,t,a){var n=a(53),o=a(47),i=function(e,t){if(o(e),!n(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,n){try{n=a(75)(Function.call,a(91).f(Object.prototype,"__proto__").set,2),n(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,a){return i(e,a),t?e.__proto__=a:n(e,a),e}}({},!1):void 0),check:i}},function(e,t,a){e.exports={default:a(204),__esModule:!0}},function(e,t,a){a(205);var n=a(20).Object;e.exports=function(e,t){return n.create(e,t)}},function(e,t,a){var n=a(41);n(n.S,"Object",{create:a(86)})},function(e,t,a){function n(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}try{var o=a(130)}catch(e){var o=a(130)}var i=/\s+/,s=Object.prototype.toString;e.exports=function(e){return new n(e)},n.prototype.add=function(e){if(this.list)return this.list.add(e),this;var t=this.array();return~o(t,e)||t.push(e),this.el.className=t.join(" "),this},n.prototype.remove=function(e){if("[object RegExp]"==s.call(e))return this.removeMatching(e);if(this.list)return this.list.remove(e),this;var t=this.array(),a=o(t,e);return~a&&t.splice(a,1),this.el.className=t.join(" "),this},n.prototype.removeMatching=function(e){for(var t=this.array(),a=0;a<t.length;a++)e.test(t[a])&&this.remove(t[a]);return this},n.prototype.toggle=function(e,t){return this.list?(void 0!==t?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this):(void 0!==t?t?this.add(e):this.remove(e):this.has(e)?this.remove(e):this.add(e),this)},n.prototype.array=function(){var e=this.el.getAttribute("class")||"",t=e.replace(/^\s+|\s+$/g,""),a=t.split(i);return""===a[0]&&a.shift(),a},n.prototype.has=n.prototype.contains=function(e){return this.list?this.list.contains(e):!!~o(this.array(),e)}},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(){function e(){c.default.unmountComponentAtNode(i),i&&i.parentNode&&i.parentNode.removeChild(i)}function t(e){if(/iPhone|iPod|iPad/i.test(navigator.userAgent)){(0,d.default)(e.target,".am-modal-footer")||e.preventDefault()}}var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[{text:"确定"}],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ios",o=!1,i=document.createElement("div");document.body.appendChild(i);var r=a.map(function(t){var a=t.onPress||function(){};return t.onPress=function(){if(!o){var t=a();t&&t.then?t.then(function(){o=!0,e()}).catch(function(){}):(o=!0,e())}},t});return c.default.render(s.default.createElement(m.default,{visible:!0,operation:!0,transparent:!0,prefixCls:"am-modal",transitionName:"am-zoom",closable:!1,maskClosable:!0,onClose:e,footer:r,maskTransitionName:"am-fade",className:"am-modal-operation",platform:n,wrapProps:{onTouchStart:t}}),i),{close:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var i=a(4),s=n(i),r=a(24),c=n(r),l=a(85),d=n(l),u=a(64),m=n(u);e.exports=t.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t,a){function n(e){var t=e.target,a=t.getAttribute("type");null!==a&&(_[a]=t.value)}function o(e){var t=e.currentTarget||e.target;t&&t.focus()}function i(){c.default.unmountComponentAtNode(N),N&&N.parentNode&&N.parentNode.removeChild(N)}function r(e){if("function"==typeof e){var t=_.text,a=void 0===t?"":t,n=_.password,o=void 0===n?"":n,i="login-password"===u?[a,o]:"secure-text"===u?[o]:[a];return e.apply(void 0,i)}}function l(e){if(/iPhone|iPod|iPad/i.test(navigator.userAgent)){(0,d.default)(e.target,"."+v+"-content")||e.preventDefault()}}var u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"default",p=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",f=arguments.length>5&&void 0!==arguments[5]?arguments[5]:["",""],g=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"ios",h=!1;if(p="string"==typeof p?p:"number"==typeof p?""+p:"",!a)return{close:function(){}};var v="am-modal",_={text:p},y=void 0,E=function(e){setTimeout(function(){e&&e.focus()},500)};switch(u){case"login-password":y=s.default.createElement("div",{className:v+"-input-container"},s.default.createElement("div",{className:v+"-input"},s.default.createElement("label",null,s.default.createElement("input",{type:"text",defaultValue:_.text,ref:function(e){return E(e)},onClick:o,onChange:n,placeholder:f[0]}))),s.default.createElement("div",{className:v+"-input"},s.default.createElement("label",null,s.default.createElement("input",{type:"password",defaultValue:_.password,onClick:o,onChange:n,placeholder:f[1]}))));break;case"secure-text":y=s.default.createElement("div",{className:v+"-input-container"},s.default.createElement("div",{className:v+"-input"},s.default.createElement("label",null,s.default.createElement("input",{type:"password",defaultValue:_.password,ref:function(e){return E(e)},onClick:o,onChange:n,placeholder:f[0]}))));break;case"default":default:y=s.default.createElement("div",{className:v+"-input-container"},s.default.createElement("div",{className:v+"-input"},s.default.createElement("label",null,s.default.createElement("input",{type:"text",defaultValue:_.text,ref:function(e){return E(e)},onClick:o,onChange:n,placeholder:f[0]}))))}var b=s.default.createElement("div",null,t,y),N=document.createElement("div");document.body.appendChild(N);var R=void 0;R="function"==typeof a?[{text:"取消",onPress:function(){}},{text:"确定",onPress:function(){r(a)}}]:a.map(function(e){return{text:e.text,onPress:function(){return r(e.onPress)}}});var k=R.map(function(e){var t=e.onPress||function(){};return e.onPress=function(){if(!h){var e=t();e&&e.then?e.then(function(){h=!0,i()}).catch(function(){}):(h=!0,i())}},e});return c.default.render(s.default.createElement(m.default,{visible:!0,transparent:!0,prefixCls:v,title:e,closable:!1,maskClosable:!1,transitionName:"am-zoom",footer:k,maskTransitionName:"am-fade",platform:g,wrapProps:{onTouchStart:l}},s.default.createElement("div",{className:v+"-propmt-content"},b)),N),{close:i}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var i=a(4),s=n(i),r=a(24),c=n(r),l=a(85),d=n(l),u=a(64),m=n(u);e.exports=t.default},function(e,t,a){"use strict";function n(){var e=[].slice.call(arguments,0);return 1===e.length?e[0]:function(){for(var t=0;t<e.length;t++)e[t]&&e[t].apply&&e[t].apply(this,arguments)}}function o(){return"rcNotification_"+M+"_"+I++}Object.defineProperty(t,"__esModule",{value:!0});var i=a(51),s=a.n(i),r=a(9),c=a.n(r),l=a(8),d=a.n(l),u=a(0),m=a.n(u),p=a(3),f=a.n(p),g=a(1),h=a.n(g),v=a(2),_=a.n(v),y=a(4),E=a.n(y),b=a(14),N=a.n(b),R=a(24),k=a.n(R),w=a(129),x=a(10),C=a.n(x),D=function(e){function t(){var e,a,n,o;m()(this,t);for(var i=arguments.length,s=Array(i),r=0;r<i;r++)s[r]=arguments[r];return a=n=h()(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),n.close=function(){n.clearCloseTimer(),n.props.onClose()},n.startCloseTimer=function(){n.props.duration&&(n.closeTimer=setTimeout(function(){n.close()},1e3*n.props.duration))},n.clearCloseTimer=function(){n.closeTimer&&(clearTimeout(n.closeTimer),n.closeTimer=null)},o=a,h()(n,o)}return _()(t,e),f()(t,[{key:"componentDidMount",value:function(){this.startCloseTimer()}},{key:"componentWillUnmount",value:function(){this.clearCloseTimer()}},{key:"render",value:function(){var e,t=this.props,a=t.prefixCls+"-notice",n=(e={},c()(e,""+a,1),c()(e,a+"-closable",t.closable),c()(e,t.className,!!t.className),e);return E.a.createElement("div",{className:C()(n),style:t.style},E.a.createElement("div",{className:a+"-content"},t.children),t.closable?E.a.createElement("a",{tabIndex:"0",onClick:this.close,className:a+"-close"},E.a.createElement("span",{className:a+"-close-x"})):null)}}]),t}(y.Component);D.propTypes={duration:N.a.number,onClose:N.a.func,children:N.a.any},D.defaultProps={onEnd:function(){},onClose:function(){},duration:1.5,style:{right:"50%"}};var S=D,I=0,M=Date.now(),T=function(e){function t(){var e,a,n,i;m()(this,t);for(var s=arguments.length,r=Array(s),c=0;c<s;c++)r[c]=arguments[c];return a=n=h()(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r))),n.state={notices:[]},n.add=function(e){var t=e.key=e.key||o();n.setState(function(a){var n=a.notices;if(!n.filter(function(e){return e.key===t}).length)return{notices:n.concat(e)}})},n.remove=function(e){n.setState(function(t){return{notices:t.notices.filter(function(t){return t.key!==e})}})},i=a,h()(n,i)}return _()(t,e),f()(t,[{key:"getTransitionName",value:function(){var e=this.props,t=e.transitionName;return!t&&e.animation&&(t=e.prefixCls+"-"+e.animation),t}},{key:"render",value:function(){var e,t=this,a=this.props,o=this.state.notices.map(function(e){var o=n(t.remove.bind(t,e.key),e.onClose);return E.a.createElement(S,d()({prefixCls:a.prefixCls},e,{onClose:o}),e.content)}),i=(e={},c()(e,a.prefixCls,1),c()(e,a.className,!!a.className),e);return E.a.createElement("div",{className:C()(i),style:a.style},E.a.createElement(w.a,{transitionName:this.getTransitionName()},o))}}]),t}(y.Component);T.propTypes={prefixCls:N.a.string,transitionName:N.a.string,animation:N.a.oneOfType([N.a.string,N.a.object]),style:N.a.object},T.defaultProps={prefixCls:"rmc-notification",animation:"fade",style:{top:65,left:"50%"}},T.newInstance=function(e,t){function a(e){c||(c=!0,t({notice:function(t){e.add(t)},removeNotice:function(t){e.remove(t)},component:e,destroy:function(){k.a.unmountComponentAtNode(r),o||document.body.removeChild(r)}}))}var n=e||{},o=n.getContainer,i=s()(n,["getContainer"]),r=void 0;o?r=o():(r=document.createElement("div"),document.body.appendChild(r));var c=!1;k.a.render(E.a.createElement(T,d()({},i,{ref:a})),r)};var P=T;t.default=P},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return'\n  <svg\n    xmlns="http://www.w3.org/2000/svg"\n    xmlns:xlink="http://www.w3.org/1999/xlink"\n    id="__ANTD_MOBILE_SVG_SPRITE_NODE__"\n    style="position:absolute;width:0;height:0"\n  >\n    <defs>\n      '+e+"\n    </defs>\n  </svg>\n"},o={check:'<svg viewBox="0 0 44 44"><path fill-rule="evenodd" d="M34.538 8L38 11.518 17.808 32 8 22.033l3.462-3.518 6.346 6.45z"/></svg>',"check-circle":'<svg viewBox="0 0 48 48"><path d="M24 48c13.255 0 24-10.745 24-24S37.255 0 24 0 0 10.745 0 24s10.745 24 24 24zM13.1 23.2l-2.2 2.1 10 9.9L38.1 15l-2.2-2-15.2 17.8-7.6-7.6z" fill-rule="evenodd"/></svg>',"check-circle-o":'<svg viewBox="0 0 48 48"><g fill-rule="evenodd"><path d="M24 48c13.255 0 24-10.745 24-24S37.255 0 24 0 0 10.745 0 24s10.745 24 24 24zm0-3c11.598 0 21-9.402 21-21S35.598 3 24 3 3 12.402 3 24s9.402 21 21 21z"/><path d="M12.2 23.2L10 25.3l10 9.9L37.2 15 35 13 19.8 30.8z"/></g></svg>',cross:'<svg viewBox="0 0 44 44"><path fill-rule="evenodd" d="M24.008 21.852l8.97-8.968L31.092 11l-8.97 8.968L13.157 11l-1.884 1.884 8.968 8.968-9.24 9.24 1.884 1.885 9.24-9.24 9.24 9.24 1.885-1.884-9.24-9.24z"/></svg>',"cross-circle":'<svg viewBox="0 0 48 48"><g fill-rule="evenodd"><path d="M24 48c13.255 0 24-10.745 24-24S37.255 0 24 0 0 10.745 0 24s10.745 24 24 24zm0-3c11.598 0 21-9.402 21-21S35.598 3 24 3 3 12.402 3 24s9.402 21 21 21z"/><path d="M24.34 22.22l-7.775-7.775a1.5 1.5 0 1 0-2.12 2.12l7.773 7.775-7.774 7.775a1.5 1.5 0 1 0 2.12 2.12l7.775-7.773 7.774 7.774a1.5 1.5 0 1 0 2.12-2.12L26.46 24.34l7.774-7.774a1.5 1.5 0 1 0-2.12-2.12l-7.776 7.773z"/></g></svg>',"cross-circle-o":'<svg viewBox="0 0 48 48"><path d="M24 48c13.255 0 24-10.745 24-24S37.255 0 24 0 0 10.745 0 24s10.745 24 24 24zm.353-25.77l-7.593-7.593c-.797-.8-1.538-.822-2.263-.207-.724.614-.56 1.617-.124 2.067l7.852 7.847-7.72 7.723c-.727.728-.56 1.646-.066 2.177.493.532 1.553.683 2.31-.174l7.588-7.584 7.644 7.623c.796.798 1.608.724 2.21.145.605-.58.72-1.442-.074-2.24l-7.657-7.67 7.545-7.52c.81-.697.9-1.76.297-2.34-.92-.885-1.85-.338-2.264.078l-7.685 7.667z" fill-rule="evenodd"/></svg>',left:'<svg viewBox="0 0 44 44"><defs><path id="a" d="M-129-845h24v24h-24z"/></defs><clipPath id="b"><use xlink:href="#a" overflow="visible"/></clipPath><g clip-path="url(#b)"><defs><path id="c" d="M-903-949H947V996H-903z"/></defs></g><path d="M16.247 21.4L28.48 9.165l2.12 2.12-10.117 10.12L30.6 31.524l-2.12 2.12-12.233-12.232.007-.006z"/></svg>',right:'<svg viewBox="0 0 44 44"><defs><path id="a" d="M-129-845h24v24h-24z"/></defs><clipPath id="b"><use xlink:href="#a" overflow="visible"/></clipPath><g clip-path="url(#b)"><defs><path id="c" d="M-903-949H947V996H-903z"/></defs></g><path d="M30.6 21.4L18.37 9.165l-2.12 2.12 10.117 10.12-10.118 10.118 2.12 2.12 12.234-12.232-.005-.006z"/></svg>',down:'<svg viewBox="0 0 44 44"><path d="M22.355 28.237l-11.483-10.9c-.607-.576-1.714-.396-2.48.41l.674-.71c-.763.802-.73 2.07-.282 2.496l11.37 10.793-.04.04 2.088 2.195L23.3 31.52l12.308-11.682c.447-.425.48-1.694-.282-2.496l.674.71c-.766-.806-1.873-.986-2.48-.41L22.355 28.237z" fill-rule="evenodd"/></svg>',up:'<svg viewBox="0 0 44 44"><path fill="none" d="M-1-1h46v46H-1z"/><defs><path id="a" d="M-129-845h24v24h-24z"/></defs><clipPath id="b"><use xlink:href="#a"/></clipPath><g clip-path="url(#b)"><defs><path id="c" d="M-903-949H947V996H-903z"/></defs></g><path d="M23.417 14.23L11.184 26.46l2.12 2.12 10.12-10.117 10.118 10.118 2.12-2.12L23.43 14.228l-.006.005z"/></svg>',loading:'<svg viewBox="0 -2 59.75 60.25"><path fill="#ccc" d="M29.69-.527C14.044-.527 1.36 12.158 1.36 27.806S14.043 56.14 29.69 56.14c15.65 0 28.334-12.686 28.334-28.334S45.34-.527 29.69-.527zm.185 53.75c-14.037 0-25.417-11.38-25.417-25.417S15.838 2.39 29.875 2.39s25.417 11.38 25.417 25.417-11.38 25.416-25.417 25.416z"/><path fill="none" stroke="#108ee9" stroke-width="3" stroke-linecap="round" stroke-miterlimit="10" d="M56.587 29.766c.37-7.438-1.658-14.7-6.393-19.552"/></svg>',search:'<svg viewBox="0 0 44 44"><path d="M32.98 29.255l8.915 8.293L39.603 40l-8.86-8.242a15.952 15.952 0 0 1-10.753 4.147C11.16 35.905 4 28.763 4 19.952 4 11.142 11.16 4 19.99 4s15.99 7.142 15.99 15.952c0 3.472-1.112 6.685-3 9.303zm.05-9.21c0 7.123-5.7 12.918-12.88 12.918-7.176 0-13.015-5.795-13.015-12.918 0-7.12 5.84-12.917 13.017-12.917 7.178 0 12.88 5.797 12.88 12.917z" fill-rule="evenodd"/></svg>',ellipsis:'<svg viewBox="0 0 44 44"><circle cx="21.888" cy="22" r="4.045"/><circle cx="5.913" cy="22" r="4.045"/><circle cx="37.863" cy="22" r="4.045"/></svg>',"ellipsis-circle":'<svg viewBox="0 0 44 44"><g fill-rule="evenodd"><path d="M22.13.11C10.05.11.255 9.902.255 21.983S10.05 43.86 22.13 43.86s21.875-9.795 21.875-21.876S34.21.11 22.13.11zm0 40.7c-10.396 0-18.825-8.43-18.825-18.826S11.735 3.16 22.13 3.16c10.396 0 18.825 8.428 18.825 18.824S32.525 40.81 22.13 40.81z"/><circle cx="21.888" cy="22.701" r="2.445"/><circle cx="12.23" cy="22.701" r="2.445"/><circle cx="31.546" cy="22.701" r="2.445"/></g></svg>',"exclamation-circle":'<svg viewBox="0 0 64 64"><path d="M59.58 40.89L41.193 9.11C39.135 5.382 35.723 3 31.387 3c-3.11 0-6.52 2.382-8.58 6.11L4.42 40.89c-2.788 4.635-3.126 8.81-1.225 12.22C5.015 56.208 7.572 58 13 58h36.773c5.428 0 9.21-1.792 11.03-4.89 1.9-3.41 1.565-7.583-1.224-12.22zm-2.452 11c-.635 1.694-3.802 2.443-7.354 2.443H13c-3.59 0-5.493-.75-6.13-2.444-1.71-2.41-1.374-5.263 0-8.557l18.387-31.777c2.116-3.168 4.394-4.89 6.13-4.89 2.96 0 5.238 1.722 7.354 4.89l18.387 31.777c1.374 3.294 1.713 6.146 0 8.556zm-25.74-33c-.405 0-1.227.835-1.227 2.443v15.89c0 1.608.823 2.444 1.227 2.444 1.628 0 2.452-.836 2.452-2.445v-15.89c0-1.607-.825-2.443-2.453-2.443zm0 23.22c-.405 0-1.227.79-1.227 1.223v2.445c0 .434.823 1.222 1.227 1.222 1.628 0 2.452-.788 2.452-1.222v-2.445c0-.434-.825-1.222-2.453-1.222z" fill-rule="evenodd"/></svg>',"info-circle":'<svg viewBox="0 0 44 44"><circle cx="13.828" cy="19.63" r="1.938"/><circle cx="21.767" cy="19.63" r="1.938"/><circle cx="29.767" cy="19.63" r="1.938"/><path d="M22.102 4.16c-9.918 0-17.958 7.147-17.958 15.962 0 4.935 2.522 9.345 6.48 12.273v5.667l.04.012a2.627 2.627 0 1 0 4.5 1.455h.002l5.026-3.54c.628.06 1.265.094 1.91.094 9.92 0 17.96-7.146 17.96-15.96C40.06 11.306 32.02 4.16 22.1 4.16zm-.04 29.902c-.902 0-1.78-.08-2.642-.207l-5.882 4.234c-.024.024-.055.04-.083.06l-.008.005a.51.51 0 0 1-.284.095.525.525 0 0 1-.525-.525l.005-6.375c-3.91-2.516-6.456-6.544-6.456-11.1 0-7.628 7.107-13.812 15.875-13.812s15.875 6.184 15.875 13.812-7.107 13.812-15.875 13.812z"/></svg>',"question-circle":'<svg viewBox="0 0 44 44"><g fill-rule="evenodd"><path d="M21.186 3c-10.853 0-19.36 8.506-19.36 19.358C1.827 32.494 10.334 41 21.187 41c10.133 0 18.64-8.506 18.64-18.642C39.827 11.506 31.32 3 21.187 3m15.64 19c0 8.823-7.178 16-16 16s-16-7.177-16-16 7.178-16 16-16 16 7.177 16 16z"/><path d="M22.827 31.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0m4-15.48c0 .957-.203 1.822-.61 2.593-.427.792-1.117 1.612-2.073 2.457-.867.734-1.453 1.435-1.754 2.096-.302.7-.453 1.693-.453 2.98a.828.828 0 0 1-.823.854.828.828 0 0 1-.584-.22.877.877 0 0 1-.24-.635c0-1.305.168-2.38.506-3.227.336-.883.93-1.682 1.78-2.4 1.01-.883 1.71-1.692 2.1-2.428.336-.645.503-1.38.503-2.21-.02-.935-.3-1.7-.85-2.288-.655-.717-1.62-1.075-2.897-1.075-1.506 0-2.596.535-3.27 1.6-.46.754-.688 1.645-.688 2.677a.92.92 0 0 1-.266.66.747.747 0 0 1-.56.25.73.73 0 0 1-.584-.194c-.16-.164-.24-.393-.24-.69 0-1.82.585-3.272 1.755-4.357C18.645 11.486 19.928 11 21.434 11h.293c1.452 0 2.638.414 3.56 1.24 1.028.903 1.54 2.163 1.54 3.78z"/></g></svg>',voice:'<svg viewBox="0 0 38 33"><g fill-rule="evenodd"><path d="M17.838 28.8c-.564-.468-1.192-.983-1.836-1.496-4.244-3.385-5.294-3.67-6.006-3.67-.014 0-.027.005-.04.005-.015 0-.028-.006-.042-.006H3.562c-.734 0-.903-.203-.903-.928v-12.62c0-.49.057-.8.66-.8H9.1c.694 0 1.76-.28 6.4-3.63.83-.596 1.638-1.196 2.337-1.722V28.8zM19.682.19c-.463-.22-1.014-.158-1.417.157-.02.016-1.983 1.552-4.152 3.125C10.34 6.21 9.243 6.664 9.02 6.737H3.676c-.027 0-.053.003-.08.004H1.183c-.608 0-1.1.487-1.1 1.086V25.14c0 .598.492 1.084 1.1 1.084h8.71c.22.08 1.257.55 4.605 3.24 1.947 1.562 3.694 3.088 3.712 3.103.25.22.568.333.89.333.186 0 .373-.038.55-.116.48-.213.79-.684.79-1.204V1.38c0-.506-.294-.968-.758-1.19z" mask="url(#mask-2)"/><path d="M31.42 16.475c0-3.363-1.854-6.297-4.606-7.876-.125-.067-.42-.193-.625-.193-.613 0-1.11.488-1.11 1.09 0 .404.22.764.55.952 2.13 1.19 3.566 3.44 3.566 6.024 0 2.627-1.486 4.913-3.677 6.087-.32.19-.53.54-.53.935 0 .602.495 1.09 1.106 1.09.26.002.568-.15.568-.15 2.835-1.556 4.754-4.538 4.754-7.96" mask="url(#mask-4)"/><path d="M30.14 3.057c-.205-.122-.41-.22-.658-.22-.608 0-1.1.485-1.1 1.084 0 .434.26.78.627.978 4.042 2.323 6.76 6.636 6.76 11.578 0 4.938-2.715 9.248-6.754 11.572-.354.19-.66.55-.66.993 0 .6.494 1.085 1.102 1.085.243 0 .438-.092.65-.213 4.692-2.695 7.848-7.7 7.848-13.435 0-5.723-3.142-10.718-7.817-13.418" mask="url(#mask-6)"/></g></svg>',plus:'<svg viewBox="0 0 30 30"><path d="M14 14H0v2h14v14h2V16h14v-2H16V0h-2v14z" fill-rule="evenodd"/></svg>',minus:'<svg viewBox="0 0 30 2"><path d="M0 0h30v2H0z" fill-rule="evenodd"/></svg>',dislike:'<svg viewBox="0 0 72 72"><g fill="none" fill-rule="evenodd"><path d="M36 72c19.882 0 36-16.118 36-36S55.882 0 36 0 0 16.118 0 36s16.118 36 36 36zm0-2c18.778 0 34-15.222 34-34S54.778 2 36 2 2 17.222 2 36s15.222 34 34 34z" fill="#FFF"/><path fill="#FFF" d="M47 22h2v6h-2zm-24 0h2v6h-2z"/><path d="M21 51s4.6-7 15-7 15 7 15 7" stroke="#FFF" stroke-width="2"/></g></svg>',fail:'<svg viewBox="0 0 72 72"><g fill="none" fill-rule="evenodd"><path d="M36 72c19.882 0 36-16.118 36-36S55.882 0 36 0 0 16.118 0 36s16.118 36 36 36zm0-2c18.778 0 34-15.222 34-34S54.778 2 36 2 2 17.222 2 36s15.222 34 34 34z" fill="#FFF"/><path d="M22 22l28.304 28.304m-28.304 0L50.304 22" stroke="#FFF" stroke-width="2"/></g></svg>',success:'<svg viewBox="0 0 72 72"><g fill="none" fill-rule="evenodd"><path d="M36 72c19.882 0 36-16.118 36-36S55.882 0 36 0 0 16.118 0 36s16.118 36 36 36zm0-2c18.778 0 34-15.222 34-34S54.778 2 36 2 2 17.222 2 36s15.222 34 34 34z" fill="#FFF"/><path stroke="#FFF" stroke-width="2" d="M19 34.54l11.545 11.923L52.815 24"/></g></svg>'},i=function(){var e=Object.keys(o).map(function(e){return"<symbol id="+e+o[e].split("svg")[1]+"symbol>"}).join("");return n(e)},s=function(){if(document){var e=document.getElementById("__ANTD_MOBILE_SVG_SPRITE_NODE__"),t=document.body;e||t.insertAdjacentHTML("afterbegin",i())}};t.default=s,e.exports=t.default},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t,a){e.exports=a(217)},function(e,t,a){"use strict";function n(e){var t=new s(e),a=i(s.prototype.request,t);return o.extend(a,s.prototype,t),o.extend(a,t),a}var o=a(25),i=a(132),s=a(219),r=a(93),c=n(r);c.Axios=s,c.create=function(e){return n(o.merge(r,e))},c.Cancel=a(137),c.CancelToken=a(233),c.isCancel=a(136),c.all=function(e){return Promise.all(e)},c.spread=a(234),e.exports=c,e.exports.default=c},function(e,t){function a(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function n(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&a(e.slice(0,0))}/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
e.exports=function(e){return null!=e&&(a(e)||n(e)||!!e._isBuffer)}},function(e,t,a){"use strict";function n(e){this.defaults=e,this.interceptors={request:new s,response:new s}}var o=a(93),i=a(25),s=a(228),r=a(229);n.prototype.request=function(e){"string"==typeof e&&(e=i.merge({url:arguments[0]},arguments[1])),e=i.merge(o,{method:"get"},this.defaults,e),e.method=e.method.toLowerCase();var t=[r,void 0],a=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){t.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){t.push(e.fulfilled,e.rejected)});t.length;)a=a.then(t.shift(),t.shift());return a},i.forEach(["delete","get","head","options"],function(e){n.prototype[e]=function(t,a){return this.request(i.merge(a||{},{method:e,url:t}))}}),i.forEach(["post","put","patch"],function(e){n.prototype[e]=function(t,a,n){return this.request(i.merge(n||{},{method:e,url:t,data:a}))}}),e.exports=n},function(e,t,a){"use strict";var n=a(25);e.exports=function(e,t){n.forEach(e,function(a,n){n!==t&&n.toUpperCase()===t.toUpperCase()&&(e[t]=a,delete e[n])})}},function(e,t,a){"use strict";var n=a(135);e.exports=function(e,t,a){var o=a.config.validateStatus;a.status&&o&&!o(a.status)?t(n("Request failed with status code "+a.status,a.config,null,a.request,a)):e(a)}},function(e,t,a){"use strict";e.exports=function(e,t,a,n,o){return e.config=t,a&&(e.code=a),e.request=n,e.response=o,e}},function(e,t,a){"use strict";function n(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var o=a(25);e.exports=function(e,t,a){if(!t)return e;var i;if(a)i=a(t);else if(o.isURLSearchParams(t))i=t.toString();else{var s=[];o.forEach(t,function(e,t){null!==e&&void 0!==e&&(o.isArray(e)?t+="[]":e=[e],o.forEach(e,function(e){o.isDate(e)?e=e.toISOString():o.isObject(e)&&(e=JSON.stringify(e)),s.push(n(t)+"="+n(e))}))}),i=s.join("&")}return i&&(e+=(-1===e.indexOf("?")?"?":"&")+i),e}},function(e,t,a){"use strict";var n=a(25),o=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,a,i,s={};return e?(n.forEach(e.split("\n"),function(e){if(i=e.indexOf(":"),t=n.trim(e.substr(0,i)).toLowerCase(),a=n.trim(e.substr(i+1)),t){if(s[t]&&o.indexOf(t)>=0)return;s[t]="set-cookie"===t?(s[t]?s[t]:[]).concat([a]):s[t]?s[t]+", "+a:a}}),s):s}},function(e,t,a){"use strict";var n=a(25);e.exports=n.isStandardBrowserEnv()?function(){function e(e){var t=e;return a&&(o.setAttribute("href",t),t=o.href),o.setAttribute("href",t),{href:o.href,protocol:o.protocol?o.protocol.replace(/:$/,""):"",host:o.host,search:o.search?o.search.replace(/^\?/,""):"",hash:o.hash?o.hash.replace(/^#/,""):"",hostname:o.hostname,port:o.port,pathname:"/"===o.pathname.charAt(0)?o.pathname:"/"+o.pathname}}var t,a=/(msie|trident)/i.test(navigator.userAgent),o=document.createElement("a");return t=e(window.location.href),function(a){var o=n.isString(a)?e(a):a;return o.protocol===t.protocol&&o.host===t.host}}():function(){return function(){return!0}}()},function(e,t,a){"use strict";function n(){this.message="String contains an invalid character"}function o(e){for(var t,a,o=String(e),s="",r=0,c=i;o.charAt(0|r)||(c="=",r%1);s+=c.charAt(63&t>>8-r%1*8)){if((a=o.charCodeAt(r+=.75))>255)throw new n;t=t<<8|a}return s}var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.prototype=new Error,n.prototype.code=5,n.prototype.name="InvalidCharacterError",e.exports=o},function(e,t,a){"use strict";var n=a(25);e.exports=n.isStandardBrowserEnv()?function(){return{write:function(e,t,a,o,i,s){var r=[];r.push(e+"="+encodeURIComponent(t)),n.isNumber(a)&&r.push("expires="+new Date(a).toGMTString()),n.isString(o)&&r.push("path="+o),n.isString(i)&&r.push("domain="+i),!0===s&&r.push("secure"),document.cookie=r.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},function(e,t,a){"use strict";function n(){this.handlers=[]}var o=a(25);n.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},n.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},n.prototype.forEach=function(e){o.forEach(this.handlers,function(t){null!==t&&e(t)})},e.exports=n},function(e,t,a){"use strict";function n(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var o=a(25),i=a(230),s=a(136),r=a(93),c=a(231),l=a(232);e.exports=function(e){return n(e),e.baseURL&&!c(e.url)&&(e.url=l(e.baseURL,e.url)),e.headers=e.headers||{},e.data=i(e.data,e.headers,e.transformRequest),e.headers=o.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),o.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]}),(e.adapter||r.adapter)(e).then(function(t){return n(e),t.data=i(t.data,t.headers,e.transformResponse),t},function(t){return s(t)||(n(e),t&&t.response&&(t.response.data=i(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})}},function(e,t,a){"use strict";var n=a(25);e.exports=function(e,t,a){return n.forEach(a,function(a){e=a(e,t)}),e}},function(e,t,a){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,a){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,a){"use strict";function n(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(e){t=e});var a=this;e(function(e){a.reason||(a.reason=new o(e),t(a.reason))})}var o=a(137);n.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},n.source=function(){var e;return{token:new n(function(t){e=t}),cancel:e}},e.exports=n},function(e,t,a){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.showNoDevToast=t.noDevPageList=void 0;var o,i=a(22),s=n(i),r=a(9),c=n(r);a(23);var l=(o={classifyGoodsListPage:"搜索",collectStars:"集集乐",luckyWheelDetail:"大转盘",goldenEggs:"砸金蛋",scratch:"刮刮乐",numberOfStampsOrderDetail:"兑换优惠券",numberOfStampsUsed:"兑换优惠券",exchangeCouponDetail:"兑换优惠券",exchangeCouponDetailOrder:"兑换优惠券",previewSeckillOrder:"秒杀",seckillDetail:"秒杀",gpgoodsList:"拼团",gpgoodsDetail:"拼团",gpgroupDetail:"拼团",gpmyOrder:"拼团",gporderDetail:"拼团",gppaySuccess:"拼团",gpplaylaws:"拼团",previewGroupOrder:"预售",presellList:"预售",presellDetail:"预售",presellOrderDetail:"预售",presellOrderList:"预售",presellPaySuccess:"预售",previewPresellOrder:"预售",previewOrderDetail:"到店",paySuccess:"到店",tostoreOrderDetail:"到店",tostoreComment:"到店",makeTostoreComment:"到店",previewTakeoutOrder:"外卖",takeoutOrderDetail:"外卖",takeoutMakeComment:"外卖",orderTracking:"外卖",takeoutFeedback:"外卖",indemnityOrder:"外卖",cancelOrder:"外卖",checkRowNumberDetail:"排号组件",previewRowNumberOrder:"排号组件",rowNumberOrderDetail:"排号组件",promotionApply:"分销",promotionCommission:"分销",promotionGoods:"分销",promotionMyPromotion:"分销",promotionShopSetting:"分销",promotionTeam:"分销",promotionUserCenter:"分销",promotionWithdraw:"分销",promotionWithdrawRecord:"分销",promotionUserLevel:"分销",promotionLeaderPromotion:"分销",promotionMyIdentity:"分销",promotionWithdrawOffline:"分销",promotionWithdrawScreenshot:"分销",communityGroupAddGoods:"社区团购",communityGroupApply:"社区团购",communityGroupApplyStatus:"社区团购",communityGroupChildOrder:"社区团购",communityGroupGoodDetail:"社区团购",communityGroupOrder:"社区团购",communityGroupOrderDetail:"社区团购",communityGroupOrderSubmit:"社区团购",communityGroupPaySuccess:"社区团购",communityGroupSearchAddress:"社区团购",communityGroupSearchVillage:"社区团购",communityGroupWriteOff:"社区团购",communityGroupGoodsInfo:"社区团购",promotionSubShop:"分销",groupOrderDeta:"分销",dMCouponDetail:"微分商城",dMMerchantDetail:"微分商城",dMMerchantLocation:"微分商城",dMCouponsMall:"微分商城",dMUserCenter:"微分商城",dMUserInfoMod:"微分商城",dMCouponSuccess:"微分商城",dMCouponActive:"微分商城",dMWebView:"微分商城",dMMerchantAlbum:"微分商城",videoUsercenter:"视频",videoDetail:"视频",videoAssess:"视频",goodsMore:"",franchiseeDetail:"多商家",franchiseeTostore:"多商家",franchiseeEnter:"多商家",franchiseeEnterStatus:"多商家",franchiseeList:"多商家",franchiseePerfect:"多商家",franchiseeWaimai:"多商家",franchiseeCooperation:"多商家",franchiseeDetail4:"多商家",franchiseeFacility:"多商家",chainStoreList:"多商家",franchiseeSearch:"多商家",imgVideoView:"多商家"},(0,c.default)(o,"chainStoreList","多商家"),(0,c.default)(o,"newAppointmentDetail","行业预约"),(0,c.default)(o,"newAppointmentStandard","行业预约"),(0,c.default)(o,"newAppointmentImgShow","行业预约"),(0,c.default)(o,"newAppointmentOrder","行业预约"),(0,c.default)(o,"newAppointmentOrderDetail","行业预约"),(0,c.default)(o,"newAppointmentQrcode","行业预约"),(0,c.default)(o,"hotel","行业预约"),(0,c.default)(o,"houseList","行业预约"),(0,c.default)(o,"calendar","签到组件"),(0,c.default)(o,"retroactive","签到组件"),(0,c.default)(o,"rule","签到组件"),(0,c.default)(o,"communityPage","社区"),(0,c.default)(o,"communityDetail","社区"),(0,c.default)(o,"communityUsercenter","社区"),(0,c.default)(o,"communityNotify","社区"),(0,c.default)(o,"communityFailpass","社区"),(0,c.default)(o,"communityReport","社区"),(0,c.default)(o,"communityComments","社区"),(0,c.default)(o,"newsDetail","资讯"),(0,c.default)(o,"newsPocketsDetail","资讯"),(0,c.default)(o,"newsCommentDetail","资讯"),(0,c.default)(o,"newsPocketsBalance","资讯红包"),o),d=function(e){var t=React.createElement("div",null,React.createElement("div",null,"暂不支持"),React.createElement("div",null,"当前功能【",l[e],"】"));s.default.info(l[e]?t:"暂不支持当前功能")};t.noDevPageList=l,t.showNoDevToast=d},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(9),i=n(o),s=a(22),r=n(s),c=a(0),l=n(c),d=a(3),u=n(d),m=a(1),p=n(m),f=a(2),g=n(f);a(23);var h=a(4),v=n(h),_=a(38),y=a(34),E=a(6),b=a(5);a(237);var N=null,R=function(e){function t(e){(0,l.default)(this,t);var a=(0,p.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={phoneNumber:"",picCode:"",picCodeUrl:"/index.php?r=Login/GetNewIdentifyCode&i="+parseInt(1e7*Math.random()),identifyCode:"",verifying:!1,time:60,logining:!1},a.getPicCode=function(){a.setState({picCodeUrl:"/index.php?r=Login/GetNewIdentifyCode&i="+parseInt(1e7*Math.random())})},a.getIdentifyCode=function(){if(!a.state.verifying){if(!(0,E.checkIfPhone)(a.state.phoneNumber))return void r.default.info("请输入正确的手机号");if(!a.state.picCode)return void r.default.info("请输入图形验证码");a.setState({verifying:!0,time:60}),(0,y.ajax)({url:"/index.php?r=AppUser/phoneCode",data:{app_id:(0,_.getAppId)(),phone:a.state.phoneNumber,pic_code:a.state.picCode},success:function(e){if(0!==e.status)return r.default.fail(e.data),void a.setState({verifying:!1,time:60});N=setInterval(function(){0===a.state.time&&(clearInterval(N),a.setState({verifying:!1,time:60})),a.setState({time:--a.state.time})},1e3)}})}},a.handleChange=function(e,t){a.setState((0,i.default)({},e,t.target.value))},a.handleLogin=function(){if(!a.state.logining){if(!(0,E.checkIfPhone)(a.state.phoneNumber))return void r.default.info("请输入正确的手机号");if(!a.state.identifyCode)return void r.default.info("请输入验证码");a.setState({logining:!0}),(0,y.ajax)({url:"/index.php?r=AppUser/phoneReg",data:{app_id:(0,_.getAppId)(),phone:a.state.phoneNumber,code:a.state.identifyCode},success:function(e){if(0!==e.status)return a.setState({logining:!1}),void r.default.fail(e.data);b.appMethod.setIsLogin(!0);var t=e.nickname,n=e.cover_thumb;if(t&&n)return r.default.info("登录成功",1),b.appMethod.requestUserInfo(),void b.appMethod.turnBack();t||n?t?n||r.default.info("登录成功 请补充个人头像"):r.default.info("登录成功 请补充个人昵称"):r.default.info("登录成功 请补充个人信息"),b.appMethod.turnToPage("userCenter")},error:function(){a.setState({logining:!1}),r.default.fail(res.data)}})}},document.title="登录",b.appMethod.isLogin()&&b.appMethod.turnBack(),a}return(0,g.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){return v.default.createElement("div",{id:"loginPage",className:"page"},v.default.createElement("div",{className:"center-wrap"},v.default.createElement("header",null,"即速应用"),v.default.createElement("div",null,v.default.createElement("p",null,v.default.createElement("input",{id:"login-phone",className:"js-phone-input",type:"number",placeholder:"请输入手机号",value:this.state.phoneNumber,onChange:this.handleChange.bind(this,"phoneNumber")})),v.default.createElement("p",{className:"code-p"},v.default.createElement("input",{className:"pic-code-input",type:"text",placeholder:"图形验证码",value:this.state.picCode,onChange:this.handleChange.bind(this,"picCode")}),v.default.createElement("img",{className:"pic-code-url",src:this.state.picCodeUrl,onClick:this.getPicCode})),v.default.createElement("p",{className:"code-p"},v.default.createElement("input",{id:"login-code",className:"code-input",placeholder:"请输入验证码",value:this.state.c,onChange:this.handleChange.bind(this,"identifyCode")}),v.default.createElement("span",{className:"get-code-btn",onClick:this.getIdentifyCode},this.state.verifying&&60!==this.state.time?this.state.time+"s":"获取验证码")),v.default.createElement("div",{className:"lrf-btn",onClick:this.handleLogin},"登录"))))}}]),t}(v.default.Component);t.default=R},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(239),i=n(o),s=a(94),r=n(s),c=a(17),l=n(c),d=a(247),u=n(d),m=a(39),p=n(m),f=a(8),g=n(f),h=a(143),v=n(h),_=a(22),y=n(_),E=a(0),b=n(E),N=a(3),R=n(N),k=a(1),w=n(k),x=a(2),C=n(x);a(255),a(96),a(16),a(260),a(35),a(145),a(23);var D=a(4),S=n(D),I=a(146),M=a(72),T=a(38),P=a(5),L=a(34);a(322);var A=function(e){return S.default.createElement("div",{className:"user-avator"},S.default.createElement("img",{src:e.url}),S.default.createElement(M.ImgUpload,{complete:function(t){return e.change(t)}}))},F=function(e){function t(e){(0,b.default)(this,t);var a=(0,w.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={isLoading:!1},a.sexPickerData=[{label:"男",value:"man"},{label:"女",value:"woman"}],a.getUserInfo=function(){(0,L.ajax)({url:"/index.php?r=AppData/getUserInfo",type:"get",data:{app_id:(0,T.getAppId)()},success:function(e){var t=e.data,n={avatar:t.cover_thumb||"http://cdn.jisuapp.cn/static/webapp/images/default_photo.png",nickname:t.nickname||null,phone:t.phone||null};t.sex&&(n.sex=["0"===t.sex?"man":"woman"]),a.props.form.setFieldsValue(n)}})},a.setAvatar=function(e){a.props.form.setFieldsValue({avatar:e})},a.handleChangePhone=function(){P.appMethod.turnToPage("bindPhonePage")},a.handleSave=function(){var e=!0;if(a.props.form.validateFields(function(t){if(t){e=!1;for(var a in t){var n=t[a].errors[0];if(n)return void y.default.info(n.message)}}}),e){a.setState({isLoading:!0});var t=a.props.form.getFieldsValue();(0,L.ajax)({url:"/index.php?r=AppData/saveUserInfo",type:"post",data:{app_id:(0,T.getAppId)(),cover_thumb:t.avatar,nickname:t.nickname,sex:"man"===t.sex[0]?"0":"1"},success:function(e){a.setState({isLoading:!1}),0!==e.status&&y.default.info("保存失败"),y.default.info("保存成功",2)}})}},a.logout=function(){(0,L.ajax)({url:"/index.php?r=AppUser/logout",data:{app_id:(0,T.getAppId)()},success:function(){P.appMethod.setIsLogin(!1)}})},document.title="我的",a}return(0,C.default)(t,e),(0,R.default)(t,[{key:"componentDidMount",value:function(){if(!P.appMethod.isLogin())return void(P.appMethod.globalData.currentPages.length>1?this.turnToPage("loginPage",{},1):this.turnToPage("loginPage"));this.getUserInfo()}},{key:"render",value:function(){var e=this,t=this.props.form,a=t.getFieldProps,n=t.getFieldValue,o=t.isFieldsTouched;return S.default.createElement("div",{id:"userInfoPage",className:"page"},S.default.createElement(v.default,null),S.default.createElement(p.default,null,S.default.createElement(p.default.Item,(0,g.default)({},a("avatar"),{extra:S.default.createElement(A,(0,g.default)({url:n("avatar"),change:function(t){return e.setAvatar(t)}},this.props))}),"我的头像"),S.default.createElement(u.default,(0,g.default)({},a("nickname",{rules:[{required:!0,message:"请填写昵称"}]}),{placeholder:"填写昵称",name:"nickname"}),"昵称"),S.default.createElement(l.default,(0,g.default)({title:"选择性别",data:this.sexPickerData,cols:1},a("sex")),S.default.createElement(p.default.Item,{arrow:"horizontal"},"性别")),S.default.createElement(p.default.Item,(0,g.default)({},a("phone"),{extra:n("phone"),arrow:"horizontal",onClick:this.handleChangePhone}),"手机号码")),S.default.createElement(v.default,{size:"lg"}),S.default.createElement(i.default,{size:"lg"},S.default.createElement(r.default,{type:"primary",style:{fontSize:"16px",height:"38px",lineHeight:"38px"},disabled:this.state.isLoading||!o(),loading:this.state.isLoading,onClick:this.handleSave},"保存"),S.default.createElement(v.default,null),S.default.createElement(r.default,{type:"default",style:{fontSize:"16px",height:"38px",lineHeight:"38px"},onClick:this.logout},"退出登录")))}}]),t}(S.default.Component);t.default=(0,I.createForm)()(F)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(0),i=n(o),s=a(3),r=n(s),c=a(1),l=n(c),d=a(2),u=n(d),m=a(10),p=n(m),f=a(4),g=n(f),h=function(e){function t(){return(0,i.default)(this,t),(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,u.default)(t,e),(0,r.default)(t,[{key:"render",value:function(){var e=this.props,t=e.prefixCls,a=e.size,n=e.className,o=e.children,i=e.style,s=(0,p.default)(t,t+"-"+a,n);return g.default.createElement("div",{className:s,style:i},o)}}]),t}(g.default.Component);t.default=h,h.defaultProps={prefixCls:"am-wingblank",size:"lg"},e.exports=t.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(){return{triggerType:"onClick",prefixCls:"am-picker",pickerPrefixCls:"am-picker-col",popupPrefixCls:"am-picker-popup",format:function(e){return e.length>0&&"string"!=typeof e[0]?e:e.join(",")},cols:3,cascade:!0,title:""}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(8),s=n(i),r=a(0),c=n(r),l=a(3),d=n(l),u=a(1),m=n(u),p=a(2),f=n(p);t.getDefaultProps=o;var g=a(139),h=n(g),v=a(4),_=n(v),y=a(140),E=n(y),b=a(243),N=n(b),R=a(66),k=n(R),w=a(67),x=n(w),C=a(95),D=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&(a[n[o]]=e[n[o]]);return a},S=function(e){function t(){(0,c.default)(this,t);var e=(0,m.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.getSel=function(){var t=e.props.value||[],a=void 0,n=e.props.data;return a=e.props.cascade?(0,h.default)(n,function(e,a){return e.value===t[a]}):t.map(function(e,t){return n[t].filter(function(t){return t.value===e})[0]}),e.props.format&&e.props.format(a.map(function(e){return e.label}))},e.getPickerCol=function(){var t=e.props,a=t.data,n=t.pickerPrefixCls,o=t.itemStyle,i=t.indicatorStyle;return a.map(function(e,t){return _.default.createElement(x.default,{key:t,prefixCls:n,style:{flex:1},itemStyle:o,indicatorStyle:i},e.map(function(e){return _.default.createElement(x.default.Item,{key:e.value,value:e.value},e.label)}))})},e.onOk=function(t){void 0!==e.scrollValue&&(t=e.scrollValue),e.props.onChange&&e.props.onChange(t),e.props.onOk&&e.props.onOk(t)},e.setScrollValue=function(t){e.scrollValue=t},e.setCasecadeScrollValue=function(t){if(t&&e.scrollValue){var a=e.scrollValue.length;if(a===t.length&&e.scrollValue[a-1]===t[a-1])return}e.setScrollValue(t)},e.fixOnOk=function(t){t&&t.onOk!==e.onOk&&(t.onOk=e.onOk,t.forceUpdate())},e.onPickerChange=function(t){e.setScrollValue(t),e.props.onPickerChange&&e.props.onPickerChange(t)},e.onVisibleChange=function(t){e.setScrollValue(void 0),e.props.onVisibleChange&&e.props.onVisibleChange(t)},e}return(0,f.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.value,o=void 0===n?[]:n,i=e.popupPrefixCls,r=e.itemStyle,c=e.indicatorStyle,l=e.okText,d=e.dismissText,u=e.extra,m=e.cascade,p=e.prefixCls,f=e.pickerPrefixCls,g=e.data,h=e.cols,v=(e.onOk,D(e,["children","value","popupPrefixCls","itemStyle","indicatorStyle","okText","dismissText","extra","cascade","prefixCls","pickerPrefixCls","data","cols","onOk"])),y=(0,C.getComponentLocale)(this.props,this.context,"Picker",function(){return a(245)}),b=void 0,R={};return m?b=_.default.createElement(E.default,{prefixCls:p,pickerPrefixCls:f,data:g,cols:h,onChange:this.onPickerChange,onScrollChange:this.setCasecadeScrollValue,pickerItemStyle:r,indicatorStyle:c}):(b=_.default.createElement(k.default,{style:{flexDirection:"row",alignItems:"center"},prefixCls:p,onScrollChange:this.setScrollValue},this.getPickerCol()),R={pickerValueProp:"selectedValue",pickerValueChangeProp:"onValueChange"}),_.default.createElement(N.default,(0,s.default)({cascader:b},this.popupProps,v,{prefixCls:i,value:o,dismissText:d||y.dismissText,okText:l||y.okText},R,{ref:this.fixOnOk,onVisibleChange:this.onVisibleChange}),t&&"string"!=typeof t&&_.default.isValidElement(t)&&_.default.cloneElement(t,{extra:this.getSel()||u||y.extra}))}}]),t}(_.default.Component);t.default=S},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(8),i=n(o),s=a(0),r=n(s),c=a(3),l=n(c),d=a(1),u=n(d),m=a(2),p=n(m);t.default=function(e){return t=function(t){function a(){(0,r.default)(this,a);var e=(0,u.default)(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments));return e.getValue=function(){var t=e.props,a=t.children,n=t.selectedValue;return n&&n.length?n:a?g.default.Children.map(a,function(e){var t=g.default.Children.toArray(e.children||e.props.children);return t&&t[0]&&t[0].props.value}):[]},e.onChange=function(t,a,n){var o=e.getValue().concat();o[t]=a,n&&n(o,t)},e.onValueChange=function(t,a){e.onChange(t,a,e.props.onValueChange)},e.onScrollChange=function(t,a){e.onChange(t,a,e.props.onScrollChange)},e}return(0,p.default)(a,t),(0,l.default)(a,[{key:"render",value:function(){return g.default.createElement(e,(0,i.default)({},this.props,{getValue:this.getValue,onValueChange:this.onValueChange,onScrollChange:this.props.onScrollChange&&this.onScrollChange}))}}]),a}(g.default.Component),t.defaultProps={prefixCls:"rmc-multi-picker",onValueChange:function(){}},t;var t};var f=a(4),g=n(f);e.exports=t.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(8),i=n(o),s=a(0),r=n(s),c=a(3),l=n(c),d=a(1),u=n(d),m=a(2),p=n(m);t.default=function(e){return t=function(t){function a(){(0,r.default)(this,a);var e=(0,u.default)(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments));return e.select=function(t,a,n){for(var o=g.default.Children.toArray(e.props.children),i=0,s=o.length;i<s;i++)if(o[i].props.value===t)return void e.selectByIndex(i,a,n);e.selectByIndex(0,a,n)},e.doScrollingComplete=function(t,a,n){var o=g.default.Children.toArray(e.props.children),i=e.computeChildIndex(t,a,o.length),s=o[i];s?n(s.props.value):console.warn&&console.warn("child not found",o,i)},e}return(0,p.default)(a,t),(0,l.default)(a,[{key:"selectByIndex",value:function(e,t,a){e<0||e>=g.default.Children.count(this.props.children)||!t||a(e*t)}},{key:"computeChildIndex",value:function(e,t,a){var n=Math.round(e/t);return Math.min(n,a-1)}},{key:"render",value:function(){return g.default.createElement(e,(0,i.default)({},this.props,{doScrollingComplete:this.doScrollingComplete,computeChildIndex:this.computeChildIndex,select:this.select}))}}]),a}(g.default.Component),t.Item=h,t;var t};var f=a(4),g=n(f),h=function(e){return null};e.exports=t.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(8),i=n(o),s=a(0),r=n(s),c=a(3),l=n(c),d=a(1),u=n(d),m=a(2),p=n(m),f=a(4),g=n(f),h=a(141),v=n(h),_=function(e){function t(){(0,r.default)(this,t);var e=(0,u.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.onOk=function(t){var a=e.props,n=a.onChange,o=a.onOk;n&&n(t),o&&o(t)},e}return(0,p.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){return g.default.createElement(v.default,(0,i.default)({picker:this.props.cascader},this.props,{onOk:this.onOk}))}}]),t}(g.default.Component);_.defaultProps={pickerValueProp:"value",pickerValueChangeProp:"onChange"},t.default=_,e.exports=t.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return a=function(t){function a(e){(0,d.default)(this,a);var t=(0,f.default)(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.onPickerChange=function(e){if(t.state.pickerValue!==e){t.setState({pickerValue:e});var a=t.props,n=a.picker,o=a.pickerValueChangeProp;n&&n.props[o]&&n.props[o](e)}},t.saveRef=function(e){t.picker=e},t.onTriggerClick=function(e){var a=t.props.children,n=a.props||{};n[t.props.triggerType]&&n[t.props.triggerType](e),t.fireVisibleChange(!t.state.visible)},t.onOk=function(){t.props.onOk(t.picker&&t.picker.getValue()),t.fireVisibleChange(!1)},t.getContent=function(){if(t.props.picker){var e,a=t.state.pickerValue;return null===a&&(a=t.props.value),_.default.cloneElement(t.props.picker,(e={},(0,c.default)(e,t.props.pickerValueProp,a),(0,c.default)(e,t.props.pickerValueChangeProp,t.onPickerChange),(0,c.default)(e,"ref",t.saveRef),e))}return t.props.content},t.onDismiss=function(){t.props.onDismiss(),t.fireVisibleChange(!1)},t.hide=function(){t.fireVisibleChange(!1)},t.state={pickerValue:"value"in t.props?t.props.value:null,visible:t.props.visible||!1},t}return(0,h.default)(a,t),(0,m.default)(a,[{key:"componentWillReceiveProps",value:function(e){"value"in e&&this.setState({pickerValue:e.value}),"visible"in e&&this.setVisibleState(e.visible)}},{key:"setVisibleState",value:function(e){this.setState({visible:e}),e||this.setState({pickerValue:null})}},{key:"fireVisibleChange",value:function(e){this.state.visible!==e&&("visible"in this.props||this.setVisibleState(e),this.props.onVisibleChange(e))}},{key:"getRender",value:function(){var t=this.props,a=t.children;if(!a)return e(t,this.state.visible,{getContent:this.getContent,onOk:this.onOk,hide:this.hide,onDismiss:this.onDismiss});var n=this.props,o=n.WrapComponent,i=n.disabled,s=a,r={};return i||(r[t.triggerType]=this.onTriggerClick),_.default.createElement(o,{style:t.wrapStyle},_.default.cloneElement(s,r),e(t,this.state.visible,{getContent:this.getContent,onOk:this.onOk,hide:this.hide,onDismiss:this.onDismiss}))}},{key:"render",value:function(){return this.getRender()}}]),a}(_.default.Component),a.defaultProps=(0,s.default)({onVisibleChange:function(e){},okText:"Ok",dismissText:"Dismiss",title:"",onOk:function(e){},onDismiss:function(){}},t),a;var a}Object.defineProperty(t,"__esModule",{value:!0});var i=a(8),s=n(i),r=a(9),c=n(r),l=a(0),d=n(l),u=a(3),m=n(u),p=a(1),f=n(p),g=a(2),h=n(g);t.default=o;var v=a(4),_=n(v);e.exports=t.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={okText:"确定",dismissText:"取消",extra:"请选择"},e.exports=t.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={WrapComponent:"div",transitionName:"am-slide-up",maskTransitionName:"am-fade"},e.exports=t.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(){}function i(e){return void 0===e||null===e?"":e+""}Object.defineProperty(t,"__esModule",{value:!0});var s=a(9),r=n(s),c=a(8),l=n(c),d=a(0),u=n(d),m=a(3),p=n(m),f=a(1),g=n(f),h=a(2),v=n(h),_=a(10),y=n(_),E=a(14),b=n(E),N=a(4),R=n(N),k=a(56),w=n(k),x=a(95),C=a(248),D=n(C),S=a(252),I=n(S),M=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&(a[n[o]]=e[n[o]]);return a},T=function(e){function t(e){(0,u.default)(this,t);var a=(0,g.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.onInputChange=function(e){var t=e.target,n=t.value,o=t.selectionEnd,i=a.state.value,s=void 0===i?"":i,r=a.props.type,c=n;switch(r){case"bankCard":c=n.replace(/\D/g,"").replace(/(....)(?=.)/g,"$1 ");break;case"phone":c=n.replace(/\D/g,"").substring(0,11);var l=c.length;l>3&&l<8?c=c.substr(0,3)+" "+c.substr(3):l>=8&&(c=c.substr(0,3)+" "+c.substr(3,4)+" "+c.substr(7));break;case"number":c=n.replace(/\D/g,"")}a.handleOnChange(c,c!==n,function(){switch(r){case"bankCard":case"phone":case"number":t.selectionStart=t.selectionEnd=a.calcPos(o||0,s,n,c,[" "],/\D/g)}})},a.handleOnChange=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o,i=a.props.onChange;"value"in a.props?a.setState({value:a.props.value}):a.setState({value:e}),i?t?setTimeout(function(){i(e),n()}):(i(e),n()):n()},a.onInputFocus=function(e){a.debounceTimeout&&(clearTimeout(a.debounceTimeout),a.debounceTimeout=null),a.setState({focus:!0}),a.props.onFocus&&a.props.onFocus(e)},a.onInputBlur=function(e){a.inputRef&&(a.debounceTimeout=window.setTimeout(function(){document.activeElement!==(a.inputRef&&a.inputRef.inputRef)&&a.setState({focus:!1})},200)),a.props.onBlur&&a.props.onBlur(e)},a.clearInput=function(){"password"!==a.props.type&&a.props.updatePlaceholder&&a.setState({placeholder:a.props.value}),a.setState({value:""}),a.props.onChange&&a.props.onChange(""),a.focus()},a.focus=function(){a.inputRef&&a.inputRef.focus()},a.calcPos=function(e,t,a,n,o,i){var s=a.length-t.length,r=s>0,c=e;if(r){var l=a.substr(c-s,s),d=l.replace(i,"").length;c-=s-d;for(var u=0;d>0;)-1===o.indexOf(n.charAt(c-d+u))?d--:u++;c+=u}return c},a.state={placeholder:e.placeholder,value:i(e.value||e.defaultValue)},a}return(0,v.default)(t,e),(0,p.default)(t,[{key:"componentWillReceiveProps",value:function(e){"placeholder"in e&&!e.updatePlaceholder&&this.setState({placeholder:e.placeholder}),"value"in e&&this.setState({value:e.value})}},{key:"componentWillUnmount",value:function(){this.debounceTimeout&&(window.clearTimeout(this.debounceTimeout),this.debounceTimeout=null)}},{key:"render",value:function(){var e,t,n=this,o=(0,l.default)({},this.props);delete o.updatePlaceholder;var s=o.prefixCls,c=o.prefixListCls,d=o.editable,u=o.style,m=o.clear,p=o.children,f=o.error,g=o.className,h=o.extra,v=o.labelNumber,_=o.type,E=o.onExtraClick,b=o.onErrorClick,N=o.moneyKeyboardAlign,k=o.moneyKeyboardWrapProps,C=o.moneyKeyboardHeader,S=o.onVirtualKeyboardConfirm,T=M(o,["prefixCls","prefixListCls","editable","style","clear","children","error","className","extra","labelNumber","type","onExtraClick","onErrorClick","moneyKeyboardAlign","moneyKeyboardWrapProps","moneyKeyboardHeader","onVirtualKeyboardConfirm"]),P=T.name,L=T.disabled,A=T.maxLength,F=this.state.value,O=(0,x.getComponentLocale)(this.props,this.context,"InputItem",function(){return a(253)}),B=O.confirmLabel,j=O.backspaceLabel,G=O.cancelKeyboardLabel,q=this.state,U=q.focus,z=q.placeholder,V=(0,y.default)(c+"-item",s+"-item",c+"-item-middle",g,(e={},(0,r.default)(e,s+"-disabled",L),(0,r.default)(e,s+"-error",f),(0,r.default)(e,s+"-focus",U),(0,r.default)(e,s+"-android",U),e)),W=(0,y.default)(s+"-label",(t={},(0,r.default)(t,s+"-label-2",2===v),(0,r.default)(t,s+"-label-3",3===v),(0,r.default)(t,s+"-label-4",4===v),(0,r.default)(t,s+"-label-5",5===v),(0,r.default)(t,s+"-label-6",6===v),(0,r.default)(t,s+"-label-7",7===v),t)),H=s+"-control",J="text";"bankCard"===_||"phone"===_?J="tel":"password"===_?J="password":"digit"===_?J="number":"text"!==_&&"number"!==_&&(J=_);var Y=void 0;"number"===_&&(Y={pattern:"[0-9]*"});var Q=void 0;return"digit"===_&&(Q={className:"h5numInput"}),R.default.createElement("div",{className:V},R.default.createElement("div",{className:c+"-line"},p?R.default.createElement("div",{className:W},p):null,R.default.createElement("div",{className:H},"money"===_?R.default.createElement(D.default,{value:i(F),type:_,ref:function(e){return n.inputRef=e},maxLength:A,placeholder:z,onChange:this.onInputChange,onFocus:this.onInputFocus,onBlur:this.onInputBlur,onVirtualKeyboardConfirm:S,disabled:L,editable:d,prefixCls:s,style:u,confirmLabel:B,backspaceLabel:j,cancelKeyboardLabel:G,moneyKeyboardAlign:N,moneyKeyboardWrapProps:k,moneyKeyboardHeader:C}):R.default.createElement(I.default,(0,l.default)({},Y,T,Q,{value:i(F),defaultValue:void 0,ref:function(e){return n.inputRef=e},style:u,type:J,maxLength:A,name:P,placeholder:z,onChange:this.onInputChange,onFocus:this.onInputFocus,onBlur:this.onInputBlur,readOnly:!d,disabled:L}))),m&&d&&!L&&F&&(""+F).length>0?R.default.createElement(w.default,{activeClassName:s+"-clear-active"},R.default.createElement("div",{className:s+"-clear",onClick:this.clearInput})):null,f?R.default.createElement("div",{className:s+"-error-extra",onClick:b}):null,""!==h?R.default.createElement("div",{className:s+"-extra",onClick:E},h):null))}}]),t}(R.default.Component);T.defaultProps={prefixCls:"am-input",prefixListCls:"am-list",type:"text",editable:!0,disabled:!1,placeholder:"",clear:!1,onChange:o,onBlur:o,onFocus:o,extra:"",onExtraClick:o,error:!1,onErrorClick:o,onVirtualKeyboardConfirm:o,labelNumber:5,updatePlaceholder:!1,moneyKeyboardAlign:"right",moneyKeyboardWrapProps:{},moneyKeyboardHeader:null},T.contextTypes={antLocale:b.default.object},t.default=T,e.exports=t.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(0),i=n(o),s=a(3),r=n(s),c=a(1),l=n(c),d=a(2),u=n(d),m=a(10),p=n(m),f=a(4),g=n(f),h=a(24),v=n(h),_=a(249),y=a(250),E=n(y),b=a(251),N=n(b),R=a(142),k=[],w=null,x=!!v.default.createPortal,C=function(e){function t(e){(0,i.default)(this,t);var a=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.onChange=function(e){"value"in a.props||a.setState({value:e.target.value}),a.props.onChange(e)},a.onConfirm=function(e){a.props.onVirtualKeyboardConfirm(e)},a.addBlurListener=function(){document.addEventListener("click",a.doBlur,!1)},a.removeBlurListener=function(){document.removeEventListener("click",a.doBlur,!1)},a.saveRef=function(e){x&&e&&(w=e,k.push({el:e,container:a.container}))},a.doBlur=function(e){var t=a.state.value;e.target!==a.inputRef&&a.onInputBlur(t)},a.removeCurrentExtraKeyboard=function(){k=k.filter(function(e){var t=e.el,a=e.container;return t&&a&&t!==w&&a.parentNode.removeChild(a),t===w})},a.unLinkInput=function(){w&&w.antmKeyboard&&w.linkedInput&&w.linkedInput===a&&(w.linkedInput=null,(0,_.addClass)(w.antmKeyboard,a.props.keyboardPrefixCls+"-wrapper-hide")),a.removeBlurListener(),x&&a.removeCurrentExtraKeyboard()},a.onInputBlur=function(e){a.state.focus&&(a.setState({focus:!1}),a.props.onBlur(e),setTimeout(function(){a.unLinkInput()},50))},a.onInputFocus=function(){var e=a.state.value;a.props.onFocus(e),a.setState({focus:!0},function(){w&&(w.linkedInput=a,w.antmKeyboard&&(0,_.removeClass)(w.antmKeyboard,a.props.keyboardPrefixCls+"-wrapper-hide"),w.confirmDisabled=""===e,w.confirmKeyboardItem&&(""===e?(0,_.addClass)(w.confirmKeyboardItem,a.props.keyboardPrefixCls+"-item-disabled"):(0,_.removeClass)(w.confirmKeyboardItem,a.props.keyboardPrefixCls+"-item-disabled")))})},a.onKeyboardClick=function(e){var t=a.props.maxLength,n=a.state.value,o=a.onChange,i=void 0;"delete"===e?(i=n.substring(0,n.length-1),o({target:{value:i}})):"confirm"===e?(i=n,o({target:{value:i}}),a.onInputBlur(n),a.onConfirm(n)):"hide"===e?(i=n,a.onInputBlur(i)):void 0!==t&&+t>=0&&(n+e).length>t?(i=(n+e).substr(0,t),o({target:{value:i}})):(i=n+e,o({target:{value:i}})),w&&(w.confirmDisabled=""===i,w.confirmKeyboardItem&&(""===i?(0,_.addClass)(w.confirmKeyboardItem,a.props.keyboardPrefixCls+"-item-disabled"):(0,_.removeClass)(w.confirmKeyboardItem,a.props.keyboardPrefixCls+"-item-disabled")))},a.onFakeInputClick=function(){a.focus()},a.focus=function(){a.removeBlurListener(),a.state.focus||a.onInputFocus(),setTimeout(function(){a.addBlurListener()},50)},a.state={focus:!1,value:e.value||""},a}return(0,u.default)(t,e),(0,r.default)(t,[{key:"componentWillReceiveProps",value:function(e){"value"in e&&this.setState({value:e.value})}},{key:"componentDidUpdate",value:function(){this.renderCustomKeyboard()}},{key:"componentWillUnmount",value:function(){this.state.focus&&this.props.onBlur(this.state.value),this.unLinkInput()}},{key:"getComponent",value:function(){var e=this.props,t=e.confirmLabel,a=e.backspaceLabel,n=e.cancelKeyboardLabel,o=e.keyboardPrefixCls,i=e.moneyKeyboardWrapProps,s=e.moneyKeyboardHeader;return g.default.createElement(E.default,{ref:this.saveRef,onClick:this.onKeyboardClick,prefixCls:o,confirmLabel:t,backspaceLabel:a,cancelKeyboardLabel:n,wrapProps:i,header:s})}},{key:"getContainer",value:function(){var e=this.props.keyboardPrefixCls;if(x){if(!this.container){var t=document.createElement("div");t.setAttribute("id",e+"-container-"+(new Date).getTime()),document.body.appendChild(t),this.container=t}}else{var a=document.querySelector("#"+e+"-container");a||(a=document.createElement("div"),a.setAttribute("id",e+"-container"),document.body.appendChild(a)),this.container=a}return this.container}},{key:"renderCustomKeyboard",value:function(){x||(w=v.default.unstable_renderSubtreeIntoContainer(this,this.getComponent(),this.getContainer()))}},{key:"renderPortal",value:function(){var e=this;return x&&R.canUseDOM?g.default.createElement(N.default,{getContainer:function(){return e.getContainer()}},this.getComponent()):null}},{key:"render",value:function(){var e=this,t=this.props,a=t.placeholder,n=t.disabled,o=t.editable,i=t.moneyKeyboardAlign,s=this.state,r=s.focus,c=s.value,l=n||!o,d=(0,p.default)("fake-input",{focus:r,"fake-input-disabled":n}),u=(0,p.default)("fake-input-container",{"fake-input-container-left":"left"===i});return g.default.createElement("div",{className:u},""===c&&g.default.createElement("div",{className:"fake-input-placeholder"},a),g.default.createElement("div",{role:"textbox","aria-label":c||a,className:d,ref:function(t){return e.inputRef=t},onClick:l?function(){}:this.onFakeInputClick},c),this.renderPortal())}}]),t}(g.default.Component);C.defaultProps={onChange:function(){},onFocus:function(){},onBlur:function(){},onVirtualKeyboardConfirm:function(){},placeholder:"",disabled:!1,editable:!0,prefixCls:"am-input",keyboardPrefixCls:"am-number-keyboard"},t.default=C,e.exports=t.default},function(e,t,a){"use strict";function n(e,t){return e.classList?e.classList.contains(t):(" "+e.className+" ").indexOf(" "+t+" ")>-1}function o(e,t){e.classList?e.classList.add(t):n(e,t)||(e.className=e.className+" "+t)}function i(e,t){if(e.classList)e.classList.remove(t);else if(n(e,t)){var a=e.className;e.className=(" "+a+" ").replace(" "+t+" ","")}}Object.defineProperty(t,"__esModule",{value:!0}),t.hasClass=n,t.addClass=o,t.removeClass=i},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.KeyboardItem=void 0;var o=a(8),i=n(o),s=a(0),r=n(s),c=a(3),l=n(c),d=a(1),u=n(d),m=a(2),p=n(m),f=a(10),g=n(f),h=a(4),v=n(h),_=a(56),y=n(_),E=a(142),b=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&(a[n[o]]=e[n[o]]);return a},N=t.KeyboardItem=function(e){function t(){return(0,r.default)(this,t),(0,u.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,p.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this.props,t=e.prefixCls,a=e.onClick,n=e.className,o=(e.disabled,e.children),s=e.tdRef,r=e.label,c=e.iconOnly,l=b(e,["prefixCls","onClick","className","disabled","children","tdRef","label","iconOnly"]),d=o;"keyboard-delete"===n?d="delete":"keyboard-hide"===n?d="hide":"keyboard-confirm"===n&&(d="confirm");var u=(0,g.default)(t+"-item",n);return v.default.createElement(y.default,{activeClassName:t+"-item-active"},v.default.createElement("td",(0,i.default)({ref:s,onClick:function(e){a(e,d)},className:u},l),o,c&&v.default.createElement("i",{className:"sr-only"},r)))}}]),t}(v.default.Component);N.defaultProps={prefixCls:"am-number-keyboard",onClick:function(){},disabled:!1};var R=function(e){function t(){(0,r.default)(this,t);var e=(0,u.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.onKeyboardClick=function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(t.nativeEvent.stopImmediatePropagation(),"confirm"===a&&e.confirmDisabled)return null;e.linkedInput&&e.linkedInput.onKeyboardClick(a)},e.renderKeyboardItem=function(t,a){return v.default.createElement(N,{onClick:e.onKeyboardClick,key:"item-"+t+"-"+a},t)},e}return(0,p.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.prefixCls,n=t.confirmLabel,o=t.backspaceLabel,s=t.cancelKeyboardLabel,r=t.wrapProps,c=t.header,l=(0,g.default)(a+"-wrapper",a+"-wrapper-hide");return v.default.createElement("div",(0,i.default)({className:l,ref:function(t){return e.antmKeyboard=t}},r),c&&v.default.cloneElement(c,{onClick:this.onKeyboardClick}),v.default.createElement("table",null,v.default.createElement("tbody",null,v.default.createElement("tr",null,["1","2","3"].map(function(t,a){return e.renderKeyboardItem(t,a)}),v.default.createElement(N,(0,i.default)({className:"keyboard-delete",rowSpan:2,onClick:this.onKeyboardClick},this.getAriaAttr(o)))),v.default.createElement("tr",null,["4","5","6"].map(function(t,a){return e.renderKeyboardItem(t,a)})),v.default.createElement("tr",null,["7","8","9"].map(function(t,a){return e.renderKeyboardItem(t,a)}),v.default.createElement(N,{className:"keyboard-confirm",rowSpan:2,onClick:this.onKeyboardClick,tdRef:function(t){return e.confirmKeyboardItem=t}},n)),v.default.createElement("tr",null,[".","0"].map(function(t,a){return e.renderKeyboardItem(t,a)}),v.default.createElement(N,(0,i.default)({className:"keyboard-hide",onClick:this.onKeyboardClick},this.getAriaAttr(s)))))))}},{key:"getAriaAttr",value:function(e){return E.IS_IOS?{label:e,iconOnly:!0}:{role:"button","aria-label":e}}}]),t}(v.default.Component);R.defaultProps={prefixCls:"am-number-keyboard"},t.default=R},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(0),i=n(o),s=a(3),r=n(s),c=a(1),l=n(c),d=a(2),u=n(d),m=a(4),p=n(m),f=a(24),g=n(f),h=g.default.createPortal,v=function(e){function t(e){(0,i.default)(this,t);var a=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.container=a.props.getContainer(),a}return(0,u.default)(t,e),(0,r.default)(t,[{key:"render",value:function(){return this.props.children?h(this.props.children,this.container):null}}]),t}(p.default.Component);t.default=v,e.exports=t.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(8),i=n(o),s=a(0),r=n(s),c=a(3),l=n(c),d=a(1),u=n(d),m=a(2),p=n(m),f=a(4),g=n(f),h=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&(a[n[o]]=e[n[o]]);return a},v=function(e){function t(){(0,r.default)(this,t);var e=(0,u.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.onInputBlur=function(t){var a=t.target.value;e.props.onBlur&&e.props.onBlur(a)},e.onInputFocus=function(t){var a=t.target.value;e.props.onFocus&&e.props.onFocus(a)},e.focus=function(){e.inputRef&&e.inputRef.focus()},e}return(0,p.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this,t=this.props,a=(t.onBlur,t.onFocus,h(t,["onBlur","onFocus"]));return g.default.createElement("input",(0,i.default)({ref:function(t){return e.inputRef=t},onBlur:this.onInputBlur,onFocus:this.onInputFocus},a))}}]),t}(g.default.Component);t.default=v,e.exports=t.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={confirmLabel:"确定",backspaceLabel:"退格",cancelKeyboardLabel:"收起键盘"},e.exports=t.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Brief=void 0;var o=a(8),i=n(o),s=a(9),r=n(s),c=a(0),l=n(c),d=a(3),u=n(d),m=a(1),p=n(m),f=a(2),g=n(f),h=a(10),v=n(h),_=a(4),y=n(_),E=a(56),b=n(E),N=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&(a[n[o]]=e[n[o]]);return a},R=t.Brief=function(e){function t(){return(0,l.default)(this,t),(0,p.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,g.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){return y.default.createElement("div",{className:"am-list-brief",style:this.props.style},this.props.children)}}]),t}(y.default.Component),k=function(e){function t(e){(0,l.default)(this,t);var a=(0,p.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.onClick=function(e){var t=a.props,n=t.onClick,o=t.platform,i="android"===o;if(n&&i){a.debounceTimeout&&(clearTimeout(a.debounceTimeout),a.debounceTimeout=null);var s=e.currentTarget,r=Math.max(s.offsetHeight,s.offsetWidth),c=e.currentTarget.getBoundingClientRect(),l=e.clientX-c.left-s.offsetWidth/2,d=e.clientY-c.top-s.offsetWidth/2,u={width:r+"px",height:r+"px",left:l+"px",top:d+"px"};a.setState({coverRippleStyle:u,RippleClicked:!0},function(){a.debounceTimeout=setTimeout(function(){a.setState({coverRippleStyle:{display:"none"},RippleClicked:!1})},1e3)})}n&&n(e)},a.state={coverRippleStyle:{display:"none"},RippleClicked:!1},a}return(0,g.default)(t,e),(0,u.default)(t,[{key:"componentWillUnmount",value:function(){this.debounceTimeout&&(clearTimeout(this.debounceTimeout),this.debounceTimeout=null)}},{key:"render",value:function(){var e,t,a,n=this,o=this.props,s=o.prefixCls,c=o.className,l=o.activeStyle,d=o.error,u=o.align,m=o.wrap,p=o.disabled,f=o.children,g=o.multipleLine,h=o.thumb,_=o.extra,E=o.arrow,R=o.onClick,k=N(o,["prefixCls","className","activeStyle","error","align","wrap","disabled","children","multipleLine","thumb","extra","arrow","onClick"]),w=(k.platform,N(k,["platform"])),x=this.state,C=x.coverRippleStyle,D=x.RippleClicked,S=(0,v.default)(s+"-item",c,(e={},(0,r.default)(e,s+"-item-disabled",p),(0,r.default)(e,s+"-item-error",d),(0,r.default)(e,s+"-item-top","top"===u),(0,r.default)(e,s+"-item-middle","middle"===u),(0,r.default)(e,s+"-item-bottom","bottom"===u),e)),I=(0,v.default)(s+"-ripple",(0,r.default)({},s+"-ripple-animate",D)),M=(0,v.default)(s+"-line",(t={},(0,r.default)(t,s+"-line-multiple",g),(0,r.default)(t,s+"-line-wrap",m),t)),T=(0,v.default)(s+"-arrow",(a={},(0,r.default)(a,s+"-arrow-horizontal","horizontal"===E),(0,r.default)(a,s+"-arrow-vertical","down"===E||"up"===E),(0,r.default)(a,s+"-arrow-vertical-up","up"===E),a)),P=y.default.createElement("div",(0,i.default)({},w,{onClick:function(e){n.onClick(e)},className:S}),h?y.default.createElement("div",{className:s+"-thumb"},"string"==typeof h?y.default.createElement("img",{src:h}):h):null,y.default.createElement("div",{className:M},void 0!==f&&y.default.createElement("div",{className:s+"-content"},f),void 0!==_&&y.default.createElement("div",{className:s+"-extra"},_),E&&y.default.createElement("div",{className:T,"aria-hidden":"true"})),y.default.createElement("div",{style:C,className:I})),L={};return Object.keys(w).forEach(function(e){/onTouch/i.test(e)&&(L[e]=w[e],delete w[e])}),y.default.createElement(b.default,(0,i.default)({},L,{disabled:p||!R,activeStyle:l,activeClassName:s+"-item-active"}),P)}}]),t}(y.default.Component);k.defaultProps={prefixCls:"am-list",align:"middle",error:!1,multipleLine:!1,wrap:!1,platform:"ios"},k.Brief=R,t.default=k},function(e,t,a){"use strict";a(19),a(256)},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t,a){"use strict";a(19),a(35),a(262)},function(e,t){},function(e,t){},function(e,t){},function(e,t,a){e.exports={default:a(265),__esModule:!0}},function(e,t,a){a(65),a(266),e.exports=a(20).Array.from},function(e,t,a){"use strict";var n=a(75),o=a(41),i=a(63),s=a(267),r=a(268),c=a(122),l=a(269),d=a(147);o(o.S+o.F*!a(270)(function(e){Array.from(e)}),"Array",{from:function(e){var t,a,o,u,m=i(e),p="function"==typeof this?this:Array,f=arguments.length,g=f>1?arguments[1]:void 0,h=void 0!==g,v=0,_=d(m);if(h&&(g=n(g,f>2?arguments[2]:void 0,2)),void 0==_||p==Array&&r(_))for(t=c(m.length),a=new p(t);t>v;v++)l(a,v,h?g(m[v],v):m[v]);else for(u=_.call(m),a=new p;!(o=u.next()).done;v++)l(a,v,h?s(u,g,[o.value,v],!0):o.value);return a.length=v,a}})},function(e,t,a){var n=a(47);e.exports=function(e,t,a,o){try{return o?t(n(a)[0],a[1]):t(a)}catch(t){var i=e.return;throw void 0!==i&&n(i.call(e)),t}}},function(e,t,a){var n=a(55),o=a(29)("iterator"),i=Array.prototype;e.exports=function(e){return void 0!==e&&(n.Array===e||i[o]===e)}},function(e,t,a){"use strict";var n=a(43),o=a(57);e.exports=function(e,t,a){t in e?n.f(e,t,o(0,a)):e[t]=a}},function(e,t,a){var n=a(29)("iterator"),o=!1;try{var i=[7][n]();i.return=function(){o=!0},Array.from(i,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!o)return!1;var a=!1;try{var i=[7],s=i[n]();s.next=function(){return{done:a=!0}},i[n]=function(){return s},e(i)}catch(e){}return a}},function(e,t,a){"use strict";var n=a(4),o=a(272);if(void 0===n)throw Error("create-react-class could not find the React object. If you are using script tags, make sure that React is being loaded before create-react-class.");var i=(new n.Component).updater;e.exports=o(n.Component,n.isValidElement,i)},function(e,t,a){"use strict";function n(e){return e}function o(e,t,a){function o(e,t){var a=_.hasOwnProperty(t)?_[t]:null;R.hasOwnProperty(t)&&r("OVERRIDE_BASE"===a,"ReactClassInterface: You are attempting to override `%s` from your class specification. Ensure that your method names do not overlap with React methods.",t),e&&r("DEFINE_MANY"===a||"DEFINE_MANY_MERGED"===a,"ReactClassInterface: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",t)}function l(e,a){if(a){r("function"!=typeof a,"ReactClass: You're attempting to use a component class or function as a mixin. Instead, just use a regular object."),r(!t(a),"ReactClass: You're attempting to use a component as a mixin. Instead, just use a regular object.");var n=e.prototype,i=n.__reactAutoBindPairs;a.hasOwnProperty(c)&&E.mixins(e,a.mixins);for(var s in a)if(a.hasOwnProperty(s)&&s!==c){var l=a[s],d=n.hasOwnProperty(s);if(o(d,s),E.hasOwnProperty(s))E[s](e,l);else{var u=_.hasOwnProperty(s),f="function"==typeof l,g=f&&!u&&!d&&!1!==a.autobind;if(g)i.push(s,l),n[s]=l;else if(d){var h=_[s];r(u&&("DEFINE_MANY_MERGED"===h||"DEFINE_MANY"===h),"ReactClass: Unexpected spec policy %s for key %s when mixing in component specs.",h,s),"DEFINE_MANY_MERGED"===h?n[s]=m(n[s],l):"DEFINE_MANY"===h&&(n[s]=p(n[s],l))}else n[s]=l}}}else;}function d(e,t){if(t)for(var a in t){var n=t[a];if(t.hasOwnProperty(a)){var o=a in E;r(!o,'ReactClass: You are attempting to define a reserved property, `%s`, that shouldn\'t be on the "statics" key. Define it as an instance property instead; it will still be accessible on the constructor.',a);var i=a in e;if(i){var s=y.hasOwnProperty(a)?y[a]:null;return r("DEFINE_MANY_MERGED"===s,"ReactClass: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",a),void(e[a]=m(e[a],n))}e[a]=n}}}function u(e,t){r(e&&t&&"object"==typeof e&&"object"==typeof t,"mergeIntoWithNoDuplicateKeys(): Cannot merge non-objects.");for(var a in t)t.hasOwnProperty(a)&&(r(void 0===e[a],"mergeIntoWithNoDuplicateKeys(): Tried to merge two objects with the same key: `%s`. This conflict may be due to a mixin; in particular, this may be caused by two getInitialState() or getDefaultProps() methods returning objects with clashing keys.",a),e[a]=t[a]);return e}function m(e,t){return function(){var a=e.apply(this,arguments),n=t.apply(this,arguments);if(null==a)return n;if(null==n)return a;var o={};return u(o,a),u(o,n),o}}function p(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function f(e,t){var a=t.bind(e);return a}function g(e){for(var t=e.__reactAutoBindPairs,a=0;a<t.length;a+=2){var n=t[a],o=t[a+1];e[n]=f(e,o)}}function h(e){var t=n(function(e,n,o){this.__reactAutoBindPairs.length&&g(this),this.props=e,this.context=n,this.refs=s,this.updater=o||a,this.state=null;var i=this.getInitialState?this.getInitialState():null;r("object"==typeof i&&!Array.isArray(i),"%s.getInitialState(): must return an object or null",t.displayName||"ReactCompositeComponent"),this.state=i});t.prototype=new k,t.prototype.constructor=t,t.prototype.__reactAutoBindPairs=[],v.forEach(l.bind(null,t)),l(t,b),l(t,e),l(t,N),t.getDefaultProps&&(t.defaultProps=t.getDefaultProps()),r(t.prototype.render,"createClass(...): Class specification must implement a `render` method.");for(var o in _)t.prototype[o]||(t.prototype[o]=null);return t}var v=[],_={mixins:"DEFINE_MANY",statics:"DEFINE_MANY",propTypes:"DEFINE_MANY",contextTypes:"DEFINE_MANY",childContextTypes:"DEFINE_MANY",getDefaultProps:"DEFINE_MANY_MERGED",getInitialState:"DEFINE_MANY_MERGED",getChildContext:"DEFINE_MANY_MERGED",render:"DEFINE_ONCE",componentWillMount:"DEFINE_MANY",componentDidMount:"DEFINE_MANY",componentWillReceiveProps:"DEFINE_MANY",shouldComponentUpdate:"DEFINE_ONCE",componentWillUpdate:"DEFINE_MANY",componentDidUpdate:"DEFINE_MANY",componentWillUnmount:"DEFINE_MANY",UNSAFE_componentWillMount:"DEFINE_MANY",UNSAFE_componentWillReceiveProps:"DEFINE_MANY",UNSAFE_componentWillUpdate:"DEFINE_MANY",updateComponent:"OVERRIDE_BASE"},y={getDerivedStateFromProps:"DEFINE_MANY_MERGED"},E={displayName:function(e,t){e.displayName=t},mixins:function(e,t){if(t)for(var a=0;a<t.length;a++)l(e,t[a])},childContextTypes:function(e,t){e.childContextTypes=i({},e.childContextTypes,t)},contextTypes:function(e,t){e.contextTypes=i({},e.contextTypes,t)},getDefaultProps:function(e,t){e.getDefaultProps?e.getDefaultProps=m(e.getDefaultProps,t):e.getDefaultProps=t},propTypes:function(e,t){e.propTypes=i({},e.propTypes,t)},statics:function(e,t){d(e,t)},autobind:function(){}},b={componentDidMount:function(){this.__isMounted=!0}},N={componentWillUnmount:function(){this.__isMounted=!1}},R={replaceState:function(e,t){this.updater.enqueueReplaceState(this,e,t)},isMounted:function(){return!!this.__isMounted}},k=function(){};return i(k.prototype,e.prototype,R),h}var i=a(149),s=a(273),r=a(274),c="mixins";e.exports=o},function(e,t,a){"use strict";var n={};e.exports=n},function(e,t,a){"use strict";function n(e,t,a,n,i,s,r,c){if(o(t),!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var d=[a,n,i,s,r,c],u=0;l=new Error(t.replace(/%s/g,function(){return d[u++]})),l.name="Invariant Violation"}throw l.framesToPop=1,l}}var o=function(e){};e.exports=n},function(e,t,a){function n(e,t){t=o(t,e);for(var a=0,n=t.length;null!=e&&a<n;)e=e[i(t[a++])];return a&&a==n?e:void 0}var o=a(97),i=a(106);e.exports=n},function(e,t,a){function n(e,t){if(o(e))return!1;var a=typeof e;return!("number"!=a&&"symbol"!=a&&"boolean"!=a&&null!=e&&!i(e))||(r.test(e)||!s.test(e)||null!=t&&e in Object(t))}var o=a(68),i=a(98),s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;e.exports=n},function(e,t,a){(function(t){var a="object"==typeof t&&t&&t.Object===Object&&t;e.exports=a}).call(t,a(102))},function(e,t,a){function n(e){var t=s.call(e,c),a=e[c];try{e[c]=void 0;var n=!0}catch(e){}var o=r.call(e);return n&&(t?e[c]=a:delete e[c]),o}var o=a(100),i=Object.prototype,s=i.hasOwnProperty,r=i.toString,c=o?o.toStringTag:void 0;e.exports=n},function(e,t){function a(e){return o.call(e)}var n=Object.prototype,o=n.toString;e.exports=a},function(e,t,a){var n=a(281),o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,i=/\\(\\)?/g,s=n(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(o,function(e,a,n,o){t.push(n?o.replace(i,"$1"):a||e)}),t});e.exports=s},function(e,t,a){function n(e){var t=o(e,function(e){return a.size===i&&a.clear(),e}),a=t.cache;return t}var o=a(282),i=500;e.exports=n},function(e,t,a){function n(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(i);var a=function(){var n=arguments,o=t?t.apply(this,n):n[0],i=a.cache;if(i.has(o))return i.get(o);var s=e.apply(this,n);return a.cache=i.set(o,s)||i,s};return a.cache=new(n.Cache||o),a}var o=a(283),i="Expected a function";n.Cache=o,e.exports=n},function(e,t,a){function n(e){var t=-1,a=null==e?0:e.length;for(this.clear();++t<a;){var n=e[t];this.set(n[0],n[1])}}var o=a(284),i=a(304),s=a(306),r=a(307),c=a(308);n.prototype.clear=o,n.prototype.delete=i,n.prototype.get=s,n.prototype.has=r,n.prototype.set=c,e.exports=n},function(e,t,a){function n(){this.size=0,this.__data__={hash:new o,map:new(s||i),string:new o}}var o=a(285),i=a(297),s=a(303);e.exports=n},function(e,t,a){function n(e){var t=-1,a=null==e?0:e.length;for(this.clear();++t<a;){var n=e[t];this.set(n[0],n[1])}}var o=a(286),i=a(293),s=a(294),r=a(295),c=a(296);n.prototype.clear=o,n.prototype.delete=i,n.prototype.get=s,n.prototype.has=r,n.prototype.set=c,e.exports=n},function(e,t,a){function n(){this.__data__=o?o(null):{},this.size=0}var o=a(69);e.exports=n},function(e,t,a){function n(e){return!(!s(e)||i(e))&&(o(e)?f:l).test(r(e))}var o=a(288),i=a(289),s=a(105),r=a(291),c=/[\\^$.*+?()[\]{}|]/g,l=/^\[object .+?Constructor\]$/,d=Function.prototype,u=Object.prototype,m=d.toString,p=u.hasOwnProperty,f=RegExp("^"+m.call(p).replace(c,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=n},function(e,t,a){function n(e){if(!i(e))return!1;var t=o(e);return t==r||t==c||t==s||t==l}var o=a(99),i=a(105),s="[object AsyncFunction]",r="[object Function]",c="[object GeneratorFunction]",l="[object Proxy]";e.exports=n},function(e,t,a){function n(e){return!!i&&i in e}var o=a(290),i=function(){var e=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=n},function(e,t,a){var n=a(101),o=n["__core-js_shared__"];e.exports=o},function(e,t){function a(e){if(null!=e){try{return o.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var n=Function.prototype,o=n.toString;e.exports=a},function(e,t){function a(e,t){return null==e?void 0:e[t]}e.exports=a},function(e,t){function a(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}e.exports=a},function(e,t,a){function n(e){var t=this.__data__;if(o){var a=t[e];return a===i?void 0:a}return r.call(t,e)?t[e]:void 0}var o=a(69),i="__lodash_hash_undefined__",s=Object.prototype,r=s.hasOwnProperty;e.exports=n},function(e,t,a){function n(e){var t=this.__data__;return o?void 0!==t[e]:s.call(t,e)}var o=a(69),i=Object.prototype,s=i.hasOwnProperty;e.exports=n},function(e,t,a){function n(e,t){var a=this.__data__;return this.size+=this.has(e)?0:1,a[e]=o&&void 0===t?i:t,this}var o=a(69),i="__lodash_hash_undefined__";e.exports=n},function(e,t,a){function n(e){var t=-1,a=null==e?0:e.length;for(this.clear();++t<a;){var n=e[t];this.set(n[0],n[1])}}var o=a(298),i=a(299),s=a(300),r=a(301),c=a(302);n.prototype.clear=o,n.prototype.delete=i,n.prototype.get=s,n.prototype.has=r,n.prototype.set=c,e.exports=n},function(e,t){function a(){this.__data__=[],this.size=0}e.exports=a},function(e,t,a){function n(e){var t=this.__data__,a=o(t,e);return!(a<0)&&(a==t.length-1?t.pop():s.call(t,a,1),--this.size,!0)}var o=a(70),i=Array.prototype,s=i.splice;e.exports=n},function(e,t,a){function n(e){var t=this.__data__,a=o(t,e);return a<0?void 0:t[a][1]}var o=a(70);e.exports=n},function(e,t,a){function n(e){return o(this.__data__,e)>-1}var o=a(70);e.exports=n},function(e,t,a){function n(e,t){var a=this.__data__,n=o(a,e);return n<0?(++this.size,a.push([e,t])):a[n][1]=t,this}var o=a(70);e.exports=n},function(e,t,a){var n=a(104),o=a(101),i=n(o,"Map");e.exports=i},function(e,t,a){function n(e){var t=o(this,e).delete(e);return this.size-=t?1:0,t}var o=a(71);e.exports=n},function(e,t){function a(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}e.exports=a},function(e,t,a){function n(e){return o(this,e).get(e)}var o=a(71);e.exports=n},function(e,t,a){function n(e){return o(this,e).has(e)}var o=a(71);e.exports=n},function(e,t,a){function n(e,t){var a=o(this,e),n=a.size;return a.set(e,t),this.size+=a.size==n?0:1,this}var o=a(71);e.exports=n},function(e,t,a){function n(e){return null==e?"":o(e)}var o=a(310);e.exports=n},function(e,t,a){function n(e){if("string"==typeof e)return e;if(s(e))return i(e,n)+"";if(r(e))return d?d.call(e):"";var t=e+"";return"0"==t&&1/e==-c?"-0":t}var o=a(100),i=a(311),s=a(68),r=a(98),c=1/0,l=o?o.prototype:void 0,d=l?l.toString:void 0;e.exports=n},function(e,t){function a(e,t){for(var a=-1,n=null==e?0:e.length,o=Array(n);++a<n;)o[a]=t(e[a],a,e);return o}e.exports=a},function(e,t){function a(e,t){return null!=e&&o.call(e,t)}var n=Object.prototype,o=n.hasOwnProperty;e.exports=a},function(e,t,a){function n(e,t,a){t=o(t,e);for(var n=-1,d=t.length,u=!1;++n<d;){var m=l(t[n]);if(!(u=null!=e&&a(e,m)))break;e=e[m]}return u||++n!=d?u:!!(d=null==e?0:e.length)&&c(d)&&r(m,d)&&(s(e)||i(e))}var o=a(97),i=a(314),s=a(68),r=a(153),c=a(316),l=a(106);e.exports=n},function(e,t,a){var n=a(315),o=a(103),i=Object.prototype,s=i.hasOwnProperty,r=i.propertyIsEnumerable,c=n(function(){return arguments}())?n:function(e){return o(e)&&s.call(e,"callee")&&!r.call(e,"callee")};e.exports=c},function(e,t,a){function n(e){return i(e)&&o(e)==s}var o=a(99),i=a(103),s="[object Arguments]";e.exports=n},function(e,t){function a(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=n}var n=9007199254740991;e.exports=a},function(e,t,a){function n(e,t,a,n){if(!r(e))return e;t=i(t,e);for(var l=-1,d=t.length,u=d-1,m=e;null!=m&&++l<d;){var p=c(t[l]),f=a;if(l!=u){var g=m[p];f=n?n(g,p,m):void 0,void 0===f&&(f=r(g)?g:s(t[l+1])?[]:{})}o(m,p,f),m=m[p]}return e}var o=a(318),i=a(97),s=a(153),r=a(105),c=a(106);e.exports=n},function(e,t,a){function n(e,t,a){var n=e[t];r.call(e,t)&&i(n,a)&&(void 0!==a||t in e)||o(e,t,a)}var o=a(319),i=a(151),s=Object.prototype,r=s.hasOwnProperty;e.exports=n},function(e,t,a){function n(e,t,a){"__proto__"==t&&o?o(e,t,{configurable:!0,enumerable:!0,value:a,writable:!0}):e[t]=a}var o=a(320);e.exports=n},function(e,t,a){var n=a(104),o=function(){try{var e=n(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=o},function(e,t){},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=function(e){return e<10?"0"+e:e};return e.getFullYear()+"-"+t(e.getMonth()+1)+"-"+t(e.getDate())}Object.defineProperty(t,"__esModule",{value:!0});var i=a(17),s=n(i),r=a(107),c=n(r),l=a(108),d=n(l),u=a(9),m=n(u),p=a(36),f=n(p),g=a(0),h=n(g),v=a(3),_=n(v),y=a(1),E=n(y),b=a(2),N=n(b);a(16),a(109),a(110);var R=a(4),k=n(R),w=a(5),x=a(6),C=a(72),D=a(7),S=n(D);a(338);var I=function(e){return k.default.createElement("div",{className:"cover-thumb"},k.default.createElement("img",{src:e.url}),k.default.createElement(C.ImgUpload,{complete:function(t){return e.change(t)}}))},M=function(e){function t(e){(0,h.default)(this,t);var a=(0,E.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={userInfo:{},todayDate:"2018-8-10",userCityArr:["",""],isGetPhoneNumber:!1,isFromBack:!1,collectConfig:{},cardId:"",isNoConditionRecv:"",franchisee:"",backRouter:"",isCantChangeBir:!1,cityCol:1,cityData:[]},a.componentWillMount=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,x.getCurrentPageQueryParams)(),t=e.id||"",n=e.is_member||"",o=e.is_no_condition_recv||"",i=e.r||"",s=e.franchisee||"";a.setData({cardId:t||n,isNoConditionRecv:o,backRouter:i,franchisee:s}),a.data.cardId&&w.appMethod.setNavigationBarTitle({title:"会员信息"}),a.getCollectUserinfoConfig(),a.infoInit(),a.getXcxUserInfo(),a.getCityData(0)},a.componentDidShow=function(){a.data.isFromBack?a.getXcxUserInfo():a.setData({isFromBack:!0})},a.getCollectUserinfoConfig=function(){var e=a;w.appMethod.sendRequest({url:"/index.php?r=appVipCard/getCollectUserinfoConfig",method:"post",data:{},hideLoading:!1,success:function(t){e.setData({collectConfig:t.data})}})},a.getXcxUserInfo=function(){var e=a;w.appMethod.sendRequest({url:"/index.php?r=AppData/getXcxUserInfo",success:function(t){if(0==t.status){var a=t.data;e.setData({"userInfo.phone":a.phone||""})}}})},a.infoInit=function(){var e=new Date,t=w.appMethod.getUserInfo(),n=[""];"0000-00-00"===t.birthday&&(t.birthday=""),t.province&&t.city&&(n=[t.province,t.city]),a.setData({userInfo:t,isCantChangeBir:t.birthday&&"0000-00-00"!=t.birthday,userCityArr:n,isGetPhoneNumber:!!t.phone,todayDate:e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()})},a.choosePhoto=function(e){a.setData({"userInfo.cover_thumb":e})},a.selectedSex=function(e){a.setData({"userInfo.sex":e.target.value})},a.bindBirthdayChange=function(e){var t=o(e);a.setData({"userInfo.birthday":t})},a.bindCityChange=function(e){a.setData({userCityArr:e})},a.inputUserInfo=function(e){var t={};"nickname"===e.currentTarget.dataset.type?t={"userInfo.nickname":e.target.value}:"weixinCode"===e.currentTarget.dataset.type?t={"userInfo.weixin_code":e.target.value}:"email"===e.currentTarget.dataset.type?t={"userInfo.email":e.target.value}:"company"===e.currentTarget.dataset.type&&(t={"userInfo.company":e.target.value}),a.setData(t)},a.getPhoneNumber=function(e){if(!a.data.isGetPhoneNumber){var t=a;w.appMethod.checkSession(function(){e.target.encryptedData&&w.appMethod.sendRequest({hideLoading:!0,url:"/index.php?r=AppUser/GetPhoneNumber",data:{encryptedData:e.target.encryptedData||"",iv:e.target.iv||""},success:function(e){w.appMethod.setUserInfoStorage({phone:e.data}),t.setData({"userInfo.phone":e.data,isGetPhoneNumber:!0})},successStatus5:function(){w.appMethod.goLogin({success:function(){w.appMethod.showModal({content:"获取手机号失败，请再次点击授权获取"})},fail:function(){w.appMethod.showModal({content:"获取手机号失败，请再次点击授权获取"})}})}})})}},a.bindCellphonePage=function(){var e=w.appMethod.getAppCurrentPage().route.split("/").pop();a.data.cardId?w.appMethod.turnToPage("bindCellphone?r="+e+"&is_member=1",1):w.appMethod.turnToPage("bindCellphone?r="+e,1)},a.saveUserInfo=function(e){var t=a.data.userInfo,n=a,o=a.data.collectConfig,i={},s=a.data.cardId;s&&!a.validate()||t.email&&!a.checkEmail(t.email)||(i.nickname=t.nickname,i.phone=t.phone,i.sex=t.sex,i.birthday=t.birthday,i.cover_thumb=t.cover_thumb,0!=o.collect_company&&(i.company=t.company),0!=o.collect_email&&(i.email=t.email),0!=o.collect_region&&(i.province=a.data.userCityArr[0],i.city=a.data.userCityArr[1]),0!=o.collect_weixin_id&&(i.weixin_code=t.weixin_code),s&&(i.formId=e.target.formId),w.appMethod.sendRequest({url:"/index.php?r=AppData/saveUserInfo",method:"post",data:i,success:function(e){if(0===e.status){if(w.appMethod.setUserInfoStorage(i),n.data.isNoConditionRecv)return void n.recvVipCard();n.savedAction()}}}))},a.validate=function(){var e=a.data.collectConfig,t=a.data.userInfo;return 2!=e.collect_phone||t.phone?2!=e.collect_birthday||t.birthday&&"0000-00-00"!==t.birthday?2!=e.collect_weixin_id||t.weixin_code?2!=e.collect_email||t.email?2!=e.collect_company||t.company?!(2==e.collect_region&&!a.data.userCityArr[0]&&!a.data.userCityArr[1])||(w.appMethod.showModal({content:"请完善地址"}),!1):(w.appMethod.showModal({content:"请完善公司"}),!1):(w.appMethod.showModal({content:"请完善邮箱"}),!1):(w.appMethod.showModal({content:"请完善微信号"}),!1):(w.appMethod.showModal({content:"请完善生日"}),!1):(w.appMethod.showModal({content:"请完善手机号"}),!1)},a.savedAction=function(){w.appMethod.showToast({title:a.data.cardId?"领取成功":"保存成功",icon:"success"}),setTimeout(function(){w.appMethod.turnToPage(a.data.backRouter||"/pages/userCenterComponentPage/userCenterComponentPage")},1e3)},a.checkEmail=function(e){if(/^[a-zA-Z0-9_.-]+@[a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)*\.[a-zA-Z0-9]{2,6}$/.test(e))return!0;w.appMethod.showModal({content:"请填写正确的邮箱"})},a.recvVipCard=function(){var e=a;w.appMethod.sendRequest({data:{vipcard_id:e.data.cardId,sub_shop_app_id:e.data.franchisee},url:"/index.php?r=AppVipCard/RecvVipCard",hideLoading:!0,success:function(t){e.savedAction()}})},a.times=0,a.time="",a.getCityData=function(e){w.appMethod.sendRequest({data:{pid:e},url:"/index.php?r=Region/getRegionList",success:function(t){if(0===e)a.setData({cityData:[{label:"暂未选择",value:""}].concat((0,f.default)(t.data.map(function(e){return{id:e.id,label:e.name,value:e.name,children:[]}})))});else{var n=a.data.cityData.findIndex(function(t){return t.id==e});if(n>-1){var o;a.setData((o={},(0,m.default)(o,"cityData["+n+"].children",t.data.map(function(e){return{label:e.name,value:e.name}})||[]),(0,m.default)(o,"cityCol",2),o))}}a.cityData=[]}})},a.handleCityDataLoad=function(e){var t=e;if(t[0]&&!t[1]){a.setData({userCityArr:[].concat((0,f.default)(t))});var n=a.data.cityData.findIndex(function(e){return e.value==t[0]});0===a.data.cityData[n].children.length&&a.getCityData(a.data.cityData[n].id)}},a.logout=function(){w.appMethod.showModal({content:"确定要退出登录?",confirm:function(){w.appMethod.sendRequest({url:"/index.php?r=AppUser/logout",success:function(){w.appMethod.setIsLogin(!1),w.appMethod.turnToPage(w.appMethod.getHomepageRouter())}})},showCancel:function(){}})},document.title="个人信息",a}return(0,N.default)(t,e),(0,_.default)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.collectConfig,n=t.cardId,o=t.userInfo,i=(t.todayDate,t.isCantChangeBir),r=t.userCityArr,l=t.cityCol,u=t.cityData;return k.default.createElement("div",{className:"content"},k.default.createElement("div",{className:"info-wrapper"},(!n||a.collect_username&&"0"!==a.collect_username)&&k.default.createElement("div",{className:"info-item"},k.default.createElement("div",{className:"name "+("2"===a.collect_username&&n?"star":"")},"昵称"),k.default.createElement("div",{className:"right-block"},k.default.createElement("input",{style:{width:"4.00rem"},type:"text",placeholder:"请填写昵称",value:o.nickname||"","data-type":"nickname",onInput:this.inputUserInfo,onChange:function(){}}),k.default.createElement(I,{url:o.cover_thumb,change:function(t){return e.choosePhoto(t)}}),k.default.createElement("div",{className:"ico-moon icon-rightarrow"}))),(!n||a.collect_phone&&"0"!==a.collect_phone)&&k.default.createElement("div",{className:"info-item"},k.default.createElement("div",{className:"name "+("2"===a.collect_phone&&n?"star":"")},"手机号"),k.default.createElement("div",{className:"right-block",onClick:this.bindCellphonePage},k.default.createElement("div",null,o.phone||"请绑定手机号码"),k.default.createElement("div",{className:"ico-moon icon-rightarrow"}))),(!n||a.collect_sex&&"0"!==a.collect_sex)&&k.default.createElement("div",{className:"info-item"},k.default.createElement("div",{className:"name "+("2"===a.collect_sex&&n?"star":"")},"性别"),k.default.createElement("div",{className:"right-block"},k.default.createElement("div",{className:"radio-group"},k.default.createElement("label",{className:"radio"},k.default.createElement(d.default,{name:"sex",value:"0",color:"#FF7100",checked:0==o.sex,onChange:function(t){return e.selectedSex(t)}},"男")),k.default.createElement("label",{className:"radio"},k.default.createElement(d.default,{name:"sex",value:"1",color:"#FF7100",checked:1==o.sex,onChange:function(t){return e.selectedSex(t)}},"女"))))),(!n||a.collect_birthday&&"0"!==a.collect_birthday)&&k.default.createElement("div",{className:"info-item birthday-info"},k.default.createElement("div",{className:"name "+("2"===a.collect_birthday&&n?"star":"")},"生日"),k.default.createElement("div",{className:"right-block"},k.default.createElement(c.default,{disabled:i,mode:"date",format:"YYYY-MM-DD",onChange:function(t){return e.bindBirthdayChange(t)},minDate:new Date(1900,1,1,0,0,0),maxDate:new Date(2030,1,1,23,59,59)},k.default.createElement("div",{className:"birthday-picker"},k.default.createElement("div",{className:"picker"},o.birthday?o.birthday:"请选择出生日期"))),!i&&k.default.createElement("div",{className:"ico-moon icon-rightarrow"}),k.default.createElement("div",{className:"comment"},"注:生日保存之后不允许修改，请正确填写"))),!(!a.collect_weixin_id||"0"===a.collect_weixin_id)&&k.default.createElement("div",{className:"info-item"},k.default.createElement("div",{className:"name "+("2"===a.collect_weixin_id&&n?"star":"")},"微信号"),k.default.createElement("div",{className:"right-block"},k.default.createElement("input",{type:"text",placeholder:"请填写微信号",value:o.weixin_code,"data-type":"weixinCode",onInput:this.inputUserInfo||"",onChange:function(){}}))),!(!a.collect_email||"0"===a.collect_email)&&k.default.createElement("div",{className:"info-item"},k.default.createElement("div",{className:"name "+("2"===a.collect_email&&n?"star":"")},"邮箱"),k.default.createElement("div",{className:"right-block"},k.default.createElement("input",{type:"text",placeholder:"请填写邮箱",value:o.email||"","data-type":"email",onChange:this.inputUserInfo}))),!(!a.collect_company||"0"===a.collect_company)&&k.default.createElement("div",{className:"info-item"},k.default.createElement("div",{className:"name "+("2"===a.collect_company&&n?"star":"")},"公司"),k.default.createElement("div",{className:"right-block"},k.default.createElement("input",{type:"text",placeholder:"请填写公司",value:o.company||"","data-type":"company",onInput:this.inputUserInfo,onChange:function(){}}))),!(!a.collect_region||"0"===a.collect_region)&&k.default.createElement("div",{className:"info-item "},k.default.createElement("div",{className:"name "+("2"===a.collect_region&&n?"star":"")},"所在地"),k.default.createElement("div",{className:"right-block"},k.default.createElement(s.default,{data:u,value:r,cols:l,onPickerChange:function(t){return e.handleCityDataLoad(t)},onOk:function(t){return e.bindCityChange(t)}},k.default.createElement("div",{className:"picker",style:{color:""===r[0]?"#999":"#000"}},""===r[0]?"请填写所在城市":r.join(""))),k.default.createElement("div",{className:"ico-moon icon-rightarrow"})))),k.default.createElement("div",{className:"tip"},"请完善个人信息，以便我们为你提供更好的会员服务"),k.default.createElement("button",{className:"save-btn",onClick:this.saveUserInfo},n?"立即领取":"保存"),k.default.createElement("button",{className:"logout-btn",onClick:this.logout},"退出登录"))}}]),t}(S.default);t.default=M},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return new Date(e.getFullYear(),e.getMonth()+1,0).getDate()}function i(e){return e<10?"0"+e:e+""}function s(e){return new Date(+e)}function r(e,t){e.setDate(Math.min(e.getDate(),o(new Date(e.getFullYear(),t)))),e.setMonth(t)}Object.defineProperty(t,"__esModule",{value:!0});var c=a(8),l=n(c),d=a(0),u=n(d),m=a(3),p=n(m),f=a(1),g=n(f),h=a(2),v=n(h),_=a(4),y=n(_),E=a(66),b=n(E),N=a(67),R=n(N),k=a(325),w=n(k),x="datetime",C="date",D="time",S="month",I="year",M=function(e){function t(){(0,u.default)(this,t);var e=(0,g.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.state={date:e.props.date||e.props.defaultDate},e.getNewDate=function(t,a){var n=parseInt(t[a],10),o=e.props,i=o.mode,c=s(e.getDate());if(i===x||i===C||i===I||i===S)switch(a){case 0:c.setFullYear(n);break;case 1:r(c,n);break;case 2:c.setDate(n);break;case 3:e.setHours(c,n);break;case 4:c.setMinutes(n);break;case 5:e.setAmPm(c,n)}else if(i===D)switch(a){case 0:e.setHours(c,n);break;case 1:c.setMinutes(n);break;case 2:e.setAmPm(c,n)}return e.clipDate(c)},e.onValueChange=function(t,a){var n=e.props,o=e.getNewDate(t,a);"date"in n||e.setState({date:o}),n.onDateChange&&n.onDateChange(o),n.onValueChange&&n.onValueChange(t,a)},e.onScrollChange=function(t,a){var n=e.props;if(n.onScrollChange){var o=e.getNewDate(t,a);n.onScrollChange(o,t,a)}},e}return(0,v.default)(t,e),(0,p.default)(t,[{key:"componentWillReceiveProps",value:function(e){"date"in e&&this.setState({date:e.date||e.defaultDate})}},{key:"setHours",value:function(e,t){if(this.props.use12Hours){var a=e.getHours(),n=t;n=a>=12?t+12:t,n=n>=24?0:n,e.setHours(n)}else e.setHours(t)}},{key:"setAmPm",value:function(e,t){0===t?e.setTime(+e-432e5):e.setTime(+e+432e5)}},{key:"getDefaultMinDate",value:function(){return this.defaultMinDate||(this.defaultMinDate=new Date(2e3,1,1,0,0,0)),this.defaultMinDate}},{key:"getDefaultMaxDate",value:function(){return this.defaultMaxDate||(this.defaultMaxDate=new Date(2030,1,1,23,59,59)),this.defaultMaxDate}},{key:"getDate",value:function(){return this.clipDate(this.state.date||this.getDefaultMinDate())}},{key:"getValue",value:function(){return this.getDate()}},{key:"getMinYear",value:function(){return this.getMinDate().getFullYear()}},{key:"getMaxYear",value:function(){return this.getMaxDate().getFullYear()}},{key:"getMinMonth",value:function(){return this.getMinDate().getMonth()}},{key:"getMaxMonth",value:function(){return this.getMaxDate().getMonth()}},{key:"getMinDay",value:function(){return this.getMinDate().getDate()}},{key:"getMaxDay",value:function(){return this.getMaxDate().getDate()}},{key:"getMinHour",value:function(){return this.getMinDate().getHours()}},{key:"getMaxHour",value:function(){return this.getMaxDate().getHours()}},{key:"getMinMinute",value:function(){return this.getMinDate().getMinutes()}},{key:"getMaxMinute",value:function(){return this.getMaxDate().getMinutes()}},{key:"getMinDate",value:function(){return this.props.minDate||this.getDefaultMinDate()}},{key:"getMaxDate",value:function(){return this.props.maxDate||this.getDefaultMaxDate()}},{key:"getDateData",value:function(){for(var e=this.props,t=e.locale,a=e.formatMonth,n=e.formatDay,i=e.mode,s=this.getDate(),r=s.getFullYear(),c=s.getMonth(),l=this.getMinYear(),d=this.getMaxYear(),u=this.getMinMonth(),m=this.getMaxMonth(),p=this.getMinDay(),f=this.getMaxDay(),g=[],h=l;h<=d;h++)g.push({value:h+"",label:h+t.year+""});var v={key:"year",props:{children:g}};if(i===I)return[v];var _=[],y=0,E=11;l===r&&(y=u),d===r&&(E=m);for(var b=y;b<=E;b++){var N=a?a(b,s):b+1+t.month+"";_.push({value:b+"",label:N})}var R={key:"month",props:{children:_}};if(i===S)return[v,R];var k=[],w=1,x=o(s);l===r&&u===c&&(w=p),d===r&&m===c&&(x=f);for(var C=w;C<=x;C++){var D=n?n(C,s):C+t.day+"";k.push({value:C+"",label:D})}return[v,R,{key:"day",props:{children:k}}]}},{key:"getDisplayHour",value:function(e){return this.props.use12Hours?(0===e&&(e=12),e>12&&(e-=12),e):e}},{key:"getTimeData",value:function(e){var t=0,a=23,n=0,o=59,s=this.props,r=s.mode,c=s.locale,l=s.minuteStep,d=s.use12Hours,u=this.getMinMinute(),m=this.getMaxMinute(),p=this.getMinHour(),f=this.getMaxHour(),g=e.getHours();if(r===x){var h=e.getFullYear(),v=e.getMonth(),_=e.getDate(),y=this.getMinYear(),E=this.getMaxYear(),b=this.getMinMonth(),N=this.getMaxMonth(),R=this.getMinDay(),k=this.getMaxDay();y===h&&b===v&&R===_&&(t=p,p===g&&(n=u)),E===h&&N===v&&k===_&&(a=f,f===g&&(o=m))}else t=p,p===g&&(n=u),a=f,f===g&&(o=m);var w=[];0===t&&0===a||0!==t&&0!==a?t=this.getDisplayHour(t):0===t&&d&&(t=1,w.push({value:"0",label:c.hour?"12"+c.hour:"12"})),a=this.getDisplayHour(a);for(var C=t;C<=a;C++)w.push({value:C+"",label:c.hour?C+c.hour+"":i(C)});for(var D=[],S=e.getMinutes(),I=n;I<=o;I+=l)D.push({value:I+"",label:c.minute?I+c.minute+"":i(I)}),S>I&&S<I+l&&D.push({value:S+"",label:c.minute?S+c.minute+"":i(S)});return{cols:[{key:"hours",props:{children:w}},{key:"minutes",props:{children:D}}].concat(d?[{key:"ampm",props:{children:[{value:"0",label:c.am},{value:"1",label:c.pm}]}}]:[]),selMinute:S}}},{key:"clipDate",value:function(e){var t=this.props.mode,a=this.getMinDate(),n=this.getMaxDate();if(t===x){if(e<a)return s(a);if(e>n)return s(n)}else if(t===C||t===I||t===S){if(+e+864e5<=a)return s(a);if(e>=+n+864e5)return s(n)}else if(t===D){var o=n.getHours(),i=n.getMinutes(),r=a.getHours(),c=a.getMinutes(),l=e.getHours(),d=e.getMinutes();if(l<r||l===r&&d<c)return s(a);if(l>o||l===o&&d>i)return s(n)}return e}},{key:"getValueCols",value:function(){var e=this.props,t=e.mode,a=e.use12Hours,n=this.getDate(),o=[],i=[];if(t===I)return{cols:this.getDateData(),value:[n.getFullYear()+""]};if(t===S)return{cols:this.getDateData(),value:[n.getFullYear()+"",n.getMonth()+""]};if(t!==x&&t!==C||(o=this.getDateData(),i=[n.getFullYear()+"",n.getMonth()+"",n.getDate()+""]),t===x||t===D){var s=this.getTimeData(n);o=o.concat(s.cols);var r=n.getHours(),c=[r+"",s.selMinute+""],l=r;a&&(l=0===r?12:r>12?r-12:r,c=[l+"",s.selMinute+"",(r>=12?1:0)+""]),i=i.concat(c)}return{value:i,cols:o}}},{key:"render",value:function(){var e=this.getValueCols(),t=e.value,a=e.cols,n=this.props,o=n.disabled,i=n.pickerPrefixCls,s=n.prefixCls,r=n.rootNativeProps,c=n.className,d=n.style,u=n.itemStyle,m=(0,l.default)({flexDirection:"row",alignItems:"center"},d);return y.default.createElement(b.default,{style:m,rootNativeProps:r,className:c,prefixCls:s,selectedValue:t,onValueChange:this.onValueChange,onScrollChange:this.onScrollChange},a.map(function(e){return y.default.createElement(R.default,{style:{flex:1},key:e.key,disabled:o,prefixCls:i,itemStyle:u},e.props.children.map(function(e){return y.default.createElement(R.default.Item,{key:e.value,value:e.value},e.label)}))}))}}]),t}(y.default.Component);M.defaultProps={prefixCls:"rmc-date-picker",pickerPrefixCls:"rmc-picker",locale:w.default,mode:C,disabled:!1,minuteStep:1,onDateChange:function(){},use12Hours:!1},t.default=M,e.exports=t.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={year:"",month:"",day:"",hour:"",minute:"",am:"AM",pm:"PM"},e.exports=t.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(8),i=n(o),s=a(0),r=n(s),c=a(3),l=n(c),d=a(1),u=n(d),m=a(2),p=n(m),f=a(4),g=n(f),h=a(141),v=n(h),_=function(e){function t(){(0,r.default)(this,t);var e=(0,u.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.onOk=function(t){var a=e.props,n=a.onChange,o=a.onOk;n&&n(t),o&&o(t)},e}return(0,p.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){return g.default.createElement(v.default,(0,i.default)({picker:this.props.datePicker,value:this.props.date},this.props,{onOk:this.onOk}))}}]),t}(g.default.Component);_.defaultProps={pickerValueProp:"date",pickerValueChangeProp:"onDateChange"},t.default=_,e.exports=t.default},function(e,t,a){"use strict";function n(e,t){var a=function(e){return e<10?"0"+e:e},n=e.getFullYear()+"-"+a(e.getMonth()+1)+"-"+a(e.getDate()),o=a(e.getHours())+":"+a(e.getMinutes());return"YYYY-MM-DD"===t?n:"HH:mm"===t?o:n+" "+o}function o(e,t){var a={date:"YYYY-MM-DD",time:"HH:mm",datetime:"YYYY-MM-DD HH:mm"},o=e.props.format,i=void 0===o?"undefined":(0,s.default)(o);return"string"===i?n(t,o):"function"===i?o(t):n(t,a[e.props.mode])}Object.defineProperty(t,"__esModule",{value:!0});var i=a(13),s=function(e){return e&&e.__esModule?e:{default:e}}(i);t.formatFn=o},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(329),o=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default={okText:"确定",dismissText:"取消",extra:"请选择",DatePickerLocale:o.default},e.exports=t.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={year:"年",month:"月",day:"日",hour:"时",minute:"分",am:"上午",pm:"下午"},e.exports=t.default},function(e,t,a){function n(e,t,a){return!o(e.props,t)||!o(e.state,a)}var o=a(331),i={shouldComponentUpdate:function(e,t){return n(this,e,t)}};e.exports=i},function(e,t,a){"use strict";var n=a(332);e.exports=function(e,t,a,o){var i=a?a.call(o,e,t):void 0;if(void 0!==i)return!!i;if(e===t)return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var s=n(e),r=n(t),c=s.length;if(c!==r.length)return!1;o=o||null;for(var l=Object.prototype.hasOwnProperty.bind(t),d=0;d<c;d++){var u=s[d];if(!l(u))return!1;var m=e[u],p=t[u],f=a?a.call(o,m,p,u):void 0;if(!1===f||void 0===f&&m!==p)return!1}return!0}},function(e,t,a){function n(e){return null!=e&&i(v(e))}function o(e,t){return e="number"==typeof e||m.test(e)?+e:-1,t=null==t?h:t,e>-1&&e%1==0&&e<t}function i(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=h}function s(e){for(var t=c(e),a=t.length,n=a&&e.length,s=!!n&&i(n)&&(u(e)||d(e)),r=-1,l=[];++r<a;){var m=t[r];(s&&o(m,n)||f.call(e,m))&&l.push(m)}return l}function r(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function c(e){if(null==e)return[];r(e)||(e=Object(e));var t=e.length;t=t&&i(t)&&(u(e)||d(e))&&t||0;for(var a=e.constructor,n=-1,s="function"==typeof a&&a.prototype===e,c=Array(t),l=t>0;++n<t;)c[n]=n+"";for(var m in e)l&&o(m,t)||"constructor"==m&&(s||!f.call(e,m))||c.push(m);return c}var l=a(333),d=a(334),u=a(335),m=/^\d+$/,p=Object.prototype,f=p.hasOwnProperty,g=l(Object,"keys"),h=9007199254740991,v=function(e){return function(t){return null==t?void 0:t[e]}}("length"),_=g?function(e){var t=null==e?void 0:e.constructor;return"function"==typeof t&&t.prototype===e||"function"!=typeof e&&n(e)?s(e):r(e)?g(e):[]}:s;e.exports=_},function(e,t){function a(e){return!!e&&"object"==typeof e}function n(e,t){var a=null==e?void 0:e[t];return s(a)?a:void 0}function o(e){return i(e)&&m.call(e)==r}function i(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function s(e){return null!=e&&(o(e)?p.test(d.call(e)):a(e)&&c.test(e))}var r="[object Function]",c=/^\[object .+?Constructor\]$/,l=Object.prototype,d=Function.prototype.toString,u=l.hasOwnProperty,m=l.toString,p=RegExp("^"+d.call(u).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=n},function(e,t){function a(e){return o(e)&&f.call(e,"callee")&&(!h.call(e,"callee")||g.call(e)==d)}function n(e){return null!=e&&s(e.length)&&!i(e)}function o(e){return c(e)&&n(e)}function i(e){var t=r(e)?g.call(e):"";return t==u||t==m}function s(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=l}function r(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function c(e){return!!e&&"object"==typeof e}var l=9007199254740991,d="[object Arguments]",u="[object Function]",m="[object GeneratorFunction]",p=Object.prototype,f=p.hasOwnProperty,g=p.toString,h=p.propertyIsEnumerable;e.exports=a},function(e,t){function a(e){return!!e&&"object"==typeof e}function n(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=g}function o(e){return i(e)&&m.call(e)==r}function i(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function s(e){return null!=e&&(o(e)?p.test(d.call(e)):a(e)&&c.test(e))}var r="[object Function]",c=/^\[object .+?Constructor\]$/,l=Object.prototype,d=Function.prototype.toString,u=l.hasOwnProperty,m=l.toString,p=RegExp("^"+d.call(u).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),f=function(e,t){var a=null==e?void 0:e[t];return s(a)?a:void 0}(Array,"isArray"),g=9007199254740991,h=f||function(e){return a(e)&&n(e.length)&&"[object Array]"==m.call(e)};e.exports=h},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(){}Object.defineProperty(t,"__esModule",{value:!0});var i=a(8),s=n(i),r=a(9),c=n(r),l=a(0),d=n(l),u=a(3),m=n(u),p=a(1),f=n(p),g=a(2),h=n(g),v=a(10),_=n(v),y=a(4),E=n(y),b=a(39),N=n(b),R=a(155),k=n(R),w=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&(a[n[o]]=e[n[o]]);return a},x=N.default.Item,C=function(e){function t(){return(0,d.default)(this,t),(0,f.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,h.default)(t,e),(0,m.default)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.listPrefixCls,n=(t.onChange,t.disabled),i=t.radioProps,r=t.onClick,l=w(t,["listPrefixCls","onChange","disabled","radioProps","onClick"]),d=l.prefixCls,u=l.className,m=l.children,p=(0,_.default)(d+"-item",u,(0,c.default)({},d+"-item-disabled",!0===n));n||(l.onClick=r||o);var f={};return["name","defaultChecked","checked","onChange","disabled"].forEach(function(t){t in e.props&&(f[t]=e.props[t])}),E.default.createElement(x,(0,s.default)({},l,{prefixCls:a,className:p,extra:E.default.createElement(k.default,(0,s.default)({},i,f))}),m)}}]),t}(E.default.Component);t.default=C,C.defaultProps={prefixCls:"am-radio",listPrefixCls:"am-list",radioProps:{}},e.exports=t.default},function(e,t){},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(94),i=n(o),s=a(143),r=n(s),c=a(22),l=n(c),d=a(9),u=n(d),m=a(0),p=n(m),f=a(3),g=n(f),h=a(1),v=n(h),_=a(2),y=n(_);a(96),a(145),a(23);var E=a(4),b=n(E),N=a(146),R=a(38),k=a(6),w=a(34);a(340);var x=null,C=function(e){function t(e){(0,p.default)(this,t);var a=(0,v.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={picCode:"",picCodeUrl:"/index.php?r=Login/GetIdentifyCode&i="+parseInt(1e7*Math.random()),identifyCode:"",verifying:!1,time:60,nextSteping:!1,currentStep:0,newPhone:"",binding:!1},a.handleChange=function(e,t){a.setState((0,u.default)({},e,t.target.value))},a.getPicCode=function(){a.setState({picCodeUrl:"/index.php?r=Login/GetIdentifyCode&i="+parseInt(1e7*Math.random())})},a.getIdentifyCode=function(){if(!a.state.verifying){if(!a.state.picCode)return void l.default.info("请输入图形验证码");if(1===a.state.currentStep&&!(0,k.checkIfPhone)(a.state.newPhone))return void l.default.info("请输入正确的手机号");a.setState({verifying:!0,time:60});var e="",t={app_id:(0,R.getAppId)(),pic_code:a.state.picCode};0===a.state.currentStep?e="/index.php?r=AppData/PhoneCode":1===a.state.currentStep&&(e="/index.php?r=AppData/NewPhoneCode",t.phone=a.state.newPhone),(0,w.ajax)({url:e,data:t,success:function(){x=setInterval(function(){0===a.state.time&&(clearInterval(x),a.setState({verifying:!1,time:60})),a.setState({time:--a.state.time})},1e3)}})}},a.handleNextStep=function(){if(!a.state.nextSteping){if(!a.state.identifyCode)return void l.default.info("请输入验证码");a.setState({nextSteping:!0}),(0,w.ajax)({url:"/index.php?r=AppData/VerifyPhone",data:{app_id:(0,R.getAppId)(),code:a.state.identifyCode},success:function(e){a.setState({nextSteping:!1,currentStep:1,verifying:!1,time:60,newPhone:"",picCode:"",identifyCode:""}),a.getPicCode()},error:function(){a.setState({nextSteping:!1})}})}},a.handleBindPhone=function(){if(!a.state.binding){if(!(0,k.checkIfPhone)(a.state.newPhone))return void l.default.info("请输入正确的手机号");if(!a.state.identifyCode)return void l.default.info("请输入验证码");a.setState({binding:!0}),(0,w.ajax)({url:"/index.php?r=AppData/VerifyNewPhone",data:{app_id:(0,R.getAppId)(),code:a.state.identifyCode,phone:a.state.newPhone},success:function(e){if(a.setState({binding:!1}),0!==e.status)return void l.default.info(e.data);a.props.history.goBack(),l.default.info("绑定成功")},error:function(){a.setState({binding:!1})}})}},document.title="绑定手机号",a}return(0,y.default)(t,e),(0,g.default)(t,[{key:"render",value:function(){return 0===this.state.currentStep?b.default.createElement("div",{id:"bindPhonePage",className:"page"},b.default.createElement(r.default,{size:"lg"}),b.default.createElement("div",{className:"row"},b.default.createElement("input",{className:"pic-code-input",type:"text",placeholder:"图形验证码",value:this.state.picCode,onChange:this.handleChange.bind(this,"picCode")}),b.default.createElement("img",{className:"pic-code-url",src:this.state.picCodeUrl,onClick:this.getPicCode})),b.default.createElement(r.default,null),b.default.createElement("div",{className:"row"},b.default.createElement("input",{className:"code-input",placeholder:"请输入验证码",value:this.state.identifyCode,onChange:this.handleChange.bind(this,"identifyCode")}),b.default.createElement("span",{className:"get-code-btn",onClick:this.getIdentifyCode},this.state.verifying&&60!==this.state.time?this.state.time+"s":"获取验证码")),b.default.createElement(r.default,{size:"lg"}),b.default.createElement("div",{className:"row"},b.default.createElement(i.default,{type:"primary",style:{fontSize:"16px",height:"38px",lineHeight:"38px"},onClick:this.handleNextStep},"下一步"))):1===this.state.currentStep?b.default.createElement("div",{id:"bindPhonePage",className:"page"},b.default.createElement(r.default,{size:"lg"}),b.default.createElement("div",{className:"row"},b.default.createElement("div",{className:"phone-label"},"绑定新手机号"),b.default.createElement("input",{className:"phone-input",placeholder:"请输入手机号",value:this.state.newPhone,onChange:this.handleChange.bind(this,"newPhone")})),b.default.createElement(r.default,null),b.default.createElement("div",{className:"row"},b.default.createElement("input",{className:"pic-code-input",type:"text",placeholder:"图形验证码",value:this.state.picCode,onChange:this.handleChange.bind(this,"picCode")}),b.default.createElement("img",{className:"pic-code-url",src:this.state.picCodeUrl,onClick:this.getPicCode})),b.default.createElement(r.default,null),b.default.createElement("div",{className:"row"},b.default.createElement("input",{className:"code-input",placeholder:"请输入验证码",value:this.state.identifyCode,onChange:this.handleChange.bind(this,"identifyCode")}),b.default.createElement("span",{className:"get-code-btn",onClick:this.getIdentifyCode},this.state.verifying&&60!==this.state.time?this.state.time+"s":"获取验证码")),b.default.createElement(r.default,{size:"lg"}),b.default.createElement("div",{className:"row"},b.default.createElement(i.default,{type:"primary",style:{fontSize:"16px",height:"38px",lineHeight:"38px"},onClick:this.handleBindPhone},"确认绑定"))):void 0}}]),t}(b.default.Component);t.default=(0,N.createForm)()(C)},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(0),i=n(o),s=a(3),r=n(s),c=a(1),l=n(c),d=a(2),u=n(d),m=a(4),p=n(m),f=a(7),g=n(f),h=a(5),v=a(6);a(342);var _=function(e){function t(e){(0,i.default)(this,t);var a=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={type:"",itemList:[],selectedItem:{index:-1,id:"",description:"",price:0,description_type:"1"},customItemInfo:{status:0,tip:""},customPrice:"",couponItemList:[],selectedCouponItem:{index:-1,id:""},isPaying:!1,storedId:0},a.getBalanceData=function(){var e=a;h.appMethod.sendRequest({url:"/index.php?r=AppShop/getAppUserBalance",hideLoading:!0,success:function(t){e.setData({currentBalance:t.data.balance})}})},a.getItemInfo=function(){var e=a,t={ver:"2.2"};h.appMethod.sendRequest({url:"/index.php?r=AppShop/getStoredItems",data:t,hideLoading:!0,success:function(t){0!=t.data.length?(e.setData({type:1,itemList:e.parseItemData(t.data),"selectedItem.index":0,"selectedItem.id":t.data[0].id,"selectedItem.description":t.data[0].description}),e.defaultSelect(e.data.itemList)):0==t.data.length&&e.setData({type:1,"selectedItem.index":-1}),e.setData({customItemInfo:e.parseCustomItemData(t.stored_custom_info),couponItemList:e.parseCouponItemData(t.user_coupon_list)})}})},a.parseItemData=function(e){var t=[],n={};e=a.givingInstructions(e);for(var o=0;o<e.length;o++)n={},n.id=e[o].id,n.rechargeMoney=Number(e[o].price),n.instructions=e[o].instructions,n.description=e[o].description,n.description_type=e[o].description_type,t.push(n);return t},a.givingInstructions=function(e){var t=!0,a=!1,n=void 0;try{for(var o,i=e[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var s=o.value,r=[],c="";s.g_price=Number(s.g_price),s.g_price&&r.push(s.g_price+"元"),s.g_integral=Number(s.g_integral),s.g_integral&&r.push(s.g_integral+"积分"),s.g_vip_card&&s.g_vip_card.title&&r.push(s.g_vip_card.title),s.g_coupon_list&&s.g_coupon_list.length&&r.push(s.g_coupon_list[0].num+"张"+s.g_coupon_list[0].title);for(var l=0;l<r.length;l++)l!=r.length-1?c=c+r[l]+"、":c+=r[l];c&&(s.instructions="赠送"+c)}}catch(e){a=!0,n=e}finally{try{!t&&i.return&&i.return()}finally{if(a)throw n}}return e},a.selectActiveItem=function(e){var t=a,n=e.currentTarget.dataset.index;t.setData({type:1,"selectedItem.index":n,"selectedItem.id":t.data.itemList[n].id,"selectedItem.description":t.data.itemList[n].description,"selectedItem.price":t.data.itemList[n].rechargeMoney,"selectedItem.description_type":t.data.itemList[n].description_type})},a.parseCustomItemData=function(e){return function(t){return t=e,1==e.type?t.tip="按充值金额x"+e.value+"比例赠送储值金":2==e.type?t.tip="每充值"+e.condition+"元，赠送"+e.value+"元":t.tip="",t}({})},a.selectCustomItem=function(){a.setData({type:6})},a.confirmCustomPrice=function(e){var t=a,n=e.target.value,o=t.data.customItemInfo,i="";i=""==n?1==o.type?"按充值金额x"+o.value+"比例赠送储值金":2==o.type?"每充值"+o.condition+"元，赠送"+o.value+"元":"":/^[0-9]+([.]{1}[0-9]{1,2})?$/.test(n)?1==o.type?"赠送储值金"+(n*o.value).toFixed(2)+"元":2==o.type?"赠送储值金"+(Math.floor(n/o.condition)*o.value).toFixed(2)+"元":"":"充值的金额必须>=0，精确到小数点后2位!",t.setData({customPrice:e.target.value,"customItemInfo.tip":i})},a.parseCouponItemData=function(e){return function(t){for(var a={},n=0;n<e.length;n++)a={},a.id=e[n].id,a.price=Number(e[n].value),a.dateDuration=e[n].start_use_date.split("-").join(".")+"-"+e[n].end_use_date.split("-").join("."),a.otherCase=(1==e[n].exclude_holiday?"除法定节假日":"")+" "+(1==e[n].exclude_weekend?"周一至周五":""),a.timeDuration=e[n].start_use_time+"-"+e[n].end_use_time,t.push(a);return t}([])},a.selectActiveCouponItem=function(e){var t=a,n=e.currentTarget.dataset.index;t.setData({type:5,"selectedCouponItem.index":n,"selectedCouponItem.id":t.data.couponItemList[n].id})},a.payLoading=!1,a.gotoRecharge=function(e){var t=a,n=t.data.type;if(1==n&&-1==t.data.selectedItem.index)return""!=t.data.selectedItem.id&&(h.appMethod.showToast({title:"商家尚未建立储值项",icon:"loading",success:function(){}}),!1);if(6==n&&""==t.data.customPrice)return h.appMethod.showToast({title:"请输入充值的金额",icon:"loading",success:function(){}}),!1;var o={type:n,form_id:e.detail.formId};t.payLoading||(a.setIsPaying(!0),1==n?o.stored_id=t.data.selectedItem.id:5==n?o.user_coupon_id=t.data.selectedCouponItem.id:6==n&&(o.price=t.data.customPrice),h.appMethod.sendRequest({url:"/index.php?r=AppShop/creatStoredItemOrder",data:o,hideLoading:!0,success:function(e){var a=e.data;1==n||6==n?(h.appMethod.goPay({orderId:a,successUrl:"/balance"}),t.setIsPaying(!1)):5==n&&h.appMethod.showToast({title:"充值成功",success:function(){setTimeout(function(){h.appMethod.turnToPage("/eCommerce/pages/balance/balance")},1500),t.setIsPaying(!1)}})},fail:function(){t.setIsPaying(!1)},complete:function(){t.setIsPaying(!1)}}))},a.setIsPaying=function(e){a.payLoading=e,a.setData({isPaying:e})},a.defaultSelect=function(e){var t={currentTarget:{dataset:{index:0}}};if(a.data.storedId)for(var n=0;n<e.length;n++)e[n].id==a.data.storedId&&(t.currentTarget.dataset.index=n);a.selectActiveItem(t)},a.turnToRecords=function(){h.appMethod.turnToPage("/eCommerce/pages/balance/balance")},document.title="储值金充值",a}return(0,u.default)(t,e),(0,r.default)(t,[{key:"componentWillMount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,v.getCurrentPageQueryParams)();this.setData({storedId:e.storedId||0}),this.getBalanceData(),this.getItemInfo()}},{key:"render",value:function(){var e=this,t=this.state,a=t.currentBalance,n=t.itemList,o=t.type,i=t.selectedItem,s=t.customItemInfo,r=t.couponItemList,c=t.selectedCouponItem,l=t.isPaying;return p.default.createElement("div",{className:"recharge-wrap page",id:"recharge"},p.default.createElement("div",{className:"recharge-wrap-content"},p.default.createElement("div",{className:"stored-value-header"},p.default.createElement("div",{className:"stored-value-content"},p.default.createElement("div",{className:"stored-value-num"},a),p.default.createElement("div",{className:"stored-value-describe"},"当前储值金 (元)")),p.default.createElement("div",{className:"stored-value-record",onClick:this.turnToRecords},"充值记录")),(n.length>0||1==s.status)&&p.default.createElement("div",{className:"select-area"},p.default.createElement("div",{className:"select-list"},n.map(function(t,a){return p.default.createElement("div",{key:a,className:"select-item "+(1==o&&i.index==a?"active":""),"data-index":a,onClick:e.selectActiveItem},p.default.createElement("div",{className:"recharge-money "+(1==o&&i.index==a?"active":"")},t.rechargeMoney+"元"),p.default.createElement("div",{className:"give-money "+(1==o&&i.index==a?"active":"")},t.instructions))})),1==s.status&&p.default.createElement("div",{className:"custom-item "+(6==o?"active":""),onClick:this.selectCustomItem},p.default.createElement("div",{className:"item-title"},"自定义金额"),p.default.createElement("div",{className:"item-price-block"},p.default.createElement("span",{className:"item-price-symbol"},"¥"),p.default.createElement("input",{className:"item-price-input",type:"digit",placeholder:"请输入金额",onFocus:this.selectCustomItem,onBlur:this.confirmCustomPrice,onInput:this.confirmCustomPrice})),s.tip&&p.default.createElement("div",{className:"item-tip"},s.tip))),1==o&&""!=i.description&&p.default.createElement("div",{className:"instruction-area",style:1!=s.status?{paddingTop:".34rem"}:null},p.default.createElement("div",{className:"area-title"},"储值说明"),"1"==i.description_type&&p.default.createElement("div",{className:"area-content"},i.description),"2"==i.description_type&&p.default.createElement("img",{className:"area-image",src:i.description})),r.length>0&&p.default.createElement("div",{className:"coupon-area"},p.default.createElement("div",{className:"area-title"},"储值券充值"),p.default.createElement("div",{className:"coupon-list"},r.map(function(t,a){return p.default.createElement("div",{key:a},p.default.createElement("div",{className:"coupon-item "+(5==o&&c.index==a?"active":""),"data-index":a,onClick:e.selectActiveCouponItem},p.default.createElement("div",{className:"item-title"},"¥",p.default.createElement("span",{className:"price"},t.price),"储值券"),p.default.createElement("div",{className:"division-line"},p.default.createElement("div",{className:"left-semicircle"}),p.default.createElement("div",{className:"right-semicircle"})),p.default.createElement("div",{className:"bottom-section"},p.default.createElement("div",{className:"date-duration"},t.dateDuration),p.default.createElement("div",{className:"other-case"},t.otherCase),p.default.createElement("div",{className:"time-duration"},t.timeDuration))))}))),0==n.length&&1!=s.status&&p.default.createElement("div",{className:"recharge-no-data"},p.default.createElement("img",{className:"no-data-image",src:"http://cdn.jisuapp.cn/static/webapp/images/stored-value/none-stored-record.png"}),p.default.createElement("div",null,"暂无可充值选项"))),(n.length>0||1==s.status||r.length>0)&&p.default.createElement("div",{className:"recharge-bottom"},p.default.createElement("div",{className:"stored-value-form"},p.default.createElement("button",{className:"recharge-btn",onClick:this.gotoRecharge,disabled:l},"充值"))))}}]),t}(g.default);t.default=_},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(9),i=n(o),s=a(13),r=n(s),c=a(0),l=n(c),d=a(3),u=n(d),m=a(1),p=n(m),f=a(2),g=n(f),h=a(4),v=n(h),_=a(7),y=n(_),E=a(5),b=a(11),N=a(6);a(345);var R=function(e){function t(e){(0,l.default)(this,t);var a=(0,p.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={currentBalance:0,nowTime:"",year:"",month:"",earlyTime:"",messageData:{},messageParam:{},systemHeight:0,balanceHeight:0,booleanData:{isHideCouponNav:!0,isHideRecordNav:!0},recordsListData:{type:0,text:"全部"}},a.componentWillMount=function(){a.getSystemHeight(),a.getNowMonth(),a.getBalanceData(),a.getBalanceTime(),a.getAppECStoreConfig()},a.gotoRecharge=function(){E.appMethod.turnToPage("/eCommerce/pages/recharge/recharge",!0)},a.getBalanceData=function(){var e=a;E.appMethod.sendRequest({url:"/index.php?r=AppShop/getAppUserBalance",hideLoading:!0,success:function(t){e.setData({currentBalance:t.data.balance})}})},a.getBalanceTime=function(){var e=a;E.appMethod.sendRequest({url:"/index.php?r=AppShop/GetUserEarliestStoredLog",hideLoading:!0,data:{type:e.data.recordsListData.type},success:function(t){!t.status&&t.data?(e.setData({earlyTime:t.data.month||""}),e.getMessageData()):e.setData({earlyTime:""})}})},a.getMessageData=function(){var e=a;E.appMethod.sendRequest({url:"/index.php?r=AppShop/getStoredLogByUserToken",hideLoading:!0,data:{page:e.data.messageParam.currentPage||1,type:e.data.recordsListData.type,month:e.data.nowTime},success:function(t){var a=e.data.messageData,n=a["time"+e.data.nowTime]=e.data.messageData["time"+e.data.nowTime]||{};n.data=(e.data.messageData["time"+e.data.nowTime].data?e.data.messageData["time"+e.data.nowTime].data.concat(e.parseMessageData(t.data)):e.parseMessageData(t.data))||"",n.month=e.data.month,n.year=e.data.year,n.add=t.add||e.data.messageData["time"+e.data.nowTime].add||0,n.reduce=t.reduce||e.data.messageData["time"+e.data.nowTime].reduce||0,e.setData({messageData:a,"messageParam.isMore":t.is_more,"messageParam.currentPage":t.current_page||"","messageParam.onload":!1}),e.data.balanceHeight<=e.data.systemHeight&&e.getBalanceHeight()}})},a.parseMessageData=function(e){for(var t=[],a={},n=0;n<e.length;n++){var o=e[n].type,i=JSON.parse(e[n].stored_content),s="";1==o?s=Number(i.price)+Number(i.g_price):2==o||3==o||4==o?s=Number(i.price):5==o?s=Number(i.g_price):6==o||10==o||11==o||12==o||13==o||14==o||15==o?s=Number(i.price)+Number(i.g_price):7!=o&&8!=o&&9!=o&&16!=o&&17!=o&&18!=o||(s=Number(i.price));var r=i.remark;r=r?r.replace("\\n","\n"):"",a={type:o,num:s?s.toFixed(2):s,time:e[n].add_time,remark:r||""},t.push(a)}return t},a.checkMoreMessageData=function(){var e=a;0==e.data.messageParam.isMore||e.data.messageParam.onload?0!=e.data.messageParam.isMore||e.data.nowTime==e.data.earlyTime||e.data.messageParam.onload||(e.data.messageParam.currentPage=0,e.computeTimeGetData(),e.setData({"messageParam.onload":!0})):(e.data.messageParam.currentPage++,e.getMessageData(),e.setData({"messageParam.onload":!0}))},a.getAppECStoreConfig=function(){E.appMethod.getAppECStoreConfig(function(e){a.setData({storeStyle:e.color_config})})},a.getNowMonth=function(){var e=new Date,t=e.getMonth()+1;t=t<10?"0"+t:t;var n=String(e.getFullYear());a.data.year=n,a.data.month=t,a.data.nowTime=n+String(t),a.setData({year:n,month:t,nowTime:n+String(t)})},a.getSystemHeight=function(){var e=a;E.appMethod.getSystemInfo({success:function(t){e.setData({systemHeight:t.windowHeight})}})},a.getBalanceHeight=function(){var e=a,t=document.getElementById("balanceContent").getBoundingClientRect();e.setData({balanceHeight:t.height}),e.data.balanceHeight<=e.data.systemHeight&&e.computeTimeGetData()},a.computeTimeGetData=function(){if(a.data.nowTime!=a.data.earlyTime){var e=Number(a.data.month);1==e?(a.data.month=12,a.data.year=a.data.year-1,a.data.nowTime=String(a.data.year)+String(a.data.month)):(e-=1,a.data.month=e<10?"0"+String(e):String(e),a.data.nowTime=a.data.nowTime-1),a.getMessageData()}},a.toggleMoreType=function(e){var t=a.data,n="";if("string"==typeof e&&(n=e),"object"===(void 0===e?"undefined":(0,r.default)(e))&&e.currentTarget){n=e.currentTarget.dataset.name}var o=t.booleanData[n];o=!o,a.setData((0,i.default)({},"booleanData."+[n],o))},a.selectRecordType=function(e){e.stopPropagation();var t=["全部","收入","支出"],n=e.currentTarget.dataset.index;a.data.recordsListData.type!=n&&(a.getNowMonth(),a.setData({"recordsListData.type":n,"recordsListData.text":t[n],"messageParam.currentPage":1,messageData:{},balanceHeight:0}),a.getBalanceTime()),a.toggleMoreType("isHideRecordNav")},document.title="储值金",a}return(0,g.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this.state,t=(e.showGetUserInfo,e.currentBalance),a=e.recordsListData,n=e.booleanData,o=e.messageData,i=e.storeStyle,s=e.earlyTime;return v.default.createElement(v.default.Fragment,null,v.default.createElement("div",{className:"balance-wrap page",id:"balance"},v.default.createElement(b.ScrollView,{className:"balance-contnet","scroll-y":"true","lower-threshold":"116",bindscrolltolower:this.checkMoreMessageData},v.default.createElement("div",{id:"balanceContent"},v.default.createElement("div",{className:"balance-detail"},v.default.createElement("div",{className:"detail-text"},v.default.createElement("span",null,"当前储值金（元）")),v.default.createElement("div",{className:"detail-num"},v.default.createElement("span",null,t)),v.default.createElement("div",{className:"detail-recharge",onClick:this.gotoRecharge},v.default.createElement("span",null,"去充值"))),v.default.createElement("div",{className:"stored-value-filter"},v.default.createElement("div",{className:"stored-value-name"},"储值记录"),v.default.createElement("div",{className:"nav-content",onClick:this.toggleMoreType,"data-name":"isHideRecordNav"},v.default.createElement("span",{className:"active"},a.text),v.default.createElement("span",{className:"ico-moon icon-downarrow"}),v.default.createElement("div",{className:"coupons-cate",style:(0,N.convertLineStyleData)("height: "+(n.isHideRecordNav?"0":"270rpx"))},v.default.createElement("div",{className:"cate-list"},v.default.createElement("div",{className:"cate-item thin-bd-b","data-index":"0",onClick:this.selectRecordType},v.default.createElement("span",{className:"ico-moon icon-balance-all ico-moon-cover"}),"全部"),v.default.createElement("div",{className:"cate-item thin-bd-b","data-index":"1",onClick:this.selectRecordType},v.default.createElement("span",{className:"ico-moon icon-balance-income ico-moon-cover"}),"收入"),v.default.createElement("div",{className:"cate-item thin-bd-b","data-index":"2",onClick:this.selectRecordType},v.default.createElement("span",{className:"ico-moon icon-balance-spending ico-moon-cover"}),"支出"))))),v.default.createElement("div",{className:"message-content"},Object.values(o).map(function(e,t){return v.default.createElement("div",{key:t},v.default.createElement("div",{className:"message-data"},v.default.createElement("div",{className:"message-item-header"},v.default.createElement("div",{className:"message-month-year"},v.default.createElement("span",{className:"message-month"},e.month),"/"+e.year),v.default.createElement("div",{className:"message-balance-payment"},2!=a.type&&v.default.createElement("div",null,v.default.createElement("span",{className:"balance-symbol"},"+"),e.add),1!=a.type&&v.default.createElement("div",{className:"message-reduce"},v.default.createElement("span",{className:"balance-symbol-reduce"}),v.default.createElement("span",{className:"message-reduce-num"},e.reduce)))),e.data.map(function(e,t){return v.default.createElement("div",{key:t},1==e.type?v.default.createElement("div",{className:"message-item"},v.default.createElement("div",{className:"message-title"},"自主充值"),v.default.createElement("div",{className:"message-num add",style:(0,N.convertLineStyleData)("color:"+i.theme)},"+"+e.num),v.default.createElement("div",{className:"message-time"},e.time),e.remark&&v.default.createElement("div",{className:"message-remark"},"备注："+e.remark)):2==e.type?v.default.createElement("div",{className:"message-item"},v.default.createElement("div",{className:"message-title"},"商家充值"),v.default.createElement("div",{className:"message-num add",style:(0,N.convertLineStyleData)("color:"+i.theme)},"+"+e.num),v.default.createElement("div",{className:"message-time"},e.time),e.remark&&v.default.createElement("div",{className:"message-remark"},"备注："+e.remark)):3==e.type?v.default.createElement("div",{className:"message-item"},v.default.createElement("div",{className:"message-title"},"商品买卖"),v.default.createElement("div",{className:"message-num minus"},e.num),v.default.createElement("div",{className:"message-time"},e.time),e.remark&&v.default.createElement("div",{className:"message-remark"},"备注："+e.remark)):4==e.type?v.default.createElement("div",{className:"message-item"},v.default.createElement("div",{className:"message-title"},"商品退款"),v.default.createElement("div",{className:"message-num add",style:(0,N.convertLineStyleData)("color:"+i.theme)},"+"+e.num),v.default.createElement("div",{className:"message-time"},e.time),e.remark&&v.default.createElement("div",{className:"message-remark"},"备注："+e.remark)):5==e.type?v.default.createElement("div",{className:"message-item"},v.default.createElement("div",{className:"message-title"},"储值券充值"),v.default.createElement("div",{className:"message-num add",style:(0,N.convertLineStyleData)("color:"+i.theme)},"+"+e.num),v.default.createElement("div",{className:"message-time"},e.time),e.remark&&v.default.createElement("div",{className:"message-remark"},"备注："+e.remark)):6==e.type?v.default.createElement("div",{className:"message-item"},v.default.createElement("div",{className:"message-title"},"自定义充值"),v.default.createElement("div",{className:"message-num add",style:(0,N.convertLineStyleData)("color:"+i.theme)},"+"+e.num),v.default.createElement("div",{className:"message-time"},e.time),e.remark&&v.default.createElement("div",{className:"message-remark"},"备注："+e.remark)):7==e.type?v.default.createElement("div",{className:"message-item"},v.default.createElement("div",{className:"message-title"},"管理员手动撤回储值金"),v.default.createElement("div",{className:"message-num minus"},e.num),v.default.createElement("div",{className:"message-time"},e.time),e.remark&&v.default.createElement("div",{className:"message-remark"},"备注："+e.remark)):8==e.type?v.default.createElement("div",{className:"message-item"},v.default.createElement("div",{className:"message-title"},"用户数据合并"),v.default.createElement("div",{className:"message-num minus"},e.num),v.default.createElement("div",{className:"message-time"},e.time),e.remark&&v.default.createElement("div",{className:"message-remark"},"备注："+e.remark)):9==e.type?v.default.createElement("div",{className:"message-item"},v.default.createElement("div",{className:"message-title"},"用户数据合并"),v.default.createElement("div",{className:"message-num minus"},e.num),v.default.createElement("div",{className:"message-time"},e.time),e.remark&&v.default.createElement("div",{className:"message-remark"},"备注："+e.remark)):11==e.type?v.default.createElement("div",{className:"message-item"},v.default.createElement("div",{className:"message-title"},"三方配送赔付"),v.default.createElement("div",{className:"message-num add",style:(0,N.convertLineStyleData)("color:"+i.theme)},"+"+e.num),v.default.createElement("div",{className:"message-time"},e.time),e.remark&&v.default.createElement("div",{className:"message-remark"},"备注："+e.remark)):12==e.type?v.default.createElement("div",{className:"message-item"},v.default.createElement("div",{className:"message-title"},"会员权益赠送"),v.default.createElement("div",{className:"message-num add",style:(0,N.convertLineStyleData)("color:"+i.theme)},"+"+e.num),v.default.createElement("div",{className:"message-time"},e.time),e.remark&&v.default.createElement("div",{className:"message-remark"},"备注："+e.remark)):13==e.type?v.default.createElement("div",{className:"message-item"},v.default.createElement("div",{className:"message-title"},"连续签到赠送"),v.default.createElement("div",{className:"message-num add",style:(0,N.convertLineStyleData)("color:"+i.theme)},"+"+e.num),v.default.createElement("div",{className:"message-time"},e.time),e.remark&&v.default.createElement("div",{className:"message-remark"},"备注："+e.remark)):14==e.type?v.default.createElement("div",{className:"message-item"},v.default.createElement("div",{className:"message-title"},"累计签到赠送"),v.default.createElement("div",{className:"message-num add",style:(0,N.convertLineStyleData)("color:"+i.theme)},"+"+e.num),v.default.createElement("div",{className:"message-time"},e.time),e.remark&&v.default.createElement("div",{className:"message-remark"},"备注："+e.remark)):15==e.type?v.default.createElement("div",{className:"message-item"},v.default.createElement("div",{className:"message-title"},"储值金充值赠送"),v.default.createElement("div",{className:"message-num add",style:(0,N.convertLineStyleData)("color:"+i.theme)},"+"+e.num),v.default.createElement("div",{className:"message-time"},e.time),e.remark&&v.default.createElement("div",{className:"message-remark"},"备注："+e.remark)):16==e.type?v.default.createElement("div",{className:"message-item"},v.default.createElement("div",{className:"message-title"},"分享赠送"),v.default.createElement("div",{className:"message-num add",style:(0,N.convertLineStyleData)("color:"+i.theme)},"+"+e.num),v.default.createElement("div",{className:"message-time"},e.time),e.remark&&v.default.createElement("div",{className:"message-remark"},"备注："+e.remark)):17==e.type?v.default.createElement("div",{className:"message-item"},v.default.createElement("div",{className:"message-title"},"分享拉新赠送"),v.default.createElement("div",{className:"message-num add",style:(0,N.convertLineStyleData)("color:"+i.theme)},"+"+e.num),v.default.createElement("div",{className:"message-time"},e.time),e.remark&&v.default.createElement("div",{className:"message-remark"},"备注："+e.remark)):18==e.type&&v.default.createElement("div",{className:"message-item"},v.default.createElement("div",{className:"message-title"},"收藏赠送"),v.default.createElement("div",{className:"message-num add",style:(0,N.convertLineStyleData)("color:"+i.theme)},"+"+e.num),v.default.createElement("div",{className:"message-time"},e.time),e.remark&&v.default.createElement("div",{className:"message-remark"},"备注："+e.remark)))})))}),!s&&v.default.createElement("div",{className:"recharge-no-data"},v.default.createElement("img",{className:"no-data-image",src:"http://cdn.jisuapp.cn/static/webapp/images/stored-value/none-stored-record.png"}),v.default.createElement("div",null,"无相关数据")))))))}}]),t}(y.default);t.default=R},function(e,t){},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(9),i=n(o),s=a(26),r=n(s),c=a(0),l=n(c),d=a(3),u=n(d),m=a(1),p=n(m),f=a(2),g=n(f);a(27);var h=a(5),v=a(15),_=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(v),y=a(6),E=a(11),b=a(7),N=n(b),R=a(157);a(353);var k=function(e){function t(e){(0,l.default)(this,t);var a=(0,p.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={topNavBarData:{type:3,isDefault:0,title:"商品详情"},goodsId:"",cardtype:"",goodsInfo:{},vipCardStatus:1,modelStrs:{},selectModelInfo:{models:[],stock:"",price:"",virtualPrice:"",buyCount:1,models_text:""},pageQRCodeData:{shareDialogShow:"100%",shareMenuShow:!1},commentArr:[],commentNums:[],commentExample:"",commentPage:1,commentType:0,commentTotalPage:"",defaultPhoto:"",allStock:"",addToShoppingCartHidden:!0,ifAddToShoppingCart:!0,priceDiscountStr:"",page_hidden:!0,appointmentPhone:"",detailCommetType:"detail",carouselCurrentIndex:1,imageOrVideo:"image",storeStyle:"",footPrintIndex:0,showFootPrint:!1,animationData:{},pageStaySeconds:0,userSetEventsArr:[]},a.onReachBottom=function(){"comment"==a.data.detailCommetType&&a.data.commentPage<=a.data.commentTotalPage&&a.getAssessList(a.data.commentType,a.data.commentPage,1)},a.dataInitial=function(){var e=a;a.getAppECStoreConfig(),a.getUserSetEvents(),h.appMethod.sendRequest({url:"/index.php?r=AppShop/getGoods",data:{data_id:a.data.goodsId,sub_shop_app_id:a.data.franchiseeId,message_notice_type:1,not_group_buy_goods:1},success:e.modifyGoodsDetail,complete:function(){e.setData({page_hidden:!1})}})},a.getAppBECStoreConfig=function(){var e=a;h.appMethod.sendRequest({url:"/index.php?r=/AppEcommerce/getAppBECStoreConfig",success:function(t){if(t.data){var a=t.data.card_type;a=a&&a.length>=1?a[0]:0,e.setData({appBECStoreConfig:t.data,cardtype:a})}}})},a.onShareAppMessage=function(){a.setData({pageQRCodeData:{shareDialogShow:"100%",shareMenuShow:!1}});var e=a.data.goodsId,t=a.data.franchiseeId,n=a.data.cart_num||"",o=a.data.goodsInfo.share_title||a.data.goodsInfo.title,i=a.data.goodsInfo.share_img||a.data.goodsInfo.cover,s=h.appMethod.globalData.PromotionUserToken?"&user_token="+h.appMethod.globalData.PromotionUserToken:"",r="/pages/goodsDetail/goodsDetail?detail="+e+(t?"&franchisee="+t+"&cart_num="+n:"")+s+(h.appMethod.globalData.pageShareKey?"&psid="+h.appMethod.globalData.pageShareKey:"");return h.appMethod.shareAppMessage({path:r,title:o,imageUrl:i})},a.goToMyOrder=function(){var e=a.data.franchiseeId,t="/eCommerce/pages/myOrder/myOrder?goodsType="+a.data.goodsInfo.goods_type+"&currentIndex=0"+(e?"&franchisee="+e:"");h.appMethod.turnToPage(t,!0)},a.goToShoppingCart=function(){var e=a.data.franchiseeId,t="/eCommerce/pages/shoppingCart/shoppingCart"+(e?"?franchisee="+e:"");h.appMethod.turnToPage(t,!0)},a.gotoVipBenefits=function(e){var t=e.currentTarget.dataset.id,a=e.currentTarget.dataset.cardtype;h.appMethod.turnToPage("/eCommerce/pages/vipBenefits/vipBenefits?id="+t+"&cardtype="+a)},a.goToHomepage=function(){var e=a,t=e.data.franchiseeId,n=h.appMethod.getChainId();if(t&&t!=n){var o=h.appMethod.getCurrentPages(),i=o[o.length-2];i&&"franchisee/pages/goodsMore/goodsMore"==i.route?h.appMethod.turnBack({delta:2}):_.clickEventHandler["to-franchisee"]({"franchisee-id":t})}else{var s=h.appMethod.getHomepageRouter();h.appMethod.reLaunch({url:"/pages/"+s+"/"+s})}},a.goToCommentPage=function(){var e=a.data.franchiseeId,t="/eCommerce/pages/goodsComment/goodsComment?detail="+a.data.goodsId+(e?"&franchisee="+e:"");h.appMethod.turnToPage(t)},a.modifyGoodsDetail=function(e){var t,n,o,i,s,r=a,c=e.data[0].form_data,l=c.appointment_info&&c.appointment_info.unit_type||"",d=c.description,u=[],m=[],p="",f={},g=0,h="",v=0,_="",y="";a.setData({unitType:l||"",appointmentDesc:c.appointment_info&&c.appointment_info.appointment_desc?c.appointment_info.appointment_desc.replace(/<br \/>/g,"\r\n"):"更多优惠资讯详情请联系商家!",appointmentPhone:c.appointment_info&&c.appointment_info.appointment_phone?c.appointment_info.appointment_phone:"",displayComment:c.appointment_info&&"1"==c.appointment_info.display_comment?c.appointment_info.display_comment:""}),d=d?d.replace(/\u00A0|\u2028|\u2029|\uFEFF/g,""):d,c.description=d,c.vip_price=c.vip_min_price==c.vip_max_price?c.vip_min_price:c.vip_min_price+"~"+c.vip_max_price;for(var E in c.model)if(E){var b=c.model[E];if(u.push(b),b&&b.subModelName){if("1"==E&&"1"==c.goods_type)for(var N in b.subModelName){var R=b.subModelName[N].split("-"),k=b.subModelName[N].substring(6,8),w=k-24>=10?k-24:"0"+(k-24);b.subModelName[N]=k>=24?R[0]+"-次日"+w+":"+R[1].split(":")[1]:R[0]+"-当日"+R[1]}if("1"==c.goods_type&&"0"==b.id)for(var N in b.subModelName)b.subModelName[N]=b.subModelName[N]+(c.appointment_info&&c.appointment_info.unit);f[b.id]=b.subModelName.join("、"),m.push(b.subModelId[0]),p=m.toString(),_+="“"+b.subModelName[0]+"” "}}if(c.model_items.length)for(var x=c.model_items,C=0;C<x.length;C++){g=Number(x[C].price);var D=Number(x[C].virtual_price),S=x[C].model;c.highPrice=c.highPrice>g?c.highPrice:g,c.lowPrice=c.lowPrice<g?c.lowPrice:g,c.virtual_price=c.virtual_price>D?c.virtual_price:D,v+=Number(x[C].stock),S==p&&(n=x[C].price,t=x[C].stock,o=x[C].id,s=x[C].vip_price||x[C].price,y=x[C].img_url,i=x[C].virtual_price)}else n=c.price,t=c.stock,i=c.virtual_price,s=c.vip_goods_price||c.price,y=c.cover;c.model=u,0!=Number(c.max_can_use_integral)&&(h="（积分可抵扣"+Number(c.max_can_use_integral)/100+"元）");var I=c.goods_express_data.express_fee_sort;if(1==I.length){var M=I[0];c.express_fee=0==M?"包邮":M+"元"}else c.express_fee=I[0]+"~"+I[1]+"元";if(a.data.franchiseeId&&c.pick_up_type)for(var T=0;T<c.pick_up_type.length;T++)4==c.pick_up_type[T]&&c.pick_up_type.splice(T,1);r.setData({goodsInfo:c,modelStrs:f,"selectModelInfo.models":m||"","selectModelInfo.stock":t||"","selectModelInfo.price":n||"","selectModelInfo.modelId":o||"","selectModelInfo.models_text":_||"","selectModelInfo.imgurl":y||"","selectModelInfo.virtualPrice":i||"","selectModelInfo.vipPrice":s||"",allStock:v||"",priceDiscountStr:h||""}),r.getAssessList(0,1)},a.showBuyDirectly=function(){a.setData({addToShoppingCartHidden:!1,ifAddToShoppingCart:!1,imageOrVideo:"image"})},a.showAddToShoppingCart=function(){a.setData({addToShoppingCartHidden:!1,ifAddToShoppingCart:!0,imageOrVideo:"image"})},a.hiddeAddToShoppingCart=function(){a.setData({addToShoppingCartHidden:!0})},a.selectSubModel=function(e){var t=e.target.dataset,n=t.modelIndex,o=t.submodelIndex,i={},s=a.data.selectModelInfo.models,r=a.data.goodsInfo.model,c="";s[n]=r[n].subModelId[o];for(var l=0;l<s.length;l++)for(var d=r[l].subModelId,u=0;u<d.length;u++)s[l]==d[u]&&(c+="“"+r[l].subModelName[u]+"” ");i["selectModelInfo.models"]=s,i["selectModelInfo.models_text"]=c,a.setData(i),a.resetSelectCountPrice()},a.resetSelectCountPrice=function(){for(var e=a.data.selectModelInfo.models.join(","),t=a.data.goodsInfo.model_items,n={},o=t.length-1;o>=0;o--)if(t[o].model==e){n["selectModelInfo.stock"]=t[o].stock,n["selectModelInfo.price"]=t[o].price,n["selectModelInfo.modelId"]=t[o].id,n["selectModelInfo.imgurl"]=t[o].img_url,n["selectModelInfo.vipPrice"]=t[o].vip_price||t[o].price,n["selectModelInfo.virtualPrice"]=t[o].virtual_price;break}a.setData(n)},a.clickMinusButton=function(e){var t=a.data.selectModelInfo.buyCount;t<=1||a.setData({"selectModelInfo.buyCount":t-1})},a.clickPlusButton=function(e){var t=a.data.selectModelInfo,n=(a.data.goodsInfo,t.buyCount);if(n>=t.stock)return void h.appMethod.showModal({content:"购买数量不能大于库存"});a.setData({"selectModelInfo.buyCount":n+1}),console.log("增加",a.state)},a.sureAddToShoppingCart=function(){var e=a,t={goods_id:a.data.goodsId,model_id:a.data.selectModelInfo.modelId||"",num:a.data.selectModelInfo.buyCount,sub_shop_app_id:a.data.franchiseeId||"",message_notice_type:1};h.appMethod.sendRequest({hideLoading:!0,url:"/index.php?r=AppShop/addCart",data:t,success:function(t){h.appMethod.showToast({title:"添加成功",icon:"success"}),setTimeout(function(){e.hiddeAddToShoppingCart()},1e3)}})},a.buyDirectlyNextStep=function(e){var t=a.data.franchiseeId,n=a,o={goods_id:a.data.goodsId,model_id:a.data.selectModelInfo.modelId||"",num:a.data.selectModelInfo.buyCount,sub_shop_app_id:t||"",message_notice_type:1};h.appMethod.sendRequest({url:"/index.php?r=AppShop/addCart",data:o,success:function(e){var a=[e.data],o="/eCommerce/pages/previewGoodsOrder/previewGoodsOrder?cart_arr="+encodeURIComponent(a);t&&(o+="&franchisee="+t),n.hiddeAddToShoppingCart(),h.appMethod.turnToPage(o)}})},a.makeAppointment=function(){var e=a.data.franchiseeId,t=a.data.modelStrs[0]&&a.data.modelStrs[0].substring(a.data.modelStrs[0].length-1),n=6!=a.data.unitType?"分"==t?1:"时"==t?2:3:"6",o="/eCommerce/pages/makeAppointment/makeAppointment?detail="+a.data.goodsId+(e?"&franchisee="+e:"")+"&param="+n;h.appMethod.turnToPage(o)},a.inputBuyCount=function(e){var t=+e.target.value,n=a.data.selectModelInfo,o=(a.data.goodsInfo,+n.stock);t>=o&&(t=o,h.appMethod.showModal({content:"购买数量不能大于库存"})),a.setData({"selectModelInfo.buyCount":+t})},a.showQRCodeComponent=function(){var e=a,t=a.data.goodsInfo,n={obj_id:e.data.goodsId,type:1,text:t.title,price:t.highPrice>t.lowPrice&&0!=t.lowPrice?t.lowPrice+" ~ "+t.highPrice:t.price,goods_img:t.img_urls?t.img_urls[0]:t.cover,max_can_use_integral:t.max_can_use_integral,integral:t.integral,sub_shop_id:e.data.franchiseeId,p_id:h.appMethod.globalData.p_id||""};h.appMethod.sendRequest({url:"/index.php?r=AppDistribution/DistributionShareQRCode",data:n,hideLoading:!1,success:function(e){h.appInstance.pageQrcodeRef.current.show({pageQRCodeData:{shareDialogShow:0,shareMenuShow:!0,goodsInfo:e.data}})}})},a.showShareMenu=function(){h.appMethod.showShareMenu()},a.makePhoneCall=function(){h.appMethod.makePhoneCall(a.data.appointmentPhone)},a.hideShareMenu=function(){a.setData({hideShareMenu:!0})},a.showPageCode=function(){},a.oneSelectDetailCommet=function(e){a.setData({detailCommetType:e.target.dataset.type})},a.getAssessList=function(e,t,n){var o=a;h.appMethod.getAssessList({method:"post",data:{goods_id:o.data.goodsId,idx_arr:{idx:"level",idx_value:e},page:t,page_size:20,sub_shop_app_id:a.data.franchiseeId},success:function(e){var t=e.data;n&&(t=o.data.commentArr.concat(t)),o.setData({commentArr:t,commentNums:e.num,commentPage:o.data.commentPage+1,commentExample:e.data[0]||"",commentTotalPage:e.total_page,displayComment:"0"===o.data.goodsInfo.goods_type?!(+e.num[0]>0):o.data.goodsInfo.appointment_info&&"1"==o.data.goodsInfo.appointment_info.display_comment?o.data.goodsInfo.appointment_info.display_comment:""})}})},a.clickCommentLabel=function(e){var t=e.currentTarget.dataset.type,n={};n.commentPage=1,n.commentType=t,a.setData(n),a.getAssessList(t,1)},a.clickPlusImages=function(e){h.appMethod.previewImage({current:e.currentTarget.dataset.src,urls:JSON.parse(e.currentTarget.dataset.srcarr)})},a.carouselIndex=function(e){a.setData({carouselCurrentIndex:e+1})},a.toCouponList=function(){h.appMethod.turnToPage("/eCommerce/pages/couponReceiveListPage/couponReceiveListPage")},a.changeImageOrVideo=function(e){a.setData({videoPoster:!1,imageOrVideo:e.currentTarget.dataset.type})},a.toRecommendGoodsDetail=function(e){h.appMethod.turnToGoodsDetail(e)},a.getAppECStoreConfig=function(){h.appMethod.getAppECStoreConfig(function(e){a.setData({storeStyle:e.color_config,showStock:!(!e.detail_fields||1!=e.detail_fields.stock),isShowVirtualPrice:!(!e.detail_fields||1!=e.detail_fields.virtual_price)})},a.data.franchiseeId)},a.startPlayVideo=function(){a.setData({videoPoster:!0}),setTimeout(function(){h.appMethod.createVideoContext("carousel-video").play()},0)},a.footPrintRight=function(){var e=a.data.footPrintIndex-1;e+a.data.goodsViewRecordList.length<=0||a.setData({footPrintIndex:e})},a.footPrintLeft=function(){var e=a.data.footPrintIndex+1;e>0||a.setData({footPrintIndex:e})},a.hideCompeletFoot=function(e){a.setData({showFootPrint:!a.data.showFootPrint})},a.hideFootPrint=function(){var e=a.animation;e.top("-100%").step(),a.setData({animationData:e.export()}),setTimeout(function(){a.setData({footPrintIndex:0,showFootPrint:!1})},400)},a.stopPropagation=function(e){},a.onPullDownRefresh=function(){if(a.data.franchiseeId)return void h.appMethod.stopPullDownRefresh();a.getGoodsViewRecordList()},a.toGoodsFootPrint=function(){a.hideFootPrint(),h.appMethod.turnToPage("/eCommerce/pages/goodsFootPrint/goodsFootPrint")},a.getGoodsViewRecordList=function(){var e=a;h.appMethod.sendRequest({url:"/index.php?r=AppShop/goodsViewRecordList",data:{page:1,page_size:10,goods_id:e.data.goodsId},success:function(t){if(t.data.length){var a=h.appMethod.createAnimation({duration:500,timingFunction:"linear"});e.animation=a,a.top(0).step(),e.setData({showFootPrint:!0,goodsViewRecordList:t.data}),e.setData({animationData:a.export()})}},complete:function(){h.appMethod.stopPullDownRefresh()}})},a.goFootPrintDetail=function(e){a.hideFootPrint(),h.appMethod.turnToPage("/pages/goodsDetail/goodsDetail?detail="+e.currentTarget.dataset.id)},a.addFavoriteGoods=function(e){var t=a;h.appMethod.sendRequest({url:"/index.php?r=AppShop/addFavoriteGoods",data:{form_id:e.detail.formId,goods_id:t.data.goodsId,sub_shop_app_id:t.data.franchiseeId},success:function(e){t.setData({"goodsInfo.is_favorite":1})},complete:function(){h.appMethod.showToast({title:"收藏成功!",image:"/images/favorites.png"})}})},a.deleteFavoriteGoods=function(){var e=a;h.appMethod.sendRequest({url:"/index.php?r=AppShop/deleteFavoriteGoods",method:"post",data:{goods_id_arr:[e.data.goodsId],sub_shop_app_id:e.data.franchiseeId},success:function(t){e.setData({"goodsInfo.is_favorite":0})},complete:function(){h.appMethod.showToast({title:"取消收藏!",image:"/images/cancel-favorites.png"})}})},a.getUserSetEvents=function(){var e=a;h.appMethod.sendRequest({url:"/index.php?r=EventMessage/getEventByBehavior",hideLoading:!0,data:{behavior:14,sub_shop_app_id:e.data.franchiseeId},success:function(t){if(0==+t.status){var a=t.data,n=a&&a.length,o=[];if(a&&n)for(var i=0;i<n;i++){var s={},r=a[i].trigger;s.id=a[i].id,s.tally=r.condition.tally,o.push(s)}e.setData({userSetEventsArr:o}),e.countPageStaySeconds()}else console.log(t.data)}})},a.countPageStaySeconds=function(){var e=a,t=a.data,n=t.userSetEventsArr,o=n&&n.length,i=t.pageStaySeconds||0;if(n&&o){var s=setInterval(function(){i+=1;for(var t=0;t<o;t++){var a=n[t].id;+n[t].tally===i&&e.timerTriggerEvent(a),i>n[o-1].tally&&(clearInterval(s),e.setData({countPageStaySecondsTimer:""}))}e.setData({pageStaySeconds:i})},1e3);a.setData({countPageStaySecondsTimer:s})}},a.timerTriggerEvent=function(e){if(e){var t=a.data,n=t.goodsId||"",o=t.goodsInfo.title;h.appMethod.sendRequest({url:"/index.php?r=EventMessage/triggerEvent",method:"post",hideLoading:!0,data:{event_id:e,form_data:{goods_id:n,goods_name:o},sub_shop_app_id:t.franchiseeId},success:function(e){}})}},a.startFoot=function(e){var t=e.changedTouches[0].clientX;a.footStartX=t},a.endFoot=function(e){var t=e.changedTouches[0].clientX,n=a.data.footPrintIndex;if(t-a.footStartX>0){if(++n>0)return}else if(t-a.footStartX<0&&--n+a.data.goodsViewRecordList.length<=0)return;a.setData({footPrintIndex:n})},a.turnToGoodsRecommend=function(){var e=a.data;h.appMethod.sendRequest({url:"/index.php?r=AppShop/UpdateGoods",data:{form_data:JSON.stringify(e.goodsInfo)},method:"post",success:function(t){t.status?h.appMethod.showToast({title:t.data}):h.appMethod.openBusinessView&&h.appMethod.openBusinessView({businessType:"friendGoodsRecommend",extraData:{product:{item_code:e.goodsInfo.id,title:e.goodsInfo.title,image_list:e.goodsInfo.img_urls}},success:function(e){},fail:function(e){}})}})},document.title="商品详情",a}return(0,g.default)(t,e),(0,u.default)(t,[{key:"componentWillMount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,y.getCurrentPageQueryParams)(),t=e.detail,a=e.franchisee||"",n=e.cart_num||0,o=h.appMethod.getDefaultPhoto(),i=e.goodsType||0,s=e.user_token||"",r=e.franchisee||h.appMethod.getAppId()||"";this.setData({goodsId:t,defaultPhoto:o,franchiseeId:a,cartGoodsNum:n,goodsType:i,sessionFrom:r,"topNavBarData.totalHeight":h.appMethod.globalData.topNavBarHeight||0}),this.getAppBECStoreConfig(),this.franchiseeId=a,this.dataInitial(),s&&(h.appMethod.globalData.PromotionUserToken=s)}},{key:"componentWillUnmount",value:function(){this.downcount&&this.downcount.clear()}},{key:"render",value:function(){var e,t=this,a=this.state,n=a.topNavBarData,o=(a.pageQRCodeData,a.rewardPointObj,a.shareGiftsObj,a.collectGiftsObj,a.collectGetObj,a.showGetUserInfo,a.page_hidden),s=a.appointmentPhone,c=a.goodsInfo,l=a.cartGoodsNum,d=a.imageOrVideo,u=a.videoPoster,m=a.storeStyle,p=a.isShowVirtualPrice,f=a.priceDiscountStr,g=a.modelStrs,h=a.showStock,v=a.allStock,_=a.cardtype,y=a.appBECStoreConfig,b=a.appointmentDesc,N=a.displayComment,k=a.commentNums,w=a.commentExample,x=a.defaultPhoto,C=(a.wxParseDescription,a.franchiseeId),D=(a.sessionFrom,a.carouselCurrentIndex),S=a.detailCommetType,I=a.commnetType,M=a.commentArr,T=a.addToShoppingCartHidden,P=a.selectModelInfo,L=a.ifAddToShoppingCart,A=a.animationData,F=a.footPrintIndex,O=a.goodsViewRecordList,B=a.showFootPrint;return React.createElement("div",{className:"official-page goods-detail"},React.createElement(R.SinkingModal,null),React.createElement("div",{className:"goods-detail-wrap",hidden:o},React.createElement("div",{className:"goods-detail-nav",style:{top:n.totalHeight/50+"rem"}},1==c.goods_type?React.createElement("div",null,React.createElement("div",{className:"pull-right ico-moon icon-takeout-cellphone",onClick:this.makePhoneCall,hidden:!s}),React.createElement("div",{className:"pull-right ico-moon icon-share",onClick:this.showQRCodeComponent})):0==c.goods_type&&React.createElement("div",null,(!c.detail_type||0==c.detail_type)&&React.createElement("div",{className:"pull-right ico-moon icon-notebook",onClick:this.goToMyOrder}),(!c.detail_type||0==c.detail_type)&&React.createElement("div",{className:"pull-right ico-moon icon-store2",onClick:this.goToHomepage},!!l&&0!=l&&React.createElement("div",{className:"goods-detail-cart-num"},l)),2!=c.detail_type&&React.createElement("div",{className:"pull-right ico-moon icon-new-share",onClick:this.showQRCodeComponent}))),(!c.detail_type||0==c.detail_type)&&React.createElement("div",{className:"goods-detail-content oldStyle"},React.createElement("div",{className:"goods-detail-section"},"image"==d&&React.createElement("div",{className:"image-carousel-container"},c.img_urls?React.createElement("div",{className:"slick-carousel-container"},c.img_urls&&!!c.img_urls.length&&React.createElement(r.default,{dots:!1,infinite:!0,autoplay:!0,autoplayInterval:5e3,afterChange:this.carouselIndex},c.img_urls.map(function(e,a){return React.createElement("div",{key:a},React.createElement("img",{"data-src":a,"data-srcarr":JSON.stringify(c.img_urls),onClick:t.clickPlusImages,src:e,onLoad:function(){window.dispatchEvent(new Event("resize"))},className:"slide-image"}))}))):React.createElement("div",{className:"goods-cover-container"},!!c.cover&&React.createElement("img",{"data-src":c.cover,onClick:this.clickPlusImages,src:c.cover,mode:"aspectFill"})),c.video_url&&React.createElement("div",{className:"image-video-menu"},React.createElement("span",{className:"image"==d?"active":"","data-type":"image",onClick:this.changeImageOrVideo},"图片"),React.createElement("span",{className:"video"==d?"active":"","data-type":"video",onClick:this.changeImageOrVideo},"视频"))),c.video_url&&"video"==d&&React.createElement("div",{className:"video-carousel-container"},u&&React.createElement(React.Fragment,null,React.createElement("video",{src:c.video_url,id:"carousel-video"}),React.createElement("div",{className:"image-video-menu"},React.createElement("div",{className:"image"==d?"active":"","data-type":"image",onClick:this.changeImageOrVideo},"图片"),React.createElement("div",{className:"video"==d?"active":"","data-type":"video",onClick:this.changeImageOrVideo},"视频"))),React.createElement("div",{className:"videoele-cover-view",hidden:u},React.createElement("div",{className:"videoele-poster-wrap"},React.createElement("img",{className:"videoele-poster",src:c.video_img,mode:"scaleToFill"})),React.createElement("div",{className:"videoele-play-icon",onClick:this.startPlayVideo},React.createElement("img",{className:"videoele-play-image",src:"http://cdn.jisuapp.cn/static/webapp/images/play.png",mode:"scaleToFill"})),React.createElement("div",{className:"image-video-menu"},React.createElement("span",{className:"image"==d?"active":"","data-type":"image",onClick:this.changeImageOrVideo},"图片"),React.createElement("span",{className:"video"==d?"active":"","data-type":"video",onClick:this.changeImageOrVideo},"视频")))),React.createElement("div",{className:"goods-header"},React.createElement("div",{className:"goods-title goods-title-zero"},React.createElement("div",{className:"goodsInfo-title"},c.title),c.recommend_status&&React.createElement("div",{className:"goods-recommended",onClick:this.turnToGoodsRecommend},React.createElement("span",{className:"ico-moon icon-like-bold"}),"好物推荐")),React.createElement("div",{className:"goods-price"},1!=c.is_vip_goods?React.createElement(React.Fragment,null,React.createElement("div",{className:"goods-current-price",style:0!=c.goods_type?{}:{color:m.theme}},"2"!=c.integral?React.createElement(React.Fragment,null,React.createElement("span",{style:{marginRight:".06rem",fontSize:".36rem"}},"¥"),React.createElement("span",{style:{fontWeight:"bold",fontSize:".4rem"}},c.highPrice>c.lowPrice&&0!=c.lowPrice?c.lowPrice+" ~ "+c.highPrice:"1"!=c.goods_type?c.price:"0.00"!=c.price?c.price:"免费")):React.createElement(React.Fragment,null,"0.00"!=c.price&&React.createElement("span",{style:{marginRight:".06rem",fontSize:".36rem"}},"¥"),"0.00"!=c.price&&React.createElement("span",{style:{fontSize:".4rem"}},c.highPrice>c.lowPrice&&0!=c.lowPrice?c.lowPrice+" ~ "+c.highPrice:"1"!=c.goods_type?c.price:"0.00"!=c.price?c.price:0!=c.max_can_use_integral?"":"免费"),"0.00"!=c.price&&0!=c.max_can_use_integral&&React.createElement("span",{className:"goods-price-discount price-integral",style:0!=c.goods_type?{}:{color:m.theme}},"+"),0!=c.max_can_use_integral&&React.createElement("span",{className:"goods-price-discount price-integral",style:0!=c.goods_type?{}:{color:m.theme}},c.max_can_use_integral+"积分")),p&&0!=c.virtual_price&&1!=c.goods_type&&React.createElement("span",{className:"virtualPrice"},"￥"+c.virtual_price))):React.createElement(React.Fragment,null,React.createElement("div",{className:"goods-current-price member-status",style:0!=c.goods_type?{}:{color:m.theme}},React.createElement("div",{className:"member-price"},React.createElement("span",{style:{marginRight:".06rem",fontSize:".36rem"}},"¥"),React.createElement("span",{style:{fontWeight:"bold",fontSize:".4rem"}},c.vip_price)),React.createElement("div",{className:"member-logo"},"会员价"),React.createElement("div",{className:"memebr-origin-price",style:{color:"#999"}},"2"!=c.integral?React.createElement(React.Fragment,null,React.createElement("span",{style:{marginRight:".06rem",fontSize:".24rem",color:"#999"}},"¥"),React.createElement("span",{style:{fontWeight:"normal",fontSize:".24rem"}},c.highPrice>c.lowPrice&&0!=c.lowPrice?c.lowPrice+" ~ "+c.highPrice:"1"!=c.goods_type?c.price:"0.00"!=c.price?c.price:"免费")):React.createElement(React.Fragment,null,"0.00"!=c.price&&React.createElement("span",{style:{marginRight:".06rem",fontSize:".36rem"}},"¥"),"0.00"!=c.price&&React.createElement("span",{style:{fontSize:".4rem"}},c.highPrice>c.lowPrice&&0!=c.lowPrice?c.lowPrice+" ~ "+c.highPrice:"1"!=c.goods_type?c.price:"0.00"!=c.price?c.price:0!=c.max_can_use_integral?"":"免费"),"0.00"!=c.price&&0!=c.max_can_use_integral&&React.createElement("span",{className:"goods-price-discount price-integral",style:0!=c.goods_type?{}:{color:m.theme}},"+"),0!=c.max_can_use_integral&&React.createElement("span",{className:"goods-price-discount price-integral",style:0!=c.goods_type?{}:{color:m.theme}},c.max_can_use_integral+"积分"))))),""!=f&&"2"!=c.integral&&React.createElement("div",{className:"goods-price-discount"},f)),c.model_items&&!!c.model_items.length&&React.createElement("div",{className:"goods-models"},c.model.map(function(e,t){return React.createElement("div",{className:"goods-model-item",key:e.id,hidden:!e.subModelName},React.createElement("span",{className:"goods-model-cate"},e.name),React.createElement("span",{className:"goods-model-detail"},g[e.id]))})),0==c.goods_type&&React.createElement("div",{className:"goods-other-info"},React.createElement("div",null,"配送费:"+(c.express_fee||"包邮")),h&&React.createElement("div",null,"库存:"+(v||c.stock))),React.createElement("div",{className:"goods-other-info"},React.createElement("label",null,"取货方式"),React.createElement("div",{className:"address-pick-up"},c.pick_up_type&&c.pick_up_type.map(function(e,t){return React.createElement("div",{key:e},React.createElement("span",{style:{color:m.theme},className:"ico-moon icon-goods-support-delivery suporrt"}),React.createElement("span",null,1==e?"快递":2==e?"同城":3==e?"自提":"点餐"))}))))),React.createElement("div",{className:"vip-card-into vip-card1"},y&&1==y.card_switch&&(1==y.card_show_type&&1==c.is_vip_goods||2==y.card_show_type)&&React.createElement(React.Fragment,null,1==y.card_detail_type&&React.createElement("div",{className:"member-toast-wrap toast1","data-type":"ordinary-vip","data-id":c.vip_activity_id,onClick:this.gotoVipBenefits,"data-cardtype":_},React.createElement("div",{className:"image-wrap"},React.createElement("img",{src:"http://develop.zhichiwangluo.com/static/webapp/images/vip_price/a.png"})),React.createElement("div",{className:"member-toast"},React.createElement("span",{className:"member-tips"},y.card_title))),2==y.card_detail_type&&React.createElement("div",{className:"member-toast-wrap toast2","data-type":"ordinary-vip","data-id":c.vip_activity_id,onClick:this.gotoVipBenefits,"data-cardtype":_},React.createElement("div",{className:"image-wrap"},React.createElement("img",{src:"http://develop.zhichiwangluo.com/static/webapp/images/vip_price/b.png"})),React.createElement("div",{className:"member-toast"},React.createElement("span",{className:"member-tips"},y.card_title))),3==y.card_detail_type&&React.createElement("div",{className:"member-toast-wrap toast3","data-type":"ordinary-vip","data-id":c.vip_activity_id,onClick:this.gotoVipBenefits,"data-cardtype":_},React.createElement("div",{className:"image-wrap"},React.createElement("img",{src:"http://develop.zhichiwangluo.com/static/webapp/images/vip_price/c.png"})),React.createElement("div",{className:"member-toast"},React.createElement("span",{className:"member-tips"},y.card_title))))),1==c.goods_type&&React.createElement("div",{className:"goods-appointment"},React.createElement("div",{className:"appointment-instructions",style:{color:"#666"}},"预约说明"),React.createElement("span",{className:"appointment-remarks",style:{color:"#999",wordBreak:"break-all"}},b)),React.createElement("div",{style:{padding:".2rem",textAlign:"center",background:"#f4f4f4",color:"#b2b2b2",fontSize:" .24rem"},hidden:N},React.createElement("div",{className:"line"}),React.createElement("div",{className:"ico-moon icon-good-comment goods-ico"}),React.createElement("div",{style:{display:"inline-block",verticalAlign:"middle",marginRight:".08rem"}},"评价"),React.createElement("div",{className:"line"})),React.createElement("div",{className:"goods-detail-section",hidden:N},React.createElement("div",{className:"comment-title"},React.createElement("div",{style:{borderBottom:"1px solid #f4f4f4",paddingBottom:".2rem"}},"评价 ("+(k[0]||0)+")")),React.createElement("div",{className:"block-item"},w&&React.createElement("div",null,React.createElement("div",{className:"comment-item"},React.createElement("div",null,React.createElement("img",{className:"comment-user-photo",src:w.buyer_headimgurl||x}),React.createElement("span",{className:"commentPersonName"},w.buyer_nickname)),React.createElement("div",{className:"comment-date"},w.add_time),React.createElement("div",{className:"comment-content"},w.assess_info.content),!!w.assess_info.has_img&&React.createElement("div",{className:"comPage-comment-pics"},w.assess_info.img_arr.map(function(e,a){return React.createElement("img",{src:e,key:a,"data-src":e,"data-srcarr":w.assess_info.img_arr,onClick:t.clickPlusImages})}))),React.createElement("div",{style:{textAlign:"center"}},React.createElement("button",{className:"btn lookAllComments",style:{color:m.theme,borderColor:m.theme},onClick:this.goToCommentPage},"查看全部评价"))))),React.createElement("div",{style:{padding:".2rem",textAlign:"center",background:"#f4f4f4",color:"#b2b2b2",fontSize:".24rem"}},React.createElement("div",{className:"line"}),React.createElement("div",{className:"ico-moon icon-good-detail goods-ico"}),React.createElement("div",{style:{display:"inline-block",verticalAlign:"middle",marginRight:".08rem"}},"详情"),React.createElement("div",{className:"line"})),React.createElement("div",{className:"goods-detail-section"},React.createElement("div",{className:"comment-title"},React.createElement("div",{style:{borderBottom:"1px solid #f4f4f4",paddingBottom:".2rem"}},"产品详情")),React.createElement("div",{className:"goods-details rich-text",dangerouslySetInnerHTML:{__html:c.description}})),c.recommend_info&&!!c.recommend_info.length&&React.createElement("div",{className:"goods-recommend"},React.createElement("div",{className:"two-recommend"},"店铺推荐"),React.createElement(E.ScrollView,{className:"recommend-content","scroll-x":"true"},c.recommend_info.map(function(e,a){return React.createElement("div",{className:"recommend-goods",key:e.form_data.id,onClick:t.toRecommendGoodsDetail,"data-id":e.form_data.id,"data-goods-type":e.form_data.goods_type},React.createElement("div",{className:"width-fix-image"},React.createElement("img",{mode:"widthFix",src:e.form_data.cover})),React.createElement("div",{className:"recommend-goods-title"},e.form_data.title),React.createElement("span",{className:"recommend-goods-price"},"¥"+e.form_data.price))})))),2!=c.detail_type&&React.createElement("div",{className:"goods-bottom-opt"},1==c.goods_type?React.createElement("div",{className:"goods-appointment-bottom-bar"},React.createElement("div",{className:"appointment-logo-wrap"},React.createElement("div",{className:"goods-opt-item flex-sub-box-2",onClick:this.goToMyOrder},React.createElement("span",{className:"ico-moon icon-notebook"}),React.createElement("div",null,"订单")),React.createElement("div",{className:"goods-opt-item flex-sub-box-2",onClick:this.goToHomepage},React.createElement("span",{className:"ico-moon icon-store2"}),React.createElement("div",null,"店铺"))),React.createElement("label",{className:"btn btn-orange make-appointment",onClick:this.makeAppointment},"去预约")):0==c.goods_type&&React.createElement(React.Fragment,null,React.createElement("div",{className:"flex-sub-box-3"},"2"!=c.integral&&React.createElement("div",{className:"goods-opt-item flex-sub-box-"+(C?"2":"3"),onClick:this.goToShoppingCart},React.createElement("div",{className:"bottom-border-right"},React.createElement("span",{className:"ico-moon icon-new-goods-shopping"}),React.createElement("div",{className:"margig-top-2"},"购物车"))),!C&&React.createElement("div",{className:"form-contain goods-opt-item flex-sub-box-3"},React.createElement("form",null,React.createElement("button",{type:"button",onClick:1==c.is_favorite?this.deleteFavoriteGoods:this.addFavoriteGoods},React.createElement("div",{className:"bottom-border-right"},React.createElement("span",{style:1==c.is_favorite?{color:m.theme}:{},className:"ico-moon icon-"+(1==c.is_favorite?"collect-solid":"goods-detail-favorites")}),React.createElement("div",null,"收藏"))))),React.createElement("div",{className:"goods-opt-item flex-sub-box-"+(C?"2":"3")},React.createElement("div",{className:"ico-moon icon-service2"}),React.createElement("div",null,"客服"))),"2"!=c.integral&&React.createElement("div",{className:"flex-sub-box-3"},React.createElement("label",{style:{background:m.secondary,color:"#ACD3FA"==m.secondary||"#FFCFDF"==m.secondary||"#ffffff"==m.secondary||"#DFF3ED"==m.secondary||"#FAF7ED"==m.secondary?m.theme:{}},className:"btn addToShoppingCart "+(2==c.seckill_start_state?"disabled":""),onClick:this.showAddToShoppingCart},"加入购物车")),React.createElement("div",{className:"flex-sub-box-3",style:"2"==c.integral?{width:"66.6%"}:{}},React.createElement("label",{style:{background:m.theme},className:"btn btn-orange buy-goods-directly",onClick:this.showBuyDirectly},"立即购买"))))),0!=c.detail_type&&1!=c.goods_type&&React.createElement("div",{className:"goods-detail-section"},c.buyer_list&&!!c.buyer_list.length&&React.createElement("div",{className:"goods-buy-record"},React.createElement(r.default,{dots:!1,infinite:!0,autoplay:!0,autoplayInterval:3e3},c.buyer_list.map(function(e,t){return React.createElement("div",{key:t},React.createElement("img",{src:e.cover_thumb,onLoad:function(){window.dispatchEvent(new Event("resize"))}}),React.createElement("span",null,e.nickname+"购买成功"))}))),"image"==d&&React.createElement("div",{className:"image-carousel-container"},c.img_urls?React.createElement("div",{className:"slick-carousel-container"},React.createElement(r.default,{dots:!1,infinite:!0,autoplay:!0,autoplayInterval:5e3,afterChange:this.carouselIndex},c.img_urls.map(function(e,a){return React.createElement("div",{key:a},React.createElement("img",{"data-src":e,"data-srcarr":c.img_urls,onClick:t.clickPlusImages,src:e,mode:"aspectFit",className:"slide-image",onLoad:function(){window.dispatchEvent(new Event("resize"))}}))})),React.createElement("div",{className:"carousel-index"},D+"/"+c.img_urls.length)):React.createElement("div",{className:"goods-cover-container"},!!c.cover&&React.createElement("img",{"data-src":c.cover,onClick:this.clickPlusImages,src:c.cover,mode:"aspectFill"})),c.video_url&&React.createElement("div",{className:"image-video-menu"},React.createElement("span",{className:"image"==d?"active":"","data-type":"image",onClick:this.changeImageOrVideo},"图片"),React.createElement("span",{className:"video"==d?"active":"","data-type":"video",onClick:this.changeImageOrVideo},"视频"))),c.video_url&&"video"==d&&React.createElement("div",{className:"video-carousel-container"},u&&React.createElement(Video,{src:c.video_url,id:"carousel-video"},React.createElement(CoverView,{className:"image-video-menu"},React.createElement(CoverView,{className:"image"==d?"active":"","data-type":"image",onClick:this.changeImageOrVideo},"图片"),React.createElement(CoverView,{className:"video"==d?"active":"","data-type":"video",onClick:this.changeImageOrVideo},"视频"))),React.createElement("div",{className:"videoele-cover-view",hidden:u},React.createElement("div",{className:"videoele-poster-wrap"},React.createElement("img",{className:"videoele-poster",src:c.video_img,mode:"scaleToFill"})),React.createElement("div",{className:"videoele-play-icon",onClick:this.startPlayVideo},React.createElement("img",{className:"videoele-play-image",src:"http://cdn.jisuapp.cn/static/webapp/images/play.png",mode:"scaleToFill"})),React.createElement("div",{className:"image-video-menu"},React.createElement("span",{className:"image"==d?"active":"","data-type":"image",onClick:this.changeImageOrVideo},"图片"),React.createElement("span",{className:"video"==d?"active":"","data-type":"video",onClick:this.changeImageOrVideo},"视频"))))),1==c.detail_type&&React.createElement("div",{className:"goods-detail-content styleOne"},React.createElement("div",{className:"goods-header"},React.createElement("div",{className:"goods-title"},c.title),React.createElement("div",{className:"goods-price"},1!=c.is_vip_goods?React.createElement(React.Fragment,null,React.createElement("div",{className:"goods-current-price"},"2"!=c.integral?React.createElement(React.Fragment,null,React.createElement("span",{className:"real-price",style:0!=c.goods_type?{}:{color:m.theme}},"¥"+(c.highPrice>c.lowPrice&&0!=c.lowPrice?c.lowPrice+" ~ "+c.highPrice:"1"!=c.goods_type?c.price:"0.00"!=c.price?c.price:"免费")),p&&0!=c.virtual_price&&1!=c.goods_type&&React.createElement("span",{className:"virtualPrice"},"￥"+c.virtual_price)):React.createElement(React.Fragment,null,"0.00"!=c.price&&React.createElement("span",{className:"real-price",style:0!=c.goods_type?{}:{color:m.theme}},"¥"+(c.highPrice>c.lowPrice&&0!=c.lowPrice?c.lowPrice+" ~ "+c.highPrice:"1"!=c.goods_type?c.price:"0.00"!=c.price&&0!=c.max_can_use_integral?c.price:0!=c.max_can_use_integral?"":"免费")),"0.00"!=c.price&&0!=c.max_can_use_integral&&React.createElement("span",{className:"goods-price-discount price-integral",style:0!=c.goods_type?{}:{color:m.theme}},"+"),0!=c.max_can_use_integral&&React.createElement("span",{className:"goods-price-discount price-integral",style:0!=c.goods_type?{}:{color:m.theme}},c.max_can_use_integral+"积分"),p&&0!=c.virtual_price&&1!=c.goods_type&&React.createElement("span",{className:"virtualPrice"},"￥"+c.virtual_price)))):React.createElement(React.Fragment,null,React.createElement("div",{className:"goods-current-price member-status",style:0!=c.goods_type?{}:{color:m.theme}},React.createElement("div",{className:"member-price"},React.createElement("span",{style:{marginRight:".06rem",fontSize:".36rem"}},"¥"),React.createElement("span",{style:{fontWeight:"bold",fontSize:".4rem"}},c.vip_price)),React.createElement("div",{className:"member-logo"},"会员价"),React.createElement("div",{className:"memebr-origin-price",style:{color:"#999"}},"2"!=c.integral?React.createElement(React.Fragment,null,React.createElement("span",{className:"real-price",style:{color:"#999",fontSize:".24rem"}},"¥"+(c.highPrice>c.lowPrice&&0!=c.lowPrice?c.lowPrice+" ~ "+c.highPrice:"1"!=c.goods_type?c.price:"0.00"!=c.price?c.price:"免费"))):React.createElement(React.Fragment,null,"0.00"!=c.price&&React.createElement("span",{className:"real-price",style:0!=c.goods_type?{}:{color:m.theme,fontSize:".24rem"}},"¥"+(c.highPrice>c.lowPrice&&0!=c.lowPrice?c.lowPrice+" ~ "+c.highPrice:"1"!=c.goods_type?c.price:"0.00"!=c.price&&0!=c.max_can_use_integral?c.price:0!=c.max_can_use_integral?"":"免费")),"0.00"!=c.price&&0!=c.max_can_use_integral&&React.createElement("span",{className:"goods-price-discount price-integral",style:0!=c.goods_type?{}:{color:m.theme}},"+"),0!=c.max_can_use_integral&&React.createElement("span",{className:"goods-price-discount price-integral",style:0!=c.goods_type?{}:{color:m.theme}},c.max_can_use_integral+"积分"))))),""!=f&&"2"!=c.integral&&React.createElement("div",{className:"goods-price-discount"},f),c.recommend_status&&React.createElement("div",{className:"goods-recommended-one",onClick:this.turnToGoodsRecommend},React.createElement("span",{className:"ico-moon icon-like-bold"}),"好物推荐")),React.createElement("div",{className:"goods-coupon",onClick:this.toCouponList},React.createElement("span",null,"活动："),React.createElement("span",{className:"word-orange",style:{color:m.theme}},"[最新优惠券]"),React.createElement("span",{className:"pull-right color-999"},"立即领取",React.createElement("span",{className:"ico-moon icon-rightarrow"}))),React.createElement("div",{className:"goods-freight"},React.createElement("div",null,"配送费："+(c.express_fee||"包邮"))),React.createElement("div",{className:"goods-freight"},React.createElement("label",null,"取货方式"),React.createElement("div",{className:"address-pick-up"},c.pick_up_type.map(function(e,t){return React.createElement("div",{key:t},React.createElement("span",{style:{color:m.theme},className:"ico-moon icon-goods-support-delivery suporrt"}),React.createElement("span",null,1==e?"快递":2==e?"同城":3==e?"自提":"点餐"))}))),React.createElement("div",{className:"goods-freight",onClick:this.showBuyDirectly},React.createElement("span",null,"选择商品规格"),React.createElement("span",{className:"pull-right ico-moon icon-rightarrow color-999"}))),React.createElement("div",{className:"payment-record"},1==y.card_switch&&(1==y.card_show_type&&1==c.is_vip_goods||2==y.card_show_type)&&React.createElement("div",{className:"vip-card-into vip-card"+y.card_detail_type},1==y.card_detail_type&&React.createElement("div",{className:"member-toast-wrap toast1","data-type":"ordinary-vip","data-id":c.vip_activity_id,onClick:this.gotoVipBenefits,"data-cardtype":_},React.createElement("div",{className:"image-wrap"},React.createElement("img",{src:"http://develop.zhichiwangluo.com/static/webapp/images/vip_price/a.png"})),React.createElement("div",{className:"member-toast"},React.createElement("span",{className:"member-tips"},y.card_title))),2==y.card_detail_type&&React.createElement("div",{className:"member-toast-wrap toast2","data-type":"ordinary-vip","data-id":c.vip_activity_id,onClick:this.gotoVipBenefits,"data-cardtype":_},React.createElement("div",{className:"image-wrap"},React.createElement("img",{src:"http://develop.zhichiwangluo.com/static/webapp/images/vip_price/b.png"})),React.createElement("div",{className:"member-toast"},React.createElement("span",{className:"member-tips"},y.card_title))),3==y.card_detail_type&&React.createElement("div",{className:"member-toast-wrap toast3","data-type":"ordinary-vip","data-id":c.vip_activity_id,onClick:this.gotoVipBenefits,"data-cardtype":_},React.createElement("div",{className:"image-wrap"},React.createElement("img",{src:"http://develop.zhichiwangluo.com/static/webapp/images/vip_price/c.png"})),React.createElement("div",{className:"member-toast"},React.createElement("span",{className:"member-tips"},y.card_title)))),React.createElement("div",{className:"wx-payDialog"},React.createElement("img",{className:"goods-style-wechat",src:"http://cdn.jisuapp.cn/zhichi_frontend/static/webapp/images/goods-style-wechat.png"}),React.createElement("span",{className:"payment-record-word"},"微信支付交易"),React.createElement("div",{className:"pull-right"},React.createElement("div",{className:"buyer-list"},c.buyer_list.map(function(e,t){return React.createElement("img",{key:t,src:e.cover_thumb||"http://img.zhichiwangluo.com/zcimgdir/album/file_55910ef341577.png"})})),React.createElement("span",{className:"word-orange buy-number",style:{color:m.theme}},"购买"+c.sales+"+"),React.createElement("span",{className:"color-999"},"浏览"+c.viewed_count+"+")))),React.createElement("div",{className:"goods-recommend"},React.createElement("div",{className:"recommend-header"},React.createElement("img",{src:c.app_cover,className:"store-picture"}),React.createElement("div",{className:"store-des"},c.app_name),React.createElement("div",{className:"pull-right go-to-store",onClick:this.goToHomepage},"进入店铺")),!!c.recommend_info.length&&React.createElement(E.ScrollView,{className:"recommend-content","scroll-x":"true"},c.recommend_info.map(function(e,a){return React.createElement("div",{className:"recommend-goods",key:a,onClick:t.toRecommendGoodsDetail,"data-id":e.form_data.id,"data-goods-type":e.form_data.goods_type},React.createElement("div",{className:"width-fix-image"},React.createElement("img",{mode:"widthFix",src:e.form_data.cover})),React.createElement("div",{className:"recommend-goods-title"},e.form_data.title),React.createElement("span",{className:"recommend-goods-price"},"¥"+e.form_data.price))}))),React.createElement("div",{style:{padding:".3rem",textAlign:"center",color:"#b2b2b2",fontSize:".24rem"}},React.createElement("div",{className:"line"}),React.createElement("div",{style:{display:"inline-block",verticalAlign:"middle",margin:"0 .08rem"}},"继续拖动，查看商品信息"),React.createElement("div",{className:"line"})),React.createElement("div",{className:"detail-comment"},React.createElement("div",{className:"detail-comment-menu"},React.createElement("div",null,React.createElement("span",{"data-type":"detail",onClick:this.oneSelectDetailCommet,style:"detail"==S?{color:m.theme,borderColor:m.theme}:{},className:"detail"==S?"active":""},"详情")),React.createElement("div",null,React.createElement("span",{"data-type":"comment",onClick:this.oneSelectDetailCommet,style:"comment"==S?{color:m.theme,borderColor:m.theme}:{},className:"comment-num-box "+("comment"==S?"active":"")},"评论",React.createElement("span",{className:"comment-num"},0==k[0]?"":k[0])))),"comment"!=S&&React.createElement("div",{className:"sub-detail rich-text",dangerouslySetInnerHTML:{__html:c.description}}),"comment"==S&&React.createElement("div",{className:"sub-comment"},React.createElement("div",{className:"comPage-wrap page"},React.createElement("div",{className:"comPage-top-section"},React.createElement("div",null,React.createElement("label",{onClick:this.clickCommentLabel,"data-type":"0",style:0==I?(0,i.default)({background:m.theme},"background",m.theme+"33"):{background:m.theme+"33"},className:"comPage-comment-label "+(0==I?"active":"")},"全部"),React.createElement("label",{onClick:this.clickCommentLabel,"data-type":"1",style:1==I?(0,i.default)({background:m.theme},"background",m.theme+"33"):{background:m.theme+"33"},className:"comPage-comment-label "+(1==I?"active":"")},"好评 (",React.createElement("label",{className:"comPage-positive-comment"},k[1]),")"),React.createElement("label",{onClick:this.clickCommentLabel,"data-type":"2",style:2==I?(0,i.default)({background:m.theme},"background",m.theme+"33"):{background:m.theme+"33"},className:"comPage-comment-label "+(2==I?"active":"")},"中评 (",React.createElement("label",{className:"comPage-neutral-comment"},k[2]),")"),React.createElement("label",{onClick:this.clickCommentLabel,"data-type":"3",style:3==I?(0,i.default)({background:m.theme},"background",m.theme+"33"):{background:m.theme+"33"},className:"comPage-comment-label "+(3==I?"active":"")},"差评 (",React.createElement("label",{className:"comPage-negative-comment"},k[3]),")"),React.createElement("label",{onClick:this.clickCommentLabel,"data-type":"4",style:4==I?(0,i.default)({background:m.theme},"background",m.theme+"33"):{background:m.theme+"33"},className:"comPage-comment-label "+(4==I?"active":"")},"有图 (",React.createElement("label",{className:"comPage-pic-comment"},k[4]),")"))),React.createElement("div",{className:"comPage-bottom-section",hidden:N},React.createElement("div",{className:"comPage-comment-list"},M.map(function(e,a){return React.createElement("div",{className:"comPage-comment-item",key:a},React.createElement("div",null,React.createElement("img",{className:"comPage-comment-photo",src:e.buyer_headimgurl}),React.createElement("span",{className:"comPage-comment-name"},e.buyer_nickname)),React.createElement("span",{className:"comPage-comment-date"},e.add_time),React.createElement("div",{className:"comPage-comment-content"},e.assess_info.content),e.assess_info.has_img&&React.createElement("div",{className:"comPage-comment-pics"},e.assess_info.img_arr.map(function(a,n){return React.createElement("img",{key:n,src:a,"data-src":a,"data-srcarr":e.assess_info.img_arr,onClick:t.clickPlusImages})})))}))),React.createElement("div",{className:"no-comment",hidden:!N},"暂无评论"))))),2==c.detail_type&&React.createElement("div",{className:"goods-detail-content styleTwo"},React.createElement("div",{className:"goods-header"},React.createElement("div",{className:"goods-price"},1!=c.is_vip_goods?React.createElement(React.Fragment,null,React.createElement("div",{className:"goods-current-price"},"2"!=c.integral?React.createElement(React.Fragment,null,React.createElement("span",{className:"real-price",style:0!=c.goods_type?{}:{color:m.theme}},"¥"+(c.highPrice>c.lowPrice&&0!=c.lowPrice?c.lowPrice+" ~ "+c.highPrice:"1"!=c.goods_type?c.price:"0.00"!=c.price?c.price:"免费"))):React.createElement(React.Fragment,null,"0.00"!=c.price&&React.createElement("span",{className:"real-price",style:0!=c.goods_type?{}:{color:m.theme}},"¥"+(c.highPrice>c.lowPrice&&0!=c.lowPrice?c.lowPrice+" ~ "+c.highPrice:"1"!=c.goods_type?c.price:"0.00"!=c.price&&0!=c.max_can_use_integral?c.price:0!=c.max_can_use_integral?"":"免费")),"0.00"!=c.price&&0!=c.max_can_use_integral&&React.createElement("span",{className:"goods-price-discount price-integral",style:0!=c.goods_type?{}:{color:m.theme}},"+"),0!=c.max_can_use_integral&&React.createElement("span",{className:"goods-price-discount price-integral",style:0!=c.goods_type?{}:{color:m.theme}},c.max_can_use_integral+"积分")),p&&0!=c.virtual_price&&1!=c.goods_type&&React.createElement("span",{className:"virtualPrice"},"原价￥"+c.virtual_price))):React.createElement(React.Fragment,null,React.createElement("div",{className:"goods-current-price member-status"},React.createElement("div",{className:"member-price real-price",style:0!=c.goods_type?{}:{color:m.theme}},React.createElement("span",{style:{marginRight:".06rem",fontSize:".36rem"}},"¥"),React.createElement("span",{style:{fontWeight:"bold",fontSize:".4rem"}},c.vip_price)),React.createElement("div",{className:"member-logo"},"会员价"),React.createElement("div",{className:"memebr-origin-price",style:{color:"#999"}},"2"!=c.integral?React.createElement(React.Fragment,null,React.createElement("span",{className:"real-price",style:{fontSize:".24rem",color:"#999"}},"¥ "+(c.highPrice>c.lowPrice&&0!=c.lowPrice?c.lowPrice+" ~ "+c.highPrice:"1"!=c.goods_type?c.price:"0.00"!=c.price?c.price:"免费"))):React.createElement(React.Fragment,null,"0.00"!=c.price&&React.createElement("span",{className:"real-price",style:{fontSize:".24rem",color:"#999"}},"¥"+(c.highPrice>c.lowPrice&&0!=c.lowPrice?c.lowPrice+" ~ "+c.highPrice:"1"!=c.goods_type?c.price:"0.00"!=c.price&&0!=c.max_can_use_integral?c.price:0!=c.max_can_use_integral?"":"免费")),"0.00"!=c.price&&0!=c.max_can_use_integral&&React.createElement("span",{className:"goods-price-discount price-integral",style:0!=c.goods_type?{}:{color:m.theme}},"+"),0!=c.max_can_use_integral&&React.createElement("span",{className:"goods-price-discount price-integral",style:0!=c.goods_type?{}:{color:m.theme}},c.max_can_use_integral+"积分"))))),React.createElement("div",{className:"share-goods",onClick:this.showQRCodeComponent},React.createElement("span",{className:"ico-moon icon-new-share"})),""!=f&&"2"!=c.integral&&React.createElement("div",{className:"goods-price-discount"},f)),React.createElement("div",{className:"goods-title goods-title-zero"},React.createElement("div",{className:"goodsInfo-title"},c.title),c.recommend_status&&React.createElement("div",{className:"goods-recommended",onClick:this.turnToGoodsRecommend},React.createElement("span",{className:"ico-moon icon-like-bold"}),"好物推荐"))),React.createElement("div",{className:"goods-coupon",onClick:this.toCouponList},React.createElement("span",{className:"styleTwo-btn",style:{color:m.theme,borderColor:m.theme}},"优惠券"),React.createElement("span",null,"领取优惠券"),React.createElement("span",{className:"pull-right ico-moon icon-rightarrow"})),React.createElement("div",{className:"goods-freight"},React.createElement("span",{className:"styleTwo-btn",style:{color:m.theme,borderColor:m.theme}},"配送费"),React.createElement("span",null,"配送费"+(c.express_fee||"包邮"))),React.createElement("div",{className:"goods-coupon"},React.createElement("label",null,"取货方式"),React.createElement("div",{className:"address-pick-up"},c.pick_up_type.map(function(e,t){return React.createElement("div",{key:t},React.createElement("span",{style:{color:m.theme},className:"ico-moon icon-goods-support-delivery suporrt"}),React.createElement("span",null,1==e?"快递":2==e?"同城":3==e?"自提":"点餐"))}))),React.createElement("div",{className:"vip-card-into vip-card3"},1==y.card_switch&&(1==y.card_show_type&&1==c.is_vip_goods||2==y.card_show_type)&&React.createElement(React.Fragment,null,1==y.card_detail_type&&React.createElement("div",{className:"member-toast-wrap toast1","data-type":"ordinary-vip","data-id":c.vip_activity_id,onClick:this.gotoVipBenefits,"data-cardtype":_},React.createElement("div",{className:"image-wrap"},React.createElement("img",{src:"http://develop.zhichiwangluo.com/static/webapp/images/vip_price/a.png"})),React.createElement("div",{className:"member-toast"},React.createElement("span",{className:"member-tips"},y.card_title))),2==y.card_detail_type&&React.createElement("div",{className:"member-toast-wrap toast2","data-type":"ordinary-vip","data-id":c.vip_activity_id,onClick:this.gotoVipBenefits,"data-cardtype":_},React.createElement("div",{className:"image-wrap"},React.createElement("img",{src:"http://develop.zhichiwangluo.com/static/webapp/images/vip_price/b.png"})),React.createElement("div",{className:"member-toast"},React.createElement("span",{className:"member-tips"},y.card_title))),3==y.card_detail_type&&React.createElement("div",{className:"member-toast-wrap toast3","data-type":"ordinary-vip","data-id":c.vip_activity_id,onClick:this.gotoVipBenefits,"data-cardtype":_},React.createElement("div",{className:"image-wrap"},React.createElement("img",{src:"http://develop.zhichiwangluo.com/static/webapp/images/vip_price/c.png"})),React.createElement("div",{className:"member-toast"},React.createElement("span",{className:"member-tips"},y.card_title))))),React.createElement("div",{className:"goods-comment",hidden:N},React.createElement("div",{className:"comment-title"},React.createElement("div",{className:"goods-comment-title"},"用户怎么说 ("+(k[0]||0)+")"),React.createElement("div",{className:"go-to-comment",onClick:this.goToCommentPage},"查看全部")),React.createElement("div",{className:"block-item"},React.createElement(E.ScrollView,{className:"comPage-comment-list","scroll-x":"true"},M.map(function(e,t){return React.createElement("div",{className:"comPage-comment-item",key:t},React.createElement("div",null,React.createElement("img",{className:"comPage-comment-photo",src:e.buyer_headimgurl}),React.createElement("span",{className:"comPage-comment-name"},e.buyer_nickname)),React.createElement("div",{className:"comPage-comment-content"},e.assess_info.content))})))),React.createElement("div",{className:"goods-recommend"},React.createElement("div",{className:"recommend-header"},React.createElement("img",{src:c.app_cover,className:"store-picture"}),React.createElement("div",{className:"store-name"},c.app_name),React.createElement("div",{className:"pull-right go-to-store",onClick:this.goToHomepage},"进入店铺"))),React.createElement("div",{style:{padding:".3rem",textAlign:"center",color:"#b2b2b2",fontSize:".24rem"}},React.createElement("div",{className:"line"}),React.createElement("div",{style:{display:"inline-block",verticalAlign:"middle",margin:"0 4px"}},"继续拖动，查看商品信息"),React.createElement("div",{className:"line"})),React.createElement("div",{className:"goods-detail-section"},React.createElement("div",{className:"comment-title"},React.createElement("div",{style:{borderBottom:"1px solid #f4f4f4",paddingBottom:".2rem"}},"商品详情")),React.createElement("div",{className:"goods-details rich-text",dangerouslySetInnerHTML:{__html:c.description}})),!!c.recommend_info.length&&React.createElement("div",{className:"goods-recommend"},React.createElement("div",{className:"two-recommend"},"店铺推荐"),React.createElement(E.ScrollView,{className:"recommend-content","scroll-x":"true"},c.recommend_info.map(function(e,a){return React.createElement("div",{className:"recommend-goods",key:e.form_data.id,onClick:t.toRecommendGoodsDetail,"data-id":e.form_data.id,"data-goods-type":e.form_data.goods_type},React.createElement("div",{className:"width-fix-image"},React.createElement("img",{mode:"widthFix",src:e.form_data.cover})),React.createElement("div",{className:"recommend-goods-title"},e.form_data.title),React.createElement("span",{className:"recommend-goods-price"},"¥"+e.form_data.price))})))),2==c.detail_type&&React.createElement("div",{className:"goods-bottom-two"},React.createElement("div",{className:"bottom-two-left"},React.createElement("div",null,React.createElement("div",{className:"ico-moon icon-service2"}),React.createElement("div",null,"客服")),!C&&React.createElement("div",{className:"form-two-contain"},React.createElement("form",null,React.createElement("button",{type:"button",onClick:1==c.is_favorite?this.deleteFavoriteGoods:this.addFavoriteGoods},React.createElement("span",{style:1==c.is_favorite?{color:m.theme}:{},className:"ico-moon icon-"+(1==c.is_favorite?"collect-solid":"goods-detail-favorites")}),React.createElement("div",null,"收藏")))),"2"!=c.integral&&React.createElement("div",{onClick:this.goToShoppingCart},React.createElement("span",{className:"ico-moon icon-new-goods-shopping"}),React.createElement("div",null,"购物车"))),React.createElement("div",{className:"bottom-two-right"},"2"!=c.integral&&React.createElement("label",{className:"add-to-shoppingCart",style:{borderColor:m.theme,color:m.theme},onClick:this.showAddToShoppingCart},"加入购物车"),React.createElement("label",{className:"buy-goods-directly",onClick:this.showBuyDirectly,style:"2"==c.integral?{width:"4.75rem",background:m.theme}:{background:m.theme}},"立即购买"))),React.createElement("div",{id:"payDialog",className:"page-dialog-wrap",hidden:T},React.createElement("div",{className:"page-bottom-dialog"},React.createElement("div",{className:"pay-close-dialog page-dialog-close",onClick:this.hiddeAddToShoppingCart},React.createElement("span",{className:"ico-moon icon-closes"})),React.createElement("div",{className:"dialog-goods-header"},React.createElement("div",{className:"thumb"},React.createElement("div",{className:"thumb-wrap"},React.createElement("img",{"data-src":P.imgurl||c.cover,onClick:this.clickPlusImages,className:"pay-goods-cover",src:P.imgurl||c.cover}))),React.createElement("div",{className:"pay-goods-baseinfo"},React.createElement("div",{className:"pay-goods-price"},1!=c.is_vip_goods?React.createElement(React.Fragment,null,React.createElement("div",{className:"pay-current-price"},"0.00"!=P.price&&React.createElement("span",{style:{color:m.theme}},"¥"+P.price),"2"==c.integral?React.createElement(React.Fragment,null,"0.00"!=P.price&&0!=c.max_can_use_integral&&React.createElement("span",{style:0!=c.goods_type?{}:{color:m.theme}},"+"),0!=c.max_can_use_integral&&React.createElement("span",{style:0!=c.goods_type?{}:{color:m.theme}},c.max_can_use_integral+"积分")):React.createElement(React.Fragment,null,""!=f&&React.createElement("span",{className:"goods-price-discount"},f)),p&&0!=P.virtualPrice&&1!=c.goods_type&&React.createElement("span",{className:"virtualPrice"},"￥"+P.virtualPrice))):React.createElement(React.Fragment,null,React.createElement("div",{className:"pay-current-price member-status"},React.createElement("div",{className:"member-price"},React.createElement("span",null,"¥"),React.createElement("span",null,P.vipPrice)),P.vipPrice!=P.price&&React.createElement("div",{className:"member-logo",style:{bottom:0}},"会员价"),React.createElement("div",{className:"memebr-origin-price",style:{color:"#999"}},p&&0!=P.virtualPrice&&1!=c.goods_type&&React.createElement("span",{className:"virtualPrice"},"￥"+P.virtualPrice))))),h&&React.createElement("div",{className:"pay-goods-stock"},"库存 "+P.stock),P.models_text&&React.createElement("div",{className:"pay-checked-text clearfix"},"已选："+P.models_text))),React.createElement("div",{className:"payDialog-content"},React.createElement("div",{className:"pay-goods-models",hidden:!(c.model_items&&c.model_items.length)},c.model&&c.model.map(function(e,a){return React.createElement("div",{key:a},React.createElement("span",{className:"model-title"},e.name),React.createElement("label",{className:"pills-list"},e&&e.subModelName&&e.subModelName.map(function(n,o){return React.createElement("label",{key:o,"data-model-index":a,"data-submodel-index":o,className:"subModel "+(P.models[a]==e.subModelId[o]?"select":""),"data-submodel-id":e.subModelId[o],onClick:t.selectSubModel,style:P.models[a]==e.subModelId[o]?{background:m.theme}:{}},n)})))})),React.createElement("div",{className:"payDialog-buy-num",style:{paddingLeft:".2rem",paddingRight:".2rem"}},React.createElement("div",{className:"clearfix"},React.createElement("span",null,"购买数量"),React.createElement("div",{className:"pull-right"},React.createElement("div",{className:"quantity pull-left"},React.createElement("label",{className:"minus "+(P.buyCount<=1?"disabled":"")}),React.createElement("input",(e={className:"pay-buy-count",type:"number"},(0,i.default)(e,"className","txt"),(0,i.default)(e,"value",P.buyCount),(0,i.default)(e,"onChange",this.inputBuyCount),e)),React.createElement("label",{className:"plus "+(P.buyCount>=P.stock||P.buyCount>=c.seckill_buy_limit?"disabled":"")}),React.createElement("div",{className:"response-area response-area-minus",onClick:this.clickMinusButton}),React.createElement("div",{className:"response-area response-area-plus",onClick:this.clickPlusButton})))))),React.createElement("div",{className:"dialog-bottom"},React.createElement("div",{hidden:L},React.createElement("div",{style:{background:m.theme},className:"btn-orange pay-buy-next",onClick:this.buyDirectlyNextStep},"下一步")),React.createElement("div",{hidden:!L},"2"!=c.integral&&React.createElement("div",{style:{background:m.theme},className:"pay-add-to-shoppingcart",onClick:this.sureAddToShoppingCart},"加入购物车"))))),B&&React.createElement("div",{className:"foot-print-contain",onClick:this.hideFootPrint},React.createElement("div",{className:"foot-print-box",animation:A,onClick:this.stopPropagation},React.createElement("div",{className:"foot-print-header"},"我的足迹("+(1-F)+"/"+O.length+")"),React.createElement("div",{className:"foot-print-list",style:{left:2.76*F+"rem"},onTouchStart:this.startFoot,onTouchEnd:this.endFoot},O.map(function(e,t){return React.createElement("div",{className:"foot-print-goods "+(F+t==0?"selected":""),"data-id":e.id,onClick:F+t==0&&1!=e.status?"goFootPrintDetail":"",key:e.id},React.createElement("img",{src:e.cover}),React.createElement("div",{className:"foot-print-title"},e.title),React.createElement("div",{className:"foot-print-price"},"¥"+e.price,1==e.status&&React.createElement("span",{className:"foot-invalid"},"失效")))})),F<0&&React.createElement("div",{className:"ico-moon icon-leftarrow foot-print-right",onClick:this.footPrintLeft}),O.length+F>1&&React.createElement("div",{className:"ico-moon icon-rightarrow foot-print-left",onClick:this.footPrintRight}),1-F>=10&&React.createElement("div",{className:"foot-print-more",onClick:this.toGoodsFootPrint},React.createElement("span",null,"查看更多")))))}}]),t}(N.default);t.default=k},function(e,t,a){"use strict";function n(e,t,a,n){return(a-t)*Math.sqrt(1-(e=e/n-1)*e)+t}function o(e,t,a,n){return(a-t)*e/n+t}Object.defineProperty(t,"__esModule",{value:!0});var i=a(8),s=a.n(i),r=a(0),c=a.n(r),l=a(3),d=a.n(l),u=a(1),m=a.n(u),p=a(2),f=a.n(p),g=a(4),h=a.n(g),v=[{component:function(e){function t(){c()(this,t);var e=m()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.handleClick=function(t){t.preventDefault(),e.props.previousSlide()},e}return f()(t,e),d()(t,[{key:"render",value:function(){return h.a.createElement("button",{style:this.getButtonStyles(0===this.props.currentSlide&&!this.props.wrapAround),onClick:this.handleClick},"PREV")}},{key:"getButtonStyles",value:function(e){return{border:0,background:"rgba(0,0,0,0.4)",color:"white",padding:10,outline:0,opacity:e?.3:1,cursor:"pointer"}}}]),t}(h.a.Component),position:"CenterLeft"},{component:function(e){function t(){c()(this,t);var e=m()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.handleClick=function(t){t.preventDefault(),e.props.nextSlide&&e.props.nextSlide()},e}return f()(t,e),d()(t,[{key:"render",value:function(){return h.a.createElement("button",{style:this.getButtonStyles(this.props.currentSlide+this.props.slidesToScroll>=this.props.slideCount&&!this.props.wrapAround),onClick:this.handleClick},"NEXT")}},{key:"getButtonStyles",value:function(e){return{border:0,background:"rgba(0,0,0,0.4)",color:"white",padding:10,outline:0,opacity:e?.3:1,cursor:"pointer"}}}]),t}(h.a.Component),position:"CenterRight"},{component:function(e){function t(){return c()(this,t),m()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return f()(t,e),d()(t,[{key:"render",value:function(){var e=this,t=this.getIndexes(this.props.slideCount,this.props.slidesToScroll);return h.a.createElement("ul",{style:this.getListStyles()},t.map(function(t){return h.a.createElement("li",{style:e.getListItemStyles(),key:t},h.a.createElement("button",{style:e.getButtonStyles(e.props.currentSlide===t),onClick:e.props.goToSlide&&e.props.goToSlide.bind(null,t)},"•"))}))}},{key:"getIndexes",value:function(e,t){for(var a=[],n=0;n<e;n+=t)a.push(n);return a}},{key:"getListStyles",value:function(){return{position:"relative",margin:0,top:-10,padding:0}}},{key:"getListItemStyles",value:function(){return{listStyleType:"none",display:"inline-block"}}},{key:"getButtonStyles",value:function(e){return{border:0,background:"transparent",color:"black",cursor:"pointer",padding:10,outline:0,fontSize:24,opacity:e?1:.5}}}]),t}(h.a.Component),position:"BottomCenter"}],_=v,y=a(348),E=a.n(y),b=a(349),N=a.n(b),R={ADDITIVE:"ADDITIVE",DESTRUCTIVE:"DESTRUCTIVE"},k=function(e,t,a){null!==e&&void 0!==e&&(e.addEventListener?e.addEventListener(t,a,!1):e.attachEvent?e.attachEvent("on"+t,a):e["on"+t]=a)},w=function(e,t,a){null!==e&&void 0!==e&&(e.removeEventListener?e.removeEventListener(t,a,!1):e.detachEvent?e.detachEvent("on"+t,a):e["on"+t]=null)},x=function(e){function t(e){c()(this,t);var a=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a._rafCb=function(){var e=a.state;if(0!==e.tweenQueue.length){for(var t=Date.now(),n=[],o=0;o<e.tweenQueue.length;o++){var i=e.tweenQueue[o],s=i.initTime,r=i.config;t-s<r.duration?n.push(i):r.onEnd&&r.onEnd()}-1!==a._rafID&&(a.setState({tweenQueue:n}),a._rafID=N()(a._rafCb))}},a.handleClick=function(e){!0===a.clickSafe&&(e.preventDefault(),e.stopPropagation(),e.nativeEvent&&e.nativeEvent.stopPropagation())},a.autoplayIterator=function(){if(a.props.wrapAround)return a.nextSlide();a.state.currentSlide!==a.state.slideCount-a.state.slidesToShow?a.nextSlide():a.stopAutoplay()},a.goToSlide=function(e){var t=a.props,n=t.beforeSlide,o=t.afterSlide;if(e>=h.a.Children.count(a.props.children)||e<0){if(!a.props.wrapAround)return;if(e>=h.a.Children.count(a.props.children))return n(a.state.currentSlide,0),a.setState({currentSlide:0},function(){a.animateSlide(null,null,a.getTargetLeft(null,e),function(){a.animateSlide(null,.01),o(0),a.resetAutoplay(),a.setExternalData()})});var i=h.a.Children.count(a.props.children)-a.state.slidesToScroll;return n(a.state.currentSlide,i),a.setState({currentSlide:i},function(){a.animateSlide(null,null,a.getTargetLeft(null,e),function(){a.animateSlide(null,.01),o(i),a.resetAutoplay(),a.setExternalData()})})}n(a.state.currentSlide,e),a.setState({currentSlide:e},function(){a.animateSlide(),a.props.afterSlide(e),a.resetAutoplay(),a.setExternalData()})},a.nextSlide=function(){var e=h.a.Children.count(a.props.children),t=a.props.slidesToShow;if("auto"===a.props.slidesToScroll&&(t=a.state.slidesToScroll),!(a.state.currentSlide>=e-t)||a.props.wrapAround)if(a.props.wrapAround)a.goToSlide(a.state.currentSlide+a.state.slidesToScroll);else{if(1!==a.props.slideWidth)return a.goToSlide(a.state.currentSlide+a.state.slidesToScroll);a.goToSlide(Math.min(a.state.currentSlide+a.state.slidesToScroll,e-t))}},a.previousSlide=function(){a.state.currentSlide<=0&&!a.props.wrapAround||(a.props.wrapAround?a.goToSlide(a.state.currentSlide-a.state.slidesToScroll):a.goToSlide(Math.max(0,a.state.currentSlide-a.state.slidesToScroll)))},a.onResize=function(){a.setDimensions()},a.onReadyStateChange=function(){a.setDimensions()},a.state={currentSlide:a.props.slideIndex,dragging:!1,frameWidth:0,left:0,slideCount:0,slidesToScroll:a.props.slidesToScroll,slideWidth:0,top:0,tweenQueue:[]},a.touchObject={},a.clickSafe=!0,a}return f()(t,e),d()(t,[{key:"componentWillMount",value:function(){this.setInitialDimensions()}},{key:"componentDidMount",value:function(){this.setDimensions(),this.bindEvents(),this.setExternalData(),this.props.autoplay&&this.startAutoplay()}},{key:"componentWillReceiveProps",value:function(e){this.setState({slideCount:e.children.length}),this.setDimensions(e),this.props.slideIndex!==e.slideIndex&&e.slideIndex!==this.state.currentSlide&&this.goToSlide(e.slideIndex),this.props.autoplay!==e.autoplay&&(e.autoplay?this.startAutoplay():this.stopAutoplay())}},{key:"componentWillUnmount",value:function(){this.unbindEvents(),this.stopAutoplay(),N.a.cancel(this._rafID),this._rafID=-1}},{key:"tweenState",value:function(e,t){var a=this,n=t.easing,o=t.duration,i=t.delay,s=t.beginValue,r=t.endValue,c=t.onEnd,l=t.stackBehavior;this.setState(function(t){var d=t,u=void 0,m=void 0;if("string"==typeof e)u=e,m=e;else{for(var p=0;p<e.length-1;p++)d=d[e[p]];u=e[e.length-1],m=e.join("|")}var f={easing:n,duration:null==o?300:o,delay:null==i?0:i,beginValue:null==s?d[u]:s,endValue:r,onEnd:c,stackBehavior:l||"ADDITIVE"},g=t.tweenQueue;return f.stackBehavior===R.DESTRUCTIVE&&(g=t.tweenQueue.filter(function(e){return e.pathHash!==m})),g.push({pathHash:m,config:f,initTime:Date.now()+f.delay}),d[u]=f.endValue,1===g.length&&(a._rafID=N()(a._rafCb)),{tweenQueue:g}})}},{key:"getTweeningValue",value:function(e){var t=this.state,a=void 0,n=void 0;if("string"==typeof e)a=t[e],n=e;else{a=t;for(var o=0;o<e.length;o++)a=a[e[o]];n=e.join("|")}for(var i=Date.now(),s=0;s<t.tweenQueue.length;s++){var r=t.tweenQueue[s],c=r.pathHash,l=r.initTime,d=r.config;if(c===n){var u=i-l>d.duration?d.duration:Math.max(0,i-l);a+=(0===d.duration?d.endValue:d.easing(u,d.beginValue,d.endValue,d.duration))-d.endValue}}return a}},{key:"render",value:function(){var e=this,t=h.a.Children.count(this.props.children)>1?this.formatChildren(this.props.children):this.props.children;return h.a.createElement("div",{className:["slider",this.props.className||""].join(" "),ref:"slider",style:s()({},this.getSliderStyles(),this.props.style)},h.a.createElement("div",s()({className:"slider-frame",ref:"frame",style:this.getFrameStyles()},this.getTouchEvents(),this.getMouseEvents(),{onClick:this.handleClick}),h.a.createElement("ul",{className:"slider-list",ref:"list",style:this.getListStyles()},t)),this.props.decorators?this.props.decorators.map(function(t,a){return h.a.createElement("div",{style:s()({},e.getDecoratorStyles(t.position),t.style||{}),className:"slider-decorator-"+a,key:a},h.a.createElement(t.component,{currentSlide:e.state.currentSlide,slideCount:e.state.slideCount,frameWidth:e.state.frameWidth,slideWidth:e.state.slideWidth,slidesToScroll:e.state.slidesToScroll,cellSpacing:e.props.cellSpacing,slidesToShow:e.props.slidesToShow,wrapAround:e.props.wrapAround,nextSlide:e.nextSlide,previousSlide:e.previousSlide,goToSlide:e.goToSlide}))}):null,h.a.createElement("style",{type:"text/css",dangerouslySetInnerHTML:{__html:this.getStyleTagStyles()}}))}},{key:"getTouchEvents",value:function(){var e=this;return!1===this.props.swiping?null:{onTouchStart:function(t){e.touchObject={startX:t.touches[0].pageX,startY:t.touches[0].pageY},e.handleMouseOver()},onTouchMove:function(t){var a=e.swipeDirection(e.touchObject.startX,t.touches[0].pageX,e.touchObject.startY,t.touches[0].pageY);0!==a&&t.preventDefault();var n=e.props.vertical?Math.round(Math.sqrt(Math.pow(t.touches[0].pageY-e.touchObject.startY,2))):Math.round(Math.sqrt(Math.pow(t.touches[0].pageX-e.touchObject.startX,2)));e.touchObject={startX:e.touchObject.startX,startY:e.touchObject.startY,endX:t.touches[0].pageX,endY:t.touches[0].pageY,length:n,direction:a},e.setState({left:e.props.vertical?0:e.getTargetLeft(e.touchObject.length*e.touchObject.direction),top:e.props.vertical?e.getTargetLeft(e.touchObject.length*e.touchObject.direction):0})},onTouchEnd:function(t){e.handleSwipe(t),e.handleMouseOut()},onTouchCancel:function(t){e.handleSwipe(t)}}}},{key:"getMouseEvents",value:function(){var e=this;return!1===this.props.dragging?null:{onMouseOver:function(){e.handleMouseOver()},onMouseOut:function(){e.handleMouseOut()},onMouseDown:function(t){e.touchObject={startX:t.clientX,startY:t.clientY},e.setState({dragging:!0})},onMouseMove:function(t){if(e.state.dragging){var a=e.swipeDirection(e.touchObject.startX,t.clientX,e.touchObject.startY,t.clientY);0!==a&&t.preventDefault();var n=e.props.vertical?Math.round(Math.sqrt(Math.pow(t.clientY-e.touchObject.startY,2))):Math.round(Math.sqrt(Math.pow(t.clientX-e.touchObject.startX,2)));e.touchObject={startX:e.touchObject.startX,startY:e.touchObject.startY,endX:t.clientX,endY:t.clientY,length:n,direction:a},e.setState({left:e.props.vertical?0:e.getTargetLeft(e.touchObject.length*e.touchObject.direction),top:e.props.vertical?e.getTargetLeft(e.touchObject.length*e.touchObject.direction):0})}},onMouseUp:function(t){e.state.dragging&&e.handleSwipe(t)},onMouseLeave:function(t){e.state.dragging&&e.handleSwipe(t)}}}},{key:"handleMouseOver",value:function(){this.props.autoplay&&(this.autoplayPaused=!0,this.stopAutoplay())}},{key:"handleMouseOut",value:function(){this.props.autoplay&&this.autoplayPaused&&(this.startAutoplay(),this.autoplayPaused=null)}},{key:"handleSwipe",value:function(e){void 0!==this.touchObject.length&&this.touchObject.length>44?this.clickSafe=!0:this.clickSafe=!1;var t=this.props,a=t.slidesToShow,n=t.slidesToScroll,o=t.swipeSpeed;"auto"===n&&(a=this.state.slidesToScroll),h.a.Children.count(this.props.children)>1&&this.touchObject.length>this.state.slideWidth/a/o?1===this.touchObject.direction?this.state.currentSlide>=h.a.Children.count(this.props.children)-a&&!this.props.wrapAround?this.animateSlide(this.props.edgeEasing):this.nextSlide():-1===this.touchObject.direction&&(this.state.currentSlide<=0&&!this.props.wrapAround?this.animateSlide(this.props.edgeEasing):this.previousSlide()):this.goToSlide(this.state.currentSlide),this.touchObject={},this.setState({dragging:!1})}},{key:"swipeDirection",value:function(e,t,a,n){var o=e-t,i=a-n,s=Math.atan2(i,o),r=Math.round(180*s/Math.PI);return r<0&&(r=360-Math.abs(r)),r<=45&&r>=0?1:r<=360&&r>=315?1:r>=135&&r<=225?-1:!0===this.props.vertical?r>=35&&r<=135?1:-1:0}},{key:"startAutoplay",value:function(){h.a.Children.count(this.props.children)<=1||(this.autoplayID=setInterval(this.autoplayIterator,this.props.autoplayInterval))}},{key:"resetAutoplay",value:function(){this.props.resetAutoplay&&this.props.autoplay&&!this.autoplayPaused&&(this.stopAutoplay(),this.startAutoplay())}},{key:"stopAutoplay",value:function(){this.autoplayID&&clearInterval(this.autoplayID)}},{key:"animateSlide",value:function(e,t,a,n){this.tweenState(this.props.vertical?"top":"left",{easing:e||this.props.easing,duration:t||this.props.speed,endValue:a||this.getTargetLeft(),delay:null,beginValue:null,onEnd:n||null,stackBehavior:R})}},{key:"getTargetLeft",value:function(e,t){var a=void 0,n=t||this.state.currentSlide,o=this.props.cellSpacing;switch(this.props.cellAlign){case"left":a=0,a-=o*n;break;case"center":a=(this.state.frameWidth-this.state.slideWidth)/2,a-=o*n;break;case"right":a=this.state.frameWidth-this.state.slideWidth,a-=o*n}var i=this.state.slideWidth*n;return this.state.currentSlide>0&&n+this.state.slidesToScroll>=this.state.slideCount&&1!==this.props.slideWidth&&!this.props.wrapAround&&"auto"===this.props.slidesToScroll&&(i=this.state.slideWidth*this.state.slideCount-this.state.frameWidth,a=0,a-=o*(this.state.slideCount-1)),a-=e||0,-1*(i-a)}},{key:"bindEvents",value:function(){E.a.canUseDOM&&(k(window,"resize",this.onResize),k(document,"readystatechange",this.onReadyStateChange))}},{key:"unbindEvents",value:function(){E.a.canUseDOM&&(w(window,"resize",this.onResize),w(document,"readystatechange",this.onReadyStateChange))}},{key:"formatChildren",value:function(e){var t=this,a=this.props.vertical?this.getTweeningValue("top"):this.getTweeningValue("left");return h.a.Children.map(e,function(e,n){return h.a.createElement("li",{className:"slider-slide",style:t.getSlideStyles(n,a),key:n},e)})}},{key:"setInitialDimensions",value:function(){var e=this,t=this.props,a=t.vertical,n=t.initialSlideHeight,o=t.initialSlideWidth,i=t.slidesToShow,s=t.cellSpacing,r=t.children,c=a?n||0:o||0,l=n?n*i:0,d=l+s*(i-1);this.setState({slideHeight:l,frameWidth:a?d:"100%",slideCount:h.a.Children.count(r),slideWidth:c},function(){e.setLeft(),e.setExternalData()})}},{key:"setDimensions",value:function(e){var t=this;e=e||this.props;var a=void 0,n=void 0,o=void 0,i=void 0,s=e.slidesToScroll,r=this.refs.frame,c=r.childNodes[0].childNodes[0];c?(c.style.height="auto",o=this.props.vertical?c.offsetHeight*e.slidesToShow:c.offsetHeight):o=100,i="number"!=typeof e.slideWidth?parseInt(e.slideWidth,10):e.vertical?o/e.slidesToShow*e.slideWidth:r.offsetWidth/e.slidesToShow*e.slideWidth,e.vertical||(i-=e.cellSpacing*((100-100/e.slidesToShow)/100)),n=o+e.cellSpacing*(e.slidesToShow-1),a=e.vertical?n:r.offsetWidth,"auto"===e.slidesToScroll&&(s=Math.floor(a/(i+e.cellSpacing))),this.setState({slideHeight:o,frameWidth:a,slideWidth:i,slidesToScroll:s,left:e.vertical?0:this.getTargetLeft(),top:e.vertical?this.getTargetLeft():0},function(){t.setLeft()})}},{key:"setLeft",value:function(){this.setState({left:this.props.vertical?0:this.getTargetLeft(),top:this.props.vertical?this.getTargetLeft():0})}},{key:"setExternalData",value:function(){this.props.data&&this.props.data()}},{key:"getListStyles",value:function(){var e=this.state.slideWidth*h.a.Children.count(this.props.children),t=this.props.cellSpacing,a=t*h.a.Children.count(this.props.children),n="translate3d("+this.getTweeningValue("left")+"px, "+this.getTweeningValue("top")+"px, 0)";return{transform:n,WebkitTransform:n,msTransform:"translate("+this.getTweeningValue("left")+"px, "+this.getTweeningValue("top")+"px)",position:"relative",display:"block",margin:this.props.vertical?t/2*-1+"px 0px":"0px "+t/2*-1+"px",padding:0,height:this.props.vertical?e+a:this.state.slideHeight,width:this.props.vertical?"auto":e+a,cursor:!0===this.state.dragging?"pointer":"inherit",boxSizing:"border-box",MozBoxSizing:"border-box"}}},{key:"getFrameStyles",value:function(){return{position:"relative",display:"block",overflow:this.props.frameOverflow,height:this.props.vertical?this.state.frameWidth||"initial":"auto",margin:this.props.framePadding,padding:0,transform:"translate3d(0, 0, 0)",WebkitTransform:"translate3d(0, 0, 0)",msTransform:"translate(0, 0)",boxSizing:"border-box",MozBoxSizing:"border-box"}}},{key:"getSlideStyles",value:function(e,t){var a=this.getSlideTargetPosition(e,t),n=this.props.cellSpacing;return{position:"absolute",left:this.props.vertical?0:a,top:this.props.vertical?a:0,display:this.props.vertical?"block":"inline-block",listStyleType:"none",verticalAlign:"top",width:this.props.vertical?"100%":this.state.slideWidth,height:"auto",boxSizing:"border-box",MozBoxSizing:"border-box",marginLeft:this.props.vertical?"auto":n/2,marginRight:this.props.vertical?"auto":n/2,marginTop:this.props.vertical?n/2:"auto",marginBottom:this.props.vertical?n/2:"auto"}}},{key:"getSlideTargetPosition",value:function(e,t){var a=this.state.frameWidth/this.state.slideWidth,n=(this.state.slideWidth+this.props.cellSpacing)*e,o=(this.state.slideWidth+this.props.cellSpacing)*a*-1;if(this.props.wrapAround){var i=Math.ceil(t/this.state.slideWidth);if(this.state.slideCount-i<=e)return(this.state.slideWidth+this.props.cellSpacing)*(this.state.slideCount-e)*-1;var s=Math.ceil((Math.abs(t)-Math.abs(o))/this.state.slideWidth);if(1!==this.state.slideWidth&&(s=Math.ceil((Math.abs(t)-this.state.slideWidth)/this.state.slideWidth)),e<=s-1)return(this.state.slideWidth+this.props.cellSpacing)*(this.state.slideCount+e)}return n}},{key:"getSliderStyles",value:function(){return{position:"relative",display:"block",width:this.props.width,height:"auto",boxSizing:"border-box",MozBoxSizing:"border-box",visibility:this.state.slideWidth?"visible":"hidden"}}},{key:"getStyleTagStyles",value:function(){return".slider-slide > img {width: 100%; display: block;}"}},{key:"getDecoratorStyles",value:function(e){switch(e){case"TopLeft":return{position:"absolute",top:0,left:0};case"TopCenter":return{position:"absolute",top:0,left:"50%",transform:"translateX(-50%)",WebkitTransform:"translateX(-50%)",msTransform:"translateX(-50%)"};case"TopRight":return{position:"absolute",top:0,right:0};case"CenterLeft":return{position:"absolute",top:"50%",left:0,transform:"translateY(-50%)",WebkitTransform:"translateY(-50%)",msTransform:"translateY(-50%)"};case"CenterCenter":return{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-50%)",WebkitTransform:"translate(-50%, -50%)",msTransform:"translate(-50%, -50%)"};case"CenterRight":return{position:"absolute",top:"50%",right:0,transform:"translateY(-50%)",WebkitTransform:"translateY(-50%)",msTransform:"translateY(-50%)"};case"BottomLeft":return{position:"absolute",bottom:0,left:0};case"BottomCenter":return{position:"absolute",bottom:0,width:"100%",textAlign:"center"};case"BottomRight":return{position:"absolute",bottom:0,right:0};default:return{position:"absolute",top:0,left:0}}}}]),t}(h.a.Component);x.defaultProps={afterSlide:function(){},autoplay:!1,resetAutoplay:!0,swipeSpeed:12,autoplayInterval:3e3,beforeSlide:function(){},cellAlign:"left",cellSpacing:0,data:function(){},decorators:_,dragging:!0,easing:n,edgeEasing:o,framePadding:"0px",frameOverflow:"hidden",slideIndex:0,slidesToScroll:1,slidesToShow:1,slideWidth:1,speed:500,swiping:!0,vertical:!1,width:"100%",wrapAround:!1,style:{}};var C=x;a.d(t,"default",function(){return C})},function(e,t,a){var n;/*!
  Copyright (c) 2015 Jed Watson.
  Based on code that is Copyright 2013-2015, Facebook, Inc.
  All rights reserved.
*/
!function(){"use strict";var o=!("undefined"==typeof window||!window.document||!window.document.createElement),i={canUseDOM:o,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:o&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:o&&!!window.screen};void 0!==(n=function(){return i}.call(t,a,t,e))&&(e.exports=n)}()},function(e,t,a){(function(t){for(var n=a(350),o="undefined"==typeof window?t:window,i=["moz","webkit"],s="AnimationFrame",r=o["request"+s],c=o["cancel"+s]||o["cancelRequest"+s],l=0;!r&&l<i.length;l++)r=o[i[l]+"Request"+s],c=o[i[l]+"Cancel"+s]||o[i[l]+"CancelRequest"+s];if(!r||!c){var d=0,u=0,m=[];r=function(e){if(0===m.length){var t=n(),a=Math.max(0,1e3/60-(t-d));d=a+t,setTimeout(function(){var e=m.slice(0);m.length=0;for(var t=0;t<e.length;t++)if(!e[t].cancelled)try{e[t].callback(d)}catch(e){setTimeout(function(){throw e},0)}},Math.round(a))}return m.push({handle:++u,callback:e,cancelled:!1}),u},c=function(e){for(var t=0;t<m.length;t++)m[t].handle===e&&(m[t].cancelled=!0)}}e.exports=function(e){return r.call(o,e)},e.exports.cancel=function(){c.apply(o,arguments)},e.exports.polyfill=function(e){e||(e=o),e.requestAnimationFrame=r,e.cancelAnimationFrame=c}}).call(t,a(102))},function(e,t,a){(function(t){(function(){var a,n,o,i,s,r;"undefined"!=typeof performance&&null!==performance&&performance.now?e.exports=function(){return performance.now()}:void 0!==t&&null!==t&&t.hrtime?(e.exports=function(){return(a()-s)/1e6},n=t.hrtime,a=function(){var e;return e=n(),1e9*e[0]+e[1]},i=a(),r=1e9*t.uptime(),s=i-r):Date.now?(e.exports=function(){return Date.now()-o},o=Date.now()):(e.exports=function(){return(new Date).getTime()-o},o=(new Date).getTime())}).call(this)}).call(t,a(133))},function(e,t){},function(e,t){},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(9),i=n(o),s=a(0),r=n(s),c=a(3),l=n(c),d=a(1),u=n(d),m=a(2),p=n(m),f=a(4),g=n(f),h=a(5),v=a(6),_=a(7),y=n(_),E=a(73);a(356);var b=function(e){function t(e){var a;(0,r.default)(this,t);var n=(0,u.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state=(a={originGoodsList:[],cartType:-1,deliveryMethod:-1,editing:!1,goodsCount:0,goodsCountToPay:0,priceToPay:0,goodsList:[],unableData:[],isFromBack:!1,selectAll:!1,notBussinessTimeGoodId:[],showDeleteWindow:!1},(0,i.default)(a,"goodsList",[]),(0,i.default)(a,"currentSelectGoodsType",""),(0,i.default)(a,"showFastGoods",!0),(0,i.default)(a,"showAddress",!1),(0,i.default)(a,"storeStyle",{}),a),n.franchiseeId="",n.isFromUserCenterEle="",n.goodsShoppingCartRef=g.default.createRef(),n.dataInitial=function(){n.getShoppingCartData("first"),n.getAppECStoreConfig(),n.isShowAddress(),n.handleCurrentPage()},n.getAppECStoreConfig=function(){h.appMethod.getAppECStoreConfig(function(e){n.setData({cartConfig:e.cart_config,storeStyle:e.color_config,tabExpress:e.express,tabIntraCity:e.intra_city,tabDelivery:e.is_self_delivery,tabDining:!n.franchiseeId&&e.dining})},n.franchiseeId)},n.getShoppingCartData=function(e){var t=n,a=n.franchiseeId;n.data.isFromUserCenterEle;h.appMethod.sendRequest({url:"/index.php?r=AppShop/cartList",data:{page:1,page_size:1e3,sub_shop_app_id:a,parent_shop_app_id:a?h.appMethod.getAppId():""},success:function(a){var n=a.data||[],o={},i=0,s=[];n.map(function(e){switch(e.goods_type){case"0":o.hasGoods=!0;break;case"2":o.hasWaimai=!0;break;case"3":o.hasTostore=!0}}),o.hasGoods?(i=0,"first"==e&&t.getCurrentLocation()):o.hasWaimai?i=2:o.hasTostore&&(i=3),n.map(function(e){e.goods_type==i&&s.push(e)}),t.setData({cartType:i,originGoodsList:n,goodsList:s,hasGoodsTypeObj:o,takeoutInfo:a.take_out_info,goodsCount:n.length,unableData:a.unable_data}),t.clickSelectAll(),t.getTostoreNotBusinessTime(),t.recalculateCountPrice()}})},n.switchToEdit=function(){n.setData({editing:!0})},n.editComplete=function(){n.setData({editing:!1})},n.clickSelectGoods=function(e){var t=e.currentTarget.dataset.index,a=n.data.goodsList,o=!0,i=!0;a[t].selected=!a[t].selected,a.map(function(e){e.selected?i=!1:o=!1}),n.setData({goodsList:a,selectAll:o}),n.recalculateCountPrice()},n.clickSelectAll=function(){var e=n.data.selectAll,t=n.data.goodsList;t.map(function(t){t.selected=!e}),n.setData({selectAll:!e,goodsList:t}),n.recalculateCountPrice()},n.recalculateCountPrice=function(){var e=n.data.goodsList,t=0,a=0;e.map(function(e){e.selected&&(t+=+e.num,a+=+e.price*+e.num)}),n.setData({goodsCountToPay:t,priceToPay:a.toFixed(2)})},n.getTostoreNotBusinessTime=function(e,t){var a=n;h.appMethod.sendRequest({url:"/index.php?r=AppShop/precheckShoppingCart",method:"post",data:{sub_shop_app_id:a.franchiseeId,cart_arr:e||"",parent_shop_app_id:a.franchiseeId?h.appMethod.getAppId():""},success:function(e){t&&t()},successStatusAbnormal:function(e){if(1==e.status){var t=e.expired_goods_arr||[],n=a.data.goodsList;if(t&&t.length){for(var o=0;o<t.length;o++)for(var i=t[o].goods_id,s=n.length-1;s>=0;s--)i==n[s].goods_id&&(n[s].selected=!1);a.setData({selectAll:!1,goodsList:n,notBussinessTimeGoodId:t}),a.recalculateCountPrice()}}}})},n.goToPay=function(e){var t=[],a=n.franchiseeId,o=[],i=n,s=n.data.goodsList,r=n.data.cartType;if(s.map(function(e){e.selected&&(o.push(e.id),t.push({cart_id:e.id,goods_id:e.goods_id,model_id:e.model_id,model:e.model,num:e.num,goods_type:e.goods_type,is_seckill:e.is_seckill,seckill_start_state:e.seckill_start_state?e.seckill_start_state:""}))}),!o.length)return void h.appMethod.showModal({content:"请选择结算的商品"});i.getTostoreNotBusinessTime(t,function(){if(0==r){var e=i.data.tabExpress,t=i.data.tabDelivery,n=i.data.tabIntraCity,s=i.data.selectSameJourneyId;if(1==o.length||1==e&&1!=t&&1!=n||1!=e&&1==t&&1!=n||1!=e&&1!=t&&1==n){var c="/eCommerce/pages/previewGoodsOrder/previewGoodsOrder?cart_arr="+encodeURIComponent(o);return a&&(c+="&franchisee="+a),s&&(c+="&addressId="+s),void h.appMethod.turnToPage(c)}return void i.showSettlement()}if(1==r){var l="/eCommerce/pages/previewAppointmentOrder/previewAppointmentOrder?cart_arr="+encodeURIComponent(o);a&&(l+="&franchisee="+a),h.appMethod.turnToPage(l)}else if(3==r){var l="/orderMeal/pages/previewOrderDetail/previewOrderDetail?cart_arr="+encodeURIComponent(o);a&&(l+="&franchisee="+a),h.appMethod.turnToPage(l)}else if(2==r){if(+i.data.takeoutInfo.min_deliver_price>+i.data.priceToPay)return void h.appMethod.showModal({content:"没有达到起送价("+i.data.takeoutInfo.min_deliver_price+"元)"});var l="/orderMeal/pages/previewTakeoutOrder/previewTakeoutOrder?cart_arr="+encodeURIComponent(o);a&&(l+="&franchisee="+a),h.appMethod.turnToPage(l)}})},n.clickMinusButton=function(e){var t=e.currentTarget.dataset.index;e.currentTarget.dataset.type;n.changeGoodsNum(t,"minus")},n.clickPlusButton=function(e){var t=e.currentTarget.dataset.index;e.currentTarget.dataset.type;n.changeGoodsNum(t,"plus")},n.inputGoodsCount=function(e){var t=(e.currentTarget.dataset.type,e.detail.value),a=e.target.dataset.index;if(""!=t)return 0==t?void h.appMethod.showModal({content:"请输入大于0的数字"}):void n.changeGoodsNum(a,"number",t)},n.changeGoodsNum=function(e,t,a){var o=n.data.goodsList,i=o[e],s=+i.num,r=void 0,c=n,l=void 0;if("plus"==t)r=s+1;else if("minus"==t){if((r=s-1)<=0)return n.setData({singelDeleteId:i.id}),void n.showDeleteWindow("singel")}else r=a;if(+r>+i.stock)return void h.appMethod.showModal({content:"库存不足"});l=i.form_data&&i.form_data.seckill_activity_id?{goods_id:i.goods_id,model_id:i.model_id||"",num:r,sub_shop_app_id:n.franchiseeId,is_seckill:1,form_data:{seckill_activity_id:i.form_data.seckill_activity_id,seckill_activity_time_id:i.form_data.seckill_activity_time_id}}:{goods_id:i.goods_id,model_id:i.model_id||"",num:r,sub_shop_app_id:n.franchiseeId,is_seckill:1==i.is_seckill?1:"",message_notice_type:1},h.appMethod.sendRequest({url:"/index.php?r=AppShop/addCart",data:l,success:function(e){i.num=r,c.setData({goodsList:o}),c.recalculateCountPrice()},successStatusAbnormal:function(e){h.appMethod.showModal({content:e.data})}})},n.goToHomepage=function(){var e=h.appMethod.getHomepageRouter();h.appMethod.turnToPage("/pages/"+e+"/"+e,!0)},n.showDeleteWindow=function(e){n.setData({deleteType:e,showDeleteWindow:!0})},n.cancelDelete=function(){n.setData({showDeleteWindow:!1})},n.sureDeleteGoods=function(e){var t=n,a=n.data.goodsList,o=e.currentTarget.dataset.type,i=[];if("singel"==o?i.push(n.data.singelDeleteId):a.map(function(e){e.selected&&i.push(e.id)}),0==i.length)return t.setData({showDeleteWindow:!1,selectAll:!1,currentSelectGoodsType:""}),void h.appMethod.showModal({content:"没有选择商品"});n.deleteGoods(i)},n.deleteGoods=function(e){var t=n,a=n.data.isFromUserCenterEle;h.appMethod.sendRequest({url:"/index.php?r=AppShop/deleteCart",method:"post",data:{cart_id_arr:e,sub_shop_app_id:a?"":t.franchiseeId},success:function(e){t.setData({showDeleteWindow:!1,selectAll:!1,currentSelectGoodsType:""}),t.getShoppingCartData()}})},n.deleteUnableGoods=function(e){var t=e.currentTarget.dataset.index,a=n.data.unableData[t].id;n.setData({singelDeleteId:a}),n.showDeleteWindow("singel")},n.changeCartType=function(e){var t=e.currentTarget.dataset,a=t.type,o=t.isFranchisee,i=n.data,s=i.originGoodsList,r=i.deliveryMethod,c=i.cartType,l=n.franchiseeId||h.appMethod.getAppId(),d=[],u={};if(a!=c){if(s.map(function(e){e.selected=!1,e.goods_type==a&&e.app_id==l&&d.push(e)}),-1!=r&&0==a){var m=[];d.map(function(e){e.pick_up_type.indexOf(r)>=0&&m.push(e)}),d=m}if(u.cartType=a,u.selectAll=!1,u.goodsList=d,o){var p=n.data.shopsList;p.forEach(function(e){e.selected=!1,e.cartList.forEach(function(e){return e.selected=!1})}),u.shopsList=p}n.setData(u),n.recalculateCountPrice()}},n.goCommodityDetail=function(e){var t=n.franchiseeId?"&franchisee="+n.franchiseeId:"";h.appMethod.turnToPage("/pages/goodsDetail/goodsDetail?detail="+e.currentTarget.dataset.id+t)},n.stopPropagation=function(){},n.filterDeliveryMethod=function(e){var t=n.data.originGoodsList,a=[],o=e.currentTarget.dataset.type;if(t.map(function(e){0==e.goods_type&&a.push(e)}),a){if(-1!=o){var i=[];a.map(function(e){e.pick_up_type.indexOf(o)>=0&&i.push(e)}),a=i}n.setData({goodsList:a,deliveryMethod:o}),n.recalculateCountPrice()}},n.getCurrentLocation=function(){var e=n;h.appMethod.getLocation({success:function(t){var a=t.latitude,n=t.longitude;h.appMethod.sendRequest({url:"/index.php?r=Map/getAreaInfoByLatAndLng",method:"post",data:{latitude:a,longitude:n},success:function(t){e.setData({currentLocationData:t.data})}})},fail:function(e){}})},n.selectGoodsSameJourney=function(){var e=n.data.selectSameJourney;n.closeSettlement(),h.appMethod.turnToPage("/eCommerce/pages/goodsSameJourney/goodsSameJourney?sameJourneyId="+(e?e.id:"")+"&franchiseeId="+n.franchiseeId)},n.showSettlement=function(){var e=n,t=n.data.goodsList,a=[],o={goodsIds:[],totalPrice:0},i={goodsIds:[],totalPrice:0},s={goodsIds:[],totalPrice:0},r=n.data.currentLocationData,c=n.data.selectSameJourney,l=c?c.latitude:r.location.lat,d=c?c.longitude:r.location.lng,u=c?c.address_info.district.id:r.region_id;if(t.map(function(e){e.selected&&(e.pick_up_type.indexOf("1")>=0&&(o.goodsIds.push(e.id),o.totalPrice+=+e.price),e.pick_up_type.indexOf("2")>=0&&(i.goodsIds.push(e.id),i.totalPrice+=+e.price),e.pick_up_type.indexOf("3")>=0&&(s.goodsIds.push(e.id),s.totalPrice+=+e.price),a.push(+e.id))}),!a.length)return void h.appMethod.showModal({content:"请选择商品"});h.appMethod.sendRequest({url:"/index.php?r=AppEcommerce/getCanUsePickUpTypeAtCart",method:"post",data:{latitude:l,longitude:d,region_id:u,cart_id_arr:a,sub_shop_app_id:e.franchiseeId},success:function(t){var a=t.data,n=void 0;if(!a.hasOwnProperty(1)||a.hasOwnProperty(2)||a.hasOwnProperty(3)||a.hasOwnProperty(4)||(n=a[1].cart_list),a.hasOwnProperty(1)||!a.hasOwnProperty(2)||a.hasOwnProperty(3)||a.hasOwnProperty(4)||(n=a[2].cart_list),a.hasOwnProperty(1)||a.hasOwnProperty(2)||!a.hasOwnProperty(3)||a.hasOwnProperty(4)||(n=a[3].cart_list),a.hasOwnProperty(1)||a.hasOwnProperty(2)||a.hasOwnProperty(3)||!a.hasOwnProperty(4)||(n=a[4].cart_list),n){var o=e.franchiseeId,i=this.data.selectSameJourneyId,s="/eCommerce/pages/previewGoodsOrder/previewGoodsOrder?cart_arr="+encodeURIComponent(n);return o&&(s+="&franchisee="+o),i&&(s+="&addressId="+i),void h.appMethod.turnToPage(s)}e.setData({canUsePickUpType:a,intraCityData:a[2]&&a[2].intra_city_data||"",diningData:a[4]&&a[4].dining_data||"",showSettlementMask:!0})}})},n.closeSettlement=function(){n.setData({showSettlementMask:!1})},n.goodsPay=function(e){var t=n.franchiseeId,a=[],o=e.currentTarget.dataset.type,i=e.currentTarget.dataset.cartId,s=n.data.selectSameJourneyId;a=i;var r="/eCommerce/pages/previewGoodsOrder/previewGoodsOrder?type="+o+"&cart_arr="+encodeURIComponent(a);t&&(r+="&franchisee="+t),s&&(r+="&addressId="+s),n.closeSettlement(),h.appMethod.turnToPage(r)},n.scanShopping=function(){return void h.appMethod.showToast({title:"暂不支持扫码购功能"})},n.afterSelectedGoods=function(){n.setData({selectAll:!1}),n.getShoppingCartData()},n.scanMove=function(e){var t=e.changedTouches[0].clientY,a=window.innerWidth,o=window.innerHeight-208/750*a;t=t<0?0:t>o?o:t,n.setData({widowTop:t})},n.addFavoriteGoods=function(e){var t=n.data.goodsList,a=[],o=n;if(t.map(function(e){e.selected&&a.push(+e.goods_id)}),!a.length)return void h.appMethod.showModal({content:"未选中商品"});h.appMethod.sendRequest({url:"/index.php?r=AppShop/addFavoriteGoods",method:"post",data:{form_id:e.detail.formId,goods_ids:a,sub_shop_app_id:o.franchiseeId},success:function(e){h.appMethod.showModal({content:"成功加入收藏夹"})}})},n.showFastGoods=function(){var e=n;n.setData({showFastGoods:!e.data.showFastGoods})},n.selectGoodsDetail=function(e){var t={goodsId:e.currentTarget.dataset.goodsId,franchisee:n.franchiseeId};n.goodsShoppingCartRef.current.show({afterSelectedGoods:n.afterSelectedGoods}),n.goodsShoppingCartRef.current.showDialog(t)},n.isShowAddress=function(){var e=n;h.appMethod.sendRequest({url:"/index.php?r=AppEcommerce/getSwitchBySwitchName",method:"post",data:{switch_name:"intra_city_address_position"},success:function(t){t.status||e.setData({showAddress:1==t.data})}})},document.title="购物车",h.appMethod.getCurrentPage().callbackData&&(n.currentPage=h.appMethod.getCurrentPage()),n}return(0,p.default)(t,e),(0,l.default)(t,[{key:"handleCurrentPage",value:function(){this.currentPage&&this.currentPage.callbackData&&(this.setData(this.currentPage.callbackData),this.currentPage.clearCallbackData())}},{key:"componentWillMount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,v.getCurrentPageQueryParams)();this.franchiseeId=e.franchisee||"",this.mode=e.fmode||"",this.isFromUserCenterEle=e.from||"",this.goodsScanCode=e.goodsScanCode;var t=!1,a=h.appMethod.globalData,n=a.goodsStoreConfig,o=a.hasFranchiseeList,i=a.hasFranchiseeChain;n.cart_config&&1==n.cart_config.is_merge_shoppingcart&&(o||i)&&(t=!0),this.setData({franchiseeId:this.franchiseeId,isFranchisee:t}),this.dataInitial()}},{key:"componentDidMount",value:function(){this.isFromBack?(this.dataInitial(),this.setData({selectAll:!1,deliveryMethod:-1})):this.isFromBack=!0,this.goodsScanCode&&this.scanShopping()}},{key:"render",value:function(){var e=this,t=this.state,a=(t.showGetUserInfo,t.originGoodsList),n=t.storeStyle,o=t.cartType,i=t.hasGoodsTypeObj,s=t.editing,r=t.selectSameJourney,c=t.currentLocationData,l=t.showAddress,d=t.deliveryMethod,u=t.tabExpress,m=t.tabDelivery,p=t.tabIntraCity,f=t.tabDining,_=t.diningData,y=t.goodsList,b=(t.item,t.unableData),N=t.cartConfig,R=t.showFastGoods,k=t.selectAll,w=t.goodsCountToPay,x=t.priceToPay,C=t.franchiseeId,D=t.widowTop,S=t.deleteType,I=t.showDeleteWindow,M=t.canUsePickUpType,T=t.intraCityData,P=t.showSettlementMask;return g.default.createElement(g.default.Fragment,null,g.default.createElement("div",{className:"official-page shopping-cart"},g.default.createElement("div",{style:(0,v.convertLineStyleData)(a.length?"padding-bottom: 100rpx":"")},!!a.length&&g.default.createElement(g.default.Fragment,null,g.default.createElement("div",{className:"cart-header"},g.default.createElement("div",{className:"cart-type-box",style:(0,v.convertLineStyleData)("color:"+n.theme+";border-color:"+n.theme)},i.hasGoods&&g.default.createElement("span",{style:(0,v.convertLineStyleData)("border-color:"+n.theme+(0==o?";background:"+n.theme:"")),className:0==o?"selected":"",onClick:this.changeCartType,"data-type":"0"},"基础"),i.hasTostore&&g.default.createElement("span",{style:(0,v.convertLineStyleData)("border-color:"+n.theme+(3==o?";background:"+n.theme:"")),className:3==o?"selected":"",onClick:this.changeCartType,"data-type":"3"},"到店"),i.hasWaimai&&g.default.createElement("span",{style:(0,v.convertLineStyleData)(2==o?"background:"+n.theme:""),className:2==o?"selected":"",onClick:this.changeCartType,"data-type":"2"},"外卖")),s&&g.default.createElement("div",{style:(0,v.convertLineStyleData)("color:"+(n.theme||"#ff7100")),className:"pull-right ico-moon icon-success-tip shopping-cart-editor border-left",onClick:this.editComplete}),!s&&g.default.createElement("div",{className:"pull-right ico-moon icon-shopping-cart-set shopping-cart-editor border-left",onClick:this.switchToEdit})),0==o&&g.default.createElement(g.default.Fragment,null,l&&g.default.createElement("div",{className:"goods-location-box",onClick:this.selectGoodsSameJourney},g.default.createElement("span",{className:"ico-moon icon-goods-location"}),g.default.createElement("span",{className:"address-box"},r?r.address_info.province.text+r.address_info.city.text+r.address_info.district.text+r.detail_address:c&&c.formatted_addresses&&c.formatted_addresses.recommend||"暂无地址,请点击选择地址"),g.default.createElement("span",{className:"trangel"})),g.default.createElement("div",{className:"goods-delivery-method"},g.default.createElement("span",{onClick:this.filterDeliveryMethod,style:(0,v.convertLineStyleData)(-1==d?"color:"+n.theme:""),"data-type":"-1",className:-1==d?"selected":""},"全部",g.default.createElement("span",{className:"bottom-line",style:(0,v.convertLineStyleData)("background:"+n.theme)})),1==u&&g.default.createElement("span",{onClick:this.filterDeliveryMethod,style:(0,v.convertLineStyleData)(1==d?"color:"+n.theme:""),"data-type":"1",className:1==d?"selected":""},"快递",g.default.createElement("span",{className:"bottom-line",style:(0,v.convertLineStyleData)("background:"+n.theme)})),1==m&&g.default.createElement("span",{onClick:this.filterDeliveryMethod,style:(0,v.convertLineStyleData)(3==d?"color:"+n.theme:""),"data-type":"3",className:3==d?"selected":""},"自提",g.default.createElement("span",{className:"bottom-line",style:(0,v.convertLineStyleData)("background:"+n.theme)})),1==p&&g.default.createElement("span",{onClick:this.filterDeliveryMethod,style:(0,v.convertLineStyleData)(2==d?"color:"+n.theme:""),"data-type":"2",className:2==d?"selected":""},"同城",g.default.createElement("span",{className:"bottom-line",style:(0,v.convertLineStyleData)("background:"+n.theme)})),1==f&&g.default.createElement("span",{onClick:this.filterDeliveryMethod,style:(0,v.convertLineStyleData)(4==d?"color:"+n.theme:""),"data-type":"4",className:4==d?"selected":""},"点餐",g.default.createElement("span",{className:"bottom-line",style:(0,v.convertLineStyleData)("background:"+n.theme)}))))),0===a.length&&g.default.createElement("div",{className:"shoppingCart-null"},g.default.createElement("img",{src:"http://cdn.jisuapp.cn/static/webapp/images/xcx-goods/shopping-cart-null.png"}),g.default.createElement("div",{className:"shoppingCart-null-label"},"购物车空空哒"),g.default.createElement("div",{className:"go-home-page",style:(0,v.convertLineStyleData)("background:"+n.theme),onClick:this.goToHomepage},"去逛逛")),g.default.createElement("div",{className:"shoppingCart-wrap page",id:"shoppingCart"},g.default.createElement("div",{className:"shoppingCart-goods-list"},y.map(function(t,a){return g.default.createElement("div",{key:t.id},g.default.createElement("label",{"data-index":a,style:(0,v.convertLineStyleData)(t.selected?"color:"+n.theme:""),className:"shoppingCart-check-box "+(t.selected?"checked ico-moon icon-success-tip":""),"data-type":t.type,onClick:e.clickSelectGoods}),g.default.createElement("div",{className:"shoppingCart-goods-content"},g.default.createElement("div",{className:"shoppingCart-goods-cover"},g.default.createElement("img",{src:t.cover})),g.default.createElement("div",{className:"goods-content-box"},g.default.createElement("div",{className:"shoppingCart-goods-title"},1==t.is_group_buy&&g.default.createElement("span",{className:"is-seckill"},"拼团"),1==t.is_seckill&&g.default.createElement("span",{className:"is-seckill"},"秒杀"),t.title),t.model_value_str&&g.default.createElement("div",{className:"ellipsis shoppingCart-goods-model"},t.model_value_str),g.default.createElement("div",{className:"shoppingCart-price-box"},("2"!=t.integral||0!=t.price&&"0.00"!=t.price)&&g.default.createElement("span",{className:"real-price",style:(0,v.convertLineStyleData)("color:"+n.theme)},"¥"+t.price),"2"==t.integral&&(0!=t.price||"0.00"!=t.price)&&g.default.createElement("span",{className:"real-price",style:(0,v.convertLineStyleData)("color:"+n.theme)},"+"),"2"==t.integral&&g.default.createElement("span",{className:"real-price",style:(0,v.convertLineStyleData)("color:"+n.theme)},t.max_can_use_integral+"积分"),g.default.createElement("div",{className:"goods-number-box pull-right",onClick:e.stopPropagation},g.default.createElement("div",{className:"goods-num-mius",onClick:e.clickMinusButton,"data-type":t.type,"data-index":a},"-"),g.default.createElement("input",{type:"number",className:"goods-num-box",value:t.num,"data-type":t.type,"data-index":a,onChange:e.inputGoodsCount}),g.default.createElement("div",{className:"goods-num-plus",style:(0,v.convertLineStyleData)("color:"+n.theme),"data-type":t.type,onClick:e.clickPlusButton,"data-index":a},"+")),1==t.cart_vip_goods&&g.default.createElement("span",{className:"vip-logo"},"会员价")))))})),!!b.length&&g.default.createElement("div",{className:"shoppingCart-goods-list unable-goods-list"},g.default.createElement("div",{className:"fast-goods-header"},"失效商品"),b.map(function(t,a){return g.default.createElement("div",{key:t.id},g.default.createElement("div",{className:"shoppingCart-goods-content"},g.default.createElement("div",{className:"shoppingCart-goods-cover"},g.default.createElement("img",{src:t.cover})),g.default.createElement("div",{className:"goods-content-box"},g.default.createElement("div",{className:"shoppingCart-goods-title"},1==t.is_seckill&&g.default.createElement("span",{className:"is-seckill"},"秒杀"),t.title),t.model_value_str&&g.default.createElement("div",{className:"ellipsis shoppingCart-goods-model"},t.model_value_str),g.default.createElement("div",{className:"shoppingCart-price-box"},g.default.createElement("span",null,"已失效，去看看其它商品吧"),g.default.createElement("span",{className:"ico-moon icon-shopping-cart-delete pull-right",onClick:e.deleteUnableGoods,"data-index":a})))))}))),N&&N.convenient_shopping&&N.convenient_shopping.goods&&0==o&&g.default.createElement("div",{className:"fast-goods"},g.default.createElement("div",{className:"fast-goods-header",onClick:this.showFastGoods},N.convenient_shopping.name,g.default.createElement("span",{className:"pull-right ico-moon icon-rightarrow "+(R?"show":"")})),R&&g.default.createElement(g.default.Fragment,null,N.convenient_shopping.goods.map(function(t,a){return g.default.createElement("div",{key:t.id},g.default.createElement("div",{className:"shoppingCart-goods-content"},g.default.createElement("div",{className:"shoppingCart-goods-cover"},g.default.createElement("img",{src:t.cover})),g.default.createElement("div",{className:"goods-content-box"},g.default.createElement("div",{className:"shoppingCart-goods-title"},1==t.is_seckill&&g.default.createElement("span",{className:"is-seckill"},"秒杀"),t.title),t.model_value_str&&g.default.createElement("div",{className:"ellipsis shoppingCart-goods-model"},t.model_value_str),g.default.createElement("div",{className:"shoppingCart-price-box"},g.default.createElement("span",{className:"real-price",style:(0,v.convertLineStyleData)("color:"+n.theme)},"¥"+t.price),1==t.is_seckill&&g.default.createElement("span",{className:"seckill-price"},"¥"+t.original_price),g.default.createElement("div",{onClick:e.selectGoodsDetail,"data-goods-id":t.id,className:"pull-right addShoppingcart ico-moon icon-addshoppingcart3"})))))})))),!!a.length&&g.default.createElement("div",{className:"shoppingCart-bottom-nav",style:{bottom:h.appMethod.isTabBarPage()?"48px":""}},g.default.createElement("label",{style:(0,v.convertLineStyleData)(k?"color:"+n.theme:""),className:"shoppingCart-check-box "+(k?"checked ico-moon icon-success-tip":""),onClick:this.clickSelectAll}),g.default.createElement("span",{className:"select-all",style:(0,v.convertLineStyleData)(k?"color:"+n.theme:"")},"全选"),s?g.default.createElement(g.default.Fragment,null,g.default.createElement("span",{className:"pull-right mutiple-delete-btn",onClick:this.showDeleteWindow},"删除"),0==o&&!C&&g.default.createElement("button",{type:"button",onClick:this.addFavoriteGoods,className:"pull-right add-to-favorites"},"移入收藏夹")):g.default.createElement(g.default.Fragment,null,g.default.createElement("button",{onClick:this.goToPay,type:"button","data-type":d,style:(0,v.convertLineStyleData)("background:"+n.theme),className:"pull-right shoppingCart-goto-pay"},"结算("+w+")"),g.default.createElement("div",{className:"pull-right total-price-box"},g.default.createElement("div",{className:"shoppingCart-all-price",style:(0,v.convertLineStyleData)("color:"+n.theme)},"¥"+x),g.default.createElement("div",{className:"no-contain-freight"},"不含运费")))),N&&1==N.shopping_by_scanning_code&&g.default.createElement("div",{className:"scan-it",onClick:this.scanShopping,onTouchMove:this.scanMove,style:(0,v.convertLineStyleData)("box-shadow: 0 0 6rpx"+n.theme+";background:"+n.theme+";top:"+D+"px;")},g.default.createElement("span",{className:"ico-moon icon-shopping-scan"}),g.default.createElement("div",{className:"scan-it-word"},"扫码购")),I&&g.default.createElement("div",{className:"delete-tip-window"},g.default.createElement("div",{className:"delete-box"},g.default.createElement("div",{className:"delete-tip"},"确定要删除所选商品吗？"),g.default.createElement("div",{className:"delete-btn-box"},g.default.createElement("span",{onClick:this.cancelDelete},"取消"),"singel"==S?g.default.createElement("span",{style:(0,v.convertLineStyleData)("color:"+n.theme),"data-type":"singel",className:"sure-delete",onClick:this.sureDeleteGoods},"确定"):g.default.createElement("span",{className:"sure-delete",style:(0,v.convertLineStyleData)("color:"+n.theme),"data-type":"mutiple",onClick:this.sureDeleteGoods},"确定")))),P&&g.default.createElement("div",{className:"settlement-mask",onTouchMove:this.stopPropagation},g.default.createElement("div",{className:"settlement-box"},g.default.createElement("div",{className:"settlement-title"},"请选择取货方式"),!(!M[1]||!M[1].cart_list.length)&&g.default.createElement("div",{className:"settlement-type"},g.default.createElement("div",{className:"settlement-type-content"},g.default.createElement("div",null,g.default.createElement("span",{className:"settlement-type-title",style:(0,v.convertLineStyleData)("color:"+n.theme)},g.default.createElement("span",{className:"ico-moon icon-goods-express-model"}),"快递配送"),g.default.createElement("span",{className:"settlement-type-express"},"配送费"+(M[1]&&M[1].express_data&&M[1].express_data.express_fee||0)+"元")),g.default.createElement("div",{className:"settlement-type-count"},"共"+M[1].goods_num+"件，合计：¥"+M[1].goods_price)),g.default.createElement("div",{className:"settlement-btn-box"},g.default.createElement("div",{"data-type":"1","data-cart-id":M[1].cart_list,className:"settlement-btn",style:(0,v.convertLineStyleData)("color:"+n.theme+";border-color:"+n.theme),onClick:this.goodsPay},"选择"))),!(!M[3]||!M[3].cart_list.length)&&g.default.createElement("div",{className:"settlement-type"},g.default.createElement("div",{className:"settlement-type-content"},g.default.createElement("div",null,g.default.createElement("span",{className:"settlement-type-title",style:(0,v.convertLineStyleData)("color:"+n.theme)},g.default.createElement("span",{className:"ico-moon icon-goods-delivery-model"}),"上门自提")),g.default.createElement("div",{className:"settlement-type-count"},"共"+M[3].goods_num+"件，合计：¥"+M[3].goods_price)),g.default.createElement("div",{className:"settlement-btn-box"},g.default.createElement("div",{"data-type":"3","data-cart-id":M[3].cart_list,className:"settlement-btn",style:(0,v.convertLineStyleData)("color:"+n.theme+";border-color:"+n.theme),onClick:this.goodsPay},"选择"))),!(!M[2]||!M[2].cart_list.length)&&g.default.createElement("div",{className:"settlement-type"},g.default.createElement("div",{className:"settlement-type-content "+(1!=T.is_enough_price||1!=T.in_distance||1!=T.in_business_time?"no-achieve-intra-box":"")},g.default.createElement("div",null,g.default.createElement("span",{className:"settlement-type-title",style:(0,v.convertLineStyleData)("color:"+n.theme)},g.default.createElement("span",{className:"ico-moon icon-goods-city-model"}),"同城配送"),g.default.createElement("span",{className:"settlement-type-express"},"配送费"+T.express_fee+"元")),g.default.createElement("div",{className:"settlement-type-count"},"共"+M[2].goods_num+"件，合计：￥"+M[2].goods_price),1!=T.in_business_time?g.default.createElement("div",{className:"no-achieve-intra",style:(0,v.convertLineStyleData)("color:"+n.theme)},"店铺已打烊"):1!=T.is_enough_price?g.default.createElement("div",{className:"no-achieve-intra",style:(0,v.convertLineStyleData)("color:"+n.theme)},"未达到起送价 还差"+T.min_deliver_price_balance+"元"):1!=T.in_distance&&g.default.createElement("div",{className:"no-achieve-intra",style:(0,v.convertLineStyleData)("color:"+n.theme)},"不在配送范围")),g.default.createElement("div",{className:"settlement-btn-box"},g.default.createElement("div",{"data-type":"2","data-cart-id":M[3].cart_list,className:"settlement-btn "+(1!=T.is_enough_price||1!=T.in_distance||1!=T.in_business_time?"no-achieve-intra-btn":""),style:{color:n.theme,borderColor:n.theme},onClick:1!=T.is_enough_price||1!=T.in_distance||1!=T.in_business_time?null:this.goodsPay},"选择"),1==T.in_business_time&&1==T.is_enough_price&&1!=T.in_distance&&g.default.createElement("div",{className:"settlement-btn",style:(0,v.convertLineStyleData)("margin-left: 20rpx;color:"+n.theme+";border-color:"+n.theme),onClick:this.selectGoodsSameJourney},"修改地址"))),!(!M[4]||!M[4].cart_list.length)&&g.default.createElement("div",{className:"settlement-type"},g.default.createElement("div",{className:"settlement-type-content "+(1!=_.in_business_time?"no-achieve-intra-box":"")},g.default.createElement("div",null,g.default.createElement("span",{className:"settlement-type-title",style:(0,v.convertLineStyleData)("color:"+n.theme)},g.default.createElement("span",{className:"ico-moon icon-goods-store-model"}),"堂食点餐"),1!=_.in_business_time&&g.default.createElement("span",{className:"store-snoring"},"商家已打烊")),g.default.createElement("div",{className:"settlement-type-count"},"共"+M[4].goods_num+"件，合计：¥"+M[4].goods_price)),g.default.createElement("div",{className:"settlement-btn-box"},g.default.createElement("div",{"data-type":"4","data-cart-id":M[4].cart_list,className:"settlement-btn "+(1!=_.in_business_time?"no-achieve-intra-btn":""),style:(0,v.convertLineStyleData)("color:"+n.theme+";border-color:"+n.theme),onClick:1!=_.in_business_time?null:this.goodsPay},"选择")))),g.default.createElement("div",{className:"close-settlement-mask",onClick:this.closeSettlement},"关闭"))),g.default.createElement(E.GoodsShoppingCart,{ref:this.goodsShoppingCartRef}))}}]),t}(y.default);t.default=b},function(e,t){},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(84),i=n(o),s=a(17),r=n(s),c=a(13),l=n(c),d=a(9),u=n(d),m=a(0),p=n(m),f=a(3),g=n(f),h=a(1),v=n(h),_=a(2),y=n(_);a(92),a(16);var E=a(5),b=a(12),N=n(b),R=a(6),k=a(11),w=a(7),x=n(w);a(358);var C=N.default.formatTime,D=["周日","周一","周二","周三","周四","周五","周六"],S=function(e){function t(e){var a;(0,p.default)(this,t);var n=(0,v.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state=(a={existGoodsIndex:0,existGoodsType:[],currentGoodsType:"",orderLists:[],pages:1,hiddenmodalput:!0,untimes:"",numberOfStampsUrl:"",addLabelText:"",transportStatus:{0:"待创建",1:"待骑手接单",2:"骑手已接单",3:"骑手配送中",4:"骑手配送已完成",5:"已取消",7:"已过期",8:"指派单",9:"妥投异常之物品返回中",10:"妥投异常之物品返回完成",11:"骑手已到店",12:"申请取消配送",1e3:"订单异常"},noMore:!1,currentTabIndex:0,goodsTypeList:[],isFromBack:!1,marker:[{latitude:0,longitude:0,iconPath:"/images/transport.png",width:75,height:75}],toStoreSetting:"",showWriteOffCodeBox:!1,goodsOrderStatusName:["待付款","待发货","待收货","待评价","退款审核中","正在退款中","已完成","已关闭","待接单","","","","","","","退款失败"],showGoodsPickBox:!1,selectGoodsPickIndex:""},(0,u.default)(a,"selectGoodsPickIndex",0),(0,u.default)(a,"dayList",["今天","明天","后天"]),a),n.goodsType=[{type:0,name:"基础"},{type:1,name:"预约"},{type:2,name:"外卖"},{type:3,name:"到店"},{type:5,name:"当面付"},{type:6,name:"排号"},{type:8,name:"购卡"},{type:9,name:"兑换券"},{type:10,name:"行业预约"},{type:21,name:"社区团购"}],n.types={0:[void 0,0,1,2,3,[8,16],6,7,17],1:[void 0,0,1,2,3],2:[void 0,0,6,7],3:[void 0,0,1,2,3,"refund_status",7],5:[void 0,0,6,7],6:[void 0,2,6,7],10:[void 0,0,1,2,3],9:[void 0,0,1,7],8:[void 0,0,1,7],21:[void 0,0,1,2,10,3]},n.verifiTimeInterval="",n.dataInitial=function(){var e=n;n.getTakeOutInfo(),n.getAppECStoreConfig(),n.getOrderList({tabIndex:e.data.currentTabIndex,firstLoad:!0})},n.getOrderList=function(e){var t,a=n,o={page:a.data.pages,page_size:25},i=n.data.currentGoodsType;""!==n.data.currentGoodsType?(o.screening_cond={},t=n.types[i][e.tabIndex],void 0!=t&&(o.screening_cond.status=t),0==i&&(o.screening_cond.is_distribution_order="",o.screening_cond.pick_up_type=0==n.data.selectGoodsPickIndex?"":n.data.selectGoodsPickIndex),o.screening_cond.order_id=n.data.searchOrderId||"",21==i&&(i=0,o.screening_cond.is_distribution_order=2),o.goods_type=i,10==o.goods_type&&null==t&&(o.idx_arr={idx_value:""})):o.screening_cond={is_distribution_order:""},o.parent_shop_app_id=E.appMethod.getAppId(),o.not_get_takeout=1,e.firstLoad&&""==n.data.currentGoodsType&&(o.use_default_goods_type=1),E.appMethod.sendRequest({url:"/index.php?r=AppShop/orderList",method:"post",data:o,success:function(t){for(var n={},o=t.data,i=o.length-1;i>=0;i--){var s=o[i].form_data;if(s.appointment_order_info&&"6"==s.appointment_order_info.appointment_unit_type?s.timeDiff=Date.parse(new Date)-Date.parse(new Date(s.appointment_time.split("~")[1]))>0:s.timeDiff=!1,s.tostore_data&&s.tostore_data.appointed_time&&(s.tostore_data.appointed_time=s.tostore_data.appointed_time.substr(11,5)),2!=s.goods_type||2!=s.status||0==s.take_out_info.deliver_type||""==s.take_out_info.deliver_type||2!=s.take_out_transport_order.status&&3!=s.take_out_transport_order.status&&11!=s.take_out_transport_order.status||a.getTransportInfo(s.order_id,i),8==s.goods_type&&s.goods_info.num&&(s.goods_info.cNum=a.NumberToChinese(s.goods_info.num)),2==s.goods_type){for(var r=0,c=0;c<s.goods_info.length;c++)r+=+s.goods_info[c].num;n.goodsNum=r}var d={};if(10==s.goods_type)if(s.service.is_hotel_appointment){var u=s.service,m=u.hotel_appointment[0],p=u.now_date,f=new Date(1e3*m.start_time),g=new Date(1e3*m.end_time);d.title=s.goods_info[0].goods_name,d.cover=s.goods_info[0].cover,d.standard=m.elem_type,d.count=m.long,d.start_date=f.getMonth()+1+"月"+f.getDate()+"日",d.end_date=g.getMonth()+1+"月"+g.getDate()+"日",d.start_day=a.data.dayList[Math.floor((m.start_time-p)/86400)]||D[f.getDay()],d.end_day=a.data.dayList[Math.floor((m.end_time-p)/86400)]||D[g.getDay()],d.phone=u.new_appointment_user_phone,d.endDate=C(g).slice(0,10),s.newAppointmentData=d}else{d={serveInfo:[],toStoreTime:"",toStoreTimeEnd:"",duration:"",providerList:[],providerTitle:"",form:2};for(var h=s.service.new_appointment,v=h.doc_info,_=h.elem_info,y=h.worker_info,E=0;E<v.length;E++)d.serveInfo.push({label:v[E].name,value:_[E].name});for(var b=0;b<y.length;b++)d.providerList.push({name:y[b].name});d.toStoreTime=C(new Date(1e3*+s.service.new_appointment_info.spu[0].interval[0].new_appointment_start_date)).slice(0,16),d.toStoreTimeEnd=C(new Date(1e3*+s.service.new_appointment_info.spu[0].interval[0].new_appointment_end_date)).slice(11,16),d.duration=+s.service.new_appointment_info.spu[0].new_appointment_work_sec/60,d.goods_price=s.service.goods_price,d.endDate=d.toStoreTime.slice(0,10),d.providerTitle=h.manage_alias,s.newAppointmentData=d}o[i]=s}e.scrollLoad&&(o=a.data.orderLists.concat(o)),n.orderLists=o,n.pages=a.data.pages+1,n.noMore=0==t.is_more,"object"===(0,l.default)(t.current_goods_type)?n.currentGoodsType=9:n.currentGoodsType=t.current_goods_type,n.goodsTypeList=t.goods_type_list,n.goodsTypeList.indexOf(n.currentGoodsType.toString())<0&&n.goodsTypeList.unshift(n.currentGoodsType),a._isAddCommunityOrder(function(e){0!=e.data&&n.goodsTypeList.push("21"),21==a.data.currentGoodsType&&(n.currentGoodsType=21),a.data.existGoodsType.length||(n.existGoodsType=[],n.goodsTypeList.map(function(e){a.goodsType.map(function(t){e==t.type&&n.existGoodsType.push(t)})}),n.existGoodsIndex=n.goodsTypeList.indexOf(n.currentGoodsType)),a.setData(n)}),e.firstLoad&&n.goodsTypeList.indexOf("6")>=0&&a.getTostoreSetting()}})},n.addLabelInput=function(e){n.setData({addLabelText:e.detail.value})},n.goToUseStamps=function(e){var t=e.currentTarget.dataset.couponid,a=E.appMethod.globalData.appId,o="",i=e.currentTarget.dataset.untimes;o="&franchisee="+a;var s="/exchangeCoupon/pages/numberOfStampsUsed/numberOfStampsUsed?detail="+t+o;n.setData({numberOfStampsUrl:s,hiddenmodalput:!1,untimes:i})},n.confirm=function(e){if(13===e.keyCode){if(+n.data.untimes<+n.data.addLabelText)return E.appMethod.showModal({content:"核销次数超过剩余次数"}),void n.setData({hiddenmodalput:!0,addLabelText:""});var t=n.data.numberOfStampsUrl+"&Number="+n.data.addLabelText;n.setData({hiddenmodalput:!0,addLabelText:""}),E.appMethod.turnToPage(t,!1)}},n.cancel=function(){n.setData({hiddenmodalput:!0,addLabelText:""})},n.getTransportInfo=function(e,t){var a=n,o={};E.appMethod.sendRequest({url:"/index.php?r=AppTransport/queryTransporterInfo",data:{order_id:e},success:function(e){o["orderLists["+t+"].transport"]=e.data,o["marker[0].latitude"]=e.data.transporterLat,o["marker[0].longitude"]=e.data.transporterLng,a.setData(o)}})},n.mapDetail=function(e){var t=e.currentTarget.dataset,a=[{latitude:t.lat,longitude:t.lng,iconPath:"/images/transport.png",width:75,height:75}];E.appMethod.turnToPage("/default/pages/mapDetail/mapDetail?eventParams="+JSON.stringify(a))},n.clickOrderTab=function(e){var t=e.target.dataset,a=t.index,o={};o.currentTabIndex=a,o.pages=1,o.orderLists=[],o.noMore=!1,n.setData(o),n.getOrderList({tabIndex:a})},n.clickMeanTab=function(e){var t=e[0],a={};a.currentTabIndex=0,a.existGoodsIndex=t,a.pages=1,a.orderLists=[],a.noMore=!1,a.currentGoodsType=n.data.existGoodsType[t].type,n.setData(a),n.hideGoodsPick(),n.getOrderList({tabIndex:0})},n.clickSubmenuTab=function(e){var t=e.target.dataset.index,a={};a.currentTabIndex=t,a.pages=1,a.orderLists=[],a.noMore=!1,n.setData(a),n.getOrderList({tabIndex:t})},n.goToOrderDetail=function(e){var t,a=e.currentTarget.dataset,n=a.id,o=a.type,i=a.franchisee,s=i===E.appMethod.getAppId()?"":"&franchisee="+i;t="transfer"===o?"/eCommerce/pages/transferOrderDetail/transferOrderDetail?detail=":"tostore"===o?"/orderMeal/pages/tostoreOrderDetail/tostoreOrderDetail?detail=":"toDining"===o?"/eCommerce/pages/diningOrderDetail/diningOrderDetail?detail=":"eBusiness"===o?"/eCommerce/pages/goodsOrderDetail/goodsOrderDetail?detail=":"takeout"===o?"/orderMeal/pages/takeoutOrderDetail/takeoutOrderDetail?detail=":"rowNumber"===o?"/orderMeal/pages/rowNumberOrderDetail/rowNumberOrderDetail?detail=":"newAppoint"===o?"/newAppointment/pages/newAppointmentOrderDetail/newAppointmentOrderDetail?detail=":"ExchangeCoupon"===o?"/exchangeCoupon/pages/numberOfStampsOrderDetail/numberOfStampsOrderDetail?detail=":"hotel"===o?"/newAppointment/pages/newAppointmentOrderDetail/newAppointmentOrderDetail?aptType=2&detail=":"communityGroup"===o?"/promotion/pages/communityGroupOrderDetail/communityGroupOrderDetail?detail=":"/eCommerce/pages/appointmentOrderDetail/appointmentOrderDetail?detail=",E.appMethod.turnToPage(t+n+s)},n.cancelOrder=function(e){var t=e.target.dataset.id,a=e.target.dataset.franchisee,o=E.appMethod.getAppId(),i=a==E.appMethod.getAppId()?"":a,s=n;E.appMethod.showModal({content:"你将要取消一笔付款订单，确认取消？",showCancel:!0,cancelText:"取消",confirmText:"确定",confirm:function(){E.appMethod.sendRequest({url:"/index.php?r=AppShop/cancelOrder",data:{order_id:t,app_id:o,sub_shop_app_id:i},success:function(e){var t=s.data.currentTabIndex,a={};a.pages=1,s.setData(a),s.getOrderList({tabIndex:t})}})},cancel:function(){}})},n.orderDelete=function(e){var t=e.target.dataset.id,a=e.target.dataset.franchisee,o=E.appMethod.getAppId(),i=a==E.appMethod.getAppId()?"":a,s=n;E.appMethod.showModal({content:"确定删除此订单吗？删除后不可再恢复哦",showCancel:!0,cancelText:"取消",confirmText:"确定",confirmColor:"#FF7100",confirm:function(){E.appMethod.sendRequest({url:"/index.php?r=AppShop/HideOrder",data:{order_id:t,app_id:o,sub_shop_app_id:i},success:function(e){var t=s.data.currentTabIndex,a={};a.pages=1,s.setData(a),s.getOrderList({tabIndex:t})}})}})},n.applyDrawback=function(e){var t=e.target.dataset.id,a=e.target.dataset.franchisee,o=a==E.appMethod.getAppId()?"":a,i=n,s=e.target.dataset.delivery;E.appMethod.showModal({content:1==s?"确定要取消订单？":"确定要申请退款？",showCancel:!0,cancelText:"取消",confirmText:"确定",confirm:function(){E.appMethod.sendRequest({url:"/index.php?r=AppShop/applyRefund",data:{order_id:t,sub_shop_app_id:o},success:function(e){var t=i.data.currentTabIndex,a={};a.pages=1,i.setData(a),i.getOrderList({tabIndex:t})}})}})},n.cancelRefund=function(e){var t=e.target.dataset.id,a=e.target.dataset.franchisee,o=E.appMethod.getAppId(),i=(E.appMethod.getAppId(),n);e.target.dataset.delivery;E.appMethod.showModal({content:"是否撤销取消订单申请？",showCancel:!0,cancelText:"取消",confirmText:"确定",confirm:function(){E.appMethod.sendRequest({url:"/index.php?r=AppShop/cancelRefund",data:{app_id:o,order_id:t},success:function(e){var t=i.data.currentTabIndex,a={};a.pages=1,i.setData(a),i.getOrderList({tabIndex:t})}})}})},n.toCancelOrder=function(e){var t=e.target.dataset.id,a=e.target.dataset.deliver,n=e.currentTarget.dataset,o=n.franchisee;E.appMethod.turnToPage("/orderMeal/pages/cancelOrder/cancelOrder?orderId="+t+"&deliverType="+a+"&franchisee="+o)},n.checkLogistics=function(e){var t=n.data.orderLists,a=e.target.dataset.index,o=t[a].order_id,i=t[a].ecommerce_info.dispatch_use_pick_up_type,s=e.target.dataset.franchisee;if(2==i){var r=t[a].ecommerce_info.intra_city_data,c=r&&r.deliver_type||"",l=r&&r.intra_city_appointment_arrive_time||"";E.appMethod.turnToPage("/eCommerce/pages/sameJourneyLogistic/sameJourneyLogistic?orderId="+o+"&type="+c+"&arriveTime="+l+"&franchiseeId="+s)}else E.appMethod.turnToPage("/eCommerce/pages/logisticsPage/logisticsPage?detail="+o+"&franchiseeId="+s)},n.sureReceipt=function(e){var t=e.target.dataset.id,a=e.target.dataset.franchisee,o=a==E.appMethod.getAppId()?"":a,i=n,s="1"==n.data.currentGoodsType?"确认已消费?":"确认收货代表您已经拿到货物，确认后将无法撤销！建议与商家联系后再操作";E.appMethod.showModal({content:s,showCancel:!0,cancelText:"取消",confirmText:"确定",confirm:function(){E.appMethod.sendRequest({url:"/index.php?r=AppShop/comfirmOrder",data:{order_id:t,sub_shop_app_id:o},success:function(e){var a=i.data.currentTabIndex,n={},s=Date.now();n.pages=1,i.setData(n),0==i.data.currentGoodsType?E.appMethod.turnToPage("/eCommerce/pages/transactionSuccess/transactionSuccess?pageFrom=transation&orderId="+t+"&franchiseeId="+o):i.getOrderList({tabIndex:a}),E.appMethod.sendRequest({hideLoading:!0,url:"/index.php?r=appShop/getIntegralLog",data:{add_time:s},success:function(e){0==e.status&&e.data&&i.setData({rewardPointObj:{showModal:!0,count:e.data,callback:""}})}})}})}})},n.makeComment=function(e){var t=e.target.dataset.id,a=e.target.dataset.franchisee,n=a===E.appMethod.getAppId()?"":"&franchisee="+a;E.appMethod.turnToPage("/eCommerce/pages/makeComment/makeComment?detail="+t+n)},n.takeoutMakeComment=function(e){var t=e.target.dataset.id,a=e.target.dataset.franchisee,n=a===E.appMethod.getAppId()?"":"&franchisee="+a;E.appMethod.turnToPage("/orderMeal/pages/takeoutMakeComment/takeoutMakeComment?detail="+t+n)},n.scrollToListBottom=function(){var e=n.data.currentTabIndex;n.data.noMore||n.getOrderList({tabIndex:e,scrollLoad:!0})},n.getTostoreSetting=function(){var e=n;E.appMethod.sendRequest({url:"/index.php?r=AppTostore/getTostoreLineUpSetting",success:function(t){0==t.status&&e.setData({toStoreSetting:t.data})}})},n.getWriteOffCodeBox=function(e){var t=n,a=e.target.dataset.id,o=e.target.dataset.franchisee;E.appMethod.sendRequest({url:"/index.php?r=AppShop/GetOrderVerifyCode",data:{sub_shop_app_id:o,order_id:a},success:t.setVerificationCodeData})},n.setVerificationCodeData=function(e){var t=n;t.setData({codeImgUrl:e.data.qrcode_url,codeNum:e.data.code,codeStatus:e.data.status,showWriteOffCodeBox:!0}),t.connectSocket()},n.connectSocket=function(){var e=n;E.appMethod.connectSocket({url:"wss://ceshi.zhichiwangluo.com",header:{"content-type":"application/json"},method:"GET"}),E.appMethod.onSocketOpen(function(t){var a={action:"mark_client",user_token:E.appMethod.globalData.userInfo.user_token,scenario_name:"app_order_verify",session_key:E.appMethod.globalData.sessionKey};E.appMethod.sendSocketMessage({data:JSON.stringify(a)}),e.verifiTimeInterval=setInterval(function(){var e={action:"heartbeat",user_token:E.appMethod.globalData.userInfo.user_token,scenario_name:"app_order_verify",session_key:E.appMethod.globalData.sessionKey};E.appMethod.sendSocketMessage({data:JSON.stringify(e)})},3e4)}),E.appMethod.onSocketMessage(function(t){var a=JSON.parse(t.data);if("push_to_client"==a.action){var n=JSON.parse(a.msg);"app_order_verify"==n.type&&0==n.status&&(e.setData({codeStatus:1}),clearInterval(e.verifiTimeInterval),E.appMethod.closeSocket())}})},n.hideWriteOffCodeBox=function(){var e=n;n.setData({showWriteOffCodeBox:!1}),clearInterval(e.verifiTimeInterval),E.appMethod.closeSocket()},n.onemore=function(){},n.toPayOrder=function(){},n.payOrder=function(e){var t,a=n,o=e.target.dataset.price,i=e.target.dataset.franchisee;if(t=e.target.dataset.id,0==o)return void E.appMethod.sendRequest({url:"/index.php?r=AppShop/paygoods",data:{order_id:t,total_price:0},success:function(e){setTimeout(function(){E.appMethod.showToast({title:"支付成功",icon:"success"})}),setTimeout(function(){var e=a.data.currentTabIndex,t={};t.pages=1,a.setData(t),a.getOrderList({tabIndex:e})},1e3)}});E.appMethod.goPay({orderId:t,franchisee:i==E.appMethod.getAppId()?"":i})},n.getTakeOutInfo=function(){var e=n;E.appMethod.sendRequest({url:"/index.php?r=AppShop/getTakeOutInfo",success:function(t){e.setData({takeoutInfo:t.data||""})}})},n.SectionToChinese=function(e){for(var t="",a="",n=0,o=!0,i=["零","一","二","三","四","五","六","七","八","九"],s=["","十","百","千"];e>0;){var r=e%10;0===r?o||(o=!0,a=i[r]+a):(o=!1,t=i[r],t+=s[n],a=t+a),n++,e=Math.floor(e/10)}return a},n.NumberToChinese=function(e){var t=0,a="",o="",i=!1,s=["","万","亿","万亿","亿亿"],r=["零","一","二","三","四","五","六","七","八","九"];if(0===e)return r[0];for(;e>0;){var c=e%1e4;i&&(o=r[0]+o),a=n.SectionToChinese(c),a+=0!==c?s[t]:s[0],o=a+o,i=c<1e3&&c>0,e=Math.floor(e/1e4),t++}return o},n.receiveDrawback=function(e){var t=e.target.dataset.id,a=e.target.dataset.franchisee,o=(E.appMethod.getAppId(),a==E.appMethod.getAppId()?"":a),i=n;E.appMethod.showModal({content:"确定已收到退款？",showCancel:!0,confirmText:"确定",cancelText:"取消",confirm:function(){E.appMethod.sendRequest({url:"/index.php?r=AppShop/comfirmRefund",data:{order_id:t,sub_shop_app_id:o},success:function(e){var t=i.data.currentTabIndex,a={};a.pages=1,i.setData(a),i.getOrderList({tabIndex:t})}})}})},n.SectionToChinese=function(e){for(var t="",a="",n=0,o=!0,i=["零","一","二","三","四","五","六","七","八","九"],s=["","十","百","千"];e>0;){var r=e%10;0===r?o||(o=!0,a=i[r]+a):(o=!1,t=i[r],t+=s[n],a=t+a),n++,e=Math.floor(e/10)}return a},n.NumberToChinese=function(e){var t=0,a="",o="",i=!1,s=["","万","亿","万亿","亿亿"],r=["零","一","二","三","四","五","六","七","八","九"];if(0===e)return r[0];for(;e>0;){var c=e%1e4;i&&(o=r[0]+o),a=n.SectionToChinese(c),a+=0!==c?s[t]:s[0],o=a+o,i=c<1e3&&c>0,e=Math.floor(e/1e4),t++}return o},n.toSeeQrcode=function(e){var t=e.target.dataset.id,a=e.target.dataset.franchisee,n=e.target.dataset.enddate,o="/newAppointment/pages/newAppointmentQrcode/newAppointmentQrcode?orderId="+t+"&franchiseeId="+a+"&codeEndDate="+n;E.appMethod.turnToPage(o)},n.getAppECStoreConfig=function(){E.appMethod.getAppECStoreConfig(function(e){n.setData({storeStyle:e.color_config,hasRecommendConfig:!!e.recommend_config})})},n._isAddCommunityOrder=function(e){E.appMethod.sendRequest({url:"/index.php?r=AppDistributionExt/CountDistributionOrderByBuyerId",hideLoading:!0,success:function(t){e&&e(t)}})},n.showGoodsPick=function(){var e=n;n.setData({showGoodsPickBox:!e.data.showGoodsPickBox})},n.selectGoodsPick=function(e){n.setData({selectGoodsPickIndex:e.currentTarget.dataset.type,pages:1,showGoodsPickBox:!1}),n.getOrderList({tabIndex:n.data.currentTabIndex,firstLoad:!0})},n.searchOrderId=function(e){13===e.keyCode&&(n.setData({searchOrderId:e.target.value,pages:1}),n.getOrderList({tabIndex:n.data.currentTabIndex,firstLoad:!0}))},n.stopPropagation=function(){},n.hideGoodsPick=function(){n.setData({showGoodsPickBox:!1})},n.inputOrderId=function(e){n.setData({searchOrderId:e.currentTarget.value})},document.title="订单列表",n}return(0,y.default)(t,e),(0,g.default)(t,[{key:"componentWillMount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,R.getCurrentPageQueryParams)();e.goodsType&&e.currentIndex&&this.setData({currentGoodsType:e.goodsType,currentTabIndex:e.currentIndex}),this.setData({franchiseeIdInfo:{id:e.franchisee||""}}),this.dataInitial()}},{key:"componentDidMount",value:function(){this.data.isFromBack?(this.setData({pages:1,currentTabIndex:this.data.currentTabIndex,noMore:!1}),this.getOrderList({tabIndex:this.data.currentTabIndex})):this.setData({isFromBack:!0})}},{key:"privateStopNoop",value:function(e){e.stopPropagation()}},{key:"render",value:function(){var e=this,t=this.state,a=(t.rewardPointObj,t.shareGiftsObj,t.collectGiftsObj,t.collectGetObj,t.showGetUserInfo,t.franchiseeIdInfo,t.existGoodsIndex),n=t.existGoodsType,o=t.selectGoodsPickIndex,s=t.currentTabIndex,c=t.currentGoodsType,l=t.orderLists,d=t.goodsOrderStatusName,u=t.noMore,m=t.takeoutInfo,p=t.transportStatus,f=t.marker,g=t.goodsNum,h=t.toStoreSetting,v=t.codeImgUrl,_=t.codeStatus,y=t.codeNum,E=t.showWriteOffCodeBox,b=t.showGoodsPickBox,N=t.hiddenmodalput,w=t.addLabelText,x=t.labelFocus,C=[];return n.length&&n.forEach(function(e,t){C.push({label:e.name,value:t})}),React.createElement("div",{className:"official-page my-order"},React.createElement("div",{className:"app"},React.createElement("div",{className:"myOrder-wrap page",id:"myOrder"},React.createElement("div",{className:"order-list-header"},React.createElement(r.default,{cols:1,data:C,value:[a],onChange:this.clickMeanTab},React.createElement("div",{className:"picker-inner"},React.createElement("span",{className:"exits-name"},!!C.length&&C[a]&&C[a].label),React.createElement("span",{className:"ico-moon icon-downarrow"}))),React.createElement("div",{className:"order-list-search"},React.createElement("span",{className:"ico-moon icon-search"}),React.createElement("input",{onChange:this.inputOrderId,type:"text",onKeyDown:this.searchOrderId,placeholder:"请输入订单号"}))),React.createElement("div",{className:"myOrder-tab-list"},0==c&&React.createElement(React.Fragment,null,4!=o?React.createElement("div",{className:"tab-list-submenu goods-list-submenu",onClick:this.clickSubmenuTab},React.createElement("div",{className:0==s?"active":"","data-index":"0"},React.createElement("span",{className:"bottom-line"}),"全部"),React.createElement("div",{className:1==s?"active":"","data-index":"1"},React.createElement("span",{className:"bottom-line"}),"待付款"),React.createElement("div",{className:5==s?"active":"","data-index":"5"},React.createElement("span",{className:"bottom-line"}),"待接单"),React.createElement("div",{className:2==s?"active":"","data-index":"2"},React.createElement("span",{className:"bottom-line"}),"待发货"),React.createElement("div",{className:3==s?"active":"","data-index":"3"},React.createElement("span",{className:"bottom-line"}),"待收货"),React.createElement("div",{className:4==s?"active":"","data-index":"4"},React.createElement("span",{className:"bottom-line"}),"待评价"),React.createElement("div",{className:6==s?"active":"","data-index":"6"},React.createElement("span",{className:"bottom-line"}),"已完成"),React.createElement("div",{className:7==s?"active":"","data-index":"7"},React.createElement("span",{className:"bottom-line"}),"已关闭"),React.createElement("div",{onClick:this.showGoodsPick,className:"filter-goods-pick"},"0"==o?"取货":"1"==o?"快递":"2"==o?"同城":"3"==o?"自提":"堂食",React.createElement("span",{className:"trangel"}))):4==o&&React.createElement("div",{className:"tab-list-submenu goods-list-submenu",onClick:this.clickSubmenuTab},React.createElement("div",{className:0==s?"active":"","data-index":"0"},React.createElement("span",{className:"bottom-line"}),"全部"),React.createElement("div",{className:5==s?"active":"","data-index":"5"},React.createElement("span",{className:"bottom-line"}),"待商家接单"),React.createElement("div",{className:8==s?"active":"","data-index":"8"},React.createElement("span",{className:"bottom-line"}),"已下单"),React.createElement("div",{className:1==s?"active":"","data-index":"1"},React.createElement("span",{className:"bottom-line"}),"待付款"),React.createElement("div",{className:4==s?"active":"","data-index":"4"},React.createElement("span",{className:"bottom-line"}),"待评价"),React.createElement("div",{className:6==s?"active":"","data-index":"6"},React.createElement("span",{className:"bottom-line"}),"已完成"),React.createElement("div",{className:7==s?"active":"","data-index":"7"},React.createElement("span",{className:"bottom-line"}),"已关闭"),React.createElement("div",{onClick:this.showGoodsPick,className:"filter-goods-pick"},"0"==o?"取货":"1"==o?"快递":"2"==o?"同城":"3"==o?"自提":"堂食",React.createElement("span",{className:"trangel"})))),1==c&&React.createElement("div",{className:"tab-list-submenu",onClick:this.clickSubmenuTab},React.createElement("div",{className:0==s?"active":"","data-index":"0"},React.createElement("span",{className:"bottom-line"}),"全部"),React.createElement("div",{className:1==s?"active":"","data-index":"1"},React.createElement("span",{className:"bottom-line"}),"待付款"),React.createElement("div",{className:2==s?"active":"","data-index":"2"},React.createElement("span",{className:"bottom-line"}),"待确认"),React.createElement("div",{className:3==s?"active":"","data-index":"3"},React.createElement("span",{className:"bottom-line"}),"待消费"),React.createElement("div",{className:4==s?"active":"","data-index":"4"},React.createElement("span",{className:"bottom-line"}),"待评价")),3==c&&React.createElement("div",{className:"tab-list-submenu","data-goods-type":"3",onClick:this.clickSubmenuTab},React.createElement("div",{className:0==s?"active":"","data-index":"0"},React.createElement("span",{className:"bottom-line"}),"全部"),React.createElement("div",{className:1==s?"active":"","data-index":"1"},React.createElement("span",{className:"bottom-line"}),"待付款"),React.createElement("div",{className:2==s?"active":"","data-index":"2"},React.createElement("span",{className:"bottom-line"}),"待确认"),React.createElement("div",{className:3==s?"active":"","data-index":"3"},React.createElement("span",{className:"bottom-line"}),"商家已确认"),React.createElement("div",{className:4==s?"active":"","data-index":"4"},React.createElement("span",{className:"bottom-line"}),"待评价"),React.createElement("div",{className:5==s?"active":"","data-index":"5"},React.createElement("span",{className:"bottom-line"}),"退款"),React.createElement("div",{className:6==s?"active":"","data-index":"6"},React.createElement("span",{className:"bottom-line"}),"已关闭")),5==c&&React.createElement("div",{className:"tab-list-submenu",onClick:this.clickSubmenuTab},React.createElement("div",{className:0==s?"active":"","data-index":"0"},React.createElement("span",{className:"bottom-line"}),"全部"),React.createElement("div",{className:1==s?"active":"","data-index":"1"},React.createElement("span",{className:"bottom-line"}),"待支付"),React.createElement("div",{className:2==s?"active":"","data-index":"2"},React.createElement("span",{className:"bottom-line"}),"已完成"),React.createElement("div",{className:3==s?"active":"","data-index":"3"},React.createElement("span",{className:"bottom-line"}),"已关闭")),2==c&&React.createElement("div",{className:"tab-list-submenu",onClick:this.clickSubmenuTab},React.createElement("div",{className:0==s?"active":"","data-index":"0"},React.createElement("span",{className:"bottom-line"}),"全部"),React.createElement("div",{className:1==s?"active":"","data-index":"1"},React.createElement("span",{className:"bottom-line"}),"待付款"),React.createElement("div",{className:2==s?"active":"","data-index":"2"},React.createElement("span",{className:"bottom-line"}),"已完成"),React.createElement("div",{className:3==s?"active":"","data-index":"3"},React.createElement("span",{className:"bottom-line"}),"已关闭")),6==c&&React.createElement("div",{className:"tab-list-submenu",onClick:this.clickSubmenuTab},React.createElement("div",{className:0==s?"active":"","data-index":"0"},React.createElement("span",{className:"bottom-line"}),"全部"),React.createElement("div",{className:1==s?"active":"","data-index":"1"},React.createElement("span",{className:"bottom-line"}),"待使用"),React.createElement("div",{className:2==s?"active":"","data-index":"2"},React.createElement("span",{className:"bottom-line"}),"已使用"),React.createElement("div",{className:3==s?"active":"","data-index":"3"},React.createElement("span",{className:"bottom-line"}),"已失效")),10==c&&React.createElement("div",{className:"tab-list-submenu",onClick:this.clickSubmenuTab},React.createElement("div",{className:0==s?"active":"","data-index":"0"},React.createElement("span",{className:"bottom-line"}),"全部"),React.createElement("div",{className:1==s?"active":"","data-index":"1"},React.createElement("span",{className:"bottom-line"}),"待付款"),React.createElement("div",{className:2==s?"active":"","data-index":"2"},React.createElement("span",{className:"bottom-line"}),"待确认"),React.createElement("div",{className:3==s?"active":"","data-index":"3"},React.createElement("span",{className:"bottom-line"}),"待消费"),React.createElement("div",{className:4==s?"active":"","data-index":"4"},React.createElement("span",{className:"bottom-line"}),"待评价")),8==c&&React.createElement("div",{className:"tab-list-submenu",onClick:this.clickSubmenuTab},React.createElement("div",{className:0==s?"active":"","data-index":"0"},React.createElement("span",{className:"bottom-line"}),"全部"),React.createElement("div",{className:1==s?"active":"","data-index":"1"},React.createElement("span",{className:"bottom-line"}),"待付款"),React.createElement("div",{className:2==s?"active":"","data-index":"2"},React.createElement("span",{className:"bottom-line"}),"已付款"),React.createElement("div",{className:3==s?"active":"","data-index":"3"},React.createElement("span",{className:"bottom-line"}),"已关闭")),9==c&&React.createElement("div",{className:"tab-list-submenu",onClick:this.clickSubmenuTab},React.createElement("div",{className:0==s?"active":"","data-index":"0"},React.createElement("span",{className:"bottom-line"}),"全部"),React.createElement("div",{className:1==s?"active":"","data-index":"1"},React.createElement("span",{className:"bottom-line"}),"待付款"),React.createElement("div",{className:2==s?"active":"","data-index":"2"},React.createElement("span",{className:"bottom-line"}),"已付款"),React.createElement("div",{className:3==s?"active":"","data-index":"3"},React.createElement("span",{className:"bottom-line"}),"已关闭")),21==c&&React.createElement("div",{className:"tab-list-submenu",onClick:this.clickSubmenuTab},React.createElement("div",{className:0==s?"active":"","data-index":"0"},React.createElement("span",{className:"bottom-line"}),"全部"),React.createElement("div",{className:1==s?"active":"","data-index":"1"},React.createElement("span",{className:"bottom-line"}),"待付款"),React.createElement("div",{className:2==s?"active":"","data-index":"2"},React.createElement("span",{className:"bottom-line"}),"待发货"),React.createElement("div",{className:3==s?"active":"","data-index":"3"},React.createElement("span",{className:"bottom-line"}),"配送中"),React.createElement("div",{className:4==s?"active":"","data-index":"4"},React.createElement("span",{className:"bottom-line"}),"待提货"),React.createElement("div",{className:5==s?"active":"","data-index":"5"},React.createElement("span",{className:"bottom-line"}),"待评价"))),React.createElement("div",{className:"myOrder-content-body"},React.createElement("div",{className:"scrollContainer",hidden:0!=c},React.createElement(k.ScrollView,{className:"myOrder-content-container","scroll-y":"true",lowerThreshold:"10",bindscrolltolower:this.scrollToListBottom},l.map(function(t,a){return React.createElement("div",{key:t.order_id||a,className:"myOrder-list-wrap",onClick:e.goToOrderDetail,"data-franchisee":t.app_id,"data-id":t.order_id,"data-type":4==t.pick_up_type?"toDining":"eBusiness",style:(0,R.convertLineStyleData)(t.ecommerce_info&&4==t.ecommerce_info.dispatch_use_pick_up_type?"padding: 0 24rpx;":"padding:0;")},t.ecommerce_info&&4!=t.ecommerce_info.dispatch_use_pick_up_type?React.createElement(React.Fragment,null,React.createElement("div",{className:"goods-order-header"},React.createElement("div",{style:(0,R.convertLineStyleData)("padding-bottom:2rpx;")},1==t.is_pay_on_delivery&&React.createElement("span",{className:"cash-delivery"},"货到付款"),1==t.pick_up_type?React.createElement("span",{className:"goods-order-time"},t.add_time):2==t.pick_up_type?React.createElement("span",{className:"goods-order-time"},"编号 : "+t.ecommerce_info.intra_city_data.serial_number):3==t.pick_up_type&&React.createElement("span",{className:"goods-order-time"},"流水号 : "+(t.ecommerce_info.ec_tostore_data.formatted_queue_num||"")),React.createElement("span",{className:"pull-right myOrder-order-status"},1==t.is_pay_on_delivery&&4==t.status?"审核中":3==t.pick_up_type&&1==t.status?"待接单":d[t.status]))),t.sub_shop_info&&t.sub_shop_info.name&&React.createElement("div",{className:"myOrder-franchisee-name"},t.sub_shop_info.name),t.goods_info.map(function(e,t){return React.createElement("div",{className:"goods-order-content",key:e.id||t},!!+e.use_integral&&React.createElement("div",{className:"myOrder-goods-tips"},React.createElement("div",{className:"myOrder-goods-tips-top"},"积"),React.createElement("div",{className:"myOrder-goods-tips-left"}),React.createElement("div",{className:"myOrder-goods-tips-right"})),React.createElement("img",{className:"cover",src:e.cover}),React.createElement("div",{className:"goods-order-detail"},React.createElement("div",{className:"title"},!!+e.is_benefit_goods&&React.createElement("span",{className:"goods-gift"},"赠品"),!!+e.is_vip_goods&&React.createElement("span",{className:"goods-gift"},"会员价"),e.goods_name),React.createElement("div",{className:"pull-right count"},"×"+e.num),0==e.use_integral?React.createElement(React.Fragment,null,React.createElement("span",{className:"myOrder-goods-price"},"¥"+e.price)):React.createElement(React.Fragment,null,("0.00"!=e.price||!e.use_integral||0==e.use_integral)&&React.createElement("span",{className:"myOrder-goods-price"},"¥"+e.price),e.use_integral&&0!=e.use_integral&&"0.00"!=e.price&&React.createElement("span",null,"+"),e.use_integral&&React.createElement("span",null,e.use_integral+"积分"))))}),1==t.goods_info[0].is_presell?React.createElement("div",{className:"presell-order-bottom"},React.createElement("span",{style:(0,R.convertLineStyleData)("margin-right:20rpx;")},"定金已支付：¥ "+t.total_bargain),React.createElement("span",null,"尾款已支付：¥ "+t.total_final_payment)):React.createElement("div",{className:"goods-order-bottom"},React.createElement("span",{className:"myOrder-list-count"},"共"+t.goods_num+"件商品"),"1"!=t.is_integral&&React.createElement("span",null,"合计：",React.createElement("span",{className:"total-price"},"¥"+t.original_price)),"1"==t.is_integral&&React.createElement("span",null,"合计：",(0!=t.original_price&&"0.00"!=t.original_price||!t.total_integral||0==t.total_integral)&&React.createElement("span",{className:"myOrder-pay-price"},"¥"+t.original_price),t.total_integral&&0!=t.total_integral&&0!=t.original_price&&"0.00"!=t.original_price&&React.createElement("span",{className:"myOrder-pay-price"},"+"),t.total_integral&&React.createElement("span",{className:"myOrder-pay-price"},t.total_integral+"积分"))),0==t.status?React.createElement("div",{className:"goods-btn-box"},React.createElement("span",{className:"btn myOrder-cancel-order",onClick:e.cancelOrder,"data-franchisee":t.app_id,"data-id":t.order_id},"取消订单"),React.createElement("span",{className:"btn btn-orange myOrder-pay-directly",onClick:e.goToOrderDetail,"data-franchisee":t.app_id,"data-id":t.order_id,"data-type":"eBusiness"},"支付")):1==t.status?React.createElement("div",{className:"goods-btn-box"},1==t.is_pay_on_delivery&&React.createElement("span",{className:"btn myOrder-cancel-order","data-delivery":t.is_pay_on_delivery,onClick:e.applyDrawback,"data-franchisee":t.app_id,"data-id":t.order_id},"取消订单")):2==t.status?React.createElement("div",{className:"goods-btn-box"},1==t.is_pay_on_delivery&&React.createElement("span",{className:"btn myOrder-cancel-order","data-delivery":t.is_pay_on_delivery,onClick:e.applyDrawback,"data-franchisee":t.app_id,"data-id":t.order_id},"取消订单"),3!=t.pick_up_type&&React.createElement("span",{className:"btn myOrder-check-logistics",onClick:e.checkLogistics,"data-index":a,"data-franchisee":t.app_id},"配送信息"),React.createElement("span",{className:"btn btn-orange myOrder-sure-receipt",onClick:e.sureReceipt,"data-franchisee":t.app_id,"data-id":t.order_id},"确认收货")):3==t.status&&React.createElement("div",{className:"goods-btn-box"},React.createElement("span",{className:"btn btn-orange myOrder-make-comment",onClick:e.makeComment,"data-franchisee":t.app_id,"data-id":t.order_id},"去评价"))):t.ecommerce_info&&4==t.ecommerce_info.dispatch_use_pick_up_type&&React.createElement(React.Fragment,null,React.createElement("div",{className:"dialog-block-item myOrder-tostore-top"},React.createElement("span",{className:"dialog-block-time"},"下单时间: "+t.add_time),React.createElement("span",{className:"pull-right tostore-see-detail"},"查看详情")),t.sub_shop_info&&t.sub_shop_info.name&&React.createElement("div",{className:"myOrder-franchisee-name"},t.sub_shop_info.name),React.createElement("div",{className:"myOrder-goods-list"},t.goods_info.map(function(e,t){return React.createElement("div",{className:"goods-order-content",style:(0,R.convertLineStyleData)("display:flex;"),key:e.id||t},!!+e.use_integral&&React.createElement("div",{className:"myOrder-goods-tips"},React.createElement("div",{className:"myOrder-goods-tips-top"},"积"),React.createElement("div",{className:"myOrder-goods-tips-left"}),React.createElement("div",{className:"myOrder-goods-tips-right"})),React.createElement("img",{className:"cover",src:e.cover}),React.createElement("div",{className:"goods-order-detail"},React.createElement("div",{className:"title"},!!+e.is_benefit_goods&&React.createElement("span",{className:"goods-gift"},"赠品"),!!+e.is_vip_goods&&React.createElement("span",{className:"goods-gift"},"会员价"),e.goods_name),React.createElement("div",{className:"pull-right count"},"×"+e.num),0==e.use_integral?React.createElement(React.Fragment,null,React.createElement("span",{className:"myOrder-goods-price"},"¥"+e.price)):React.createElement(React.Fragment,null,("0.00"!=e.price||!e.use_integral||0==e.use_integral)&&React.createElement("span",{className:"myOrder-goods-price"},"¥"+e.price),e.use_integral&&0!=e.use_integral&&"0.00"!=e.price&&React.createElement("span",null,"+"),e.use_integral&&React.createElement("span",null,e.use_integral+"积分"))))})),React.createElement("div",{className:"myOrder-list-bottom"},React.createElement("div",null,t.tostore_data.formatted_queue_num&&React.createElement("label",{className:"pull-left"},"取餐号：",React.createElement("span",null,t.tostore_data.formatted_queue_num)),React.createElement("label",null,React.createElement("span",{className:"myOrder-list-count"},"共"+t.goods_num+"件"),"1"!=t.is_integral?React.createElement(React.Fragment,null,React.createElement("span",null,"¥ "+t.original_price)):React.createElement(React.Fragment,null,("0.00"!=t.original_price&&0!=t.original_price||!t.total_integral||0==t.total_integral)&&React.createElement("span",null,"¥"+t.original_price),"0.00"!=t.original_price&&0!=t.original_price&&t.total_integral&&0!=t.total_integral&&React.createElement("span",null,"+"),t.total_integral&&0!=t.total_integral&&React.createElement("span",null,t.total_integral+"积分")),0==t.status?React.createElement("span",{className:"tostore-order-status"},"待付款"):1==t.status?React.createElement("span",{className:"tostore-order-status"},"等待商家确认"):2==t.status?React.createElement("span",{className:"tostore-order-status"},"商家已确认"):3==t.status?React.createElement("span",{className:"tostore-order-status"},"待评价"):4==t.status?React.createElement("span",{className:"tostore-order-status"},"退款审核中"):5==t.status?React.createElement("span",{className:"tostore-order-status"},"正在退款中"):6==t.status?React.createElement("span",{className:"tostore-order-status"},"已完成"):7==t.status?React.createElement("span",{className:"tostore-order-status"},"已关闭"):8==t.status?React.createElement("span",{className:"tostore-order-status"},"待接单"):16==t.status?React.createElement("span",{className:"tostore-order-status"},"待接单"):17==t.status&&React.createElement("span",{className:"tostore-order-status"},"已下单"))))))}),React.createElement("div",{hidden:!u,className:"noMoreNewDataTip"},"已经没有新数据了"))),React.createElement("div",{className:"scrollContainer",hidden:1!=c},React.createElement(k.ScrollView,{className:"myOrder-appointment myOrder-content-container","scroll-y":"true",lowerThreshold:"10",bindscrolltolower:this.scrollToListBottom},l.map(function(t,a){return React.createElement("div",{className:"myOrder-list-wrap",key:t.order_id||a},React.createElement("div",{className:"dialog-block-item"},React.createElement("span",{className:"dialog-block-time"},t.add_time),0==t.status?React.createElement("span",{className:"pull-right myOrder-order-status"},"待付款"):1==t.status?React.createElement("span",{className:"pull-right myOrder-order-status"},"等待商家确认"):2==t.status?React.createElement("span",{className:"pull-right myOrder-order-status"},"待消费"):3==t.status?React.createElement("span",{className:"pull-right myOrder-order-status"},"待评价"):4==t.status?React.createElement("span",{className:"pull-right myOrder-order-status"},"退款审核中"):5==t.status?React.createElement("span",{className:"pull-right myOrder-order-status"},"正在退款中"):6==t.status?React.createElement("span",{className:"pull-right myOrder-order-status"},"已消费"):7==t.status&&React.createElement("span",{className:"pull-right myOrder-order-status"},"已关闭")),t.sub_shop_info&&t.sub_shop_info.name&&React.createElement("div",{className:"myOrder-franchisee-name"},t.sub_shop_info.name),React.createElement("div",{className:"myOrder-goods-list",onClick:e.goToOrderDetail,"data-franchisee":t.app_id,"data-id":t.order_id},Array.isArray(t.goods_info)&&t.goods_info.map(function(e,t){return React.createElement("div",{key:e.id||t},React.createElement("div",{className:"dialog-block-item"},e.use_integral&&React.createElement("div",{className:"myOrder-goods-tips"},React.createElement("div",{className:"myOrder-goods-tips-top"},"积"),React.createElement("div",{className:"myOrder-goods-tips-left"}),React.createElement("div",{className:"myOrder-goods-tips-right"})),React.createElement("img",{className:"myOrder-goods-cover",src:e.cover}),React.createElement("div",{className:"myOrder-goods-title"},!!+e.is_vip_goods&&React.createElement("span",{className:"goods-gift"},"会员价"),e.goods_name),React.createElement("div",{className:"myOrder-goods-right"},React.createElement("div",null,0==e.use_integral?React.createElement(React.Fragment,null,React.createElement("span",{className:"myOrder-goods-price"},"¥"+e.price)):React.createElement(React.Fragment,null,("0.00"!=e.price||!e.use_integral||0==e.use_integral)&&React.createElement("span",{className:"myOrder-goods-price"},"¥"+e.price),e.use_integral&&0!=e.use_integral&&"0.00"!=e.price&&React.createElement("span",null,"+"),e.use_integral&&React.createElement("span",null,e.use_integral+"积分"))),React.createElement("div",null,"×",React.createElement("span",{className:"myOrder-goods-count"},e.num)))))})),React.createElement("div",{className:"dialog-block-item myOrder-total-item"},"1"!=t.is_integral&&React.createElement("span",null,"合计：",React.createElement("span",{className:"myOrder-pay-price"},"¥"+t.total_price)),"1"==t.is_integral&&React.createElement("span",null,"合计：",("0.00"!=t.original_price&&0!=t.original_price||!t.total_integral||0==t.total_integral)&&React.createElement("span",{className:"myOrder-pay-price"},"¥"+t.original_price),t.total_integral&&0!=t.total_integral&&0!=t.original_price&&"0.00"!=t.original_price&&React.createElement("span",{className:"myOrder-pay-price"},"+"),t.total_integral&&React.createElement("span",{className:"myOrder-pay-price"},t.total_integral+"积分"))),0==t.status?React.createElement("div",{className:"myOrder-list-bottom"},React.createElement("span",{className:"btn myOrder-cancel-order",onClick:e.cancelOrder,"data-franchisee":t.app_id,"data-id":t.order_id},"取消订单"),React.createElement("span",{className:"btn btn-orange myOrder-pay-directly",onClick:e.goToOrderDetail,"data-franchisee":t.app_id,"data-id":t.order_id},"支付")):1==t.status?React.createElement("div",{className:"myOrder-list-bottom"},React.createElement("span",{className:"btn myOrder-verification-code",onClick:e.getWriteOffCodeBox,"data-franchisee":t.app_id,"data-id":t.order_id},"核销码"),!t.timeDiff&&React.createElement("span",{className:"btn myOrder-apply-drawback",onClick:e.applyDrawback,"data-franchisee":t.app_id,"data-id":t.order_id},"申请退款")):2==t.status?React.createElement("div",{className:"myOrder-list-bottom"},!t.timeDiff&&React.createElement("span",{className:"btn myOrder-apply-drawback",onClick:e.applyDrawback,"data-franchisee":t.app_id,"data-id":t.order_id},"申请退款"),React.createElement("span",{className:"btn btn-orange myOrder-sure-receipt",onClick:e.sureReceipt,"data-franchisee":t.app_id,"data-id":t.order_id},"确认消费")):3==t.status&&React.createElement("div",{className:"myOrder-list-bottom"},React.createElement("span",{className:"btn btn-orange myOrder-make-comment",onClick:e.makeComment,"data-franchisee":t.app_id,"data-id":t.order_id},"去评价")))}),React.createElement("div",{hidden:!u,className:"noMoreNewDataTip"},"已经没有新数据了"))),React.createElement("div",{className:"scrollContainer",hidden:2!=c},React.createElement(k.ScrollView,{className:"myOrder-takeout myOrder-content-container","scroll-y":"true",lowerThreshold:"10",bindscrolltolower:this.scrollToListBottom},l.map(function(t,a){return React.createElement("div",{className:"myOrder-list-wrap",style:(0,R.convertLineStyleData)("margin-bottom: 16rpx;"+(3==t.status||1==t.status?"padding-bottom:0rpx;":"")),onClick:e.goToOrderDetail,"data-franchisee":t.app_id,"data-id":t.order_id,"data-type":"takeout",key:t.order_id||a},React.createElement("div",{className:"myOrder-goods-list"},0==a&&React.createElement(React.Fragment,null,Array.isArray(t.goods_info)&&t.goods_info.map(function(a,n){return React.createElement("div",{key:a.id||n},React.createElement("div",{className:"dialog-block-item"},t.sub_shop_info&&t.sub_shop_info.name?React.createElement("img",{className:"myOrder-goods-cover",src:t.sub_shop_info.logo,mode:"aspectFill"}):React.createElement("img",{className:"myOrder-goods-cover",src:m&&m.cover,mode:"aspectFill"}),React.createElement("div",{className:"myOrder-takeout-Info"},React.createElement("div",{style:(0,R.convertLineStyleData)("font-size: 30rpx;font-weight: 400;height: 30rpx;")},t.sub_shop_info&&t.sub_shop_info.name||m&&m.title,0==t.status?React.createElement("span",{className:"takeout-order-status pull-right",style:(0,R.convertLineStyleData)("font-size:26rpx;font-weight: normal;")},"待付款"):8==t.status?React.createElement("span",{className:"takeout-order-status pull-right",style:(0,R.convertLineStyleData)("font-size: 26rpx;font-weight: normal;")},"待接单"):1==t.status?React.createElement("span",{className:"takeout-order-status pull-right",style:(0,R.convertLineStyleData)("font-size: 26rpx;font-weight: normal;")},"待配送"):2!=t.status||0!=t.take_out_info.deliver_type&&""!=t.take_out_info.deliver_type?2!=t.status||3!=t.take_out_info.deliver_type&&1!=t.take_out_info.deliver_type?3==t.status?React.createElement("span",{className:"takeout-order-status pull-right",style:(0,R.convertLineStyleData)("font-size: 26rpx;font-weight: normal;")},"待评价"):4==t.status?React.createElement("span",{className:"takeout-order-status pull-right",style:(0,R.convertLineStyleData)("font-size: 26rpx;font-weight: normal;")},"退款审核中"):5==t.status?React.createElement("span",{className:"takeout-order-status pull-right",style:(0,R.convertLineStyleData)("font-size: 26rpx;font-weight: normal;")},"正在退款中"):6==t.status?React.createElement("span",{className:"takeout-order-status pull-right",style:(0,R.convertLineStyleData)("font-size: 26rpx;font-weight: normal;")},"已完成"):7==t.status&&React.createElement("span",{className:"takeout-order-status pull-right",style:(0,R.convertLineStyleData)("font-size: 26rpx;font-weight: normal;")},"已关闭"):React.createElement("span",{className:"takeout-order-status pull-right",style:(0,R.convertLineStyleData)("font-size: 26rpx;font-weight: normal;")},p[t.take_out_transport_order.status]):React.createElement("span",{className:"takeout-order-status pull-right",style:(0,R.convertLineStyleData)("font-size: 26rpx;font-weight: normal;")},"配送中")),React.createElement("div",{style:(0,R.convertLineStyleData)("font-size: 22rpx;margin-top: 12rpx;margin-bottom:32rpx;color: #999;")},t.add_time)),t.transport&&t.transport.statusCode>=2&&React.createElement(Map,{onClick:e.mapDetail,"data-lat":t.transport.transporterLat,"data-lng":t.transport.transporterLng,style:(0,R.convertLineStyleData)("margin: 10rpx auto;"),longitude:t.transport.transporterLng,latitude:t.transport.transporterLat,scale:"18",markers:f,showLocation:!0}),1==a.is_presell?React.createElement("div",{className:"presell-order-bottom"},React.createElement("span",null,"定金已支付：¥ "+t.form_data.total_bargain),React.createElement("span",null,"尾款已支付：¥ "+t.form_data.total_final_payment)):React.createElement("div",{className:"takeout-goods-detail"},React.createElement("div",{className:"myOrder-takeout-title"},a.goods_name+(g>1?"等":"")+g+"件商品",React.createElement("span",{className:"pull-right",style:(0,R.convertLineStyleData)("font-weight: 500;color: #333;")},React.createElement("span",{style:(0,R.convertLineStyleData)("margin: 0 3px;font-size: 22rpx;font-weight: normal;")},"¥"),t.total_price))),0==t.status&&React.createElement("div",{style:(0,R.convertLineStyleData)("text-align: right;")},React.createElement("span",{className:"btn myOrder-apply-drawback",onClick:e.cancelOrder,"data-franchisee":t.app_id,"data-id":t.order_id,style:(0,R.convertLineStyleData)("padding:1px 10px;font-size:24rpx;border-radius: 4px;margin-right:23rpx;")},"取消订单"),React.createElement("span",{className:"btn btn-orange myOrder-make-comment",onClick:e.payOrder,"data-franchisee":t.app_id,"data-id":t.order_id,"data-price":t.total_price,style:(0,R.convertLineStyleData)("padding: 0px 10px;font-size: 24rpx;")},"去支付")),(1==t.status&&!t.take_out_info.transport_shop_id||8==t.status)&&React.createElement("div",{className:"myOrder-list-bottom"},React.createElement("span",{className:"btn myOrder-apply-drawback",onClick:e.toCancelOrder,"data-franchisee":t.app_id,"data-id":t.order_id,"data-deliver":t.take_out_info.deliver_type,style:(0,R.convertLineStyleData)("padding:1px 10px;font-size:24rpx;border-radius: 4px;")},"取消订单")),3==t.status&&React.createElement("div",{style:(0,R.convertLineStyleData)("text-align: right;")},React.createElement("span",{className:"btn myOrder-apply-drawback",onClick:e.orderDelete,"data-franchisee":t.app_id,"data-id":t.order_id,style:(0,R.convertLineStyleData)("padding:1px 10px;font-size:24rpx;border-radius: 4px;margin-right:16rpx;")},"删除订单"),React.createElement("span",{className:"btn btn-orange myOrder-make-comment",onClick:e.takeoutMakeComment,"data-franchisee":t.app_id,"data-id":t.order_id,style:(0,R.convertLineStyleData)("padding: 0px 10px;font-size: 24rpx;")},"去评价")),4==t.status&&React.createElement("div",{style:(0,R.convertLineStyleData)("text-align: right;")},React.createElement("span",{className:"btn myOrder-apply-drawback",onClick:e.cancelRefund,"data-franchisee":t.app_id,"data-id":t.order_id,style:(0,R.convertLineStyleData)("padding:1px 10px;font-size:24rpx;border-radius: 4px;")},"撤销申请")),5==t.status&&React.createElement("div",{style:(0,R.convertLineStyleData)("text-align: right;")},React.createElement("span",{className:"btn myOrder-apply-drawback",onClick:e.receiveDrawback,"data-franchisee":t.app_id,"data-id":t.order_id,style:(0,R.convertLineStyleData)("padding:1px 10px;font-size:24rpx;border-radius: 4px;")},"收到退款")),(6==t.status||7==t.status)&&React.createElement("div",{style:(0,R.convertLineStyleData)("text-align: right;")},React.createElement("span",{className:"btn myOrder-apply-drawback",onClick:e.orderDelete,"data-franchisee":t.app_id,"data-id":t.order_id,style:(0,R.convertLineStyleData)("padding:1px 10px;font-size:24rpx;border-radius: 4px;")},"删除订单"))))})),t.goods_info&&t.goods_info[0]&&1==t.goods_info[0].is_presell?React.createElement("div",{className:"presell-order-bottom"},React.createElement("span",{style:(0,R.convertLineStyleData)("margin-right:20rpx;")},"定金已支付：¥ "+t.total_bargain),React.createElement("span",null,"尾款已支付：¥ "+t.total_final_payment)):React.createElement("div",{className:"goods-order-bottom"},React.createElement("span",{className:"myOrder-list-count"},"共"+t.goods_num+"件商品"),"1"!=t.is_integral&&React.createElement("span",null,"合计：",React.createElement("span",{className:"total-price"},"¥"+t.original_price)),"1"==t.is_integral&&React.createElement("span",null,"合计：",(0!=t.original_price&&"0.00"!=t.original_price||!t.total_integral||0==t.total_integral)&&React.createElement("span",{className:"myOrder-pay-price"},"¥"+t.original_price),t.total_integral&&0!=t.total_integral&&0!=t.original_price&&"0.00"!=t.original_price&&React.createElement("span",{className:"myOrder-pay-price"},"+"),t.total_integral&&React.createElement("span",{className:"myOrder-pay-price"},t.total_integral+"积分")))))}),React.createElement("div",{hidden:!u,className:"noMoreNewDataTip"},"已经没有新数据了"))),React.createElement("div",{className:"scrollContainer",hidden:3!=c},React.createElement(k.ScrollView,{className:"myOrder-tostore myOrder-content-container","scroll-y":"true",lowerThreshold:"10",bindscrolltolower:this.scrollToListBottom},l.map(function(t,a){return React.createElement("div",{className:"myOrder-list-wrap",key:t.order_id||a,onClick:e.goToOrderDetail,"data-franchisee":t.app_id,"data-id":t.order_id,"data-type":"tostore"},React.createElement("div",{className:"dialog-block-item myOrder-tostore-top"},React.createElement("span",{className:"dialog-block-time"},"下单时间: "+t.add_time),React.createElement("span",{className:"pull-right tostore-see-detail"},"查看详情")),t.sub_shop_info&&t.sub_shop_info.name&&React.createElement("div",{className:"myOrder-franchisee-name"},t.sub_shop_info.name),React.createElement("div",{className:"myOrder-goods-list"},0==a&&React.createElement(React.Fragment,null,Array.isArray(t.goods_info)&&t.goods_info.map(function(e,t){return React.createElement("div",{key:e.id||t},React.createElement("div",{className:"dialog-block-item"},e.use_integral&&React.createElement("div",{className:"myOrder-goods-tips"},React.createElement("div",{className:"myOrder-goods-tips-top"},"积"),React.createElement("div",{className:"myOrder-goods-tips-left"}),React.createElement("div",{className:"myOrder-goods-tips-right"})),React.createElement("img",{className:"myOrder-goods-cover",src:e.cover,mode:"aspectFill"}),React.createElement("div",{className:"tostore-goods-detail"},React.createElement("div",{className:"myOrder-tostore-title"},React.createElement("div",{style:(0,R.convertLineStyleData)("font-size: 28rpx;")},e.goods_name),!!e.model_value.length&&React.createElement("div",{style:(0,R.convertLineStyleData)("color: #999;margin-top: 8rpx;line-height: 32rpx;")},e.model_name.map(function(t,a){return React.createElement("div",{key:a},t+" : "+e.model_value[a])}))),React.createElement("div",{className:"tostorePrice-num"},React.createElement("div",{style:(0,R.convertLineStyleData)("font-size: 30rpx")},0==e.use_integral?React.createElement(React.Fragment,null,React.createElement("span",null,"¥"+e.price)):React.createElement(React.Fragment,null,("0.00"!=e.price||!e.use_integral||0==e.use_integral)&&React.createElement("span",null,"¥"+e.price),e.use_integral&&0!=e.use_integral&&"0.00"!=e.price&&React.createElement("span",null,"+"),e.use_integral&&React.createElement("span",null,e.use_integral+"积分"))),React.createElement("div",{style:(0,R.convertLineStyleData)("color: #999;")},"×"+e.num)))))}))),React.createElement("div",{className:"myOrder-list-bottom"},React.createElement("div",null,t.tostore_data&&t.tostore_data.formatted_queue_num&&React.createElement("label",{className:"pull-left"},"取餐号：",React.createElement("span",null,t.tostore_data.formatted_queue_num)),React.createElement("label",null,React.createElement("span",{className:"myOrder-list-count"},"共"+t.goods_num+"件"),"1"!=t.is_integral?React.createElement(React.Fragment,null,React.createElement("span",null,"¥"+t.total_price)):React.createElement(React.Fragment,null,("0.00"!=t.original_price&&0!=t.original_price||!t.total_integral||0==t.total_integral)&&React.createElement("span",null,"¥"+t.original_price),"0.00"!=t.original_price&&0!=t.original_price&&t.total_integral&&0!=t.total_integral&&React.createElement("span",null,"+"),t.total_integral&&0!=t.total_integral&&React.createElement("span",null,t.total_integral+"积分")),0==t.status?React.createElement("span",{className:"tostore-order-status"},"待付款"):1==t.status?React.createElement("span",{className:"tostore-order-status"},"等待商家确认"):2==t.status?React.createElement("span",{className:"tostore-order-status"},"商家已确认"):3==t.status?React.createElement("span",{className:"tostore-order-status"},"待评价"):4==t.status?React.createElement("span",{className:"tostore-order-status"},"退款审核中"):5==t.status?React.createElement("span",{className:"tostore-order-status"},"正在退款中"):6==t.status?React.createElement("span",{className:"tostore-order-status"},"已完成"):7==t.status&&React.createElement("span",{className:"tostore-order-status"},"已关闭")))))}),React.createElement("div",{hidden:!u,className:"noMoreNewDataTip"},"已经没有新数据了"))),React.createElement("div",{className:"scrollContainer",hidden:5!=c},React.createElement(k.ScrollView,{className:"myOrder-transfer myOrder-content-container","scroll-y":"true",lowerThreshold:"10",bindscrolltolower:this.scrollToListBottom},l.map(function(t,a){return React.createElement("div",{className:"myOrder-list-wrap",key:t.order_id||a,onClick:e.goToOrderDetail,"data-franchisee":t.app_id,"data-id":t.order_id,"data-type":"transfer"},React.createElement("div",{className:"dialog-block-item"},React.createElement("span",{className:"dialog-block-time"},t.add_time),0==t.status?React.createElement("span",{className:"pull-right myOrder-order-status"},"待付款"):6==t.status?React.createElement("span",{className:"pull-right myOrder-order-status"},"已完成"):7==t.status&&React.createElement("span",{className:"pull-right myOrder-order-status"},"已关闭")),t.sub_shop_info&&t.sub_shop_info.name&&React.createElement("div",{className:"myOrder-franchisee-name"},t.sub_shop_info.name),React.createElement("div",{className:"myOrder-goods-list"},React.createElement(React.Fragment,null,Array.isArray(t.goods_info)&&t.goods_info.map(function(e,a){return 0==a&&React.createElement("div",{key:e.id||a},React.createElement("div",{className:"dialog-block-item"},React.createElement("div",{className:"myOrder-goods-cover transfer-order-cover"},React.createElement("img",{src:t.app_info.app_logo})),React.createElement("div",{className:"myOrder-goods-title"},"当面付订单"),React.createElement("div",{className:"myOrder-goods-right"},React.createElement("div",null,"¥",React.createElement("span",{className:"myOrder-goods-price"},e.price)))))})),React.createElement("div",{className:"dialog-block-item myOrder-total-item"},"1"!=t.is_integral&&React.createElement("span",null,"合计：",React.createElement("span",{className:"myOrder-pay-price"},"¥"+t.total_price)),"1"==t.is_integral&&React.createElement("span",null,"合计：",("0.00"!=t.original_price&&0!=t.original_price||!t.total_integral||0==t.total_integral)&&React.createElement("span",{className:"myOrder-pay-price"},"¥"+t.original_price),t.total_integral&&0!=t.total_integral&&0!=t.original_price&&"0.00"!=t.original_price&&React.createElement("span",{className:"myOrder-pay-price"},"+"),t.total_integral&&React.createElement("span",{className:"myOrder-pay-price"},t.total_integral+"积分"))),0==t.status?React.createElement("div",{className:"myOrder-list-bottom"},React.createElement("span",{className:"btn myOrder-cancel-order",onClick:e.cancelOrder,"data-franchisee":t.app_id,"data-id":t.order_id},"取消订单"),React.createElement("span",{className:"btn btn-orange myOrder-pay-directly",onClick:e.goToOrderDetail,"data-franchisee":t.app_id,"data-id":t.order_id},"支付")):1==t.status?React.createElement("div",{className:"myOrder-list-bottom"},React.createElement("span",{className:"btn myOrder-verification-code",onClick:e.getWriteOffCodeBox,"data-franchisee":t.app_id,"data-id":t.order_id},"核销码"),!t.timeDiff&&React.createElement("span",{className:"btn myOrder-apply-drawback",onClick:e.applyDrawback,"data-franchisee":t.app_id,"data-id":t.order_id},"申请退款")):2==t.status?React.createElement("div",{className:"myOrder-list-bottom"},!t.timeDiff&&React.createElement("span",{className:"btn myOrder-apply-drawback",onClick:e.applyDrawback,"data-franchisee":t.app_id,"data-id":t.order_id},"申请退款"),React.createElement("span",{className:"btn btn-orange myOrder-sure-receipt",onClick:e.sureReceipt,"data-franchisee":t.app_id,"data-id":t.order_id},"确认消费")):3==t.status&&React.createElement("div",{className:"myOrder-list-bottom"},React.createElement("span",{className:"btn btn-orange myOrder-make-comment",onClick:e.makeComment,"data-franchisee":t.app_id,"data-id":t.order_id},"去评价"))))}),React.createElement("div",{hidden:!u,className:"noMoreNewDataTip"},"已经没有新数据了"))),React.createElement("div",{className:"scrollContainer",hidden:6!=c},React.createElement(k.ScrollView,{className:"myOrder-content-container","scroll-y":"true",lowerThreshold:"10",bindscrolltolower:this.scrollToListBottom},l.map(function(t,a){return React.createElement("div",{className:"myOrder-list-wrap row-number-box",key:t.order_id||a,onClick:e.goToOrderDetail,"data-franchisee":t.app_id,"data-id":t.order_id,"data-type":"rowNumber"},React.createElement("div",{className:"take-num-time"},React.createElement("span",null,"取号时间："+t.add_time),React.createElement("span",{className:"pull-right ico-moon icon-rightarrow"})),React.createElement("div",{className:"myOrder-row-number-shop"},React.createElement("img",{src:t.app_info&&t.app_info.app_logo}),React.createElement("span",null,t.app_info&&t.app_info.app_name)),React.createElement("div",{className:"row-num-content"},React.createElement("span",{className:"ico-moon icon-mine-row-number"}),"我的排号："+(t.line_up_data&&t.line_up_data.queue_num_name)),React.createElement("div",{className:"row-num-content"},React.createElement("span",{className:"ico-moon icon-row-number-type"}),"排号类型："+(t.line_up_data&&t.line_up_data.line_up_type_data.name)),React.createElement("div",{className:"row-num-content"},React.createElement("span",{className:"ico-moon icon-row-number-wait"}),"预计等待："+((t.line_up_data&&t.line_up_data.prepare_wait_time)>0?(t.line_up_data.prepare_wait_time>h.max_display_time?">"+h.max_display_time:t.line_up_data.prepare_wait_time)+"分钟":"无需等待")),React.createElement("div",{className:"myOrder-rowNum-bottom"},React.createElement("span",{className:"myOrder-list-price"},React.createElement("span",{className:"ico-moon icon-row-number-fee"}),"排号费：¥"+t.original_price),0==t.status?React.createElement("span",{className:"rowNum-order-status"},"待付款"):2==t.status?React.createElement("span",{className:"rowNum-order-status"},"待使用"):4==t.status?React.createElement("span",{className:"rowNum-order-status"},"退款申请中"):5==t.status?React.createElement("span",{className:"rowNum-order-status"},"退款中"):6==t.status?React.createElement("span",{className:"rowNum-order-status used-rowNum-order"},"已使用"):7==t.status&&React.createElement("span",{className:"rowNum-order-status"},"已失效")))}),React.createElement("div",{hidden:!u,className:"noMoreNewDataTip"},"已经没有新数据了"))),React.createElement("div",{className:"scrollContainer",hidden:10!=c},React.createElement(k.ScrollView,{className:"newAppointment myOrder-content-container","scroll-y":"true",lowerThreshold:"10",bindscrolltolower:this.scrollToListBottom},l.map(function(t,a){return React.createElement("div",{className:"newAppointment-list-wrap",key:a},React.createElement("div",{className:"newAppointment-status"},0==t.status?React.createElement("span",null,"待付款"):1==t.status?React.createElement("span",null,"等待商家确认"):2==t.status?React.createElement("span",null,"待消费"):3==t.status?React.createElement("span",null,"待评价"):4==t.status?React.createElement("span",null,"退款审核中"):5==t.status?React.createElement("span",null,"正在退款中"):6==t.status?React.createElement("span",null,"已完成"):7==t.status&&React.createElement("span",null,"已关闭")),React.createElement("div",{className:"newAppointment-goods-list",onClick:e.goToOrderDetail,"data-franchisee":t.app_id,"data-id":t.order_id,"data-type":t.service&&1==t.service.is_hotel_appointment?"hotel":"newAppoint"},React.createElement("div",null,React.createElement("div",{className:"appointment-info"},React.createElement("img",{src:t.goods_info&&t.goods_info[0]&&t.goods_info[0].cover}),React.createElement("div",{className:"des"},React.createElement("div",{className:"serve-title"},React.createElement("span",null,t.goods_info&&t.goods_info[0]&&t.goods_info[0].goods_name),React.createElement("div",{className:"ico-moon icon-rightarrow"})),t.service&&1==t.service.is_hotel_appointment?React.createElement("div",{className:"hotel-info"},React.createElement("div",{className:"time-box"},React.createElement("div",{className:"checkIn"},"入住",React.createElement("span",null,t.newAppointmentData.start_date),t.newAppointmentData.start_day),React.createElement("div",{className:"sLine",style:(0,R.convertLineStyleData)("margin:0 20rpx;")}),React.createElement("div",{className:"ckeckOut"},"离店",React.createElement("span",null,t.newAppointmentData.end_date),t.newAppointmentData.end_day)),React.createElement("div",{className:"day-count"},"共"+t.newAppointmentData.count+"晚"),React.createElement("div",{className:"price"},React.createElement("span",null,"价格："),"¥"+t.goods_info[0].price+" x "+t.goods_info[0].num)):React.createElement("div",{className:"section"},t.newAppointmentData&&t.newAppointmentData.serveInfo.map(function(e,t){return React.createElement("div",{className:"area",key:t},React.createElement("span",null,e.label+"："),e.value)}),t.newAppointmentData&&!!t.newAppointmentData.providerList.length&&React.createElement("div",{className:"area"},React.createElement("span",null,t.newAppointmentData.providerTitle+"："),t.newAppointmentData.providerList.map(function(e,t){return React.createElement(React.Fragment,{key:t},e.name)})),React.createElement("div",{className:"duration"},React.createElement("span",null,"时间："),t.newAppointmentData&&t.newAppointmentData.duration+"分钟"),React.createElement("div",{className:"arrival-time"},React.createElement("span",null,"到店时间："),React.createElement("span",{className:3==t.status||6==t.status?"":"arrival-detail-time"},t.newAppointmentData&&t.newAppointmentData.toStoreTime+"-"+t.newAppointmentData.toStoreTimeEnd)),React.createElement("div",{className:"price"},React.createElement("span",null,"价格："),"¥"+(t.goods_info&&t.goods_info[0]&&t.goods_info[0].price+" x "+t.goods_info[0].num))))))),0==t.status?React.createElement("div",{className:"newAppointment-list-bottom"},React.createElement("span",{className:"btn myOrder-pay-directly",onClick:e.goToOrderDetail,"data-type":t.service&&1==t.service.is_hotel_appointment?"hotel":"newAppoint","data-franchisee":t.app_id,"data-id":t.order_id},"支付")):1==t.status?React.createElement("div",{className:"newAppointment-list-bottom"},React.createElement("span",{className:"btn myOrder-verification-code",onClick:e.toSeeQrcode,"data-enddate":t.newAppointmentData&&t.newAppointmentData.endDate,"data-franchisee":t.app_id,"data-id":t.order_id},React.createElement("span",{className:"ico-moon icon-new-appointment-qrcode"}),"查看券码")):2==t.status?React.createElement("div",{className:"newAppointment-list-bottom"},React.createElement("span",{className:"btn myOrder-verification-code",onClick:e.toSeeQrcode,"data-enddate":t.newAppointmentData&&t.newAppointmentData.endDate,"data-franchisee":t.app_id,"data-id":t.order_id},React.createElement("span",{className:"ico-moon icon-new-appointment-qrcode"}),"查看券码")):3==t.status?React.createElement("div",{className:"newAppointment-list-bottom grade"},React.createElement("div",null,[1,2,3,4,5].map(function(e,t){return React.createElement("div",{key:t,className:"ico-moon icon-star"})})),React.createElement("span",{className:"btn myOrder-make-comment",onClick:e.makeComment,"data-franchisee":t.app_id,"data-id":t.order_id},"评分")):6==t.status&&React.createElement("div",{className:"newAppointment-list-bottom grade"},React.createElement("div",{className:"graded"},React.createElement("span",null,"我评"),[1,2,3,4,5].map(function(e,a){return React.createElement("div",{key:a,className:"ico-moon icon-star "+(e<=t.score?"orange":"")})})),0==t.status&&React.createElement("div",{className:"myOrder-list-bottom"},React.createElement("span",{className:"btn myOrder-cancel-order",onClick:e.cancelOrder,"data-franchisee":t.app_id,"data-id":t.order_id},"取消订单"),React.createElement("span",{className:"btn btn-orange myOrder-pay-directly",onClick:e.goToOrderDetail,"data-franchisee":t.app_id,"data-id":t.order_id,"data-type":"transfer"},"支付"))))}),React.createElement("div",{hidden:!u,className:"noMoreNewDataTip"},"已经没有新数据了"))),React.createElement("div",{className:"scrollContainer",hidden:8!=c},React.createElement(k.ScrollView,{className:"myOrder-transfer myOrder-content-container","scroll-y":"true",lowerThreshold:"10",bindscrolltolower:this.scrollToListBottom},l.map(function(t,a){return React.createElement("div",{className:"myOrder-list-wrap",key:t.order_id||a,"data-id":t.order_id,"data-type":!0},React.createElement("div",null,React.createElement("div",{className:"dialog-block-item border-none"},React.createElement("span",null,t.add_time),0==t.status&&React.createElement("span",{className:"pull-right myOrder-order-status"},"待付款"),1==t.status?React.createElement("span",{className:"pull-right myOrder-order-status"},"已付款"):7==t.status&&React.createElement("span",{className:"pull-right myOrder-order-status"},"已关闭")),React.createElement("div",{className:"paid-card-block"},React.createElement("div",{className:"img-block"},React.createElement("img",{className:"order-img",src:t.goods_info.cover})),React.createElement("div",{className:"block-right"},React.createElement("div",{className:"block-right-item"},React.createElement("div",{className:"paid-card-name"},t.goods_info.goods_name),React.createElement("div",{className:"paid-card-price"},t.goods_info.price)),React.createElement("div",{className:"block-right-item"},React.createElement("div",{className:"paid-card-combo"},t.goods_info.num>1&&React.createElement("span",null,t.goods_info.cNum+"个月组合套餐")),React.createElement("div",{className:"paid-card-num"},"x"+t.goods_info.num)),React.createElement("div",{className:"total-calculation"},"合计:",React.createElement("span",{className:"price"},"¥"+t.total_price)))),0==t.status&&React.createElement("div",{className:"myOrder-list-bottom"},React.createElement("span",{className:"btn myOrder-cancel-order",onClick:e.cancelOrder,"data-franchisee":t.app_id,"data-id":t.order_id},"取消订单"),React.createElement("span",{className:"btn btn-orange myOrder-pay-directly",onClick:e.goToOrderDetail,"data-franchisee":t.app_id,"data-id":t.order_id,"data-type":"transfer"},"支付")),0!=t.status&&React.createElement("div",{className:"paid-card-bottom"},React.createElement("div",{className:"order-id"},"订单号: "+t.order_id))))}),React.createElement("div",{hidden:!u,className:"noMoreNewDataTip"},"已经没有新数据了"))),React.createElement("div",{className:"scrollContainer",hidden:9!=c},React.createElement(k.ScrollView,{className:"myOrder-transfer myOrder-content-container","scroll-y":"true",lowerThreshold:"10",bindscrolltolower:this.scrollToListBottom},l.map(function(t,a){return React.createElement("div",{className:"myOrder-list-wrap",key:t.order_id||a,"data-id":t.order_id,"data-type":!0},React.createElement("div",null,React.createElement("div",{className:"dialog-block-item border-none"},React.createElement("span",{className:"dialog-block-time"},t.add_time),0==t.status&&React.createElement("span",{className:"pull-right myOrder-order-status"},"待付款"),1==t.status&&React.createElement("span",{className:"pull-right myOrder-order-status"},"已付款"),7==t.status&&React.createElement("span",{className:"pull-right myOrder-order-status"},"已关闭")),React.createElement("div",{className:"paid-card-block",onClick:e.goToOrderDetail,"data-franchisee":t.app_id,"data-id":t.order_id,"data-type":"ExchangeCoupon"},React.createElement("div",{className:"img-block"},React.createElement("img",{className:"order-img",src:t.goods_info.logo})),React.createElement("div",{className:"block-right"},React.createElement("div",{className:"block-right-item"},React.createElement("div",{className:"paid-card-name"},t.goods_info.goods_name),React.createElement("div",{className:"paid-card-price"},t.goods_info.price)),React.createElement("div",{className:"block-right-item"},React.createElement("div",{className:"paid-card-combo"},t.goods_info.expire&&React.createElement("span",null,t.goods_info.expire)),React.createElement("div",{className:"paid-card-num"},"x1")),React.createElement("div",{className:"total-calculation"},"合计:",React.createElement("span",{className:"price"},"¥"+t.total_price)))),0==t.status&&React.createElement("div",{className:"myOrder-list-bottom"},React.createElement("span",{className:"btn myOrder-cancel-order",onClick:e.cancelOrder,"data-franchisee":t.app_id,"data-id":t.order_id},"取消订单"),React.createElement("span",{className:"btn btn-orange myOrder-pay-directly",onClick:e.goToOrderDetail,"data-franchisee":t.app_id,"data-id":t.order_id,"data-type":"transfer"},"支付")),1==t.status&&React.createElement("div",{className:"myOrder-list-bottom"},6==t.coupon_type&&0!=t.un_verify_times&&React.createElement("span",{className:"btn btn-grey myOrder-pay-directly",onClick:e.goToUseStamps,"data-franchisee":t.app_id,"data-couponId":t.user_coupon_id,"data-type":"transfer","data-untimes":t.un_verify_times},"核销码")),1!=t.status&&0!=t.status&&React.createElement("div",{className:"paid-card-bottom"},React.createElement("div",{className:"order-id"},"订单号: "+t.order_id))))}),React.createElement("div",{hidden:!u,className:"noMoreNewDataTip"},"已经没有新数据了"))),React.createElement("div",{className:"scrollContainer",hidden:21!=c},React.createElement(k.ScrollView,{className:"myOrder-ebusiness myOrder-content-container","scroll-y":"true",lowerThreshold:"10",bindscrolltolower:this.scrollToListBottom},l.map(function(t,a){return React.createElement("div",{className:"myOrder-list-wrap",key:t.order_id||a},React.createElement("div",{className:"dialog-block-item"},1==t.is_pay_on_delivery&&React.createElement("span",{className:"cash-delivery"},"货到付款"),React.createElement("span",{className:"add-time"},t.add_time),0==t.status?React.createElement("span",{className:"pull-right myOrder-order-status"},"待付款"):1==t.status?React.createElement("span",{className:"pull-right myOrder-order-status"},"待发货"):2==t.status?React.createElement("span",{className:"pull-right myOrder-order-status"},"配送中"):3==t.status?React.createElement("span",{className:"pull-right myOrder-order-status"},"待评价"):4==t.status?React.createElement("span",{className:"pull-right myOrder-order-status"},1==t.is_pay_on_delivery?"审核中":"退款审核中"):5==t.status?React.createElement("span",{className:"pull-right myOrder-order-status"},"正在退款中"):6==t.status?React.createElement("span",{className:"pull-right myOrder-order-status"},"已完成"):7==t.status?React.createElement("span",{className:"pull-right myOrder-order-status"},"已关闭"):10==t.status&&React.createElement("span",{className:"pull-right myOrder-order-status"},"待提货")),t.sub_shop_info&&t.sub_shop_info.name&&React.createElement("div",{className:"myOrder-franchisee-name"},t.sub_shop_info.name),React.createElement("div",{className:"myOrder-goods-list",onClick:e.goToOrderDetail,"data-franchisee":t.app_id,"data-id":t.order_id,"data-type":"communityGroup"},Array.isArray(t.goods_info)&&t.goods_info.map(function(e,t){return React.createElement("div",{key:e.id||t},React.createElement("div",{className:"dialog-block-item"},React.createElement("img",{className:"myOrder-goods-cover",src:e.cover}),React.createElement("div",{className:"myOrder-goods-title"},!!+e.is_benefit_goods&&React.createElement("span",{className:"goods-gift"},"赠品"),!!+e.is_vip_goods&&React.createElement("span",{className:"goods-gift"},"会员价"),e.goods_name),!e.is_benefit_goods&&React.createElement("div",{className:"myOrder-goods-right"},React.createElement("div",null,"0.00"!=e.price&&React.createElement("span",{className:"myOrder-goods-price"},"¥"+e.price),e.use_integral&&0!=e.use_integral&&"0.00"!=e.price&&React.createElement("span",null,"+"),e.use_integral&&React.createElement("span",null,e.use_integral+"积分")),React.createElement("div",null,"×",React.createElement("span",{className:"myOrder-goods-count"},e.num)))))})),React.createElement("div",{className:"dialog-block-item myOrder-total-item"},React.createElement("span",null,"合计：",React.createElement("span",{className:"myOrder-pay-price"},"¥"+t.original_price))),0==t.status?React.createElement("div",{className:"myOrder-list-bottom"},React.createElement("span",{className:"btn myOrder-cancel-order",onClick:e.cancelOrder,"data-franchisee":t.app_id,"data-id":t.order_id},"取消订单"),React.createElement("span",{className:"btn btn-orange myOrder-pay-directly",onClick:e.goToOrderDetail,"data-franchisee":t.app_id,"data-id":t.order_id,"data-type":"communityGroup"},"支付")):1==t.status?React.createElement("div",{className:"myOrder-list-bottom"}):2==t.status?React.createElement("div",{className:"myOrder-list-bottom"}):3==t.status?React.createElement("div",{className:"myOrder-list-bottom"},React.createElement("span",{className:"btn btn-orange myOrder-make-comment",onClick:e.makeComment,"data-franchisee":t.app_id,"data-id":t.order_id},"去评价")):10==t.status&&React.createElement("div",{className:"myOrder-list-bottom"},React.createElement("span",{className:"btn myOrder-verification-code",onClick:e.getWriteOffCodeBox,"data-franchisee":t.app_id,"data-id":t.order_id},"核销码"),React.createElement("span",{className:"btn btn-orange myOrder-sure-receipt",onClick:e.sureReceipt,"data-franchisee":t.app_id,"data-id":t.order_id},"确认收货")))}),React.createElement("div",{hidden:!u,className:"noMoreNewDataTip"},"已经没有新数据了")))))),E&&React.createElement("div",{className:"verification-code",onClick:this.hideWriteOffCodeBox},React.createElement("div",{className:"verification-code-tips"},"向商家出示二维码或核销码后即可消费"),React.createElement("div",{className:"verification-image-box"},React.createElement("img",{className:"verification-code-img",src:v}),1==_&&React.createElement("div",{className:"verification-code-finished"},React.createElement("div",null,"已核销"))),React.createElement("div",{className:"verification-code-text"},React.createElement("span",null,"核销码："),React.createElement("span",null,y))),b&&React.createElement("div",{className:"filter-goods-pick-mask",onClick:this.hideGoodsPick,onTouchMove:this.stopPropagation},React.createElement("div",{className:"filter-goods-pick-box",onClick:this.stopPropagation},React.createElement("div",{onClick:this.selectGoodsPick,"data-type":"0",className:"0"==o?"selected":""},"全部","0"==o&&React.createElement("span",{className:"pull-right ico-moon icon-gou"})),React.createElement("div",{onClick:this.selectGoodsPick,"data-type":"1",className:"1"==o?"selected":""},"快递","1"===o&&React.createElement("span",{className:"pull-right ico-moon icon-gou"})),React.createElement("div",{onClick:this.selectGoodsPick,"data-type":"2",className:"2"==o?"selected":""},"同城配送","2"===o&&React.createElement("span",{className:"pull-right ico-moon icon-gou"})),React.createElement("div",{onClick:this.selectGoodsPick,"data-type":"3",className:"3"==o?"selected":""},"上门自提","3"===o&&React.createElement("span",{className:"pull-right ico-moon icon-gou"})),React.createElement("div",{onClick:this.selectGoodsPick,"data-type":"4",className:"4"==o?"selected":""},"堂食点餐","4"===o&&React.createElement("span",{className:"pull-right ico-moon icon-gou"})))),React.createElement(i.default,{hidden:N,title:"请输入本次核销次数",confirmText:"确认",cancelText:"取消",onCancel:this.cancel,onKeyDown:this.confirm,onTouchMove:this.privateStopNoop},"​",React.createElement("input",{type:"number",placeholder:"请输入本次核销次数",maxlength:"6",onInput:this.addLabelInput,defaultValue:w,focus:x,cursorSpacing:"80",style:(0,R.convertLineStyleData)("background:#F5F5F5;height:76rpx;border-radius:10rpx;padding: 10rpx 10rpx")})))}}]),t}(x.default);t.default=S},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(0),i=n(o),s=a(3),r=n(s),c=a(1),l=n(c),d=a(2),u=n(d),m=a(5),p=a(6),f=a(7),g=n(f);a(360);var h=function(e){function t(e){(0,i.default)(this,t);var a=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={orderInfo:{},orderStatus:{0:"订单待付款",1:"商家待发货",2:"买家待收货",3:"订单待评价",4:"退款审核中",5:"退款中",6:"订单已完成",7:"已关闭",8:"卖家待接单",15:"退款失败"},orderIcon:{0:"goods-undone-payment",1:"goods-undone-ship",2:"goods-undone-receipt",3:"goods-undone-evaluation",4:"goods-refund",5:"goods-refund-doing",6:"goods-order-complete",7:"goods-order-close"},refundStatus:["退款审核中","","","等待买家退货","商家待收货","","等待第三方退款结果"],refundIcon:["goods-refund-review","","","goods-refund","goods-undone-receipt","","goods-already-refund"],refundReason:["多拍/拍错/不想要","快递延期","未按约定时间发货","快递记录出错","内容与描述不符","其它"],goodsAdditionalInfo:{},hasAdditionalInfo:!1,customFields:[],orderId:"",isFromTemplateMsg:!1,originalPrice:"",useBalance:"",freightAdress:{},express_fee:"",discount_cut_price:"",isFromBack:!1,showWriteOffCodeBox:!1,showEventDialog:!1,eventType:"",hasAlreadyGoods:!1,sameCityStatus:{101:"配送中-待骑手接单",102:"配送中-待骑手取货",201:"配送中-待骑手取货",202:"配送中-待送达",301:"配送中-待送达",304:"订单配送失败，物品返回中",305:"订单拒收，物品返回中",401:"商品返还商户，等待重新配送",501:"订单异常",502:"订单异常"},sameCity:!1,mapOverlay:{latitude:22.52,longitude:113.93,markers:[]},storeStyle:{}},a.verifiTimeInterval="",a.downcountArr=[],a.dataInitial=function(){a.getOrderDetail(a.data.orderId),a.getLogistics(),a.getAppECStoreConfig(),a.setData({appName:m.appMethod.globalData.appTitle,appLogo:m.appMethod.globalData.appLogo})},a.getOrderDetail=function(e){var t=a;m.appMethod.getOrderDetail({data:{order_id:e,sub_shop_app_id:a.franchiseeId},success:function(e){var a=e.data[0],n=a.form_data,o=!1,i=[],s=[],r=n.ecommerce_info.dispatch_use_pick_up_type,c="";if(2==r&&(c=n.ecommerce_info.ecommerce_transport_order&&n.ecommerce_info.ecommerce_transport_order.status),n.additional_info)for(var l=0;l<n.goods_info.length;l++){var d=n.goods_info[l].delivery_id,u=n.goods_info[l].goods_id;d&&"0"!=d&&-1==s.indexOf(u)&&(i.push(n.goods_info[l]),s.push(u),o=!0)}var p=n.remark;n.remark=p?p.replace(/\n|\\n/g,"\n"):p;for(var f=0;f<n.goods_info.length;f++)1==n.goods_info[f].is_seckill&&(n.goods_info[f].downCount={hours:"00",minutes:"00",seconds:"00"},0==n.goods_info[f].seckill_start_state?n.goods_info[f].downcount=m.appMethod.beforeSeckillDownCount(n.goods_info[f],t,"orderInfo.goods_info["+f+"]"):1==n.goods_info[f].seckill_start_state&&(n.goods_info[f].downcount=m.appMethod.duringSeckillDownCount(n.goods_info[f],t,"orderInfo.goods_info["+f+"]")),n.goods_info[f]&&t.downcountArr.push(n.goods_info[f].downcount));if(n.refunded_price&&t.setData({hasAlreadyGoods:!0}),2==n.pick_up_type){var g=void 0,h=(new Date).getTime(),v=n.add_time.replace(/\-/g,"/"),_=9e5-(h-new Date(v+"").getTime());g=_<=0?"0":parseInt(_%36e5/6e4),n.cacelOrderCountDownTime=g}if(n.wx_local_express_order){var y=!0,E=n.status;[3,4,5,6,7].find(function(e){return e==E})&&(y=!1),t.initMapInfo(n,!0,y)}t.setData({orderInfo:n,vip_cut_price:n.vip_cut_price,is_vip_goods:n.goods_info[0].is_vip_goods,hasAdditionalInfo:o,discount_cut_price:n.discount_cut_price,useBalance:n.use_balance,express_fee:e.data[0].express_fee,box_fee:n.box_fee||0,intraCityStatus:c||"",usePickType:r}),m.appMethod.setPreviewGoodsInfo(i),m.appMethod.setGoodsAdditionalInfo(n.additional_info||{}),t.getRefundConfigByPickUpType(n.pick_up_type)}})},a.orderDelete=function(e){var t=a.data.orderId,n=a.franchiseeId,o=a;m.appMethod.sendRequest({url:"/index.php?r=AppShop/HideOrder",data:{order_id:t,sub_shop_app_id:n},success:function(e){m.appMethod.turnBack()},complete:function(){o.setData({showEventDialog:!1})}})},a.cancelOrder=function(e){var t=a.data.orderInfo.order_id,n=a;m.appMethod.sendRequest({url:"/index.php?r=AppShop/cancelOrder",data:{order_id:t,sub_shop_app_id:n.franchiseeId},success:function(e){var t={};t["orderInfo.status"]=7,n.setData(t)},complete:function(){n.setData({showEventDialog:!1})}})},a.payOrder=function(e){var t=(a.data.orderInfo.address_info,a),n=a.data.orderInfo.order_id;if(0==a.data.orderInfo.total_price)return void m.appMethod.sendRequest({url:"/index.php?r=AppShop/paygoods",data:{order_id:n,total_price:0},success:function(e){setTimeout(function(){m.appMethod.showToast({title:"支付成功",icon:"success",success:function(){t.paySuccessCallback()}})})}});var o=t.franchiseeId,i="/goodsOrderPaySuccess?detail="+n+(o?"&franchisee="+o:"");m.appMethod.goPay({orderId:n,successUrl:i})},a.applyDrawback=function(){var e=a.data.orderId,t=a.franchiseeId,n="/eCommerce/pages/previewGoodsRefund/previewGoodsRefund?orderId="+e+(t?"&franchisee="+t:"");m.appMethod.turnToPage(n)},a.editorRefund=function(){var e=a.data.orderId,t=a.franchiseeId,n="/eCommerce/pages/goodsRefundPage/goodsRefundPage?type=editor&orderId="+e+(t?"&franchisee="+t:"");m.appMethod.turnToPage(n)},a.receiveDrawback=function(){var e=a.data.orderInfo.order_id,t=a;m.appMethod.sendRequest({url:"/index.php?r=AppShop/comfirmRefund",data:{order_id:e,sub_shop_app_id:t.franchiseeId},success:function(e){var a={};a["orderInfo.status"]=7,t.setData(a)},complete:function(){t.setData({showEventDialog:!1})}})},a.checkLogistics=function(){var e=a.data.orderId,t=a.data.orderInfo.ecommerce_info,n=a.data.sameCity?1:0;if(2==a.data.usePickType){var o=t.intra_city_data,i=o&&o.deliver_type||"",s=o&&o.intra_city_appointment_arrive_time||"";m.appMethod.turnToPage("/eCommerce/pages/sameJourneyLogistic/sameJourneyLogistic?orderId="+e+"&type="+i+"&arriveTime="+s+"&franchiseeId="+a.franchiseeId+"&sameCity="+n)}else m.appMethod.turnToPage("/eCommerce/pages/logisticsPage/logisticsPage?detail="+e+"&franchiseeId="+a.franchiseeId)},a.sureReceipt=function(){var e=a.data.orderId,t=a,n=Date.now();m.appMethod.sendRequest({url:"/index.php?r=AppShop/comfirmOrder",data:{order_id:e,sub_shop_app_id:t.franchiseeId},success:function(a){m.appMethod.turnToPage("/eCommerce/pages/transactionSuccess/transactionSuccess?pageFrom=transation&orderId="+e+"&franchiseeId="+t.franchiseeId),m.appMethod.sendRequest({hideLoading:!0,url:"/index.php?r=appShop/getIntegralLog",data:{add_time:n},success:function(e){0==e.status&&e.data&&t.setData({rewardPointObj:{showModal:!0,count:e.data,callback:""}})}})},complete:function(){t.setData({showEventDialog:!1})}})},a.makeComment=function(){var e=a.franchiseeId,t="/eCommerce/pages/makeComment/makeComment?detail="+a.data.orderInfo.order_id+(e?"&franchisee="+e:"");m.appMethod.turnToPage(t)},a.goToHomepage=function(){var e=m.appMethod.getHomepageRouter();m.appMethod.turnToPage("/pages/"+e+"/"+e,!0)},a.getFreigtAdress=function(){var e=a;m.appMethod.sendRequest({url:"/index.php?r=AppShop/getAppShopLocationInfo",data:{app_id:m.appMethod.getAppId(),sub_app_id:e.franchiseeId},success:function(t){e.setData({freightAdress:t.data})}})},a.seeAdditionalInfo=function(){m.appMethod.turnToPage("/eCommerce/pages/goodsAdditionalInfo/goodsAdditionalInfo?from=goodsOrderDetail")},a.paySuccessCallback=function(){var e=a.data.orderId,t=a.franchiseeId,n="/eCommerce/pages/goodsOrderPaySuccess/goodsOrderPaySuccess?detail="+e+(t?"&franchisee="+t:"");t?m.appMethod.turnToPage(n,1):m.appMethod.sendRequest({url:"/index.php?r=AppMarketing/CheckAppCollectmeStatus",data:{order_id:e,sub_app_id:t},success:function(e){0==e.valid&&(n+="&collectBenefit=1"),m.appMethod.turnToPage(n,1)}})},a.copyOrderId=function(){var e=a;m.appMethod.setClipboardData({data:e.data.orderId,success:function(e){m.appMethod.showToast({title:"复制成功",icon:"success"})}})},a.getWriteOffCodeBox=function(){var e=a,t=a.data.orderId,n=a.franchiseeId;m.appMethod.sendRequest({url:"/index.php?r=AppShop/GetOrderVerifyCode",data:{sub_shop_app_id:n,order_id:t},success:e.setVerificationCodeData})},a.setVerificationCodeData=function(e){var t=a;t.setData({codeImgUrl:e.data.qrcode_url,codeNum:e.data.code,codeStatus:e.data.status,showWriteOffCodeBox:!0}),t.connectSocket()},a.connectSocket=function(){var e=a;m.appMethod.connectSocket({url:"wss://xcx.zhichiwangluo.com",header:{"content-type":"application/json"},method:"GET"}),m.appMethod.onSocketOpen(function(t){var a={action:"mark_client",user_token:m.appMethod.globalData.userInfo.user_token,scenario_name:"app_order_verify",session_key:m.appMethod.globalData.sessionKey};m.appMethod.sendSocketMessage({data:JSON.stringify(a)}),e.verifiTimeInterval=setInterval(function(){var e={action:"heartbeat",user_token:m.appMethod.globalData.userInfo.user_token,scenario_name:"app_order_verify",session_key:m.appMethod.globalData.sessionKey};m.appMethod.sendSocketMessage({data:JSON.stringify(e)})},3e4)}),m.appMethod.onSocketMessage(function(t){var a=JSON.parse(t.data);if("push_to_client"==a.action){var n=JSON.parse(a.msg);"app_order_verify"==n.type&&0==n.status&&(e.setData({codeStatus:1}),clearInterval(e.verifiTimeInterval),m.appMethod.closeSocket())}})},a.hideWriteOffCodeBox=function(){var e=a;a.setData({showWriteOffCodeBox:!1}),clearInterval(e.verifiTimeInterval),m.appMethod.closeSocket()},a.hideEventDialog=function(){a.setData({showEventDialog:!1})},a.showEventDialog=function(e){a.setData({eventType:e.currentTarget.dataset.type,showEventDialog:!0})},a.goOrderProgress=function(){var e=a.data.orderId,t=a.franchiseeId,n="/eCommerce/pages/goodsOrderProgress/goodsOrderProgress?orderId="+e+(t?"&franchisee="+t:"");m.appMethod.turnToPage(n)},a.returnInfor=function(){var e=a.data.orderId,t=a.franchiseeId,n="/eCommerce/pages/goodsReturnInfor/goodsReturnInfor?orderId="+e+(t?"&franchisee="+t:"");m.appMethod.turnToPage(n)},a.cancelRefund=function(){var e=a,t=a.data.orderId,n=a.franchiseeId;m.appMethod.sendRequest({url:"/index.php?r=appShop/cancelRefund",data:{order_id:t,sub_shop_app_id:n},success:function(){e.getOrderDetail(t)}})},a.getAppECStoreConfig=function(){m.appMethod.getAppECStoreConfig(function(e){a.setData({storeStyle:e.color_config})},a.franchiseeId)},a.deliveryDrawback=function(){var e=a,t=a.data.orderId,n=a.franchiseeId;m.appMethod.sendRequest({url:"/index.php?r=AppShop/applyRefund",data:{order_id:t,sub_shop_app_id:n},success:function(a){e.getOrderDetail(t)},complete:function(){e.setData({showEventDialog:!1})}})},a.goAlreadyGoodsPage=function(){var e=a;m.appMethod.getCurrentPage().data={orderInfo:{goods_info:e.data.orderInfo.goods_info,refunded_price:e.data.orderInfo.refunded_price}};m.appMethod.turnToPage("/eCommerce/pages/goodsAlreadyRefunded/goodsAlreadyRefunded")},a.getLogistics=function(){var e=a;m.appMethod.sendRequest({url:"/index.php?r=AppShop/expressFlow",data:{order_id:e.data.orderId},success:function(t){var a=t.data;if(a)if(a.is_custom)e.setData({logisticsCustom:a.is_custom});else{var n=a.Traces;a.waybill_id&&(a.path_item_list.map(function(e){e.AcceptTime=e.action_time,e.AcceptStation=e.action_msg}),n=a.path_item_list),e.setData({logistics:n})}}})},a.toGoodsAfterSaleDetail=function(e){var t=a.data.orderId,n=a.franchiseeId,o=a.data.orderInfo.refund_apply.id,i="/eCommerce/pages/goodsAfterSaleDetail/goodsAfterSaleDetail?applyId="+o+"&detail="+t+"&franchisee="+n;m.appMethod.turnToPage(i)},a.goDeliveryNavigation=function(){m.appMethod.openLocation({latitude:Number(a.data.orderInfo.self_delivery_info.latitude),longitude:Number(a.data.orderInfo.self_delivery_info.longitude),name:a.data.orderInfo.self_delivery_info.address})},a.sameJournyLogistic=function(){var e=a.data.orderId;m.appMethod.turnToPage("/eCommerce/pages/sameJournyLogistic/sameJournyLogistic?detail="+e)},a.getRefundConfigByPickUpType=function(e){var t=a;m.appMethod.sendRequest({url:"/index.php?r=AppEcommerce/getRefundConfigByPickUpType",data:{pick_up_type:e,sub_shop_app_id:t.franchiseeId},success:function(e){if(e.data&&e.data.config_data){var a=e.data.config_data;t.setData({refundAdress:a.address||"",isFullRefund:a.is_full_refund})}}})},a.initMapInfo=function(e,t,n){var o=e.wx_local_express_order,i=[];i=[{id:0,latitude:o.sender.lat,longitude:o.sender.lng,iconPath:"http://cdn.jisuapp.cn/static/webapp/images/xcx-goods/merchant-delivery.png",width:47,height:51},{id:1,latitude:o.agent?+o.agent.lat:22.52,longitude:o.agent?+o.agent.lng:113.93,iconPath:"http://develop.zhichiwangluo.com/zhichi_frontend/static/jisuapp_editor/images/rider.png",width:38,height:45},{id:2,latitude:o.receiver.lat,longitude:o.receiver.lng,iconPath:"http://cdn.jisuapp.cn/static/webapp/images/xcx-goods/merchant-delivery.png",width:47,height:51}],i=a.transPosition(i,o.order_status),a.setData({"mapOverlay.markers":i,sameCityInfo:o,sameCity:t,showMap:n})},a.transStatus=function(e){switch(+e){case 101:return"待骑手接单";case 102:return"骑手赶往商家";case 103:case 203:case 303:return"商家取消订单";case 201:case 202:return"骑手取货中";case 204:case 205:return"骑手取消订单";case 301:return"骑手配送中";case 302:return"订单已完成";case 304:case 305:return"配送失败";case 401:case 501:case 502:return"订单结束，等待重新配送"}},a.transPosition=function(e,t){var n=a.transStatus(t),o={callout:{content:n,bgColor:"#ffffff",display:"ALWAYS",padding:4,borderRadius:5}};switch(n){case"待骑手接单":case"商家取消订单":case"订单已完成":case"订单结束，等待重新配送":Object.assign(e[0],o),e.splice(1,1),a.setData({"mapOverlay.latitude":e[0].latitude+5e-4,"mapOverlay.longitude":e[0].longitude});break;case"骑手赶往商家":case"骑手取货中":case"骑手取消订单":case"骑手配送中":case"配送失败":Object.assign(e[1],o),a.setData({"mapOverlay.latitude":e[1].latitude+5e-4,"mapOverlay.longitude":e[1].longitude})}return e},a.callRider=function(){var e=a.data.sameCityInfo.agent.phone[0];m.appMethod.makePhoneCall(e)},document.title="订单详情",a}return(0,u.default)(t,e),(0,r.default)(t,[{key:"componentWillMount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,p.getCurrentPageQueryParams)();this.setData({orderId:e.detail,isFromTemplateMsg:"template_msg"===e.from,sessionFrom:e.franchisee||m.appMethod.getAppId()||""}),this.franchiseeId=e.franchisee||"",this.dataInitial()}},{key:"componentDidMount",value:function(){this.data.isFromBack?this.data.orderInfo.order_id&&this.getOrderDetail(this.data.orderInfo.order_id):this.setData({isFromBack:!0})}},{key:"componentWillUnmount",value:function(){if(this.downcountArr&&this.downcountArr.length){this.downcountArr=this.downcountArr.concat().reverse();for(var e=0;e<this.downcountArr.length;e++)this.downcountArr[e]&&this.downcountArr[e].clear()}}},{key:"render",value:function(){var e=this.state,t=(e.showGetUserInfo,e.rewardPointObj,e.shareGiftsObj,e.collectGiftsObj,e.collectGetObj,e.isFromTemplateMsg),a=e.storeStyle,n=e.orderIcon,o=e.orderInfo,i=e.sameCity,s=e.sameCityStatus,r=e.sameCityInfo,c=e.orderStatus,l=e.refundIcon,d=e.refundStatus,u=e.refundAdress,m=e.logistics,f=e.logisticsCustom,g=e.usePickType,h=e.mapOverlay,v=e.showMap,_=e.appLogo,y=e.appName,E=(e.sessionFrom,e.discount_cut_price),b=e.box_fee,N=e.express_fee,R=e.useBalance,k=e.hasAdditionalInfo,w=e.hasAlreadyGoods,x=e.intraCityStatus,C=e.isFullRefund,D=e.codeImgUrl,S=e.codeStatus,I=e.codeNum,M=e.showWriteOffCodeBox,T=e.eventType,P=e.showEventDialog;return React.createElement("div",{className:"official-page goods-order-detail"},React.createElement("div",{className:"order-contain"},t&&React.createElement("div",{className:"orderDetail-goto-homepage",onClick:this.goToHomepage},"返回首页"),React.createElement("div",{className:"seller-shipped",style:(0,p.convertLineStyleData)("background:"+a.theme)},4!=o.status?React.createElement("div",null,React.createElement("span",{className:"order-icon ico-moon icon-"+n[o.status]}),React.createElement("span",null,1!=o.pick_up_type&&8==o.status?"商家待接单":2==o.status&&i?s[r.order_status]:c[o.status])):React.createElement("div",null,React.createElement("span",{className:"order-icon ico-moon icon-"+l[o.refund_apply.status]}),React.createElement("span",null,1==o.is_pay_on_delivery?"审核中":d[o.refund_apply.status]))),0==o.status&&o.expire&&React.createElement("div",{className:"order-prompt"},"请在尽快完成付款，还剩",React.createElement("span",{style:(0,p.convertLineStyleData)("color:"+a.theme)},1==o.has_seckill?o.close_order_time+"分":o.expire),"（超时按",React.createElement("span",{style:(0,p.convertLineStyleData)("color:"+a.theme)},"取消订单"),"处理）"),1==o.status&&o.expire&&React.createElement("div",{className:"order-prompt"},"付款成功，请耐心等待商家发货"),2==o.status&&!i&&2!=o.pick_up_type&&React.createElement("div",{className:"order-prompt"},"商家已发货，距自动收货还剩",React.createElement("span",{style:(0,p.convertLineStyleData)("color:"+a.theme)},o.expire)),4==o.status&&0==o.refund_apply.status&&React.createElement("div",{className:"order-prompt"},"你已成功发起退款申请，请耐心等待商家处理，还剩",React.createElement("span",{style:(0,p.convertLineStyleData)("color:"+a.theme)},o.refund_apply.expire),"（超时按",React.createElement("span",{style:(0,p.convertLineStyleData)("color:"+a.theme)},1==o.is_pay_on_delivery?"拒绝取消订单":"拒绝退款"),"处理）"),4==o.status&&3==o.refund_apply.status&&React.createElement("div",{className:"order-prompt"},"商家已同意退货退款申请，请及时退货，还剩",React.createElement("span",{style:(0,p.convertLineStyleData)("color:"+a.theme)},o.refund_apply.expire),"（超时按",React.createElement("span",{style:(0,p.convertLineStyleData)("color:"+a.theme)},"买家撤销退货"),"处理）"),4==o.status&&4==o.refund_apply.status&&React.createElement("div",{className:"order-prompt"},"请耐心等待商家收货，收货完成后将会进行退款"),2==o.pick_up_type&&8==o.status&&React.createElement("div",{className:"order-prompt"},o.cacelOrderCountDownTime+"分钟未接单，订单将自动取消"),2==o.pick_up_type&&(1==o.status||2==o.status)&&React.createElement("div",{className:"order-prompt"},"预计送达时间：",React.createElement("span",{style:(0,p.convertLineStyleData)("color:"+a.theme)},o.ecommerce_info.intra_city_data.intra_city_appointment_arrive_time)),4==o.status&&2==o.refund_apply.refund_type&&1!=o.is_pay_on_delivery&&React.createElement(React.Fragment,null,React.createElement("div",{className:"refund-address-box"},React.createElement("div",{className:"refund-address-title"},React.createElement("span",null,"退货地址"),React.createElement("span",{className:"pull-right"},u.brand_name+" "+u.phone)),React.createElement("div",{className:"pull-right refund-address"},u.region_info[2].name+u.region_info[1].name+u.region_info[0].name+u.detail_address))),(2==o.status||3==o.status||5==o.status)&&1==g&&React.createElement("div",{onClick:this.checkLogistics},React.createElement("div",{className:"goods-logistics"},React.createElement("span",{className:"ico-moon icon-goods-logistics"}),m&&m.length?React.createElement("div",{className:"goods-logistics-info"},React.createElement("div",{className:"goods-logistics-title",style:(0,p.convertLineStyleData)("color:"+a.theme)},m[0].AcceptStation),React.createElement("div",{className:"goods-logistics-time"},m[0].AcceptTime)):React.createElement("div",{className:"goods-logistics-info"},1==f?"商家自主发货":"暂无物流信息"),React.createElement("span",{style:(0,p.convertLineStyleData)("display: inline-block;vertical-align: middle;"),className:"colord2d2 ico-moon icon-rightarrow"}))),4!=o.status&&React.createElement(React.Fragment,null,React.createElement("div",{className:"buyer-information self-delivery-info"},React.createElement("span",{className:"ico-moon icon-goods-location"}),1==o.pick_up_type&&React.createElement(React.Fragment,null,React.createElement("div",{className:"buyer-box"},React.createElement("div",{className:"buyer-name-box"},React.createElement("span",{className:"cash-delivery shipping-type",style:(0,p.convertLineStyleData)("background:"+a.theme)},"快递"),1==o.is_pay_on_delivery&&React.createElement("span",{className:"cash-delivery",style:(0,p.convertLineStyleData)("background:"+a.theme)},"到付"),React.createElement("span",{className:"buyer-name"},o.address_info.name),React.createElement("span",null,o.address_info.contact)),React.createElement("div",{className:"buyer-address"},o.address_info.province.text+o.address_info.city.text+o.address_info.district.text+o.address_info.detailAddress))),2==o.pick_up_type?React.createElement(React.Fragment,null,React.createElement("div",{className:"buyer-box"},React.createElement("div",{className:"buyer-name-box"},React.createElement("span",{className:"cash-delivery shipping-type",style:(0,p.convertLineStyleData)("background:"+a.theme)},"同城"),1==o.is_pay_on_delivery&&React.createElement("span",{className:"cash-delivery",style:(0,p.convertLineStyleData)("background:"+a.theme)},"到付"),React.createElement("span",{className:"buyer-name"},o.address_info.name),React.createElement("span",null,o.address_info.contact)),React.createElement("div",{className:"buyer-address"},o.address_info.province.text+o.address_info.city.text+o.address_info.district.text+o.address_info.detailAddress))):3==o.pick_up_type&&React.createElement(React.Fragment,null,React.createElement("div",{className:"buyer-box"},React.createElement("div",{className:"buyer-name-box"},React.createElement("span",{className:"cash-delivery shipping-type",style:(0,p.convertLineStyleData)("background:"+a.theme)},"自提"),1==o.is_pay_on_delivery&&React.createElement("span",{className:"cash-delivery",style:(0,p.convertLineStyleData)("background:"+a.theme)},"到付"),React.createElement("span",{className:"buyer-name"},o.self_delivery_info.contact_name),React.createElement("span",null,o.self_delivery_info.contact_phone)),React.createElement("div",{className:"buyer-address"},o.self_delivery_info.address)),React.createElement("div",{className:"delivery-navigation",style:(0,p.convertLineStyleData)("color:"+a.theme),onClick:this.goDeliveryNavigation},"导航")))),i&&v&&React.createElement("div",{className:"same-city-map"},React.createElement(Map,{latitude:h.latitude,longitude:h.longitude,markers:h.markers,enableRotate:!0,scale:"17"}),r.agent.phone&&React.createElement("div",{className:"rider-box"},React.createElement("div",null,React.createElement("img",{className:"rider-logo",src:"http://develop.zhichiwangluo.com/zhichi_frontend/static/jisuapp_editor/images/rider-ico.png"}),React.createElement("span",{className:"rider-name"},r.agent.name)),React.createElement("div",{className:"rider-contact",onClick:this.callRider},React.createElement("span",null,"联系骑手"),React.createElement("div",{className:"phone-box"},React.createElement("span",{className:"ico-moon icon-takeout-cellphone-left"}))))),React.createElement("div",{className:"app-box"},React.createElement("div",null,React.createElement("img",{className:"app-logo",src:_}),React.createElement("span",{className:"app-name"},y),React.createElement("div",{className:"contact-service pull-right"},React.createElement("span",null,"联系客服"),React.createElement("span",{className:"ico-moon icon-goods-customer-service"}),React.createElement("button",null)))),o&&o.goods_info&&o.goods_info.map(function(e,t){return React.createElement(React.Fragment,{key:!0},1==e.is_seckill&&React.createElement("div",{className:"seckill-time"},React.createElement("div",{className:"countdown",style:(0,p.convertLineStyleData)("color:"+a.theme)},0==e.seckill_start_state?React.createElement("label",null,"距开始"):1==e.seckill_start_state?React.createElement("label",null,"距结束还剩"):2==e.seckill_start_state&&React.createElement("label",null,"已结束"),e.downCount.days&&React.createElement("span",{className:"days"},e.downCount.days+"天"),React.createElement("span",{className:"hours countdown-text",style:(0,p.convertLineStyleData)("background-color:"+a.theme)},e.downCount.hours),":",React.createElement("span",{className:"minutes countdown-text",style:(0,p.convertLineStyleData)("background-color:"+a.theme)},e.downCount.minutes),":",React.createElement("span",{className:"seconds countdown-text",style:(0,p.convertLineStyleData)("background-color:"+a.theme)},e.downCount.seconds))),React.createElement("div",{className:"goods-detail-box"},React.createElement("img",{src:e.cover}),React.createElement("div",null,React.createElement("div",{className:"goods-name"},0!=o.is_group_buy_order&&React.createElement("span",{className:"is-seckill"},"拼团"),1==e.is_presell&&React.createElement("span",{className:"is-seckill"},"预售"),1==e.is_seckill&&React.createElement("span",{className:"is-seckill"},"秒杀"),1==e.is_vip_goods&&React.createElement("span",{className:"is-seckill"},"会员价"),1==e.is_benefit_goods&&React.createElement("span",{className:"is-seckill"},"赠品"),e.goods_name),e.model_value&&React.createElement("div",{className:"goods-rules"},e.model_value),React.createElement("div",{className:"goods-price"},e.use_integral&&0!=e.use_integral?React.createElement(React.Fragment,null,"0.00"!=e.price&&React.createElement("span",{className:"colorff7",style:(0,p.convertLineStyleData)("color:"+a.theme)},"¥"+e.price),e.max_can_use_integral&&"0"!=e.max_can_use_integral&&0!=e.max_can_use_integral&&"0.00"!=e.price&&React.createElement("span",{className:"colorff7",style:(0,p.convertLineStyleData)("color:"+a.theme)},"+"),e.max_can_use_integral&&"0"!=e.max_can_use_integral&&0!=e.max_can_use_integral&&React.createElement("span",{className:"colorff7",style:(0,p.convertLineStyleData)("color:"+a.theme)},e.max_can_use_integral+"积分")):React.createElement(React.Fragment,null,React.createElement("span",{className:"colorff7",style:(0,p.convertLineStyleData)("color:"+a.theme)},"¥"+e.price)),React.createElement("span",{className:"pull-right"},"x "+e.num)))))}),4==o.status&&o.refund_apply.id&&React.createElement("div",{className:"refunding-btn-box"},React.createElement("span",{className:"refunding-btn",onClick:this.toGoodsAfterSaleDetail},"退款中")),React.createElement("div",{className:"goods-amount"},React.createElement("span",null,"商品金额"),React.createElement("span",{className:"pull-right color999"},"¥"+(1==o.is_vip_order?o.total_original_price:o.original_price))),1==o.has_seckill&&React.createElement("div",{className:"spike-offer"},React.createElement("span",null,"活动优惠"),React.createElement("span",{className:"pull-right color999"},"秒杀  - ¥"+o.seckill_cut_price)),o.selected_benefit_info&&React.createElement("div",{className:"promotion-method"},React.createElement("div",null,React.createElement("span",null,"优惠方式"),React.createElement("span",{className:"pull-right promotion-method-title color999"},o.selected_benefit_info.title||"无")),React.createElement("div",{className:"pull-right color999"},"- ¥"+E)),o&&o.extra_selected_benefit_info&&o.extra_selected_benefit_info.title&&React.createElement("div",{className:"promotion-method"},React.createElement("div",null,React.createElement("span",null,"联盟优惠"),React.createElement("span",{className:"pull-right promotion-method-title color999"},o.extra_selected_benefit_info.title||"无")),React.createElement("div",{className:"pull-right color999"},"- ¥"+o.extra_discount_cut_price)),1==o.is_vip_order&&"0.00"!=o.vip_cut_price&&React.createElement("div",{className:"promotion-method"},React.createElement("span",null,"会员价优惠"),React.createElement("span",{className:"pull-right promotion-method-title color999"},"- ¥"+o.vip_cut_price)),b>0&&(2==g||4==g)&&React.createElement("div",{className:"freight box-fee"},React.createElement("span",null,"包装费"),React.createElement("span",{className:"pull-right color999"},"￥ "+b)),React.createElement("div",{className:"freight"},React.createElement("span",null,2==o.pick_up_type?"配送费":"运费"),React.createElement("span",{className:"pull-right color999"},"¥"+N)),React.createElement("div",{className:"total-order-price"},React.createElement("span",null,"订单总价"),React.createElement("span",{className:"pull-right color999"},"¥"+o.order_total_price)),R>0&&React.createElement("div",{className:"stored-value-deduction"},React.createElement("span",null,"储值抵扣"),React.createElement("span",{className:"pull-right color999"},"- ¥"+R)),o.coupon_fee&&React.createElement("div",null,"社交立减金",React.createElement("span",{className:"pull-right"},"- ¥"+o.coupon_fee)),React.createElement("div",{className:"actual-payment"},React.createElement("div",null,React.createElement("span",null,"实际付款"),React.createElement("span",{className:"pull-right colorff7",style:(0,p.convertLineStyleData)("color:"+a.theme)},"¥"+o.total_price))),o.remark&&React.createElement("div",{className:"buyer-message"},React.createElement("span",null,"买家留言"),React.createElement("span",{className:"pull-right"},o.remark)),k&&React.createElement("div",{className:"addition-info",onClick:this.seeAdditionalInfo},React.createElement("div",null,React.createElement("span",null,"补充信息"),React.createElement("span",{className:"pull-right colord2d2 ico-moon icon-rightarrow"}))),React.createElement("div",{className:"addition-info no-border",onClick:this.goOrderProgress},React.createElement("div",null,React.createElement("span",null,"订单进度"),React.createElement("span",{className:"pull-right colord2d2 ico-moon icon-rightarrow"}))),w&&React.createElement("div",{className:"addition-info no-border already-refund-goods",onClick:this.goAlreadyGoodsPage},React.createElement("div",null,React.createElement("span",null,"已退商品"),React.createElement("span",{className:"pull-right colord2d2 ico-moon icon-rightarrow"}))),React.createElement("div",{className:"order-number"},3==o.pick_up_type?React.createElement("div",null,React.createElement("span",{style:(0,p.convertLineStyleData)("margin-right:54rpx;")},"流水号"),React.createElement("span",null,o.ecommerce_info.ec_tostore_data.formatted_queue_num)):2==o.pick_up_type&&React.createElement("div",null,React.createElement("span",{style:(0,p.convertLineStyleData)("margin-right:80rpx;")},"编号"),React.createElement("span",null,o.ecommerce_info.intra_city_data.serial_number)),React.createElement("div",null,React.createElement("span",null,"订单编号"),React.createElement("span",null,o.order_id),React.createElement("span",{className:"pull-right",onClick:this.copyOrderId},"复制")),React.createElement("div",null,React.createElement("span",null,"下单时间"),React.createElement("span",null,o.add_time)),2==o.pick_up_type&&React.createElement("div",null,React.createElement("div",null,React.createElement("span",null,"预定时间"),React.createElement("span",null,o.ecommerce_info.intra_city_data.intra_city_appointment_arrive_time)),o.wx_local_express_order&&o.wx_local_express_order.add_resp.pickup_code&&React.createElement("div",null,React.createElement("span",{style:(0,p.convertLineStyleData)("display:inline-block;width:96rpx")},"取货码"),React.createElement("span",null,o.wx_local_express_order.add_resp.pickup_code))),3==o.pick_up_type&&React.createElement(React.Fragment,null,o.ecommerce_info.ec_tostore_data.ec_tostore_appointment_time&&React.createElement("div",null,React.createElement("span",null,"预约时间"),React.createElement("span",null,o.ecommerce_info.ec_tostore_data.ec_tostore_appointment_time)),o.ecommerce_info.ec_tostore_data.ec_tostore_location_name&&React.createElement("div",null,React.createElement("span",null,"店内位置"),React.createElement("span",null,o.ecommerce_info.ec_tostore_data.ec_tostore_location_name)),o.ecommerce_info.ec_tostore_data.ec_tostore_buyer_phone&&React.createElement("div",null,React.createElement("span",null,"手机号码"),React.createElement("span",null,o.ecommerce_info.ec_tostore_data.ec_tostore_buyer_phone)))),React.createElement("div",{className:"order-bottom"},0==o.status&&React.createElement(React.Fragment,null,React.createElement("span",{className:"apply-refund",onClick:this.showEventDialog,"data-type":"cancelOrder"},"取消订单"),React.createElement("span",{className:"btn btn-orange orderDetail-pay-directly",style:(0,p.convertLineStyleData)("color:"+a.theme+";border-color:"+a.theme),onClick:this.payOrder},"立即支付")),1==o.status&&React.createElement(React.Fragment,null,React.createElement("span",{className:"btn btn-orange",style:(0,p.convertLineStyleData)("color:"+a.theme+";border-color:"+a.theme),onClick:this.getWriteOffCodeBox},"核销码"),x>1&&5!=x&&1e3!=x&&React.createElement("span",{className:"btn",onClick:this.checkLogistics},"配送信息"),1==o.is_pay_on_delivery?React.createElement("span",{className:"apply-refund",onClick:this.showEventDialog,"data-type":"deliveryDrawback"},"取消订单"):(0!=o.is_group_buy_order&&1==o.can_refund_order||0==o.is_group_buy_order)&&1==C&&React.createElement("span",{className:"apply-refund",onClick:this.applyDrawback},"申请退款")),2==o.status&&React.createElement(React.Fragment,null,3!=o.pick_up_type&&React.createElement("span",{className:"btn",onClick:this.checkLogistics},"配送信息"),1==o.is_pay_on_delivery?React.createElement("span",{className:"apply-refund",onClick:this.showEventDialog,"data-type":"deliveryDrawback"},"取消订单"):(0!=o.is_group_buy_order&&1==o.can_refund_order||0==o.is_group_buy_order)&&1==C&&React.createElement("span",{className:"apply-refund",onClick:this.applyDrawback},"申请退款"),React.createElement("span",{className:"btn btn-orange",style:(0,p.convertLineStyleData)("color:"+a.theme+";border-color:"+a.theme),onClick:this.getWriteOffCodeBox},"核销码"),React.createElement("span",{className:"btn btn-orange",style:(0,p.convertLineStyleData)("color:"+a.theme+";border-color:"+a.theme),onClick:this.showEventDialog,"data-type":"sureReceipt"},"确认收货")),3==o.status&&React.createElement(React.Fragment,null,React.createElement("span",{className:"apply-refund",onClick:this.showEventDialog,"data-type":"orderDelete"},"删除订单"),React.createElement("span",{className:"btn btn-orange",style:(0,p.convertLineStyleData)("color:"+a.theme+";border-color:"+a.theme),onClick:this.getWriteOffCodeBox},"核销码"),React.createElement("span",{className:"btn btn-orange",style:(0,p.convertLineStyleData)("color:"+a.theme+";border-color:"+a.theme),onClick:this.makeComment},"去评价")),4==o.status&&React.createElement(React.Fragment,null,React.createElement("span",{className:"btn",onClick:this.cancelRefund},3==o.refund_apply.status||4==o.refund_apply.status?"撤销退货":"撤销申请"),1!=o.is_pay_on_delivery&&React.createElement("span",{className:"btn",onClick:this.editorRefund},"修改申请"),3==o.refund_apply.status&&React.createElement("span",{className:"btn btn-orange",style:(0,p.convertLineStyleData)("color:"+a.theme+";border-color:"+a.theme),onClick:this.returnInfor},"填写退货信息")),5==o.status&&React.createElement(React.Fragment,null,React.createElement("span",{className:"btn",onClick:this.showEventDialog,"data-type":"receiveDrawback"},"收到退款")),6==o.status&&React.createElement(React.Fragment,null,React.createElement("span",{className:"apply-refund",onClick:this.showEventDialog,"data-type":"orderDelete"},"删除订单")),7==o.status&&React.createElement(React.Fragment,null,React.createElement("span",{className:"apply-refund",onClick:this.showEventDialog,"data-type":"orderDelete"},"删除订单")),8==o.status&&React.createElement(React.Fragment,null,React.createElement("span",{className:"apply-refund",onClick:this.showEventDialog,"data-type":"cancelOrder"},"取消订单")))),M&&React.createElement("div",{className:"verification-code",onClick:this.hideWriteOffCodeBox},React.createElement("div",{className:"verification-code-tips"},"向商家出示二维码或核销码后即可消费"),React.createElement("div",{className:"verification-image-box"},React.createElement("img",{className:"verification-code-img",src:D}),1==S&&React.createElement("div",{className:"verification-code-finished"},React.createElement("div",null,"已核销"))),React.createElement("div",{className:"verification-code-text"},React.createElement("span",null,"核销码："),React.createElement("span",null,I))),P&&React.createElement("div",{className:"event-dialog-mask"},React.createElement("div",{className:"event-dialog"},"cancelOrder"==T&&React.createElement("div",{className:"event-dialog-title"},"确认取消订单？"),"orderDelete"==T&&React.createElement("div",{className:"event-dialog-title"},"订单删除后不可找回，确认删除？"),"receiveDrawback"==T&&React.createElement("div",{className:"event-dialog-title"},"确定已收到退款？"),"sureReceipt"==T&&React.createElement("div",{className:"event-dialog-title"},"确认收货代表您已经拿到货物，确认后将无法撤销！建议与商家联系后再操作"),"deliveryDrawback"==T&&React.createElement("div",{className:"event-dialog-title"},"确认取消订单？"),React.createElement("div",{className:"event-dialog-bottom"},React.createElement("span",{className:"event-cancel",onClick:this.hideEventDialog},"取消"),"cancelOrder"==T&&React.createElement("span",{style:(0,p.convertLineStyleData)("color:"+a.theme),className:"event-sure",onClick:this.cancelOrder},"确认"),"orderDelete"==T&&React.createElement("span",{style:(0,p.convertLineStyleData)("color:"+a.theme),className:"event-sure",onClick:this.orderDelete},"确认"),"receiveDrawback"==T&&React.createElement("span",{style:(0,p.convertLineStyleData)("color:"+a.theme),className:"event-sure",onClick:this.receiveDrawback},"确认"),"sureReceipt"==T&&React.createElement("span",{style:(0,p.convertLineStyleData)("color:"+a.theme),className:"event-sure",onClick:this.sureReceipt},"确认"),"deliveryDrawback"==T&&React.createElement("span",{style:(0,p.convertLineStyleData)("color:"+a.theme),className:"event-sure",onClick:this.deliveryDrawback},"确认")))))}}]),t}(g.default);t.default=h},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(0),i=n(o),s=a(3),r=n(s),c=a(1),l=n(c),d=a(2),u=n(d),m=a(5),p=a(6),f=a(11),g=a(7),h=n(g);a(362);var v=function(e){function t(e){(0,i.default)(this,t);var a=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={selectAddressId:"",orderId:"",addressList:[],afterInitial:!1,isFromBack:!1,from:"",fromAddAdress:!1,showNewAddressDialog:!0,address_id:"",changeLocal:0,localAddress:"",selectProCityDirs:!0,storeStyle:{}},a.subShopId="",a.getAddressList=function(e,t,n){var o=a,i=m.appMethod.globalData.takeoutShopInfo,s=[],r=!0;m.appMethod.sendRequest({url:"/index.php?r=AppShop/addressList",success:function(a){for(var c=a.data,l=0,d=c.length-1;l<=d;l++){"previewtakeout"==n&&(c[l].is_distance=m.appMethod.calculationDistanceByLatLng(i.latitude,i.longitude,c[l].latitude,c[l].longitude)<i.deliver_distance?1:0),0==c[l].is_distance&&(r=!1);var u=c[l].address_info,p=[u.province&&u.province.text||"",u.city&&u.city.text||"",u.district&&u.district.text||""],f="";1!=+u.country.id&&(p[1]!==p[2]&&""!==p[2]||p.pop(),f=" "),p.push(u.detailAddress||""),u.addressString=p.join(f),s.push(c[l])}e||t||n?o.setData({addressList:s,selectAddressId:e||"",orderId:t||"",from:n,hasInDistance:r}):o.setData({addressList:s,hasInDistance:r})}})},a.addNewAddress=function(){m.appMethod.turnToPage("/addAddress")},a.addWechatAddress=function(){var e=a;m.appMethod.chooseAddress({success:function(t){m.appMethod.sendRequest({method:"post",url:"/index.php?r=AppShop/AddWxAddress",data:{detailInfo:t.detailInfo||"",cityName:t.cityName||"",provinceName:t.provinceName||"",UserName:t.userName||"",telNumber:t.telNumber||"",district:t.district||"",countyName:t.countyName||""},success:function(){e.getAddressList(void 0,void 0,e.data.from)}})}})},a.selectAddress=function(e){var t=e.currentTarget.dataset.id,n=m.appMethod.getCurrentPages(),o=n[n.length-2],i=a.data.addressList;a.setData({selectAddressId:t||""});for(var s=i.length-1;s>=0;s--)i[s].id==t&&(o.setData({selectAddress:i[s],selectAddressId:i[s].id}),"function"==typeof o.selectAddressCallback&&o.selectAddressCallback(i[s]));m.appMethod.turnBack()},a.editAddress=function(e){var t=e.currentTarget.dataset,a=t.id,n=t.countryId;m.appMethod.turnToPage("/addAddress?id="+a+"&countryId="+n)},a.getAppECStoreConfig=function(){m.appMethod.getAppECStoreConfig(function(e){a.setData({storeStyle:e.color_config})},a.subShopId)},document.title="我的地址",a}return(0,u.default)(t,e),(0,r.default)(t,[{key:"componentWillMount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,p.getCurrentPageQueryParams)(),t=e.id||"",a=e.oid||"",n=e.preTakeout||"",o=e.locateAddress||"",i=m.appMethod.globalData.takeoutAddressInfoByLatLng||"",s=e.from||"";this.syncUserAddress=e.syncUserAddress||"",this.locateAddress=o,this.setData({orderId:a,preTakeout:n,localAddress:o,localLatLng:i,from:s}),this.selectAddressId=t,this.from=s,this.subShopId=e.sub_shop_id||"",this.getAppECStoreConfig(),this.getAddressList(t,a,s)}},{key:"componentDidMount",value:function(){this.data.isFromBack?this.getAddressList(this.selectAddressId,this.data.orderId,this.from):this.setData({isFromBack:!0})}},{key:"render",value:function(){var e=this,t=this.state,a=(t.showGetUserInfo,t.addressList),n=t.from,o=t.hasInDistance,i=t.storeStyle;return React.createElement("div",{className:"official-page my-address"},React.createElement(f.ScrollView,{"scroll-y":"true",style:(0,p.convertLineStyleData)("height: calc(100% - 55px);")},React.createElement("div",{className:"myAddress-wrap page",id:"myAddress",style:(0,p.convertLineStyleData)("height: 100%;")},React.createElement("div",{className:"get-wechat-address",onClick:this.addWechatAddress},React.createElement("img",{src:"http://cdn.jisuapp.cn/zhichi_frontend/static/webapp/images/goods-style-wechat.png"}),React.createElement("span",null,"获取微信收货地址"),React.createElement("span",{className:"ico-moon icon-rightarrow"})),React.createElement("div",{className:"myAddress-content-container"},a.length?React.createElement(React.Fragment,null,a.map(function(t,a){return React.createElement(React.Fragment,{key:a},("previewtakeout"==n&&1==t.is_distance||"previewtakeout"!=n)&&React.createElement("div",{className:"myAddress-address"},React.createElement("div",{className:"myAddress-address-top","data-info":t,onClick:"userCenterEle"==n?null:e.selectAddress,"data-id":t.id},React.createElement("div",null,0==t.address_info.label&&React.createElement("label",{className:"home address-label"},"家"),2==t.address_info.label&&React.createElement("label",{className:"company address-label"},"公司"),1==t.address_info.label&&React.createElement("label",{className:"school address-label"},"学校"),React.createElement("span",{className:"address-person"},t.address_info.name+" "+(1==t.address_info.sex?"(先生)":0==t.address_info.sex?"(女士)":"")+" "+t.address_info.contact)),React.createElement("span",{className:"address-detail"},t.address_info.addressString)),React.createElement("span",{className:"myAddress-edit ico-moon icon-community-edit",onClick:e.editAddress,"data-id":t.id,"data-country-id":t.address_info.country.id})))}),"previewtakeout"==n&&!o&&React.createElement(React.Fragment,null,React.createElement("div",{className:"address-list-title"},"以下地址不在配送范围"),a.map(function(e,t){return React.createElement(React.Fragment,{key:t},("previewtakeout"==n&&1!=e.is_distance||"previewtakeout"!=n)&&React.createElement("div",{className:"myAddress-address",style:(0,p.convertLineStyleData)("background-color: #fdfdfd;")},React.createElement("div",{className:"myAddress-address-top"},React.createElement("div",null,React.createElement("span",{className:"address-detail",style:(0,p.convertLineStyleData)("color: #999;width:auto;")},e.address_info.province.text+e.address_info.city.text+e.address_info.district.text+e.address_info.detailAddress)),React.createElement("span",{className:"address-person",style:(0,p.convertLineStyleData)("color: #999;")},e.address_info.name+" "+(1==e.address_info.sex?"(先生)":0==e.address_info.sex?"(女士)":"")+" "+e.address_info.contact))))}))):React.createElement(React.Fragment,null,React.createElement("div",{style:(0,p.convertLineStyleData)("color:#a8a8a8; padding:20px;")},"暂无收货地址"))))),React.createElement("div",{className:"myAddress-bottom-nav",style:(0,p.convertLineStyleData)("background:"+i.theme),onClick:this.addNewAddress},"新增收货地址"))}}]),t}(h.default);t.default=v},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(0),i=n(o),s=a(3),r=n(s),c=a(1),l=n(c),d=a(2),u=n(d),m=a(5),p=a(6),f=a(7),g=n(f);a(364);var h=function(e){function t(e){(0,i.default)(this,t);var a=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={orderFlowData:[]},a.orderId="",a.getOrderFlow=function(){var e=a;m.appMethod.sendRequest({url:"/index.php?r=appShop/getOrderFlow",data:{order_id:e.orderId},success:function(t){var a=t.data.reverse();e.setData({orderFlowData:a})}})},document.title="订单进度",a}return(0,u.default)(t,e),(0,r.default)(t,[{key:"componentWillMount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,p.getCurrentPageQueryParams)();this.orderId=e.orderId,this.getOrderFlow()}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.state,t=(e.showGetUserInfo,e.orderFlowData);return React.createElement("div",{className:"official-page goods-order-progress"},React.createElement("div",{className:"progress-contain"},React.createElement("div",{className:"progress-header"},React.createElement("div",null,"买家操作"),React.createElement("div",null,"卖家操作")),React.createElement("div",{className:"progress-content"},t.map(function(e,t){return React.createElement("div",{className:"content-box",key:e.id},React.createElement("div",{className:"progress-left"},!!e.is_custom&&React.createElement(React.Fragment,null,React.createElement("span",null,e.content.msg),React.createElement("span",{className:"progress-time"},e.op_time))),React.createElement("div",{className:"progress-center"}),React.createElement("div",{className:"progress-right"},!e.is_custom&&React.createElement(React.Fragment,null,React.createElement("span",null,e.content.msg),React.createElement("span",{className:"progress-time"},e.op_time))))}))))}}]),t}(g.default);t.default=h},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(0),i=n(o),s=a(3),r=n(s),c=a(1),l=n(c),d=a(2),u=n(d),m=a(5),p=a(6),f=a(7),g=n(f);a(366);var h=function(e){function t(e){(0,i.default)(this,t);var a=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={info:{},logistics:[]},a.orderId="",a.applyId="",a.franchiseeId="",a.isGroup=0,a.getExpressFlow=function(){var e=a,t={order_id:e.orderId,sub_shop_app_id:e.franchiseeId},n="/index.php?r=AppShop/expressFlow";a.isGroup&&(n="/index.php?r=AppDistributionExt/GetGroupExpressFlow",t={app_id:e.franchiseeId,group_order_id:e.orderId}),m.appMethod.sendRequest({url:n,data:t,success:function(t){var a=t.data;if(a)if(a.is_custom){var n=a.express_description.replace(/]/g,"["),o=n.split("[");e.setData({info:a,desArr:o})}else{var i=a.Traces;a.waybill_id&&(a.path_item_list.map(function(e){e.AcceptTime=e.action_time,e.AcceptStation=e.action_msg}),i=a.path_item_list),e.setData({info:a,logistics:i})}}})},a.getRefundExpress=function(){var e=a;m.appMethod.sendRequest({url:"/index.php?r=appShop/getRefundExpress",data:{apply_id:e.applyId,sub_shop_app_id:e.franchiseeId},success:function(t){e.setData({info:t.data,logistics:t.data.Traces.reverse()})}})},a.dialNumber=function(e){m.appMethod.makePhoneCall(e.currentTarget.dataset.phone)},document.title="物流信息",a}return(0,u.default)(t,e),(0,r.default)(t,[{key:"componentWillMount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,p.getCurrentPageQueryParams)(),t=e.form;this.orderId=e.detail,this.applyId=e.applyId,this.franchiseeId=e.franchiseeId||"",this.isGroup=e.isGroup||0,"afterSale"==t?this.getRefundExpress():this.getExpressFlow()}},{key:"render",value:function(){var e=this.state,t=(e.showGetUserInfo,e.info),a=e.desArr,n=e.logistics;return React.createElement("div",{className:"official-page logistics-page"},React.createElement("div",{id:"logisticsPage"},React.createElement("div",{className:"logistics-header"},React.createElement("div",{className:"logistics-company"},"承运公司：",React.createElement("span",null,t.express_name||t.delivery_name)),React.createElement("div",null,"运单编号：",React.createElement("span",null,t.LogisticCode||t.express_no||t.waybill_id))),t.is_custom&&a.length||!t.is_custom&&n.length?React.createElement("div",{className:"logistics-container"},t.is_custom?React.createElement(React.Fragment,null,a.map(function(e,t){return React.createElement("span",{key:t,className:"self-express "+(t%2==1?"express-phone":""),onClick:t%2==1?"dialNumber":"","data-phone":e},t%2==1?"["+e+"]":e)})):React.createElement(React.Fragment,null,React.createElement("div",{className:"logistics-list"},n.map(function(e,t){return React.createElement("div",{key:t,className:"logistics-item"},React.createElement("div",{className:"logistics-location"},e.AcceptStation),React.createElement("div",{className:"logistics-time"},e.AcceptTime))})))):React.createElement("div",{className:"no-logistics"},React.createElement("img",{src:"http://cdn.jisuapp.cn/static/webapp/images/xcx-goods/no-logistics.png"}),React.createElement("div",null,"暂无物流信息"))))}}]),t}(g.default);t.default=h},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(9),i=n(o),s=a(0),r=n(s),c=a(3),l=n(c),d=a(1),u=n(d),m=a(2),p=n(m),f=a(5),g=a(6),h=a(7),v=n(h);a(368);var _=function(e){function t(e){(0,r.default)(this,t);var a=(0,u.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={goodsInfo:[],submitData:{order_id:"",goods:[],score:5,appointment_score:5,logistics_score:5,appointment_worker_score:5},goodsType:""},a.workName=[],a.getOrderDetail=function(){var e=a;f.appMethod.getOrderDetail({data:{order_id:e.data.submitData.order_id,sub_shop_app_id:a.data.submitData.sub_shop_app_id},success:function(t){var a=t.data[0].form_data.goods_type,n=t.data[0].form_data.goods_info,o=t.data[0].form_data.pick_up_type,i=[],s=t.data[0].form_data.service;s&&"10"==a&&s.spu&&s.spu.length>0&&s.spu.map(function(t,a){e.workName.push(t.worker_name)});for(var r=0,c=n.length-1;r<=c;r++)i.push({goods_id:n[r].goods_id,info:{content:"",level:1,img_arr:[]}}),4==o&&n[r].refunded_num>=n[r].num&&n.splice(r,1);e.setData({pick_up_type:o,goodsInfo:n,"submitData.goods":i,goodsType:a})}})},a.setDescScore=function(e){var t=e.target.dataset.score;a.setData({"submitData.score":t,"submitData.appointment_score":t})},a.setWorkerScore=function(e){var t=e.target.dataset.score;a.setData({"submitData.appointment_worker_score":t})},a.setLogisticsScore=function(e){var t=e.target.dataset.score;a.setData({"submitData.logistics_score":t})},a.clickLevelSpan=function(e){var t=e.currentTarget.dataset.goodsIndex,n=e.currentTarget.dataset.level,o={};o["submitData.goods["+t+"].info.level"]=n,a.setData(o)},a.commentInput=function(e){var t=e.target.dataset.goodsIndex,n={};n["submitData.goods["+t+"].info.content"]=e.target.value,a.setData(n)},a.chooseImage=function(e){var t=a,n=e.currentTarget.dataset.goodsIndex,o=t.data.submitData.goods[n].info.img_arr;f.appMethod.chooseImage(function(e){var a={};a["submitData.goods["+n+"].info.img_arr"]=o.concat(e),t.setData(a)},3-o.length)},a.removePic=function(e){var t=e.currentTarget.dataset.goodsIndex,n=e.currentTarget.dataset.picIndex,o=a.data.submitData.goods[t].info.img_arr,i={};o.splice(n,1),i["submitData.goods["+t+"].info.img_arr"]=o,a.setData(i)},a.makeComment=function(){var e=a,t=e.data.submitData,n="";e.workName.length&&(t.appointment_worker_info={},t.appointment_worker_info.worker_name=e.workName);for(var o=t.goods.length-1;o>=0;o--){var i=t.goods[o];if(!i.info.level){n="尚未给商品评分";break}if(i.info.img_arr.length>3){n="每个商品最多上传3张图片";break}}if(n)return void f.appMethod.showModal({content:n});var s=Date.now();f.appMethod.sendRequest({url:"/index.php?r=AppShop/AddAssessList",method:"post",data:t,success:function(t){f.appMethod.sendRequest({hideLoading:!0,url:"/index.php?r=appShop/getIntegralLog",data:{add_time:s},success:function(t){0==t.data?f.appMethod.showModal({content:"评论成功",confirm:function(){f.appMethod.turnToPage("/eCommerce/pages/transactionSuccess/transactionSuccess?pageFrom=comment&orderId="+e.data.submitData.order_id+"&franchiseeId="+e.data.submitData.sub_shop_app_id,1)}}):e.setData({rewardPointObj:{showModal:!0,count:t.data,callback:function(){f.appMethod.turnToPage("/eCommerce/pages/transactionSuccess/transactionSuccess?pageFrom=comment&orderId="+e.data.submitData.order_id+"&franchiseeId="+e.data.submitData.sub_shop_app_id,1)}}})}})}})},a.getAppECStoreConfig=function(){f.appMethod.getAppECStoreConfig(function(e){a.setData({storeStyle:e.color_config})},a.data.submitData.sub_shop_app_id)},document.title="评价",a}return(0,p.default)(t,e),(0,l.default)(t,[{key:"componentWillMount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,g.getCurrentPageQueryParams)();this.setData({"submitData.order_id":e.detail,"submitData.sub_shop_app_id":e.franchisee||""}),this.getOrderDetail(),this.getAppECStoreConfig()}},{key:"render",value:function(){var e=this,t=this.state,a=(t.rewardPointObj,t.shareGiftsObj,t.collectGiftsObj,t.collectGetObj,t.showGetUserInfo,t.goodsInfo),n=t.submitData,o=t.storeStyle,s=t.goodsType,r=t.pick_up_type;return React.createElement("div",{className:"official-page make-comment"},React.createElement("div",{className:"makeCom-wrap",id:"makeComment"},a.map(function(t,a){return React.createElement("div",(0,i.default)({className:"makeCom-item makeCom-goods-comment",key:!0},"key",!0),React.createElement("div",null,React.createElement("img",{className:"makeCom-goods-cover",src:t.cover}),React.createElement("div",{className:"make-header-right"},React.createElement("div",{className:"goods-name"},t.goods_name),React.createElement("div",{className:"makeCom-level-container"},React.createElement("label",{style:(0,g.convertLineStyleData)(1==n.goods[a].info.level?"color:"+o.theme:""),className:"makeCom-level-span "+(1==n.goods[a].info.level?"active":""),"data-level":"1","data-goods-index":a,onClick:e.clickLevelSpan},React.createElement("label",{className:"ico-moon icon-tostoreGoodComment"}),"好评"),React.createElement("label",{style:(0,g.convertLineStyleData)(2==n.goods[a].info.level?"color:"+o.theme:""),className:"makeCom-level-span "+(2==n.goods[a].info.level?"active":""),"data-level":"2","data-goods-index":a,onClick:e.clickLevelSpan},React.createElement("label",{className:"ico-moon icon-tostoreMiddleComment"}),"中评"),React.createElement("label",{style:(0,g.convertLineStyleData)(3==n.goods[a].info.level?"color:"+o.theme:""),className:"makeCom-level-span "+(3==n.goods[a].info.level?"active":""),"data-level":"3","data-goods-index":a,onClick:e.clickLevelSpan},React.createElement("label",{className:"ico-moon icon-tostoreBadComment"}),"差评")))),React.createElement("textarea",{"data-goods-index":a,onInput:e.commentInput,className:"makeCom-textarea",placeholder:"评价商品给小伙伴们参考，建议10字以上"}),React.createElement("div",{className:"makeCom-pic-container"},n.goods[a].info.img_arr.map(function(t,n){return React.createElement("div",(0,i.default)({key:!0,className:"makeCom-pic-wrap"},"key",!0),React.createElement("img",{src:t,mode:"aspectFit"}),React.createElement("label",{className:"makeCom-remove-pic ico-moon icon-closes",onClick:e.removePic,"data-goods-index":a,"data-pic-index":n}))}),n.goods[a].info.img_arr.length<3&&React.createElement("div",{className:"makeCom-upload-pic",onClick:e.chooseImage,"data-goods-index":a},React.createElement("div",{className:"ico-moon icon-goods-add-image"}),React.createElement("span",null,"添加图片"))))}),React.createElement("div",{className:"makeCom-item",style:(0,g.convertLineStyleData)("margin-top: 15rpx;")},React.createElement("div",{className:"shop-title"},React.createElement("span",{className:"ico-moon icon-store2"}),React.createElement("span",null,"店铺评分")),React.createElement("div",{className:"evaluat-box"},React.createElement("span",{className:"evaluat-title"},"描述相符："),React.createElement("div",{className:"makeCom-mark-container pull-right"},React.createElement("label",{style:(0,g.convertLineStyleData)(n.score>=1?"color:"+o.theme:""),className:"ico-moon icon-star"+(n.score>=1?"":"-empty"),"data-score":"1",onClick:this.setDescScore}),React.createElement("label",{style:(0,g.convertLineStyleData)(n.score>=2?"color:"+o.theme:""),className:"ico-moon icon-star"+(n.score>=2?"":"-empty"),"data-score":"2",onClick:this.setDescScore}),React.createElement("label",{style:(0,g.convertLineStyleData)(n.score>=3?"color:"+o.theme:""),className:"ico-moon icon-star"+(n.score>=3?"":"-empty"),"data-score":"3",onClick:this.setDescScore}),React.createElement("label",{style:(0,g.convertLineStyleData)(n.score>=4?"color:"+o.theme:""),className:"ico-moon icon-star"+(n.score>=4?"":"-empty"),"data-score":"4",onClick:this.setDescScore}),React.createElement("label",{style:(0,g.convertLineStyleData)(n.score>=5?"color:"+o.theme:""),className:"ico-moon icon-star"+(n.score>=5?"":"-empty"),"data-score":"5",onClick:this.setDescScore}))),"10"==s&&React.createElement("div",{className:"evaluat-box"},React.createElement("span",{className:"evaluat-title"},"服务质量："),React.createElement("div",{className:"makeCom-mark-container pull-right"},React.createElement("label",{style:(0,g.convertLineStyleData)(n.appointment_worker_score>=1?"color:"+o.theme:""),className:"ico-moon icon-star"+(n.appointment_worker_score>=1?"":"-empty"),"data-score":"1",onClick:this.setWorkerScore}),React.createElement("label",{style:(0,g.convertLineStyleData)(n.appointment_worker_score>=2?"color:"+o.theme:""),className:"ico-moon icon-star"+(n.appointment_worker_score>=2?"":"-empty"),"data-score":"2",onClick:this.setWorkerScore}),React.createElement("label",{style:(0,g.convertLineStyleData)(n.appointment_worker_score>=3?"color:"+o.theme:""),className:"ico-moon icon-star"+(n.appointment_worker_score>=3?"":"-empty"),"data-score":"3",onClick:this.setWorkerScore}),React.createElement("label",{style:(0,g.convertLineStyleData)(n.appointment_worker_score>=4?"color:"+o.theme:""),className:"ico-moon icon-star"+(n.appointment_worker_score>=4?"":"-empty"),"data-score":"4",onClick:this.setWorkerScore}),React.createElement("label",{style:(0,g.convertLineStyleData)(n.appointment_worker_score>=5?"color:"+o.theme:""),className:"ico-moon icon-star"+(n.appointment_worker_score>=5?"":"-empty"),"data-score":"5",onClick:this.setWorkerScore}))),"1"!=s&&"10"!=s&&4!=r&&React.createElement("div",{className:"evaluat-box"},React.createElement("span",{className:"evaluat-title"},"物流服务："),React.createElement("div",{className:"makeCom-mark-container  pull-right"},React.createElement("label",{style:(0,g.convertLineStyleData)(n.logistics_score>=1?"color:"+o.theme:""),className:"ico-moon icon-star"+(n.logistics_score>=1?"":"-empty"),"data-score":"1",onClick:this.setLogisticsScore}),React.createElement("label",{style:(0,g.convertLineStyleData)(n.logistics_score>=2?"color:"+o.theme:""),className:"ico-moon icon-star"+(n.logistics_score>=2?"":"-empty"),"data-score":"2",onClick:this.setLogisticsScore}),React.createElement("label",{style:(0,g.convertLineStyleData)(n.logistics_score>=3?"color:"+o.theme:""),className:"ico-moon icon-star"+(n.logistics_score>=3?"":"-empty"),"data-score":"3",onClick:this.setLogisticsScore}),React.createElement("label",{style:(0,g.convertLineStyleData)(n.logistics_score>=4?"color:"+o.theme:""),className:"ico-moon icon-star"+(n.logistics_score>=4?"":"-empty"),"data-score":"4",onClick:this.setLogisticsScore}),React.createElement("label",{style:(0,g.convertLineStyleData)(n.logistics_score>=5?"color:"+o.theme:""),className:"ico-moon icon-star"+(n.logistics_score>=5?"":"-empty"),"data-score":"5",onClick:this.setLogisticsScore})))),React.createElement("div",{className:"submit-comment",style:(0,g.convertLineStyleData)("background:"+o.theme),onClick:this.makeComment},"发表评价")))}}]),t}(v.default);t.default=_},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(0),i=n(o),s=a(3),r=n(s),c=a(1),l=n(c),d=a(2),u=n(d),m=a(5),p=a(6),f=a(7),g=n(f);a(370);var h=function(e){function t(e){(0,i.default)(this,t);var a=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={goodsList:[],selectAll:!0,is_vip_goods:"",dining_partner_source:0,storeStyle:{}},a.orderId="",a.franchiseeId="",a.getOrderDetail=function(){var e=a;m.appMethod.getOrderDetail({data:{order_id:e.orderId,sub_shop_app_id:e.franchiseeId},success:function(t){for(var a=t.data[0].form_data.goods_info,n=0==t.data[0].vip_cut_price?0:1,o=0;o<a.length;o++)a[o].preview_refund_num=a[o].num-(a[o].refunded_num||"0"),a[o].preview_refund_num>0&&1!=a[o].is_benefit_goods&&(a[o].selected=!0),a[o].model_value_str=a[o].model_value?a[o].model_value.join("； "):"";e.setData({is_vip_goods:n,goodsList:a,is_group_buy_order:t.data[0].form_data.is_group_buy_order||0,dining_partner_source:t.data[0].form_data.dining_partner_source||0})}})},a.clickSelectAll=function(){if(!a.data.dining_partner_source){var e=a.data.selectAll,t=a.data.goodsList;if(e)for(var n=t.length-1;n>=0;n--)t[n].selected=!1;else for(var n=t.length-1;n>=0;n--)t[n].selected=!0;a.setData({selectAll:!e,goodsList:t})}},a.clickSelectGoods=function(e){if(!a.data.dining_partner_source){var t=e.currentTarget.dataset.index,n=a.data.goodsList,o=!0;n[t].selected=!n[t].selected;for(var i=n.length-1;i>=0;i--)if(!n[i].selected){o=!1;break}a.setData({goodsList:n,selectAll:o})}},a.sureRefund=function(){for(var e=a.orderId,t=a.franchiseeId,n="/eCommerce/pages/goodsRefundPage/goodsRefundPage?type=apply&orderId="+e+(t?"&franchisee="+t:""),o=a.data.goodsList,i=!0,s=0;s<o.length;s++)o[s].selected&&(i=!1);if(i)return void m.appMethod.showModal({content:"请选择需要退款的商品"});m.appMethod.turnToPage(n)},a.clickMinusButton=function(e){var t=e.currentTarget.dataset.index;a.data.goodsList[t].preview_refund_num-1<=0||a.data.dining_partner_source||a.changeGoodsNum(t,"minus")},a.clickPlusButton=function(e){var t=e.currentTarget.dataset.index;a.data.goodsList[t].preview_refund_num+1>a.data.goodsList[t].num-(a.data.goodsList[t].refunded_num||"0")||a.data.dining_partner_source||a.changeGoodsNum(t,"plus")},a.changeGoodsNum=function(e,t){var n=a.data.goodsList[e].preview_refund_num,o="plus"==t?n+1:n-1,i={};i["goodsList["+e+"].preview_refund_num"]=o,a.setData(i)},a.inputGoodsCount=function(e){var t=e.target.dataset.index,n=e.detail.value,o={},i=a.data.goodsList[t].num-(a.data.goodsList[t].refunded_num||"0");if(""!=n){if(0==n)return void m.appMethod.showModal({content:"请输入大于0的数字"});if(n>i)return void m.appMethod.showModal({content:"当前输入数量大于可退款数量"});o["goodsList["+t+"].preview_refund_num"]=n,a.setData(o)}},a.getAppECStoreConfig=function(){m.appMethod.getAppECStoreConfig(function(e){a.setData({storeStyle:e.color_config})},a.franchiseeId)},document.title="申请退款",a}return(0,u.default)(t,e),(0,r.default)(t,[{key:"componentWillMount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,p.getCurrentPageQueryParams)();this.orderId=e.orderId,this.franchiseeId=e.franchisee,this.getOrderDetail()}},{key:"componentDidMount",value:function(){this.getAppECStoreConfig()}},{key:"render",value:function(){var e=this,t=this.state,a=(t.showGetUserInfo,t.goodsList),n=t.storeStyle,o=t.is_group_buy_order,i=t.dining_partner_source,s=t.selectAll;return React.createElement("div",{className:"official-page preview-goods-refund"},React.createElement("div",{className:"shoppingCart-wrap page",id:"shoppingCart"},React.createElement("div",{className:"shoppingCart-top-nav"},React.createElement("span",null,"退款商品")),React.createElement("div",{className:"shoppingCart-list-wrap"},React.createElement("div",{className:"shoppingCart-goods-list"},a.map(function(t,a){return React.createElement(React.Fragment,{key:!0},t.preview_refund_num>0&&1!=t.is_benefit_goods&&React.createElement("div",null,React.createElement("label",{style:(0,p.convertLineStyleData)("color:"+n.theme),"data-index":a,className:"shoppingCart-check-box "+(t.selected?"checked ico-moon icon-success-tip":""),onClick:e.clickSelectGoods}),React.createElement("div",{className:"shoppingCart-goods-content"},React.createElement("div",{className:"shoppingCart-goods-cover"},React.createElement("img",{src:t.cover})),React.createElement("div",{className:"goods-content-box"},React.createElement("div",{className:"shoppingCart-goods-title"},0!=o&&React.createElement("span",{className:"is-seckill"},"拼团"),1==t.is_seckill&&React.createElement("span",{className:"is-seckill"},"秒杀"),1==t.is_vip_goods&&React.createElement("span",{className:"is-seckill"},"会员价"),t.goods_name),t.model_value_str&&React.createElement("div",{className:"ellipsis shoppingCart-goods-model"},t.model_value_str),React.createElement("div",{className:"shoppingCart-price-box"},0==t.use_integral?React.createElement(React.Fragment,null,React.createElement("span",{style:(0,p.convertLineStyleData)("color:"+n.theme),className:"real-price"},"¥"+t.price),1==t.is_seckill&&React.createElement("span",{className:"seckill-price"},"¥"+t.original_price)):React.createElement(React.Fragment,null,("0.00"!=t.price||!t.use_integral||0==t.use_integral)&&React.createElement("span",{style:(0,p.convertLineStyleData)("color:"+n.theme),className:"real-price"},"¥"+t.price),t.use_integral&&0!=t.use_integral&&"0.00"!=t.price&&React.createElement("span",{style:(0,p.convertLineStyleData)("color:"+n.theme),className:"real-price"},"+"),t.use_integral&&React.createElement("span",{style:(0,p.convertLineStyleData)("color:"+n.theme),className:"real-price"},t.use_integral+"积分")),1==t.is_seckill&&React.createElement("span",{className:"seckill-price"},"¥"+t.original_price),React.createElement("div",{className:"goods-number-box pull-right"},React.createElement("div",{className:"goods-num-mius",onClick:e.clickMinusButton,"data-index":a},"-"),React.createElement("input",{type:"number",className:"goods-num-box",value:t.preview_refund_num,"data-index":a,onInput:e.inputGoodsCount,disabled:!i}),React.createElement("div",{style:(0,p.convertLineStyleData)("color:"+n.theme),className:"goods-num-plus",onClick:e.clickPlusButton,"data-index":a},"+")))))))})))),React.createElement("div",{className:"shoppingCart-bottom-nav"},React.createElement("label",{style:(0,p.convertLineStyleData)("color:"+n.theme),className:"shoppingCart-check-box "+(s?"checked ico-moon icon-success-tip":""),onClick:this.clickSelectAll}),React.createElement("span",{className:"select-all"},"全选"),!!+i&&React.createElement("span",{className:"select-all"},"（不可部分退款）"),React.createElement("div",{style:(0,p.convertLineStyleData)("background:"+n.theme),className:"pull-right sure-refund-btn",onClick:this.sureRefund},"确定")))}}]),t}(g.default);t.default=h},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(0),i=n(o),s=a(3),r=n(s),c=a(1),l=n(c),d=a(2),u=n(d),m=a(5),p=a(6),f=a(7),g=n(f);a(372);var h=function(e){function t(e){(0,i.default)(this,t);var a=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={orderInfoStatus:"",is_vip_goods:"",goodsList:[],refundTypeData:[{title:"未收到货物/拒收货物（申请全额退款）"},{title:"已收到货物，不退货，仅退款（申请部分退款）"},{title:"已收到货物，退货退款（申请全额退款）"}],refundReasonData:[{title:"多拍/拍错/不想要"},{title:"快递延期"},{title:"未按约定时间发货"},{title:"快递记录出错"},{title:"内容与描述不符"},{title:"其它"}],refundWayData:[{title:"原付款方式退回"},{title:"退还为储值金"}],refundJourneyReasonData:[{title:"未保持餐品完整"},{title:"骑手服务态度恶劣"},{title:"骑手额外索取费用"},{title:"骑手诱导退单"},{title:"骑手提前点击送达"},{title:"骑手虚假标记异常"},{title:"少餐错餐"}],showRefundType:!0,showRefundReason:!0,showRefundWay:!0,typeIndex:"",reasonIndex:"",wayIndex:"",imagesArr:[],express:"",maxRefundPrice:"",refundPrice:"",refundDes:"",isShowPayInstruct:!0,is_group_buy_order:0,sameCity:0,storeStyle:{}},a.orderId="",a.franchiseeId="",a.origin="",a.applyRefundId="",a.refundGoods=[],a.dataInitial=function(){if(a.getAppECStoreConfig(),"apply"==a.origin){for(var e=m.appMethod.getCurrentPages()[m.appMethod.getCurrentPages().length-2].data.goodsList,t=[],n=[],o=0;o<e.length;o++)e[o].selected&&(t.push(e[o]),n.push({goods_id:e[o].goods_id,model_id:e[o].model_id,num:e[o].preview_refund_num}));a.setData({goodsList:t}),a.refundGoods=n,a.calculateRefundPrice()}a.getOrderDetail()},a.getOrderDetail=function(){var e=a;m.appMethod.getOrderDetail({data:{order_id:e.orderId,sub_shop_app_id:e.franchiseeId},success:function(t){var a=t.data[0].form_data,n=0==t.data[0].vip_cut_price?0:1,o=a.ecommerce_info.intra_city_data&&a.ecommerce_info.intra_city_data.deliver_type||0,i=a.pick_up_type,s=0;if(a.wx_local_express_order&&(s=1),"editor"==e.origin){for(var r=a.refund_apply.refund_goods,c=0;c<r.length;c++)r[c].goods_name=r[c].title,r[c].preview_refund_num=r[c].num,r[c].model_value=r[c].model_name;e.setData({goodsList:r,typeIndex:a.refund_apply.refund_type,reasonIndex:a.refund_apply.refund_reason,wayIndex:a.refund_apply.refund_mode,imagesArr:a.refund_apply.img_url||[],refundDes:a.refund_apply.description,refundPrice:a.refund_apply.refund_price}),e.applyRefundId=a.refund_apply.id,e.refundGoods=r,e.calculateRefundPrice()}e.setData({orignalStatus:a.refund_info&&a.refund_info.orignal_status||"",orderInfoStatus:a.status,is_group_buy_order:a.is_group_buy_order||0,is_vip_goods:n,pickUpType:i,deliveryStatus:a.ecommerce_info.ecommerce_transport_order&&a.ecommerce_info.ecommerce_transport_order.status||"",sameCity:s}),e.getRefundConfigByPickUpType(a.pick_up_type),2==i&&e.getBuyerCancelReason(o)}})},a.calculateRefundPrice=function(e){var t=a;m.appMethod.sendRequest({url:"/index.php?r=appShop/calculateRefundPrice",method:"post",data:{order_id:t.orderId,refund_goods:t.refundGoods,sub_shop_app_id:t.franchiseeId},success:function(e){var a={express:e.data.has_express,maxRefundPrice:e.data.refund_goods_price};"editor"==t.origin||(a.refundPrice=e.data.refund_goods_price),t.setData(a)}})},a.closeRefundBox=function(){a.setData({showRefundType:!0,showRefundReason:!0,showRefundWay:!0})},a.showRefundBox=function(e){var t=a,n=e.currentTarget.dataset.type,o={};switch(n){case"type":o.showRefundType=!1;break;case"reason":""!==t.data.typeIndex&&(o.showRefundReason=!1);break;case"way":""!==t.data.typeIndex&&""!==t.data.reasonIndex&&(o.showRefundWay=!1)}a.setData(o)},a.selectReason=function(e){var t=e.currentTarget.dataset.type,n=e.currentTarget.dataset.index,o={},i=a;switch(t){case"type":o.typeIndex=n,0==n&&(o.refundPrice=i.data.maxRefundPrice),o.showRefundType=!0,o.showRefundReason=!1;break;case"reason":o.reasonIndex=n,o.showRefundReason=!0,o.showRefundWay=!1;break;case"way":o.wayIndex=n,o.showRefundWay=!0}a.setData(o)},a.chooseImage=function(){var e=a,t=e.data.imagesArr||[];m.appMethod.chooseImage(function(a){var n={};n.imagesArr=t.concat(a),e.setData(n)},8-t.length)},a.deleteImage=function(e){var t=e.currentTarget.dataset.index,n=a.data.imagesArr,o={};n.splice(t,1),o.imagesArr=n,a.setData(o)},a.previewImage=function(e){var t=a,n=e.currentTarget.dataset.index;m.appMethod.previewImage({current:t.data.imagesArr[n],urls:t.data.imagesArr})},a.prevRefundBox=function(e){var t=e.currentTarget.dataset.type,n={};switch(t){case"reason":n.showRefundType=!1,n.showRefundReason=!0;break;case"way":n.showRefundReason=!1,n.showRefundWay=!0}a.setData(n)},a.cancelRefund=function(){m.appMethod.turnBack()},a.stopPropagation=function(e){},a.changeRefundPrice=function(e){a.setData({refundPrice:e.target.value})},a.inputRefundDes=function(e){a.setData({refundDes:e.target.value})},a.sureRefund=function(){var e=a;return""===e.data.typeIndex?void m.appMethod.showModal({content:"请填写退款类型"}):""===e.data.reasonIndex?void m.appMethod.showModal({content:"请填写退款原因"}):""===e.data.wayIndex?void m.appMethod.showModal({content:"请填写退款方式"}):e.data.refund_price<=0?void m.appMethod.showModal({content:"退款金额有误"}):void m.appMethod.sendRequest({url:"/index.php?r=appShop/applyRefund",method:"post",data:{sub_shop_app_id:e.franchiseeId,apply_id:e.applyRefundId,order_id:e.orderId,refund_price:e.data.refundPrice,refund_goods:e.refundGoods,refund_type:e.data.typeIndex,refund_reason:e.data.reasonIndex,refund_mode:e.data.wayIndex,description:e.data.refundDes.replace(/\n|\r\n/g,"<br />"),img_url:e.data.imagesArr},success:function(t){"apply"==e.origin?m.appMethod.turnBack({delta:2}):m.appMethod.turnBack()}})},a.getAppECStoreConfig=function(){m.appMethod.getAppECStoreConfig(function(e){a.setData({storeStyle:e.color_config})},a.franchiseeId)},a.closeMask=function(){a.setData({isShowInstructionMask:!1})},a.checkInstruction=function(){a.setData({isShowInstructionMask:!0})},a.hidePaymentInstruct=function(){a.setData({isShowPayInstruct:!1})},a.getRefundConfigByPickUpType=function(e){var t=a;m.appMethod.sendRequest({url:"/index.php?r=AppEcommerce/getRefundConfigByPickUpType",data:{sub_shop_app_id:t.franchiseeId,pick_up_type:e},success:function(e){var a=e.data.config_data;t.setData({refundWithGoods:a.refund_with_goods,isFullRefund:a.is_full_refund,refundTobalance:a.refund_to_balance,contactPhone:a.address?a.address.phone:""})}})},a.getBuyerCancelReason=function(e){var t=a;m.appMethod.sendRequest({url:"/index.php?r=AppTransport/getBuyerCancelReason",data:{deliver_type:e},success:function(e){var a=e.data,n=[];for(var o in a)n.push({title:a[o]});t.setData({refundJourneyReasonData:n})}})},document.title="申请退款",a}return(0,u.default)(t,e),(0,r.default)(t,[{key:"componentWillMount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,p.getCurrentPageQueryParams)();this.orderId=e.orderId,this.franchiseeId=e.franchisee||"",this.origin=e.type,this.dataInitial()}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.state,a=(t.showGetUserInfo,t.storeStyle),n=t.pickUpType,o=t.isShowPayInstruct,i=t.goodsList,s=t.is_group_buy_order,r=t.typeIndex,c=t.refundTypeData,l=t.reasonIndex,d=t.refundJourneyReasonData,u=t.refundReasonData,m=t.wayIndex,f=t.refundWayData,g=t.refundPrice,h=t.showRefundType,v=t.showRefundReason,_=t.showRefundWay,y=t.maxRefundPrice,E=t.express,b=t.refundDes,N=t.isShowInstructionMask,R=t.imagesArr,k=t.refundWithGoods,w=t.orderInfoStatus,x=t.orignalStatus,C=t.deliveryStatus,D=t.sameCity,S=t.refundTobalance,I=t.contactPhone;return React.createElement("div",{className:"official-page goods-refund-page"},2==n&&o&&React.createElement("div",{className:"payment-instructions",style:(0,p.convertLineStyleData)("background:"+a.theme+"1A;color:"+a.theme)},React.createElement("span",{onClick:this.hidePaymentInstruct,className:"ico-moon icon-closes"}),React.createElement("span",null,"赔付说明"),React.createElement("span",{className:"pull-right check-instructions",style:(0,p.convertLineStyleData)("border-color:"+a.theme),onClick:this.checkInstruction},"立即查看")),React.createElement("div",{className:"refund-box"},i.map(function(e,t){return React.createElement("div",{className:"goods-detail-box",key:e.goods_id},React.createElement("img",{src:e.cover}),React.createElement("div",null,React.createElement("div",{className:"goods-name"},0!=s&&React.createElement("span",{className:"is-seckill"},"拼团"),1==e.is_seckill&&React.createElement("span",{className:"is-seckill"},"秒杀"),1==e.is_vip_goods&&React.createElement("span",{className:"is-seckill"},"会员价"),e.goods_name),e.model_value&&React.createElement("div",{className:"goods-rules"},e.model_value),React.createElement("div",{className:"goods-price"},0==e.use_integral?React.createElement(React.Fragment,null,React.createElement("span",{className:"colorff7",style:(0,p.convertLineStyleData)("color:"+a.theme)},"¥"+e.price)):React.createElement(React.Fragment,null,("0.00"!=e.price||!e.use_integral||0==e.use_integral)&&React.createElement("span",{className:"colorff7",style:(0,p.convertLineStyleData)("color:"+a.theme)},"¥"+e.price),e.use_integral&&0!=e.use_integral&&"0.00"!=e.price&&React.createElement("span",{className:"colorff7",style:(0,p.convertLineStyleData)("color:"+a.theme)},"+"),e.use_integral&&React.createElement("span",{className:"colorff7",style:(0,p.convertLineStyleData)("color:"+a.theme)},e.use_integral+"积分")),React.createElement("span",{className:"pull-right"},"x "+e.preview_refund_num))))}),React.createElement("div",{className:"type-reason-way"},React.createElement("div",{onClick:this.showRefundBox,"data-type":"type"},React.createElement("span",{className:"type-reason-way-title"},"退款类型"),React.createElement("span",{className:"pull-right ico-moon icon-rightarrow"}),React.createElement("span",{className:"pull-right select-reason "+(""!==r?"select":"")},c[r]&&c[r].title||"请选择")),React.createElement("div",{onClick:this.showRefundBox,"data-type":"reason"},React.createElement("span",{className:"type-reason-way-title"},"退款原因"),React.createElement("span",{className:"pull-right ico-moon icon-rightarrow"}),React.createElement("span",{className:"pull-right select-reason "+(""!==l?"select":"")},(2==n?d[l]&&d[l].title:u[l]&&u[l].title)||"请选择退款原因")),React.createElement("div",{onClick:this.showRefundBox,"data-type":"way"},React.createElement("span",{className:"type-reason-way-title"},"退款方式"),React.createElement("span",{className:"pull-right ico-moon icon-rightarrow"}),React.createElement("span",{className:"pull-right select-reason "+(""!==m?"select":"")},f[m]&&f[m].title||"请选择退款方式"),1==m&&React.createElement("div",{className:"storage-tip"},"注：储值金不会跟着退款一起退回，在商家同意退款后，还需用户点击“确认退款”，才会退回。"))),React.createElement("div",{className:"refund-price-box"},React.createElement("div",null,React.createElement("span",{className:"refund-price-title"},"退款金额"),1!=r&&React.createElement("span",{className:"pull-right refund-price",style:(0,p.convertLineStyleData)("color:"+a.theme)},"¥"+g),1==r&&h&&v&&_&&React.createElement("input",{style:(0,p.convertLineStyleData)("color:"+a.theme),className:"pull-right refund-price-input",type:"digit",value:g,onInput:this.changeRefundPrice})),React.createElement("div",{className:"refund-price-detail"},"最多退¥"+y+"，含配送费¥"+E+"元"),1==m&&React.createElement("div",{className:"refund-price-detail"},"最终退款储值金额 ¥"+g+"元")),React.createElement("div",{className:"refund-instruct"},!N&&React.createElement("div",{className:"refund-instruct-title"},React.createElement("span",{className:"refund-instruct-label"},"退款说明"),h&&v&&_&&React.createElement("input",{className:"refund-instruct-input",type:"text",value:b,onInput:this.inputRefundDes,placeholder:"选填"})),React.createElement("div",{className:"images-box"},R.map(function(t,a){return React.createElement("div",{key:a},React.createElement("span",{className:"delete-image ico-moon icon-closes",onClick:e.deleteImage,"data-index":a}),React.createElement("img",{src:t,"data-index":a,onClick:e.previewImage}))}),R.length<8&&React.createElement("div",{className:"add-images",onClick:this.chooseImage},React.createElement("span",{className:"ico-moon icon-goods-add-image"}),React.createElement("div",null,"添加图片"))),React.createElement("div",{className:"images-length"},R.length+"/8")),React.createElement("div",{className:"refund-bottom"},React.createElement("div",{className:"refund-cancel",onClick:this.cancelRefund},"取消"),React.createElement("div",{className:"refund-submit",onClick:this.sureRefund,style:(0,p.convertLineStyleData)("background:"+a.theme)},"提交"))),React.createElement("div",{className:"refund-type-mask",onClick:this.closeRefundBox,hidden:h},React.createElement("div",{className:"refund-type-box",onClick:this.stopPropagation},React.createElement("div",{className:"refund-type-title"},"退款类型"),React.createElement("div",{className:"refund-type-menu"},c.map(function(t,o){return React.createElement(React.Fragment,{key:o},React.createElement("div",{hidden:(0==k||1==w||1==x||3==C||3==n)&&2==o&&!D,className:"refund-type-list",onClick:e.selectReason,"data-index":o,"data-type":"type"},React.createElement("span",{style:(0,p.convertLineStyleData)(r===o?"color:"+a.theme:""),className:r===o?"select":""},t.title),React.createElement("span",{className:"pull-right ico-moon icon-rightarrow"})))})),React.createElement("div",{className:"refund-type-close",onClick:this.closeRefundBox,style:(0,p.convertLineStyleData)("background:"+a.theme)},"关闭"))),React.createElement("div",{className:"refund-type-mask",onClick:this.closeRefundBox,hidden:v},React.createElement("div",{className:"refund-type-box",onClick:this.stopPropagation},React.createElement("div",{className:"refund-type-title"},"退款原因"),React.createElement("div",{className:"refund-type-menu"},(2==n?d:u).map(function(t,n){return React.createElement("div",{key:n,className:"refund-type-list",onClick:e.selectReason,"data-index":n,"data-type":"reason"},React.createElement("span",{style:(0,p.convertLineStyleData)(l===n?"color:"+a.theme:""),className:l===n?"select":""},t.title),React.createElement("span",{className:"pull-right ico-moon icon-rightarrow"}))})),React.createElement("div",{className:"refund-reason-close"},React.createElement("span",{className:"pre-btn",onClick:this.prevRefundBox,"data-type":"reason"},"上一步"),React.createElement("span",{className:"close-btn",onClick:this.closeRefundBox,style:(0,p.convertLineStyleData)("background:"+a.theme)},"关闭")))),React.createElement("div",{className:"refund-type-mask",onClick:this.closeRefundBox,hidden:_},React.createElement("div",{className:"refund-type-box",onClick:this.stopPropagation},React.createElement("div",{className:"refund-type-title"},"退款方式"),React.createElement("div",{className:"refund-type-menu"},f.map(function(t,n){return React.createElement(React.Fragment,{key:n},React.createElement("div",{hidden:0==S&&1==n,className:"refund-type-list",onClick:e.selectReason,"data-index":n,"data-type":"way"},React.createElement("span",{style:(0,p.convertLineStyleData)(m===n?"color:"+a.theme:""),className:m===n?"select":""},t.title),React.createElement("span",{className:"pull-right ico-moon icon-rightarrow"})))})),React.createElement("div",{className:"refund-reason-close"},React.createElement("span",{className:"pre-btn",onClick:this.prevRefundBox,"data-type":"way"},"上一步"),React.createElement("span",{className:"close-btn",onClick:this.closeRefundBox,style:(0,p.convertLineStyleData)("background:"+a.theme)},"关闭")))),N&&React.createElement("div",{className:"payment-instructions-mask"},React.createElement("div",{className:"payment-instructions-box"},React.createElement("div",{className:"title"},"赔付说明"),React.createElement("div",null,"1.根据实际情况定位骑手还是商家问题，必要时上传产品详情照片1-3张"),React.createElement("div",null,"2.流程：投诉后商家将会收到您的反馈，并在",React.createElement("span",{style:(0,p.convertLineStyleData)("color:"+a.theme)},"1-3"),"个工作日内对提交的内容进行审核，审核无误将会赔付金额到您的储值账户中"),React.createElement("div",null,"3.最高赔付",React.createElement("span",{style:(0,p.convertLineStyleData)("color:"+a.theme)},y),"元"),I&&1==k&&React.createElement("div",null,"4.若长时间未处理，可拨打热线电话",React.createElement("span",{style:(0,p.convertLineStyleData)("color:"+a.theme)},I)),React.createElement("div",{className:"known-btn",style:(0,p.convertLineStyleData)("color:"+a.theme),onClick:this.closeMask},"知道了"))))}}]),t}(g.default);t.default=h},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(31),i=n(o),s=a(17),r=n(s),c=a(13),l=n(c),d=a(9),u=n(d),m=a(0),p=n(m),f=a(3),g=n(f),h=a(1),v=n(h),_=a(2),y=n(_);a(32),a(16);var E=a(4),b=n(E),N=a(5),R=a(15),k=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(R),w=a(6),x=a(58),C=a(7),D=n(C);a(376);var S={date:function(e){var t=new RegExp("-","img");return e.replace(t,"月")+"日"},week:function(e){switch(e){case"0":return"日";case"1":return"一";case"2":return"二";case"3":return"三";case"4":return"四";case"5":return"五";case"6":return"六"}}},I=function(e){var t=e.data,a=e.self,n=t.dialogHidden,o=t.selectModelInfo,i=t.goodsInfo;t.model,t.modelIndex,t.index,t.name;return b.default.createElement(b.default.Fragment,null,b.default.createElement("div",{className:"page-dialog-wrap",hidden:n},b.default.createElement("div",{className:"page-bottom-dialog"},b.default.createElement("div",{className:"page-bottom-content"},b.default.createElement("div",{className:"pay-close-dialog page-dialog-close",onClick:a.exchangeCouponHideDialog},"×"),b.default.createElement("div",{className:"dialog-block-item"},b.default.createElement("div",{className:"thumb"},b.default.createElement("div",{className:"thumb-wrap"},b.default.createElement("img",{className:"pay-goods-cover",src:o&&o.imgurl||i&&i.cover}))),b.default.createElement("div",{className:"pay-goods-baseinfo"},b.default.createElement("div",{className:"pay-goods-title ellipsis"},b.default.createElement("span",{className:"gift-text"},"赠品"),b.default.createElement("span",{className:"gift-title"},i&&i.title)),o&&o.models_text&&b.default.createElement("div",{className:"pay-checked-text clearfix ellipsis"},"已选："+o.models_text),b.default.createElement("span",{className:"gift-price"},"¥"+(o&&o.price)))),b.default.createElement("div",{className:"exchange-rules-box"},b.default.createElement("div",{className:"pay-goods-models"},i&&i.model&&i.model.map(function(e,t){return b.default.createElement("div",{key:t},b.default.createElement("span",{className:"model-title"},e.name),b.default.createElement("label",{className:"pills-list"},e.subModelName.map(function(n,i){return b.default.createElement("label",{key:i,"data-model-index":t,"data-submodel-index":i,className:"subModel "+(o.models[t]==e.subModelId[i]?"select":""),"data-submodel-id":e.subModelId[i],onClick:a.exchangeCouponSelectSubModel},n)})))}))),b.default.createElement("div",{className:"confirm-goods",onClick:a.exchangeCouponConfirmGoods},"确认")))))},M=function(e){function t(e){(0,p.default)(this,t);var a=(0,v.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={customNumArr:Array.from(new Array(101).keys()).slice(1),take_meal_type_index:0,take_meal_type_arr:[],take_meal_type_text:["","送餐到桌","前台自取"],dining_mode_arr:[{label:"堂食",value:"1"},{label:"打包",value:"2"}],take_meal_type:1,people_num:1,dining_mode:1,is_addDishing:!1,only_me:!1,goodsList:[],selectAddress:"",discountList:[],selectDiscountInfo:{},orderRemark:"",express_fee:"",balance:"",useBalance:!0,deduction:"",discount_cut_price:"",original_price:"",totalPayment:"",storeConfig:"",noAdditionalInfo:!0,is_group:"",limit_buy:"",teamToken:"",exchangeCouponData:{dialogHidden:!0,goodsInfo:{},selectModelInfo:{},hasSelectGoods:!1,voucher_coupon_goods_info:{}},cashOnDelivery:!1,selectDelivery:"",hasRequiredSuppInfo:!1,additional_info:{},showPickMask:!1,pickUpType:"",isShowSameJourneyTime:!1,expressAddressNull:!1,goodsIcon:{1:"icon-goods-express-model",2:"icon-goods-city-model",3:"icon-goods-delivery-model",4:"icon-goods-store-model"},leagueBenefitData:{benefitList:[],selectedBenefitInfo:{},benefitPrice:0},mulShopsInfo:{},storeStyle:{}},a.is_reload=!0,a.timerId=0,a.isFromSelectAddress=!1,a.franchisee_id="",a.cart_id_arr=[],a.cart_id_arr_my=[],a.cart_data_arr=[],a.requesting=!1,a.is_group="",a.inputTimer="",a.isFranchisee=!1,a.mulShopsParams=[],a.memberDiscountRef=b.default.createRef(),a.getDiningData=function(){a.data.ec_location_id?a.scanInitUserInfo("",a.data.ec_location_id,a.checkIsAddDishing):a.getCalculationInfo()},a.dataInitial=function(){a.getAppECStoreConfig(),a.getCartList(function(){a.selectPickMethod("first")})},a.getCartList=function(e){var t=a,n=a.franchisee_id;t.cart_id_arr_my=[],N.appMethod.sendRequest({url:"/index.php?r=AppShop/cartList",data:{page:1,page_size:100,sub_shop_app_id:t.isFranchisee?"":n,parent_shop_app_id:n||t.isFranchisee?N.appMethod.globalData.appId:"",is_app_shop:t.isFranchisee?1:0},success:function(a){var n=[],o={};if(t.cart_id_arr.length){for(var i=0;i<=a.data.length-1;i++)t.cart_id_arr.indexOf(a.data[i].id)>=0&&n.push(a.data[i]);if(t.isFranchisee){var s=[];a.appShopData.forEach(function(e){e.cartList=e.cartList.filter(function(e){return t.cart_id_arr.indexOf(e.id)>=0})}),s=a.appShopData.filter(function(e){return e.cartList.length}),o.shopsList=s}}else n=a.data;for(var i=0;i<=n.length-1;i++){var r=n[i],c=r.model_value;r.model_value_str=c&&c.join?c.join("； "):"",t.cart_data_arr.push({cart_id:r.id,goods_id:r.goods_id,model_id:r.model_id,num:r.num}),t.cart_id_arr_my.push(r.id)}o.only_me=!0,o.goodsList=n,t.setData(o),"function"==typeof e&&e()}})},a.getCalculationInfo=function(e){if(a.isFranchisee)return void a.getMulCalculationInfo();var t=a,n={};4==a.data.pickUpType&&(n={ec_dining_data:{ordering_food_type:1,dining_mode:t.data.dining_mode,people_num:t.data.people_num,take_meal_type:t.data.take_meal_type,location_id:t.data.ec_location_id,account_type:t.data.account_type}}),N.appMethod.sendRequest({url:"/index.php?r=AppShop/calculationPrice",method:"post",data:{ecommerce_info:n,sub_shop_app_id:a.franchisee_id,address_id:4==a.data.pickUpType?"":1==a.data.pickUpType?a.data.selectAddressId:a.data.selectSameJourneyId,cart_id_arr:a.cart_id_arr,is_balance:a.data.useBalance?1:0,pick_up_type:a.data.pickUpType,selected_benefit:4==a.data.pickUpType&&2==a.data.account_type?"":a.data.selectDiscountInfo,voucher_coupon_goods_info:a.data.exchangeCouponData.voucher_coupon_goods_info},success:function(e){var a,n=e.data,o=n.can_use_benefit,i=n.goods_info,s=[],r=n.selected_benefit_info,c=[],l=[];if(n.dining_status_data&&1==t.data.pickUpTypeArr.length&&4==t.data.pickUpType){0!=n.dining_status_data.in_business_time||N.appMethod.showModal({content:"店铺不在营业时间内",confirmText:"知道了",confirm:function(){N.appMethod.turnBack()}})}2==t.data.pickUpType&&n.intra_city_status_data&&(0==n.intra_city_status_data.in_distance?N.appMethod.showModal({content:"地址不在配送范围内",confirmText:"去更换",showCancel:!0,confirm:function(){t.goSameJourneyAddress()},cancel:function(){t.setData({selectSameJourney:""})}}):0==n.intra_city_status_data.in_business_time&&N.appMethod.showModal({content:"店铺歇业中，请更换其他配送方式",confirmText:"去更换",confirm:function(){t.setData({isShowPickMask:!0})}}));var d=[];o.coupon_benefit&&o.coupon_benefit.length&&d.push({label:"coupon",value:o.coupon_benefit}),o.all_vip_benefit&&o.all_vip_benefit.length&&d.push({label:"vip",value:o.all_vip_benefit}),Array.isArray(o.integral_benefit)||o.integral_benefit&&d.push({label:"integral",value:[o.integral_benefit]}),"coupon"==r.discount_type&&3==r.type&&0==t.data.exchangeCouponData.hasSelectGoods&&t.exchangeCouponInit(parseInt(r.value));for(var m=0;m<=i.length-1;m++)4==t.data.pickUpType?function(){var e=t.data.goodsList.length?t.data.goodsList:n.goods_info,a=[];e.forEach(function(e,t){a.push(e.goods_id)}),i.forEach(function(e,t){e.forEach(function(e){e.goods_list.forEach(function(e){e.delivery_id&&0!=e.delivery_id&&-1==l.indexOf(e.goods_id)&&a.indexOf(e.goods_id)>-1&&(c.push(e.delivery_id),l.push(e.goods_id),s.push(e))})})})}():i[m].delivery_id&&0!=i[m].delivery_id&&-1==l.indexOf(i[m].id)&&(c.push(i[m].delivery_id),l.push(i[m].id),s.push(i[m]));if(c.length&&!t.data.deliverydWrite&&t.getSuppInfo(c),4==t.data.pickUpType){var p=t.data.buyer_list||n.buyer_list,f=t.data.goodsList.length?t.data.goodsList:n.goods_info,g=t.data.my_self||"";p.forEach(function(e,t){e.buyer_id==g&&p.length>1&&(p.splice(t,1),p.unshift(e));var a=0;f.forEach(function(t){e.buyer_id==t.buyer_id&&(a+=+t.num,e.num=a)})}),t.setData({buyer_list:p})}var h=[],v={};if(4==t.data.pickUpType){(t.data.goodsList.length?t.data.goodsList:n.goods_info).forEach(function(e,t){1===e.cart_vip_goods&&h.push(e)}),t.data.buyer_list.forEach(function(e){e.buyer_id===n.dining_vip_card_info.user_token&&(v=e,v.title=n.dining_vip_card_info.title)})}t.setData((a={people_num:n.people_num,expressAddressNull:!n.address&&t.data.expressAddressNull,selectAddress:1==t.data.pickUpType&&n.address,selectSameJourney:2==t.data.pickUpType&&n.address,discountList:d,selectDiscountInfo:r,box_fee:n.box_fee,server_fee:n.server_fee,tissue_fee:n.tissue_fee,express_fee:n.express_fee,discount_cut_price:n.discount_cut_price,vip_cut_price:n.vip_cut_price,is_vip_goods:n.goods_info[0].is_vip_goods,is_vip_order:n.is_vip_order},(0,u.default)(a,"vip_cut_price",n.vip_cut_price),(0,u.default)(a,"balance",n.balance),(0,u.default)(a,"deduction",n.use_balance),(0,u.default)(a,"original_price",1==n.is_vip_order?n.total_original_price:n.original_price),(0,u.default)(a,"totalPayment",n.price),(0,u.default)(a,"canCashDelivery",n.is_pay_on_delivery),(0,u.default)(a,"cashOnDelivery",n.price>0&&t.data.cashOnDelivery),(0,u.default)(a,"selfPayOnDelivery",n.self_pay_on_delivery),(0,u.default)(a,"additional_goodsid_arr",l),(0,u.default)(a,"sameJourneyImmediatlyTime",n.intra_city_status_data&&n.intra_city_status_data.deliver_time),(0,u.default)(a,"vip_goods_list",h),(0,u.default)(a,"vip_cart_info",v),(0,u.default)(a,"total_discount_cut_price",n.total_discount_cut_price),a)),N.appMethod.setPreviewGoodsInfo(s)},successStatusAbnormal:function(e){if("商品不能混合下单"==e.data)return N.appMethod.showModal({content:e.data,confirmText:"知道了",confirm:function(e){N.appMethod.turnBack()}}),!1;e.stop_loop&&clearTimeout(t.timerId)}})},a.getMulCalculationInfo=function(){var e=a,t=a.data,n=t.pickUpType,o=t.mulShopsInfo,i=t.shopsList,s=t.leagueBenefitData,r=t.selectAddressId,c=t.selectSameJourneyId,l={},d=s.selectedBenefitInfo;d&&d.no_use_benefit&&0==d.flag&&(d=""),l=i.map(function(e){var t=e.app_id,a=1==n?r||"":c||"",i=o[t]&&o[t].selectDiscountInfo||"",s=o[t]&&o[t].exchangeCouponData&&o[t].exchangeCouponData.voucher_coupon_goods_info||"",l=t==N.appMethod.getAppId()?o[t]&&o[t].useBalance:0,d=o[t]&&o[t].cashOnDelivery||0;return{sub_shop_app_id:t,address_id:a,is_balance:void 0==l?1:l?1:0,pick_up_type:n,selected_benefit:i,voucher_coupon_goods_info:s,cart_id_arr:e.cartList.map(function(e){return e.id}),is_pay_on_delivery:d}}),N.appMethod.sendRequest({url:"/index.php?r=AppShop/MultiCalculationPrice",method:"post",data:{multi_superimposed:1,extra_selected_benefit:d||"",multi_app_shops:l},success:function(t){var a=t.data,o=a.appData,i=e.data.mulShopsInfo;Object.keys(o).forEach(function(t){var a,s=o[t],r=s.can_use_benefit,c=s.selected_benefit_info;2==n&&s.intra_city_status_data&&0==s.intra_city_status_data.in_distance&&N.appMethod.showModal({content:"地址不在配送范围内",confirmText:"去更换",showCancel:!0,confirm:function(){e.goSameJourneyAddress()},cancel:function(){e.setData((0,u.default)({},"mulShopsInfo."+t+".selectSameJourney",""))}});var l=[];r.coupon_benefit&&r.coupon_benefit.length&&l.push({label:"coupon",value:r.coupon_benefit}),r.all_vip_benefit&&r.all_vip_benefit.length&&l.push({label:"vip",value:r.all_vip_benefit}),Array.isArray(r.integral_benefit)||r.integral_benefit&&l.push({label:"integral",value:[r.integral_benefit]}),"coupon"==c.discount_type&&3==c.type&&0==e.data.exchangeCouponData.hasSelectGoods&&e.exchangeCouponInit(parseInt(c.value));var d=i[t]&&i[t].sameJourneyTimeType,m=i[t]&&i[t].phone;e.setData((a={},(0,u.default)(a,"mulShopsInfo."+t+".discountList",l),(0,u.default)(a,"mulShopsInfo."+t+".selectDiscountInfo",c),(0,u.default)(a,"mulShopsInfo."+t+".box_fee",s.box_fee),(0,u.default)(a,"mulShopsInfo."+t+".express_fee",s.express_fee),(0,u.default)(a,"mulShopsInfo."+t+".discount_cut_price",s.discount_cut_price),(0,u.default)(a,"mulShopsInfo."+t+".vip_cut_price",s.vip_cut_price||""),(0,u.default)(a,"mulShopsInfo."+t+".price",s.price),(0,u.default)(a,"mulShopsInfo."+t+".is_vip_goods",s.goods_info[0].is_vip_goods||""),(0,u.default)(a,"mulShopsInfo."+t+".balance",s.balance),(0,u.default)(a,"mulShopsInfo."+t+".deduction",s.use_balance),(0,u.default)(a,"mulShopsInfo."+t+".original_price",s.original_price),(0,u.default)(a,"mulShopsInfo."+t+".canCashDelivery",s.is_pay_on_delivery),(0,u.default)(a,"mulShopsInfo."+t+".selfPayOnDelivery",s.price>0&&s.self_pay_on_delivery),(0,u.default)(a,"mulShopsInfo."+t+".sameJourneyImmediatlyTime",s.intra_city_status_data&&s.intra_city_status_data.deliver_time),(0,u.default)(a,"mulShopsInfo."+t+".sameJourneyTimeType",d||(2==n?1:"")),(0,u.default)(a,"mulShopsInfo."+t+".phone",m||N.appMethod.getUserInfo().phone),(0,u.default)(a,"mulShopsInfo."+t+".exchangeCouponData",{dialogHidden:!0,goodsInfo:{},selectModelInfo:{},hasSelectGoods:!1,voucher_coupon_goods_info:{}}),(0,u.default)(a,"mulShopsInfo."+t+".useBalance",s.use_balance),a))});var s=[],r=a.extra_can_use_benefit;r.coupon_benefit&&r.coupon_benefit.length&&s.push({label:"coupon",value:r.coupon_benefit}),e.setData({mulShopsInfo:i,expressAddressNull:!a.address&&e.data.expressAddressNull,selectAddress:1==n&&a.address,selectSameJourney:2==n&&a.address,"leagueBenefitData.benefitList":s,"leagueBenefitData.selectedBenefitInfo":a.extra_selected_benefit,"leagueBenefitData.benefitPrice":a.discount_cut_price,totalPayment:a.cart_total_price,payTotalPrice:a.pay_total_price||""}),3==n&&e.getSelfDeliveryList(),e.getSuppInfo()}})},a.getAppECStoreConfig=function(){N.appMethod.getAppECStoreConfig(function(e){a.setData({storeConfig:e,storeStyle:e.color_config})},a.franchisee_id)},a.remarkInput=function(e){var t=e.currentTarget.dataset.appId,n={};t?n["mulShopsInfo."+t+".orderRemark"]=e.target.value:n.orderRemark=e.target.value,a.setData(n)},a.previewImage=function(e){N.appMethod.previewImage({current:e.currentTarget.dataset.src})},a.clickMinusButton=function(e){a.setSelectedGoodsInfo(e),+a.selectedGoodsInfo.num<=0||a.changeGoodsNum(e,"minus")},a.clickPlusButton=function(e){a.setSelectedGoodsInfo(e),""!==a.data.limit_buy&&+a.selectedGoodsInfo.num>=a.data.limit_buy||a.changeGoodsNum(e,"plus")},a.inputGoodsCount=function(e){a.setSelectedGoodsInfo(e);var t=+e.target.value;e.target.dataset.index;isNaN(t)||t<=0||(clearTimeout(a.inputTimer),a.inputTimer=setTimeout(function(){a.changeGoodsNum(e,t)},500))},a.changeGoodsNum=function(e,t){var n,o=e.currentTarget.dataset,i=o.index,s=o.shopIndex,r=o.isFranchisee,c=a.selectedGoodsInfo,l=+c.num,d="plus"==t?l+1:"minus"==t?l-1:Number(t),u=a,m={};if(0==d&&"minus"==t)return void N.appMethod.showModal({content:"确定从购物车删除该商品？",showCancel:!0,confirm:function(){r?(m["shopsList["+s+"].cartList["+i+"].num"]=d,m["mulShopsInfo."+u.selectedAppId+".noAdditionalInfo"]=!0,m["mulShopsInfo."+u.selectedAppId+".aloneDeliveryShow"]=!1):(u.cart_data_arr[i].num=d,m["goodsList["+i+"].num"]=d,m.noAdditionalInfo=!0,m.aloneDeliveryShow=!1),u.setData(m),u.deleteGoods({index:i,shopIndex:s,isFranchisee:r})}});n={goods_id:c.goods_id,model_id:c.model_id||"",num:d,sub_shop_app_id:r?u.selectedAppId||N.appMethod.getAppId():u.franchisee_id,is_seckill:1==c.is_seckill?1:"",location_id:4==a.data.pickUpType?a.data.ec_location_id:"",cart_id:r?c.id:a.cart_data_arr[i].cart_id},c.form_data&&c.form_data.seckill_activity_id&&(n.form_data={},n.form_data.seckill_activity_id=c.form_data.seckill_activity_id,n.form_data.seckill_activity_time_id=c.form_data.seckill_activity_time_id),a.data.is_group&&(n.is_group_buy=a.data.is_group?1:0,n.num_of_group_buy_people=a.data.group_buy_people,n.team_token=a.data.teamToken),N.appMethod.sendRequest({hideLoading:!0,url:"/index.php?r=AppShop/addCart",data:n,method:"post",success:function(e){r?(m["shopsList["+s+"].cartList["+i+"].num"]=d,m["mulShopsInfo"+c.app_id+".selectedBenefitInfo"]="",m["mulShopsInfo"+c.app_id+".exchangeCouponData"]={dialogHidden:!0,hasSelectGoods:!1,voucher_coupon_goods_info:{}}):(u.cart_data_arr[i].num=d,m["goodsList["+i+"].num"]=d,m.selectDiscountInfo="",m.exchangeCouponData={dialogHidden:!0,hasSelectGoods:!1,voucher_coupon_goods_info:{}}),u.setData(m),u.getCalculationInfo()},fail:function(e){m={},r?m["shopsList["+s+"].cartList["+i+"].num"]=d:(u.cart_data_arr[i].num=l,m["goodsList["+i+"].num"]=d),u.setData(m)}})},a.setSelectedGoodsInfo=function(e){var t=e.currentTarget.dataset,n=t.index,o=t.isFranchisee,i=t.shopIndex,s=t.appId,r=a.data,c=r.goodsList,l=r.shopsList;a.selectedGoodsInfo=o?l[i]&&l[i].cartList[n]:c[n],a.selectedAppId=s},a.deleteGoods=function(e){var t,n=e.index,o=e.isFranchisee,i=(e.shopIndex,a.data.goodsList),s=a.data.shopsList,r=a,c=[],l=a.selectedGoodsInfo;N.appMethod.sendRequest({url:"/index.php?r=AppShop/deleteCart",method:"post",data:{cart_id_arr:[o?l.id:a.cart_data_arr[n].cart_id],sub_shop_app_id:o?r.selectedAppId||N.appMethod.getAppId():a.franchisee_id,location_id:a.data.ec_location_id},success:function(e){if(o){var a;if(c=JSON.parse(JSON.stringify(s)),c.map(function(e){e.cartList=e.cartList.filter(function(e){return e.id!=l.id})}),c=c.filter(function(e){return e.cartList.length>0}),0==c.length)return void N.appMethod.turnBack();var d=!0,m=r.data.mulShopsInfo;if(c.forEach(function(e){d=e.cartList.some(function(e){return e.id==l.id})}),d&&m[r.selectedAppId].additional_info){var p=delete m[r.selectedAppId].additional_info[l.id];r.setData((0,u.default)({},"mulShopsInfo."+r.selectedAppId+".additional_info",p))}r.setData((a={shopsList:c},(0,u.default)(a,"mulShopsInfo."+r.selectedAppId+".selectDiscountInfo",""),(0,u.default)(a,"mulShopsInfo."+r.selectedAppId+".exchangeCouponData",{dialogHidden:!0,hasSelectGoods:!1,voucher_coupon_goods_info:{}}),a))}else{if((t=i.concat([])).splice(n,1),0==t.length)return void N.appMethod.turnBack();for(var f=i[n],g=!0,h=t.length-1;h>=0;h--)if(t[h].id==f){g=!1;break}if(g&&r.data.additional_info){var v=delete r.data.additional_info[f];r.setData({additional_info:v})}4==r.data.pickUpType&&(r.data.buyer_list.forEach(function(e){i[n].buyer_id==e.buyer_id&&1==e.num&&(e.num=0)}),r.setData({buyer_list:r.data.buyer_list})),r.cart_data_arr.splice(n,1),r.setData({goodsList:t,selectDiscountInfo:"",exchangeCouponData:{dialogHidden:!0,hasSelectGoods:!1,voucher_coupon_goods_info:{}}})}r.getCalculationInfo()}})},a.confirmPayment=function(e){var t=a,n=a.data.selectDiscountInfo,o=a.data.tostoreOrderType;if(1==a.data.pickUpType&&!a.data.selectAddress)return void a.setData({expressAddressNull:!0});if(4==a.data.pickUpType&&a.data.location_status&&(clearTimeout(a.timerId),!a.data.ec_location_id&&1==a.data.take_meal_type))return void N.appMethod.showModal({content:"请先扫码获取桌号！"});if(2==a.data.pickUpType&&0==a.data.intraCityData.in_business_time)return void N.appMethod.showModal({content:"店铺歇业中，请更换其他配送方式",confirmText:"去更换",confirm:function(){t.setData({isShowPickMask:!0})}});if(2==a.data.pickUpType&&!a.data.selectSameJourney)return void N.appMethod.showModal({content:"请选择同城地址",confirmText:"去填写",confirm:function(){t.goSameJourneyAddress()}});if(2==a.data.pickUpType&&!a.data.sameJourneyDateTime&&1!=a.data.sameJourneyTimeType)return void N.appMethod.showModal({content:"请选择取货时间"});if(3==a.data.pickUpType&&!a.data.selectDelivery)return void N.appMethod.showModal({content:"请选择上门自提地址",confirmText:"去填写",confirm:function(){t.toDeliveryList()}});if(3==a.data.pickUpType&&a.data.selfAppointmentSwitch&&!o)return void N.appMethod.showModal({content:"请选择取货时间"});var i=(new Date).getFullYear(),s=i+"-"+a.data.tostoreDateTime+" "+(a.data.tostoreHourTime||"");if(3==a.data.pickUpType&&1==a.data.selfDeliveryPhone&&!/^[0-9]*$/.test(a.data.phone))return void N.appMethod.showModal({content:"请输入正确的手机号"});if(a.data.hasRequiredSuppInfo&&!a.data.deliverydWrite&&!a.data.aloneDeliveryShow)return void N.appMethod.showModal({content:"商品补充信息未填写，无法进行支付",confirmText:"去填写",confirm:function(){t.goToAdditionalInfo()}});if(a.data.aloneDeliveryShow){var r=a.data.additional_info,c=a.data.additional_goodsid_arr[0];if(0==r[c][0].is_required&&""==r[c][0].value)return void N.appMethod.showModal({content:"请填写"+r[c][0].title,confirmText:"确认"})}a.requesting||(a.requesting=!0,N.appMethod.sendRequest({url:"/index.php?r=AppShop/addCartOrder",method:"post",data:{cart_id_arr:a.cart_id_arr,formId:e.target.formId,sub_shop_app_id:a.franchisee_id,selected_benefit:n,is_balance:4==a.data.pickUpType&&2==a.data.account_type?0:a.data.useBalance?1:0,ecommerce_info:{ec_tostore_data:{ec_tostore_order_type:o,ec_tostore_appointment_time:1!=o&&a.data.selfAppointmentSwitch?s:"",ec_tostore_buyer_phone:a.data.phone||"",ec_tostore_appointment_time_type:a.data.tostoreTimeType||"",ec_tostore_location_id:a.data.locationId||""},intra_city_data:{intra_city_appointment_arrive_time:1==a.data.sameJourneyTimeType?"":a.data.sameJourneyDateTime},ec_dining_data:{ordering_food_type:1,dining_mode:t.data.dining_mode,people_num:t.data.people_num,take_meal_type:t.data.take_meal_type,location_id:t.data.ec_location_id,account_type:t.data.account_type,allow_add_dish:t.data.allow_add_dish,allow_app_account:t.data.allow_app_account}},pick_up_type:a.data.pickUpType,self_delivery_app_store_id:3==a.data.pickUpType?a.data.selectDelivery.id:"",remark:a.data.orderRemark,address_id:1==a.data.pickUpType?a.data.selectAddress.id:4==a.data.pickUpType?"":a.data.selectSameJourney.id,additional_info:a.data.additional_info,voucher_coupon_goods_info:a.data.exchangeCouponData.voucher_coupon_goods_info,is_pay_on_delivery:a.data.cashOnDelivery?1:0},success:function(e){if(t.setData({totalPayment:e.total_price}),4==t.data.pickUpType&&(clearTimeout(t.timerId),t.data.ec_location_id&&t.clearCartCache(),2==t.data.account_type)){var a="/eCommerce/pages/diningOrderDetail/diningOrderDetail?detail="+e.data+(t.franchisee_id?"&franchisee="+t.franchisee_id:"");return void N.appMethod.turnToPage(a,1)}if(t.data.cashOnDelivery){var n="/eCommerce/pages/goodsOrderPaySuccess/goodsOrderPaySuccess?detail="+e.data+(t.franchisee_id?"&franchisee="+t.franchisee_id:"");N.appMethod.turnToPage(n,1)}else t.payOrder(e.data)},fail:function(){t.requesting=!1,t.loopRequestMultiOrder()},successStatusAbnormal:function(e){if(t.requesting=!1,1==e.status&&t.loopRequestMultiOrder(),1==e.turn_back)return void N.appMethod.showModal({content:"当前正在结算，请勿重复操作",confirm:function(){N.appMethod.turnBack()}})}}),a.saveFormId(e.target.formId))},a.mulShopconfirmPayment=function(e){var t=a,n=a.data,o=n.mulShopsInfo,i=n.leagueBenefitData,s=n.pickUpType,r=n.shopsList,c=n.selectAddress,l=n.selectSameJourney,d=i.selectedBenefitInfo;if(1==s&&!c)return void t.setData({expressAddressNull:!0});if(2==s&&!l)return void N.appMethod.showModal({content:"请选择同城地址",confirmText:"去填写",confirm:function(){t.goSameJourneyAddress()}});if(a.isWriteComplete=!0,r.forEach(function(e,n){if(a.isWriteComplete){var i=e.app_id;t.selectedAppId=i;var r=e.name,c=o[i];if(2==s&&!c.sameJourneyDateTime&&1!=c.sameJourneyTimeType)return N.appMethod.showModal({title:r,content:"请选择取货时间"}),void(a.isWriteComplete=!1);if(3==s){if(!c.selectDelivery)return N.appMethod.showModal({title:r,content:"请选择上门自提地址",confirmText:"去填写",confirm:function(){t.toDeliveryList(key)}}),void(a.isWriteComplete=!1);if(c.selfAppointmentSwitch&&!c.tostoreOrderType)return N.appMethod.showModal({title:r,content:"请选择取货时间"}),void(a.isWriteComplete=!1);if(1==c.selfDeliveryPhone&&!util.isPhoneNumber(c.phone))return N.appMethod.showModal({title:r,content:"请输入正确的手机号"}),void(a.isWriteComplete=!1)}if(c.hasRequiredSuppInfo){if(!c.deliverydWrite&&!c.aloneDeliveryShow)return N.appMethod.showModal({title:r,content:"有商品补充信息未填写，无法进行支付",confirmText:"去填写",confirm:function(){t.goToAdditionalInfo(i)}}),void(a.isWriteComplete=!1);if(c.aloneDeliveryShow){var l=c.additional_info[c.additional_goodsid_arr[0]][0];if(!l.value)return N.appMethod.showModal({title:r,content:"请填写"+l.title,confirmText:"确认"}),void(a.isWriteComplete=!1)}}}}),!a.isWriteComplete||a.requesting)return!1;a.requesting=!0;var u=[];Object.keys(o).forEach(function(a){var n=o[a],i=r.filter(function(e){return e.app_id==a}),c=i[0].cartList.map(function(e){return e.id}),l=(new Date).getFullYear(),d=l+"-"+n.tostoreDateTime+" "+(n.tostoreHourTime||"");u.push({cart_id_arr:c,sub_shop_app_id:a,formId:e.target.formId,selected_benefit:n.selectDiscountInfo||"",is_balance:n.useBalance?1:0,ecommerce_info:{ec_tostore_data:{ec_tostore_order_type:n.tostoreOrderType||"",ec_tostore_appointment_time:1!=n.tostoreOrderType&&n.selfAppointmentSwitch?d:"",ec_tostore_buyer_phone:n.phone||"",ec_tostore_appointment_time_type:n.tostoreTimeType||"",ec_tostore_location_id:n.locationId||""},intra_city_data:{intra_city_appointment_arrive_time:1==n.sameJourneyTimeType?"":n.sameJourneyDateTime||""}},pick_up_type:s,self_delivery_app_store_id:3==s?n.selectDelivery.id:"",remark:n.orderRemark||"",address_id:1==s?t.data.selectAddress.id:4==s?"":t.data.selectSameJourney.id,additional_info:n.additional_info||"",voucher_coupon_goods_info:n.exchangeCouponData&&n.exchangeCouponData.voucher_coupon_goods_info||"",is_pay_on_delivery:n.cashOnDelivery?1:0})}),N.appMethod.sendRequest({url:"/index.php?r=AppShop/MultiAddCartOrder",method:"post",data:{multi_superimposed:1,extra_selected_benefit:d,multi_app_shops:u},success:function(e){if(4==s&&(clearInterval(t.timerId),2==t.data.account_type)){var a="/eCommerce/pages/diningOrderDetail/diningOrderDetail?detail="+e.data+(t.franchisee_id?"&franchisee="+t.franchisee_id:"");return void N.appMethod.turnToPage(a,1)}var n=!0;if(Object.keys(o).forEach(function(e){o[e].cashOnDelivery||(n=!1)}),n){var i="/eCommerce/pages/goodsOrderPaySuccess/goodsOrderPaySuccess?isFranchisee=1&detail="+e.data.master_order.order_id+(t.franchisee_id?"&franchisee="+t.franchisee_id:"");N.appMethod.turnToPage(i,1)}else t.payOrder(e)},fail:function(){t.requesting=!1},successStatusAbnormal:function(){t.requesting=!1}})},a.clearCartCache=function(){N.appMethod.sendRequest({url:"/index.php?r=AppEcommerce/clearLocationCartCache",method:"post",data:{location_id:a.data.ec_location_id,cart_id_arr:a.cart_id_arr,sub_shop_app_id:a.franchisee_id},success:function(e){}})},a.saveFormId=function(e){N.appMethod.sendRequest({hideLoading:!0,url:"/index.php?r=api/AppMsgTpl/SaveUserFormId",data:{form_id:e},method:"post",success:function(e){}})},a.payOrder=function(e){function t(){var e=4==o.data.pickUpType&&2==o.data.account_type?"diningOrderDetail/diningOrderDetail?detail=":"goodsOrderPaySuccess/goodsOrderPaySuccess?detail=",t="/eCommerce/pages/"+e+(o.isFranchisee?s:i)+(o.franchisee_id?"&franchisee="+o.franchisee_id:"")+"&is_group="+!!o.is_group+"&isFranchisee="+(o.isFranchisee?1:0);o.franchisee_id?N.appMethod.turnToPage(t,1):N.appMethod.sendRequest({url:"/index.php?r=AppMarketing/CheckAppCollectmeStatus",data:{order_id:o.isFranchisee?s:i,sub_app_id:o.franchisee_id},success:function(e){0==e.valid&&(t+="&collectBenefit=1"),N.appMethod.turnToPage(t,1)}})}function n(){var e=4==o.data.pickUpType?"diningOrderDetail/diningOrderDetail?detail=":"goodsOrderDetail/goodsOrderDetail?detail=";if(o.is_group){if(o.data.teamToken)return void N.appMethod.turnBack();N.appMethod.turnToPage("/eCommerce/pages/groupOrderDetail/groupOrderDetail?id="+i+(o.franchisee_id?"&franchisee="+o.franchisee_id:""),1)}else o.isFranchisee?N.appMethod.turnToPage("/eCommerce/pages/myOrder/myOrder?goodsType=0&currentIndex=0",1):N.appMethod.turnToPage("/eCommerce/pages/"+e+i+(o.franchisee_id?"&franchisee="+o.franchisee_id:""),1)}var o=a,i="",s="";if(a.isFranchisee?(i=e.extra.map(function(e){return e.order_id}),s=e.data.master_order.order_id):i=e,0==(o.isFranchisee?o.data.payTotalPrice:o.data.totalPayment)){var r="";return"string"==typeof e?r=e:(r=e.extra.filter(function(e){return 0==e.is_pay_on_delivery}),r=r.map(function(e){return e.order_id})),void N.appMethod.sendRequest({url:"/index.php?r=AppShop/paygoods",method:"post",data:{order_id:r,total_price:0,data:o.isFranchisee?r:""},success:function(e){t()},fail:function(){n()},successStatusAbnormal:function(){n()}})}var c={};o.isFranchisee?c.data=e.extra.map(function(e){return{order_id:e.order_id,is_master:e.is_master}}):c.order_id=i,o.requesting=!1,N.appMethod.goPay({orderId:i,franchisee:o.franchisee_id,successUrl:function(){return(4==o.data.pickUpType&&2==o.data.account_type?"/diningOrderDetail?detail=":"/goodsOrderPaySuccess?detail=")+(o.isFranchisee?s:i)+(o.franchisee_id?"&franchisee="+o.franchisee_id:"")+"&is_group="+!!o.is_group+"&isFranchisee="+(o.isFranchisee?1:0)}(),failUrl:function(){var e=4==o.data.pickUpType?"/diningOrderDetail?detail=":"/goodsOrderDetail?detail=";return o.is_group?"/groupOrderDetail?id="+i+(o.franchisee_id?"&franchisee="+o.franchisee_id:""):o.isFranchisee?"/myOrder?goodsType=0&currentIndex=0":e+i+(o.franchisee_id?"&franchisee="+o.franchisee_id:"")}(),cancel:n})},a.goToMyAddress=function(e){var t=e.currentTarget.dataset.addressId;a.isFromSelectAddress=!0,N.appMethod.turnToPage("/eCommerce/pages/myAddress/myAddress?id="+t)},a.useBalanceChange=function(e,t){var n={};t?n["mulShopsInfo."+t+".useBalance"]=e:n.useBalance=e,a.setData(n),a.getCalculationInfo()},a.useCashDelivery=function(e,t){var n={};if(t){n["mulShopsInfo."+t+".cashOnDelivery"]=e;var o=a.data.mulShopsInfo,i=!0;Object.keys(o).forEach(function(e){o[e].cashOnDelivery||(i=!1)}),a.setData({allShopsCashOnDelivery:i})}else n.cashOnDelivery=e;a.setData(n),a.getCalculationInfo()},a.deliveryWayChange=function(e){var t=e.currentTarget.dataset.type;(0,w.updateUrlParam)("type",t),a.setData({selectDiscountInfo:{},pickUpType:t,sameJourneyTimeType:2==t?1:"",isShowPickMask:!1,cashOnDelivery:!1}),3==t?a.getSelfDeliveryList():4==t&&a.getDiningFuncSetting(a.getDiningData),4!=t&&a.getCalculationInfo()},a.goToAdditionalInfo=function(e){var t={},n="";if(a.isFranchisee){n="object"===(void 0===e?"undefined":(0,l.default)(e))?e.currentTarget.dataset.appId:e||a.selectedAppId;var o=a.data.mulShopsInfo;t=o[n].additional_info||{},N.appMethod.setPreviewGoodsInfo(o[n].goodsAdditionalInfo)}else t=a.data.additional_info;N.appMethod.setGoodsAdditionalInfo(t),N.appMethod.turnToPage("/eCommerce/pages/goodsAdditionalInfo/goodsAdditionalInfo?appId="+n)},a.exchangeCouponInit=function(e){var t=a,n={data_id:e};t.isFranchisee&&(n.app_id=t.selectedAppId,n._app_id=t.selectedAppId),N.appMethod.sendRequest({url:"/index.php?r=AppShop/getGoods",data:n,success:function(e){var a=e.data[0].form_data,n=[],o={models:[],price:0,modelId:"",models_text:"",imgurl:""};a.model_items.length?(o.price=Number(a.model_items[0].price),o.imgurl=a.model_items[0].img_url,o.modelId=a.model_items[0].id):(o.price=Number(a.price),o.imgurl=a.cover);for(var i in a.model)i&&(n.push(a.model[i]),o.models.push(a.model[i].subModelId[0]),o.models_text+="“"+a.model[i].subModelName[0]+"” ");if(a.model=n,t.isFranchisee){var s;t.setData((s={},(0,u.default)(s,"mulShopsInfo."+t.selectedAppId+".exchangeCouponData.dialogHidden",!1),(0,u.default)(s,"mulShopsInfo."+t.selectedAppId+".exchangeCouponData.goodsInfo",a),(0,u.default)(s,"mulShopsInfo."+t.selectedAppId+".exchangeCouponData.selectModelInfo",!1),s))}else t.setData({"exchangeCouponData.dialogHidden":!1,"exchangeCouponData.goodsInfo":a,"exchangeCouponData.selectModelInfo":o})},successStatusAbnormal:function(){N.appMethod.showModal({content:"兑换的商品已下架"})}})},a.exchangeCouponHideDialog=function(e){var t={},n=e.currentTarget.dataset.appId;n?(t["mulShopsInfo."+n+".selectDiscountInfo"]={title:"不使用优惠",name:"无",no_use_benefit:1},t["mulShopsInfo."+a.selectedAppId+".exchangeCouponData.dialogHidden"]=!0,t["mulShopsInfo."+a.selectedAppId+".exchangeCouponData.hasSelectGoods"]=!1,t["mulShopsInfo."+a.selectedAppId+".exchangeCouponData.voucher_coupon_goods_info"]={}):(t.selectDiscountInfo={title:"不使用优惠",name:"无",no_use_benefit:1},t["exchangeCouponData.dialogHidden"]=!0,t["exchangeCouponData.hasSelectGoods"]=!1,t["exchangeCouponData.voucher_coupon_goods_info"]={}),a.setData(t),a.getCalculationInfo()},a.exchangeCouponSelectSubModel=function(e){var t={};t=a.isFranchisee?a.data.mulShopsInfo[a.selectedAppId]:a.data;var n=e.target.dataset,o=n.modelIndex,i=n.submodelIndex,s={},r=t.exchangeCouponData.selectModelInfo.models,c=t.exchangeCouponData.goodsInfo.model,l="";r[o]=c[o].subModelId[i];for(var d=0;d<r.length;d++)for(var u=c[d].subModelId,m=0;m<u.length;m++)r[d]==u[m]&&(l+="“"+c[d].subModelName[m]+"” ");a.isFranchisee?(s["mulShopsInfo."+a.selectedAppId+".exchangeCouponData.selectModelInfo.models"]=r,s["mulShopsInfo."+a.selectedAppId+".exchangeCouponData.selectModelInfo.models_text"]=l):(s["exchangeCouponData.selectModelInfo.models"]=r,s["exchangeCouponData.selectModelInfo.models_text"]=l),a.setData(s),a.exchangeCouponResetSelectCountPrice()},a.exchangeCouponResetSelectCountPrice=function(){var e={};e=a.isFranchisee?a.data.mulShopsInfo[a.selectedAppId]:a.data;for(var t=a,n=e.exchangeCouponData.selectModelInfo.models.join(","),o=e.exchangeCouponData.goodsInfo.model_items,i={},s=o.length-1;s>=0;s--)if(o[s].model==n){if(t.isFranchisee){i["mulShopsInfo."+t.selectedAppId+".exchangeCouponData.selectModelInfo.stock"]=o[s].stock,i["mulShopsInfo."+t.selectedAppId+".exchangeCouponData.selectModelInfo.price"]=o[s].price,i["mulShopsInfo."+t.selectedAppId+".exchangeCouponData.selectModelInfo.modelId"]=o[s].id,i["mulShopsInfo."+t.selectedAppId+".exchangeCouponData.selectModelInfo.imgurl"]=o[s].img_url;break}i["exchangeCouponData.selectModelInfo.stock"]=o[s].stock,i["exchangeCouponData.selectModelInfo.price"]=o[s].price,i["exchangeCouponData.selectModelInfo.modelId"]=o[s].id,i["exchangeCouponData.selectModelInfo.imgurl"]=o[s].img_url;break}a.setData(i)},a.exchangeCouponConfirmGoods=function(){var e=a,t={};t=a.isFranchisee?a.data.mulShopsInfo[a.selectedAppId]:a.data;var n=t.exchangeCouponData.goodsInfo,o=n.model,i=t.exchangeCouponData.selectModelInfo.models,s="";if(i.length>0)for(var r=0;r<i.length;r++)for(var c=o[r].subModelId,l=0;l<c.length;l++)i[r]==c[l]&&(s+=o[r].subModelName[l]+"； ");if(n.model_value_str=s,e.isFranchisee){var d;e.setData((d={},(0,u.default)(d,"mulShopsInfo."+e.selectedAppId+".exchangeCouponData.dialogHidden",!0),(0,u.default)(d,"mulShopsInfo."+e.selectedAppId+".exchangeCouponData.selectModelInfo",{}),(0,u.default)(d,"mulShopsInfo."+e.selectedAppId+".exchangeCouponData.voucher_coupon_goods_info",{goods_id:n.id,num:1,model_id:t.exchangeCouponData.selectModelInfo.modelId}),(0,u.default)(d,"mulShopsInfo."+e.selectedAppId+".exchangeCouponData.goodsInfo",n),d))}else e.setData({"exchangeCouponData.dialogHidden":!0,"exchangeCouponData.selectModelInfo":{},"exchangeCouponData.hasSelectGoods":!0,"exchangeCouponData.voucher_coupon_goods_info":{goods_id:n.id,num:1,model_id:t.exchangeCouponData.selectModelInfo.modelId},"exchangeCouponData.goodsInfo":n});e.getCalculationInfo()},a.toDeliveryList=function(e){var t=a,n="",o={},i="object"===(void 0===e?"undefined":(0,l.default)(e))?e.currentTarget.dataset.appId:t.selectedAppId;if(a.isFranchisee){o=t.data.mulShopsInfo[i].selectDelivery}else o=t.data.selectDelivery;t.franchisee_id||i?(n+="?franchiseeId="+(t.franchisee_id||i),n+=o.id?"&deliveryId="+o.id:""):n+=o.id?"?deliveryId="+o.id:"",a.data.onlyImmediatlyPickSwitch&&(a.onlyImme=!0),N.appMethod.turnToPage("/eCommerce/pages/goodsDeliveryList/goodsDeliveryList"+n)},a.showMemberDiscount=function(e){var t={};if(a.isFranchisee){var n=e.currentTarget.dataset,o=n.appId,i=n.isLeague,s=a.data,r=s.mulShopsInfo,c=s.leagueBenefitData;a.selectedAppId=o,t=i?c.selectedBenefitInfo:r[o].selectDiscountInfo,a.setData({selectedAppId:o||"",isLeagueBenefit:i||""})}else t=a.data.selectDiscountInfo;var l={franchisee:a.isFranchisee,afterSelectedDiscount:a.afterSelectedBenefit};a.isFranchisee?l.discountType=a.state.isLeagueBenefit?leagueBenefitData.benefitList:mulShopsInfo[a.selectedAppId].discountList:l.discountType=a.state.discountList,a.memberDiscountRef.current.show(l),a.memberDiscountRef.current.showDialog(t)},a.afterSelectedBenefit=function(e){var t=a.data.isLeagueBenefit;if(a.isFranchisee)if(t)a.setData({"leagueBenefitData.selectedBenefitInfo":e.selectedDiscount});else{var n;a.setData((n={},(0,u.default)(n,"mulShopsInfo."+a.selectedAppId+".selectDiscountInfo",e.selectedDiscount),(0,u.default)(n,"mulShopsInfo."+a.selectedAppId+".exchangeCouponData.hasSelectedGoods",!1),(0,u.default)(n,"mulShopsInfo."+a.selectedAppId+".exchangeCouponData.voucher_coupon_goods_info",{}),n))}else a.setData({selectDiscountInfo:e.selectedDiscount,"exchangeCouponData.hasSelectedGoods":!1,"exchangeCouponData.voucher_coupon_goods_info":{}});a.getCalculationInfo()},a.getSuppInfo=function(e){var t=a,n=[],o=a.data,i=o.shopsList,s=o.mulShopsInfo;a.isFranchisee&&(n=i.map(function(e){var t=[],a=[],n=[];return e.cartList.map(function(e){var o=e.good_info;o.delivery_id&&0!=o.delivery_id&&-1==a.indexOf(o.id)&&(t.push(o.delivery_id),a.push(o.id),n.push(o))}),s[e.app_id].additional_goodsid_arr=a,s[e.app_id].goodsAdditionalInfo=n,s[e.app_id].noAdditionalInfo=!0,{app_id:e.app_id,delivery_id:t}}),n=n.filter(function(e){return e.delivery_id.length}),a.setData({mulShopsInfo:s})),N.appMethod.sendRequest({hideLoading:!0,url:"/index.php?r=pc/AppShop/GetDelivery",method:"post",data:{delivery_ids:e,delivery_arr:n},success:function(e){if(t.isFranchisee){var a=e.data||{};Object.keys(a).forEach(function(e){var n=a[e];if(n.forEach(function(a){a.delivery_info.forEach(function(a){0==a.is_required&&1==a.is_hidden&&t.setData((0,u.default)({},"mulShopsInfo."+e+".hasRequiredSuppInfo",!0)),1==a.is_hidden&&t.setData((0,u.default)({},"mulShopsInfo."+e+".noAdditionalInfo",!1))})}),1==n[0].delivery_info.length&&1==s[e].additional_goodsid_arr.length){var o=0,i=0;if(n[0].delivery_info.forEach(function(e,t){1==e.is_hidden&&(o++,i=t)}),1==o){var r,c={};c[s[e].additional_goodsid_arr[0]]=[],c[s[e].additional_goodsid_arr[0]].push({title:n[0].delivery_info[i].name,type:n[0].delivery_info[i].type,is_required:n[0].delivery_info[i].is_required,value:""}),t.setData((r={},(0,u.default)(r,"mulShopsInfo."+e+".additional_info",c),(0,u.default)(r,"mulShopsInfo."+e+".aloneDeliveryShow",!0),r))}}})}else{for(var n=0;n<e.data.length;n++)for(var o=e.data[n].delivery_info,i=0;i<o.length;i++)0==o[i].is_required&&1==o[i].is_hidden&&t.setData({hasRequiredSuppInfo:!0}),1==o[i].is_hidden&&t.setData({noAdditionalInfo:!1});if(1==e.data.length&&1==t.data.additional_goodsid_arr.length){for(var r=0,c=0,l=0;l<e.data[0].delivery_info.length;l++)1==e.data[0].delivery_info[l].is_hidden&&(r++,c=l);if(1==r){var d={};d[t.data.additional_goodsid_arr[0]]=[],d[t.data.additional_goodsid_arr[0]].push({title:e.data[0].delivery_info[c].name,type:e.data[0].delivery_info[c].type,is_required:e.data[0].delivery_info[c].is_required,value:""}),t.setData({additional_info:d,aloneDeliveryShow:!0})}}}}})},a.getSelfDeliveryList=function(){var e=a,t={};if(e.isFranchisee){var n=a.data.shopsList,o=[];o=n.map(function(e){return{app_id:e.app_id,self_delivery_app_store_id:""}}),t.delivery_arr=o}else t={sub_shop_app_id:a.franchisee_id};N.appMethod.sendRequest({url:"/index.php?r=AppShop/getSelfDeliveryList",method:"post",data:t,success:function(t){if(e.isFranchisee){var a=e.data.mulShopsInfo;Object.keys(t.data).forEach(function(e){if(!t.data[e].store_list_data)return void N.appMethod.showModal({content:"商家暂无自提门店",confirm:function(){N.appMethod.turnBack()}});a[e].selectDelivery=t.data[e].store_list_data[0]}),e.setData({mulShopsInfo:a}),e.getGoodsStoreSet(3)}else{var n=t.data.store_list_data;if(!n)return void N.appMethod.showModal({content:"商家暂无自提门店",confirm:function(){N.appMethod.turnBack()}});1==n.length&&e.setData({selectDelivery:n[0]}),n.length>=2&&!e.data.selectDelivery&&N.appMethod.showModal({content:"当前尚未选择自提点",confirmText:"去设置",showCancel:!0,confirm:function(){e.toDeliveryList()}}),e.getGoodsStoreSet(3)}}})},a.inputFormControl=function(e){var t=e.currentTarget.dataset.appId;if(t){var n=a.data.mulShopsInfo,o=n[t].additional_info;o[n[t].additional_goodsid_arr[0]][0].value=e.target.value,a.setData((0,u.default)({},"mulShopsInfo."+t+".additional_info",o))}else{var i=a.data.additional_info;i[a.data.additional_goodsid_arr[0]][0].value=e.target.value,a.setData({additional_info:i})}},a.addDeliveryImg=function(e){var t=e.currentTarget.dataset.appId,n=a,o="",i="",s={};if(t){var r=a.data.mulShopsInfo;o=r[t].additional_info,i=r[t].additional_goodsid_arr[0]}else o=a.data.additional_info,i=a.data.additional_goodsid_arr[0];var c=o[i][0].value||[];N.appMethod.chooseImage(function(e){o[i][0].value=c.concat(e),t?s["mulShopsInfo."+t+".additional_info"]=o:s.additional_info=o,n.setData(s)},9-o[i][0].value.length)},a.deleteImage=function(e){var t=e.currentTarget.dataset,n=t.appId,o=t.imageIndex,i=a,s="",r="";if(n){var c=a.data.mulShopsInfo;s=c[n].additional_info,r=c[n].additional_goodsid_arr[0]}else s=a.data.additional_info,r=a.data.additional_goodsid_arr[0];var l=s[r][0].value;l.splice(o,1),s[r][0].value=l,n?i.setData((0,u.default)({},"mulShopsInfo."+n+".additional_info",s)):i.setData({additional_info:s})},a.closeGoodsPick=function(){a.setData({isShowPickMask:!1,isShowServiceTime:!1,isShowSameJourneyTime:!1})},a.selectPickMethod=function(e){var t=a,n=a.cart_id_arr;N.appMethod.sendRequest({url:"/index.php?r=AppEcommerce/getCanUsePickUpTypeAtAddOrder",method:"post",data:{cart_id_arr:n,sub_shop_app_id:t.franchisee_id},success:function(a){var n=a.data.goods_pick_up_type_arr;if((0,w.updateUrlParam)("type",t.data.pickUpType&&-1!=t.data.pickUpType?t.data.pickUpType:a.data.goods_pick_up_type_arr[0]),t.setData({dining_data:a.data.dining_data,express_data:a.data.express_data,pickUpTypeArr:n,intraCityData:a.data.intra_city_data,isShowPickMask:"first"!=e,pickUpType:t.data.pickUpType&&-1!=t.data.pickUpType?t.data.pickUpType:a.data.goods_pick_up_type_arr[0]}),"first"==e){switch(t.data.pickUpType){case"4":t.getDiningFuncSetting(t.getDiningData);break;case"3":t.isFranchisee||t.getSelfDeliveryList();break;case"2":if(0==a.data.intra_city_data.in_business_time&&1==n.length)return void N.appMethod.showModal({content:"店铺歇业中，不支持此配送！",confirmText:"知道了",confirm:function(e){N.appMethod.turnBack()}});t.setData({sameJourneyTimeType:1})}4!=t.data.pickUpType&&t.getCalculationInfo()}}})},a.showServiceTime=function(e){var t=a,n={},o="object"===(void 0===e?"undefined":(0,l.default)(e))?e.currentTarget.dataset.appId:a.selectedAppId;a.selectedAppId=o||"";var i=a.data.mulShopsInfo;a.isFranchisee?(n=i[o].selectDelivery,a.setData({selectedAppId:o})):n=a.data.selectDelivery,N.appMethod.sendRequest({url:"/index.php?r=AppEcommerce/GetEcTostoreAppointmentDateList",data:{app_id:o||N.appMethod.getAppId(),_app_id:o||N.appMethod.getAppId(),sub_shop_app_id:t.franchisee_id||"",self_delivery_app_store_id:n.id||""},success:function(a){var n=a.data;if("onlyImme"==e){if(t.isFranchisee){var s;return void t.setData((s={},(0,u.default)(s,"mulShopsInof."+t.selectedAppId+".waitingQueueTime",n.duration_time),(0,u.default)(s,"mulShopsInof."+t.selectedAppId+".tostoreOrderType",1),s))}return void t.setData({waitingQueueTime:n.duration_time,tostoreOrderType:1})}var r=n.setting_data.appointment.appointment_time_type,c="",l="",d=n.date_arr,m=n.setting_data.appointment.advance_appointment_info,p=(new Date).getHours(),f=n.business_time_rule,g=24,h=(new Date).getMinutes(),v=!1,_=1==n.setting_data.immediate_info.status&&1==m.type,y=!0;if(2==f.type){var E=d[0].week,b=void 0;f.custom.business_time.map(function(e){0==E&&(E=7),1==e.business_week[E-1]&&(b=e.business_time_interval,g=+b[b.length-1].end_time.substring(0,2))}),b&&b.map(function(e){var t=Number(e.start_time.substring(0,2)),a=Number(e.end_time.substring(0,2)),n=Number(e.start_time.substring(3,5));Number(e.end_time.substring(3,5));(p>t&&p<a||p==t&&h>=n)&&(v=!0)})}else v=!0;for(var N=0;N<d.length;N++)if(0==N&&(2==m.type&&+m.num+p>=g||1==m.type&&p>=g)&&(d[N].is_vaild=0),1==d[N].is_vaild&&1!=r){c=d[N].date,l=d[N].week;break}if(d.map(function(e){1==e.is_vaild&&(y=!1)}),t.businessTimeType=f.type,t.isFranchisee){var R;t.setData((R={},(0,u.default)(R,"mulShopsInfo."+o+".getEcTostoredate",n),(0,u.default)(R,"mulShopsInfo."+o+".waitingQueueTime",n.duration_time),(0,u.default)(R,"mulShopsInfo."+o+".tostoreTimeType",r),(0,u.default)(R,"mulShopsInfo."+o+".noImmediaPick",_),(0,u.default)(R,"mulShopsInfo."+o+".tostoreDateTime",i[t.selectedAppId].tostoreDateTime?i[t.selectedAppId].tostoreDateTime:c),(0,u.default)(R,"mulShopsInfo."+o+".tostoreWeekTime",i[t.selectedAppId].tostoreWeekTime?i[t.selectedAppId].tostoreWeekTime:l),(0,u.default)(R,"mulShopsInfo."+o+".businessTimeRule",1==f.type?"":f.custom.business_time),(0,u.default)(R,"mulShopsInfo."+o+".advanceAppointmentInfo",m),(0,u.default)(R,"mulShopsInfo."+o+".noAppointmentShow",y),(0,u.default)(R,"mulShopsInfo."+o+".showImmediatelyTime",v),(0,u.default)(R,"isShowServiceTime",!0),R))}else t.setData({getEcTostoredate:n,waitingQueueTime:n.duration_time,tostoreTimeType:r,isShowServiceTime:!0,noImmediaPick:_,tostoreDateTime:t.data.tostoreDateTime?t.data.tostoreDateTime:c,tostoreWeekTime:t.data.tostoreWeekTime?t.data.tostoreWeekTime:l,businessTimeRule:1==f.type?"":f.custom.business_time,advanceAppointmentInfo:m,noAppointmentShow:y,showImmediatelyTime:v});1!=r&&t.getTostoreTime(),2==f.type&&t.getNoAppointmentWord()}})},a.getNoAppointmentWord=function(){var e="商家营业时间：",t="",n={};n=a.isFranchisee?a.data.mulShopsInfo[a.selectedAppId]:a.data,n.businessTimeRule.map(function(t){for(var a=0;a<t.business_week.length;a++)if(1==t.business_week[a])switch(a){case 0:e+="周一、";break;case 1:e+="周二、";break;case 2:e+="周三、";break;case 3:e+="周四、";break;case 4:e+="周五、";break;case 5:e+="周六、";break;case 6:e+="周日、"}t.business_time_interval.map(function(t){e+=t.start_time+"-"+t.end_time+" "})});var o=n.getEcTostoredate.setting_data.appointment,i=o.advance_appointment_info;switch(i.type){case"1":t+="无需提前，";break;case"2":t+="需提前"+i.num+"小时，";break;case"3":t+="需提前"+i.num+"天，"}if(t+="最多可预约"+o.valid_days+"天内时间",a.isFranchisee){var s;a.setData((s={},(0,u.default)(s,"mulShopsInfo."+a.selectedAppId+".noAppointmentWorda",e),(0,u.default)(s,"mulShopsInfo."+a.selectedAppId+".noAppointmentWordb",t),s))}else a.setData({noAppointmentWorda:e,noAppointmentWordb:t})},a.getPhoneNumber=function(e){var t=a;/getPhoneNumber:fail/.test(e.target.errMsg)||N.appMethod.sendRequest({url:"/index.php?r=AppUser/GetPhoneNumber",data:{encryptedData:e.target.encryptedData,iv:e.target.iv},success:function(e){if(N.appMethod.setUserInfoStorage({phone:e.data}),t.isFranchisee){var a=t.data.mulShopsInfo;Object.keys(a).forEach(function(t){a[t].phone=e.data}),t.setData({mulShopsInfo:a})}else t.setData({phone:e.data})},successStatus5:function(){N.appMethod.goLogin({success:function(){N.appMethod.showModal({content:"获取手机号失败，请再次点击授权获取"})},fail:function(){N.appMethod.showModal({content:"获取手机号失败，请再次点击授权获取"})}})}})},a.inputPhoneNumber=function(e){if(a.isFranchisee){var t=(e.currentTarget.dataset.appId,a.data.mulShopsInfo);Object.keys(t).forEach(function(a){var n=t[a];n.phone||(n.phone=e.target.model_value)}),a.setData({mulShopsInfo:t})}else a.setData({phone:e.target.value})},a.getInStoreSeat=function(){var e=a;N.appMethod.scanCode({success:function(t){var a=t.path,n=a.split(/\?location_id=/)[1];N.appMethod.sendRequest({url:"/index.php?r=AppEcommerce/getEcLocationData",data:{id:n,sub_shop_app_id:e.franchisee_id},success:function(t){0==t.data.status?e.setData({locationId:n,inStoreSeatName:t.data.title}):N.appMethod.showModal({content:"未检索到座位号"})}})},fail:function(e){N.appMethod.showModal({content:"未检索到座位号"})}})},a.goSameJourneyAddress=function(e){var t=a.data.selectSameJourney;a.isFromSelectAddress=!0,N.appMethod.turnToPage("/eCommerce/pages/goodsSameJourney/goodsSameJourney?from=preview&sameJourneyId="+(t?t.id:"")+"&franchiseeId="+a.franchisee_id)},a.getGoodsStoreSet=function(e){var t=a,n={};if(t.isFranchisee){var o=a.data.shopsList;n.app_data_arr=o.map(function(t){return{app_id:t.app_id,pick_up_type:e}})}else n={pick_up_type:e,sub_shop_app_id:a.franchisee_id};N.appMethod.sendRequest({url:"/index.php?r=AppEcommerce/getPickUpGoodsTypeSetting",method:"post",data:n,success:function(a){if(t.isFranchisee){if(3==e){var n=t.data.mulShopsInfo;Object.keys(a.data).forEach(function(e){var o=a.data[e].config_data;n[e].selfAppointmentSwitch=1==o.pick_up_time_status&&1==o.appointment.status,n[e].onlyImmediatlyPickSwitch=1==o.pick_up_time_status&&1!=o.appointment.status&&1==o.immediate_info.self_pcik_up_status,n[e].selfDeliveryPhone=o.is_phone,n[e].selfDeliveryScan=1==o.pick_up_time_status&&1==o.immediate_info.status&&1==o.immediate_info.scan_qrcode_status,n[e].onlyImmediatlyPickSwitch&&(t.selectedAppId=e,t.showServiceTime("onlyImme"))}),t.setData({mulShopsInfo:n})}else if(2==e){var o=a.data[t.selectedAppId].config_data;t.getsameJourneyTime(o.business_rule)}}else{var i=a.data.config_data;3==e&&i?(t.setData({selfAppointmentSwitch:1==i.pick_up_time_status&&1==i.appointment.status,onlyImmediatlyPickSwitch:1==i.pick_up_time_status&&1!=i.appointment.status&&1==i.immediate_info.self_pcik_up_status,selfDeliveryPhone:i.is_phone,selfDeliveryScan:1==i.pick_up_time_status&&1==i.immediate_info.status&&1==i.immediate_info.scan_qrcode_status}),t.data.onlyImmediatlyPickSwitch&&t.data.selectDelivery&&t.showServiceTime("onlyImme")):2==e&&i?t.getsameJourneyTime(i.business_rule):4==e&&t.setData({app_store_data:a.data.app_store_data||""})}}})},a.tostoreImmediately=function(e){var t={};if(a.isFranchisee){var n=e.currentTarget.dataset.appId;t["mulShopsInfo."+n+".tostoreOrderType"]=1,t["mulShopsInfo."+n+".tostoreHourTime"]="",t.isShowServiceTime=!1}else t.tostoreOrderType=1,t.tostoreHourTime="",t.isShowServiceTime=!1;a.setData(t)},a.selectTostoreTime=function(e){var t=a,n=a.data.mulShopsInfo,o=a.isFranchisee?n[a.selectedAppId].getEcTostoredate.date_arr:a.data.getEcTostoredate.date_arr,i=e.currentTarget.dataset.index,s=o[i].date,r=o[i].week;if(a.isFranchisee){var c;a.setData((c={},(0,u.default)(c,"mulShopsInfo."+a.selectedAppId+".tostoreOrderType",2),(0,u.default)(c,"mulShopsInfo."+a.selectedAppId+".dateIndex",i),(0,u.default)(c,"mulShopsInfo."+a.selectedAppId+".tostoreDateTime",s),(0,u.default)(c,"mulShopsInfo."+a.selectedAppId+".tostoreWeekTime",r),(0,u.default)(c,"isShowServiceTime",1!=n[t.selectedAppId].tostoreTimeType),c))}else a.setData({tostoreOrderType:2,dateIndex:i,tostoreDateTime:s,tostoreWeekTime:r,isShowServiceTime:1!=a.data.tostoreTimeType});a.getTostoreTime()},a.getTostoreTime=function(){var e={};if(a.isFranchisee){var t=a.data.mulShopsInfo;e=t[a.selectedAppId]}else e=a.data;var n=(new Date).getMonth()+1,o=(new Date).getMinutes(),i=(new Date).getHours(),s=(new Date).getDate(),r=(n<10?"0"+n:n)+"-"+(s<10?"0"+s:s),c=[],l=!0,d=e.businessTimeRule,m=Number(e.tostoreWeekTime),p=void 0,f=1==a.businessTimeType,g=e.advanceAppointmentInfo,h=+g.num+i>24?+g.num+i-24:+g.num+i;if(2==a.businessTimeType&&d.map(function(e){0==m&&(m=7),1==e.business_week[m-1]&&(p=e.business_time_interval)}),r===e.tostoreDateTime)if(2==a.businessTimeType)p&&p.map(function(t){var a=i,n=Number(t.end_time.substring(0,2)),s=Number(t.start_time.substring(0,2)),r=Number(t.end_time.substring(0,2)),l=Number(t.start_time.substring(3,5)),d=Number(t.end_time.substring(3,5));if(i<h&&(a=i=h),(i>s&&i<r||i==s&&o>=l)&&!h&&(f=!0),i<s)i=s,o=0;else if(i>r)return;for(;i<=r;i++)if(2==e.tostoreTimeType){if(i==n)continue;c.push(i+":00-"+(i+1)+":00")}else{if(i==a&&o<=30&&0!=o){c.push(i+":30-"+(i+1)+":00");continue}if(i==a&&o>30)continue;if(i==n&&d>=30){c.push(i+":00-"+i+":30");continue}if(i==n&&0==d)continue;c.push(i+":00-"+i+":30"),c.push(i+":30-"+(i+1)+":00")}});else for(i<h&&(i=h);i<24;i++)if(2==e.tostoreTimeType){if(l&&o>0&&(l=!1,i++),i>=24)continue;c.push(i+":00-"+(i+1)+":00")}else{if(l&&o>0&&o<=30){l=!1,c.push(i+":30-"+(i+1)+":00");continue}if(l&&o>30&&(l=!1,i++),i>=24)continue;c.push(i+":00-"+i+":30"),c.push(i+":30-"+(i+1)+":00")}else if(2==a.businessTimeType)p&&p.map(function(t){var a=Number(t.start_time.substring(0,2)),n=Number(t.end_time.substring(0,2)),o=Number(t.start_time.substring(0,2));e.getEcTostoredate.date_arr[1].date==e.tostoreDateTime&&o<h&&+g.num+i>24&&(o=h);for(var s=Number(t.end_time.substring(0,2)),r=Number(t.start_time.substring(3,5)),l=Number(t.end_time.substring(3,5));o<=s;o++)if(2==e.tostoreTimeType){if(o==n||o==a&&r>0)continue;c.push(o+":00-"+(o+1)+":00")}else{if(o==a&&r<=30&&0!=r){c.push(o+":30-"+(o+1)+":00");continue}if(o==a&&r>30)continue;if(o==n&&l<=30&&0!=l){c.push(o+":00-"+o+":30");continue}if(o==n&&0==l)continue;c.push(o+":00-"+o+":30"),c.push(o+":30-"+(o+1)+":00")}});else{var v=0;for(e.getEcTostoredate.date_arr[1].date==e.tostoreDateTime&&v<h&&+g.num+i>24&&(v=h);v<24;v++)2==e.tostoreTimeType?c.push(v+":00-"+(v+1)+":00"):(c.push(v+":00-"+v+":30"),c.push(v+":30-"+(v+1)+":00"))}if(a.isFranchisee){var _;a.setData((_={},(0,u.default)(_,"mulShopsInfo."+a.selectedAppId+".tostoreHoursArr",c),(0,u.default)(_,"mulShopsInfo."+a.selectedAppId+".showImmediatelyTime",f),_))}else a.setData({tostoreHoursArr:c,showImmediatelyTime:f})},a.selectTostoreHourTime=function(e){var t=a,n=[];if(a.isFranchisee){n=a.data.mulShopsInfo[a.selectedAppId].tostoreHoursArr}else n=a.data.tostoreHoursArr;var o=e.currentTarget.dataset.index,i=n[o];if(a.isFranchisee){var s;a.setData((s={},(0,u.default)(s,"mulShopsInfo."+t.selectedAppId+".tostoreOrderType",2),(0,u.default)(s,"mulShopsInfo."+t.selectedAppId+".tostoreHourTime",i),(0,u.default)(s,"isShowServiceTime",!1),s))}else a.setData({tostoreOrderType:2,tostoreHourTime:i,isShowServiceTime:!1})},a.showSameJourneyTime=function(e){var t=e.currentTarget.dataset.appId;if(a.selectedAppId=t||"",a.isFranchisee&&a.setData({selectedAppId:t}),!a.data.selectSameJourney.id)return void N.appMethod.showModal({content:"请先选择地址"});a.getGoodsStoreSet(2)},a.getsameJourneyTime=function(e){var t="";if(a.isFranchisee){t=a.data.mulShopsInfo[a.selectedAppId].sameJourneyImmediatlyTime}else t=a.data.sameJourneyImmediatlyTime;var n=[],o=(new Date).getMinutes()+Number(t),i=(new Date).getHours();if(o>=60&&(i++,o-=60),1==e.type)for(var s=!0;i<24;i++)s&&o>0&&o<=30?(s=!1,n.push(i+":30")):(s&&o>30&&(s=!1,i++),n.push(i+":00"),n.push(i+":30"));else{var r=(new Date).getDay(),c=void 0;2==e.type&&e.custom.business_time.map(function(e){0==r&&(r=7),1==e.business_week[r-1]&&(c=e.business_time_interval)}),c&&c.map(function(e){var t=i,a=Number(e.end_time.substring(0,2)),s=Number(e.start_time.substring(0,2)),r=Number(e.end_time.substring(0,2)),c=(Number(e.start_time.substring(3,5)),Number(e.end_time.substring(3,5)));if(i<=s)i=s,o=0;else if(i>r)return;for(;i<=r;i++)i==t&&o<=30&&0!=o?n.push(i+":30"):i==t&&o>30||(i==a&&c<30?n.push(i+":00"):i==a&&0==c||(n.push(i+":00"),n.push(i+":30")))})}if(a.isFranchisee){var l;a.setData((l={},(0,u.default)(l,"mulShopsInfo."+a.selectedAppId+".sameJourneyHoursArr",n),(0,u.default)(l,"isShowSameJourneyTime",!0),l))}else a.setData({sameJourneyHoursArr:n,isShowSameJourneyTime:!0})},a.selectSameJourneyTime=function(e){var t=e.currentTarget.dataset,n=t.type,o=t.index;if(a.isFranchisee){var i,s=a.data,r=s.mulShopsInfo,c=s.selectedAppId,l=r[c].sameJourneyHoursArr,d=l[o];a.setData((i={},(0,u.default)(i,"mulShopsInfo."+c+".sameJourneyTimeType","immedia"==n?1:2),(0,u.default)(i,"mulShopsInfo."+c+".sameJourneyDateTime","immedia"==n?"":d),(0,u.default)(i,"isShowSameJourneyTime",!1),i))}else{var m=a.data.sameJourneyHoursArr,p=e.currentTarget.dataset.index,f=m[p];a.setData({sameJourneyTimeType:"immedia"==n?1:2,sameJourneyDateTime:"immedia"==n?"":f,isShowSameJourneyTime:!1})}},a.inputPhone=function(e){if(a.isFranchisee){var t=e.currentTarget.dataset.appId,n=a.data.mulShopsInfo;Object.keys(n).forEach(function(a){var o=n[a];a==t&&(o.phone=e.target.value)}),a.setData({mulShopsInfo:n})}else a.setData({phone:e.target.value})},a.hidePerfectAddress=function(){a.setData({expressAddressNull:!1})},a.manuallyAddAddress=function(){a.isFromSelectAddress=!0,N.appMethod.turnToPage("/eCommerce/pages/addAddress/addAddress")},a.importWeChatAddress=function(){var e=a;N.appMethod.chooseAddress({success:function(t){N.appMethod.sendRequest({method:"post",url:"/index.php?r=AppShop/AddWxAddress",data:{detailInfo:t.detailInfo||"",cityName:t.cityName||"",provinceName:t.provinceName||"",UserName:t.userName||"",telNumber:t.telNumber||"",district:t.district||"",countyName:t.countyName||""},success:function(){e.getCalculationInfo()}})}})},a.stopPropagation=function(){},a.showMoreGoods=function(){a.setData({showMoreGoods:!a.data.showMoreGoods})},a.needLoopRequest=!0,a.loopRequestMultiOrder=function(){var e=a;0==a.timerId&&a.getMultiOrder(),clearTimeout(a.timerId),a.timerId=setTimeout(function(){e.getMultiOrder()},4e3)},a.requestNum=0,a.getMultiOrder=function(){var e=a;e.needLoopRequest&&N.appMethod.sendRequest({url:"/index.php?r=AppEcommerce/getMultiOrderingVerticalCart",data:{sub_shop_app_id:a.franchisee_id,location_id:a.data.ec_location_id,get_user_list:1},hideLoading:!0,success:function(t){if(e.needLoopRequest=!1,t.is_notice)return clearTimeout(e.timerId),void N.appMethod.showModal({content:"您的同桌"+t.buyer_nickname+"已下单",confirmText:"知道了",confirm:function(){N.appMethod.turnBack()}});if(clearTimeout(e.timerId),0==t.data.length)return void N.appMethod.showModal({content:"商品被清空，请重新添加",confirmText:"知道了",confirm:function(){N.appMethod.turnBack()}});if(e.loopRequestMultiOrder(),t.is_reload||!(e.requestNum>0)){e.requestNum+=1,e.is_reload=t.is_reload,e.cart_data_arr=[],e.cart_id_arr=[];var a=t.buyer_info,n=t.user_list,o=[];o=t.data;for(var i=0;i<n.length;i++)1==n[i].is_myself&&e.setData({my_self:n[i].buyer_id});for(var s=0;s<=o.length-1;s++){var r=o[s],c=r.model_value;r.model_value_str=c&&c.join?c.join("； "):"",e.cart_data_arr.push({cart_id:r.id,goods_id:r.goods_id,model_id:r.model_id,num:r.num}),r.buyer_id==e.data.my_self&&e.cart_id_arr_my.push(o[s].id),e.cart_id_arr.push(r.id)}for(var l=0;l<a.length;l++)for(var d=0,u=a[l],m=0;m<o.length;m++){var p=o[m];p.buyer_id==u.buyer_id&&(d+=p.num-0,u.num=d)}e.setData({buyer_list:t.buyer_info,goodsList:o,only_me:!1}),o.length&&e.getCalculationInfo()}},fail:function(){N.appMethod.showModal({content:"网络异常，请重新下单",confirm:function(){N.appMethod.turnBack()}})},complete:function(t){e.needLoopRequest=!0}})},a.getDiningFuncSetting=function(e){var t=a;N.appMethod.sendRequest({url:"/index.php?r=AppEcommerce/getFuncSetting",data:{sub_shop_app_id:a.franchisee_id,ordering_food_type:1,pick_up_type:4},success:function(a){for(var n=a.data.take_meal_type||[],o=[],i=0;i<n.length;i++)o.push({label:t.data.take_meal_type_text[n[i]],value:n[i]});t.path=a.data.add_dish_info.page||"",t.setData({take_meal_type:n[0],take_meal_type_arr:o,location_status:0!=a.data.location_status,account_type:a.data.account_info.account_type,allow_add_dish:1==a.data.add_dish_info.allow_app_status,allow_app_account:!!a.data.account_info.account_way[1]}),t.getGoodsStoreSet(4),"function"==typeof e&&e()}})},a.checkIsAddDishing=function(){var e=a;if(1==e.data.account_type)return void(e.data.is_together?e.loopRequestMultiOrder():e.getCalculationInfo());N.appMethod.sendRequest({url:"/index.php?r=AppEcommerce/CheckLocationIsEmpty",data:{location_id:a.data.ec_location_id},success:function(t){e.setData({is_addDishing:!t.data,people_num:t.data?e.data.people_num:0}),t.ec_dining_data&&(t.ec_dining_data.dining_mode&&e.setData({dining_mode:t.ec_dining_data.dining_mode}),t.ec_dining_data.take_meal_type&&e.setData({take_meal_type:t.ec_dining_data.take_meal_type})),e.data.is_together?e.loopRequestMultiOrder():e.getCalculationInfo()}})},a.turnToAddDish=function(){if(a.franchisee_id){var e=a;return void N.appMethod.showModal({title:"温馨提示",content:"子店商品继续点菜只能跳转子店首页或者连锁首页",showCancel:!0,confirm:function(){e.goToHomepage()}})}var t=JSON.parse(a.path),n=t.action;k.clickEventHandler[n]&&k.clickEventHandler[n](t,"","")},a.goToHomepage=function(){var e=a,t=e.franchisee_id,n=N.appMethod.getChainId();if(t&&t!=n){var o=N.appMethod.getCurrentPages(),i=o[o.length-2];i&&"franchisee/pages/goodsMore/goodsMore"==i.route?N.appMethod.turnBack({delta:2}):k.clickEventHandler["to-franchisee"]({"franchisee-id":t})}else{var s=N.appMethod.getHomepageRouter();N.appMethod.reLaunch({url:"/pages/"+s+"/"+s})}},a.selectCustomNum=function(e){var t=e.target.value-0;a.setData({people_num:t+1}),a.getCalculationInfo()},a.scanPlaceInfo=function(e){var t=a;a.saveFormId(e.target.formId),N.appMethod.scanCode({success:function(e){var a=e.path;if(!a)return void N.appMethod.showModal({content:"位置码错误，请重新扫码!",confirmText:"知道了"});var n=a.split("?");if(n[0]==a)return"";for(var o=n[1].split("&"),i={},s=0;s<o.length;s++){var r=o[s].split("=");i[r[0]]=r[1]}var c=t.data.ec_location_id;t.scanInitUserInfo(c,i.ec_location_id,t.checkIsAddDishing)},fail:function(e){console.log(e)}})},a.scanInitUserInfo=function(e,t,n){var o=a;N.appMethod.sendRequest({url:"/index.php?r=AppEcommerce/scanQrcodeInitCartUserInfo",data:{sub_shop_app_id:a.franchisee_id,pre_location_id:e||"",location_id:t||a.data.ec_location_id,cart_id_arr:a.cart_id_arr_my},method:"post",success:function(e){0==e.status&&(o.franchisee_id?(N.appMethod.globalData[o.franchisee_id]={},N.appMethod.globalData[o.franchisee_id].ec_location_id=t):N.appMethod.globalData.ec_location_id=t,o.setData({ec_location_id:t,location_name:e.data.location_title||""}),"function"==typeof n&&n(o.getCalculationInfo))},successStatusAbnormal:function(e){1==e.status&&o.data.ec_location_id&&o.data.is_together&&o.loopRequestMultiOrder()}})},a.changeTakeMealType=function(e){var t=a.state.take_meal_type_arr.findIndex(function(t){return t.value===e[0]});a.setData({take_meal_type_index:t,take_meal_type:e[0]}),a.getCalculationInfo()},a.changeDiningMode=function(e){a.setData({dining_mode:e[0]}),a.getCalculationInfo()},a.changeCustomNum=function(e){a.setData({people_num:e[0]}),a.getCalculationInfo()},a.turnToStore=function(){},a.callPhone=function(e){N.appMethod.callPhone(e)},a.showVipGoodsList=function(){a.setData({showVipGoodsList:!0})},a.hideVipGoodsList=function(){a.setData({showVipGoodsList:!1})},document.title="确认支付",N.appMethod.getCurrentPage().callbackData&&(a.currentPage=N.appMethod.getCurrentPage()),a}return(0,y.default)(t,e),(0,g.default)(t,[{key:"handleCurrentPage",value:function(){if(this.currentPage){var e=this.currentPage.callbackData;e&&(this.setData(e),this.currentPage.clearCallbackData(),this.currentPage.additional_info&&(this.additional_info=this.currentPage.additional_info,delete this.currentPage.additional_info),this.currentPage.hasRequiredSuppInfo&&(this.hasRequiredSuppInfo=this.currentPage.hasRequiredSuppInfo,delete this.currentPage.hasRequiredSuppInfo))}}},{key:"componentWillMount",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,w.getCurrentPageQueryParams)();this.isFranchisee=!!t.isFranchisee,this.franchisee_id=t.franchisee||"";var a="true"===t.is_together,n=t.team_token||"",o=t.group_buy_people||0,i=t.limit_buy||"",s=t.type||"",r=t.addressId||"",c="";c=this.franchisee_id?N.appMethod.globalData[this.franchisee_id]?N.appMethod.globalData[this.franchisee_id].ec_location_id:"":t.ec_location_id||N.appMethod.globalData.ec_location_id||"",this.cart_id_arr=t.cart_arr?decodeURIComponent(t.cart_arr).split(","):[],this.is_group=t.is_group||"",this.setData({ec_location_id:c,is_together:a,pickUpType:s,canChangeSelect:4!=s,sameJourneyTimeType:2==s?1:"",selectSameJourneyId:2==s?r:"",selectAddressId:1==s?r:"",limit_buy:i,is_group:this.is_group,teamToken:n,group_buy_people:o,phone:N.appMethod.getUserInfo().phone,isFranchisee:this.isFranchisee}),this.dataInitial(),setTimeout(function(){e.handleCurrentPage()},2e3)}},{key:"componentDidMount",value:function(){this.isFromSelectAddress&&(this.getCalculationInfo(),this.isFromSelectAddress=!1),this.onlyImme&&(this.showServiceTime("onlyImme"),this.onlyImme=!1)}},{key:"componentDidHide",value:function(){clearTimeout(this.timerId)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timerId),this.setState=function(e,t){}}},{key:"render",value:function(){var e,t=this,a=this.state,n=(a.showGetUserInfo,a.isLeagueBenefit,a.leagueBenefitData),o=a.mulShopsInfo,s=a.selectedAppId,c=a.isFranchisee,l=a.discountList,d=a.is_addDishing,m=a.location_name,p=a.customNumArr,f=a.people_num,g=a.pickUpTypeArr,h=a.canChangeSelect,v=a.pickUpType,_=a.storeStyle,y=a.selectAddress,E=a.selectDelivery,R=a.selectSameJourney,k=a.dining_mode_arr,C=a.dining_mode,D=a.take_meal_type_arr,M=a.take_meal_type_index,T=a.take_meal_type,P=a.ec_location_id,L=a.app_store_data,A=a.goodsList,F=a.showMoreGoods,O=a.buyer_list,B=a.my_self,j=a.only_me,G=a.is_group,q=a.sameJourneyTimeType,U=a.sameJourneyImmediatlyTime,z=a.sameJourneyDateTime,V=a.tostoreDateTime,W=a.tostoreTimeType,H=a.tostoreOrderType,J=a.waitingQueueTime,Y=a.tostoreHourTime,Q=a.selfAppointmentSwitch,K=a.onlyImmediatlyPickSwitch,X=a.phone,$=a.selfDeliveryPhone,Z=a.inStoreSeatName,ee=a.selfDeliveryScan,te=a.exchangeCouponData,ae=a.tissue_fee,ne=a.server_fee,oe=a.box_fee,ie=a.original_price,se=a.express_fee,re=a.account_type,ce=a.selectDiscountInfo,le=a.selectDiscountIndex,de=a.discount_cut_price,ue=a.vip_cut_price,me=a.is_vip_order,pe=a.useBalance,fe=a.deduction,ge=a.balance,he=a.cashOnDelivery,ve=a.totalPayment,_e=a.canCashDelivery,ye=a.selfPayOnDelivery,Ee=a.hasRequiredSuppInfo,be=a.deliverydWrite,Ne=a.noAdditionalInfo,Re=a.aloneDeliveryShow,ke=a.orderRemark,we=a.total_discount_cut_price,xe=a.allow_add_dish,Ce=(a.dialogHidden,a.selectModelInfo,a.goodsInfo,a.additional_info),De=a.additional_goodsid_arr,Se=a.shopsList,Ie=a.is_vip_goods,Me=a.isMember,Te=a.allShopsCashOnDelivery,Pe=a.intraCityData,Le=a.dining_data,Ae=a.goodsIcon,Fe=a.express_data,Oe=a.isShowPickMask,Be=a.noImmediaPick,je=a.showImmediatelyTime,Ge=a.getEcTostoredate,qe=a.dateIndex,Ue=a.tostoreHoursArr,ze=a.noAppointmentShow,Ve=a.noAppointmentWordb,We=a.noAppointmentWorda,He=a.isShowServiceTime,Je=a.sameJourneyHoursArr,Ye=a.isShowSameJourneyTime,Qe=a.expressAddressNull,Ke=a.vip_cart_info,Xe=a.vip_goods_list,$e=a.showVipGoodsList,Ze=N.appMethod.getCurrentPage(),et=Ze.callbackData;return et&&(y=et.selectAddress,this.state.selectAddress=et.selectAddress),p=p.map(function(e){return{label:e,value:e}}),b.default.createElement("div",{className:"official-page preview-goods-order"},!c&&b.default.createElement(b.default.Fragment,null,b.default.createElement("div",{className:"preview-goods-wrap"},d&&b.default.createElement("div",{className:"pick-method flex-between",style:(0,w.convertLineStyleData)("font-weight:bold;")},b.default.createElement("span",null,"桌位号"),b.default.createElement("span",null,m)),d&&b.default.createElement("div",{className:"pick-method",style:(0,w.convertLineStyleData)("margin-bottom:20rpx;")},b.default.createElement(r.default,{className:"pick-method-box",style:(0,w.convertLineStyleData)("border-bottom:0;"),cols:1,data:p,value:[1],onChange:this.selectCustomNum},b.default.createElement("div",null,b.default.createElement("span",{style:(0,w.convertLineStyleData)("font-weight:bold;")},"就餐人数"),b.default.createElement("span",{className:"pull-right ico-moon icon-rightarrow"}),b.default.createElement("span",{className:"pull-right pick-method-title",style:(0,w.convertLineStyleData)("font-weight:bold;")},f)))),b.default.createElement("div",{className:"pick-method",onClick:g&&g.length>1&&h?this.selectPickMethod:null,hidden:d,style:(0,w.convertLineStyleData)(4==v?"margin-bottom:20rpx;":"")},b.default.createElement("div",{className:"pick-method-box"},b.default.createElement("span",{style:(0,w.convertLineStyleData)("color:"+_.theme),className:"ico-moon icon-goods-pick-model"}),"取货方式",g&&g.length>1&&h&&b.default.createElement("span",{className:"pull-right ico-moon icon-rightarrow"}),b.default.createElement("span",{className:"pull-right pick-method-title"},1==v?"快递":2==v?"同城":3==v?"自提":"堂食点餐"))),1==v&&b.default.createElement("div",{className:"preview-section"},y&&y.id?b.default.createElement(b.default.Fragment,null,b.default.createElement("div",{className:"address-box",onClick:this.goToMyAddress,"data-address-id":y.id},b.default.createElement("span",{className:"ico-moon icon-goods-location"}),b.default.createElement("div",{className:"address-detail"},b.default.createElement("div",{className:"buyer-name-box"},b.default.createElement("span",{className:"store-config-label",style:(0,w.convertLineStyleData)("background:"+_.theme)},"快递"),b.default.createElement("span",{className:"buyer-name"},y.address_info.name),b.default.createElement("span",null,y.address_info.contact)),b.default.createElement("div",{className:"buyer-address"},y.address_info.province.text+y.address_info.city.text+y.address_info.district.text+y.address_info.detailAddress)),b.default.createElement("div",{className:"ico-moon icon-rightarrow"}))):b.default.createElement(b.default.Fragment,null,b.default.createElement("div",{className:"address-null-box",onClick:this.goToMyAddress},b.default.createElement("div",{className:"pull-right ico-moon icon-rightarrow"}),b.default.createElement("div",null,b.default.createElement("span",{className:"ico-moon icon-goods-location"}),b.default.createElement("span",{className:"add-new-address"},"新增地址"))))),3==v&&b.default.createElement("div",{className:"preview-section"},E&&E.id?b.default.createElement(b.default.Fragment,null,b.default.createElement("div",{className:"address-box",onClick:this.toDeliveryList,"data-address-id":E.id},b.default.createElement("span",{className:"ico-moon icon-goods-location"}),b.default.createElement("div",{className:"address-detail"},b.default.createElement("div",{className:"buyer-name-box"},b.default.createElement("span",{className:"store-config-label",style:(0,w.convertLineStyleData)("background:"+_.theme)},"自提"),b.default.createElement("span",{className:"buyer-name"},E.contact_name),b.default.createElement("span",null,E.contact_phone)),b.default.createElement("div",{className:"buyer-address"},E.region_data.region_string+E.address_detail)),b.default.createElement("div",{className:"ico-moon icon-rightarrow"}))):b.default.createElement(b.default.Fragment,null,b.default.createElement("div",{className:"address-null-box",onClick:this.toDeliveryList},b.default.createElement("div",{className:"pull-right ico-moon icon-rightarrow"}),b.default.createElement("div",null,b.default.createElement("span",{className:"ico-moon icon-goods-location"}),b.default.createElement("span",{className:"add-new-address"},"选择自提点"))))),2==v&&b.default.createElement("div",{className:"preview-section"},R&&R.id?b.default.createElement(b.default.Fragment,null,b.default.createElement("div",{className:"address-box",onClick:this.goSameJourneyAddress},b.default.createElement("span",{className:"ico-moon icon-goods-location"}),b.default.createElement("div",{className:"address-detail"},b.default.createElement("div",{className:"buyer-name-box"},b.default.createElement("span",{className:"store-config-label",style:(0,w.convertLineStyleData)("background:"+_.theme)},"同城"),b.default.createElement("span",{className:"buyer-name"},R.address_info.name),b.default.createElement("span",null,R.address_info.contact)),b.default.createElement("div",{className:"buyer-address"},R.address_info.province.text+R.address_info.city.text+R.address_info.district.text+R.address_info.detailAddress)),b.default.createElement("div",{className:"ico-moon icon-rightarrow"}))):b.default.createElement(b.default.Fragment,null,b.default.createElement("div",{className:"address-null-box"},b.default.createElement("div",{className:"pull-right ico-moon icon-rightarrow"}),b.default.createElement("div",{onClick:this.goSameJourneyAddress},b.default.createElement("span",{className:"ico-moon icon-goods-location"}),b.default.createElement("span",{className:"add-new-address"},"选择同城地址"))))),4!=v&&b.default.createElement("div",{className:"address-bg"},b.default.createElement("img",{src:"http://cdn.jisuapp.cn/static/webapp/images/xcx-goods/goods-address-bg.png"})),4==v&&b.default.createElement(b.default.Fragment,null,!d&&b.default.createElement("div",{className:"eating-info-wrapper"},b.default.createElement("div",{className:"eating-info-item flex-between"},b.default.createElement("span",{className:"mustFill"},"就餐人数"),b.default.createElement(r.default,{className:"eating-picker",cols:1,data:p,value:[+f],onChange:this.changeCustomNum},b.default.createElement("div",null,b.default.createElement("span",{style:(0,w.convertLineStyleData)("font-weight:bold;")},f||1),b.default.createElement("span",{className:"ico-moon icon-rightarrow icon-right"})))),b.default.createElement("div",{className:"eating-info-item flex-between"},b.default.createElement("span",{className:"mustFill"},"就餐方式"),b.default.createElement(r.default,{className:"eating-picker",cols:1,data:k,value:[C],onChange:this.changeDiningMode},b.default.createElement("div",null,b.default.createElement("span",{style:(0,w.convertLineStyleData)("font-weight:bold;")},2==C?"打包":"堂食"),b.default.createElement("span",{className:"ico-moon icon-rightarrow icon-right"})))),b.default.createElement("div",{className:"eating-info-item flex-between"},b.default.createElement("span",{className:"mustFill"},"取餐方式"),b.default.createElement(r.default,{className:"eating-picker",cols:1,data:D,onChange:this.changeTakeMealType,value:[T]},b.default.createElement("div",null,b.default.createElement("span",{style:(0,w.convertLineStyleData)("font-weight:bold;")},D[M]&&D[M].label),b.default.createElement("span",{className:"ico-moon icon-rightarrow icon-right"})))),b.default.createElement("div",{className:"eating-info-item flex-between"},b.default.createElement("span",{className:1==T?"mustFill":""},"桌号"),b.default.createElement("form",null,b.default.createElement("button",(e={type:"button",className:"flex-between buryPoint",style:(0,w.convertLineStyleData)("flex:1;")},(0,u.default)(e,"style",(0,w.convertLineStyleData)("color:#999;text-align:right;width:100%;")),(0,u.default)(e,"onClick",this.scanPlaceInfo),e),b.default.createElement("span",null,P?m:"扫码获取位置信息"),b.default.createElement("span",{className:"ico-moon icon-shopping-scan",style:(0,w.convertLineStyleData)("padding-left:20rpx;font-size:30rpx;color:#999;")}))))),b.default.createElement("div",{className:"dining-shop-box"},b.default.createElement("div",{className:"dining-shop flex-between",onClick:this.turnToStore},b.default.createElement("span",{style:(0,w.convertLineStyleData)("font-size:28rpx;font-weight:bold;")},L&&L.title),b.default.createElement("span",{className:"ico-moon icon-fn-phone icon-right",style:(0,w.convertLineStyleData)("font-size:44rpx;color:#D2D2D2;"),"data-phone":L&&L.contact_phone,onClick:this.callPhone}))),b.default.createElement("div",{className:"order-info-wrapper",style:(0,w.convertLineStyleData)("height:"+(A.length>3&&!F?"300rpx":"auto")+";overflow:hidden;")},O&&O.map(function(e,a){return b.default.createElement("div",{className:"preview-buyer-list",key:a,style:(0,w.convertLineStyleData)("background-color:#fff;")},e&&e.num>0&&b.default.createElement("div",{className:"custom-info-wrapper flex-between"},b.default.createElement("div",{className:"flex-between"},b.default.createElement("div",{className:"custom-info"},b.default.createElement("img",{src:e.cover_thumb})),b.default.createElement("span",{className:"custom-name"},e.nickname+(e.buyer_id==B||j?"（我）":""))),b.default.createElement("span",{className:"custom-selected"},"已选"+e.num+"份商品")),b.default.createElement("div",{className:"preview-goods-order-list"},b.default.createElement(b.default.Fragment,null,A.map(function(a,n){if(e.buyer_id==a.buyer_id)return b.default.createElement("div",{className:"preview-goods-order-item",style:(0,w.convertLineStyleData)(A.length<3&&!F?"border-bottom:0;padding-bottom:0;":""),key:n},b.default.createElement("img",{className:"preview-goods-cover",src:a.cover,mode:"aspectFill"}),b.default.createElement("div",{className:"preview-goods-content"},b.default.createElement("div",{className:"preview-goods-title"},a.max_can_use_integral>0&&b.default.createElement("span",{className:"goods-special"},"积"),G&&b.default.createElement("span",{className:"exchange-tip"},"拼团"),1==a.is_seckill&&b.default.createElement("span",{className:"exchange-tip"},"秒杀"),a.title),b.default.createElement("div",{className:"goods-type"},b.default.createElement("div",{className:"type-taste"},a.model_value_str)),b.default.createElement("div",{className:"goods-price-box"},"2"!=a.integral?b.default.createElement(b.default.Fragment,null,b.default.createElement("span",{className:"preview-goods-price",style:(0,w.convertLineStyleData)(G?"":"color:"+_.theme)},"¥"+a.original_price),a.virtual_price>0&&b.default.createElement("span",{className:"preview-goods-price",style:(0,w.convertLineStyleData)("margin-left:10rpx;color:#999;text-decoration:line-through;")},"¥ "+a.virtual_price)):b.default.createElement(b.default.Fragment,null,"0.00"!=a.price&&b.default.createElement("span",{className:"preview-goods-price",style:(0,w.convertLineStyleData)(G?"":"color:"+_.theme)},"¥ "+a.price),"0.00"!=a.price&&0!=a.use_integral&&b.default.createElement("span",{className:"preview-goods-price",style:(0,w.convertLineStyleData)(G?"":"color:"+_.theme)},"+"),0!=a.use_integral&&b.default.createElement("span",{className:"preview-goods-price",style:(0,w.convertLineStyleData)(G?"":"color:"+_.theme)},a.max_can_use_integral+"积分")),!G&&b.default.createElement("div",{className:"good-number-box pull-right"},b.default.createElement("div",{className:"goods-minus","data-index":n,onClick:t.clickMinusButton},"-"),b.default.createElement("input",{className:"goods-count","data-index":n,type:"number",value:a.num,onChange:t.inputGoodsCount}),b.default.createElement("div",{className:"goods-plus",style:(0,w.convertLineStyleData)("color:"+(a.stock-0>a.num-0&&(a.buyer_id==B||j)?_.theme:"#d2d2d2")),"data-index":n,onClick:a.stock>a.num&&(a.buyer_id==B||j)?t.clickPlusButton:null},"+")),G&&b.default.createElement("div",{className:"good-number-box pull-right"},b.default.createElement("div",{className:"group-count"},"数量："+a.num)))))}))))})),b.default.createElement("div",{className:"goods-showMore",hidden:A.length<4},b.default.createElement("div",{className:"goods-more",hidden:F,onClick:this.showMoreGoods},"展开更多",b.default.createElement("span",{className:"ico-moon icon-downarrow"})),b.default.createElement("div",{className:"goods-more",hidden:!F,onClick:this.showMoreGoods},"点击收起",b.default.createElement("span",{className:"ico-moon icon-uparrow"})))),2==v&&b.default.createElement("div",{className:"preview-box border-bottom30"},b.default.createElement("div",{onClick:this.showSameJourneyTime,className:"single-box"},"取货时间",b.default.createElement("div",{className:"pull-right appointment-time-box"},b.default.createElement("span",{className:"appointment-time",style:(0,w.convertLineStyleData)("color:"+_.theme)},1==q?"尽快送达(预计"+(U||"")+"分钟后送达)":z?"大约"+z+"送达":"请选择送达时间"),b.default.createElement("span",{className:"ico-moon icon-rightarrow"})))),3==v&&b.default.createElement("div",{className:"preview-box border-bottom30"},Q&&b.default.createElement("div",{onClick:this.showServiceTime,className:"single-box"},"取货时间",b.default.createElement("div",{className:"pull-right appointment-time-box"},1==W&&V&&2==H?b.default.createElement("span",{className:"appointment-time",style:(0,w.convertLineStyleData)("color:"+_.theme)},S.date(V)):1==W&&1==H?b.default.createElement("span",{className:"appointment-time",style:(0,w.convertLineStyleData)("color:"+_.theme)},0==J?"立即取货":"大约等待"+J+"分钟"):1!=W&&Y&&2==H?b.default.createElement("span",{className:"appointment-time",style:(0,w.convertLineStyleData)("color:"+_.theme)},S.date(V)+" "+Y):1!=W&&1==H?b.default.createElement("span",{className:"appointment-time",style:(0,w.convertLineStyleData)("color:"+_.theme)},S.date(V)+(0==J?" 立即取货":"大约等待"+J+"分钟")):b.default.createElement("span",{className:"appointment-time",style:(0,w.convertLineStyleData)("color:"+_.theme)},"请选择时间"),b.default.createElement("span",{className:"ico-moon icon-rightarrow"}))),K&&J>=0&&b.default.createElement("div",{className:"single-box"},"取货时间",b.default.createElement("div",{className:"pull-right appointment-time-box"},b.default.createElement("span",{className:"appointment-time",style:(0,w.convertLineStyleData)("color:"+_.theme)},0==J?"无需等待":"大约等待"+J+"分钟"))),1==$&&b.default.createElement("div",{className:"single-box"},"联系手机号",b.default.createElement("div",{className:"pull-right input-phone-box"},b.default.createElement("input",{type:"text",onChange:this.inputPhone,value:X,placeholder:"请输入手机号"}),b.default.createElement("button",{className:"get-phone-number",onClick:this.getPhoneNumber,style:(0,w.convertLineStyleData)("color:"+_.theme)},"自动填写"))),ee&&b.default.createElement("div",{className:"single-box",onClick:this.getInStoreSeat},"店内位置",b.default.createElement("div",{className:"pull-right scan-seat-box"},b.default.createElement("span",null,Z||"请扫码获取位置信息"),b.default.createElement("span",{className:"ico-moon icon-shopping-scan"})))),4!=v&&b.default.createElement(b.default.Fragment,null,A.map(function(e,a){return b.default.createElement("div",{className:"preview-goods-order-list",key:e.id},b.default.createElement("div",{className:"preview-goods-order-item"},b.default.createElement("img",{className:"preview-goods-cover",src:e.cover,mode:"aspectFill"}),b.default.createElement("div",{className:"preview-goods-content"},b.default.createElement("div",{className:"preview-goods-title"},G&&b.default.createElement("span",{className:"exchange-tip"},"拼团"),1==e.cart_vip_goods&&b.default.createElement("span",{className:"exchange-tip",style:(0,w.convertLineStyleData)("width:75rpx;")},"会员价"),1==e.is_seckill&&b.default.createElement("span",{className:"exchange-tip"},"秒杀"),e.title),e.model_value_str&&b.default.createElement("div",{className:"preview-goods-model"},e.model_value_str),b.default.createElement("div",{className:"goods-price-box"},"2"!=e.integral?b.default.createElement(b.default.Fragment,null,b.default.createElement("span",{className:"preview-goods-price",style:(0,w.convertLineStyleData)(G?"":"color:"+_.theme)},"¥"+e.price)):b.default.createElement(b.default.Fragment,null,"0.00"!=e.price&&b.default.createElement("span",{className:"preview-goods-price",style:(0,w.convertLineStyleData)(G?"":"color:"+_.theme)},"¥"+e.price),"0.00"!=e.price&&0!=e.use_integral&&b.default.createElement("span",{className:"preview-goods-price",style:(0,w.convertLineStyleData)(G?"":"color:"+_.theme)},"+"),0!=e.use_integral&&b.default.createElement("span",{className:"preview-goods-price",style:(0,w.convertLineStyleData)(G?"":"color:"+_.theme)},e.max_can_use_integral+"积分")),!G&&b.default.createElement("div",{className:"good-number-box pull-right"},b.default.createElement("div",{className:"goods-minus","data-index":a,onClick:t.clickMinusButton},"-"),b.default.createElement("input",{className:"goods-count","data-index":a,type:"number",value:e.num,onChange:t.inputGoodsCount}),b.default.createElement("div",{className:"goods-plus",style:(0,w.convertLineStyleData)("color:"+_.theme),"data-index":a,onClick:t.clickPlusButton},"+")),G&&b.default.createElement("div",{className:"good-number-box pull-right"},b.default.createElement("div",{className:"group-count"},"数量："+e.num))))))})),te.hasSelectGoods&&b.default.createElement("div",{className:"preview-goods-order-list"},b.default.createElement("div",{className:"preview-goods-order-item"},b.default.createElement("img",{className:"preview-goods-cover",src:te.goodsInfo.cover}),b.default.createElement("div",{className:"preview-goods-content"},b.default.createElement("div",{className:"preview-goods-title"},b.default.createElement("span",{className:"exchange-tip"},"赠品"),te.goodsInfo.title),te.goodsInfo.model_value_str&&b.default.createElement("div",{className:"preview-goods-model"},te.goodsInfo.model_value_str),b.default.createElement("div",{className:"goods-number-contain"},b.default.createElement("div",{className:"exchange-num pull-right"},"x1"))))),4==v&&b.default.createElement("div",{className:"other-price-wrpper"},ae>0&&b.default.createElement("div",{className:"other-price-item flex-between",hidden:d},b.default.createElement("span",null,"纸巾费"),b.default.createElement("span",null,"¥"+ae)),ne>0&&b.default.createElement("div",{className:"other-price-item flex-between"},b.default.createElement("span",null,"服务费"),b.default.createElement("span",null,"¥"+ne)),oe>0&&b.default.createElement("div",{className:"other-price-item flex-between"},b.default.createElement("span",null,"包装费"),b.default.createElement("span",null,"¥"+oe))),b.default.createElement("div",{className:"preview-box"},!d&&b.default.createElement("div",{className:"single-box"},"商品金额",b.default.createElement("span",{className:"pull-right"},"¥ "+ie)),oe>0&&2==v&&b.default.createElement("div",{className:"single-box"},"包装费",b.default.createElement("span",{className:"pull-right"},"¥ "+oe)),4!=v&&3!=v&&b.default.createElement("div",{className:"single-box"},"运费",b.default.createElement("span",{className:"pull-right"},"¥ "+(se||0))),!!l.length&&b.default.createElement("div",{onClick:this.showMemberDiscount,hidden:4==v&&2==re},b.default.createElement("div",{className:"balance-switch"},b.default.createElement("span",null,"优惠方式"),b.default.createElement("div",{className:"ico-moon icon-rightarrow pull-right"}),b.default.createElement("span",{className:"pull-right select-discount"},ce.name)),b.default.createElement("div",{hidden:0==le,className:"balance-price"},b.default.createElement("span",{className:"pull-right",style:(0,w.convertLineStyleData)("color:"+_.theme)},"- ¥"+de))),1==me&&"0.00"!=ue&&!d&&b.default.createElement("div",{className:"single-box"},4==v&&b.default.createElement("div",{className:"balance-switch",onClick:this.showVipGoodsList},b.default.createElement("span",null,"会员价优惠"),b.default.createElement("div",{className:"ico-moon icon-rightarrow pull-right"}),b.default.createElement("span",{className:"pull-right select-discount"},"查看详情")),4!=v&&b.default.createElement("div",{className:"balance-switch"},b.default.createElement("span",null,"会员价优惠")),b.default.createElement("div",{className:"balance-price"},b.default.createElement("span",{className:"pull-right",style:(0,w.convertLineStyleData)("color:"+_.theme+";line-height:24rpx;")},"- ¥"+ue))),0!=ge&&b.default.createElement("div",{hidden:4==v&&2==re},b.default.createElement("div",{className:"balance-switch"},b.default.createElement("span",null,"使用储值金"),b.default.createElement(i.default,{color:_.theme,style:(0,w.convertLineStyleData)("transform:scale(0.7);"),className:"pull-right",checked:pe,onChange:function(e){return t.useBalanceChange(e,"")}})),b.default.createElement("div",{hidden:!pe,className:"balance-price"},b.default.createElement("span",{className:"pull-right",style:(0,w.convertLineStyleData)("color:"+_.theme)},"- ¥"+fe))),ve>0&&(1==v&&1==_e||3==v&&1==ye)&&b.default.createElement("div",null,b.default.createElement("div",{className:"balance-switch"},b.default.createElement("span",null,"货到付款（先下单，验货后支付）"),b.default.createElement(i.default,{color:_.theme,style:(0,w.convertLineStyleData)("transform:scale(0.8);"),className:"pull-right",onChange:function(e){return t.useCashDelivery(e,"")},checked:he})))),4==v?b.default.createElement("div",{className:"preview-box"},!Ne&&!Re&&b.default.createElement("div",{className:"border-top1 single-box",onClick:this.goToAdditionalInfo},"补充信息",b.default.createElement("div",{className:"ico-moon icon-rightarrow pull-right"}),b.default.createElement("span",{style:(0,w.convertLineStyleData)("color:"+(Ee&&!be?_.theme:"#666")),className:"additional-tip pull-right"},be?"已填写":"未填写")),b.default.createElement("div",{className:"buyer-message single-box"},"备注",b.default.createElement("div",{className:"pull-right"},b.default.createElement("input",{className:"remark",maxLength:"30",value:ke,onChange:this.remarkInput,placeholder:"备注口味、偏好等"})))):4!=v&&b.default.createElement("div",{className:"preview-box"},b.default.createElement("div",{className:"buyer-message single-box"},"买家留言",b.default.createElement("div",{className:"pull-right"},b.default.createElement("input",{className:"remark",maxLength:"30",value:ke,onChange:this.remarkInput,placeholder:"买家留言"}))),!Ne&&!Re&&b.default.createElement("div",{className:"border-top1 single-box",onClick:this.goToAdditionalInfo},"补充信息",b.default.createElement("div",{className:"ico-moon icon-rightarrow pull-right"}),b.default.createElement("span",{style:(0,w.convertLineStyleData)("color:"+(Ee&&!be?_.theme:"#666")),className:"additional-tip pull-right"},be?"已填写":"未填写"))),Re&&b.default.createElement(b.default.Fragment,null,De[0]&&Ce[De[0]]&&Ce[De[0]].map(function(e,a){return b.default.createElement("div",{className:"additional-list",key:a},"text"==e.type&&b.default.createElement("div",{className:"additional-text"},b.default.createElement("span",{className:"additional-name "+(0==e.is_required?"is-required":"")},e.title),b.default.createElement("div",{className:"additional-info"},b.default.createElement("input",{type:"text",onChange:t.inputFormControl,value:e.value}))),"mul-text"==e.type&&b.default.createElement("div",{className:"additional-textarea"},b.default.createElement("span",{className:"additional-name "+(0==e.is_required?"is-required":"")},e.title),b.default.createElement("div",{className:"additional-info"},b.default.createElement("textarea",{maxLength:"-1",onInput:t.inputFormControl,value:e.value}))),"picture"==e.type&&b.default.createElement("div",{className:"additional-picture"},b.default.createElement("span",{className:"additional-name "+(0==e.is_required?"is-required":"")},e.title),b.default.createElement("div",{className:"additional-info"},e.value&&e.value.map(function(e,a){return b.default.createElement("div",{className:"image-list",key:a},b.default.createElement("img",{src:e}),b.default.createElement("label",{className:"delete-image ico-moon icon-closes",onClick:t.deleteImage,"data-image-index":a},"-"))}),e.value.length<9&&b.default.createElement("div",{className:"add-images",onClick:t.addDeliveryImg},b.default.createElement("span",{className:"ico-moon icon-goods-add-image"}),b.default.createElement("div",null,"添加图片")))))})),4==v?b.default.createElement(b.default.Fragment,null,1==re&&b.default.createElement("div",{className:"all-price-box flex-between"},b.default.createElement("div",{className:"all-price"},b.default.createElement("span",null,"合计："),b.default.createElement("span",{className:"all-price-now priceNow",style:(0,w.convertLineStyleData)("color:"+_.theme)},"￥"+ve),we>0&&b.default.createElement("span",{className:"discounted-price",style:(0,w.convertLineStyleData)("background-color:"+_.theme+";")},"已优惠￥"+we)),b.default.createElement("form",null,b.default.createElement("button",{type:"button",className:"all-price-calculate",style:(0,w.convertLineStyleData)("background-color:"+_.theme+"; width:210rpx;border-radius:0;font-size:28rpx;"),onClick:this.confirmPayment},"去结算"))),2==re&&b.default.createElement("div",{className:"all-price-box flex-between"},b.default.createElement("div",{className:"add-dishs",hidden:!xe,style:(0,w.convertLineStyleData)("color:"+_.theme+";font-size:28rpx;"),onClick:this.turnToAddDish},"继续点菜"),b.default.createElement("form",{style:(0,w.convertLineStyleData)("flex:1;")},b.default.createElement("button",{type:"button",className:"all-price-calculate",style:(0,w.convertLineStyleData)("background-color:"+_.theme+";border-radius:0;"),onClick:this.confirmPayment},"下单")))):4!=v&&b.default.createElement("div",{className:"bottom-nav"},b.default.createElement("div",{className:"preview-goods-total-price"},"合计:",b.default.createElement("span",{className:"price-count",style:(0,w.convertLineStyleData)("color:"+_.theme)},"¥ "+ve)),b.default.createElement("form",null,b.default.createElement("button",{type:"button",style:(0,w.convertLineStyleData)("background:"+_.theme),onClick:this.confirmPayment},he?"货到付款":"在线支付"))),b.default.createElement(I,{data:te,self:this}))),c&&b.default.createElement("div",{className:"preview-goods-wrap franchisee"},(1==v||2==v)&&b.default.createElement("div",{className:"preview-section"},1==v&&b.default.createElement(b.default.Fragment,null,y.id?b.default.createElement(b.default.Fragment,null,b.default.createElement("div",{className:"address-box",onClick:this.goToMyAddress,"data-address-id":y.id},b.default.createElement("div",{className:"address-detail"},b.default.createElement("div",{className:"buyer-name-box"},b.default.createElement("span",{className:"buyer-name"},y.address_info.name),b.default.createElement("span",null,y.address_info.contact)),b.default.createElement("div",{className:"buyer-address"},b.default.createElement("span",{className:"store-config-label",style:(0,w.convertLineStyleData)("background:"+_.theme)},"快递"),b.default.createElement("span",{className:"buyer-address-txt"},y.address_info.province.text+y.address_info.city.text+y.address_info.district.text+y.address_info.detailAddress))),b.default.createElement("div",{className:"ico-moon icon-rightarrow"}))):b.default.createElement(b.default.Fragment,null,b.default.createElement("div",{className:"address-null-box",onClick:this.goToMyAddress},b.default.createElement("div",{className:"pull-right ico-moon icon-rightarrow"}),b.default.createElement("div",null,b.default.createElement("span",{className:"ico-moon icon-goods-location"}),b.default.createElement("span",{className:"add-new-address"},"新增地址"))))),2==v&&b.default.createElement(b.default.Fragment,null,R.id?b.default.createElement(b.default.Fragment,null,b.default.createElement("div",{className:"address-box",onClick:this.goSameJourneyAddress},b.default.createElement("div",{className:"address-detail"},b.default.createElement("div",{className:"buyer-name-box"},b.default.createElement("span",{className:"buyer-name"},R.address_info.name),b.default.createElement("span",null,R.address_info.contact)),b.default.createElement("div",{className:"buyer-address"},b.default.createElement("span",{className:"store-config-label",style:(0,w.convertLineStyleData)("background:"+_.theme)},"同城"),b.default.createElement("span",{className:"buyer-address-txt"},R.address_info.province.text+R.address_info.city.text+R.address_info.district.text+R.address_info.detailAddress))),b.default.createElement("div",{className:"ico-moon icon-rightarrow"}))):b.default.createElement(b.default.Fragment,null,b.default.createElement("div",{className:"address-null-box"},b.default.createElement("div",{className:"pull-right ico-moon icon-rightarrow"}),b.default.createElement("div",{onClick:this.goSameJourneyAddress},b.default.createElement("span",{className:"ico-moon icon-goods-location"}),b.default.createElement("span",{className:"add-new-address"},"选择同城地址"))))),b.default.createElement("div",{className:"address-bg"},b.default.createElement("img",{src:"http://cdn.jisuapp.cn/static/webapp/images/xcx-goods/goods-address-bg.png"}))),3==v&&b.default.createElement("div",{className:"pick-method"},b.default.createElement("div",{className:"pick-method-box"},b.default.createElement("span",{className:"ico-moon icon-goods-pick-model",style:(0,w.convertLineStyleData)("background:linear-gradient(-66deg,"+_.secondary+" 0%,"+_.theme+" 100%);")}),"取货方式",b.default.createElement("span",{className:"pull-right pick-method-title"},"自提"))),b.default.createElement("div",{className:"preview-shops-list"},Se.map(function(e,a){return b.default.createElement(b.default.Fragment,{key:e.app_id},o[e.app_id].additional_info[o[e.app_id].additional_goodsid_arr[0]].map(function(n,s){return b.default.createElement("div",{className:"preview-shops-item",key:s},b.default.createElement("div",{className:"preview-shops-title"},b.default.createElement("img",{src:e.logo,mode:"aspectFill"}),b.default.createElement("span",null,e.name)),3==v&&b.default.createElement(b.default.Fragment,null,b.default.createElement("div",{className:"preview-section delivery"},o[e.app_id].selectDelivery.id?b.default.createElement(b.default.Fragment,null,b.default.createElement("div",{className:"address-box",onClick:t.toDeliveryList,"data-app-id":e.app_id},b.default.createElement("div",{className:"address-detail"},b.default.createElement("div",{className:"buyer-name-box"},b.default.createElement("span",{className:"buyer-name"},o[e.app_id].selectDelivery.contact_name),b.default.createElement("span",null,o[e.app_id].selectDelivery.contact_phone)),b.default.createElement("div",{className:"buyer-address"},b.default.createElement("span",{className:"store-config-label",style:(0,w.convertLineStyleData)("background:"+_.theme)},"自提"),b.default.createElement("span",{className:"buyer-address-txt"},o[e.app_id].selectDelivery.region_data.region_string+o[e.app_id].selectDelivery.address_detail))),b.default.createElement("div",{className:"ico-moon icon-rightarrow"}))):b.default.createElement(b.default.Fragment,null,b.default.createElement("div",{className:"address-null-box",onClick:t.toDeliveryList,"data-app-id":e.app_id},b.default.createElement("div",{className:"pull-right ico-moon icon-rightarrow"}),b.default.createElement("div",null,b.default.createElement("span",{className:"ico-moon icon-goods-location"}),b.default.createElement("span",{className:"add-new-address"},"选择自提点")))),b.default.createElement("div",{className:"address-bg"},b.default.createElement("img",{src:"http://cdn.jisuapp.cn/static/webapp/images/xcx-goods/goods-address-bg.png"}))),b.default.createElement("div",{className:"preview-box delivery"},o[e.app_id].selfAppointmentSwitch&&b.default.createElement("div",{onClick:t.showServiceTime,"data-app-id":e.app_id,className:"single-box"},"取货时间",b.default.createElement("div",{className:"pull-right appointment-time-box"},1==o[e.app_id].tostoreTimeType&&o[e.app_id].tostoreDateTime&&2==o[e.app_id].tostoreOrderType?b.default.createElement("span",{className:"appointment-time",style:(0,w.convertLineStyleData)("color:"+_.theme)},S.date(o[e.app_id].tostoreDateTime)):1==o[e.app_id].tostoreTimeType&&1==o[e.app_id].tostoreOrderType?b.default.createElement("span",{className:"appointment-time",style:(0,w.convertLineStyleData)("color:"+_.theme)},0==o[e.app_id].waitingQueueTime?"立即取货":"大约等待"+o[e.app_id].waitingQueueTime+"分钟"):1!=o[e.app_id].tostoreTimeType&&o[e.app_id].tostoreHourTime&&2==o[e.app_id].tostoreOrderType?b.default.createElement("span",{className:"appointment-time",style:(0,w.convertLineStyleData)("color:"+_.theme)},S.date(o[e.app_id].tostoreDateTime)+" "+o[e.app_id].tostoreHourTime):1!=o[e.app_id].tostoreTimeType&&1==o[e.app_id].tostoreOrderType?b.default.createElement("span",{className:"appointment-time",style:(0,w.convertLineStyleData)("color:"+_.theme)},S.date(o[e.app_id].tostoreDateTime)+(0==o[e.app_id].waitingQueueTime?" 立即取货":"大约等待"+o[e.app_id].waitingQueueTime+"分钟")):b.default.createElement("span",{className:"appointment-time",style:(0,w.convertLineStyleData)("color:"+_.theme)},"请选择时间"),b.default.createElement("span",{className:"ico-moon icon-rightarrow"}))),o[e.app_id].onlyImmediatlyPickSwitch&&o[e.app_id].waitingQueueTime>=0&&b.default.createElement("div",{className:"single-box"},"取货时间",b.default.createElement("div",{className:"pull-right appointment-time-box"},b.default.createElement("span",{className:"appointment-time",style:(0,w.convertLineStyleData)("color:"+_.theme)},0==o[e.app_id].waitingQueueTime?"无需等待":"大约等待"+o[e.app_id].waitingQueueTime+"分钟"))),1==o[e.app_id].selfDeliveryPhone&&b.default.createElement("div",{className:"single-box thin-bd-b"},"联系手机号",b.default.createElement("div",{className:"pull-right input-phone-box"},b.default.createElement("input",{type:"text",onChange:t.inputPhone,"data-app-id":e.app_id,value:o[e.app_id].phone,placeholder:"请输入手机号"}),b.default.createElement("button",{className:"get-phone-number",onClick:t.getPhoneNumber,style:(0,w.convertLineStyleData)("color:"+_.theme)},"自动填写"))),o[e.app_id].selfDeliveryScan&&b.default.createElement("div",{className:"single-box",onClick:t.getInStoreSeat},"店内位置",b.default.createElement("div",{className:"pull-right scan-seat-box"},b.default.createElement("span",null,Z||"请扫码获取位置信息"),b.default.createElement("span",{className:"ico-moon icon-shopping-scan"}))))),4!=v&&b.default.createElement("div",{className:"preview-goods-order-list"},e.cartList.map(function(n,o){return b.default.createElement("div",{className:"preview-goods-order-item "+(o==e.cartList.length-1?"thin-bd-b":""),key:n.id},b.default.createElement("img",{className:"preview-goods-cover",src:n.cover,mode:"aspectFill"}),b.default.createElement("div",{className:"preview-goods-content"},b.default.createElement("div",{className:"preview-goods-title"},G&&b.default.createElement("span",{className:"exchange-tip"},"拼团"),1==n.is_seckill&&b.default.createElement("span",{className:"exchange-tip"},"秒杀"),b.default.createElement("span",null,n.title)),n.model_value_str&&b.default.createElement("div",{className:"preview-goods-model"},b.default.createElement("span",null,n.model_value_str)),b.default.createElement("div",{className:"goods-price-box"},"2"!=n.integral?b.default.createElement(b.default.Fragment,null,b.default.createElement("span",{className:"preview-goods-price",style:(0,w.convertLineStyleData)(G?"":"color:"+_.theme)},"¥"+n.price),1==Ie&&b.default.createElement("div",{className:"vip-logo",style:(0,w.convertLineStyleData)("color:"+_.theme+";background:"+_.theme+"19;")},"会员价")):b.default.createElement(b.default.Fragment,null,"0.00"!=n.price&&b.default.createElement("span",{className:"preview-goods-price",style:(0,w.convertLineStyleData)(G?"":"color:"+_.theme)},"¥"+n.price),1==Ie&&b.default.createElement("div",{className:"vip-logo",style:(0,w.convertLineStyleData)("color:"+_.theme+";background:"+_.theme+"19;")},"会员价"),"0.00"!=n.price&&0!=n.use_integral&&b.default.createElement("span",{className:"preview-goods-price",style:(0,w.convertLineStyleData)(G?"":"color:"+_.theme)},"+"),0!=n.use_integral&&b.default.createElement("span",{className:"preview-goods-price",style:(0,w.convertLineStyleData)(G?"":"color:"+_.theme)},n.max_can_use_integral+"积分")),!G&&b.default.createElement("div",{className:"good-number-box pull-right"},b.default.createElement("div",{className:"goods-minus","data-index":o,"data-shop-index":a,"data-is-franchisee":"1","data-app-id":n.app_id,onClick:t.clickMinusButton},"-"),b.default.createElement("input",{className:"goods-count","data-index":o,"data-shop-index":a,"data-is-franchisee":"1","data-app-id":n.app_id,type:"number",value:n.num,onChange:t.inputGoodsCount}),b.default.createElement("div",{className:"goods-plus","data-index":o,"data-shop-index":a,"data-is-franchisee":"1","data-app-id":n.app_id,onClick:t.clickPlusButton},"+")),G&&b.default.createElement("div",{className:"good-number-box pull-right"},b.default.createElement("div",{className:"group-count"},"数量："+n.num)))))})),o[e.app_id].exchangeCouponData.hasSelectGoods&&b.default.createElement("div",{className:"preview-goods-order-list"},b.default.createElement("div",{className:"preview-goods-order-item thin-bd-b"},b.default.createElement("img",{className:"preview-goods-cover",src:o[e.app_id].exchangeCouponData.goodsInfo.cover}),b.default.createElement("div",{className:"preview-goods-content"},b.default.createElement("div",{className:"preview-goods-title"},b.default.createElement("span",{className:"exchange-tip"},"赠品"),o[e.app_id].exchangeCouponData.goodsInfo.title),o[e.app_id].exchangeCouponData.goodsInfo.model_value_str&&b.default.createElement("div",{className:"preview-goods-model"},o[e.app_id].exchangeCouponData.goodsInfo.model_value_str),b.default.createElement("div",{className:"goods-number-contain"},b.default.createElement("div",{className:"exchange-num pull-right"},"x1"))))),2==v&&b.default.createElement("div",{className:"preview-box"},b.default.createElement("div",{onClick:t.showSameJourneyTime,"data-app-id":e.app_id,className:"single-box thin-bd-b"},"取货时间",b.default.createElement("div",{className:"pull-right appointment-time-box"},b.default.createElement("span",{className:"appointment-time",style:(0,w.convertLineStyleData)("color:"+_.theme)},1==o[e.app_id].sameJourneyTimeType?"尽快送达（预计"+(o[e.app_id].sameJourneyImmediatlyTime||"")+"分钟后送达）":o[e.app_id].sameJourneyDateTime?"大约"+o[e.app_id].sameJourneyDateTime+"送达":"请选择送达时间"),b.default.createElement("span",{className:"ico-moon icon-rightarrow"})))),b.default.createElement("div",{className:"preview-box"},o[e.app_id].box_fee&&2==v&&b.default.createElement("div",{className:"single-box thin-bd-b"},"包装费",b.default.createElement("span",{className:"pull-right price-txt"},"¥ "+o[e.app_id].box_fee)),4!=v&&3!=v&&b.default.createElement("div",{className:"single-box thin-bd-b"},"运费",b.default.createElement("span",{className:"pull-right price-txt"},"¥ "+o[e.app_id].express_fee)),!!o[e.app_id].discountList.length&&b.default.createElement("div",{hidden:4==v&&2==re,"data-app-id":e.app_id,onClick:t.showMemberDiscount},b.default.createElement("div",{className:"balance-switch"},b.default.createElement("span",null,"优惠方式"),b.default.createElement("div",{className:"ico-moon icon-rightarrow pull-right"}),b.default.createElement("span",{className:"pull-right select-discount"},o[e.app_id].selectDiscountInfo.name)),b.default.createElement("div",{className:"balance-price thin-bd-b",hidden:0==o[e.app_id].selectDiscountIndex},b.default.createElement("span",{className:"pull-right price-txt",style:(0,w.convertLineStyleData)("color:"+_.theme+";")},"- ¥"+o[e.app_id].discount_cut_price))),Me&&b.default.createElement("div",{className:"single-box thin-bd-b"},"会员价优惠",b.default.createElement("span",{className:"pull-right price-txt",style:(0,w.convertLineStyleData)("color:"+_.theme+";")},"- ¥ "+o[e.app_id].vip_cut_price)),0!=o[e.app_id].balance&&b.default.createElement("div",{className:"thin-bd-b",hidden:4==v&&2==re},b.default.createElement("div",{className:"balance-switch"},b.default.createElement("span",null,"使用储值金"),b.default.createElement(i.default,{className:"pull-right",color:_.theme,style:(0,w.convertLineStyleData)("transform:scale(0.7);"),checked:o[e.app_id].useBalance>0,onChange:function(a){return t.useBalanceChange(a,e.app_id)}})),b.default.createElement("div",{hidden:!o[e.app_id].useBalance,className:"balance-price"},b.default.createElement("span",{className:"pull-right price-txt",style:(0,w.convertLineStyleData)("color:"+_.theme)},"- ¥"+o[e.app_id].deduction))),o[e.app_id].price>0&&(1==v&&1==o[e.app_id].canCashDelivery||3==v&&1==o[e.app_id].selfPayOnDelivery)&&b.default.createElement("div",{className:"thin-bd-b"},b.default.createElement("div",{className:"balance-switch"},b.default.createElement("span",null,"货到付款（先下单，验货后支付）"),b.default.createElement(i.default,{className:"pull-right",color:_.theme,style:(0,w.convertLineStyleData)("transform:scale(0.8);"),onChange:function(a){return t.useCashDelivery(a,e.app_id)},checked:o[e.app_id].cashOnDelivery})))),b.default.createElement("div",{className:"preview-box"},b.default.createElement("div",{className:"buyer-message single-box thin-bd-b"},"买家留言",b.default.createElement("div",{className:"pull-right"},b.default.createElement("input",{className:"remark",maxLength:"30",value:o[e.app_id].orderRemark,onChange:t.remarkInput,"data-app-id":e.app_id,placeholder:"建议留言前先与商家沟通"}))),!o[e.app_id].noAdditionalInfo&&!o[e.app_id].aloneDeliveryShow&&b.default.createElement("div",{className:"single-box thin-bd-b","data-app-id":e.app_id,onClick:t.goToAdditionalInfo},"补充信息",b.default.createElement("div",{className:"ico-moon icon-rightarrow pull-right"}),b.default.createElement("span",{className:"additional-tip pull-right",style:(0,w.convertLineStyleData)("color:"+(o[e.app_id].hasRequiredSuppInfo&&!o[e.app_id].deliverydWrite?_.theme:"#666"))},o[e.app_id].deliverydWrite?"已填写":"未填写"))),o[e.app_id].aloneDeliveryShow&&b.default.createElement(b.default.Fragment,null,o[e.app_id].additional_info[o[e.app_id].additional_goodsid_arr[0]].map(function(a,n){return b.default.createElement("div",{className:"additional-list thin-bd-b",key:n},"text"==a.type&&b.default.createElement("div",{className:"additional-text"},b.default.createElement("span",{className:"additional-name "+(0==a.is_required?"is-required":"")},a.title),b.default.createElement("div",{className:"additional-info"},b.default.createElement("input",{type:"text",onChange:t.inputFormControl,"data-app-id":e.app_id,value:a.value}))),"mul-text"==a.type&&b.default.createElement("div",{className:"additional-textarea"},b.default.createElement("span",{className:"additional-name "+(0==a.is_required?"is-required":"")},a.title),b.default.createElement("div",{className:"additional-info"},b.default.createElement("textarea",{maxLength:"-1",onInput:t.inputFormControl,"data-app-id":e.app_id,value:a.value}))),"picture"==a.type&&b.default.createElement("div",{className:"additional-picture"},b.default.createElement("span",{className:"additional-name "+(0==a.is_required?"is-required":"")},a.title),b.default.createElement("div",{className:"additional-info"},a.value.map(function(a,n){return b.default.createElement("div",{className:"image-list",key:n},b.default.createElement("img",{src:a}),b.default.createElement("label",{className:"delete-image ico-moon icon-closes","data-app-id":e.app_id,onClick:t.deleteImage,"data-image-index":n},"-"))}),a.value.length<9&&b.default.createElement("div",{className:"add-images","data-app-id":e.app_id,onClick:t.addDeliveryImg},b.default.createElement("span",{className:"ico-moon icon-goods-add-image"}),b.default.createElement("div",null,"添加图片")))))})),b.default.createElement("div",{className:"preview-box"},b.default.createElement("div",{className:"total single-box"},b.default.createElement("div",{className:"pull-right"},b.default.createElement("span",null,"小计："),b.default.createElement("span",{className:"price-txt",style:(0,w.convertLineStyleData)("color:"+_.theme+";")},"￥"+o[e.app_id].price)))))}))})),!!n.benefitList.length&&b.default.createElement("div",{className:"league-coupon","data-is-league":"1",onClick:this.showMemberDiscount,hidden:4==v&&2==re},b.default.createElement("div",{className:"balance-switch"},b.default.createElement("span",null,b.default.createElement("span",{className:"league-mark"},"联盟"),"联盟优惠券"),b.default.createElement("div",{className:"ico-moon icon-rightarrow pull-right"}),b.default.createElement("span",{className:"pull-right select-discount"},n.selectedBenefitInfo.name)),b.default.createElement("div",{className:"balance-price",hidden:0==n.selectedBenefitIndex},b.default.createElement("span",{className:"pull-right price-txt",style:(0,w.convertLineStyleData)("color:"+_.theme)},"- ¥"+n.benefitPrice))),b.default.createElement("div",{className:"bottom-nav thin-bd-t"},b.default.createElement("div",{className:"preview-goods-total-price"},"合计:",b.default.createElement("span",{className:"price-count",style:(0,w.convertLineStyleData)("color:"+_.theme)},"¥ "+ve)),b.default.createElement("form",null,b.default.createElement("button",{type:"button",style:(0,w.convertLineStyleData)("background:linear-gradient(90deg,"+_.secondary+","+_.theme+");"),onClick:this.mulShopconfirmPayment},Te?"货到付款":"在线支付"))),s&&b.default.createElement(b.default.Fragment,null,!o[s].exchangeCouponData.dialogHidden&&b.default.createElement("div",{className:"page-dialog-wrap"},b.default.createElement("div",{className:"page-bottom-dialog"},b.default.createElement("div",{className:"page-bottom-content"},b.default.createElement("div",{className:"pay-close-dialog page-dialog-close","data-app-id":s,onClick:this.exchangeCouponHideDialog},"×"),b.default.createElement("div",{className:"dialog-block-item"},b.default.createElement("div",{className:"thumb"},b.default.createElement("div",{className:"thumb-wrap"},b.default.createElement("img",{className:"pay-goods-cover",src:o[s].exchangeCouponData.selectModelInfo.imgurl||o[s].exchangeCouponData.goodsInfo.cover}))),b.default.createElement("div",{className:"pay-goods-baseinfo"},b.default.createElement("div",{className:"pay-goods-title ellipsis"},b.default.createElement("span",{className:"gift-text"},"赠品"),b.default.createElement("span",{className:"gift-title"},o[s].exchangeCouponData.goodsInfo.title)),o[s].exchangeCouponData.selectModelInfo.models_text&&b.default.createElement("div",{className:"pay-checked-text clearfix"},"已选："+o[s].exchangeCouponData.selectModelInfo.models_text),b.default.createElement("span",{className:"gift-price"},"¥"+o[s].exchangeCouponData.selectModelInfo.price))),b.default.createElement("div",{className:"exchange-rules-box",hidden:!o[s].exchangeCouponData.goodsInfo.model_items.length},b.default.createElement("div",{className:"pay-goods-models"},o[s].exchangeCouponData.goodsInfo.model.map(function(e,a){return b.default.createElement("div",{key:a},b.default.createElement("span",{className:"model-title"},e.name),b.default.createElement("label",{className:"pills-list"},e.subModelName.map(function(n,i){return b.default.createElement("label",{key:i,"data-model-index":a,"data-submodel-index":i,className:"subModel "+(o[s].exchangeCouponData.selectModelInfo.models[a]==e.subModelId[i]?"select":""),"data-submodel-id":e.subModelId[i],onClick:t.exchangeCouponSelectSubModel},n)})))}))),b.default.createElement("div",{className:"confirm-goods",onClick:this.exchangeCouponConfirmGoods},"确认")))))),Oe&&b.default.createElement("div",{className:"goods-pick-mask"},b.default.createElement("div",{className:"goods-pick-box"},b.default.createElement("div",{className:"goods-pick-header"},"请选择取货方式"),b.default.createElement("div",{className:"goods-pick-content"},g.map(function(e,a){return b.default.createElement("div",{key:e,className:"goods-pick-menu"},b.default.createElement("div",{className:"pick-detail "+(2==e&&(1!=Pe.is_enough_price||1!=Pe.in_business_time||1!=Pe.in_business_time)||4==e&&1!=Le.in_business_time?"no-achieve-price-box":"")},b.default.createElement("div",{className:"pick-style",style:(0,w.convertLineStyleData)("color:"+_.theme)},b.default.createElement("span",{className:"ico-moon "+Ae[e]}),1==e?"快递配送":2==e?"同城配送":3==e?"上门自提":"堂食点餐"),1==e&&b.default.createElement("div",{className:"no-achieve-price"},"配送费"+(Fe.express_fee||0)+"元"),2==e&&b.default.createElement("div",{className:"no-achieve-price"},"配送费"+(Pe.express_fee||0)+"元"),2==e&&1!=Pe.in_business_time?b.default.createElement("div",{className:"no-achieve-tips",style:(0,w.convertLineStyleData)("color:"+_.theme)},"不在营业时间"):2==e&&1!=Pe.is_enough_price&&b.default.createElement("div",{className:"no-achieve-tips",style:(0,w.convertLineStyleData)("color:"+_.theme)},"未达到起送价 还差"+Pe.min_deliver_price_balance+"元"),4==e&&1!=Le.in_business_time&&b.default.createElement("div",{className:"no-achieve-price"},"商家已打烊")),b.default.createElement("div",{className:"pick-btn-box"},b.default.createElement("span",{style:(0,w.convertLineStyleData)(1==e||3==e||2==e&&1==Pe.is_enough_price&&1==Pe.in_business_time||4==e&&1==Le.in_business_time?"color:"+_.theme+";border-color:"+_.theme:"color: #999;border-color: #D2D2D2"),onClick:1==e||3==e||2==e&&1==Pe.is_enough_price&&1==Pe.in_business_time||4==e&&1==Le.in_business_time?t.deliveryWayChange:null,"data-type":e},"选择")))})),b.default.createElement("div",{className:"goods-pick-bottom",onClick:this.closeGoodsPick},"关闭"))),He&&!c&&b.default.createElement("div",{className:"goods-pick-mask"},b.default.createElement("div",{className:"goods-pick-box"},b.default.createElement("div",{className:"goods-pick-header"},"选择取货时间"),ze?b.default.createElement("div",{className:"none-appointment-time"},b.default.createElement("img",{className:"no-reservation",src:"http://cdn.jisuapp.cn/static/webapp/images/xcx-goods/no-reservation.png"}),b.default.createElement("div",{className:"title"},"暂无可预约时间"),b.default.createElement("div",{className:"tips"},Ve),b.default.createElement("div",{className:"tips"},We)):b.default.createElement(b.default.Fragment,null,1==W&&b.default.createElement("div",{className:"goods-pick-content"},Be&&je&&b.default.createElement("div",{onClick:this.tostoreImmediately,className:"goods-pick-time "+(1==H?"selected":"")},"立即取货（"+(0==J?"无需等待":"大约等待"+J+"分钟")+"）"),Ge.date_arr.map(function(e,a){return b.default.createElement(b.default.Fragment,{key:a},1==e.is_vaild&&b.default.createElement("div",{onClick:t.selectTostoreTime,"data-index":a,className:"goods-pick-time "+(1!=H&&V==e.date?"selected":"")},S.date(e.date)+"(星期"+S.week(e.week)+")"))})),Ge.setting_data&&1!=W&&b.default.createElement("div",{className:"double-column-time"},b.default.createElement("div",{className:"double-time-day"},Ge.date_arr.map(function(e,a){return b.default.createElement(b.default.Fragment,{key:a},1==e.is_vaild&&b.default.createElement("div",{onClick:t.selectTostoreTime,"data-index":a,className:"goods-pick-time "+(V==e.date?"selected":"")},S.date(e.date)+"(星期"+S.week(e.week)+")"))})),b.default.createElement("div",{className:"double-time-hours"},!qe&&je&&Be&&b.default.createElement("div",{onClick:this.tostoreImmediately,className:"goods-pick-time "+(1==H?"selected":"")},"立即取货（"+(0==J?"无需等待":"大约等待"+J+"分钟")+"）"),Ue.map(function(e,a){return b.default.createElement("div",{onClick:t.selectTostoreHourTime,"data-index":a,className:Y==e?"selected":"",key:a},e)})))),b.default.createElement("div",{className:"goods-pick-bottom",onClick:this.closeGoodsPick},"关闭"))),He&&c&&b.default.createElement("div",{className:"goods-pick-mask"},b.default.createElement("div",{className:"goods-pick-box"},b.default.createElement("div",{className:"goods-pick-header"},"选择取货时间"),o[s].noAppointmentShow?b.default.createElement("div",{className:"none-appointment-time"},b.default.createElement("img",{className:"no-reservation",src:"http://cdn.jisuapp.cn/static/webapp/images/xcx-goods/no-reservation.png"}),b.default.createElement("div",{className:"title"},"暂无可预约时间"),b.default.createElement("div",{className:"tips"},o[s].noAppointmentWordb),b.default.createElement("div",{className:"tips"},o[s].noAppointmentWorda)):b.default.createElement(b.default.Fragment,null,1==o[s].tostoreTimeType&&b.default.createElement("div",{className:"goods-pick-content"},o[s].noImmediaPick&&o[s].showImmediatelyTime&&b.default.createElement("div",{"data-app-id":s,onClick:this.tostoreImmediately,className:"goods-pick-time "+(1==o[s].tostoreOrderType?"selected":"")},"立即取货（"+(0==o[s].waitingQueueTime?"无需等待":"大约等待"+o[s].waitingQueueTime+"分钟")+"）"),o[s].getEcTostoredate.date_arr.map(function(e,a){return b.default.createElement(b.default.Fragment,{key:a},1==e.is_vaild&&b.default.createElement("div",{onClick:t.selectTostoreTime,"data-index":a,className:"goods-pick-time "+(1!=o[s].tostoreOrderType&&o[s].tostoreDateTime==e.date?"selected":"")},S.date(e.date)+"(星期"+S.week(e.week)+")"))})),o[s].getEcTostoredate.setting_data&&1!=o[s].tostoreTimeType&&b.default.createElement("div",{className:"double-column-time"},b.default.createElement("div",{className:"double-time-day"},o[s].getEcTostoredate.date_arr.map(function(e,a){return b.default.createElement(b.default.Fragment,{key:a},1==e.is_vaild&&b.default.createElement("div",{onClick:t.selectTostoreTime,"data-index":a,className:"goods-pick-time",style:(0,w.convertLineStyleData)("color: "+(o[s].tostoreDateTime==e.date?_.theme:"#666")+";")},S.date(e.date)+"(星期"+S.week(e.week)+")"))})),b.default.createElement("div",{className:"double-time-hours"},!o[s].dateIndex&&o[s].showImmediatelyTime&&o[s].noImmediaPick&&b.default.createElement("div",{onClick:this.tostoreImmediately,"data-app-id":s,className:"goods-pick-time",style:(0,w.convertLineStyleData)("color: "+(1==o[s].tostoreOrderType?_.theme:"#666")+";")},"立即取货（"+(0==o[s].waitingQueueTime?"无需等待":"大约等待"+o[s].waitingQueueTime+"分钟")+"）"),o[s].tostoreHoursArr.map(function(e,a){return b.default.createElement("div",{onClick:t.selectTostoreHourTime,"data-index":a,style:(0,w.convertLineStyleData)("color: "+(o[s].tostoreHourTime==e?_.theme:"#666")+";"),key:a},e)})))),b.default.createElement("div",{className:"goods-pick-bottom",onClick:this.closeGoodsPick},"关闭"))),Ye&&b.default.createElement("div",{className:"goods-pick-mask"},b.default.createElement("div",{className:"goods-pick-box"},b.default.createElement("div",{className:"goods-pick-header"},"选择送达时间"),b.default.createElement("div",{className:"goods-pick-content goods-same-journey-time"},b.default.createElement("div",{onClick:this.selectSameJourneyTime,"data-type":"immedia",className:"goods-pick-time",style:(0,w.convertLineStyleData)("color:"+(c?1==o[s].sameJourneyTimeType?_.theme:"#666":1==q?_.theme:"#666")+";")},"尽快送达(预计"+(c?o[s].sameJourneyImmediatlyTime:U)+"分钟后送达)"),(c?o[s].sameJourneyHoursArr:Je).map(function(e,a){return b.default.createElement(b.default.Fragment,{key:a},b.default.createElement("div",{onClick:t.selectSameJourneyTime,"data-type":"appoint","data-index":a,className:"goods-pick-time",style:(0,w.convertLineStyleData)("color:"+(c?1!=o[s].sameJourneyTimeType&&o[s].sameJourneyDateTime==e?_.theme:"#666":1!=q&&z==e?_.theme:"#666")+";")},e))})),b.default.createElement("div",{className:"goods-pick-bottom",onClick:this.closeGoodsPick},"关闭"))),Qe&&b.default.createElement("div",{className:"perfect-address-mask",onClick:this.hidePerfectAddress},b.default.createElement("div",{className:"perfect-address-box",onClick:this.stopPropagation},b.default.createElement("div",{className:"perfect-address-title"},"提示"),b.default.createElement("div",{className:"perfect-address-tips"},"请完善地址信息~"),b.default.createElement("div",{className:"perfect-address-bottom"},b.default.createElement("span",{onClick:this.manuallyAddAddress},"手动新增地址"),b.default.createElement("span",{onClick:this.importWeChatAddress,className:"import-weChat-address"},"导入微信地址")))),$e&&b.default.createElement("div",{className:"vip_goods_mask",onClick:this.hideVipGoodsList},b.default.createElement("div",{className:"vipGoodsWarp"},Ke&&b.default.createElement("div",{className:"custom-info-wrapper flex-between"},b.default.createElement("div",{className:"flex-between"},b.default.createElement("div",{className:"custom-info"},b.default.createElement("img",{src:Ke.cover_thumb})),b.default.createElement("span",{className:"custom-name"},Ke.title)),b.default.createElement("div",{className:"pull-right"},b.default.createElement("span",{className:"cut_price_tip"},"优惠"),b.default.createElement("span",{className:"vip_cut_price"},"-¥"+ue))),b.default.createElement("div",{className:"preview-goods-order-list"},Xe.map(function(e,t){return b.default.createElement("div",{className:"preview-goods-order-item",key:e.id},b.default.createElement("img",{className:"preview-goods-cover",src:e.cover,mode:"aspectFill"}),b.default.createElement("div",{className:"preview-goods-content"},b.default.createElement("div",{className:"preview-goods-title"},e.title),b.default.createElement("div",{className:"goods-type"},b.default.createElement("div",{className:"type-taste"},e.model_value_str)),b.default.createElement("div",{className:"goods-price-box"},b.default.createElement(b.default.Fragment,null,b.default.createElement("span",{className:"preview-goods-price",style:(0,w.convertLineStyleData)(G?"":"color:"+_.theme)},"¥"+e.price),e.cart_vip_goods&&b.default.createElement("span",{className:"dinning_vip_tips"},"会员价"),b.default.createElement("span",{className:"preview-goods-price",style:(0,w.convertLineStyleData)("margin-left:10rpx;color:#999;")},"¥ "+e.original_price)),b.default.createElement("div",{className:"pull-right"},b.default.createElement("div",{className:"group-count"},"×"+e.num)))))})))),b.default.createElement(x.MemberDiscount,{ref:this.memberDiscountRef}))}}]),t}(D.default);t.default=M},function(e,t){},function(e,t){},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(17),i=n(o),s=a(39),r=n(s),c=a(0),l=n(c),d=a(3),u=n(d),m=a(1),p=n(m),f=a(2),g=n(f);a(16),a(35);var h=a(5),v=a(6),_=a(7),y=n(_);a(378);var E=function(e){function t(e){(0,l.default)(this,t);var a=(0,p.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={areaCodeArr:[{label:"中国大陆 +86",value:0},{label:"中国澳门 +853",value:1},{label:"中国香港 +852",value:2},{label:"中国台湾 +886",value:3}],areaCodeIndex:0,nationListMap:[],nationSelectedIndex:[0],nationList:[],nationId:1,nationname:"",regionInfoText:"",addressId:"",orderId:"",detail:"",isDefault:0,selectAddressId:"",addressList:[],isFromBack:!1,from:"",showNewAddressDialog:!0,address_id:"",localAddress:"",address_info:{name:"",contact:"",country:{text:"",id:""},province:{text:"",id:""},city:{text:"",id:""},district:{text:"",id:""},detailAddress:"",sex:1,label:3},selectRegion:[0,0,0],selectRegionId:[0,0,0],detailAddress:"",storeStyle:{}},a.selectAddressBack=!1,a.dataInitial=function(){a.getAppECStoreConfig();var e=a.data.addressId;e?a.getAddressDetail(e):a.handleCurrentPage(),a.getNationList()},a.getNationList=function(){var e=a;h.appMethod.sendRequest({url:"/index.php?r=Region/getNationList",data:{page:1,page_size:10},success:function(t){var a=t.data.reverse(),n=0,o=a.map(function(t,a){return t.oversea_region_id==e.data.nationId&&(n=a),{label:t.nation_name,value:t.oversea_region_id}}),i=[n],s=a[n];e.setData({nationListMap:a,nationList:o,nationSelectedIndex:i,nationId:s.oversea_region_id,nationname:s.nation_name})}})},a.getAllPickUpConfig=function(){var e=a;h.appMethod.sendRequest({url:"/index.php?r=AppEcommerce/GetAllPickUpConfig",data:{latitude:e.location.lat,longitude:e.location.lng},success:function(t){e.setData({suportExpress:t.data.config_data.express,suportSameCity:t.data.config_data.intra_city,suportSelfDelivery:t.data.config_data.is_self_delivery})}})},a.getAddressDetail=function(e){var t=a;h.appMethod.sendRequest({url:"/index.php?r=AppShop/GetAddressById",data:{address_id:e},success:function(e){var a=e.data,n=a.address_info,o=[n.province&&n.province.text||"",n.city&&n.city.text||"",n.district&&n.district.text||""],i="",s=0,r=n.contact||a.telphone;0==r.indexOf("+853-")?(r=r.substring(5),s="1"):0==r.indexOf("+852-")?(r=r.substring(5),s="2"):0==r.indexOf("+886-")?(r=r.substring(5),s="3"):0==r.indexOf("1-")?r=r.substring(2):0==r.indexOf("60-")&&(r=r.substring(3)),o[1]!==o[2]&&""!==o[2]||o.pop(),a.address_info.country&&1!=a.address_info.country.id&&(i=" "),t.data.detailAddress=n.detailAddress,t.setData({areaCodeIndex:s,"address_info.name":n.name,"address_info.contact":r,"address_info.country":n.country||{text:"",id:""},nationId:n.country?n.country.id||1:1,"address_info.province":n.province||{text:"",id:""},"address_info.city":n.city||{text:"",id:""},"address_info.district":n.district||{text:"",id:""},"address_info.detailAddress":n.detailAddress||a.detail_address,"address_info.sex":n.sex||2,"address_info.label":n.label||3,"address_info.regionInfoText":o.join(i),latitude:a.latitude,longitude:a.longitude}),t.location={lat:a.latitude,lng:a.longitude},t.getAllPickUpConfig(),t.handleCurrentPage()}})},a.nameInput=function(e){a.setData({name:e.detail.value})},a.contactInput=function(e){a.setData({contact:e.detail.value})},a.detailInput=function(e){a.setData({detail:e.detail.value})},a.setAddress=function(e){var t=a.data.orderId;h.appMethod.sendRequest({url:"/index.php?r=AppShop/setAddress",data:{order_id:t,address_id:e},success:function(e){h.appMethod.turnBack()}})},a.setDefaultAddress=function(e){e.detail.value?a.setData({isDefault:1}):a.setData({isDefault:0})},a.sureAddAddress=function(){var e=a,t=e.data.address_info,n=e.data.addressId,o=1==+e.data.nationId,i=a.data.areaCodeIndex;if(!t.name)return void h.appMethod.showModal({content:"联系人不能为空"});if(!t.contact)return void h.appMethod.showModal({content:"电话不能为空"});if(o&&(0==i&&!/^1[0-9]{10}$/.test(t.contact)||1!=i&&!/^\d+$/.test(t.contact)))return void h.appMethod.showModal({content:"请填写正确的手机号"});if(!t.province||!t.province.text)return void h.appMethod.showModal({content:"请选择收货地址"});if(!t.detailAddress)return void h.appMethod.showModal({content:"详细地址不能为空"});if(o&&~["89","233"].indexOf(t.country.id)||!o&&"1"==t.country.id)return void h.appMethod.showModal({content:"所在地区与国家不匹配"});if(o&&i)switch(i){case"1":t.contact="+853-"+t.contact;break;case"2":t.contact="+852-"+t.contact;break;case"3":t.contact="+886-"+t.contact}89==a.data.nationId?t.contact="1-"+t.contact:233==a.data.nationId&&(t.contact="60-"+t.contact);var s=JSON.parse(JSON.stringify(t));if(s.detailAddress){s.detailAddress=s.address+s.detailAddress;var r=s.detailAddress.indexOf("区");s.detailAddress=s.detailAddress.substring(r+1,s.detailAddress.length)}s.address&&delete s.address,-1!==a.data.address_info.detailAddress.indexOf(a.data.detailAddress)?(t.latitude=a.data.latitude,t.longitude=a.data.longitude):(delete t.latitude,delete t.longitude),h.appMethod.sendRequest({url:"/index.php?r=AppShop/addAddress",method:"post",data:{address_info:t,address_id:n,is_default:0},success:function(e){h.appMethod.showToast({title:"保存成功"}),h.appMethod.turnBack()},successStatusAbnormal:function(e){if(console.log(e),"获取经纬度失败"==e.data)return h.appMethod.showModal({content:"该地址定位不到，请检查地址是否正确"}),!1}})},a.deleteAddress=function(e){var t=a;h.appMethod.showModal({content:"确定要删除地址？",showCancel:!0,confirmText:"确定",cancelText:"取消",confirm:function(){h.appMethod.sendRequest({url:"/index.php?r=AppShop/delAddress",data:{address_id:t.data.addressId},success:function(e){h.appMethod.turnBack()}})}})},a.addAdressName=function(e){a.setData({"address_info.name":e.target.value})},a.addAdressContact=function(e){a.setData({"address_info.contact":e.target.value})},a.addAdressDetailAddress=function(e){a.setData({"address_info.detailAddress":e.target.value})},a.selectAddressLabel=function(e){a.setData({"address_info.label":e.currentTarget.dataset.label})},a.selectAddressSex=function(e){a.setData({"address_info.sex":e.currentTarget.dataset.sex})},a.addSelectAddress=function(){h.appMethod.turnToPage("/eCommerce/pages/searchAddress/searchAddress?from=addAddress&nationId="+a.data.nationId+"&nationname="+a.data.nationname)},a.getAppECStoreConfig=function(){h.appMethod.getAppECStoreConfig(function(e){a.setData({storeStyle:e.color_config})})},a.selectNation=function(e){var t=a,n=e[0],o={nationId:n};a.data.nationList.some(function(e,t){var a=e.value==n;return a&&(o.nationSelectedIndex=[t],o.nationname=e.label),a}),t.setData(o)},a.selectAreaCode=function(e){a.setData({areaCodeIndex:e[0]})},document.title="新增收货地址",(h.appMethod.getCurrentPage().data||h.appMethod.getCurrentPage().callbackData)&&(a.currentPage=h.appMethod.getCurrentPage()),a}return(0,g.default)(t,e),(0,u.default)(t,[{key:"handleCurrentPage",value:function(){if(this.currentPage){var e=this.currentPage,t=e.data,a=e.callbackData;t&&this.setData(t),a&&(this.setData(a),this.currentPage.clearCallbackData(),this.currentPage.location&&(this.location=this.currentPage.location,delete this.currentPage.location))}}},{key:"componentWillMount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,v.getCurrentPageQueryParams)(),t={},a=e.id||"";t.addressId=a;var n=e.oid||"";t.orderId=n;var o=e.countryId||!1;!1!==o&&(t.nationId=o),a&&h.appMethod.setPageTitle("编辑收货地址"),this.setData(t),this.dataInitial()}},{key:"componentDidMount",value:function(){this.selectAddressBack&&this.getAllPickUpConfig(),this.data.detailAddress=this.data.address_info.detailAddress}},{key:"render",value:function(){var e=this,t=this.state,a=t.address_info,n=t.storeStyle,o=t.nationSelectedIndex,s=t.nationList,c=t.areaCodeArr,l=t.areaCodeIndex,d=t.nationId,u=t.suportExpress,m=t.suportSameCity,p=t.suportSelfDelivery,f=t.addressId;return React.createElement("div",{className:"official-page add-address"},React.createElement("div",{id:"newAddressDialog"},React.createElement("div",{className:"newAddressBox"},React.createElement("div",{className:"newAddressView"},React.createElement("label",null,"收货人"),React.createElement("input",{maxLength:"20",type:"text",placeholder:"请填写收货人姓名",onInput:this.addAdressName,value:a.name||"",onChange:function(){}})),React.createElement("div",{className:"newAddressView"},React.createElement("label",null,"性别"),React.createElement("div",{className:"adress-label-box"},React.createElement("div",{style:(0,v.convertLineStyleData)(0==a.sex?"color:"+n.theme+";border-color:"+n.theme+";background:"+n.theme+"33":""),className:"adressLabel "+(0==a.sex?"active":""),onClick:this.selectAddressSex,"data-sex":"0"},"女士"),React.createElement("div",{style:(0,v.convertLineStyleData)(1==a.sex?"color:"+n.theme+";border-color:"+n.theme+";background:"+n.theme+"33":""),className:"adressLabel "+(1==a.sex?"active":""),onClick:this.selectAddressSex,"data-sex":"1"},"先生"))),React.createElement("div",{className:"newAddressView"},React.createElement("label",null,"国家"),React.createElement("div",{className:"nationName content-flex-end"},!!s.length&&React.createElement(i.default,{data:s,cols:1,value:[s[o].value],onOk:function(t){return e.selectNation(t)}},React.createElement(r.default.Item,null))),React.createElement("span",{className:"ico-moon icon-rightarrow"})),React.createElement("div",{className:"newAddressView"},React.createElement("label",null,"区号"),React.createElement("div",{className:"area-code-picker content-flex-end"},1==d?React.createElement(React.Fragment,null,React.createElement(i.default,{data:c,cols:1,value:[l],onOk:function(t){return e.selectAreaCode(t)}},React.createElement(r.default.Item,null))):89==d?React.createElement(React.Fragment,null,React.createElement("div",{className:"area-code-picker"},"Canada +1")):233==d&&React.createElement(React.Fragment,null,React.createElement("div",{className:"area-code-picker"},"Malaysia +60")))),React.createElement("div",{className:"newAddressView"},React.createElement("label",null,"手机号码"),React.createElement("input",{type:"text",placeholder:"请填写收货人手机号",onInput:this.addAdressContact,value:a.contact||"",onChange:function(){}})),React.createElement("div",{className:"newAddressView",onClick:this.addSelectAddress},React.createElement("label",null,"所在地区"),React.createElement("input",{type:"text",placeholder:"请选择省市区",value:a.regionInfoText||"",onChange:function(){}}),React.createElement("span",{className:"ico-moon icon-rightarrow"})),React.createElement("div",{className:"newAddressView"},React.createElement("label",null,"详细地址"),React.createElement("input",{type:"text",placeholder:"详细地址（例如门牌号等）",onInput:this.addAdressDetailAddress,value:a.detailAddress||"",onChange:function(){}})),React.createElement("div",{className:"newAddressView"},React.createElement("label",null,"选择标签"),React.createElement("div",{className:"adress-label-box"},React.createElement("div",{style:(0,v.convertLineStyleData)(0==a.label?"color:"+n.theme+";border-color:"+n.theme+";background:"+n.theme+"33":""),className:"adressLabel "+(0==a.label?"active":""),onClick:this.selectAddressLabel,"data-label":"0"},"家"),React.createElement("div",{style:(0,v.convertLineStyleData)(1==a.label?"color:"+n.theme+";border-color:"+n.theme+";background:"+n.theme+"33":""),className:"adressLabel "+(1==a.label?"active":""),onClick:this.selectAddressLabel,"data-label":"1"},"学校"),React.createElement("div",{style:(0,v.convertLineStyleData)(2==a.label?"color:"+n.theme+";border-color:"+n.theme+";background:"+n.theme+"33":""),className:"adressLabel "+(2==a.label?"active":""),onClick:this.selectAddressLabel,"data-label":"2"},"公司"))),React.createElement("div",null,React.createElement("label",null,"取货方式"),React.createElement("div",{className:"address-pick-up"},React.createElement("div",null,React.createElement("span",{style:(0,v.convertLineStyleData)(u?"color:"+n.theme:""),className:"ico-moon icon-goods-support-delivery "+(u?"suporrt":"")}),React.createElement("span",null,"快递")),React.createElement("div",null,React.createElement("span",{style:(0,v.convertLineStyleData)(m?"color:"+n.theme:""),className:"ico-moon icon-goods-support-delivery "+(m?"suporrt":"")}),React.createElement("span",null,"同城")),React.createElement("div",null,React.createElement("span",{style:(0,v.convertLineStyleData)(p?"color:"+n.theme:""),className:"ico-moon icon-goods-support-delivery "+(p?"suporrt":"")}),React.createElement("span",null,"自提"))))),React.createElement("div",{className:"newAddressBottom"},React.createElement("div",{className:"sureAddAddress",style:(0,v.convertLineStyleData)("background:"+n.theme),onClick:this.sureAddAddress},"保存并使用"),f&&React.createElement("div",{className:"cancelAddAddress",onClick:this.deleteAddress},"删除收货地址"))))}}]),t}(y.default);t.default=E},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(9),i=n(o),s=a(0),r=n(s),c=a(3),l=n(c),d=a(1),u=n(d),m=a(2),p=n(m),f=a(5),g=a(12),h=(n(g),a(6)),v=a(7),_=n(v);a(380);var y=function(e){function t(e){(0,r.default)(this,t);var a=(0,u.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={status:0,orderId:"",franchiseeId:"",collectBenefitData:{},starData:[],isFail:!0,isWinning:!0,isComfort:!0,isWhole:!0,scratchId:"",isShowteam:!1,winingTitle:"",isScroll:!0,ifWxCoupon:!1,timestamp:"",signature:"",ifGetComfort:!1,storeStyle:{}},a.touchStart=function(e){if(a.isStart){var t=a.drawRect(e.touches[0].x,e.touches[0].y);a.ctx.clearRect(t[0],t[1],t[2],t[2]),a.ctx.draw(!0)}},a.touchMove=function(e){if(a.isStart){var t=a.drawRect(e.touches[0].x,e.touches[0].y);a.ctx.clearRect(t[0],t[1],t[2],t[2]),a.ctx.draw(!0)}},a.touchEnd=function(e){if(a.isStart){var t=a.canvasWidth,n=a.canvasHeight,o=a.minX,i=a.minY,s=a.maxX,r=a.maxY;s-o>.5*t&&r-i>.5*n&&(a.ctx.draw(),a.endCallBack&&a.endCallBack(),a.isStart=!1,a.page.setData({isScroll:!0}))}},a.getGoldenData=function(e){var t=a;f.appMethod.sendRequest({url:"/index.php?r=appLotteryActivity/getTimeAfterConsume",method:"post",data:{order_id:e,sub_app_id:t.data.franchiseeId},success:function(e){e.data?t.data.code?t.setData({isWhole:!0}):t.setData({isWhole:!1,scratchId:e.data}):t.setData({isWhole:!0}),e.integral&&t.setData({rewardPointObj:{showModal:!0,count:e.integral,callback:""}})}})},a.showAreaClick=function(){var e=a;e.setData({isShowteam:!1}),f.appMethod.sendRequest({url:"/index.php?r=appLotteryActivity/lottery",hideLoading:!0,data:{activity_id:e.data.scratchId,sub_app_id:e.data.franchiseeId},success:function(t){var a=t.data;if(e.scratch.start(),"谢谢参与"==a.title)e.setData({isFail:!1});else{var n={ifWxCoupon:a.card_id||!1,timestamp:a.timestamp||"",signature:a.signature||""};a.is_comfort?n.isComfort=!1:(n.isWinning=!1,n.winingTitle=a.title),e.setData(n)}}})},a.onShareAppMessage=function(e){var t=a,n=a.data.franchiseeId?"&franchisee="+a.data.franchiseeId:"";return{path:"/awardManagement/pages/scratch/scratch?id="+t.data.scratchId+n,success:function(e){f.appMethod.sendRequest({url:"/index.php?r=appLotteryActivity/getTime",data:{activity_id:t.data.scratchId,type:"share",sub_app_id:t.data.franchiseeId},success:function(e){}})},fail:function(e){}}},a.getCollectBenefitData=function(e){var t=a;f.appMethod.sendRequest({url:"/index.php?r=AppMarketing/CollectmeSendCoupon",data:{order_id:e,sub_app_id:t.data.franchiseeId},hideLoading:!0,success:function(e){for(var a=[],n=0;n<e.data.star_num;n++)a.push("light");for(var n=0;n<e.data.collect_num-e.data.star_num;n++)a.push("dark");t.setData({collectBenefitData:e.data,starData:a})}})},a.goToHomepage=function(){var e=f.appMethod.getHomepageRouter();f.appMethod.reLaunch({url:"/pages/"+e+"/"+e})},a.goToOrderDetail=function(e){var t=e.target.dataset.type||"",n=4==t?"diningOrderDetail/diningOrderDetail?detail=":"goodsOrderDetail/goodsOrderDetail?detail=",o=a,i="/eCommerce/pages/"+n+o.data.orderId+(o.data.franchiseeId?"&franchisee="+o.data.franchiseeId:""),s="/eCommerce/pages/groupOrderDetail/groupOrderDetail?id="+o.data.orderId+(o.data.franchiseeId?"&franchisee="+o.data.franchiseeId:""),r="/eCommerce/pages/appointmentOrderDetail/appointmentOrderDetail?detail="+o.data.orderId+(o.data.franchiseeId?"&franchisee="+o.data.franchiseeId:""),c="/newAppointment/pages/newAppointmentOrderDetail/newAppointmentOrderDetail?detail="+o.data.orderId+(o.data.franchiseeId?"&franchisee="+o.data.franchiseeId:"")+"&aptType="+a.data.is_newAppointment;"true"==a.data.is_group?f.appMethod.turnToPage(s,!0):a.data.code?f.appMethod.turnToPage(r,!0):a.data.is_newAppointment?f.appMethod.turnToPage(c,!0):a.data.isFranchisee?f.appMethod.turnToPage("/eCommerce/pages/myOrder/myOrder?goodsType=0&currentIndex=0",!0):f.appMethod.turnToPage(i,!0)},a.getOrderDetail=function(){var e=a;f.appMethod.getOrderDetail({data:{order_id:e.data.orderId,sub_shop_app_id:e.data.franchiseeId},success:function(t){e.setData({orderInfo:t.data[0].form_data})}})},a.toAddCard=function(){var e=a.data,t=e.ifWxCoupon,n=a;f.appMethod.addCard({cardList:[{cardId:t,cardExt:'{"nonce_str":"'+e.timestamp+'","timestamp":"'+e.timestamp+'", "signature":"'+e.signature+'"}'}],success:function(t){n.setData({ifWxCoupon:!1,ifGetComfort:!0}),f.appMethod.sendRequest({url:"/index.php?r=appLotteryActivity/recvWeChatCoupon",data:{card_id:t.cardList[0].cardId,sub_app_id:e.franchisee,activity_id:e.scratchId},success:function(e){f.appMethod.showModal({title:"提示",content:"领取卡券成功",showCancel:!1})}})}})},a.getAppECStoreConfig=function(){f.appMethod.getAppECStoreConfig(function(e){a.setData({storeStyle:e.color_config,hasRecommendConfig:!!e.recommend_config})},a.data.franchiseeId)},document.title="支付成功",a}return(0,p.default)(t,e),(0,l.default)(t,[{key:"componentWillMount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,h.getCurrentPageQueryParams)(),t=this;1==e.collectBenefit&&(t.getCollectBenefitData(e.detail),t.setData({status:1})),t.setData({orderId:e.detail,franchiseeId:e.franchisee||"",is_group:e.is_group||"",code:e.code||"",is_newAppointment:e.is_newAppointment||"",isFranchisee:1==e.isFranchisee}),t.getOrderDetail(),this.getAppECStoreConfig(),t.getGoldenData(e.detail);f.appMethod.globalData.systemInfo}},{key:"render",value:function(){var e=this.state,t=(e.rewardPointObj,e.shareGiftsObj,e.collectGiftsObj,e.collectGetObj,e.showGetUserInfo,e.storeStyle),a=e.orderInfo,n=e.hasRecommendConfig,o=e.collectBenefitData,s=e.starData,r=e.status,c=e.isWhole,l=e.isFail,d=e.isWinning,u=e.winingTitle,m=e.isComfort,p=e.ifGetComfort,f=e.ifWxCoupon,g=e.hideCanvas,v=e.scratch,_=(e.isScroll,e.isShowteam);e.franchiseeId;return a=a||{},v=v||{},React.createElement("div",{className:"official-page goods-order-pay-success"},React.createElement("div",null,n&&React.createElement("div",{className:"normal-area"},React.createElement("div",{className:"order-price-box",style:(0,h.convertLineStyleData)("background:"+t.theme)},React.createElement("div",{className:"order-success"},React.createElement("img",{className:"goods-complete-succes",src:"http://cdn.jisuapp.cn/static/webapp/images/xcx-goods/goods-complete-success.png"}),React.createElement("span",null,"支付成功")),React.createElement("div",{className:"order-price"},"¥"+a.order_total_price),React.createElement("div",{className:"btn-area"},React.createElement("div",{onClick:this.goToHomepage},"继续购物"),React.createElement("div",{onClick:this.goToOrderDetail,"data-type":a.pick_up_type},"查看订单"))),React.createElement("img",{className:"goods-complete-bg",src:"http://cdn.jisuapp.cn/static/webapp/images/xcx-goods/goods-complete-bg.png"})),!n&&React.createElement(React.Fragment,null,React.createElement("div",{className:"no-recommend-box"},React.createElement("div",{className:"normal-area",style:(0,h.convertLineStyleData)("background:"+t.theme)},React.createElement("img",{className:"goods-complete-succes",src:"http://cdn.jisuapp.cn/static/webapp/images/xcx-goods/big-goods-complete-success.png"}),React.createElement("img",{className:"goods-complete-bg",src:"http://cdn.jisuapp.cn/static/webapp/images/xcx-goods/goods-complete-bg.png"})),React.createElement("div",{className:"goods-complete-title",style:(0,h.convertLineStyleData)("color:"+t.theme)},"¥"+a.order_total_price),React.createElement("div",{className:"slogan"},"支付成功"),React.createElement("div",{className:"btn-area"},React.createElement("div",{className:"go-on-shopping",onClick:this.goToHomepage,style:(0,h.convertLineStyleData)("color:"+t.theme+";border-color:"+t.theme)},"继续购物"),React.createElement("div",{onClick:this.goToOrderDetail,"data-type":a.pick_up_type},"查看订单")))),1==r&&React.createElement("div",{className:"collect-benefit-area"},React.createElement("div",{className:"activity-box"},React.createElement("div",{className:"line"}),React.createElement("div",{className:"activity-title"},"活动"),React.createElement("div",{className:"line"})),React.createElement("div",{className:"collect-item"},React.createElement("div",{className:"star-num"},"集集乐个数: "+o.star_num),React.createElement("div",{className:"star-list"},s.map(function(e,t){return React.createElement(React.Fragment,{key:t},"light"==e?React.createElement("img",{className:"star-item",src:o.light_img}):"dark"==e&&React.createElement("img",{className:"star-item",src:o.dark_img}))})),o.star_num==o.collect_num&&React.createElement("div",{className:"star-full"},React.createElement("div",{className:"star-full-text"},"满"))),React.createElement("div",{className:"tip-item"},o.star_num==o.collect_num?React.createElement("div",null,"获得一张"+o.coupon_title):o.star_num!=o.collect_num&&React.createElement("div",null,"消费"+(0==o.play_type?"每满":"超过")+o.value+"元，累计一颗星，集满可获得"+o.coupon_title+"一张"))),React.createElement("div",{className:"scratchWhole",hidden:c},React.createElement("div",{className:"activity-box scratch-activity"},React.createElement("div",{className:"line"}),React.createElement("div",{className:"activity-title"},"活动"),React.createElement("div",{className:"line"})),React.createElement("div",{className:"scratchArea"},React.createElement("div",{className:"scratchFail",hidden:l},React.createElement("img",{src:"http://cdn.jisuapp.cn/static/webapp/images/scratchFail.png"}),React.createElement("div",{className:"failTitle"},React.createElement("button",{className:"failShare"},"分享"),React.createElement("div",{className:"failText"},"很遗憾没有中奖哦"))),React.createElement("div",{className:"scratchWinning",hidden:d},React.createElement("img",{src:"http://cdn.jisuapp.cn/static/webapp/images/scratchPrize.png"}),React.createElement("div",{className:"winningTitle"},React.createElement("button",{className:"winningShare"},"分享"),React.createElement("div",{className:"winningText"},"恭喜你获得了"),React.createElement("div",{className:"winningText winningValue"},u))),React.createElement("div",{className:"scratchComfort",hidden:m},React.createElement("img",{src:"http://cdn.jisuapp.cn/static/webapp/images/scratchComfort.png"}),React.createElement("div",{className:"comfortTitle"},React.createElement("button",{className:"comfortShare"},"分享"),p?React.createElement("div",{className:"comfortText"},"已领取，在微信卡包中查看哦~"):React.createElement("div",(0,i.default)({className:"comfortText"},"className","comfortText"),"又没中奖，送你一个小礼品"),!f&&!p&&React.createElement("div",{className:"comfortText"},">在优惠券卡包进行查收哦~"))),React.createElement("div",{className:"scratch_wp",hidden:g,style:(0,h.convertLineStyleData)("width: "+v.width+"px; height: "+v.height+"px;")},React.createElement("canvas",{className:"scratch-canvas",style:(0,h.convertLineStyleData)("width: "+v.width+"px;height: "+v.height+"px;"),onTouchStart:this.touchStart,onTouchMove:this.touchMove,onTouchEnd:this.touchEnd},_&&React.createElement(CoverView,{className:"showArea"},React.createElement(CoverView,{className:"showTitle"},"赢取优惠大奖"),React.createElement(CoverView,{className:"showBtn",onClick:this.showAreaClick},"点我刮奖"))))))))}}]),t}(_.default);t.default=y},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(0),i=n(o),s=a(3),r=n(s),c=a(1),l=n(c),d=a(2),u=n(d),m=a(5),p=a(6),f=a(7),g=n(f);a(382);var h=function(e){function t(e){(0,i.default)(this,t);var a=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={goodsId:"",commentType:0,comments:[],commentNums:[],loadPage:1,total_page:1,storeStyle:{}},a.onReachBottom=function(){a.data.loadPage>a.data.total_page||a.getAssessList(a.data.commentType,a.data.loadPage,1)},a.getAssessList=function(e,t,n){var o=a;m.appMethod.getAssessList({method:"post",data:{goods_id:o.data.goodsId,idx_arr:{idx:"level",idx_value:e},page:t,page_size:20,sub_shop_app_id:a.data.franchiseeId},success:function(e){var t=e.data;n&&(t=o.data.comments.concat(t)),o.setData({comments:t,commentNums:e.num,loadPage:o.data.loadPage+1,total_page:e.total_page})}})},a.clickCommentLabel=function(e){var t=e.currentTarget.dataset.type,n={};n.loadPage=1,n.commentType=t,a.setData(n),a.getAssessList(t,1)},a.clickPlusImages=function(e){m.appMethod.previewImage({current:e.currentTarget.dataset.src,urls:e.currentTarget.dataset.srcarr})},a.getAppECStoreConfig=function(){m.appMethod.getAppECStoreConfig(function(e){a.setData({storeStyle:e.color_config})},a.data.franchiseeId)},document.title="商品评价",a}return(0,u.default)(t,e),(0,r.default)(t,[{key:"componentWillMount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,p.getCurrentPageQueryParams)(),t=e.detail||"",a=e.franchisee||"";this.setData({goodsId:t,franchiseeId:a}),this.getAssessList(0,1),this.getAppECStoreConfig()}},{key:"render",value:function(){var e=this,t=this.state,a=(t.showGetUserInfo,t.commnetType),n=t.storeStyle,o=t.commentNums,i=t.comments;return React.createElement("div",{className:"official-page goods-comment"},React.createElement("div",{className:"comPage-wrap page",id:"commentPage"},React.createElement("div",{className:"comPage-top-section"},React.createElement("div",{style:(0,p.convertLineStyleData)("border-bottom:1px solid #f4f4f4;")},React.createElement("label",{style:(0,p.convertLineStyleData)("background:"+(0==a?n.theme:n.theme+"33")),onClick:this.clickCommentLabel,"data-type":"0",className:"comPage-comment-label "+(0==a?"active":"")},"全部"),React.createElement("label",{style:(0,p.convertLineStyleData)("background:"+(1==a?n.theme:n.theme+"33")),onClick:this.clickCommentLabel,"data-type":"1",className:"comPage-comment-label "+(1==a?"active":"")},"好评 (",React.createElement("label",{className:"comPage-positive-comment"},o[1]),")"),React.createElement("label",{style:(0,p.convertLineStyleData)("background:"+(2==a?n.theme:n.theme+"33")),onClick:this.clickCommentLabel,"data-type":"2",className:"comPage-comment-label "+(2==a?"active":"")},"中评 (",React.createElement("label",{className:"comPage-neutral-comment"},o[2]),")"),React.createElement("label",{style:(0,p.convertLineStyleData)("background:"+(3==a?n.theme:n.theme+"33")),onClick:this.clickCommentLabel,"data-type":"3",className:"comPage-comment-label "+(3==a?"active":"")},"差评 (",React.createElement("label",{className:"comPage-negative-comment"},o[3]),")"),React.createElement("label",{style:(0,p.convertLineStyleData)("background:"+(4==a?n.theme:n.theme+"33")),onClick:this.clickCommentLabel,"data-type":"4",className:"comPage-comment-label "+(4==a?"active":"")},"有图 (",React.createElement("label",{className:"comPage-pic-comment"},o[4]),")"))),React.createElement("div",{className:"comPage-bottom-section"},React.createElement("div",{className:"comPage-comment-list"},i.map(function(t,a){return React.createElement("div",{className:"comPage-comment-item",key:t.id},React.createElement("div",null,React.createElement("img",{className:"comPage-comment-photo",src:t.buyer_headimgurl}),React.createElement("span",{className:"comPage-comment-name"},t.buyer_nickname)),React.createElement("span",{className:"comPage-comment-date"},t.add_time),React.createElement("div",{className:"comPage-comment-content"},t.assess_info.content),!!+t.assess_info.has_img&&React.createElement("div",{className:"comPage-comment-pics"},t.assess_info.img_arr.map(function(a,n){return React.createElement("img",{key:n,src:a,"data-src":a,"data-srcarr":t.assess_info.img_arr,onClick:e.clickPlusImages})})))})))))}}]),t}(g.default);t.default=h},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(9),i=n(o),s=a(0),r=n(s),c=a(3),l=n(c),d=a(1),u=n(d),m=a(2),p=n(m),f=a(5),g=a(6),h=a(7),v=n(h);a(384);var _=function(e){function t(e){(0,r.default)(this,t);var a=(0,u.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={goods_info:[],additional_info_obj:{},from:""},a.delivery_id_arr=[],a.goods_id_arr=[],a.dataInitial=function(){a.getAppECStoreConfig();var e=f.appMethod.getPreviewGoodsInfo(),t=f.appMethod.getGoodsAdditionalInfo(),n=!1;a.setData({goods_info:e,additional_info_obj:t});for(var o in t)if(void 0!==o){n=!0;break}if(!n){for(var i=0;i<=e.length-1;i++){var s=e[i].id||e[i].goods_id;-1==a.goods_id_arr.indexOf(s)&&(a.goods_id_arr.push(s),a.delivery_id_arr.push(e[i].delivery_id))}a.delivery_id_arr.length&&a.getDeliveryInfo()}},a.getDeliveryInfo=function(){var e=a;f.appMethod.sendRequest({hideLoading:!0,url:"/index.php?r=pc/AppShop/GetDelivery",method:"post",data:{delivery_ids:a.delivery_id_arr},success:function(t){for(var a=e.data.goods_info,n=t.data,o={},i=0;i<=n.length-1;i++){var s=a[i].id||a[i].goods_id,r=n[i].delivery_info;o[s]=[];for(var c=0;c<=r.length-1;c++)1==r[c].is_hidden&&o[s].push({title:r[c].name,type:r[c].type,is_required:r[c].is_required,value:""})}e.setData({additional_info_obj:o})}})},a.inputFormControl=function(e){var t=e.currentTarget.dataset.goodsId,n=e.currentTarget.dataset.additionalIndex,o=e.target.value,i={};i["additional_info_obj."+t+"["+n+"].value"]=o,a.setData(i)},a.uploadImg=function(e){var t=a,n=e.currentTarget.dataset.goodsId,o=e.currentTarget.dataset.additionalIndex,i=a.data.additional_info_obj[n][o].value||[];f.appMethod.chooseImage(function(e){var a={};a["additional_info_obj."+n+"["+o+"].value"]=i.concat(e),t.setData(a)},9-i.length)},a.deleteImage=function(e){var t=e.currentTarget.dataset,n=t.goodsId,o=t.additionalIndex,i=t.imageIndex,s=a.data.additional_info_obj[n][o].value,r={};s.splice(i,1),r["additional_info_obj."+n+"["+o+"].value"]=s,a.setData(r)},a.submitAdditionalInfo=function(){var e=a.data.additional_info_obj,t=!0;for(var n in e){if(!t)break;if(e[n])for(var o=e[n],s=0;s<=o.length-1;s++)if(0==o[s].is_required&&(!o[s].value||0==o[s].value.length)){f.appMethod.showModal({content:o[s].title+"不能为空"}),t=!1;break}}if(t){var r=f.appMethod.getCurrentPages(),c=r[r.length-2];if(a.selectedAppId){var l;c.setData((l={},(0,i.default)(l,"mulShopsInfo."+a.selectedAppId+".additional_info",a.data.additional_info_obj),(0,i.default)(l,"mulShopsInfo."+a.selectedAppId+".deliverydWrite",!0),l))}else c.setData({additional_info:a.data.additional_info_obj,deliverydWrite:!0});c.additional_info=a.data.additional_info_obj,c.hasRequiredSuppInfo=!1,f.appMethod.turnBack()}},a.previewImage=function(e){var t=e.currentTarget.dataset,n=t.goodsId,o=t.additionalIndex,i=t.imageIndex,s=a.data.additional_info_obj[n][o].value;f.appMethod.previewImage({current:s[i],urls:s})},a.getAppECStoreConfig=function(){f.appMethod.getAppECStoreConfig(function(e){a.setData({storeStyle:e.color_config})})},document.title="补充信息",a}return(0,p.default)(t,e),(0,l.default)(t,[{key:"componentWillMount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,g.getCurrentPageQueryParams)();e.hiddenSub&&this.setData({hiddenSub:e.hiddenSub}),e.from&&this.setData({from:e.from}),e.appId&&(this.selectedAppId=e.appId),this.dataInitial()}},{key:"render",value:function(){var e=this,t=this.state,a=(t.showGetUserInfo,t.additional_info_obj),n=t.storeStyle,o=t.hiddenSub,i=t.from,s=t.goods_info;return React.createElement("div",{className:"official-page goods-additional-info"},!i&&React.createElement("div",{className:"editor-additional"},s.map(function(t,n){return React.createElement("div",{key:t.id},React.createElement("div",{className:"additional-box"},React.createElement("div",{className:"goods-detail"},React.createElement("img",{className:"goods-cover",src:t.cover}),React.createElement("div",{className:"goods-info"},React.createElement("div",{className:"goods-title"},t.title||t.goods_name),t.model_value_str&&React.createElement("div",{className:"goods-model"},t.model_value_str))),a[t.id||t.goods_id]&&a[t.id||t.goods_id].map(function(a,n){return React.createElement("div",{className:"additional-list",key:n},"text"==a.type&&React.createElement("div",{className:"additional-text"},React.createElement("span",{className:"additional-name "+(0==a.is_required?"is-required":"")},a.title),React.createElement("div",{className:"additional-info"},React.createElement("input",{type:"text",onChange:e.inputFormControl,"data-goods-id":t.id||t.goods_id,"data-additional-index":n,value:a.value}))),"mul-text"==a.type&&React.createElement("div",{className:"additional-textarea"},React.createElement("span",{className:"additional-name "+(0==a.is_required?"is-required":"")},a.title),React.createElement("div",{className:"additional-info"},React.createElement("textarea",{maxLength:"-1",onInput:e.inputFormControl,"data-goods-id":t.id||t.goods_id,"data-additional-index":n,value:a.value}))),"picture"==a.type&&React.createElement("div",{className:"additional-picture"},React.createElement("span",{className:"additional-name "+(0==a.is_required?"is-required":"")},a.title),React.createElement("div",{className:"additional-info"},a.value&&a.value.map(function(a,o){return React.createElement("div",{className:"image-list",key:o},React.createElement("img",{src:a}),React.createElement("label",{className:"delete-image ico-moon icon-closes",onClick:e.deleteImage,"data-goods-id":t.id||t.goods_id,"data-additional-index":n,"data-image-index":o},"-"))}),a.value.length<9&&React.createElement("div",{className:"add-images",onClick:e.uploadImg,"data-goods-id":t.id||t.goods_id,"data-additional-index":n},React.createElement("span",{className:"ico-moon icon-goods-add-image"}),React.createElement("div",null,"添加图片")))))})))}),React.createElement("div",{className:"additional-sure",style:(0,g.convertLineStyleData)("background:"+n.theme),onClick:this.submitAdditionalInfo,hidden:o},"提交")),("goodsOrderDetail"==i||"diningOrderDetail"==i)&&React.createElement("div",{className:"show-additional"},s.map(function(t,n){return React.createElement("div",{key:t.id},React.createElement("div",{className:"additional-box"},React.createElement("div",{className:"goods-detail"},React.createElement("img",{className:"goods-cover",mode:"scaleToFill",src:t.cover}),React.createElement("div",{className:"goods-info"},React.createElement("div",{className:"goods-title"},t.title||t.goods_name),t.model_value_str&&React.createElement("div",{className:"goods-model"},t.model_value_str))),a[t.id||t.goods_id]&&a[t.id||t.goods_id].map(function(a,n){return React.createElement("div",{className:"additional-list",key:n},"text"==a.type&&React.createElement("div",{className:"additionals-text"},React.createElement("span",{className:"additional-name "+(0==a.is_required?"is-required":"")},a.title),React.createElement("div",{className:"additional-info"},a.value)),"mul-text"==a.type&&React.createElement("div",{className:"additional-textarea"},React.createElement("span",{className:"additional-name "+(0==a.is_required?"is-required":"")},a.title),React.createElement("div",{className:"additional-info"},a.value)),"picture"==a.type&&React.createElement("div",{className:"additional-picture"},React.createElement("span",{className:"additional-name "+(0==a.is_required?"is-required":"")},a.title),React.createElement("div",{className:"additional-info"},a.value.map(function(a,o){return React.createElement("div",{className:"image-list",key:o},React.createElement("img",{src:a,onClick:e.previewImage,"data-image-index":o,"data-additional-index":n,"data-goods-id":t.id||t.goods_id}))}))))})))})))}}]),t}(v.default);t.default=_},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(17),i=n(o),s=a(39),r=n(s),c=a(0),l=n(c),d=a(3),u=n(d),m=a(1),p=n(m),f=a(2),g=n(f);a(16),a(35);var h=a(4),v=n(h),_=a(5),y=a(6),E=a(73),b=a(7),N=n(b);a(386);var R=function(e){function t(e){(0,l.default)(this,t);var a=(0,p.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={topNavBarData:{title:"收藏夹",isDefault:0},favoritesStatus:[{label:"全部",value:0},{label:"失效",value:2},{label:"降价中",value:3},{label:"低库存",value:4}],selectAll:!1,showCheckedBox:!1,favoritesList:[],selectStatus:[0],unSaleGoodsCount:0,reducePriceGoodsNum:0,hideTips:!1,showReducePrice:!0,search:"",storeStyle:{}},a.page=1,a.isMore=1,a.goodsShoppingCartRef=v.default.createRef(),a.dataInitial=function(){a.getFavoriteGoodsList(),a.getAppECStoreConfig()},a.getFavoriteGoodsList=function(){var e=a;_.appMethod.sendRequest({url:"/index.php?r=AppShop/favoriteGoodsList",data:{page:e.page,page_size:10,status:e.data.selectStatus[0],search:e.data.search,parent_app_id:_.appMethod.getShopTypeData()&&1==_.appMethod.getShopTypeData().is_parent_shop?_.appMethod.getAppId():""},success:function(t){e.setData({favoritesList:e.data.favoritesList.concat(t.data),unSaleGoodsCount:t.un_sale_goods_count||0,reducePriceGoodsNum:t.reduce_price_goods_num||0}),e.isMore=t.is_more}})},a.addShoppingCart=function(e){e.stopPropagation(),a.goodsShoppingCartRef.current.showDialog({goodsId:e.currentTarget.dataset.id})},a.selectGoods=function(e){var t=e.currentTarget.dataset.index,n=a.data.favoritesList,o=!0;n[t].selected=!n[t].selected,n.map(function(e){e.selected||(o=!1)}),a.setData({favoritesList:n,selectAll:o})},a.clickSelectAll=function(){var e=a.data.selectAll,t=a.data.favoritesList;t.map(function(t){t.selected=!e}),a.setData({favoritesList:t,selectAll:!e})},a.onReachBottom=function(){a.isMore&&(a.page++,a.getFavoriteGoodsList())},a.selectFavoritesStatus=function(e){a.setData({favoritesList:[],selectStatus:e}),a.page=1,a.getFavoriteGoodsList()},a.searchFavoritesGoods=function(e){13===e.keyCode&&(a.page=1,a.setData({search:e.target.value,favoritesList:[]}),a.getFavoriteGoodsList())},a.deleteGoods=function(){for(var e=a,t=[],n=a.data.favoritesList,o=0;o<n.length;o++)n[o].selected&&(t.push(n[o].id),n.splice(o,1),o--);if(t.length<=0)return void _.appMethod.showToast({title:"未选择商品",icon:"none"});_.appMethod.sendRequest({url:"/index.php?r=AppShop/deleteFavoriteGoods",method:"post",data:{goods_id_arr:t},success:function(t){e.setData({favoritesList:n,showCheckedBox:!1})}})},a.favoritesOperat=function(){a.setData({showCheckedBox:!0})},a.favoritesComplete=function(){a.setData({showCheckedBox:!1})},a.cleanUpGoods=function(){a.setData({selectStatus:1,favoritesList:[]}),a.page=1,a.getFavoriteGoodsList()},a.hideTips=function(){a.setData({hideTips:!0})},a.goHomePage=function(){var e=_.appMethod.getHomepageRouter();_.appMethod.reLaunch({url:"/pages/"+e+"/"+e})},a.getAppECStoreConfig=function(){_.appMethod.getAppECStoreConfig(function(e){a.setData({storeStyle:e.color_config})})},a.checkReducePrice=function(){a.setData({selectStatus:2,showReducePrice:!1,favoritesList:[]}),a.page=1,a.getFavoriteGoodsList()},a.hideReducePrice=function(){a.setData({showReducePrice:!1})},a.goGoodsDetail=function(e){_.appMethod.turnToPage("/pages/goodsDetail/goodsDetail?detail="+e.currentTarget.dataset.id)},document.title="收藏夹",a}return(0,g.default)(t,e),(0,u.default)(t,[{key:"componentWillMount",value:function(){arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,y.getCurrentPageQueryParams)();this.dataInitial()}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.state,a=(t.showGetUserInfo,t.topNavBarData,t.storeStyle),n=t.favoritesList,o=t.selectStatus,s=t.search,c=t.hideTips,l=t.unSaleGoodsCount,d=t.favoritesStatus,u=t.showCheckedBox,m=t.selectAll,p=t.showReducePrice,f=t.reducePriceGoodsNum;return v.default.createElement("div",{className:"official-page goods-favorites"},n.length||0!=o||s?v.default.createElement(v.default.Fragment,null,v.default.createElement("div",{className:"invalid-tips",hidden:c||!l},v.default.createElement("span",{className:"ico-moon icon-closes",onClick:this.hideTips}),v.default.createElement("span",null,"失效宝贝（"+l+"个）"),v.default.createElement("span",{className:"pull-right go-invalid-goods",onClick:this.cleanUpGoods},"前往清理")),v.default.createElement("div",null,v.default.createElement("div",{className:"favorites-header"},v.default.createElement("div",{className:"favorites-status-select"},v.default.createElement(i.default,{cols:1,data:d,onChange:this.selectFavoritesStatus,value:o},v.default.createElement(r.default.Item,null)),v.default.createElement("span",{className:"ico-moon icon-downarrow"})),v.default.createElement("div",{className:"favorites-search"},v.default.createElement("span",{className:"ico-moon icon-search"}),v.default.createElement("input",{type:"text",onKeyDown:this.searchFavoritesGoods,placeholder:"请输入搜索内容"})),u?v.default.createElement("span",{className:"favorites-operat",onClick:this.favoritesComplete},"完成"):v.default.createElement("span",{className:"favorites-operat",onClick:this.favoritesOperat},"管理")),v.default.createElement("div",{className:"favorites-content"},n.map(function(t,n){return v.default.createElement("div",{className:"goods-list",key:t.id,onClick:1==t.status||u?null:e.goGoodsDetail,"data-id":t.id},u&&v.default.createElement("label",{className:"favorites-check-box "+(t.selected?"checked ico-moon icon-success-tip":""),style:(0,y.convertLineStyleData)("color:"+a.theme),onClick:e.selectGoods,"data-index":n}),v.default.createElement("img",{src:t.cover}),v.default.createElement("div",{className:"goods-detail-box"},v.default.createElement("div",{className:"goods-title"},t.title),v.default.createElement("div",{className:"collect-number"},t.favorite_people_num+"人收藏"),(t.reduce_price>0||t.stock<=20)&&v.default.createElement("div",null,t.reduce_price>0&&v.default.createElement("span",{className:"goods-reduce-price",style:(0,y.convertLineStyleData)("color:"+a.theme+";background:"+a.theme+"19")},"比收藏时降价"+t.reduce_price+"元"),t.stock<=20&&v.default.createElement("span",{className:"almost-stock"},"库存紧张")),1==t.status?v.default.createElement("div",{className:"goods-price-box"},v.default.createElement("span",{className:"goods-invalid"},"失效")):v.default.createElement("div",{className:"goods-price-box"},v.default.createElement("span",{className:"goods-price",style:(0,y.convertLineStyleData)("color:"+a.theme)},"¥"+t.price),v.default.createElement("span",{className:"pull-right ico-moon icon-addshoppingcart3",style:(0,y.convertLineStyleData)("color:"+a.theme),"data-id":t.id,onClick:u?null:e.addShoppingCart}))))}))),u&&v.default.createElement("div",{className:"favorites-bottom"},v.default.createElement("div",{className:"select-all"},v.default.createElement("label",{className:"favorites-check-box "+(m?"checked ico-moon icon-success-tip":""),style:(0,y.convertLineStyleData)("color:"+a.theme),onClick:this.clickSelectAll}),v.default.createElement("span",null,"全选")),v.default.createElement("div",{className:"pull-right delete-goods",style:(0,y.convertLineStyleData)("background:"+a.theme),onClick:this.deleteGoods},"一键删除"))):v.default.createElement(v.default.Fragment,null,v.default.createElement("div",{className:"no-favorites-goods"},v.default.createElement("span",{className:"ico-moon icon-favorites"}),v.default.createElement("div",{className:"no-favorites-title"},"您暂时还未收藏商品"),v.default.createElement("div",{className:"no-favorites-btn",style:(0,y.convertLineStyleData)("background:"+a.theme),onClick:this.goHomePage},"去逛逛"))),p&&f>0&&v.default.createElement("div",{className:"reduce-price-mask"},v.default.createElement("div",{className:"reduce-price-contain"},v.default.createElement("div",{className:"reduce-title"},"商品降价啦"),v.default.createElement("div",{className:"reduce-content"},"您收藏的商品降价啦"),v.default.createElement("div",{className:"reduce-content"},"快去瞧瞧吧"),v.default.createElement("div",{className:"check-reduce-price",onClick:this.checkReducePrice},"立即查看"),v.default.createElement("div",{className:"wait-reduce-price",onClick:this.hideReducePrice},"稍后查看"))),v.default.createElement(E.GoodsShoppingCart,{ref:this.goodsShoppingCartRef}))}}]),t}(N.default);t.default=R},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(0),i=n(o),s=a(3),r=n(s),c=a(1),l=n(c),d=a(2),u=n(d),m=a(4),p=n(m),f=a(5),g=a(6),h=a(73),v=a(7),_=n(v);a(388);var y=function(e){function t(e){(0,i.default)(this,t);var a=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={goodslist:[],search:"",selectAll:!1,storeStyle:{}},a.page=1,a.isMore=1,a.goodsShoppingCartRef=p.default.createRef(),a.dataInitial=function(){a.getGoodsViewRecordList(),a.getAppECStoreConfig()},a.getGoodsViewRecordList=function(){var e=a;f.appMethod.sendRequest({url:"/index.php?r=AppShop/goodsViewRecordList",data:{page:e.page,page_size:10,search:e.data.search},success:function(t){e.setData({goodslist:e.data.goodslist.concat(t.data)}),e.isMore=t.is_more}})},a.footPrintOperat=function(){},a.footPrintOperat=function(){a.setData({showCheckedBox:!0})},a.footPrintComplete=function(){a.setData({showCheckedBox:!1})},a.addShoppingCart=function(e){e.stopPropagation(),a.goodsShoppingCartRef.current.showDialog({goodsId:e.currentTarget.dataset.id})},a.goGoodsDetail=function(e){f.appMethod.turnToPage("/pages/goodsDetail/goodsDetail?detail="+e.currentTarget.dataset.id)},a.selectGoods=function(e){var t=e.currentTarget.dataset.index,n=a.data.goodslist,o=!0;n[t].selected=!n[t].selected,n.map(function(e){e.selected||(o=!1)}),a.setData({goodslist:n,selectAll:o})},a.clickSelectAll=function(){var e=a.data.selectAll,t=a.data.goodslist;t.map(function(t){t.selected=!e}),a.setData({goodslist:t,selectAll:!e})},a.onReachBottom=function(){a.isMore&&(a.page++,a.getGoodsViewRecordList())},a.deleteGoods=function(){for(var e=a,t=[],n=a.data.goodslist,o=0;o<n.length;o++)n[o].selected&&(t.push(n[o].id),n.splice(o,1),o--);if(t.length<=0)return void f.appMethod.showToast({title:"未选择商品",icon:"none"});f.appMethod.sendRequest({url:"/index.php?r=AppShop/deleteGoodsViewRecord",method:"post",data:{goods_id_arr:t},success:function(t){e.setData({goodslist:n,showCheckedBox:!1})}})},a.searchGoods=function(e){13===e.keyCode&&(a.page=1,a.setData({search:e.target.value,goodslist:[]}),a.getGoodsViewRecordList())},a.getAppECStoreConfig=function(){f.appMethod.getAppECStoreConfig(function(e){a.setData({storeStyle:e.color_config})})},document.title="足迹",a}return(0,u.default)(t,e),(0,r.default)(t,[{key:"componentWillMount",value:function(){this.dataInitial()}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.state,a=(t.showGetUserInfo,t.showCheckedBox),n=t.goodslist,o=t.storeStyle,i=t.selectAll,s=t.search;return p.default.createElement(p.default.Fragment,null,p.default.createElement("div",{className:"official-page goods-foot-print"},n.length||s?p.default.createElement(p.default.Fragment,null,p.default.createElement("div",{className:a?"foot-print-container":""},p.default.createElement("div",{className:"foot-print-header"},p.default.createElement("div",{className:"foot-print-search"},p.default.createElement("span",{className:"ico-moon icon-search"}),p.default.createElement("input",{type:"text",onKeyDown:this.searchGoods,placeholder:"请输入搜索内容"})),a?p.default.createElement("span",{className:"foot-print-operat",onClick:this.footPrintComplete},"完成"):p.default.createElement("span",{className:"foot-print-operat",onClick:this.footPrintOperat},"管理")),p.default.createElement("div",{className:"foot-print-content"},p.default.createElement("div",{className:"goods-content"},n.map(function(t,n){return p.default.createElement("div",{key:t.id,onClick:1==t.status||a?null:e.goGoodsDetail,"data-id":t.id},p.default.createElement("img",{className:"goods-cover",src:t.cover}),p.default.createElement("div",{className:"goods-detail"},p.default.createElement("div",{className:"goods-title"},t.title),p.default.createElement("div",{className:"goods-price",style:(0,g.convertLineStyleData)("color:"+o.theme)},"¥"+t.price),p.default.createElement("div",{className:"goods-bottom"},t.sales+"人付款",1==t.status?p.default.createElement("span",{className:"foot-invalid"},"失效"):p.default.createElement("span",{onClick:a?null:e.addShoppingCart,"data-id":t.id,className:"ico-moon icon-addshoppingcart3 add-shopping-cart",style:(0,g.convertLineStyleData)("color:"+o.theme)}))),a&&p.default.createElement("label",{"data-index":n,className:"foot-check-box "+(t.selected?"checked ico-moon icon-success-tip":""),style:(0,g.convertLineStyleData)("color:"+o.theme),onClick:e.selectGoods}))})))),a&&p.default.createElement("div",{className:"foot-bottom"},p.default.createElement("div",{className:"select-all"},p.default.createElement("label",{className:"foot-check-box "+(i?"checked ico-moon icon-success-tip":""),style:(0,g.convertLineStyleData)("color:"+o.theme),onClick:this.clickSelectAll}),p.default.createElement("span",null,"全选")),p.default.createElement("div",{className:"pull-right delete-goods",style:(0,g.convertLineStyleData)("background:"+o.theme),onClick:this.deleteGoods},"一键删除"))):p.default.createElement(p.default.Fragment,null,p.default.createElement("div",{className:"foot-null-box"},p.default.createElement("img",{src:"http://cdn.jisuapp.cn/zhichi_frontend/static/webapp/images/xcx-goods/foot-print-null.png"}),p.default.createElement("div",null,"暂时没有浏览记录")))),p.default.createElement(h.GoodsShoppingCart,{ref:this.goodsShoppingCartRef}))}}]),t}(_.default);t.default=y},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(0),i=n(o),s=a(3),r=n(s),c=a(1),l=n(c),d=a(2),u=n(d),m=a(5),p=a(7),f=n(p);a(390);var g=function(e){function t(e){(0,i.default)(this,t);var a=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={orderStatus:["待审核","退款失败","退款失败","退货中","待商家确认收货","退款失败","退款成功","退款失败"],orderReason:["待审核","商家拒绝退款","买家撤销退款","待买家退货","待商家确认收货","商家超时未退货","已退款","商家超时未处理退款"],refundType:["全额退款","部分退款","退货退款"],orderInfo:[]},a.page=1,a.isMore=0,a.dataInitial=function(){a.setData({orderInfo:[]}),a.page=1,a.getAfterSaleOrderList()},a.onReachBottom=function(){a.isMore&&(a.page++,a.getAfterSaleOrderList())},a.getAfterSaleOrderList=function(){var e=a;m.appMethod.sendRequest({url:"/index.php?r=AppShop/getAfterSaleOrderList",method:"post",data:{page:e.page,page_size:10},success:function(t){e.isMore=t.is_more;var a=e.data.orderInfo.concat(t.data);e.setData({orderInfo:a})}})},a.toGoodsOrderDetail=function(e){var t=e.currentTarget.dataset.orderId,a=e.currentTarget.dataset.franchiseeId,n=e.currentTarget.dataset.applyId;a=a!=m.appMethod.getAppId()?a:"";var o="/eCommerce/pages/goodsAfterSaleDetail/goodsAfterSaleDetail?applyId="+n+"&detail="+t+(a?"&franchisee="+a:"");m.appMethod.turnToPage(o)},a.deleteAfterSale=function(e){var t=e.currentTarget.dataset.orderId,n=e.currentTarget.dataset.applyId,o=e.currentTarget.dataset.index,i=a;m.appMethod.showModal({content:"确认删除记录？",confirm:function(){m.appMethod.sendRequest({url:"/index.php?r=AppShop/deleteAfterSaleOrderLog",method:"post",data:{order_id:t,apply_id:n},success:function(e){var t=i.data.orderInfo;t.splice(o,1),i.setData({orderInfo:t})}})}})},a.cancelRefund=function(e){var t=a,n=e.currentTarget.dataset.parentId,o=e.currentTarget.dataset.orderId,i=n?m.appMethod.getAppId():"";m.appMethod.showModal({content:"确认撤销申请？",confirm:function(){m.appMethod.sendRequest({url:"/index.php?r=appShop/cancelRefund",data:{order_id:o,sub_shop_app_id:i},success:function(){t.dataInitial()}})}})},a.refuseReason=function(e){var t=e.currentTarget.dataset.reason;m.appMethod.showModal({content:t})},document.title="售后订单",a}return(0,u.default)(t,e),(0,r.default)(t,[{key:"componentWillMount",value:function(){}},{key:"componentDidMount",value:function(){this.dataInitial()}},{key:"render",value:function(){var e=this,t=this.state,a=t.orderInfo,n=t.orderStatus,o=t.refundType,i=t.orderReason;return React.createElement("div",{className:"official-page goods-customer-service"},a.map(function(t,a){return React.createElement("div",{className:"goods-customer-contain",key:t.id},React.createElement("div",{className:"goods-customer-header"},React.createElement("div",null,React.createElement("span",{className:"customer-add-time"},t.add_time),React.createElement("span",{className:"pull-right "+(0==t.status||4==t.status?"waiting-color":"")},n[t.status]))),t.refund_goods_info.map(function(a,n){return React.createElement("div",{onClick:e.toGoodsOrderDetail,"data-apply-id":t.id,"data-order-id":t.order_id,"data-franchisee-id":t.app_id,className:"goods-customer-content",key:a.goods_id},React.createElement("img",{src:a.cover}),React.createElement("div",{className:"goods-detail-box"},React.createElement("div",{className:"goods-title"},a.title),a.model_name&&React.createElement("div",{className:"goods-model"},a.model_name),React.createElement("div",{className:"goods-price-box"},React.createElement("span",null,"¥"+a.price),React.createElement("span",{className:"pull-right goods-num"},"x"+a.num))))}),React.createElement("div",{className:"goods-customer-bottom"},React.createElement("div",{className:"order-refund-box"},React.createElement("div",{className:"order-status-explain"},React.createElement("span",{className:"ico-moon icon-goods-after-sale"}),React.createElement("span",null,o[t.refund_type])),(1==t.status||2==t.status||5==t.status||7==t.status)&&React.createElement("span",{className:"pull-right order-refund-price"},i[t.status]),3==t.status&&React.createElement("span",{className:"pull-right order-refund-price"},"等待商家发货，还剩"+t.expire),6==t.status&&React.createElement("span",{className:"pull-right order-refund-price"},"退款金额 ¥"+t.refund_price)),React.createElement("div",{className:"customer-btn-box"},0==t.status&&React.createElement("span",{className:"customer-btn",onClick:e.cancelRefund,"data-order-id":t.order_id,"data-apply-id":t.id,"data-franchisee-id":t.app_id},"撤销申请"),(1==t.status||2==t.status||5==t.status||6==t.status)&&React.createElement("span",{className:"customer-btn",onClick:e.deleteAfterSale,"data-order-id":t.order_id,"data-apply-id":t.id,"data-index":a},"删除记录"),1==t.status&&React.createElement("span",{className:"customer-btn",onClick:e.refuseReason,"data-reason":t.refuse_msg},"拒绝原因"),React.createElement("span",{className:"customer-btn",onClick:e.toGoodsOrderDetail,"data-apply-id":t.id,"data-order-id":t.order_id,"data-franchisee-id":t.app_id},"查看订单"))))}))}}]),t}(f.default);t.default=g},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(0),i=n(o),s=a(3),r=n(s),c=a(1),l=n(c),d=a(2),u=n(d),m=a(5),p=a(6),f=a(7),g=n(f);a(392);var h=function(e){function t(e){(0,i.default)(this,t);var a=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={orderReason:["商家待审核","商家拒绝退款","买家撤销退款","待买家退货","待商家确认收货","卖家超时未退货","已退款","商家超时未处理退款"],refundReason:["多拍/拍错/不想要","快递延期","未按约定时间发货","快递记录出错","内容与描述不符","其它"],refundJourneyReason:["未保持餐品完整","骑手服务态度恶劣","骑手额外索取费用","骑手诱导退单","骑手提前点击送达","骑手虚假标记异常","少餐错餐"],orderIcon:["goods-undone-payment","goods-refund-doing","goods-refund-doing","goods-refund","goods-undone-receipt","goods-refund-doing","goods-already-refund","goods-refund-doing"],orderId:"",showEventDialog:!1,eventType:"",storeStyle:{}},a.isFromBack=!1,a.applyId="",a.dataInitial=function(){a.getAfterSaleOrder(),a.getAppECStoreConfig()},a.getAfterSaleOrder=function(){var e=a;m.appMethod.sendRequest({url:"/index.php?r=appShop/getAfterSaleOrder",data:{apply_id:e.applyId,sub_shop_app_id:e.franchiseeId},success:function(t){e.setData({afterSaleData:t.data}),e.getRefundConfigByPickUpType(),2==t.data.pick_up_type&&e.getBuyerCancelReason()}})},a.orderDelete=function(e){var t=a.data.orderId,n=a;m.appMethod.sendRequest({url:"/index.php?r=AppShop/deleteAfterSaleOrderLog",method:"post",data:{order_id:t,apply_id:n.applyId},success:function(e){m.appMethod.turnBack()},complete:function(){n.setData({showEventDialog:!1})}})},a.editorRefund=function(){var e=a.data.orderId,t=a.franchiseeId,n="/eCommerce/pages/goodsRefundPage/goodsRefundPage?type=editor&orderId="+e+(t?"&franchisee="+t:"");m.appMethod.turnToPage(n)},a.checkLogistics=function(){var e=a.applyId,t=a.franchiseeId;m.appMethod.turnToPage("/eCommerce/pages/logisticsPage/logisticsPage?applyId="+e+"&form=afterSale"+(t?"&franchiseeId="+t:""))},a.copyOrderId=function(){var e=a;m.appMethod.setClipboardData({data:e.data.orderId,success:function(e){m.appMethod.showToast({title:"复制成功",icon:"success"})}})},a.hideEventDialog=function(){a.setData({showEventDialog:!1})},a.showEventDialog=function(e){a.setData({eventType:e.currentTarget.dataset.type,showEventDialog:!0})},a.goOrderProgress=function(){var e=a.data.orderId,t=a.franchiseeId,n="/eCommerce/pages/goodsOrderProgress/goodsOrderProgress?orderId="+e+(t?"&franchisee="+t:"");m.appMethod.turnToPage(n)},a.returnInfor=function(){var e=a.data.orderId,t=a.franchiseeId,n="/eCommerce/pages/goodsReturnInfor/goodsReturnInfor?orderId="+e+(t?"&franchisee="+t:"");m.appMethod.turnToPage(n)},a.getAppECStoreConfig=function(){m.appMethod.getAppECStoreConfig(function(e){a.setData({storeStyle:e.color_config})},a.franchiseeId)},a.cancelRefund=function(){var e=a,t=a.data.orderId,n=a.franchiseeId;m.appMethod.sendRequest({url:"/index.php?r=appShop/cancelRefund",data:{order_id:t,sub_shop_app_id:n},success:function(){e.getAfterSaleOrder()},complete:function(){e.setData({showEventDialog:!1})}})},a.getRefundConfigByPickUpType=function(){var e=a,t=a.data.afterSaleData.pick_up_type;m.appMethod.sendRequest({url:"/index.php?r=AppEcommerce/getRefundConfigByPickUpType",data:{pick_up_type:t,sub_shop_app_id:e.franchiseeId},success:function(t){var a=t.data.config_data;e.setData({refundAdress:a.address||""})}})},a.getBuyerCancelReason=function(){var e=a.data.afterSaleData.deliver_type||0,t=a;m.appMethod.sendRequest({url:"/index.php?r=AppTransport/getBuyerCancelReason",data:{deliver_type:e},success:function(e){var a=e.data,n=[];for(var o in a)n.push(a[o]);t.setData({refundJourneyReason:n})}})},document.title="售后详情",a}return(0,u.default)(t,e),(0,r.default)(t,[{key:"componentWillMount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,p.getCurrentPageQueryParams)();this.applyId=e.applyId,this.franchiseeId=e.franchisee||"",this.setData({orderId:e.detail}),this.dataInitial()}},{key:"componentDidMount",value:function(){this.isFromBack?this.getAfterSaleOrder():this.isFromBack=!0}},{key:"render",value:function(){var e=this.state,t=(e.showGetUserInfo,e.rewardPointObj,e.shareGiftsObj,e.collectGiftsObj,e.collectGetObj,e.storeStyle),a=e.orderIcon,n=e.afterSaleData,o=e.orderReason,i=e.refundAdress,s=e.refundJourneyReason,r=e.refundReason,c=e.eventType,l=e.showEventDialog;return n=n||{},React.createElement("div",{className:"official-page goods-after-sale-detail"},React.createElement("div",{className:"order-contain"},React.createElement("div",{className:"seller-shipped",style:(0,p.convertLineStyleData)("background:"+t.theme)},React.createElement("span",{className:"order-icon ico-moon icon-"+a[n.status]}),React.createElement("span",null,o[n.status]),React.createElement("img",{src:"http://cdn.jisuapp.cn/zhichi_frontend/static/webapp/images/xcx-goods/goods-order-bg.png"})),0==n.status&&React.createElement("div",{className:"order-prompt"},"你已成功发起退款申请，请耐心等待商家处理，还剩",React.createElement("span",{style:(0,p.convertLineStyleData)("color:"+t.theme)},n.expire),"（超时按",React.createElement("span",{style:(0,p.convertLineStyleData)("color:"+t.theme)},"拒绝退款"),"处理）"),3==n.status&&React.createElement("div",{className:"order-prompt"},"商家已同意你的退货申请，请及时填写退货信息，还剩",React.createElement("span",{style:(0,p.convertLineStyleData)("color:"+t.theme)},n.expire),"（超时按",React.createElement("span",{style:(0,p.convertLineStyleData)("color:"+t.theme)},"退款失败"),"处理）"),3==n.status&&React.createElement(React.Fragment,null,React.createElement("div",{className:"refund-address-box"},React.createElement("div",{className:"refund-address-title"},React.createElement("span",null,"退货地址"),React.createElement("span",{className:"pull-right"},i&&i.brand_name+" "+i.phone)),React.createElement("div",{className:"pull-right refund-address"},i&&i.region_info[2].name+i.region_info[1].name+i.region_info[0].name+i.detail_address))),n.refuse_msg&&React.createElement("div",{className:"refuse-message"},"商家拒绝退款原因："+n.refuse_msg),React.createElement("div",{className:"app-box"},React.createElement("div",null,React.createElement("span",{className:"app-name"},"退货信息"))),n.refund_goods&&n.refund_goods.map(function(e,a){return React.createElement("div",{className:"goods-detail-box",key:e.goods_id},React.createElement("img",{src:e.cover}),React.createElement("div",null,React.createElement("div",{className:"goods-name"},1==n.is_group_buy_order&&React.createElement("span",{className:"is-seckill"},"拼团"),1==n.is_seckill&&React.createElement("span",{className:"is-seckill"},"秒杀"),e.title),e.model_name&&React.createElement("div",{className:"goods-rules"},e.model_name),React.createElement("div",{className:"goods-price"},React.createElement("span",{className:"colorff7",style:(0,p.convertLineStyleData)("color:"+t.theme)},"¥"+e.price),React.createElement("span",{className:"pull-right"},"x "+e.num))))}),React.createElement("div",{className:"goods-amount",hidden:1==n.is_pay_on_delivery},React.createElement("span",null,"退货原因"),React.createElement("span",{className:"pull-right color999"},2==n.pick_up_type?s[n.refund_reason]:r[n.refund_reason])),React.createElement("div",{className:"goods-amount"},React.createElement("span",null,"退款金额"),React.createElement("span",{className:"pull-right color999"},"¥"+n.refund_price)),React.createElement("div",{className:"goods-amount refund-apply-time"},React.createElement("span",null,"申请时间"),React.createElement("span",{className:"pull-right color999"},n.add_time)),React.createElement("div",{className:"actual-payment"},React.createElement("div",null,React.createElement("span",null,"实际付款"),React.createElement("span",{className:"pull-right colorff7",style:(0,p.convertLineStyleData)("color:"+t.theme)},"¥"+n.total_price))),React.createElement("div",{className:"addition-info no-border",onClick:this.goOrderProgress},React.createElement("div",null,React.createElement("span",null,"订单进度"),React.createElement("span",{className:"pull-right color999 ico-moon icon-rightarrow"}))),React.createElement("div",{className:"order-number"},React.createElement("div",null,React.createElement("span",null,"订单编号"),React.createElement("span",null,n.order_id),React.createElement("span",{className:"pull-right",onClick:this.copyOrderId},"复制"))),React.createElement("div",{className:"order-bottom"},0==n.status&&React.createElement(React.Fragment,null,React.createElement("span",{className:"btn",onClick:this.showEventDialog,"data-type":"cancelRefund"},"撤销申请"),1!=n.is_pay_on_delivery&&React.createElement("span",{className:"btn",onClick:this.editorRefund},"修改申请")),1==n.status&&React.createElement(React.Fragment,null,React.createElement("span",{className:"btn",onClick:this.showEventDialog,"data-type":"orderDelete"},"删除售后订单")),2==n.status&&React.createElement(React.Fragment,null,React.createElement("span",{className:"btn",onClick:this.showEventDialog,"data-type":"orderDelete"},"删除售后订单")),3==n.status&&React.createElement(React.Fragment,null,React.createElement("span",{className:"btn",onClick:this.showEventDialog,"data-type":"cancelRefund"},"撤销申请"),1!=n.is_pay_on_delivery&&React.createElement("span",{className:"btn",onClick:this.editorRefund},"修改申请"),1!=n.is_pay_on_delivery&&React.createElement("span",{className:"btn btn-orange",style:(0,p.convertLineStyleData)("color:"+t.theme+";border-color:"+t.theme),onClick:this.returnInfor},"填写退货信息")),4==n.status&&React.createElement(React.Fragment,null,React.createElement("span",{className:"btn",onClick:this.checkLogistics},"查看退货物流")),5==n.status&&React.createElement(React.Fragment,null,React.createElement("span",{className:"apply-refund",onClick:this.showEventDialog,"data-type":"orderDelete"},"删除售后订单")),6==n.status&&React.createElement(React.Fragment,null,React.createElement("span",{className:"apply-refund",onClick:this.showEventDialog,"data-type":"orderDelete"},"删除售后订单")),7==n.status&&React.createElement(React.Fragment,null,React.createElement("span",{className:"apply-refund",onClick:this.showEventDialog,"data-type":"orderDelete"},"删除售后订单")))),l&&React.createElement("div",{className:"event-dialog-mask"},React.createElement("div",{className:"event-dialog"},"orderDelete"==c&&React.createElement("div",{className:"event-dialog-title"},"订单删除后不可找回，确认删除？"),"cancelRefund"==c&&React.createElement("div",{className:"event-dialog-title"},"是否撤销退款申请？"),React.createElement("div",{className:"event-dialog-bottom"},React.createElement("span",{className:"event-cancel",onClick:this.hideEventDialog},"取消"),"orderDelete"==c&&React.createElement("span",{style:(0,p.convertLineStyleData)("color:"+t.theme),className:"event-sure",onClick:this.orderDelete},"确认"),"cancelRefund"==c&&React.createElement("span",{style:(0,p.convertLineStyleData)("color:"+t.theme),className:"event-sure",onClick:this.cancelRefund},"确认")))))}}]),t}(g.default);t.default=h},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(17),i=n(o),s=a(9),r=n(s),c=a(22),l=n(c),d=a(0),u=n(d),m=a(3),p=n(m),f=a(1),g=n(f),h=a(2),v=n(h);a(16),a(23);var _=a(4),y=n(_),E=a(5),b=a(113),N=a(6),R=a(11),k=a(7),w=n(k);a(395);var x=function(e){function t(e){(0,u.default)(this,t);var a=(0,g.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={nationId:"",selectAddressId:"",addressList:[],afterInitial:!1,isFromBack:!1,from:"",fromAddAdress:!1,address_id:"",localAddress:"",selectProCityDirs:!0,nationname:"",selectRegion:[0,0,0],selectRegionId:[0,0,0],latitude:"",longitude:"",showMap:!0,show:!1,regionMap:{},regionData:[],regionCols:3,regionStr:[],searchAddress:[],nearbyAddress:[]},a.subShopId="",a.timer=0,a.isInCountry=function(e,t){var n=a;E.appMethod.getLocation({success:function(t){if(!t.latitude)return void n.setData({localAddress:"定位失败"});E.appMethod.sendRequest({url:"/index.php?r=map/IsInCountry",data:{nation_id:e,longitude:t.longitude,latitude:t.latitude},success:function(e){!0===e.data?n.getLocation():n.showMap=!1}})},fail:function(){E.appMethod.sendRequest({url:"/index.php?r=map/IsInCountry",data:{nation_id:e,longitude:113.93041,latitude:22.53332},success:function(e){!0===e.data?n.getLocation():n.showMap=!1}})}})},a.getAddressList=function(e){var t=a,n=(E.appMethod.globalData.takeoutLocate,E.appMethod.globalData.takeoutShopInfo),o=[],i=!0;E.appMethod.sendRequest({url:"/index.php?r=AppShop/addressList",success:function(a){for(var s=a.data,r=0,c=s.length-1;r<=c;r++)"takeout"==e&&(s[r].is_distance=E.appMethod.calculationDistanceByLatLng(n.latitude,n.longitude,s[r].latitude,s[r].longitude)<n.deliver_distance?1:0),0==s[r].latitude&&(i=!1),o.push(s[r]);t.setData({addressList:o,from:e,hasInDistance:i})}})},a.selectAddress=function(e){var t=E.appMethod.getCurrentPages(),n=t[t.length-2],o={},i=e.currentTarget.dataset.info;E.appMethod.globalData.takeoutAddressSelected=i,o["eles["+a.compindex+"].location_address"]=i.address_info.detailAddress,n.setData(o),E.appMethod.globalData.takeoutLocate.lat=i.latitude||"",E.appMethod.globalData.takeoutLocate.lng=i.longitude||"",E.appMethod.globalData.takeoutLocate.id=i.id||"",E.appMethod.globalData.takeoutRefresh=!0,E.appMethod.turnBack()},a.changeRegion=function(e){var t=[],n=[],o=e;e.reduce(function(e,a,o){for(var i=0,s=e.length;i<s;i++)if(e[i].value===a)return t[o]=e[i].label,n[o]=i,e[i].children||[]},a.data.regionData),a.setData({regionStr:t,selectRegion:n,selectRegionId:o})},a.getArea=function(e,t){E.appMethod.sendRequest({url:"/index.php?r=AppShop/getAllRegionInfo",data:{country_region_id:e||a.data.nationId},success:function(e){var a=e.data;t(a)}})},a.formateRegionData=function(e){return e?Object.keys(e).map(function(t){var n=e[t];return n.cities||n.towns?{label:n.name,value:n.id,children:a.formateRegionData(n.cities||n.towns)}:{label:n.name,value:n.id}}):[]},a.hideProCityDirs=function(){E.appMethod.showLoading({title:"请稍等..."}),setTimeout(function(){E.appMethod.hideLoading(),a.setData({selectRegionId:a.regionid,selectProCityDirs:!0,regionStr:a.oldRegionStr||""})},1e3)},a.submitRegion=function(){E.appMethod.showLoading({title:"请稍等..."});var e=a;setTimeout(function(){if(E.appMethod.hideLoading(),e.setData({selectProCityDirs:!0}),e.oldRegionStr=e.data.regionStr,e.data.searchInput){var t="";switch(e.data.regionStr[1]){case"县":case"自治区直辖县级行政区划":case"省直辖县级行政区划":t=e.data.regionStr[0]+e.data.regionStr[2];break;default:var a=[];e.data.regionStr.forEach(function(e){a.indexOf(e)<0&&(a[a.length]=e)}),t=a.join(" ")}E.appMethod.sendRequest({url:"/index.php?r=Map/suggestion&keyword=",data:{country_region_id:e.data.nationId,keyword:t+" "+e.data.searchInput,region:t},success:function(t){e.setData({searchInput:e.data.searchInput,searchAddress:t.data})}})}},1e3)},a.getLocation=function(){var e=a;if(E.appMethod.globalData.locationInfo.latitude){var t=E.appMethod.globalData.locationInfo,n=t.info,o=n.formatted_addresses?n.formatted_addresses.recommend:n.address;e.oldRegionStr=[n.ad_info.province,n.ad_info.city,n.ad_info.district],e.setData({regionStr:n.formatted_addresses?e.oldRegionStr:[n.address_component.nation,n.address_component.ad_level_3],localLatLng:n,localAddress:o,latitude:t.latitude,longitude:t.longitude,markers:[{latitude:t.latitude,longitude:t.longitude,iconPath:"http://cdn.jisuapp.cn/zhichi_frontend/static/webapp/images/circle.png",width:20,height:20},{latitude:t.latitude,longitude:t.longitude,iconPath:"http://cdn.jisuapp.cn/zhichi_frontend/static/webapp/images/location.png",width:20,height:30}]}),e.locateAddress=o,e.nearbyAddress({lat:t.latitude,lng:t.longitude,keyword:o})}else E.appMethod.getLocation({success:function(t){if(!t.latitude)return void e.setData({localAddress:"定位失败"});E.appMethod.getAddressByLatLng({lat:t.latitude,lng:t.longitude},function(a){var n=a.data.formatted_addresses?a.data.formatted_addresses.recommend:a.data.address;e.oldRegionStr=[a.data.ad_info.province,a.data.ad_info.city,a.data.ad_info.district],e.setData({regionStr:e.oldRegionStr,localLatLng:a.data,localAddress:n,latitude:t.latitude,longitude:t.longitude,markers:[{latitude:t.latitude,longitude:t.longitude,iconPath:"http://cdn.jisuapp.cn/zhichi_frontend/static/webapp/images/circle.png",width:20,height:20},{latitude:t.latitude,longitude:t.longitude,iconPath:"http://cdn.jisuapp.cn/zhichi_frontend/static/webapp/images/location.png",width:20,height:30}]}),e.locateAddress=n,e.nearbyAddress({lat:t.latitude,lng:t.longitude,keyword:e.locateAddress}),E.appMethod.setLocationInfo({latitude:t.latitude,longitude:t.longitude,address:a.data.formatted_addresses?a.data.formatted_addresses.recommend:a.data.address,info:a.data})})},fail:function(t){t={latitude:22.53332,longitude:113.93041},E.appMethod.getAddressByLatLng({lat:22.53332,lng:113.93041},function(a){var n=a.data.formatted_addresses?a.data.formatted_addresses.recommend:a.data.address;e.oldRegionStr=[a.data.ad_info.province,a.data.ad_info.city,a.data.ad_info.district],e.setData({regionStr:e.oldRegionStr,localLatLng:a.data,localAddress:n,latitude:t.latitude,longitude:t.longitude,markers:[{latitude:t.latitude,longitude:t.longitude,iconPath:"http://cdn.jisuapp.cn/zhichi_frontend/static/webapp/images/circle.png",width:20,height:20},{latitude:t.latitude,longitude:t.longitude,iconPath:"http://cdn.jisuapp.cn/zhichi_frontend/static/webapp/images/location.png",width:20,height:30}]}),e.locateAddress=n,e.nearbyAddress({lat:t.latitude,lng:t.longitude,keyword:e.locateAddress}),E.appMethod.setLocationInfo({latitude:t.latitude,longitude:t.longitude,address:a.data.formatted_addresses?a.data.formatted_addresses.recommend:a.data.address,info:a.data})})}})},a.searchAddress=function(e){var t=a,n=e.target.value;a.searchFunc&&clearTimeout(a.searchFunc),""!=n.trim()?a.searchFunc=setTimeout(function(){if(void 0===t.data.regionStr||!t.data.regionStr[1]&&!t.data.regionStr[2]||"请选择"==t.data.regionStr[1]&&"请选择"==t.data.regionStr[2])return void E.appMethod.showModal({content:"请先选择地区，再输入地址",confirmText:"好的",confirmColor:"#3091F2"});var e="";switch(t.data.regionStr[1]){case"县":case"自治区直辖县级行政区划":case"省直辖县级行政区划":e=t.data.regionStr[0]+t.data.regionStr[2];break;default:var a=[];t.data.regionStr.forEach(function(e){a.indexOf(e)<0&&(a[a.length]=e)}),e=a.join(" ")}E.appMethod.sendRequest({url:"/index.php?r=Map/suggestion&keyword=",data:{country_region_id:t.data.nationId,keyword:e+" "+n,region:e},success:function(e){t.setData({searchInput:n,searchAddress:e.data,showMap:!1})}})},1e3):t.setData({searchAddress:[],showMap:!0})},a.relocate=function(e){var t=a;a.setData({localAddress:""}),E.appMethod.getLocation({success:function(e){E.appMethod.getAddressByLatLng({lat:e.latitude,lng:e.longitude},function(a){var n=a.data.formatted_addresses?a.data.formatted_addresses.recommend:a.data.address;t.setData({localLatLng:a.data,localAddress:n}),t.nearbyAddress({lat:e.latitude,lng:e.longitude,keyword:n}),E.appMethod.setLocationInfo({latitude:e.latitude,longitude:e.longitude,address:a.data.formatted_addresses?a.data.formatted_addresses.recommend:a.data.address,info:a.data})})}})},a.selectTakeoutRelocate=function(e){var t=e.currentTarget.dataset.info;E.appMethod.globalData.takeoutLocate={lat:t.latitude,lng:t.longitude},E.appMethod.globalData.takeoutRefresh=!0,E.appMethod.turnBack()},a.turnBackPageByLoacl=function(e){E.appMethod.globalData.takeoutAddressSelected="";var t=E.appMethod.getCurrentPages(),n=t[t.length-2];if(!n)return l.default.info("当前操作需要返回上一页"),void E.appMethod.turnBack();var o={},i=JSON.parse(e.currentTarget.dataset.addressinfo);o[a.compid+".location_address"]=i.formatted_addresses?i.formatted_addresses.recommend:i.address,n.setData(o),E.appMethod.globalData.takeoutLocate.lat=i.location.lat,E.appMethod.globalData.takeoutLocate.lng=i.location.lng,E.appMethod.globalData.takeoutRefresh=!0,E.appMethod.turnBack()},a.turnBackPage=function(e){E.appMethod.globalData.takeoutAddressSelected="";var t=E.appMethod.getCurrentPages(),n=t[t.length-2];if(!n)return l.default.info("当前操作需要返回上一页"),void E.appMethod.turnBack();var o=e.currentTarget.dataset.type,i=JSON.parse(e.currentTarget.dataset.addressinfo),s=a.data.selectRegionId;if("addAddress"==a.data.from&&"search"==o){var c=a.data,d=c.regionStr,u=c.nationId,m=c.nationname,p=i,f=[p.province||d[0]||"",p.city||d[1]||"",p.district||d[2]||""],g="";f[1]===f[2]&&(f[2]=""),1!=a.data.nationId&&(g=" "),n.setData({"address_info.country.id":u,"address_info.province.id":s[0],"address_info.city.id":s[1],"address_info.district.id":s[2],"address_info.country.text":m,"address_info.province.text":f[0],"address_info.city.text":f[1],"address_info.district.text":f[2],"address_info.detailAddress":p.title||"","address_info.regionInfoText":f.join(g)||"","address_info.address":p.address,latitude:p.location.lat,longitude:p.location.lng})}else if("addAddress"==a.data.from&&"nearby"==o){var h=i.ad_info,v=[h.province||"",h.city||"",h.district||""],_="";v[1]===v[2]&&(v[2]=""),1!=a.data.nationId&&(_=" "),n.setData({"address_info.country.id":a.data.nationId,"address_info.province.text":v[0],"address_info.province.id":"","address_info.city.text":v[1],"address_info.city.id":"","address_info.district.text":v[2],"address_info.district.id":"","address_info.detailAddress":i.title,"address_info.regionInfoText":v.join(_),"address_info.address":i.address,latitude:i.location.lat,longitude:i.location.lng})}else if("takeout"==a.data.from){var y={};y[a.compid+".location_address"]=i.title,n.setData(y),E.appMethod.globalData.takeoutLocate.lat=i.location.lat,E.appMethod.globalData.takeoutLocate.lng=i.location.lng}else if("franchisee"==a.data.from&&a.compid){var b,N=e.currentTarget.dataset.addressinfo,R=N.location,k=N.address,w=a.compid;n.setData((b={},(0,r.default)(b,w+".location_address",k),(0,r.default)(b,w+".param.latitude",R.lat),(0,r.default)(b,w+".param.longitude",R.lng),b)),E.appMethod.globalData.locationInfo.address=k,E.appMethod.globalData.locationInfo.latitude=R.lat,E.appMethod.globalData.locationInfo.longitude=R.lng,E.appMethod.globalData.franchiseeListCompsRefresh=!0,Array.isArray(E.appMethod.globalData.needRefreshFranchiseeListComps)?~w.indexOf(E.appMethod.globalData.needRefreshFranchiseeListComps)||E.appMethod.globalData.needRefreshFranchiseeListComps.push(w):E.appMethod.globalData.needRefreshFranchiseeListComps=[w]}E.appMethod.globalData.takeoutRefresh=!0,n.location=i.location,E.appMethod.turnBack()},a.nearbyAddress=function(e){var t=a;E.appMethod.sendRequest({url:"/index.php?r=Map/searchAreaInfo",data:{country_region_id:t.data.nationId,keyword:e.keyword,boundary:"nearby("+e.lat+","+e.lng+",2000)"},success:function(e){a.setData({nearbyAddress:e.data||[],showMap:!0,show:!0})}})},a.regionchange=function(e){if("end"==e.type&&("scale"==e.causedBy||"drag"==e.causedBy)){clearTimeout(a.timer);var t=a,n=a.data.markers;a.mapCtx=a.mapRef.current,a.mapCtx.getCenterLocation({type:"gcj02",success:function(e){n[1]={latitude:e.latitude,longitude:e.longitude,iconPath:"http://cdn.jisuapp.cn/zhichi_frontend/static/webapp/images/location.png",width:20,height:30},t.setData({latitude:e.latitude,longitude:e.longitude,circles:[{latitude:e.latitude,longitude:e.longitude,color:"#FF0000DD",fillColor:"#d1edff88",radius:300,strokeWidth:1}],markers:n}),t.timer=setTimeout(function(){E.appMethod.sendRequest({url:"/index.php?r=Map/getAreaInfoByLatAndLng",data:{latitude:e.latitude,longitude:e.longitude},success:function(a){t.nearbyAddress({keyword:a.data.formatted_addresses.recommend,lat:e.latitude,lng:e.longitude})}})},500)}})}},a.addNewAddress=function(){var e=E.appMethod.getCurrentPages();e[e.length-2].setData({"address_info.country.id":a.data.nationId,"address_info.province.text":a.data.regionStr[0],"address_info.city.text":a.data.regionStr[1],"address_info.district.text":a.data.regionStr[2],"address_info.regionInfoText":a.data.regionStr[0]+a.data.regionStr[1]+a.data.regionStr[2],detailAddress:"","address_info.detailAddress":""}),E.appMethod.turnBack()},a.reset=function(){var e=a.data.markers,t=a;e[1].latitude=a.data.markers[0].latitude,e[1].longitude=a.data.markers[0].longitude,a.setData({markers:e,latitude:t.data.markers[0].latitude,longitude:t.data.markers[0].longitude}),E.appMethod.sendRequest({url:"/index.php?r=Map/getAreaInfoByLatAndLng",data:{latitude:t.data.markers[0].latitude,longitude:t.data.markers[0].longitude},success:function(e){t.nearbyAddress({keyword:e.data.formatted_addresses.recommend,lat:t.data.markers[0].latitude,lng:t.data.markers[0].longitude})}})},document.title="搜索地址",a.mapRef=y.default.createRef(),a}return(0,v.default)(t,e),(0,p.default)(t,[{key:"componentWillMount",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,N.getCurrentPageQueryParams)(),a=t.from,n=t.locateAddress||"",o="1"==t.nationId?"0":t.nationId,i={};void 0!==t.nationId&&void 0!==t.nationname&&(i.nationId=t.nationId,i.nationname=t.nationname),t.latitude&&(i.latitude=t.latitude,i.longitude=t.longitude),i.from=a,i.locateAddress=n,this.setData(i),this.getArea(o,function(t){e.setData({regionCols:0==o?3:2,regionMap:t,regionData:e.formateRegionData(t)})}),this.compindex=t.compindex||"",this.locateAddress=n,"addAddress"==a?E.appMethod.setNavigationBarTitle({title:"选择收货地址"}):"takeout"==a?E.appMethod.setNavigationBarTitle({title:"选择定位地址"}):E.appMethod.setNavigationBarTitle({title:"搜索地址"}),this.subShopId=t.sub_shop_id||"","addAddress"==a?this.isInCountry(this.data.nationId):this.getLocation(),this.getAddressList(a)}},{key:"componentDidMount",value:function(){}},{key:"componentDidMount",value:function(){if(this.data.isFromBack);else this.setData({isFromBack:!0})}},{key:"render",value:function(){var e=this,t=this.state,a=t.regionStr,n=t.localLatLng,o=t.localAddress,s=t.searchAddress,r=t.addressList,c=t.hasInDistance,l=t.from,d=t.showMap,u=t.longitude,m=t.latitude,p=t.markers,f=t.nationId,g=t.show,h=t.nearbyAddress,v=(t.selectProCityDirs,t.selectRegion,t.province,t.regionData),_=t.regionCols,E=t.searchInput;return v.forEach(function(e,t){e.value||v.splice(t,1)}),y.default.createElement("div",{className:"official-page search-address"},y.default.createElement("div",{className:"search-address"},y.default.createElement("span",null,y.default.createElement(i.default,{data:v,value:["","",""],cols:_,onOk:function(t){return e.changeRegion(t)}},y.default.createElement("div",null,y.default.createElement("span",{className:"address-text"},a[2]||a[1]||"请选择"),y.default.createElement("span",{className:"ico-moon icon-downarrow"})))),y.default.createElement("input",{type:"text",placeholder:"查找小区/学校/大厦等",vaule:E,onInput:function(t){return e.searchAddress(t)}})),y.default.createElement(R.ScrollView,{"scroll-y":"true",style:(0,N.convertLineStyleData)("height: calc(100% - 84rpx);")},y.default.createElement("div",{className:"myAddress-wrap page",id:"myAddress",style:(0,N.convertLineStyleData)("height: 100%;")},"takeout"==l&&y.default.createElement(y.default.Fragment,null,y.default.createElement("div",{className:"address-list-title"},"当前地址"),y.default.createElement("div",{className:"address-local"},y.default.createElement("span",{className:"current-address","data-addressinfo":n,onClick:this.turnBackPageByLoacl},o||"定位中..."),y.default.createElement("span",{className:"ico-moon icon-relocate",onClick:this.relocate},"重新定位")),s.length&&y.default.createElement("div",null,y.default.createElement("div",{className:"address-list-title"},"搜索地址"),s.map(function(t,a){return y.default.createElement(y.default.Fragment,{key:a},y.default.createElement("div",{className:"single-search-result "+(0==a?"first":""),"data-addressinfo":JSON.stringify(t),"data-type":"search",onClick:e.turnBackPage},y.default.createElement("div",{className:"single-search-title"},t.title),y.default.createElement("div",{className:"single-search-detail"},t.address)))})),y.default.createElement("div",{className:"address-list-title"},"收货地址"),r.length?y.default.createElement(y.default.Fragment,null,r.map(function(t,a){return y.default.createElement(y.default.Fragment,{key:a},""!=t.latitude&&y.default.createElement("div",{className:"myAddress-address"},y.default.createElement("div",{className:"myAddress-address-top","data-info":t,onClick:e.selectAddress,"data-id":t.id},y.default.createElement("div",null,0==t.address_info.label&&y.default.createElement("label",{className:"home address-label"},"家"),2==t.address_info.label&&y.default.createElement("label",{className:"company address-label"},"公司"),1==t.address_info.label&&y.default.createElement("label",{className:"school address-label"},"学校"),y.default.createElement("span",{className:"address-detail"},t.address_info.province.text+t.address_info.city.text+t.address_info.district.text+t.address_info.detailAddress)),y.default.createElement("span",{className:"address-person"},t.address_info.name+" "+(1==t.address_info.sex?"(先生)":0==t.address_info.sex?"(女士)":"")+" "+t.address_info.contact))))}),!c&&y.default.createElement(y.default.Fragment,null,y.default.createElement("div",{className:"address-list-title"},"以下地址信息不全（需重新编辑）"),r.map(function(e,t){return y.default.createElement(y.default.Fragment,{key:t},""==e.latitude&&y.default.createElement("div",{className:"myAddress-address",style:(0,N.convertLineStyleData)("background-color:#eee;")},y.default.createElement("div",{className:"myAddress-address-top","data-info":e,"data-id":e.id},y.default.createElement("div",null,0==e.address_info.label&&y.default.createElement("label",{className:"home address-label"},"家"),2==e.address_info.label&&y.default.createElement("label",{className:"company address-label"},"公司"),1==e.address_info.label&&y.default.createElement("label",{className:"school address-label"},"学校"),y.default.createElement("span",{className:"address-detail"},e.address_info.province.text+e.address_info.city.text+e.address_info.district.text+e.address_info.detailAddress)),y.default.createElement("span",{className:"address-person"},e.address_info.name+" "+(1==e.address_info.sex?"(先生)":0==e.address_info.sex?"(女士)":"")+" "+e.address_info.contact))))}))):y.default.createElement(y.default.Fragment,null,y.default.createElement("div",{style:(0,N.convertLineStyleData)("color:#a8a8a8; padding:20px;")},"暂无收货地址"))),!!s.length&&"takeout"!=l&&y.default.createElement("div",null,y.default.createElement("div",{className:"address-list-title"},"搜索地址"),s.map(function(t,a){return y.default.createElement(y.default.Fragment,{key:t.id},y.default.createElement("div",{className:"single-search-result "+(0==a?"first":""),"data-addressinfo":JSON.stringify(t),"data-type":"search",onClick:e.turnBackPage},y.default.createElement("div",{className:"single-search-title"},t.title),y.default.createElement("div",{className:"single-search-detail"},t.address)))})),!s.length&&!d&&y.default.createElement("div",null,y.default.createElement("div",{className:"address-null"},y.default.createElement("div",{className:"address-null-img"},y.default.createElement("img",{src:"http://cdn.jisuapp.cn/static/webapp/images/xcx-goods/same-journey-null.png",onClick:this.addNewAddress})),y.default.createElement("div",{className:"address-null-title",onClick:this.addNewAddress},"找不到地址？"),y.default.createElement("div",{className:"address-null-tips",onClick:this.addNewAddress},y.default.createElement("span",null,"请尝试只输入小区，写字楼或学校名"),y.default.createElement("span",null,"也可前往详情地址"),y.default.createElement("span",{style:(0,N.convertLineStyleData)("color:#3091F2;")},"手动输入"),"~"))),d&&(""===f||1==f)&&g&&y.default.createElement("div",{id:"search-address-map"},y.default.createElement(b.Map,{ref:this.mapRef,id:"map",longitude:u,latitude:m,markers:p,style:(0,N.convertLineStyleData)("width:100%;height:394rpx;"),bindregionchange:this.regionchange},y.default.createElement("div",{className:"controls",onClick:this.reset},y.default.createElement("img",{src:"http://test.zhichiwangluo.com/zhichi_frontend/static/webapp/images/takeout/reset.png"})))),!(""===f||1==f)&&!a&&y.default.createElement("div",{className:"no-nearby"},"请先选择地区"),(""===f||1==f)&&!!h.length&&("takeout"==l||"addAddress"==l)&&!s.length&&d&&y.default.createElement(R.ScrollView,{className:"myAddress-near-address","scroll-y":"true",style:(0,N.convertLineStyleData)("height:calc(100% - 394rpx);")},!!h.length&&y.default.createElement("div",{className:"address-list-title"},"附近地址"),h.map(function(t,a){return y.default.createElement(y.default.Fragment,{key:a},y.default.createElement("div",{className:"single-nearby-address "+(0==a?"first":""),"data-addressinfo":JSON.stringify(t),"data-type":"nearby",onClick:e.turnBackPage},y.default.createElement("div",{className:"nearby-title"},t.title),y.default.createElement("div",{className:"nearby-address"},t.address)))})),(""===f||1==f)&&!h.length&&d&&g&&y.default.createElement("div",{className:"no-nearby"},"暂无附近地址"))))}}]),t}(w.default);t.default=x},function(e,t){},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(94),i=n(o),s=a(0),r=n(s),c=a(3),l=n(c),d=a(1),u=n(d),m=a(2),p=n(m),f=a(84),g=n(f);a(96),a(92);var h=a(5),v=a(6),_=a(7),y=n(_),E=a(11);a(397);var b=(g.default.prompt,function(e){function t(e){(0,r.default)(this,t);var a=(0,u.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={topNavBarData:{isDefault:0,title:"优惠券"},type:1,loadData:{currentPage:1,isMore:1,loading:!1},hiddenmodalput:!0,untimes:"",numberOfStampsUrl:"",couponList:[],addLabelText:"",rechargeSuccess:0,storeStyle:{}},a.changeTab=function(e){var t=a,n=e.target.dataset.type;t.setData({type:n,couponList:[],loadData:{currentPage:1,isMore:1,loading:!1}}),t.data.isParentShop?t.getMyAllCoupons():t.getMyCoupons()},a.getMyCoupons=function(){var e=a;if(0==e.data.loadData.isMore||e.data.loadData.loading)return!1;e.setData({"loadData.loading":!0}),h.appMethod.sendRequest({url:"/index.php?r=AppShop/getMyCoupons",data:{type:e.data.type,page:e.data.loadData.currentPage,page_size:10},hideLoading:!0,success:function(t){e.setData({couponList:e.data.couponList.concat(t.data),"loadData.currentPage":(t.current_page||0)+1,"loadData.isMore":t.is_more,"loadData.loading":!1})}})},a.getMyAllCoupons=function(){var e=a;if(0==e.data.loadData.isMore||e.data.loadData.loading)return!1;e.setData({"loadData.loading":!0}),h.appMethod.sendRequest({url:"/index.php?r=AppShop/GetMyAllCoupons",data:{type:e.data.type,latitude:e.data.latitude,longitude:e.data.longitude,page:e.data.loadData.currentPage,page_size:10},hideLoading:!0,success:function(t){e.setData({couponList:e.data.couponList.concat(t.data),"loadData.currentPage":(t.current_page||0)+1,"loadData.isMore":t.is_more,"loadData.loading":!1})}})},a.getLocation=function(){var e=a;h.appMethod.getLocation({success:function(t){e.setData({longitude:t.longitude,latitude:t.latitude}),e.getMyAllCoupons()},fail:function(){e.setData({longitude:"",latitude:""}),e.getMyAllCoupons()}})},a.gotoCouponDetail=function(e){var t=e.currentTarget.dataset.id,n=e.currentTarget.dataset.appid,o="";h.appMethod.globalData.appId!=n&&a.data.isParentShop&&(o="&franchisee="+n);var i="/pages/couponDetail/couponDetail?status=use&detail="+t+o;h.appMethod.turnToPage(i,!1)},a.gotoTransferPage=function(){h.appMethod.turnToPage("/eCommerce/pages/transferPage/transferPage",!1)},a.addLabelInputChange=function(e){a.setData({addLabelText:e.target.value})},a.gotoNumberPage=function(e){e.stopPropagation();var t=e.currentTarget.dataset.id,n=e.currentTarget.dataset.appid,o=e.currentTarget.dataset.untimes,i="";h.appMethod.globalData.appId!=n&&a.data.isParentShop&&(i="&franchisee="+n);var s="/exchangeCoupon/pages/numberOfStampsUsed/numberOfStampsUsed?detail="+t+i;a.setData({numberOfStampsUrl:s,hiddenmodalput:!1,untimes:o})},a.confirm=function(){if(+a.data.untimes<+a.data.addLabelText)return h.appMethod.showModal({content:"核销次数超过剩余次数"}),void a.setData({hiddenmodalput:!0,addLabelText:""});var e=a.data.numberOfStampsUrl+"&Number="+a.data.addLabelText;a.setData({hiddenmodalput:!0,addLabelText:""}),h.appMethod.turnToPage(e,!1)},a.cancel=function(){a.setData({hiddenmodalput:!0,addLabelText:""})},a.gotoRecharge=function(e){e.stopPropagation();var t=a,n=e.currentTarget.dataset.id;h.appMethod.sendRequest({url:"/index.php?r=AppShop/useCoupon",data:{user_coupon_id:n},hideLoading:!0,success:function(e){t.setData({rechargeSuccess:1}),setTimeout(function(){t.hideToast()},3e3);for(var a=t.data.couponList,o=0;o<a.length;o++)if(a[o].id==n){var i={};i["couponList["+o+"].status"]=2,t.setData(i)}}})},a.hideToast=function(){a.setData({rechargeSuccess:0})},a.gotoShop=function(e){e.stopPropagation();var t=e.currentTarget.dataset.appid,a=e.currentTarget.dataset.mode,n=h.appMethod.getChainId();if(h.appMethod.globalData.appId==t){h.appMethod.getChainId()&&h.appMethod.clearChainInfo();var o=h.appMethod.getHomepageRouter();h.appMethod.reLaunch({url:"/pages/"+o+"/"+o})}else if(n==t){var i=h.appMethod.getHomepageRouter();h.appMethod.reLaunch({url:"/pages/"+i+"/"+i})}else{var s={};s.detail=t,h.appMethod.goToFranchisee(a,s)}},a.getAppECStoreConfig=function(){h.appMethod.getAppECStoreConfig(function(e){a.setData({storeStyle:e.color_config})})},document.title="优惠券",a}return(0,p.default)(t,e),(0,l.default)(t,[{key:"componentDidMount",value:function(){var e=this,t=h.appMethod.globalData.hasFranchiseeList;e.setData({isParentShop:t,"topNavBarData.totalHeight":h.appMethod.globalData.topNavBarHeight||0}),t?e.getLocation():(e.getAppECStoreConfig(),e.getMyCoupons())}},{key:"privateStopNoop",value:function(e){e.stopPropagation()}},{key:"render",value:function(){var e=this,t=this.state,a=(t.showGetUserInfo,t.topNavBarData),n=t.type,o=t.storeStyle,s=t.couponList,r=t.isParentShop,c=t.rechargeSuccess,l=t.hiddenmodalput,d=(t.addLabelText,t.labelFocus);return React.createElement("div",{className:"official-page coupon-list"},React.createElement("div",{id:"coupon-list"},React.createElement("div",{className:"tabs",style:(0,v.convertLineStyleData)("top:"+a.totalHeight+"px;")},React.createElement("div",{className:"tabs-wrap"},React.createElement("div",{"data-type":"1",onClick:this.changeTab,style:(0,v.convertLineStyleData)(1==n?"color:"+o.theme+";border-color:"+o.theme:""),className:1==n?"active":""},"未使用"),React.createElement("div",{"data-type":"2",onClick:this.changeTab,style:(0,v.convertLineStyleData)(2==n?"color:"+o.theme+";border-color:"+o.theme:""),className:2==n?"active":""},"已使用"),React.createElement("div",{"data-type":"3",onClick:this.changeTab,style:(0,v.convertLineStyleData)(3==n?"color:"+o.theme+";border-color:"+o.theme:""),className:3==n?"active":""},"已失效"))),r?React.createElement(React.Fragment,null,React.createElement(E.ScrollView,{className:"ticket-list","scroll-y":"true","lower-threshold":"100",bindscrolltolower:this.getMyAllCoupons},s.map(function(t,a){return React.createElement(React.Fragment,{key:t.id},React.createElement("div",{className:"ticket franchisee-ticket",onClick:e.gotoCouponDetail,"data-id":t.id,"data-appid":t.app_id},React.createElement("div",{className:"top-section",style:(0,v.convertLineStyleData)("border-color:"+t.list_color)},React.createElement("div",{className:"coupon-franchisee"},React.createElement("img",{className:"coupon-franchisee-logo",mode:"aspectFill",src:t.logo}),React.createElement("div",{className:"coupon-franchisee-name",onClick:e.gotoShop,"data-mode":t.app_shop_info.mode_id,"data-appid":t.app_id},t.app_shop_info.name,React.createElement("label",{className:"ico-moon icon-rightarrow"})),React.createElement("div",{className:"coupon-franchisee-distance"},"附近"+t.app_shop_info.distance+"米")),0==t.type?React.createElement(React.Fragment,null,React.createElement("div",{className:"detail-info-franchisee"},React.createElement("div",{className:"coupon-value",style:(0,v.convertLineStyleData)("color:"+t.list_color)},React.createElement("label",null,"¥"),t.value),React.createElement("div",{className:"coupon-condition"},"满"+t.condition+"可用"))):1==t.type?React.createElement(React.Fragment,null,React.createElement("div",{className:"detail-info-franchisee"},React.createElement("div",{className:"coupon-value",style:(0,v.convertLineStyleData)("color:"+t.list_color)},t.value,React.createElement("label",null,"折")),"null"==t.extra_goods?React.createElement("div",{className:"coupon-condition"},"全部商品可享优惠"):React.createElement("div",{className:"coupon-condition"},"部分商品可享优惠"))):2==t.type?React.createElement(React.Fragment,null,React.createElement("div",{className:"detail-info-franchisee"},React.createElement("div",{className:"coupon-value",style:(0,v.convertLineStyleData)("color:"+t.list_color)},React.createElement("label",null,"¥"),t.value),React.createElement("div",{className:"coupon-condition"},"商品代金券"))):3==t.type?React.createElement(React.Fragment,null,React.createElement("div",{className:"detail-info-franchisee"},React.createElement("div",{className:"coupon-value",style:(0,v.convertLineStyleData)("color:"+t.list_color)},"兑换券"),""==t.extra_condition?React.createElement("div",{className:"coupon-condition"},"直接兑换"+t.coupon_goods_info.title):t.extra_condition.price?React.createElement("div",{className:"coupon-condition"},"消费满"+t.extra_condition.price+"元可兑换"+t.coupon_goods_info.title):t.extra_condition.goods_id&&React.createElement("div",{className:"coupon-condition"},"购买"+t.condition_goods_info.title+"可兑换"+t.coupon_goods_info.title))):4==t.type?React.createElement(React.Fragment,null,React.createElement("div",{className:"detail-info-franchisee"},React.createElement("div",{className:"coupon-value",style:(0,v.convertLineStyleData)("color:"+t.list_color)},React.createElement("label",null,"¥"),t.value),React.createElement("div",{className:"coupon-condition"},"商品储值金"))):5==t.type?React.createElement(React.Fragment,null,React.createElement("div",{className:"detail-info-franchisee"},React.createElement("div",{className:"coupon-value",style:(0,v.convertLineStyleData)("color:"+t.list_color)},"通用券"),React.createElement("div",{className:"coupon-condition"},t.extra_condition))):6==t.type&&React.createElement(React.Fragment,null,React.createElement("div",{className:"detail-info-franchisee"},React.createElement("div",{className:"coupon-value"},"次数券"),React.createElement("div",{className:"coupon-condition"},"使用条件: 可使用"+t.verify_times+"次"))),1==t.status&&React.createElement("div",{className:"receive-btn",onClick:e.gotoShop,"data-appid":t.app_id,"data-mode":t.app_shop_info.mode_id,style:(0,v.convertLineStyleData)("background-color:"+t.list_color)},"去使用"),2==t.status&&React.createElement("div",{className:"receive-btn receive-btn-use"},"已使用"),3==t.status&&React.createElement("div",{className:"receive-btn receive-btn-use"},"已失效")),React.createElement("div",{className:"bottom-section"},React.createElement("div",null,"有效期 "+("-1"==t.expire?t.start_use_date+"至"+t.end_use_date:"0"==t.expire?"领取当天生效,有效期1天":"领取"+(t.react>0?t.react+"天后":"当天")+"生效，有效期"+t.expire+"天")+(0==t.exclude_holiday?"":"除去法定节假日")+" "+(0==t.exclude_weekend?"":"周一至周五")+" "+t.start_use_time+"-"+t.end_use_time))))}))):React.createElement(React.Fragment,null,React.createElement(E.ScrollView,{className:"ticket-list","scroll-y":"true","lower-threshold":"100",bindscrolltolower:this.getMyCoupons},s.map(function(t,a){return React.createElement(React.Fragment,{key:t.id},React.createElement("div",{className:"ticket "+(2==t.status||3==t.status||4==t.status?"expired":""),onClick:e.gotoCouponDetail,"data-id":t.id},0==t.type?React.createElement("div",{className:"top-section",style:(0,v.convertLineStyleData)("border-color:"+t.list_color)},React.createElement("div",{className:"detail-info"},React.createElement("div",{className:"name"},t.title),React.createElement("div",{className:"use-condition"},"使用条件：满"+t.condition+"元，减"+t.value+"元")),React.createElement("div",{className:"background-word-area",style:(0,v.convertLineStyleData)("border-color:"+t.list_color)},React.createElement("div",{className:"background-circle",style:(0,v.convertLineStyleData)("background-color:"+t.list_color)}),React.createElement("div",{className:"background-word"},"减")),2==t.status?React.createElement("div",{className:"use-btn"},"已使用"):3==t.status&&React.createElement("div",{className:"use-btn"},"已失效")):1==t.type?React.createElement("div",{className:"top-section",style:(0,v.convertLineStyleData)("border-color:"+t.list_color)},React.createElement("div",{className:"detail-info"},React.createElement("div",{className:"name"},t.title),React.createElement("div",{className:"use-condition"},"使用条件: 打"+t.value+"折")),React.createElement("div",{className:"background-word-area",style:(0,v.convertLineStyleData)("border-color:"+t.list_color)},React.createElement("div",{className:"background-circle",style:(0,v.convertLineStyleData)("background-color:"+t.list_color)}),React.createElement("div",{className:"background-word"},"折")),2==t.status?React.createElement("div",{className:"use-btn"},"已使用"):3==t.status&&React.createElement("div",{className:"use-btn"},"已失效")):2==t.type?React.createElement("div",{className:"top-section",style:(0,v.convertLineStyleData)("border-color:"+t.list_color)},React.createElement("div",{className:"detail-info"},React.createElement("div",{className:"name"},t.title),React.createElement("div",{className:"use-condition"},"使用条件：可抵扣"+t.value+"元")),React.createElement("div",{className:"background-word-area",style:(0,v.convertLineStyleData)("border-color:"+t.list_color)},React.createElement("div",{className:"background-circle",style:(0,v.convertLineStyleData)("background-color:"+t.list_color)}),React.createElement("div",{className:"background-word"},"代")),2==t.status?React.createElement("div",{className:"use-btn"},"已使用"):3==t.status&&React.createElement("div",{className:"use-btn"},"已失效")):3==t.type?React.createElement("div",{className:"top-section",style:(0,v.convertLineStyleData)("border-color:"+t.list_color)},React.createElement("div",{className:"detail-info"},React.createElement("div",{className:"name"},t.title),""==t.extra_condition?React.createElement("div",{className:"use-condition"},"使用条件: 直接兑换"+t.coupon_goods_info.title):t.extra_condition.price?React.createElement("div",{className:"use-condition"},"使用条件: 消费满"+t.extra_condition.price+"元可兑换"+t.coupon_goods_info.title):t.extra_condition.goods_id&&React.createElement("div",{className:"use-condition"},"使用条件: 购买"+t.condition_goods_info.title+"可兑换"+t.coupon_goods_info.title)),React.createElement("div",{className:"background-word-area",style:(0,v.convertLineStyleData)("border-color:"+t.list_color)},React.createElement("div",{className:"background-circle",style:(0,v.convertLineStyleData)("background-color:"+t.list_color)}),React.createElement("div",{className:"background-word"},"兑")),2==t.status?React.createElement("div",{className:"use-btn"},"已使用"):3==t.status&&React.createElement("div",{className:"use-btn"},"已失效")):4==t.type?React.createElement("div",{className:"top-section",style:(0,v.convertLineStyleData)("border-color:"+t.list_color)},React.createElement("div",{className:"detail-info"},React.createElement("div",{className:"name"},t.title),React.createElement("div",{className:"use-condition"},"使用条件: 储值金可充值"+t.value+"元")),React.createElement("div",{className:"background-word-area",style:(0,v.convertLineStyleData)("border-color:"+t.list_color)},React.createElement("div",{className:"background-circle",style:(0,v.convertLineStyleData)("background-color:"+t.list_color)}),React.createElement("div",{className:"background-word"},"储")),1==t.status?React.createElement("div",{className:"use-btn",onClick:e.gotoRecharge,"data-id":t.id,style:(0,v.convertLineStyleData)("background-color:"+t.list_color)},"立即充值"):2==t.status?React.createElement("div",{className:"use-btn"},"已使用"):3==t.status&&React.createElement("div",{className:"use-btn"},"已失效")):5==t.type?React.createElement("div",{className:"top-section",style:(0,v.convertLineStyleData)("border-color:"+t.list_color)},React.createElement("div",{className:"detail-info"},React.createElement("div",{className:"name"},t.title),React.createElement("div",{className:"use-condition"},"使用条件: "+t.extra_condition)),React.createElement("div",{className:"background-word-area",style:(0,v.convertLineStyleData)("border-color:"+t.list_color)},React.createElement("div",{className:"background-circle",style:(0,v.convertLineStyleData)("background-color:"+t.list_color)}),React.createElement("div",{className:"background-word"},"通")),1==t.status?React.createElement("div",{className:"use-btn",onClick:e.gotoCouponDetail,"data-id":t.id,style:(0,v.convertLineStyleData)("background-color:"+t.list_color)},"立即使用"):2==t.status?React.createElement("div",{className:"use-btn"},"已使用"):3==t.status&&React.createElement("div",{className:"use-btn"},"已失效")):6==t.type&&React.createElement("div",{className:"top-section",style:(0,v.convertLineStyleData)("border-color:"+t.list_color)},React.createElement("div",{className:"detail-info"},React.createElement("div",{className:"name"},t.title),React.createElement("div",{className:"use-condition"},"使用条件: 可使用"+t.verify_times+"次")),React.createElement("div",{className:"background-word-area",style:(0,v.convertLineStyleData)("border-color:"+t.list_color)},React.createElement("div",{className:"background-circle",style:(0,v.convertLineStyleData)("background-color:"+t.list_color)}),React.createElement("div",{className:"background-word"},"次")),1==t.status?React.createElement("div",{className:"use-btn",onClick:function(t){return e.gotoNumberPage(t)},"data-id":t.id,"data-appid":t.app_id,style:(0,v.convertLineStyleData)("background-color:"+t.list_color),"data-untimes":t.un_verify_times},"立即使用"):2==t.status?React.createElement("div",{className:"use-btn"},"已使用"):3==t.status?React.createElement("div",{className:"use-btn"},"已失效"):4==t.status&&React.createElement("div",{className:"use-btn"},"未生效")),React.createElement("div",{className:"bottom-section"},React.createElement("div",null,"有效期 "+("-1"==t.expire?t.start_use_date+"至"+t.end_use_date:"0"==t.expire?"领取当天生效,有效期1天":"领取"+(t.react>0?t.react+"天后":"当天")+"生效，有效期"+t.expire+"天")+" "+(0==t.exclude_holiday?"":"除去法定节假日")+" "+(0==t.exclude_weekend?"":"周一至周五")+" "+t.start_use_time+"-"+t.end_use_time))))}))),React.createElement("div",{className:"zc-toast-bg "+(1==c?"show":""),onClick:this.hideToast},React.createElement("div",{className:"zc-toast"},React.createElement("span",{className:"icon",type:"success",size:"20"}),React.createElement("div",{className:"title"},"充值成功!"),React.createElement("div",{className:"content"},"请到储值金中查看"))),React.createElement(g.default,{className:"modal-wrap",transparent:!0,title:"请输入本次核销次数",visible:!l,maskClosable:!0},React.createElement("input",{className:"modal-input",type:"number",placeholder:"请输入本次核销次数",maxLength:"6",onInput:function(t){return e.addLabelInputChange(t)},focus:d,style:(0,v.convertLineStyleData)("background:#F5F5F5;height:76rpx;border-radius:10rpx;padding: 0 60rpx")}),React.createElement("div",{className:"modal-btn-wrap"},React.createElement(i.default,{className:"cancel",onClick:this.cancel},"取消"),React.createElement(i.default,{className:"confirm",onClick:this.confirm},"确认")))))}}]),t}(y.default));t.default=b},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(17),i=n(o),s=a(39),r=n(s),c=a(0),l=n(c),d=a(3),u=n(d),m=a(1),p=n(m),f=a(2),g=n(f);a(16),a(35);var h=a(5),v=a(6),_=a(7),y=n(_);a(399);var E=function(e){function t(e){(0,l.default)(this,t);var a=(0,p.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={goodsList:[],imagesArr:[],refundDes:"",shipment:"",phone:"",storeStyle:{}},a.applyId="",a.orderId="",a.franchiseeId="",a.refundGoods=[],a.expressList=[],a.dataInitial=function(){a.getOrderDetail(),a.expressList(),a.getAppECStoreConfig(),a.setData({phone:h.appMethod.getUserInfo().phone||""})},a.getOrderDetail=function(e){var t=a;h.appMethod.getOrderDetail({data:{order_id:t.orderId,sub_shop_app_id:a.franchiseeId},success:function(e){t.applyId=e.data[0].form_data.refund_apply.id,t.setData({goodsList:e.data[0].form_data.refund_apply.refund_goods})}})},a.chooseImage=function(){var e=a,t=e.data.imagesArr;h.appMethod.chooseImage(function(a){var n={};n.imagesArr=t.concat(a),e.setData(n)},9)},a.deleteImage=function(e){var t=e.currentTarget.dataset.index,n=a.data.imagesArr,o={};n.splice(t,1),o.imagesArr=n,a.setData(o)},a.previewImage=function(e){var t=a,n=e.currentTarget.dataset.index;h.appMethod.previewImage({current:t.data.imagesArr[n],urls:t.data.imagesArr})},a.cancelRefund=function(){h.appMethod.turnBack()},a.stopPropagation=function(e){},a.inputRefundDes=function(e){a.setData({refundDes:e.target.value})},a.shipmentNumber=function(e){a.setData({shipment:e.target.value})},a.phoneNumber=function(e){a.setData({phone:e.target.value})},a.sureSubmit=function(){var e=a;h.appMethod.sendRequest({url:"/index.php?r=appShop/updateRefundApply",method:"post",data:{sub_shop_app_id:a.franchiseeId,apply_id:e.applyId,form_data:{express_code:e.data.expressCode,express_no:e.data.shipment,phone:e.data.phone,description:e.data.refundDes,img_url:e.data.imagesArr}},success:function(e){h.appMethod.turnBack()}})},a.expressList=function(){var e=a;h.appMethod.sendRequest({url:"/index.php?r=appShop/expressList",data:{page:-1},success:function(t){e.setData({expressList:t.data})}})},a.selectExpress=function(e){a.setData({expressCode:e[0]})},a.scanLogisticsNumber=function(){var e=a;h.appMethod.scanCode({success:function(t){e.setData({shipment:t.result})}})},a.getAppECStoreConfig=function(){h.appMethod.getAppECStoreConfig(function(e){a.setData({storeStyle:e.color_config,hasRecommendConfig:!!e.recommend_config})},a.franchiseeId)},document.title="填写退货信息",a}return(0,g.default)(t,e),(0,u.default)(t,[{key:"componentWillMount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,v.getCurrentPageQueryParams)();this.orderId=e.orderId,this.franchiseeId=e.franchisee,this.dataInitial()}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.state,a=(t.showGetUserInfo,t.goodsList),n=t.expressList,o=t.expressCode,s=t.shipment,c=t.phone,l=t.refundDes,d=t.imagesArr,u=t.storeStyle;return n&&(n=n.map(function(e){return{label:e.name,value:e.code}})),React.createElement("div",{className:"official-page goods-return-infor"},React.createElement("div",{className:"refund-box"},React.createElement("div",{className:"goods-detail-contain"},a.map(function(e,t){return React.createElement("div",{key:!0,className:"goods-detail-box"},React.createElement("img",{src:e.cover}),React.createElement("div",{className:"goods-detail-content"},React.createElement("div",{className:"goods-name"},1==e.is_seckill&&React.createElement("span",{className:"is-seckill"},"秒杀"),e.title),e.model_name&&React.createElement("div",{className:"goods-rules"},e.model_name)))})),React.createElement("div",{className:"logistics-box"},React.createElement("span",{className:"logistics-title"},"物流公司"),React.createElement("span",{className:"pull-right ico-moon icon-rightarrow"}),React.createElement("div",{className:"pull-right"},React.createElement(i.default,{cols:1,extra:"选择物流",data:n,value:[o],onChange:this.selectExpress},React.createElement(r.default.Item,null)))),React.createElement("div",{className:"logistics-box"},React.createElement("span",{className:"logistics-title"},"物流单号"),React.createElement("span",{className:"ico-moon icon-shopping-scan pull-right",onClick:this.scanLogisticsNumber}),React.createElement("input",{value:s,onChange:this.shipmentNumber,className:"pull-right",type:"text",placeholder:"请填写物流单号"})),React.createElement("div",{className:"logistics-box logistics-contact"},React.createElement("span",{className:"logistics-title"},"联系电话"),React.createElement("input",{onChange:this.phoneNumber,value:c,className:"pull-right",type:"text",placeholder:"请填写手机号码"})),React.createElement("div",{className:"refund-instruct"},React.createElement("div",{className:"refund-instruct-title"},"退款说明",React.createElement("span",null,"选填")),React.createElement("textarea",{className:"refund-des",value:l,onInput:this.inputRefundDes}),React.createElement("div",{className:"images-box"},d.map(function(t,a){return React.createElement("div",{key:!0},React.createElement("span",{className:"delete-image ico-moon icon-closes",onClick:e.deleteImage,"data-index":a}),React.createElement("img",{src:t,"data-index":a,onClick:e.previewImage}))}),React.createElement("div",{className:"add-pic",onClick:this.chooseImage},React.createElement("span",{className:"ico-moon icon-goods-add-image"}),React.createElement("div",null,"添加图片")))),React.createElement("div",{className:"refund-bottom"},React.createElement("div",{className:"refund-cancel",onClick:this.cancelRefund},"取消"),React.createElement("div",{className:"refund-submit",style:(0,v.convertLineStyleData)("background:"+u.theme),onClick:this.sureSubmit},"提交"))))}}]),t}(y.default);t.default=E},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(0),i=n(o),s=a(3),r=n(s),c=a(1),l=n(c),d=a(2),u=n(d),m=a(5),p=a(6),f=a(7),g=n(f),h=a(113);a(401);var v=function(e){function t(e){(0,i.default)(this,t);var a=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={deliveryList:[],centerLat:"",centerLng:"",markers:[{latitude:"",longitude:"",iconPath:"/images/delivery.png",width:20,height:20}],deliveryId:"",storeStyle:{}},a.callout={content:"离您最近的门店地址",fontSize:14,color:"#333333",borderRadius:4,bgColor:"#ffffff",padding:10,display:"ALWAYS",textAlign:"center"},a.franchiseeId="",a.selfLocation={},a.dataInitial=function(){a.getLocation(),a.getAppECStoreConfig()},a.getLocation=function(){var e=a;m.appMethod.getLocation({success:function(t){e.selfLocation={lat:t.latitude,log:t.longitude}},fail:function(){e.setData({statusFail:!0})},complete:function(){e.getSelfDeliveryList()}})},a.getSelfDeliveryList=function(){var e=a;m.appMethod.sendRequest({url:"/index.php?r=AppShop/getSelfDeliveryList",data:{sub_shop_app_id:e.franchiseeId},success:function(t){if(t.data.store_list_data){var a=t.data.store_list_data;if(e.data.statusFail){var n=a[0].latitude,o=a[0].longitude,i=a[0].latitude,s=a[0].longitude,r=a[0].id;e.data.deliveryId&&a.map(function(t){t.id==e.data.deliveryId&&(n=t.latitude,o=t.longitude,i=t.latitude,s=t.longitude,r=t.id)}),e.setData({showMap:!0,deliveryList:a,centerLat:n,centerLng:o,"markers[0].latitude":i,"markers[0].longitude":s,"markers[0].callout":"",deliveryId:r})}else e.calculationDistance(a)}}})},a.calculationDistance=function(e){console.log(1);for(var t=e,n=a,o=0;o<t.length;o++)t[o].distance=parseInt(m.appMethod.calculationDistanceByLatLng(n.selfLocation.lat,n.selfLocation.log,t[o].latitude,t[o].longitude));for(var i=0;i<t.length;i++)for(var s=i+1;s<t.length;s++)if(t[i].distance>t[s].distance){var r=t[i];t[i]=t[s],t[s]=r}a.setData({showMap:!0,deliveryList:t}),n.showCallout()},a.showCallout=function(){for(var e=a.data.deliveryList,t=a.data.deliveryId,n=a,o=-1,i=0;i<e.length;i++)e[i].id==t&&(o=i);o=o<0?0:o,a.setData({centerLat:e[o].latitude,centerLng:e[o].longitude,"markers[0].latitude":e[o].latitude,"markers[0].longitude":e[o].longitude,"markers[0].callout":0==o?n.callout:"",deliveryId:e[o].id})},a.selectDelivery=function(e){var t=e.currentTarget.dataset.index,n=a.data.deliveryList,o=a;a.setData({centerLat:n[t].latitude,centerLng:n[t].longitude,"markers[0].latitude":n[t].latitude,"markers[0].longitude":n[t].longitude,"markers[0].callout":0!=t||o.data.statusFail?"":o.callout,deliveryId:n[t].id})},a.sureDelivery=function(){for(var e=a,t=a.data.deliveryId,n=m.appMethod.getCurrentPages(),o=n[n.length-2],i=a.data.deliveryList,s=0;s<i.length;s++)if(i[s].id==t){var r={};e.isFranchisee?(r["mulShopsInfo."+e.franchiseeId+".selectDelivery"]=i[s],r["mulShopsInfo."+e.franchiseeId+".tostoreOrderType"]="",r["mulShopsInfo."+e.franchiseeId+".dateIndex"]="",r["mulShopsInfo."+e.franchiseeId+".tostoreDateTime"]="",r["mulShopsInfo."+e.franchiseeId+".tostoreWeekTime"]=""):(r.selectDelivery=i[s],r.tostoreOrderType="",r.dateIndex="",r.tostoreDateTime="",r.tostoreWeekTime=""),o.setData(r)}m.appMethod.turnBack()},a.getAppECStoreConfig=function(){m.appMethod.getAppECStoreConfig(function(e){a.setData({storeStyle:e.color_config})},a.franchiseeId)},document.title="选择自提点",a}return(0,u.default)(t,e),(0,r.default)(t,[{key:"componentWillMount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,p.getCurrentPageQueryParams)();this.isFranchisee=!!e.subAppId,this.franchiseeId=e.subAppId||e.franchiseeId||"",this.setData({deliveryId:e.deliveryId||""}),this.dataInitial()}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.state,a=t.centerLng,n=t.centerLat,o=t.controls,i=t.markers,s=t.showMap,r=t.deliveryList,c=t.storeStyle,l=t.statusFail,d=t.deliveryId;return console.log("this.state",this.state),React.createElement("div",{className:"official-page goods-delivery-list"},s&&React.createElement("div",{className:"map-wrap"},a&&n&&React.createElement(h.Map,{longitude:a,latitude:n,scale:"14",controls:o,markers:i})),React.createElement("div",{className:"delivery-list-box"},r.map(function(t,a){return React.createElement("div",{className:"delivery-list",key:t.id,onClick:e.selectDelivery,"data-index":a},React.createElement("span",{className:"ico-moon icon-goods-location"}),React.createElement("div",{className:"delivery-list-content"},React.createElement("div",{className:"delivery-list-title"},t.contact_name+" "+t.contact_phone),React.createElement("div",{className:"delivery-list-detail"},t.region_data.region_string+t.address_detail),!l&&React.createElement("div",null,0==a&&React.createElement("span",{className:"delivery-lately",style:(0,p.convertLineStyleData)("color:"+c.theme+";border-color:"+c.theme)},"离你最近"),React.createElement("span",{className:"delivery-list-distance"},"距离当前定位"+t.distance+"米"))),React.createElement("label",{style:(0,p.convertLineStyleData)(d==t.id?"color:"+c.theme:""),className:"delivery-check-box ico-moon icon-success-tip "+(d==t.id?"checked":"")}))})),React.createElement("div",{className:"sure-delivery",style:(0,p.convertLineStyleData)("background:"+c.theme),onClick:this.sureDelivery},"选为自提点"))}}]),t}(g.default);t.default=v},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(0),i=n(o),s=a(3),r=n(s),c=a(1),l=n(c),d=a(2),u=n(d),m=a(5),p=a(7),f=n(p);a(403);var g=function(e){function t(e){(0,i.default)(this,t);var a=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={alreadyGoods:[]},a.dataInitial=function(){a.getAlreadyGoods()},a.getAlreadyGoods=function(){var e=m.appMethod.getCurrentPages()[m.appMethod.getCurrentPages().length-2].data.orderInfo.goods_info,t=m.appMethod.getCurrentPages()[m.appMethod.getCurrentPages().length-2].data.orderInfo.refunded_price;a.setData({alreadyGoods:e,refundPrice:t})},document.title="已退商品",a}return(0,u.default)(t,e),(0,r.default)(t,[{key:"componentWillMount",value:function(){this.dataInitial()}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.state,t=e.alreadyGoods,a=e.refundPrice;return React.createElement("div",{className:"official-page goods-already-refunded"},React.createElement("div",{className:"already-goods-box"},t.map(function(e,t){return React.createElement(React.Fragment,{key:t},e.refunded_num>0&&React.createElement("div",{className:"goods-detail-box"},React.createElement("img",{src:e.cover}),React.createElement("div",null,React.createElement("div",{className:"goods-name"},e.is_group_buy_order&&0!=e.is_group_buy_order&&React.createElement("span",{className:"is-seckill"},"拼团"),1==e.is_seckill&&React.createElement("span",{className:"is-seckill"},"秒杀"),1==e.is_benefit_goods&&React.createElement("span",{className:"is-seckill"},"赠品"),e.goods_name),e.model_value&&React.createElement("div",{className:"goods-rules"},e.model_value),React.createElement("div",{className:"goods-price"},React.createElement("span",{className:"colorff7"},"¥"+e.price),React.createElement("span",{className:"pull-right"},"x "+e.refunded_num)))))}),React.createElement("div",{className:"already-price"},"退款金额",React.createElement("span",{className:"pull-right colorff7"},"¥"+a))))}}]),t}(f.default);t.default=g},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(9),i=n(o),s=a(26),r=n(s),c=a(0),l=n(c),d=a(3),u=n(d),m=a(1),p=n(m),f=a(2),g=n(f);a(27);var h=a(4),v=n(h),_=a(5),y=a(15),E=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(y),b=a(6),N=a(11),R=a(7),k=n(R);a(405);var w=function(e){function t(e){(0,l.default)(this,t);var a=(0,p.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={topNavBarData:{isDefault:0,title:"秒杀详情"},goodsId:"",goodsInfo:{},modelStrs:{},selectModelInfo:{models:[],stock:"",price:"",virtualPrice:"",buyCount:1,models_text:""},pageQRCodeData:{shareDialogShow:"100%",shareMenuShow:!1},commentArr:[],commentNums:[],commentExample:"",commentPage:1,commnetType:0,commentTotalPage:"",defaultPhoto:"",allStock:"",addToShoppingCartHidden:!0,ifAddToShoppingCart:!0,priceDiscountStr:"",page_hidden:!0,appointmentPhone:"",detailCommetType:"detail",carouselCurrentIndex:1,imageOrVideo:"image",storeStyle:""},a.onReachBottom=function(){"comment"==a.data.detailCommetType&&a.data.commentPage<=a.data.commentTotalPage&&a.getAssessList(a.data.commentType,a.data.commentPage,1)},a.dataInitial=function(){var e=a;a.data.franchiseeId||a.getAppECStoreConfig();var t={};t=1==a.data.seckillType?{data_id:a.data.goodsId,sub_shop_app_id:a.data.franchiseeId,is_seckill:1,seckill_activity_arr:{seckill_activity_id:a.data.seckill_activity_id,seckill_activity_time_id:a.data.seckill_activity_time_id},is_seckill_activity:a.data.seckillType}:{data_id:a.data.goodsId,sub_shop_app_id:a.data.franchiseeId,is_seckill:1,is_seckill_activity:a.data.seckillType},_.appMethod.sendRequest({url:"/index.php?r=AppShop/getGoods",data:t,method:"post",success:e.modifyGoodsDetail,complete:function(){e.setData({page_hidden:!1})}})},a.onShareAppMessage=function(){a.setData({pageQRCodeData:{shareDialogShow:"100%",shareMenuShow:!1}});var e=a,t=a.data.goodsId,n=a.data.contact,o=a.data.franchiseeId,i=a.data.cart_num||"",s=a.data.isSeckill,r=a.data.goodsInfo.share_title,c=a.data.goodsInfo.share_image?a.data.goodsInfo.share_image:a.data.goodsInfo.img_urls&&a.data.goodsInfo.img_urls[0]?a.data.goodsInfo.img_urls[0]:a.data.goodsInfo.cover,l=s?"&goodsType=seckill":"",d=_.appMethod.globalData.PromotionUserToken?"&user_token="+_.appMethod.globalData.PromotionUserToken:"",u="/seckill/pages/seckillDetail/seckillDetail?id="+t+"&contact="+n+(o?"&franchisee="+o+"&cart_num="+i:"")+l+d+"&seckill_activity_id="+e.data.seckill_activity_id+"&seckill_activity_time_id="+e.data.seckill_activity_time_id+"&seckillType="+e.data.seckillType;return _.appMethod.shareAppMessage({path:u,title:r,imageUrl:c,success:function(t){_.appMethod.showToast({title:"转发成功",duration:500}),_.appMethod.sendRequest({hideLoading:!0,url:"/index.php?r=appShop/getIntegralLog",data:{add_time:t},success:function(t){0==t.status&&t.data&&e.setData({rewardPointObj:{showModal:!0,count:t.data,callback:""}})}})}})},a.goToMyOrder=function(){var e=a.data.franchiseeId,t="/eCommerce/pages/myOrder/myOrder?goodsType="+a.data.goodsInfo.goods_type+"&currentIndex=0"+(e?"&franchisee="+e:"");_.appMethod.turnToPage(t,!0)},a.goToShoppingCart=function(){var e=a.data.franchiseeId,t="/eCommerce/pages/shoppingCart/shoppingCart"+(e?"?franchisee="+e:"");_.appMethod.turnToPage(t,!0)},a.goToHomepage=function(){var e=a,t=e.data.franchiseeId,n=_.appMethod.getChainId();if(t&&t!=n){var o=_.appMethod.getCurrentPages(),i=o[o.length-2];i&&"franchisee/pages/goodsMore/goodsMore"==i.route?_.appMethod.turnBack({delta:2}):E.clickEventHandler["to-franchisee"]({"franchisee-id":t})}else{var s=_.appMethod.getHomepageRouter();_.appMethod.reLaunch({url:"/pages/"+s+"/"+s})}},a.goToCommentPage=function(){var e=a.data.franchiseeId,t="/eCommerce/pages/goodsComment/goodsComment?detail="+a.data.goodsId+(e?"&franchisee="+e:"");_.appMethod.turnToPage(t)},a.goodsCoverOnload=function(e){},a.modifyGoodsDetail=function(e){var t,n,o,i=a,s=e.data[0].form_data,r=s.appointment_info&&s.appointment_info.unit_type||"",c=(s.description,[]),l=[],d="",u={},m="",p=0,f="",g="";a.setData({unitType:r,appointmentDesc:s.appointment_info&&s.appointment_info.appointment_desc?s.appointment_info.appointment_desc.replace(/<br \/>/g,"\r\n"):"更多优惠资讯详情请联系商家!",appointmentPhone:s.appointment_info&&s.appointment_info.appointment_phone?s.appointment_info.appointment_phone:"",displayComment:s.appointment_info&&"1"==s.appointment_info.display_comment?s.appointment_info.display_comment:""});for(var h in s.model)if(h){var v=s.model[h];if(c.push(v),v&&v.subModelName){if("1"==h&&"1"==s.goods_type)for(var y in v.subModelName){var E=v.subModelName[y].split("-"),b=v.subModelName[y].substring(6,8),N=b-24>=10?b-24:"0"+(b-24);v.subModelName[y]=b>=24?E[0]+"-次日"+N+":"+E[1].split(":")[1]:E[0]+"-当日"+E[1]}if("1"==s.goods_type&&"0"==v.id)for(var y in v.subModelName)v.subModelName[y]=v.subModelName[y]+(s.appointment_info&&s.appointment_info.unit);u[v.id]=v.subModelName.join("、"),l.push(v.subModelId[0]),d=l.toString(),f+="“"+v.subModelName[0]+"” "}}if(s.model_items.length)for(var R=s.model_items,k=0;k<R.length;k++){var w=+R[k].seckill_price,x=R[k].model;s.seckill_highPrice=s.seckill_highPrice>=w?s.seckill_highPrice:w,s.seckill_lowPrice=s.seckill_lowPrice<=w?s.seckill_lowPrice:w,p+=Number(R[k].seckill_stock),x==d&&(n=R[k].seckill_price,t=R[k].seckill_stock,o=R[k].id,g=R[k].img_url)}else n=s.seckill_price,t=s.seckill_stock,p=s.seckill_stock,g=s.cover;s.model=c,0!=Number(s.max_can_use_integral)&&(m="（积分可抵扣"+Number(s.max_can_use_integral)/100+"元）");var C=s.goods_express_data.express_fee_sort;if(1==C.length){var D=C[0];s.express_fee=0==D?"包邮":D+"元"}else s.express_fee=C[0]+"~"+C[1]+"元";1==s.is_seckill&&(s.downCount={hours:"00",minutes:"00",seconds:"00"},0==s.seckill_start_state?i.downcount=_.appMethod.beforeSeckillDownCount(s,i,"goodsInfo"):1==s.seckill_start_state&&(i.downcount=_.appMethod.duringSeckillDownCount(s,i,"goodsInfo")));var S=new Date((new Date).toLocaleDateString()).getTime()/1e3,I=S+86400,M=I+86400,T=new Date(1e3*s.seckill_start_timestamp),P=T.getMonth()+1,L=T.getDate(),A=T.getHours(),F=T.getMinutes();if(s.seckill_startTime="",s.seckill_start_timestamp<=I?s.startDay=1:s.seckill_start_timestamp>I&&s.seckill_start_timestamp<=M?(s.startDay=2,s.seckill_startTime="00"==F?"明日"+A+"点整开抢":"00"!=F&&F<10?"明日"+A+":0"+F+"开抢":"明日"+A+":"+F+"开抢"):s.seckill_start_timestamp>M&&(s.startDay=2,s.seckill_startTime="00"==F?P+"月"+L+"日"+A+"点整开抢":"00"!=F&&F<10?P+"月"+L+"日"+A+":0"+F+"开抢":P+"月"+L+"日"+A+":"+F+"开抢"),1==a.data.seckillType)for(var O=0;O<s.pick_up_type.length;O++)4==s.pick_up_type[O]&&s.pick_up_type.splice(O,1);i.setData({goodsInfo:s,modelStrs:u,"selectModelInfo.models":l||"","selectModelInfo.stock":t||"","selectModelInfo.price":n||"","selectModelInfo.modelId":o||"","selectModelInfo.models_text":f||"","selectModelInfo.imgurl":g||"","selectModelInfo.virtualPrice":"",allStock:p||"",priceDiscountStr:m||""}),i.getAssessList(0,1)},a.showBuyDirectly=function(){if(a.data.isSeckill&&1!=a.data.goodsInfo.seckill_start_state)return void _.appMethod.showModal({content:"当前秒杀商品不在秒杀时间范围内，不能立即购买"});a.setData({addToShoppingCartHidden:!1,ifAddToShoppingCart:!1,imageOrVideo:"image"})},a.showAddToShoppingCart=function(){if(a.data.isSeckill&&2==a.data.goodsInfo.seckill_start_state)return void _.appMethod.showModal({content:"当前秒杀已结束，不能加入购物车"});a.setData({addToShoppingCartHidden:!1,ifAddToShoppingCart:!0,imageOrVideo:"image"})},a.hiddeAddToShoppingCart=function(){a.setData({addToShoppingCartHidden:!0})},a.selectSubModel=function(e){var t=e.target.dataset,n=t.modelIndex,o=t.submodelIndex,i={},s=a.data.selectModelInfo.models,r=a.data.goodsInfo.model,c="";s[n]=r[n].subModelId[o];for(var l=0;l<s.length;l++)for(var d=r[l].subModelId,u=0;u<d.length;u++)s[l]==d[u]&&(c+="“"+r[l].subModelName[u]+"” ");i["selectModelInfo.models"]=s,i["selectModelInfo.models_text"]=c,a.setData(i),a.resetSelectCountPrice()},a.resetSelectCountPrice=function(){for(var e=a,t=a.data.selectModelInfo.models.join(","),n=a.data.goodsInfo.model_items,o={},i=n.length-1;i>=0;i--)if(n[i].model==t){e.data.isSeckill?(o["selectModelInfo.stock"]=n[i].seckill_stock,o["selectModelInfo.price"]=n[i].seckill_price,o["selectModelInfo.modelId"]=n[i].id,o["selectModelInfo.imgurl"]=n[i].img_url,o.seckill_activity_goods_id=n[i].seckill_activity_goods_id):(o["selectModelInfo.stock"]=n[i].stock,o["selectModelInfo.price"]=n[i].price,o["selectModelInfo.modelId"]=n[i].id,o["selectModelInfo.imgurl"]=n[i].img_url,o["selectModelInfo.virtualPrice"]=n[i].virtual_price);break}a.setData(o)},a.clickMinusButton=function(e){var t=a.data.selectModelInfo.buyCount;t<=1||a.setData({"selectModelInfo.buyCount":t-1})},a.clickPlusButton=function(e){var t=a.data.selectModelInfo,n=a.data.goodsInfo,o=t.buyCount;return o>=t.stock?void _.appMethod.showModal({content:"购买数量不能大于库存"}):a.data.isSeckill&&o>=n.seckill_buy_limit?void _.appMethod.showModal({content:"购买数量不能大于秒杀限购数量"}):void a.setData({"selectModelInfo.buyCount":o+1})},a.sureAddToShoppingCart=function(){var e=a,t={};t=0==a.data.seckillType?{goods_id:a.data.goodsId,model_id:a.data.selectModelInfo.modelId||"",num:a.data.selectModelInfo.buyCount,sub_shop_app_id:a.data.franchiseeId||"",is_seckill:1}:{goods_id:a.data.goodsId,model_id:a.data.selectModelInfo.modelId||"",num:a.data.selectModelInfo.buyCount,sub_shop_app_id:a.data.franchiseeId||"",is_seckill:1,form_data:{seckill_activity_id:a.data.seckill_activity_id,seckill_activity_time_id:a.data.seckill_activity_time_id,seckill_activity_goods_id:a.data.seckill_activity_goods_id}},_.appMethod.sendRequest({hideLoading:!0,url:"/index.php?r=AppShop/addCart",data:t,method:"post",success:function(t){_.appMethod.showToast({title:"添加成功",icon:"success"}),setTimeout(function(){e.hiddeAddToShoppingCart()},1e3)}})},a.buyDirectlyNextStep=function(e){var t=a.data.franchiseeId,n=a,o={};o=0==a.data.seckillType?{goods_id:a.data.goodsId,model_id:a.data.selectModelInfo.modelId||"",num:a.data.selectModelInfo.buyCount,sub_shop_app_id:t||"",is_seckill:1}:{goods_id:a.data.goodsId,model_id:a.data.selectModelInfo.modelId||"",num:a.data.selectModelInfo.buyCount,sub_shop_app_id:t||"",is_seckill:1,form_data:{seckill_activity_id:a.data.seckill_activity_id,seckill_activity_time_id:a.data.seckill_activity_time_id,seckill_activity_goods_id:a.data.seckill_activity_goods_id}},_.appMethod.sendRequest({url:"/index.php?r=AppShop/addCart",data:o,method:"post",success:function(e){var a=[e.data],o="/seckill/pages/previewSeckillOrder/previewSeckillOrder?cart_arr="+encodeURIComponent(a)+"&secType="+n.data.seckillType;t&&(o+="&franchisee="+t),n.hiddeAddToShoppingCart(),_.appMethod.turnToPage(o)}})},a.makeAppointment=function(){var e=a.data.franchiseeId,t=a.data.modelStrs[0]&&a.data.modelStrs[0].substring(a.data.modelStrs[0].length-1),n="分"==t?1:"时"==t?2:3,o="/eCommerce/pages/makeAppointment/makeAppointment?detail="+a.data.goodsId+(e?"&franchisee="+e:"")+"&param="+n;_.appMethod.turnToPage(o)},a.inputBuyCount=function(e){var t=+e.target.value,n=a.data.selectModelInfo,o=a.data.goodsInfo,i=+n.stock;t>=i&&(t=i,_.appMethod.showModal({content:"购买数量不能大于库存"})),a.data.isSeckill&&t>=+o.seckill_buy_limit&&(t=o.seckill_buy_limit,_.appMethod.showModal({content:"购买数量不能大于秒杀限购数量"})),a.setData({"selectModelInfo.buyCount":+t})},a.showQRCodeComponent=function(){var e=a,t=a.data.goodsInfo,n=_.appMethod.createAnimation({timingFunction:"ease",duration:400});_.appMethod.sendRequest({url:"/index.php?r=AppDistribution/DistributionShareQRCode",data:{obj_id:e.data.goodsId,text:t.share_title||t.title,price:t.highPrice>t.lowPrice&&0!=t.lowPrice?t.lowPrice+" ~ "+t.highPrice:t.price,goods_img:t.img_urls?t.img_urls[0]:t.cover,sub_shop_id:e.data.franchiseeId,type:0==e.data.seckillType?5:21,seckill_activity_arr:{seckill_activity_id:1==e.data.seckillType?a.data.seckill_activity_id:"",seckill_activity_time_id:1==e.data.seckillType?a.data.seckill_activity_time_id:""}},method:"post",success:function(a){n.bottom("0").step(),e.setData({"pageQRCodeData.shareDialogShow":0,"pageQRCodeData.shareMenuShow":!0,"pageQRCodeData.goodsInfo":a.data,"pageQRCodeData.goodsInfo.isSeckill":1,"pageQRCodeData.goodsInfo.seckill_price":t.seckill_price,"pageQRCodeData.animation":n.export()})}})},a.showShareMenu=function(){_.appMethod.showShareMenu()},a.makePhoneCall=function(){_.appMethod.makePhoneCall(a.data.appointmentPhone)},a.hideShareMenu=function(){a.setData({hideShareMenu:!0})},a.showPageCode=function(){},a.oneSelectDetailCommet=function(e){a.setData({detailCommetType:e.target.dataset.type})},a.getAssessList=function(e,t,n){var o=a;_.appMethod.getAssessList({method:"post",data:{goods_id:o.data.goodsId,idx_arr:{idx:"level",idx_value:e},page:t,page_size:20,sub_shop_app_id:a.data.franchiseeId},success:function(e){var t=e.data;n&&(t=o.data.commentArr.concat(t)),o.setData({commentArr:t,commentNums:e.num,commentPage:o.data.commentPage+1,commentExample:e.data[0]||"",commentTotalPage:e.total_page,displayComment:"0"===o.data.goodsInfo.goods_type?!(+e.num[0]>0):o.data.goodsInfo.appointment_info&&"1"==o.data.goodsInfo.appointment_info.display_comment?o.data.goodsInfo.appointment_info.display_comment:""})}})},a.clickCommentLabel=function(e){var t=e.target.dataset.type,n={};n.commentPage=1,n.commnetType=t,a.setData(n),a.getAssessList(t,1)},a.clickPlusImages=function(e){_.appMethod.previewImage({current:e.currentTarget.dataset.src,urls:e.currentTarget.dataset.srcarr})},a.carouselIndex=function(e){a.setData({carouselCurrentIndex:e+1})},a.toCouponList=function(){_.appMethod.turnToPage("/eCommerce/pages/couponReceiveListPage/couponReceiveListPage")},a.changeImageOrVideo=function(e){a.setData({videoPoster:!1,imageOrVideo:e.currentTarget.dataset.type})},a.toRecommendGoodsDetail=function(e){_.appMethod.turnToGoodsDetail(e)},a.getAppECStoreConfig=function(){_.appMethod.getAppECStoreConfig(function(e){a.setData({storeStyle:e.color_config})})},a.startPlayVideo=function(){var e=_.appMethod.createVideoContext("carousel-video");a.setData({videoPoster:!0}),e.play()},a.formSubmitRemind=function(e){var t=a,n="",o=JSON.parse(e.currentTarget.dataset.goods);"the formId is a mock one"!=e.target.formId&&(n=e.target.formId);var i=new Date((new Date).toLocaleDateString()).getTime()/1e3;if(o.seckill_start_timestamp>i+604800)return void _.appMethod.showModal({content:"请于开抢前7天来设置哦"});var s=e.currentTarget.dataset,r={};_.appMethod.sendRequest({url:"/index.php?r=AppShop/setActivityGoodsCare",method:"post",data:{data_id:o.id,activity_type:1,activity_id:o.seckill_activity_id,seckill_activity_arr:{seckill_activity_time_id:o.seckill_activity_time_id,form_id:n},is_deleted:s.is_deleted},success:function(e){e.status||(0==s.is_deleted?(_.appMethod.showModal({title:"提示",content:"开抢前3分钟提醒你哦",showCancel:!1}),r["goodsInfo.is_seckill_activity_care"]=1,r["goodsInfo.seckill_activity_care"]=o.seckill_activity_care+1):(_.appMethod.showModal({title:"提示",content:"提醒已取消，到时你会抢不到哦!",showCancel:!1}),r["goodsInfo.is_seckill_activity_care"]=0,r["goodsInfo.seckill_activity_care"]=o.seckill_activity_care-1),t.setData(r))}})},a.addFavoriteGoods=function(e){var t=a;_.appMethod.sendRequest({url:"/index.php?r=AppShop/addFavoriteGoods",data:{form_id:e.target.formId,goods_id:t.data.goodsId,sub_shop_app_id:t.data.franchiseeId},success:function(e){t.setData({"goodsInfo.is_favorite":1})},complete:function(){_.appMethod.showToast({title:"收藏成功!",image:"/images/favorites.png"})}})},a.deleteFavoriteGoods=function(){var e=a;_.appMethod.sendRequest({url:"/index.php?r=AppShop/deleteFavoriteGoods",method:"post",data:{goods_id_arr:[e.data.goodsId],sub_shop_app_id:e.data.franchiseeId},success:function(t){e.setData({"goodsInfo.is_favorite":0})},complete:function(){_.appMethod.showToast({title:"取消收藏!",image:"/images/cancel-favorites.png"})}})},document.title="秒杀详情",a}return(0,g.default)(t,e),(0,u.default)(t,[{key:"componentWillMount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,b.getCurrentPageQueryParams)(),t=e.id||e.detail,a=e.seckill_activity_id||e.sec_act_id||0,n=e.seckill_activity_time_id||e.sec_t_id||0,o=e.seckillType||e.secType||0,i=e.contact||"",s=e.franchisee||"",r=e.cart_num||0,c=_.appMethod.getDefaultPhoto(),l=e.goodsType||0,d=e.user_token||"",u=e.hidestock||"",m=e.isShowVirtualPrice||"";this.setData({goodsId:t,seckill_activity_id:a,seckill_activity_time_id:n,seckillType:o,contact:i,defaultPhoto:c,franchiseeId:s,cartGoodsNum:r,goodsType:l,isSeckill:!0,hidestock:"true"==u,isShowVirtualPrice:"true"==m,"topNavBarData.totalHeight":_.appMethod.globalData.topNavBarHeight||0,sessionFrom:e.franchisee||_.appMethod.getAppId()||""}),this.dataInitial(),d&&(_.appMethod.globalData.PromotionUserToken=d)}},{key:"componentWillUnmount",value:function(){this.downcount&&this.downcount.clear()}},{key:"render",value:function(){var e,t=this,a=this.state,n=(a.pageQRCodeData,a.rewardPointObj,a.shareGiftsObj,a.collectGiftsObj,a.collectGetObj,a.showGetUserInfo,a.topNavBarData),o=a.page_hidden,s=a.goodsInfo,c=a.cartGoodsNum,l=a.imageOrVideo,d=a.videoPoster,u=a.storeStyle,m=a.modelStrs,p=a.hidestock,f=a.allStock,g=a.appointmentDesc,h=a.displayComment,_=a.commentNums,y=a.commentExample,E=a.defaultPhoto,R=a.wxParseDescription,k=a.isSeckill,w=a.franchiseeId,x=a.sessionFrom,C=a.carouselCurrentIndex,D=a.detailCommetType,S=a.commnetType,I=a.commentArr,M=a.addToShoppingCartHidden,T=a.selectModelInfo,P=a.isShowVirtualPrice,L=a.ifAddToShoppingCart;return v.default.createElement("div",{className:"official-page seckill-detail"},v.default.createElement("div",{className:"goods-detail-wrap",hidden:o},v.default.createElement("div",{className:"goods-detail-nav",style:(0,b.convertLineStyleData)("top:"+n.totalHeight+"px;")},v.default.createElement("div",null,(!s.detail_type||0==s.detail_type)&&v.default.createElement("div",{className:"pull-right ico-moon icon-notebook",onClick:this.goToMyOrder}),(!s.detail_type||0==s.detail_type)&&v.default.createElement("div",{className:"pull-right ico-moon icon-store2",onClick:this.goToHomepage},!!+c&&0!=c&&v.default.createElement("div",{className:"goods-detail-cart-num"},c)),2!=s.detail_type&&v.default.createElement("div",{className:"pull-right ico-moon icon-new-share",onClick:this.showQRCodeComponent}))),(!s.detail_type||0==s.detail_type)&&v.default.createElement("div",{className:"goods-detail-content oldStyle"},v.default.createElement("div",{className:"goods-detail-section"},"image"==l&&v.default.createElement("div",{className:"image-carousel-container"},s.img_urls?v.default.createElement("div",{className:"slick-carousel-container"},v.default.createElement(r.default,{dots:!1,infinite:!0,autoplay:!0,autoplayInterval:5e3,afterChange:this.carouselIndex},s.img_urls.map(function(e,a){return v.default.createElement("div",{key:a},v.default.createElement("img",{"data-src":e,"data-srcarr":s.img_urls,onClick:t.clickPlusImages,className:"slide-image",src:e,onLoad:function(){window.dispatchEvent(new Event("resize"))}}))}))):v.default.createElement("div",{className:"goods-cover-container"},v.default.createElement("img",{"data-src":s.cover,onClick:this.clickPlusImages,src:s.cover,mode:"aspectFill"})),s.video_url&&v.default.createElement("div",{className:"image-video-menu"},v.default.createElement("span",{className:"image"==l?"active":"","data-type":"image",onClick:this.changeImageOrVideo},"图片"),v.default.createElement("span",{className:"video"==l?"active":"","data-type":"video",onClick:this.changeImageOrVideo},"视频"))),s.video_url&&"video"==l&&v.default.createElement("div",{className:"video-carousel-container"},v.default.createElement("video",{src:s.video_url,id:"carousel-video",hidden:!d},s.video_url&&v.default.createElement(CoverView,{className:"image-video-menu"},v.default.createElement(CoverView,{className:"image"==l?"active":"","data-type":"image",onClick:this.changeImageOrVideo},"图片"),v.default.createElement(CoverView,{className:"video"==l?"active":"","data-type":"video",onClick:this.changeImageOrVideo},"视频"))),v.default.createElement("div",{className:"videoele-cover-view",hidden:d},v.default.createElement("div",{className:"videoele-poster-wrap"},v.default.createElement("img",{className:"videoele-poster",src:s.video_img,mode:"scaleToFill"})),v.default.createElement("div",{className:"videoele-play-icon",onClick:this.startPlayVideo},v.default.createElement("img",{className:"videoele-play-image",src:"http://cdn.jisuapp.cn/static/webapp/images/play.png",mode:"scaleToFill"})),v.default.createElement("div",{className:"image-video-menu"},v.default.createElement("span",{className:"image"==l?"active":"","data-type":"image",onClick:this.changeImageOrVideo},"图片"),v.default.createElement("span",{className:"video"==l?"active":"","data-type":"video",onClick:this.changeImageOrVideo},"视频")))),v.default.createElement("div",{className:"goods-seckill",style:(0,b.convertLineStyleData)("background:linear-gradient(to right,"+(u.theme?u.theme:"#FF7100")+","+(u.secondary?u.secondary:"#FFAC0C")+");")},v.default.createElement("div",{className:"goods-seckill-left"},v.default.createElement("div",{className:"goods-seckill-current"},v.default.createElement("div",{className:"goods-current-price"},v.default.createElement("span",{className:"seckill-price-unit"},"¥"),v.default.createElement("span",{className:"goods-seckill-price"},s.seckill_price)),v.default.createElement("div",{className:"goods-seckill-original"},v.default.createElement("div",{className:"goods-original-price"},"¥"+s.price,v.default.createElement("span",{className:"goods-original-price-line"})),v.default.createElement("div",{className:"seckill-attention"},s.seckill_activity_care+"人关注")))),v.default.createElement("div",{className:"goods-seckill-right "+(2==s.seckill_start_state?"seckill-end":"")},v.default.createElement("div",{className:"countdown"},0==s.seckill_start_state&&1==s.startDay?v.default.createElement("label",null,"距开始还剩"):0==s.seckill_start_state&&2==s.startDay?v.default.createElement("label",null,v.default.createElement("span",{className:"ico-moon icon-seckill-detail-alarm"}),"开抢时间"):1==s.seckill_start_state?v.default.createElement("label",null,"距结束还剩"):2==s.seckill_start_state&&v.default.createElement("label",null,"已结束"),(1==s.seckill_start_state||0==s.seckill_start_state&&1==s.startDay)&&v.default.createElement(v.default.Fragment,null,s.downCount.days&&v.default.createElement("span",{className:"days"},s.downCount.days+"天"),v.default.createElement("span",{className:"hours countdown-text",style:(0,b.convertLineStyleData)("color:"+u.theme)},s.downCount.hours),":",v.default.createElement("span",{className:"minutes countdown-text",style:(0,b.convertLineStyleData)("color:"+u.theme)},s.downCount.minutes),":",v.default.createElement("span",{className:"seconds countdown-text",style:(0,b.convertLineStyleData)("color:"+u.theme)},s.downCount.seconds)),0==s.seckill_start_state&&2==s.startDay&&v.default.createElement("div",{className:"seckill-start-time",style:(0,b.convertLineStyleData)("color:"+u.theme)},s.seckill_startTime)))),v.default.createElement("div",{className:"goods-header"},v.default.createElement("div",{className:"goods-title"},v.default.createElement("span",{className:"ico-moon icon-seckill-alarm cover-icon-seckill-alarm",style:(0,b.convertLineStyleData)("color:"+u.theme)}),s.title),s.model_items&&!!s.model_items.length&&v.default.createElement("div",{className:"goods-models"},s.model.map(function(e,t){return v.default.createElement("div",{className:"goods-model-item",key:e.id,hidden:!e.subModelName},v.default.createElement("span",{className:"goods-model-cate"},e.name),v.default.createElement("span",{className:"goods-model-detail"},m[e.id]))})),0==s.goods_type&&v.default.createElement("div",{className:"goods-other-info"},v.default.createElement("div",null,"运费:"+(s.express_fee||"包邮")),!p&&v.default.createElement("div",null,"库存:"+(f||s.stock))),0==s.goods_type&&v.default.createElement("div",{className:"goods-other-info"},v.default.createElement("label",null,"取货方式"),v.default.createElement("div",{className:"address-pick-up"},s.pick_up_type.map(function(e,t){return v.default.createElement("div",{key:e},v.default.createElement("span",{style:(0,b.convertLineStyleData)("color:"+u.theme),className:"ico-moon icon-goods-support-delivery suporrt"}),v.default.createElement("span",null,1==e?"快递":2==e?"同城":3==e?"自提":"点餐"))}))))),1==s.goods_type&&v.default.createElement("div",{className:"goods-appointment"},v.default.createElement("div",{className:"appointment-instructions",style:(0,b.convertLineStyleData)("color:#666;")},"预约说明"),v.default.createElement("span",{className:"appointment-remarks",style:(0,b.convertLineStyleData)("color:#999;word-break:break-all;")},g)),v.default.createElement("div",{style:(0,b.convertLineStyleData)("padding: 20rpx;text-align:center;background:#f4f4f4;color:#b2b2b2;font-size:24rpx;"),hidden:h},v.default.createElement("div",{className:"line"}),v.default.createElement("div",{className:"ico-moon icon-good-comment goods-ico"}),v.default.createElement("div",{style:(0,b.convertLineStyleData)("display: inline-block;vertical-align:middle;margin-right:4px;")},"评价"),v.default.createElement("div",{className:"line"})),v.default.createElement("div",{className:"goods-detail-section",hidden:h},v.default.createElement("div",{className:"comment-title"},v.default.createElement("div",{style:(0,b.convertLineStyleData)("border-bottom: 1px solid #f4f4f4;padding-bottom:20rpx;")},"评价 ("+(_[0]||0)+")")),v.default.createElement("div",{className:"block-item"},y&&v.default.createElement("div",null,v.default.createElement("div",{className:"comment-item"},v.default.createElement("div",null,v.default.createElement("img",{className:"comment-user-photo",src:y.buyer_headimgurl||E}),v.default.createElement("span",{className:"commentPersonName"},y.buyer_nickname)),v.default.createElement("div",{className:"comment-date"},y.add_time),v.default.createElement("div",{className:"comment-content"},y.assess_info.content),y.assess_info.has_img&&v.default.createElement("div",{className:"comPage-comment-pics"},y.assess_info.img_arr.map(function(e,a){return v.default.createElement("img",{src:e,key:a,"data-src":e,"data-srcarr":y.assess_info.img_arr,onClick:t.clickPlusImages})}))),v.default.createElement("div",{style:(0,b.convertLineStyleData)("text-align:center;")},v.default.createElement("button",{className:"btn lookAllComments",onClick:this.goToCommentPage},"查看全部评价"))))),v.default.createElement("div",{style:(0,b.convertLineStyleData)("padding: 20rpx;text-align:center;background:#f4f4f4;color:#b2b2b2;font-size:24rpx;")},v.default.createElement("div",{className:"line"}),v.default.createElement("div",{className:"ico-moon icon-good-detail goods-ico"}),v.default.createElement("div",{style:(0,b.convertLineStyleData)("display: inline-block;vertical-align:middle;margin-right:4px;")},"详情"),v.default.createElement("div",{className:"line"})),v.default.createElement("div",{className:"goods-detail-section"},v.default.createElement("div",{className:"comment-title"},v.default.createElement("div",{style:(0,b.convertLineStyleData)("border-bottom: 1px solid #f4f4f4;padding-bottom:20rpx;")},"产品详情")),v.default.createElement("div",{className:"goods-details rich-text",dangerouslySetInnerHTML:{__html:s.description}})),s.recommend_info&&!!s.recommend_info.length&&v.default.createElement("div",{className:"goods-recommend"},v.default.createElement("div",{className:"two-recommend"},"店铺推荐"),v.default.createElement(N.ScrollView,{className:"recommend-content","scroll-x":"true"},s.recommend_info.map(function(e,a){return v.default.createElement("div",{className:"recommend-goods",key:e.form_data.id,onClick:t.toRecommendGoodsDetail,"data-id":e.form_data.id,"data-goods-type":e.form_data.goods_type},v.default.createElement("img",{src:e.form_data.cover}),v.default.createElement("div",{className:"recommend-goods-title"},e.form_data.title),v.default.createElement("span",{className:"recommend-goods-price"},"¥"+e.form_data.price))})))),2!=s.detail_type&&v.default.createElement("div",{className:"goods-bottom-opt"},v.default.createElement(v.default.Fragment,null,v.default.createElement("div",{className:"flex-sub-box-3"},v.default.createElement("div",{className:"goods-opt-item flex-sub-box-"+(k||w?"2":"3"),onClick:this.goToShoppingCart},v.default.createElement("div",{className:"bottom-border-right"},v.default.createElement("span",{className:"ico-moon icon-new-goods-shopping"}),v.default.createElement("div",{className:"margig-top-2"},"购物车"))),!k&&!w&&v.default.createElement("div",{className:"form-contain goods-opt-item flex-sub-box-3"},v.default.createElement("form",null,v.default.createElement("button",{type:"button",onClick:1==s.is_favorite?this.deleteFavoriteGoods:this.addFavoriteGoods},v.default.createElement("div",{className:"bottom-border-right"},v.default.createElement("span",{style:(0,b.convertLineStyleData)(1==s.is_favorite?"color:"+u.theme:""),className:"ico-moon icon-"+(1==s.is_favorite?"collect-solid":"goods-detail-favorites")}),v.default.createElement("div",null,"收藏"))))),v.default.createElement("div",{className:"goods-opt-item flex-sub-box-"+(k||w?"2":"3")},v.default.createElement("div",{className:"ico-moon icon-service2"}),v.default.createElement("div",null,"客服"))),100!=s.seckill_progress&&2!=s.seckill_start_state&&v.default.createElement("div",{className:"flex-sub-box-3"},v.default.createElement("label",{style:(0,b.convertLineStyleData)("background:"+u.secondary+";color:"+("#ACD3FA"==u.secondary||"#FFCFDF"==u.secondary||"#ffffff"==u.secondary||"#DFF3ED"==u.secondary||"#FAF7ED"==u.secondary?u.theme:"")),className:"btn addToShoppingCart "+(2==s.seckill_start_state?"disabled":""),onClick:this.showAddToShoppingCart},"加入购物车")),100!=s.seckill_progress&&1==s.seckill_start_state&&v.default.createElement("div",{className:"flex-sub-box-3"},v.default.createElement("label",{className:"btn btn-orange buy-goods-directly "+(1!=s.seckill_start_state?"disabled":""),style:(0,b.convertLineStyleData)("background:"+u.theme+";"),onClick:this.showBuyDirectly},"立即购买")),0==s.seckill_start_state&&0==s.is_seckill_activity_care&&v.default.createElement("div",{className:"flex-sub-box-3"},v.default.createElement("form",null,v.default.createElement("button",{type:"button",className:"form-button","data-goods":JSON.stringify(s),"data-is_deleted":"0",onClick:this.formSubmitRemind},v.default.createElement("label",{className:"btn btn-orange buy-goods-directly "+(1!=s.seckill_start_state?"disabled":""),style:(0,b.convertLineStyleData)("background:"+u.theme+";")},"设置提醒")))),0==s.seckill_start_state&&1==s.is_seckill_activity_care&&v.default.createElement("div",{className:"flex-sub-box-3"},v.default.createElement("form",null,v.default.createElement("button",{type:"button",className:"form-button","data-goods":JSON.stringify(s),"daga-is_deleted":"1",onClick:this.formSubmitRemind},v.default.createElement("label",{className:"btn btn-orange buy-goods-directly "+(1!=s.seckill_start_state?"disabled":""),style:(0,b.convertLineStyleData)("background:"+u.theme+";")},"取消提醒")))),100==s.seckill_progress&&1==s.seckill_start_state&&v.default.createElement("div",{className:"flex-sub-box-6"},v.default.createElement("label",{className:"btn btn-orange buy-goods-directly "+(1!=s.seckill_start_state?"disabled":"")+"  background-cccccc"},"商品已抢光")),2==s.seckill_start_state&&v.default.createElement("div",{className:"flex-sub-box-6"},v.default.createElement("label",{className:"btn btn-orange buy-goods-directly "+(1!=s.seckill_start_state?"disabled":"")+"  background-cccccc"},"活动已结束"))))),0!=s.detail_type&&v.default.createElement("div",{className:"goods-detail-section"},s.buyer_list&&!!s.buyer_list.length&&v.default.createElement("div",{className:"goods-buy-record"},v.default.createElement(r.default,{dots:!1,infinite:!0,autoplay:!0,autoplayInterval:3e3},s.buyer_list.map(function(e,t){return v.default.createElement("div",{key:t},v.default.createElement("img",{src:e.cover_thumb,onLoad:function(){window.dispatchEvent(new Event("resize"))}}),v.default.createElement("span",null,e.nickname+"购买成功"))}))),"image"==l&&v.default.createElement("div",{className:"image-carousel-container"},s.img_urls?v.default.createElement("div",{className:"slick-carousel-container"},v.default.createElement(r.default,{dots:!1,infinite:!0,autoplay:!0,autoplayInterval:5e3,afterChange:this.carouselIndex},s.img_urls.map(function(e,a){return v.default.createElement("div",{key:a},v.default.createElement("img",{"data-src":e,"data-srcarr":s.img_urls,onClick:t.clickPlusImages,className:"slide-image",src:e,onLoad:function(){window.dispatchEvent(new Event("resize"))}}))})),v.default.createElement("div",{className:"carousel-index"},C+"/"+s.img_urls.length)):v.default.createElement("div",{className:"goods-cover-container"},v.default.createElement("img",{"data-src":s.cover,onClick:this.clickPlusImages,src:s.cover,mode:"aspectFill"})),s.video_url&&v.default.createElement("div",{className:"image-video-menu"},v.default.createElement("span",{className:"image"==l?"active":"","data-type":"image",onClick:this.changeImageOrVideo},"图片"),v.default.createElement("span",{className:"video"==l?"active":"","data-type":"video",onClick:this.changeImageOrVideo},"视频"))),s.video_url&&"video"==l&&v.default.createElement("div",{className:"video-carousel-container"},v.default.createElement("video",{src:s.video_url,id:"carousel-video",hidden:!d},s.video_url&&v.default.createElement(CoverView,{className:"image-video-menu"},v.default.createElement(CoverView,{className:"image"==l?"active":"","data-type":"image",onClick:this.changeImageOrVideo},"图片"),v.default.createElement(CoverView,{className:"video"==l?"active":"","data-type":"video",onClick:this.changeImageOrVideo},"视频"))),v.default.createElement("div",{className:"videoele-cover-view",hidden:d},v.default.createElement("div",{className:"videoele-poster-wrap"},v.default.createElement("img",{className:"videoele-poster",src:s.video_img,mode:"scaleToFill"})),v.default.createElement("div",{className:"videoele-play-icon",onClick:this.startPlayVideo},v.default.createElement("img",{className:"videoele-play-image",src:"http://cdn.jisuapp.cn/static/webapp/images/play.png",mode:"scaleToFill"})),v.default.createElement("div",{className:"image-video-menu"},v.default.createElement("span",{className:"image"==l?"active":"","data-type":"image",onClick:this.changeImageOrVideo},"图片"),v.default.createElement("span",{className:"video"==l?"active":"","data-type":"video",onClick:this.changeImageOrVideo},"视频")))),v.default.createElement("div",{className:"goods-seckill",style:(0,b.convertLineStyleData)("background:linear-gradient(to right,"+(u.theme?u.theme:"#FF7100")+","+(u.secondary?u.secondary:"#FFAC0C")+");")},v.default.createElement("div",{className:"goods-seckill-left"},v.default.createElement("div",{className:"goods-seckill-current"},v.default.createElement("div",{className:"goods-current-price"},v.default.createElement("span",{className:"seckill-price-unit"},"¥"),v.default.createElement("span",{className:"goods-seckill-price"},s.seckill_price)),v.default.createElement("div",{className:"goods-seckill-original"},v.default.createElement("div",{className:"goods-original-price"},"¥"+s.price,v.default.createElement("span",{className:"goods-original-price-line"})),v.default.createElement("div",{className:"seckill-attention"},s.seckill_activity_care+"人关注")))),v.default.createElement("div",{className:"goods-seckill-right "+(2==s.seckill_start_state?"seckill-end":"")},v.default.createElement("div",{className:"countdown"},0==s.seckill_start_state&&1==s.startDay?v.default.createElement("label",null,"距开始还剩"):0==s.seckill_start_state&&2==s.startDay?v.default.createElement("label",null,v.default.createElement("span",{className:"ico-moon icon-seckill-detail-alarm"}),"开抢时间"):1==s.seckill_start_state?v.default.createElement("label",null,"距结束还剩"):2==s.seckill_start_state&&v.default.createElement("label",null,"已结束"),(1==s.seckill_start_state||0==s.seckill_start_state&&1==s.startDay)&&v.default.createElement(v.default.Fragment,null,s.downCount.days&&v.default.createElement("span",{className:"days"},s.downCount.days+"天"),v.default.createElement("span",{className:"hours countdown-text",style:(0,b.convertLineStyleData)("color:"+u.theme)},s.downCount.hours),":",v.default.createElement("span",{className:"minutes countdown-text",style:(0,b.convertLineStyleData)("color:"+u.theme)},s.downCount.minutes),":",v.default.createElement("span",{className:"seconds countdown-text",style:(0,b.convertLineStyleData)("color:"+u.theme)},s.downCount.seconds)),0==s.seckill_start_state&&2==s.startDay&&v.default.createElement("div",{className:"seckill-start-time",style:(0,b.convertLineStyleData)("color:"+u.theme)},s.seckill_startTime))))),1==s.detail_type&&v.default.createElement("div",{className:"goods-detail-content styleOne"},v.default.createElement("div",{className:"goods-header"},v.default.createElement("div",{className:"goods-title"},v.default.createElement("span",{className:"ico-moon icon-seckill-alarm cover-icon-seckill-alarm",style:(0,b.convertLineStyleData)("color:"+u.theme)}),s.title),v.default.createElement("div",{className:"goods-price"}),v.default.createElement("div",{className:"goods-coupon",onClick:this.toCouponList},v.default.createElement("span",null,"活动："),v.default.createElement("span",{className:"word-orange",style:(0,b.convertLineStyleData)("color:"+u.theme)},"[最新优惠券]"),v.default.createElement("span",{className:"pull-right color-999"},"立即领取",v.default.createElement("span",{className:"ico-moon icon-rightarrow"}))),v.default.createElement("div",{className:"goods-freight"},v.default.createElement("div",null,"运费："+(s.express_fee||"包邮"))),v.default.createElement("div",{className:"goods-freight",onClick:this.showBuyDirectly},v.default.createElement("span",null,"选择商品规格"),v.default.createElement("span",{className:"pull-right ico-moon icon-rightarrow color-999"})),v.default.createElement("div",{className:"goods-freight"},v.default.createElement("label",null,"取货方式"),v.default.createElement("div",{className:"address-pick-up"},s.pick_up_type.map(function(e,t){return v.default.createElement("div",{key:e},v.default.createElement("span",{style:(0,b.convertLineStyleData)("color:"+u.theme),className:"ico-moon icon-goods-support-delivery suporrt"}),v.default.createElement("span",null,1==e?"快递":2==e?"同城":3==e?"自提":"点餐"))})))),v.default.createElement("div",{className:"payment-record"},v.default.createElement("img",{className:"goods-style-wechat",src:"http://cdn.jisuapp.cn/zhichi_frontend/static/webapp/images/goods-style-wechat.png"}),v.default.createElement("span",{className:"payment-record-word"},"微信支付交易"),v.default.createElement("div",{className:"pull-right"},v.default.createElement("div",{className:"buyer-list"},s.buyer_list.map(function(e,t){return v.default.createElement("img",{key:t,src:e.cover_thumb||"http://img.zhichiwangluo.com/zcimgdir/album/file_55910ef341577.png"})})),v.default.createElement("span",{className:"word-orange buy-number",style:(0,b.convertLineStyleData)("color:"+u.theme)},"购买"+s.seckill_sales+"+"),v.default.createElement("span",{className:"color-999"},"浏览"+s.viewed_count+"+"))),v.default.createElement("div",{className:"goods-recommend"},v.default.createElement("div",{className:"recommend-header"},v.default.createElement("img",{src:s.app_cover,className:"store-picture"}),v.default.createElement("div",{className:"store-des"},s.app_name),v.default.createElement("div",{className:"pull-right go-to-store",onClick:this.goToHomepage},"进入店铺")),!!s.recommend_info.length&&v.default.createElement(N.ScrollView,{className:"recommend-content","scroll-x":"true"},s.recommend_info.map(function(e,a){return v.default.createElement("div",{className:"recommend-goods",key:e.form_data.id,onClick:t.toRecommendGoodsDetail,"data-id":e.form_data.id,"data-goods-type":e.form_data.goods_type},v.default.createElement("div",{className:"width-fix-image"},v.default.createElement("img",{mode:"widthFix",src:e.form_data.cover})),v.default.createElement("div",{className:"recommend-goods-title"},e.form_data.title),v.default.createElement("span",{className:"recommend-goods-price"},"¥"+e.form_data.price))}))),v.default.createElement("div",{style:(0,b.convertLineStyleData)("padding: 30rpx;text-align:center;color:#b2b2b2;font-size:24rpx;")},v.default.createElement("div",{className:"line"}),v.default.createElement("div",{style:(0,b.convertLineStyleData)("display: inline-block;vertical-align:middle;margin:0 4px;")},"继续拖动，查看商品信息"),v.default.createElement("div",{className:"line"})),v.default.createElement("div",{className:"detail-comment"},v.default.createElement("div",{className:"detail-comment-menu"},v.default.createElement("div",null,v.default.createElement("span",{"data-type":"detail",onClick:this.oneSelectDetailCommet,style:(0,b.convertLineStyleData)("detail"==D?"color:"+u.theme+";border-color:"+u.theme:""),className:"detail"==D?"active":""},"详情")),v.default.createElement("div",null,v.default.createElement("span",{"data-type":"comment",onClick:this.oneSelectDetailCommet,style:(0,b.convertLineStyleData)("comment"==D?"color:"+u.theme+";border-color:"+u.theme:""),className:"comment-num-box "+("comment"==D?"active":"")},"评论",v.default.createElement("span",{className:"comment-num"},0==_[0]?"":_[0])))),"comment"!=D&&v.default.createElement("div",{className:"sub-detail"},v.default.createElement(TaroParseTmpl,{data:{wxParseData:R.nodes}})),"comment"==D&&v.default.createElement("div",{className:"sub-comment"},v.default.createElement("div",{className:"comPage-wrap page"},v.default.createElement("div",{className:"comPage-top-section"},v.default.createElement("div",null,v.default.createElement("label",{onClick:this.clickCommentLabel,"data-type":"0",style:(0,b.convertLineStyleData)("background:"+u.theme+"33"+(0==S?";background:"+u.theme:"")),className:"comPage-comment-label "+(0==S?"active":"")},"全部"),v.default.createElement("label",{onClick:this.clickCommentLabel,"data-type":"1",style:(0,b.convertLineStyleData)("background:"+u.theme+"33"+(1==S?";background:"+u.theme:"")),className:"comPage-comment-label "+(1==S?"active":"")},"好评 (",v.default.createElement("label",{className:"comPage-positive-comment"},_[1]),")"),v.default.createElement("label",{onClick:this.clickCommentLabel,"data-type":"2",style:(0,b.convertLineStyleData)("background:"+u.theme+"33"+(2==S?";background:"+u.theme:"")),className:"comPage-comment-label "+(2==S?"active":"")},"中评 (",v.default.createElement("label",{className:"comPage-neutral-comment"},_[2]),")"),v.default.createElement("label",{onClick:this.clickCommentLabel,"data-type":"3",style:(0,b.convertLineStyleData)("background:"+u.theme+"33"+(3==S?";background:"+u.theme:"")),className:"comPage-comment-label "+(3==S?"active":"")},"差评 (",v.default.createElement("label",{className:"comPage-negative-comment"},_[3]),")"),v.default.createElement("label",{onClick:this.clickCommentLabel,"data-type":"4",style:(0,b.convertLineStyleData)("background:"+u.theme+"33"+(4==S?";background:"+u.theme:"")),className:"comPage-comment-label "+(4==S?"active":"")},"有图 (",v.default.createElement("label",{className:"comPage-pic-comment"},_[4]),")"))),v.default.createElement("div",{className:"comPage-bottom-section",hidden:h},v.default.createElement("div",{className:"comPage-comment-list"},I.map(function(e,a){return v.default.createElement("div",{className:"comPage-comment-item",key:a},v.default.createElement("div",null,v.default.createElement("img",{className:"comPage-comment-photo",src:e.buyer_headimgurl}),v.default.createElement("span",{className:"comPage-comment-name"},e.buyer_nickname)),v.default.createElement("span",{className:"comPage-comment-date"},e.add_time),v.default.createElement("div",{className:"comPage-comment-content"},e.assess_info.content),e.assess_info.has_img&&v.default.createElement("div",{className:"comPage-comment-pics"},e.assess_info.img_arr.map(function(a,n){return v.default.createElement("img",{key:n,src:a,"data-src":a,"data-srcarr":e.assess_info.img_arr,onClick:t.clickPlusImages})})))}))),v.default.createElement("div",{className:"no-comment",hidden:!h},"暂无评论"))))),2==s.detail_type&&v.default.createElement("div",{className:"goods-detail-content styleTwo"},v.default.createElement("div",{className:"goods-header"},v.default.createElement("div",{className:"goods-title"},v.default.createElement("span",{className:"ico-moon icon-seckill-alarm cover-icon-seckill-alarm",style:(0,b.convertLineStyleData)("color:"+u.theme)}),s.title),v.default.createElement("div",{className:"goods-share"},v.default.createElement("div",{className:"goods-price-line"}),v.default.createElement("div",{className:"goods-price"},v.default.createElement("div",{className:"share-goods",onClick:this.showQRCodeComponent},v.default.createElement("span",{className:"ico-moon icon-news-sharefriends"}))))),v.default.createElement("div",{className:"goods-coupon",onClick:this.toCouponList},v.default.createElement("span",{className:"styleTwo-btn",style:(0,b.convertLineStyleData)("color:"+u.theme+";border-color:"+u.theme)},"优惠券"),v.default.createElement("span",null,"领取优惠券"),v.default.createElement("span",{className:"pull-right ico-moon icon-rightarrow"})),v.default.createElement("div",{className:"goods-freight"},v.default.createElement("span",{className:"styleTwo-btn",style:(0,b.convertLineStyleData)("color:"+u.theme+";border-color:"+u.theme)},"运费"),v.default.createElement("span",null,"运费"+(s.express_fee||"包邮"))),v.default.createElement("div",{className:"goods-freight"},v.default.createElement("label",null,"取货方式"),v.default.createElement("div",{className:"address-pick-up"},s.pick_up_type.map(function(e,t){return v.default.createElement("div",{key:e},v.default.createElement("span",{style:(0,b.convertLineStyleData)("color:"+u.theme),className:"ico-moon icon-goods-support-delivery suporrt"}),v.default.createElement("span",null,1==e?"快递":2==e?"同城":3==e?"自提":"点餐"))}))),v.default.createElement("div",{className:"goods-comment",hidden:h},v.default.createElement("div",{className:"comment-title"},v.default.createElement("div",{className:"goods-comment-title"},"用户怎么说 ("+(_[0]||0)+")"),v.default.createElement("div",{className:"go-to-comment",onClick:this.goToCommentPage},"查看全部")),v.default.createElement("div",{className:"block-item"},v.default.createElement(N.ScrollView,{className:"comPage-comment-list","scroll-x":"true"},I.map(function(e,t){return v.default.createElement("div",{className:"comPage-comment-item",key:t},v.default.createElement("div",null,v.default.createElement("img",{className:"comPage-comment-photo",src:e.buyer_headimgurl}),v.default.createElement("span",{className:"comPage-comment-name"},e.buyer_nickname)),v.default.createElement("div",{className:"comPage-comment-content"},e.assess_info.content))})))),v.default.createElement("div",{className:"goods-recommend"},v.default.createElement("div",{className:"recommend-header"},v.default.createElement("img",{src:s.app_cover,className:"store-picture"}),v.default.createElement("div",{className:"store-name"},s.app_name),v.default.createElement("div",{className:"pull-right go-to-store",onClick:this.goToHomepage},"进入店铺"))),v.default.createElement("div",{style:(0,b.convertLineStyleData)("padding: 30rpx;text-align:center;color:#b2b2b2;font-size:24rpx;")},v.default.createElement("div",{className:"line"}),v.default.createElement("div",{style:(0,b.convertLineStyleData)("display: inline-block;vertical-align:middle;margin:0 4px;")},"继续拖动，查看商品信息"),v.default.createElement("div",{className:"line"})),v.default.createElement("div",{className:"goods-detail-section"},v.default.createElement("div",{className:"comment-title"},v.default.createElement("div",{style:(0,b.convertLineStyleData)("border-bottom: 1px solid #f4f4f4;padding-bottom:20rpx;")},"商品详情")),v.default.createElement("div",{className:"goods-details rich-text",dangerouslySetInnerHTML:{__html:s.description}})),!!s.recommend_info.length&&v.default.createElement("div",{className:"goods-recommend"},v.default.createElement("div",{className:"two-recommend"},"店铺推荐"),v.default.createElement(N.ScrollView,{className:"recommend-content","scroll-x":"true"},s.recommend_info.map(function(e,a){return v.default.createElement("div",{className:"recommend-goods",key:e.form_data.id,onClick:t.toRecommendGoodsDetail,"data-id":e.form_data.id,"data-goods-type":e.form_data.goods_type},v.default.createElement("div",{className:"width-fix-image"},v.default.createElement("img",{mode:"widthFix",src:e.form_data.cover})),v.default.createElement("div",{className:"recommend-goods-title"},e.form_data.title),v.default.createElement("span",{className:"recommend-goods-price"},"¥"+e.form_data.price))})))),2==s.detail_type&&v.default.createElement("div",{className:"goods-bottom-two"},v.default.createElement("div",{className:"bottom-two-left"},v.default.createElement("div",null,v.default.createElement("div",{className:"ico-moon icon-service2"},v.default.createElement(ContactButton,{type:"default-dark",size:"20",sessionFrom:x})),v.default.createElement("div",null,"客服")),!w&&v.default.createElement("div",{className:"form-two-contain"},v.default.createElement("form",null,v.default.createElement("button",{type:"button",onClick:1==s.is_favorite?this.deleteFavoriteGoods:this.addFavoriteGoods},v.default.createElement("span",{style:(0,b.convertLineStyleData)(1==s.is_favorite?"color:"+u.theme:""),className:"ico-moon icon-"+(1==s.is_favorite?"collect-solid":"goods-detail-favorites")}),v.default.createElement("div",null,"收藏")))),v.default.createElement("div",{onClick:this.goToShoppingCart},v.default.createElement("span",{className:"ico-moon icon-new-goods-shopping"}),v.default.createElement("div",null,"购物车"))),v.default.createElement("div",{className:"bottom-two-right"},100!=s.seckill_progress&&2!=s.seckill_start_state&&v.default.createElement("label",{className:"add-to-shoppingCart",style:(0,b.convertLineStyleData)("border-color:"+u.theme+";color:"+u.theme),onClick:this.showAddToShoppingCart},"加入购物车"),100!=s.seckill_progress&&1==s.seckill_start_state&&v.default.createElement("label",{className:"buy-goods-directly",style:(0,b.convertLineStyleData)("background:"+u.theme),onClick:this.showBuyDirectly},"立即购买"),0==s.seckill_start_state&&0==s.is_seckill_activity_care&&v.default.createElement("form",null,v.default.createElement("button",{type:"button",className:"form-button","data-goods":JSON.stringify(s),"data-is_deleted":"0",onClick:this.formSubmitRemind},v.default.createElement("label",{className:"buy-goods-directly",style:(0,b.convertLineStyleData)("background:"+u.theme)},"设置提醒"))),0==s.seckill_start_state&&1==s.is_seckill_activity_care&&v.default.createElement("form",null,v.default.createElement("button",{type:"button",className:"form-button",onClick:this.formSubmitRemind,"data-goods":JSON.stringify(s),"data-is_deleted":"1"},v.default.createElement("label",{className:"buy-goods-directly",style:(0,b.convertLineStyleData)("background:"+u.theme)},"取消提醒"))),100==s.seckill_progress&&1==s.seckill_start_state&&v.default.createElement("label",{className:"buy-goods-directly buy-goods-directly-over"},"商品已抢光"),2==s.seckill_start_state&&v.default.createElement("label",{className:"buy-goods-directly buy-goods-directly-over"},"活动已结束"))),v.default.createElement("div",{id:"payDialog",className:"page-dialog-wrap",hidden:M},v.default.createElement("div",{className:"page-bottom-dialog"},v.default.createElement("div",{className:"pay-close-dialog page-dialog-close",onClick:this.hiddeAddToShoppingCart},v.default.createElement("span",{className:"ico-moon icon-closes"})),v.default.createElement("div",{className:"dialog-goods-header"},v.default.createElement("div",{className:"thumb"},v.default.createElement("div",{className:"thumb-wrap"},v.default.createElement("img",{"data-src":T.imgurl||s.cover,onClick:this.clickPlusImages,className:"pay-goods-cover",src:T.imgurl||s.cover}))),v.default.createElement("div",{className:"pay-goods-baseinfo"},v.default.createElement("div",{className:"pay-goods-price"},v.default.createElement("div",{className:"pay-current-price"},v.default.createElement("span",(0,i.default)({style:(0,b.convertLineStyleData)("font-size:28rpx;")},"style",(0,b.convertLineStyleData)("color:"+u.theme)),"¥"+T.price),P&&0!=T.virtualPrice&&v.default.createElement("span",{className:"virtualPrice"},"¥"+T.virtualPrice))),v.default.createElement("div",{className:"pay-goods-stock"},"库存 "+T.stock),T.models_text&&v.default.createElement("div",{className:"pay-checked-text clearfix"},"已选："+T.models_text))),v.default.createElement("div",{className:"payDialog-content"},v.default.createElement("div",{className:"pay-goods-models",hidden:!(s.model_items&&s.model_items.length)},s.model&&s.model.map(function(e,a){return v.default.createElement("div",{key:a},v.default.createElement("span",{className:"model-title"},e.name),v.default.createElement("label",{className:"pills-list"},e.subModelName.map(function(n,o){return v.default.createElement("label",{key:o,"data-model-index":a,"data-submodel-index":o,className:"subModel "+(T.models[a]==e.subModelId[o]?"select":""),"data-submodel-id":e.subModelId[o],onClick:t.selectSubModel,style:(0,b.convertLineStyleData)(T.models[a]==e.subModelId[o]?"background:"+u.theme:"")},n)})))})),v.default.createElement("div",{className:"payDialog-buy-num",style:(0,b.convertLineStyleData)("padding-left:10px;padding-right:10px;")},v.default.createElement("div",{className:"clearfix"},v.default.createElement("span",null,"购买数量"),v.default.createElement("span",{className:"buy-limit"},"(限购"+s.seckill_buy_limit+"件)"),v.default.createElement("div",{className:"pull-right"},v.default.createElement("div",{className:"quantity pull-left"},v.default.createElement("label",{className:"minus "+(T.buyCount<=1?"disabled":"")}),v.default.createElement("input",(e={className:"pay-buy-count",type:"number"},(0,i.default)(e,"className","txt"),(0,i.default)(e,"value",T.buyCount),(0,i.default)(e,"onChange",this.inputBuyCount),e)),v.default.createElement("label",{className:"plus "+(T.buyCount>=T.stock||T.buyCount>=s.seckill_buy_limit?"disabled":"")}),v.default.createElement("div",{className:"response-area response-area-minus",onClick:this.clickMinusButton}),v.default.createElement("div",{className:"response-area response-area-plus",onClick:this.clickPlusButton})))))),v.default.createElement("div",{className:"dialog-bottom"},v.default.createElement("div",{hidden:L},v.default.createElement("div",{style:(0,b.convertLineStyleData)("background:"+u.theme),className:"btn-orange pay-buy-next",onClick:this.buyDirectlyNextStep},"下一步")),v.default.createElement("div",{hidden:!L},v.default.createElement("div",{style:(0,b.convertLineStyleData)("background:"+u.theme),className:"pay-add-to-shoppingcart",onClick:this.sureAddToShoppingCart},"加入购物车"))))))}}]),t}(k.default);t.default=w},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(0),i=n(o),s=a(3),r=n(s),c=a(1),l=n(c),d=a(2),u=n(d),m=a(5),p=a(6),f=a(7),g=n(f);a(407);var h=function(e){function t(e){(0,i.default)(this,t);var a=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={topNavBarData:{isDefault:0,title:"优惠券列表"},franchiseeId:"",franchiseeInfo:"",couponList:[]},a.turnToCouponDetail=function(e){var t=e.currentTarget.dataset.id;m.appMethod.turnToPage("/pages/couponDetail/couponDetail?detail="+t+"&franchisee="+a.data.franchiseeId)},document.title="优惠券列表",a}return(0,u.default)(t,e),(0,r.default)(t,[{key:"componentWillMount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,p.getCurrentPageQueryParams)(),t=e.franchisee,a=this;this.setData({franchiseeId:t}),m.appMethod.sendRequest({url:"/index.php?r=AppShop/GetAllShopCouponList",data:{sub_app_id:t,parent_app_id:m.appMethod.getAppId(),page:-1},success:function(e){a.setData({couponList:e.data||[]})}})}},{key:"render",value:function(){var e=this,t=this.state.couponList;return React.createElement("div",{className:"official-page coupon-list-page"},React.createElement("div",{className:"goods-coupon-list page"},React.createElement("div",{className:"franchisee-goods-coupon-container"},t.map(function(t,a){return React.createElement("div",{className:"coupon_ticket",key:a,"data-id":t.id,onClick:e.turnToCouponDetail},0==t.type?React.createElement("div",{className:"ticket-wrap"},React.createElement("div",{className:"price"},"¥",React.createElement("span",null,t.value)),React.createElement("div",{className:"coupon_right"},React.createElement("div",{className:"coupon_name"},t.title),React.createElement("div",null,"消费满"+t.condition+"元减"+t.value),React.createElement("div",{className:"coupon-time"},("-1"==t.expire?t.start_use_date+"至"+t.end_use_date:"0"==t.expire?"领取当天生效,有效期1天":"领取"+(t.react>0?t.react+"天后":"当天")+"生效，有效期"+t.expire+"天")+" "+(0==t.exclude_holiday?"":"除去法定节假日")+" "+(0==t.exclude_weekend?"":"周一至周五")+" "+t.start_use_time+"-"+t.end_use_time))):1==t.type?React.createElement("div",{className:"ticket-wrap"},React.createElement("div",{className:"price"},React.createElement("span",null,t.value+"折")),React.createElement("div",{className:"coupon_right"},React.createElement("div",{className:"coupon_name"},t.title),React.createElement("div",null,"打"+t.value+"折优惠"),React.createElement("div",{className:"coupon-time"},("-1"==t.expire?t.start_use_date+"至"+t.end_use_date:"0"==t.expire?"领取当天生效,有效期1天":"领取"+(t.react>0?t.react+"天后":"当天")+"生效，有效期"+t.expire+"天")+" "+(0==t.exclude_holiday?"":"除去法定节假日")+" "+(0==t.exclude_weekend?"":"周一至周五")+" "+t.start_use_time+"-"+t.end_use_time))):2==t.type&&React.createElement("div",{className:"ticket-wrap"},React.createElement("div",{className:"price"},"¥",React.createElement(Span,null,t.value)),React.createElement("div",{className:"coupon_right"},React.createElement("div",{className:"coupon_name"},t.title),React.createElement("div",null,"可抵扣"+t.value+"元"),React.createElement("div",{className:"coupon-time"},("-1"==t.expire?t.start_use_date+"至"+t.end_use_date:"0"==t.expire?"领取当天生效,有效期1天":"领取"+(t.react>0?t.react+"天后":"当天")+"生效，有效期"+t.expire+"天")+" "+(0==t.exclude_holiday?"":"除去法定节假日")+" "+(0==t.exclude_weekend?"":"周一至周五")+" "+t.start_use_time+"-"+t.end_use_time))))}))))}}]),t}(g.default);t.default=h},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(0),i=n(o),s=a(3),r=n(s),c=a(1),l=n(c),d=a(2),u=n(d),m=a(5),p=a(6),f=a(11),g=a(7),h=n(g);a(409);var v=function(e){function t(e){(0,i.default)(this,t);var a=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={param:{coupon_id:"",page:1,page_size:10},isLoading:!1,noMore:!1,goodsList:[]},a.getGoodsList=function(){var e=a;e.data.noMore||e.data.isLoading||(e.setData({isLoading:!0}),m.appMethod.sendRequest({url:"/index.php?r=appShop/getCouponConditionGoods",method:"post",data:e.data.param,success:function(t){if(0==t.status){var a={},n=e.data.goodsList,o=e.data.param;n=o.page>1?n.concat(t.data):t.data,0==t.is_more&&(a.noMore=!0),o.page=t.current_page+1,a.goodsList=n,a.param=o,a.isLoading=!1,e.setData(a)}else m.appMethod.showModal({content:t.data})},fail:function(t){e.setData({isLoading:!1})}}))},a.turnToGoodsDetail=function(e){var t=m.appMethod.globalData.appId,a=e.currentTarget.dataset,n=a.id,o=a.goodsType,i=a.group,s=a.subAppId,r=1==a.isSeckill,c=t===s;if(i&&1==i)return void(c?m.appMethod.turnToPage("/groupGoodsDetail?detail="+n):m.appMethod.turnToPage("/groupGoodsDetail?detail="+n+"&franchisee="+s));switch(+o){case 0:case 1:var l="/goodsDetail?detail="+n;r&&(l+="&goodsType=seckill"),c||(l+="&franchisee="+s),m.appMethod.turnToPage(l);break;case 3:c?m.appMethod.turnToPage("/toStoreDetail?detail="+n):m.appMethod.turnToPage("/toStoreDetail?detail="+n+"&franchisee="+s)}},document.title="可用商品",a}return(0,u.default)(t,e),(0,r.default)(t,[{key:"componentWillMount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,p.getCurrentPageQueryParams)(),t=this;e.franchisee?t.setData({"param.coupon_id":e.detail,"param.sub_app_id":e.franchisee}):t.setData({"param.coupon_id":e.detail}),t.getGoodsList()}},{key:"render",value:function(){var e=this,t=this.state,a=t.goodsList,n=t.noMore;return React.createElement("div",{className:"official-page coupon-goods-list-page"},React.createElement(f.ScrollView,{id:"couponGoodsList-wrap","scroll-y":"true",bindscrolltolower:this.getGoodsList,"lower-threshold":"50"},React.createElement("div",{className:"couponGoodsList-ul"},a.map(function(t,a){return React.createElement("div",{className:"couponGoods-li",key:t.id,"data-id":t.id,"data-goods-type":t.goods_type,"data-group":t.is_group_buy,"data-groupid":t.group_buy_activity_id,"data-sub-app-id":t.app_id,onClick:e.turnToGoodsDetail,"data-is-seckill":t.is_seckill},React.createElement("div",{className:"couponGoods-logo"},React.createElement("img",{src:t.cover,mode:"aspectFill",alt:""})),React.createElement("div",{className:"couponGoods-text"},React.createElement("div",{className:"couponGoods-name"},t.title),React.createElement("div",{className:"couponGoods-price"},"¥"+t.price)))}),n&&React.createElement("div",{className:"no-more"},"没有更多了"))))}}]),t}(h.default);t.default=v},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(0),i=n(o),s=a(3),r=n(s),c=a(1),l=n(c),d=a(2),u=n(d),m=a(5),p=a(6),f=a(12),g=n(f),h=a(11),v=a(7),_=n(v);a(411);var y=function(e){function t(e){(0,i.default)(this,t);var a=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={topNavBarData:{isDefault:0,title:"优惠券领取列表"},couponList:[],receiveSuccess:0,receiveCount:0,receiveLimitNum:0,userInfo:{},couponsAndDiscount:{},totalUser:0,category:[],currentCate:"",latitude:"",longitude:"",isParentShop:!1,headquartersId:"",recvCouponPopFranchisee:!1,recvCouponPopAppId:"",recvCouponPopAppMode:"",couponNoMore:!1,recving:!1},a.getCoupons=function(){var e=a;m.appMethod.sendRequest({url:"/index.php?r=AppShop/getCoupons",data:{in_use_date:1,in_show_list:1,enable_status:1,stock:1,page:-1},hideLoading:!0,success:function(t){e.setData({couponList:t.data})}})},a.gotoCouponDetail=function(e){var t=e.currentTarget.dataset.couponId,n=e.currentTarget.dataset.appid,o="";a.data.headquartersId!=n&&a.data.isParentShop&&(o="&franchisee="+n);var i="/pages/couponDetail/couponDetail?detail="+t+o;m.appMethod.turnToPage(i,!1)},a.formSubmit=function(e){var t=a,n=e.currentTarget.dataset.couponId,o=e.detail.formId,i=e.currentTarget.dataset.index;a.data.recving||(a.setRecving(!0),m.appMethod.sendRequest({url:"/index.php?r=AppShop/recvCoupon",data:{coupon_id:n,form_id:o},hideLoading:!0,success:function(e){var a={};1==e.data.is_already_recv&&(a["couponList["+i+"].recv_status"]=0),a.receiveSuccess=1,a.receiveCount=e.data.recv_count,a.receiveLimitNum=e.data.limit_num,t.setData(a)},complete:function(){t.setRecving(!1)}}))},a.setRecving=function(e){a.setData({recving:e})},a.formSubmitFranchisee=function(e){var t=a,n=e.currentTarget.dataset,o=n.index,i=e.detail.formId,s=t.data.couponList[o],r=s.id,c=s.app_id,l=s.mode_id;a.data.recving||(a.setRecving(!0),m.appMethod.sendRequest({url:"/index.php?r=AppShop/recvCoupon",data:{coupon_id:r,form_id:i,sub_app_id:c},hideLoading:!0,success:function(e){var a={};1==e.data.is_already_recv&&(a["couponList["+o+"].recv_status"]=0),a.recvCouponPopFranchisee=!0,a.recvCouponPopAppId=c,a.recvCouponPopAppMode=l,a["couponsAndDiscount.coupons"]=t.data.couponsAndDiscount.coupons+1,t.setData(a)},complete:function(){t.setRecving(!1)}}))},a.gotoCouponList=function(){m.appMethod.turnToPage("/eCommerce/pages/couponList/couponList",!1)},a.hideToast=function(){a.setData({receiveSuccess:0,receiveCount:0,receiveLimitNum:0})},a.stopPropagation=function(){},a.getDiscountCut=function(){var e=a;m.appMethod.sendRequest({url:"/index.php?r=AppShop/GetCouponsAndDiscountCutTotalPrice",data:{},hideLoading:!0,success:function(t){e.setData({couponsAndDiscount:t.data})}})},a.getTotalUser=function(){var e=a;m.appMethod.sendRequest({url:"/index.php?r=AppShop/GetTotalUser",data:{},hideLoading:!0,success:function(t){e.setData({totalUser:t.data})}})},a.getCategoryForCoupon=function(){var e=a;m.appMethod.sendRequest({url:"/index.php?r=AppShop/GetCategoryForCoupon",data:{},hideLoading:!0,success:function(t){e.setData({category:t.data})}})},a.getLocation=function(){var e=a;m.appMethod.getLocation({success:function(t){e.setData({longitude:t.longitude,latitude:t.latitude}),e.getAllShopCouponList()},fail:function(){e.getAllShopCouponList()}})},a.allCouponData={page:1,loading:!1,nomore:!1},a.getAllShopCouponList=function(){var e=a;e.allCouponData.loading||e.allCouponData.nomore||(e.allCouponData.loading=!0,m.appMethod.sendRequest({url:"/index.php?r=AppShop/GetAllShopCouponList",data:{parent_app_id:m.appMethod.globalData.appId,latitude:e.data.latitude,longitude:e.data.longitude,industry_type:e.data.currentCate,page:e.allCouponData.page,page_size:10},success:function(t){var a=e.data.couponList,n=t.data;1==e.allCouponData.page&&(a=[]);for(var o in n){var i=n[o].distance;n[o].distance=g.default.formatDistance(i)}e.setData({couponList:a.concat(n),couponNoMore:0==t.is_more}),e.allCouponData.page++,e.allCouponData.nomore=0==t.is_more},complete:function(){e.allCouponData.loading=!1}}))},a.gotoShop=function(e){var t=e.currentTarget.dataset.appid,n=e.currentTarget.dataset.mode,o=m.appMethod.getChainId();if(a.data.headquartersId==t||o==t){var i=m.appMethod.getHomepageRouter();m.appMethod.reLaunch({url:"/pages/"+i+"/"+i})}else{var s={};s.detail=t,m.appMethod.goToFranchisee(n,s)}},a.closeRecvCouponPopFranchisee=function(){a.setData({recvCouponPopFranchisee:!1})},a.clickLoading=!1,a.changeTab=function(e){var t=e.currentTarget.dataset.id;if(t!=a.data.currentCate){if(a.clickLoading)return void m.appMethod.showModal({content:"请勿频繁点击分类"});a.clickLoading=!0,setTimeout(function(){a.clickLoading=!1},500),a.setData({currentCate:t,couponNoMore:!1}),a.allCouponData.page=1,a.allCouponData.nomore=!1,a.allCouponData.loading=!1,a.getAllShopCouponList()}},a.onReachBottom=function(e){var t=a;t.data.isParentShop&&t.getAllShopCouponList()},document.title="优惠券领取列表",a}return(0,u.default)(t,e),(0,r.default)(t,[{key:"componentWillMount",value:function(){var e=this,t=m.appMethod.globalData.hasFranchiseeList;e.setData({headquartersId:m.appMethod.globalData.appId,isParentShop:t}),t?(m.appMethod.isLogin()?e.setData({userInfo:m.appMethod.globalData.userInfo}):m.appMethod.goLogin({success:function(){e.setData({userInfo:m.appMethod.globalData.userInfo})}}),e.getLocation(),e.getCategoryForCoupon(),e.getDiscountCut(),e.getTotalUser()):e.getCoupons()}},{key:"render",value:function(){var e=this,t=this.state,a=t.userInfo,n=t.totalUser,o=t.couponsAndDiscount,i=t.currentCate,s=t.category,r=t.couponList,c=t.couponNoMore,l=t.isParentShop,d=t.receiveSuccess,u=t.receiveCount,m=t.receiveLimitNum,f=t.recvCouponPopAppId,g=t.recvCouponPopAppMode,v=t.recvCouponPopFranchisee;return React.createElement("div",{className:"official-page coupon-receive-list-page"},React.createElement("div",{id:"coupon-receive-list-page",className:"coupon-receive-list-page"},l?React.createElement(React.Fragment,null,React.createElement("div",{className:"coupon-receive-head"},React.createElement("div",{className:"clearfix"},React.createElement("div",{className:"coupon-receive-user"},React.createElement("div",{className:"coupon-receive-cover"},React.createElement("img",{src:a.cover_thumb,mode:"aspectFill"})),React.createElement("div",{className:"coupon-receive-nickname"},a.nickname)),React.createElement("div",{className:"coupon-receive-competitor"},n+"人正在抢")),React.createElement("div",{className:"coupon-pft-wrap"},React.createElement("div",{className:"coupon-pft-item"},React.createElement("div",{className:"coupon-pft-num",onClick:this.gotoCouponList},o.coupons||0),React.createElement("div",{className:"coupon-pft-text"},"已抢优惠券（张）")),React.createElement("div",{className:"coupon-pft-item"},React.createElement("div",{className:"coupon-pft-num"},o.cut_total_price||0),React.createElement("div",{className:"coupon-pft-text"},"已节省（元）")))),React.createElement(h.ScrollView,{"scroll-x":"true",className:"coupon-cate"},React.createElement("div",{className:"coupon-cate-item "+(""==i?"active":""),"data-id":!0,onClick:this.changeTab},"全部"),s.map(function(t,a){return React.createElement("div",{className:"coupon-cate-item "+(i==a?"active":""),key:!0,"data-id":a,onClick:e.changeTab},t)})),React.createElement("div",{className:"ticket-list"},r.map(function(t,a){return React.createElement(React.Fragment,{key:t.id},React.createElement("div",{className:"ticket franchisee-ticket",onClick:e.gotoCouponDetail,"data-coupon-id":t.id,"data-appid":t.app_id},React.createElement("div",{className:"top-section"},React.createElement("div",{className:"coupon-franchisee"},React.createElement("img",{className:"coupon-franchisee-logo",mode:"aspectFill",src:t.logo}),React.createElement("div",{className:"coupon-franchisee-name",onClick:e.gotoShop,"data-mode":t.mode_id,"data-appid":t.app_id},t.name,React.createElement("label",{className:"ico-moon icon-rightarrow"})),React.createElement("div",{className:"coupon-franchisee-distance"},"附近"+t.distance)),0==t.type?React.createElement(React.Fragment,null,React.createElement("div",{className:"detail-info-franchisee"},React.createElement("div",{className:"coupon-value"},React.createElement("label",null,"¥"),t.value),React.createElement("div",{className:"coupon-condition"},"满"+t.condition+"可用"))):1==t.type?React.createElement(React.Fragment,null,React.createElement("div",{className:"detail-info-franchisee"},React.createElement("div",{className:"coupon-value"},t.value,React.createElement("label",null,"折")),"null"==t.extra_goods?React.createElement("div",{className:"coupon-condition"},"全部商品可享优惠"):React.createElement("div",{className:"coupon-condition"},"部分商品可享优惠"))):2==t.type?React.createElement(React.Fragment,null,React.createElement("div",{className:"detail-info-franchisee"},React.createElement("div",{className:"coupon-value"},React.createElement("label",null,"¥"),t.value),React.createElement("div",{className:"coupon-condition"},"商品代金券"))):3==t.type?React.createElement(React.Fragment,null,React.createElement("div",{className:"detail-info-franchisee"},React.createElement("div",{className:"coupon-value"},"兑换券"),""==t.extra_condition?React.createElement("div",{className:"coupon-condition"},"直接兑换"+t.coupon_goods_info.title):t.extra_condition.price?React.createElement("div",{className:"coupon-condition"},"消费满"+t.extra_condition.price+"元可兑换"+t.coupon_goods_info.title):t.extra_condition.goods_id&&React.createElement("div",{className:"coupon-condition"},"购买"+t.condition_goods_info.title+"可兑换"+t.coupon_goods_info.title))):4==t.type?React.createElement(React.Fragment,null,React.createElement("div",{className:"detail-info-franchisee"},React.createElement("div",{className:"coupon-value"},React.createElement("label",null,"¥"),t.value),React.createElement("div",{className:"coupon-condition"},"商品储值金"))):5==t.type?React.createElement(React.Fragment,null,React.createElement("div",{className:"detail-info-franchisee"},React.createElement("div",{className:"coupon-value"},"通用券"),React.createElement("div",{className:"coupon-condition"},t.extra_condition))):6==t.type&&React.createElement(React.Fragment,null,React.createElement("div",{className:"detail-info-franchisee"},React.createElement("div",{className:"coupon-value"},"次数券"),React.createElement("div",{className:"coupon-condition"},"可兑换"+t.limit_num+"次"))),React.createElement("form",{onSubmit:e.formSubmitFranchisee,"data-index":a},1==t.recv_status?React.createElement("button",{className:"receive-btn",onClick:e.stopPropagation},"领取"):0==t.recv_status&&React.createElement("div",{className:"receive-btn",onClick:e.gotoShop,"data-mode":t.mode_id,"data-appid":t.app_id},"去使用"))),React.createElement("div",{className:"bottom-section"},React.createElement("div",null,"有效期 "+("-1"==t.expire?t.start_use_date+"至"+t.end_use_date:"0"==t.expire?"领取当天生效,有效期1天":"领取"+(t.react>0?t.react+"天后":"当天")+"生效，有效期"+t.expire+"天")+" "+(0==t.exclude_holiday?"":"除去法定节假日")+" "+(0==t.exclude_weekend?"":"周一至周五")+" "+t.start_use_time+"-"+t.end_use_time))))})),c&&React.createElement("div",{className:"coupon-no-more"},"没有更多了")):React.createElement(React.Fragment,null,React.createElement("div",{className:"ticket-list"},r.map(function(t,a){return React.createElement(React.Fragment,{key:t.id},React.createElement("div",{className:"ticket "+(1==t.recv_status?"":"has-receive"),onClick:e.gotoCouponDetail,"data-coupon-id":t.id},React.createElement("div",{className:"top-section",style:(0,p.convertLineStyleData)("border-color: "+t.list_color)},0==t.type?React.createElement(React.Fragment,null,React.createElement("div",{className:"detail-info"},React.createElement("div",{className:"name"},t.title),React.createElement("div",{className:"use-condition"},"使用条件：满"+t.condition+"元，减"+t.value+"元")),React.createElement("div",{className:"background-word-area",style:(0,p.convertLineStyleData)("border-color:"+t.list_color)},React.createElement("div",{className:"background-circle",style:(0,p.convertLineStyleData)("background-color:"+t.list_color)}),React.createElement("div",{className:"background-word"},"减"))):1==t.type?React.createElement(React.Fragment,null,React.createElement("div",{className:"detail-info"},React.createElement("div",{className:"name"},t.title),React.createElement("div",{className:"use-condition"},"使用条件: 打"+t.value+"折")),React.createElement("div",{className:"background-word-area",style:(0,p.convertLineStyleData)("border-color:"+t.list_color)},React.createElement("div",{className:"background-circle",style:(0,p.convertLineStyleData)("background-color:"+t.list_color)}),React.createElement("div",{className:"background-word"},"折"))):2==t.type?React.createElement(React.Fragment,null,React.createElement("div",{className:"detail-info"},React.createElement("div",{className:"name"},t.title),React.createElement("div",{className:"use-condition"},"使用条件：可抵扣"+t.value+"元")),React.createElement("div",{className:"background-word-area",style:(0,p.convertLineStyleData)("border-color:"+t.list_color)},React.createElement("div",{className:"background-circle",style:(0,p.convertLineStyleData)("background-color:"+t.list_color)}),React.createElement("div",{className:"background-word"},"代"))):3==t.type?React.createElement(React.Fragment,null,React.createElement("div",{className:"detail-info"},React.createElement("div",{className:"name"},t.title),""==t.extra_condition?React.createElement("div",{className:"use-condition"},"使用条件：直接兑换"+t.coupon_goods_info.title):t.extra_condition.price?React.createElement("div",{className:"use-condition"},"使用条件：消费满"+t.extra_condition.price+"元可兑换"+t.coupon_goods_info.title):t.extra_condition.goods_id&&React.createElement("div",{className:"use-condition"},"使用条件：购买"+t.condition_goods_info.title+"可兑换"+t.coupon_goods_info.title)),React.createElement("div",{className:"background-word-area",style:(0,p.convertLineStyleData)("border-color:"+t.list_color)},React.createElement("div",{className:"background-circle",style:(0,p.convertLineStyleData)("background-color:"+t.list_color)}),React.createElement("div",{className:"background-word"},"兑"))):4==t.type?React.createElement(React.Fragment,null,React.createElement("div",{className:"detail-info"},React.createElement("div",{className:"name"},t.title),React.createElement("div",{className:"use-condition"},"使用条件: 储值金可充值"+t.value+"元")),React.createElement("div",{className:"background-word-area",style:(0,p.convertLineStyleData)("border-color:"+t.list_color)},React.createElement("div",{className:"background-circle",style:(0,p.convertLineStyleData)("background-color:"+t.list_color)}),React.createElement("div",{className:"background-word"},"储"))):5==t.type?React.createElement(React.Fragment,null,React.createElement("div",{className:"detail-info"},React.createElement("div",{className:"name"},t.title),React.createElement("div",{className:"use-condition"},"使用条件: "+t.extra_condition)),React.createElement("div",{className:"background-word-area",style:(0,p.convertLineStyleData)("border-color:"+t.list_color)},React.createElement("div",{className:"background-circle",style:(0,p.convertLineStyleData)("background-color:"+t.list_color)}),React.createElement("div",{className:"background-word"},"通"))):6==t.type&&React.createElement(React.Fragment,null,React.createElement("div",{className:"detail-info"},React.createElement("div",{className:"name"},t.title),React.createElement("div",{className:"coupon-condition"},"使用条件: 可使用"+t.value+"次")),React.createElement("div",{className:"background-word-area",style:(0,p.convertLineStyleData)("border-color:"+t.list_color)},React.createElement("div",{className:"background-circle",style:(0,p.convertLineStyleData)("background-color:"+t.list_color)}),React.createElement("div",{className:"background-word"},"次"))),React.createElement("form",{onSubmit:e.formSubmit,"data-coupon-id":t.id,"data-index":a},1==t.recv_status?React.createElement("button",{className:"receive-btn",onClick:e.stopPropagation,style:(0,p.convertLineStyleData)("background-color:"+t.list_color)},"领取"):0==t.recv_status&&React.createElement("div",{className:"receive-btn"},"已领取"))),React.createElement("div",{className:"bottom-section"},React.createElement("div",null,"有效期 "+("-1"==t.expire?t.start_use_date+"至"+t.end_use_date:"0"==t.expire?"领取当天生效,有效期1天":"领取"+(t.react>0?t.react+"天后":"当天")+"生效，有效期"+t.expire+"天")+" "+(0==t.exclude_holiday?"":"除去法定节假日")+" "+(0==t.exclude_weekend?"":"周一至周五")+" "+t.start_use_time+"-"+t.end_use_time))))})),React.createElement("div",{className:"goto-coupon-list"},React.createElement("div",{onClick:this.gotoCouponList},"查看我的优惠券>>>"))),React.createElement("div",{className:"zc-toast-bg "+(1==d?"show":""),onClick:this.hideToast},React.createElement("div",{className:"zc-toast"},React.createElement("span",{className:"icon",type:"success",size:"20"}),React.createElement("div",{className:"title"},"领取成功!"),React.createElement("div",{className:"content"},"已领"+u+"张，限领"+m+"张"))),v&&React.createElement("div",{className:"pop-wrap"},React.createElement("div",{className:"pop-bg",onClick:this.closeRecvCouponPopFranchisee}),React.createElement("div",{className:"pop-inner"},React.createElement("label",{className:"pop-close ico-moon icon-closes",onClick:this.closeRecvCouponPopFranchisee}),React.createElement("div",{className:"recvCoupon-success"},React.createElement("span",{type:"success",size:"14",color:"#FF7100"}),React.createElement("label",null,"恭喜领取成功")),React.createElement("div",{className:"recvCoupon-pop-btn","data-appid":f,"data-mode":g,onClick:this.gotoShop},"进店购物，立享优惠")))))}}]),t}(_.default);t.default=y},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(0),i=n(o),s=a(3),r=n(s),c=a(1),l=n(c),d=a(2),u=n(d),m=a(5),p=a(6),f=a(7),g=n(f);a(413);var h=function(e){function t(e){(0,i.default)(this,t);var a=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={topNavBarData:{isDefault:0,title:"会员卡"},appId:"",receiveCard:-1,cardDetail:{appName:"",logoUrl:"",duration:"",level:"",number:""},vipRights:{freePostage:0,discount:0,giveCouponStr:"",integral:0},vipNotice:{description:""},vipPoints:{canUseIntegral:0,totalIntegral:0,consumeNum:0},vipContact:{appName:"",phone:"无"},activeItem:"",vipInfo:{},isPaidVip:"0"},a.getVipInfo=function(){var e=a;m.appMethod.sendRequest({url:"/index.php?r=AppShop/GetVIPCardInfo",data:{app_id:e.data.franchiseeId,vip_id:e.data.vipId,is_paid_vip:e.data.isPaidVip},success:function(t){var a="",n=t.data[0];a=0==parseInt(n.background_type)?"url("+n.background+") 0% 0% / 100% 100%":n.background;for(var o="",i=0;i<n.coupon_list.length;i++)o=o+"免费赠送"+n.coupon_list[i].num+"张"+n.coupon_list[i].name+"的优惠券,";var s="";if(n.birthday_coupon_list&&n.birthday_coupon_list.length)for(var r=n.birthday_coupon_list,c=0;c<r.length;c++)s=s+"免费赠送"+r[c].num+"张"+r[c].name+"的优惠券,";n.description=n.description?n.description.replace(/<br \/>/g,"\n"):n.description,e.setData({vipInfo:n,receiveCard:1,"cardDetail.appName":n.app_name,"cardDetail.logoUrl":n.logo,"cardDetail.duration":n.expired_time||"","cardDetail.level":n.title,"cardDetail.cardBackground":a,"cardDetail.number":n.user_vip_id||"","cardDetail.isShowVipid":n.is_show_vipid||"","vipRights.discount":n.discount,"vipRights.giveCouponStr":o,"vipRights.giveBirCouponStr":s,"vipRights.integral":n.integral,"vipRights.balance":n.balance,"vipRights.freePostage":n.is_free_postage,"vipNotice.description":n.description,"vipPoints.canUseIntegral":n.can_use_integral,"vipPoints.totalIntegral":n.total_integral,"vipPoints.consumeNum":n.consume_num,"vipContact.appName":n.app_name,"vipContact.phone":n.phone})}})},a.getHeadquartersVipInfo=function(){var e=a;m.appMethod.sendRequest({url:"/index.php?r=AppShop/GetVIPInfo",data:{app_id:e.data.franchiseeId||"",is_all:1},success:function(t){var a="";a=0==parseInt(t.data.background_type)?"url("+t.data.background+") 0% 0% / 100% 100%":t.data.background;var n="",o="";if(0!=t.data.is_vip){for(var i=0;i<t.data.coupon_list.length;i++)n=n+"免费赠送"+t.data.coupon_list[i].num+"张"+t.data.coupon_list[i].name+"的优惠券,";if(t.data.birthday_coupon_list&&t.data.birthday_coupon_list.length)for(var s=0;s<t.data.birthday_coupon_list.length;s++)o=o+"免费赠送"+t.data.birthday_coupon_list[s].num+"张"+t.data.birthday_coupon_list[s].name+"的优惠券,"}t.data.description=t.data.description?t.data.description.replace(/<br \/>/g,"\n"):t.data.description,e.setData({vipInfo:t.data,receiveCard:t.data.is_vip||0,"cardDetail.appName":t.data.app_name,"cardDetail.logoUrl":t.data.logo,"cardDetail.duration":t.data.expire,"cardDetail.level":t.data.title,"cardDetail.cardBackground":a,"cardDetail.number":t.data.user_vip_id||"","cardDetail.isShowVipid":t.data.is_show_vipid||"","vipRights.discount":t.data.discount||"","vipRights.giveCouponStr":n||"","vipRights.giveBirCouponStr":o||"","vipRights.integral":t.data.integral||"","vipRights.balance":t.data.balance||"","vipRights.freePostage":t.data.is_free_postage||"","vipNotice.description":t.data.description||"","vipPoints.canUseIntegral":t.data.can_use_integral||"","vipPoints.totalIntegral":t.data.total_integral||"","vipPoints.consumeNum":t.data.consume_num||"","vipContact.appName":t.data.app_name||"","vipContact.phone":t.data.phone||""})}})},a.showItemContent=function(e){var t=a,n=e.currentTarget.dataset.item;t.data.activeItem==n&&(n=""),t.setData({activeItem:n})},a.getVIPCardForUser=function(){var e=a;m.appMethod.sendRequest({url:"/index.php?r=AppShop/GetVIPCardForUser",data:{parent_app_id:m.appMethod.getAppId(),sub_app_id:e.data.franchiseeId},success:function(t){m.appMethod.showModal({content:"领取成功!"}),e.setData({"vipInfo.is_owner":1})},complete:function(){}})},document.title="会员卡",a}return(0,u.default)(t,e),(0,r.default)(t,[{key:"componentWillMount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,p.getCurrentPageQueryParams)(),t=e.detail||"",a=e.franchisee||"",n=e.is_paid_vip||"";this.setData({vipId:t,franchiseeId:a,isPaidVip:n}),t?this.getVipInfo():this.getHeadquartersVipInfo()}},{key:"render",value:function(){var e=this.state,t=e.cardDetail,a=e.activeItem,n=e.vipRights,o=e.vipNotice,i=e.vipPoints,s=e.vipContact,r=e.vipInfo,c=e.receiveCard;return React.createElement("div",{className:"official-page vip-card-page"},React.createElement("div",{className:"page",id:"vipCard"},1==c?React.createElement("div",{className:"yes-receive-card"},React.createElement("div",{className:"card-wrap"},React.createElement("div",{className:"card",style:(0,p.convertLineStyleData)("background: "+t.cardBackground)},React.createElement("img",{className:"logo",src:t.logoUrl}),React.createElement("div",{className:"title"},t.appName),React.createElement("div",{className:"level"},t.level),1==t.isShowVipid&&t.number&&React.createElement("div",{className:"number"},"No."+t.number),-1==t.duration?React.createElement("div",{className:"duration"},"永久有效"):React.createElement("div",{className:"duration"},t.duration))),React.createElement("div",{className:"card-content"},React.createElement("div",{className:"card-item"},React.createElement("div",{className:"item-title "+("rights"==a?"active":""),onClick:this.showItemContent,"data-item":"rights"},React.createElement("span",null,"会员权益"),React.createElement("label",{className:"ico-moon icon-downarrow"})),React.createElement("div",{className:"item-body vipCard-rights "+("rights"==a?"active":"")},React.createElement("div",{className:"content"},0!=n.discount&&React.createElement(React.Fragment,null,React.createElement("div",{className:"item"},"打折"),React.createElement("div",{className:"item"},"所有商品一律",React.createElement("span",null,n.discount),"折")),""!=n.giveCouponStr&&React.createElement(React.Fragment,null,React.createElement("div",{className:"item"},"优惠券"),React.createElement("div",{className:"item"},React.createElement("span",null,n.giveCouponStr),"购买商品时抵用")),""!=n.giveBirCouponStr&&React.createElement(React.Fragment,null,React.createElement("div",{className:"item"},"生日优惠券"),React.createElement("div",{className:"item"},React.createElement("span",null,n.giveBirCouponStr),"购买商品时抵用")),0!=n.integral&&React.createElement(React.Fragment,null,React.createElement("div",{className:"item"},"积分"),React.createElement("div",{className:"item"},"注册成功即赠送",React.createElement("span",null,n.integral),"积分")),n.balance&&0!=n.balance&&React.createElement(React.Fragment,null,React.createElement("div",{className:"item"},"储值"),React.createElement("div",{className:"item"},"注册成功即赠送",React.createElement("span",null,n.balance),"储值")),1==n.freePostage&&React.createElement(React.Fragment,null,React.createElement("div",{className:"item"},"包邮"),React.createElement("div",{className:"item"},"所有商品购买后统统包邮"))))),React.createElement("div",{className:"card-item"},React.createElement("div",{className:"item-title "+("notice"==a?"active":""),onClick:this.showItemContent,"data-item":"notice"},React.createElement("span",null,"使用须知"),React.createElement("label",{className:"ico-moon icon-downarrow"})),React.createElement("div",{className:"item-body vipCard-notice "+("notice"==a?"active":"")},React.createElement("div",{className:"content"},React.createElement("div",{className:"item"},"权限说明"),React.createElement("div",{className:"item"},"会员权限会随着会员卡等级上升而加强，相应特权请留意会员卡下方的会员权益。"),React.createElement("div",{className:"item"},"积分说明"),React.createElement("div",{className:"item"},"在积分商品中，100积分可以代替1元使用。"),React.createElement("div",{className:"item"},"补充说明"),React.createElement("div",{className:"item"},React.createElement("span",null,o.description))))),React.createElement("div",{className:"card-item"},React.createElement("div",{className:"item-title "+("points"==a?"active":""),onClick:this.showItemContent,"data-item":"points"},React.createElement("span",null,"个人积分"),React.createElement("label",{className:"ico-moon icon-downarrow"})),React.createElement("div",{className:"item-body vipCard-points "+("points"==a?"active":"")},React.createElement("div",{className:"content"},React.createElement("div",{className:"item"},"现有积分"),React.createElement("div",{className:"item"},i.canUseIntegral),React.createElement("div",{className:"item"},"总积分"),React.createElement("div",{className:"item"},i.totalIntegral),!!+i.consumeNum&&0!=i.consumeNum&&React.createElement(React.Fragment,null,React.createElement("div",{className:"item"},"积累规则"),React.createElement("div",{className:"item"},"消费"+i.consumeNum+"元，获得1积分")),React.createElement("div",{className:"item"},"使用规则"),React.createElement("div",{className:"item"},"100积分 = 1元"),React.createElement("div",{className:"item"},"提醒"),React.createElement("div",{className:"item"},"消费积分并不会影响升级会员卡，与会员卡升级相关的是总积分")))),React.createElement("div",{className:"card-item"},React.createElement("div",{className:"item-title "+("contact"==a?"active":""),onClick:this.showItemContent,"data-item":"contact"},React.createElement("span",null,"联系我们"),React.createElement("label",{className:"ico-moon icon-downarrow"})),React.createElement("div",{className:"item-body vipCard-contact "+("contact"==a?"active":"")},React.createElement("div",{className:"content"},React.createElement("div",{className:"item"},"店铺名称"),React.createElement("div",{className:"item"},s.appName),React.createElement("div",{className:"item"},"联系电话"),React.createElement("div",{className:"item"},s.phone))))),1!=r.is_owner&&React.createElement("div",{className:"receive-btn",onClick:this.getVIPCardForUser},"领取会员卡")):0==c&&React.createElement("div",{className:"no-receive-card"},React.createElement("div",{className:"tip-area"},React.createElement("img",{className:"tip-img",src:"http://cdn.jisuapp.cn/zhichi_frontend/static/webapp/images/no-vip.png"}),React.createElement("span",{className:"tip-text-1"},"暂无可用会员卡"),React.createElement("span",{className:"tip-text-2"},"获取方式，可留意店家消息")))))}}]),t}(g.default);t.default=h},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(0),i=n(o),s=a(3),r=n(s),c=a(1),l=n(c),d=a(2),u=n(d),m=a(5),p=a(6),f=a(11),g=a(7),h=n(g);a(415);var v=function(e){function t(e){(0,i.default)(this,t);var a=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={topNavBarData:{isDefault:0,title:"会员权益"},slideData:[],currentIndex:0,startX:0,moveX:0,cardListData:[],currentCard:{},requesting:!1,currentComboIndex:0,price:0,cardId:"",isPaidCard:"",isRenew:"",isNeedCollect:0,userPaidVipCard:{},userVipCard:{},specialNote:"",isVipBenefitDay:0,isUserDiyLogo:!1,loading:!0,franchiseeId:""},a.touchStart=function(e){var t=e.changedTouches[0].clientX;a.setData({startX:t})},a.touchMove=function(e){var t=e.changedTouches[0].clientX,n=t-a.data.startX,o=a.data.currentIndex,i=a.data.slideData.length;o<=1&&n>=0||o>=i-2&&n<=0||(a.setData({moveX:n}),Math.abs(n)>=250&&(a.setData({startX:a.data.startX+n,moveX:0}),n>0&&a.data.currentIndex>0?a.setData({startX:a.data.startX+n,currentIndex:a.data.currentIndex-1,moveX:0}):n<=0&&a.data.currentIndex<i&&a.setData({startX:a.data.startX+n,currentIndex:a.data.currentIndex+1,moveX:0})),a.setCurrentCard())},a.touchEnd=function(e){var t=e.changedTouches[0].clientX,n=t-a.data.startX,o=a.data.currentIndex,i=a.data.slideData.length;o<1&&n>0||o>i-2&&n<0||(a.setData({moveX:n}),0===n?(t>250||t<125)&&a.setData({currentIndex:t>250?a.data.currentIndex+1:t<125?a.data.currentIndex-1:"",moveX:0}):a.setData({currentIndex:n>0?a.data.currentIndex-1:a.data.currentIndex+1,moveX:0}),a.setCurrentCard())},a.getAllVipCardInfo=function(){var e=a;m.appMethod.sendRequest({url:"/index.php?r=appVipCard/getUserAccountSurvey",method:"post",data:{sub_shop_app_id:e.data.franchiseeId,card_type:e.data.cardtype},hideLoading:!1,success:function(t){var a=t.data.all_vip_card,n=[],o=e.data.isPaidCard,i=e.data.cardId,s=[],r=t.data.user_paid_vip_card?t.data.user_paid_vip_card:{},c=t.data.user_vip_card?t.data.user_vip_card:{};a.map(function(e){(0!=e.condition_type||o&&!i)&&(1!=e.condition_type||o&&!i)?2==e.condition_type&&(e.id===c.vip_id||e.id===r.vip_id?n.push(e.logo):n.push(e.pre_logo||e.logo),s.push(e)):(e.id===c.vip_id||e.id===r.vip_id?n.push(e.logo):n.push(e.pre_logo||e.logo),s.push(e))}),n.forEach(function(e,t){-1!==e.indexOf("/vip-card/")?s[t].is_show_title=1:s[t].is_show_title=0}),e.setData({cardListData:s,slideData:n,userPaidVipCard:r,userVipCard:c,isVipBenefitDay:t.data.is_vip_benefit_day}),e.data.cardId&&e.setCurrentIndex(e.data.cardId),e.setCurrentCard()},complete:function(t){e.setData({loading:!1})}})},a.setCurrentIndex=function(e){var t=a.data.cardListData,n=0;t.forEach(function(t,o){1==a.data.isPaidCard||1==a.data.isRenew?2==t.condition_type&&t.id==e&&(n=o):0!=t.condition_type&&1!=t.condition_type||t.id!=e||(n=o)}),a.setData({currentIndex:n})},a.setCurrentCard=function(){var e=a.data.cardListData[a.data.currentIndex],t=0,n=[],o=!1;if(e){if(0==e.condition_type)e.condition_text=["无门槛"];else if(1==e.condition_type){if(e.condition_text=[],"-1"!==e.trade_count&&e.condition_text.push("累计交易成功"+e.trade_count+"笔"),"-1"!==e.consume_count){var i="";e.condition_text.length&&(i+="或"),i+="累计消费金额"+e.consume_count+"元",e.condition_text.push(i)}if("-1"!==e.integral_count){var s="";e.condition_text.length&&(s+="或"),s+="累计积分达到"+e.integral_count+"分",e.condition_text.push(s)}}else 2==e.condition_type&&(e.condition_text=["付费购买"]);e.combo&&!Array.isArray(e.combo)&&(e.combo=JSON.parse(e.combo)),e.combo&&(e.combo=e.combo.map(function(e){return e.price&&(e.price=Number(e.price).toFixed(2)),e})),e.price&&(t=e.price),e.coupon_list&&Array.isArray(e.coupon_list)&&e.coupon_list.length&&(e.coupon_list=e.coupon_list.map(function(e){return e.name="0"===e.type?"满减券":"1"===e.type?"打折券":"2"===e.type?"代金券":"3"===e.type?"兑换券":"4"===e.type?"储值券":"5"===e.type?"通用券":"6"===e.type?"次数券":"",e})),e.birthday_coupon_list&&Array.isArray(e.birthday_coupon_list)&&e.birthday_coupon_list.length&&(e.birthday_coupon_list=e.birthday_coupon_list.map(function(e){return e.name="0"===e.type?"满减券":"1"===e.type?"打折券":"2"===e.type?"代金券":"3"===e.type?"兑换券":"4"===e.type?"储值券":"5"===e.type?"通用券":"6"===e.type?"次数券":"",e})),e.coupon_list&&e.coupon_list.length&&n.push("优惠券"),e.balance&&0!=e.balance&&n.push("储值"),e.integral&&0!=e.integral&&n.push("积分"),-1===a.data.slideData[a.data.currentIndex].indexOf("/vip-card/")&&(o=!0),a.setData({currentCard:e,currentComboIndex:0,price:t,specialNote:n.join("、")+"在付费会员卡有效期限内每月赠送一次",isUserDiyLogo:o})}},a.addPaidCardOrder=function(){var e=a;a.setData({requesting:!0}),m.appMethod.sendRequest({url:"/index.php?r=appVipCard/addPaidVipCardOrder",method:"post",data:{data_id:e.data.currentCard.id,price:e.data.price,sub_shop_app_id:e.data.franchiseeId},hideLoading:!1,success:function(t){var a=t.data;e.payOrder(a)}})},a.getCollectUserinfoConfig=function(){var e=a;m.appMethod.getUserInfo();m.appMethod.sendRequest({url:"/index.php?r=appVipCard/getCollectUserinfoConfig",method:"post",hideLoading:!0,data:{sub_shop_app_id:e.data.franchiseeId},success:function(t){e.setData({isNeedCollect:t.data.need_collect_info?t.data.need_collect_info:0})}})},a.payOrder=function(e){function t(){o.data.isNeedCollect?m.appMethod.turnToPage("/pages/userCenter/userCenter?id="+o.data.currentCard.id):m.appMethod.turnToPage("/pages/userCenterComponentPage/userCenterComponentPage")}function n(){m.appMethod.turnToPage("/pages/userCenterComponentPage/userCenterComponentPage")}var o=a;if(0==a.data.price)return void m.appMethod.sendRequest({url:"/index.php?r=AppShop/paygoods",data:{order_id:e,total_price:0},success:function(e){t()},fail:function(){n()},complete:function(){o.setData({requesting:!1})}});var i="/userCenterComponentPage";o.data.isNeedCollect&&(i="/userCenter?id="+o.data.currentCard.id),m.appMethod.goPay({orderId:e,successUrl:i,failUrl:"/userCenterComponentPage",cancel:n}),o.setData({requesting:!1})},a.selectCombo=function(e){var t=+e.currentTarget.dataset.index,n=a.data.currentCard,o=0==t?n.price:n.combo[t-1].price?n.combo[t-1].price:n.combo[t-1].original_price;a.setData({currentComboIndex:t,price:o})},a.gotoMemberDay=function(){m.appMethod.turnToPage("/eCommerce/pages/memberDay/memberDay")},document.title="会员权益",a}return(0,u.default)(t,e),(0,r.default)(t,[{key:"componentWillMount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,p.getCurrentPageQueryParams)(),t=e.id||"",a=e.is_paid_card||"",n=e.is_renew||"",o=e.franchisee||"",i=e.cardtype||"";this.setData({cardId:t,isPaidCard:a,isRenew:n,franchiseeId:o,cardtype:i}),this.getAllVipCardInfo(),this.getCollectUserinfoConfig()}},{key:"render",value:function(){var e=this,t=this.state,a=t.cardListData,n=t.currentCard,o=t.isVipBenefitDay,i=t.currentIndex,s=t.moveX,r=t.slideData,c=t.userVipCard,l=t.userPaidVipCard,d=t.loading,u=t.isUserDiyLogo,m=t.currentComboIndex,g=t.specialNote,h=t.requesting;return React.createElement("div",{className:"official-page vip-benefits"},React.createElement("div",{className:"content",style:(0,p.convertLineStyleData)("background: "+(a.length?"url(https://cdn.jisuapp.cn/zhichi_frontend/static/webapp/images/vip-card/more-power-bg.jpg)":"#3e3935"))},React.createElement("div",{className:"slide-wrapper"},!!o&&React.createElement("div",{className:"member-day-block",onClick:this.gotoMemberDay},React.createElement("div",{className:"member-day",style:(0,p.convertLineStyleData)("background-color: "+(n.style_config&&n.style_config.vip_benefit_day?n.style_config.vip_benefit_day:"#FF7100"))},"会员日")),r.map(function(t,n){return React.createElement("div",{className:"slide-item "+(n===i?"active":""),style:(0,p.convertLineStyleData)("left: "+(250*(n+1-i)+s)+"rpx"),key:n,onTouchStart:e.touchStart,onTouchMove:e.touchMove,onTouchEnd:e.touchEnd},React.createElement("div",{className:"image-block"},React.createElement("img",{src:t}),a[n].is_show_title&&React.createElement("div",{className:"card-name"},React.createElement("span",null,a[n].title))))}),(c.vip_id===n.id||l.vip_id===n.id)&&!!a.length&&React.createElement("img",{className:"star-img",src:"https://cdn.jisuapp.cn/zhichi_frontend/static/webapp/images/vip-card/vip-benefit-star.svg"})),0===a.length&&!d&&React.createElement("div",{className:"empty-data"},"暂无会员卡"),!!a.length&&React.createElement("div",{className:"detail"},!!u&&React.createElement("div",{className:"detail-item"},React.createElement("div",{className:"top-block"},React.createElement("div",{className:"name"},"名称"),React.createElement("div",{className:"condition",style:(0,p.convertLineStyleData)("color: "+(n.style_config&&n.style_config.condition?n.style_config.condition:"#FF7100"))},n.title))),React.createElement("div",{className:"detail-item"},React.createElement("div",{className:"top-block"},React.createElement("div",{className:"name"},"状态"),React.createElement("div",{className:"condition",style:(0,p.convertLineStyleData)("color: "+(n.style_config&&n.style_config.condition?n.style_config.condition:"#FF7100"))},l.vip_id==n.id||c.vip_id==n.id?"已领取":"未领取"))),React.createElement("div",{className:"detail-item"},React.createElement("div",{className:"top-block"},React.createElement("div",{className:"name"},"获取条件"),React.createElement("div",{className:"condition",style:(0,p.convertLineStyleData)("color: "+(n.style_config&&n.style_config.condition?n.style_config.condition:"#FF7100"))},Array.isArray(n.condition_text)&&n.condition_text.map(function(e,t){return React.createElement("div",{className:"condition-item",key:t},e)})))),2==n.condition_type&&React.createElement("div",{className:"detail-item detail-benefit"},React.createElement("div",{className:"top-block m-b-30"},React.createElement("div",{className:"name"},"优惠套餐")),React.createElement(f.ScrollView,{"scroll-x":"true",className:"benefits"},React.createElement("div",{className:"benefit-item "+(0==m?"active":""),"data-index":"0",onClick:this.selectCombo},React.createElement("div",{className:"icon-block",style:(0,p.convertLineStyleData)("border-color: "+(0!=m?"#d5d5d5":n.style_config&&n.style_config.condition?n.style_config.condition:"#ffebdc"))},0==m&&React.createElement("label",{className:"ico-moon icon-gou",style:(0,p.convertLineStyleData)("color: "+(n.style_config&&n.style_config.condition?n.style_config.condition:"#FF7100"))})),React.createElement("div",{className:"content-block"},React.createElement("div",{className:"count"},"1个月"),React.createElement("div",{className:"price",style:(0,p.convertLineStyleData)("color: "+(n.style_config&&n.style_config.condition?n.style_config.condition:"#FF7100"))},"¥",React.createElement("label",null,n.price)))),n.combo&&n.combo.map(function(t,a){return React.createElement("div",{className:"benefit-item "+(m===a+1?"active":""),"data-index":a+1,key:a,onClick:e.selectCombo},React.createElement("div",{className:"icon-block",style:(0,p.convertLineStyleData)("border-color: "+(m!==a+1?"#d5d5d5":n.style_config&&n.style_config.condition?n.style_config.condition:"#ffebdc"))},m===a+1&&React.createElement("label",{className:"ico-moon icon-gou",style:(0,p.convertLineStyleData)("color: "+(n.style_config&&n.style_config.condition?n.style_config.condition:"#FF7100"))})),React.createElement("div",{className:"content-block"},React.createElement("div",{className:"count"},t.num+"个月"),React.createElement("div",{className:"price",style:(0,p.convertLineStyleData)("color: "+(n.style_config&&n.style_config.condition?n.style_config.condition:"#FF7100"))},"¥",React.createElement("label",null,t.price?t.price:t.original_price)),React.createElement("div",{className:"cut-price"},"¥",React.createElement("label",null,t.original_price))))}))),React.createElement("div",{className:"detail-item"},React.createElement("div",{className:"top-block m-b-30"},React.createElement("div",{className:"name"},"会员权益")),React.createElement("div",{className:"about-wrapper"},n.discount&&0!=n.discount&&React.createElement("div",{className:"about-item"},React.createElement("div",{className:"name"},"折扣"),React.createElement("div",{className:"about"},"所有商品一律"+n.discount+"折")),!(!n.coupon_list||!n.coupon_list.length)&&React.createElement("div",{className:"about-item"},React.createElement("div",{className:"name"},"优惠券"),React.createElement("div",{className:"about"},n.coupon_list.map(function(e,t){return React.createElement("div",{key:t},e.name+"-"+e.title+" -"+e.num+"张")}))),n.integral&&0!=n.integral&&React.createElement("div",{className:"about-item"},React.createElement("div",{className:"name"},"积分"),React.createElement("div",{className:"about"},"开卡赠送"+n.integral+"积分")),n.balance&&0!=n.balance&&React.createElement("div",{className:"about-item"},React.createElement("div",{className:"name"},"储值"),React.createElement("div",{className:"about"},"开卡赠送储值"+n.balance+"元")),n.is_free_postage&&"0"!==n.is_free_postage&&React.createElement("div",{className:"about-item"},React.createElement("div",{className:"name"},"包邮"),React.createElement("div",{className:"about"},"所有商品包邮")),!(!n.birthday_coupon_list||!n.birthday_coupon_list.length)&&React.createElement("div",{className:"about-item"},React.createElement("div",{className:"name"},"生日优惠"),React.createElement("div",{className:"about"},n.birthday_coupon_list.map(function(e,t){return React.createElement("div",{key:t},e.name+"-"+e.title)}))))),(n.phone||n.description||2==n.condition_type)&&React.createElement("div",{className:"detail-item"},React.createElement("div",{className:"about-wrapper"},""!==g&&2==n.condition_type&&React.createElement("div",{className:"about-item"},React.createElement("div",{className:"name"},"特别说明"),React.createElement("div",{className:"about"},g,React.createElement("div",null,"付费卡购买成功后不支持退款"))),n.phone&&React.createElement("div",{className:"about-item"},React.createElement("div",{className:"name"},"联系"),React.createElement("div",{className:"about"},n.phone)),n.description&&React.createElement("div",{className:"about-item"},React.createElement("div",{className:"name"},"使用须知"),React.createElement("span",{className:"about"},n.description))))),2==n.condition_type&&React.createElement("form",{onSubmit:this.addPaidCardOrder},React.createElement("button",{className:"buy-btn",disabled:h,onClick:this.addPaidCardOrder,style:(0,p.convertLineStyleData)("background-color: "+(n.style_config&&n.style_config.recv_button?n.style_config.recv_button:"#FF7100"))},l.vip_id==n.id?"续费会员":"立即购买"))))}}]),t}(h.default);t.default=v},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(31),i=n(o),s=a(0),r=n(s),c=a(3),l=n(c),d=a(1),u=n(d),m=a(2),p=n(m);a(32);var f=a(4),g=n(f),h=a(5),v=a(15),_=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(v),y=a(12),E=n(y),b=a(6),N=a(58),R=a(7),k=n(R);a(417);var w={date:function(e){var t=new RegExp("-","img");return e.replace(t,"月")+"日"},week:function(e){switch(e){case"0":return"日";case"1":return"一";case"2":return"二";case"3":return"三";case"4":return"四";case"5":return"五";case"6":return"六"}}},x=function(e){function t(e){(0,r.default)(this,t);var a=(0,u.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={customNumArr:Array.from(new Array(101).keys()).slice(1),take_meal_type_index:0,take_meal_type_arr:[],take_meal_type_text:["","送餐到桌","前台自取"],dining_mode_arr:["堂食","打包"],take_meal_type:1,people_num:1,dining_mode:1,is_addDishing:!1,only_me:!1,goodsList:[],selectAddress:{},discountList:[],selectDiscountInfo:{},orderRemark:"",is_self_delivery:0,express_fee:"",balance:"",useBalance:!0,deduction:"",discount_cut_price:"",group_buy_price:"",original_price:"",totalPayment:"",storeConfig:"",noAdditionalInfo:!0,is_group:"",limit_buy:"",teamToken:"",exchangeCouponData:{dialogHidden:!0,goodsInfo:{},selectModelInfo:{},hasSelectGoods:!1,voucher_coupon_goods_info:{}},pickUpType:"",cashOnDelivery:!1,selectDelivery:"",isShowSameJourneyTime:!1,expressAddressNull:!1,seckillType:0,storeStyle:{}},a.isFromSelectAddress=!1,a.franchisee_id="",a.cart_id_arr=[],a.cart_id_arr_my=[],a.cart_data_arr=[],a.requesting=!1,a.additional_info={},a.is_group="",a.inputTimer="",a.hasRequiredSuppInfo=!1,a.downcountArr=[],a.memberDiscountRef=g.default.createRef(),a.getDiningData=function(){a.data.ec_location_id?a.scanInitUserInfo("",a.data.ec_location_id,a.checkIsAddDishing):a.getCalculationInfo()},a.dataInitial=function(){a.getAppECStoreConfig(),a.getCartList()},a.getCartList=function(){var e=a,t=a.franchisee_id;a.cart_id_arr_my=[],h.appMethod.sendRequest({url:"/index.php?r=AppShop/cartList",data:{page:1,page_size:100,sub_shop_app_id:t,parent_shop_app_id:t?h.appMethod.globalData.appId:""},success:function(t){var a=[];if(e.cart_id_arr.length)for(var n=0;n<=t.data.length-1;n++)e.cart_id_arr.indexOf(t.data[n].id)>=0&&a.push(t.data[n]);else a=t.data;for(var n=0;n<=a.length-1;n++){var o=a[n],i=o.model_value;o.model_value_str=i&&i.join?i.join("； "):"",e.cart_data_arr.push({cart_id:o.id,goods_id:o.goods_id,model_id:o.model_id,num:o.num}),e.cart_id_arr_my.push(o.id)}for(var n=0;n<a.length;n++)a[n].downCount={hours:"00",minutes:"00",seconds:"00"},0==a[n].seckill_start_state?a[n].downcount=h.appMethod.beforeSeckillDownCount(a[n],e,"goodsList["+n+"]"):1==a[n].seckill_start_state&&(a[n].downcount=h.appMethod.duringSeckillDownCount(a[n],e,"goodsList["+n+"]")),a[n]&&e.downcountArr.push(a[n].downcount);e.setData({goodsList:a})}})},a.getCalculationInfo=function(){var e=a,t={};4==a.data.pickUpType&&(t={ec_dining_data:{ordering_food_type:1,dining_mode:e.data.dining_mode,people_num:e.data.people_num,take_meal_type:e.data.take_meal_type,location_id:e.data.ec_location_id,account_type:e.data.account_type}}),h.appMethod.sendRequest({url:"/index.php?r=AppShop/calculationPrice",method:"post",data:{ecommerce_info:t,sub_shop_app_id:a.franchisee_id,address_id:4==a.data.pickUpType?"":1==a.data.pickUpType?a.data.selectAddressId:a.data.selectSameJourneyId,cart_id_arr:a.cart_id_arr,is_balance:a.data.useBalance?1:0,is_self_delivery:a.data.is_self_delivery,pick_up_type:a.data.pickUpType,selected_benefit:4==a.data.pickUpType&&2==a.data.account_type?"":a.data.selectDiscountInfo,voucher_coupon_goods_info:a.data.exchangeCouponData.voucher_coupon_goods_info},success:function(t){var a=t.data,n=a.can_use_benefit,o=a.goods_info,i=[],s=a.selected_benefit_info,r=[],c=[],l=0;if(a.dining_status_data&&1==e.data.pickUpTypeArr.length&&4==e.data.pickUpType){0!=a.dining_status_data.in_business_time||h.appMethod.showModal({content:"店铺不在营业时间内",confirmText:"知道了",confirm:function(){h.appMethod.turnBack()}})}2==e.data.pickUpType&&a.intra_city_status_data&&(0==a.intra_city_status_data.in_distance?h.appMethod.showModal({content:"地址不在配送范围内",confirmText:"去更换",showCancel:!0,confirm:function(){e.goSameJourneyAddress()},cancel:function(){e.setData({selectSameJourney:""})}}):0==a.intra_city_status_data.in_business_time&&h.appMethod.showModal({content:"店铺歇业中，请更换其他配送方式",confirmText:"去更换",confirm:function(){e.setData({isShowPickMask:!0})}}));var d=[];n.coupon_benefit&&n.coupon_benefit.length&&d.push({label:"coupon",value:n.coupon_benefit}),n.all_vip_benefit&&n.all_vip_benefit.length&&d.push({label:"vip",value:n.all_vip_benefit}),Array.isArray(n.integral_benefit)||n.integral_benefit&&d.push({label:"integral",value:[n.integral_benefit]}),"coupon"==s.discount_type&&3==s.type&&0==e.data.exchangeCouponData.hasSelectGoods&&e.exchangeCouponInit(parseInt(s.value));for(var u=0;u<=o.length-1;u++)o[u].delivery_id&&0!=o[u].delivery_id&&-1==c.indexOf(o[u].id)&&(r.push(o[u].delivery_id),c.push(o[u].id),i.push(o[u]));var m=String(a.original_price-a.group_buy_discount_price);m.split(".")[1]&&(m=Number(m).toFixed(2)),r.length&&!e.hasRequiredSuppInfo&&e.getSuppInfo(r),l=(a.total_original_price-a.original_price).toFixed(2),e.setData({expressAddressNull:!a.address&&e.data.expressAddressNull,selectAddress:1==e.data.pickUpType&&a.address,discountList:d,selectDiscountInfo:s,people_num:a.people_num,box_fee:a.box_fee,server_fee:a.server_fee,tissue_fee:a.tissue_fee,express_fee:a.express_fee,discount_cut_price:a.discount_cut_price,balance:a.balance,deduction:a.use_balance,original_price:a.original_price,group_buy_price:m,totalPayment:a.price,noAdditionalInfo:!r.length,canCashDelivery:a.is_pay_on_delivery,cashOnDelivery:a.price>0&&e.data.cashOnDelivery,selfPayOnDelivery:a.self_pay_on_delivery,activePreferential:l,selectSameJourney:2==e.data.pickUpType&&a.address,additional_goodsid_arr:c,sameJourneyImmediatlyTime:a.intra_city_status_data&&a.intra_city_status_data.deliver_time}),h.appMethod.setPreviewGoodsInfo(i)}})},a.getAppECStoreConfig=function(){h.appMethod.getAppECStoreConfig(function(e){a.setData({storeConfig:e,storeStyle:e.color_config})},a.franchisee_id)},a.remarkInput=function(e){var t=e.target.value;a.setData({orderRemark:t})},a.previewImage=function(e){h.appMethod.previewImage({current:e.currentTarget.dataset.src})},a.clickMinusButton=function(e){var t=e.currentTarget.dataset.index;+a.data.goodsList[t].num<=0||a.changeGoodsNum(t,"minus")},a.clickPlusButton=function(e){var t=e.currentTarget.dataset.index,n=a.data.goodsList[t];""!==a.data.limit_buy&&+n.num>=a.data.limit_buy||a.changeGoodsNum(t,"plus")},a.changeGoodsNum=function(e,t){var n,o=a.data.goodsList[e],i=+o.num,s="plus"==t?i+1:"minus"==t?i-1:Number(t),r=a,c={};if(0==s&&"minus"==t)return void h.appMethod.showModal({content:"确定从购物车删除该商品？",showCancel:!0,confirm:function(){r.cart_data_arr[e].num=s,c["goodsList["+e+"].num"]=s,r.setData(c),r.deleteGoods(e)}});n=o.form_data&&o.form_data.seckill_activity_id?{goods_id:o.goods_id,model_id:o.model_id||"",num:s,sub_shop_app_id:r.franchisee_id,is_seckill:1==o.is_seckill?1:"",form_data:o.form_data}:{goods_id:o.goods_id,model_id:o.model_id||"",num:s,sub_shop_app_id:r.franchisee_id,is_seckill:1==o.is_seckill?1:""},a.data.is_group&&(n.is_group_buy=a.data.is_group?1:0,n.num_of_group_buy_people=a.data.group_buy_people,n.team_token=a.data.teamToken),h.appMethod.sendRequest({hideLoading:!0,url:"/index.php?r=AppShop/addCart",data:n,method:"post",success:function(a){r.cart_data_arr[e].num=s,c["goodsList["+e+"].num"]=s,c["goodsList["+e+"].stock"]="plus"==t?o.stock-1:o.stock+1,c.selectDiscountInfo="",c.exchangeCouponData={dialogHidden:!0,hasSelectGoods:!1,voucher_coupon_goods_info:{}},r.setData(c),r.getCalculationInfo()},fail:function(t){c={},r.cart_data_arr[e].num=i,c["goodsList["+e+"].num"]=i,r.setData(c)}})},a.deleteGoods=function(e){var t,n=a.data.goodsList,o=a;h.appMethod.sendRequest({url:"/index.php?r=AppShop/deleteCart",method:"post",data:{cart_id_arr:[a.cart_data_arr[e].cart_id],sub_shop_app_id:a.franchisee_id},success:function(a){if((t=n.concat([])).splice(e,1),0==t.length)return void h.appMethod.turnBack();for(var i=n[e],s=!0,r=t.length-1;r>=0;r--)if(t[r].id==i){s=!1;break}s&&delete o.additional_info[i],o.cart_data_arr.splice(e,1),o.setData({goodsList:t,selectDiscountInfo:"",exchangeCouponData:{dialogHidden:!0,hasSelectGoods:!1,voucher_coupon_goods_info:{}}}),o.getCalculationInfo()}})},a.confirmPayment=function(e){var t=a,n=a.data.selectDiscountInfo,o=a.data.tostoreOrderType;if(1==a.data.pickUpType&&!a.data.selectAddress)return void a.setData({expressAddressNull:!0});if(4==a.data.pickUpType&&a.data.location_status&&!a.data.ec_location_id&&1==a.data.take_meal_type)return void h.appMethod.showModal({content:"请先扫码获取桌号！"});if(1==a.data.pickUpType&&!a.data.selectAddress)return void h.appMethod.showModal({content:"请完善地址信息",confirmText:"去填写",confirm:function(){t.goToMyAddress()}});if(2==a.data.pickUpType&&!a.data.selectSameJourney)return void h.appMethod.showModal({content:"请完善地址信息",confirmText:"去填写",confirm:function(){t.goSameJourneyAddress()}});if(2==a.data.pickUpType&&!a.data.sameJourneyDateTime&&1!=a.data.sameJourneyTimeType)return void h.appMethod.showModal({content:"请选择取货时间"});if(3==a.data.pickUpType&&!a.data.selectDelivery)return void h.appMethod.showModal({content:"请选择上门自提地址",confirmText:"去填写",confirm:function(){t.toDeliveryList()}});if(3==a.data.pickUpType&&a.data.selfAppointmentSwitch&&!o)return void h.appMethod.showModal({content:"请选择取货时间"});var i=(new Date).getFullYear(),s=i+"-"+a.data.tostoreDateTime+" "+(a.data.tostoreHourTime||"");if(3==a.data.pickUpType&&1==a.data.selfDeliveryPhone&&!E.default.isPhoneNumber(a.data.phone))return void h.appMethod.showModal({content:"请填写正确的手机号"});if(a.data.hasRequiredSuppInfo&&!a.data.deliverydWrite&&!a.data.aloneDeliveryShow)return void h.appMethod.showModal({content:"商品补充信息未填写，无法进行支付",confirmText:"去填写",confirm:function(){t.goToAdditionalInfo()}});if(a.data.aloneDeliveryShow){var r=a.data.additional_info,c=a.data.additional_goodsid_arr[0];if(0==r[c][0].is_required&&""==r[c][0].value)return void h.appMethod.showModal({content:"请填写"+r[c][0].title,confirmText:"确认"})}a.requesting||(a.requesting=!0,h.appMethod.sendRequest({url:"/index.php?r=AppShop/addCartOrder",method:"post",data:{cart_id_arr:a.cart_id_arr,formId:e.detail.formId,sub_shop_app_id:a.franchisee_id,selected_benefit:n,is_balance:4==a.data.pickUpType&&2==a.data.account_type?0:a.data.useBalance?1:0,ecommerce_info:{ec_tostore_data:{ec_tostore_order_type:o,ec_tostore_appointment_time:1!=o&&a.data.selfAppointmentSwitch?s:"",ec_tostore_buyer_phone:a.data.phone||"",ec_tostore_appointment_time_type:a.data.tostoreTimeType||"",ec_tostore_location_id:a.data.locationId||""},intra_city_data:{intra_city_appointment_arrive_time:1==a.data.sameJourneyTimeType?"":a.data.sameJourneyDateTime},ec_dining_data:{ordering_food_type:1,dining_mode:t.data.dining_mode,people_num:t.data.people_num,take_meal_type:t.data.take_meal_type,location_id:t.data.ec_location_id,account_type:t.data.account_type,allow_add_dish:t.data.allow_add_dish,allow_app_account:t.data.allow_app_account}},pick_up_type:a.data.pickUpType,self_delivery_app_store_id:3==a.data.pickUpType?a.data.selectDelivery.id:"",remark:a.data.orderRemark,address_id:1==a.data.pickUpType?a.data.selectAddress.id:4==a.data.pickUpType?"":a.data.selectSameJourney.id,additional_info:a.data.additional_info,voucher_coupon_goods_info:a.data.exchangeCouponData.voucher_coupon_goods_info,is_pay_on_delivery:a.data.cashOnDelivery?1:0},success:function(e){if(t.setData({totalPayment:e.total_price}),4==t.data.pickUpType&&2==t.data.account_type){var a="/eCommerce/pages/diningOrderDetail/diningOrderDetail?detail="+e.data+(t.franchisee_id?"&franchisee="+t.franchisee_id:"");return void h.appMethod.turnToPage(a,1)}if(t.data.cashOnDelivery){var n="/eCommerce/pages/goodsOrderPaySuccess/goodsOrderPaySuccess?detail="+e.data+(t.franchisee_id?"&franchisee="+t.franchisee_id:"");h.appMethod.turnToPage(n,1)}else t.payOrder(e.data)},fail:function(){t.requesting=!1},successStatusAbnormal:function(){t.requesting=!1}}))},a.payOrder=function(e){function t(){var t=4==o.data.pickUpType&&2==o.data.account_type?"diningOrderDetail/diningOrderDetail?detail=":"goodsOrderPaySuccess/goodsOrderPaySuccess?detail=",a="/eCommerce/pages/"+t+e+(o.franchisee_id?"&franchisee="+o.franchisee_id:"")+"&is_group="+!!o.is_group;o.franchisee_id?h.appMethod.turnToPage(a,1):h.appMethod.sendRequest({url:"/index.php?r=AppMarketing/CheckAppCollectmeStatus",data:{order_id:e,sub_app_id:o.franchisee_id},success:function(e){0==e.valid&&(a+="&collectBenefit=1"),h.appMethod.turnToPage(a,1)}})}function n(){var t=4==o.data.pickUpType?"diningOrderDetail/diningOrderDetail?detail=":"goodsOrderDetail/goodsOrderDetail?detail=";if(o.is_group){if(o.data.teamToken)return void h.appMethod.turnBack();h.appMethod.turnToPage("/eCommerce/pages/groupOrderDetail/groupOrderDetail?id="+e+(o.franchisee_id?"&franchisee="+o.franchisee_id:""),1)}else h.appMethod.turnToPage("/eCommerce/pages/"+t+e+(o.franchisee_id?"&franchisee="+o.franchisee_id:""),1)}var o=a;if(0==a.data.totalPayment)return void h.appMethod.sendRequest({url:"/index.php?r=AppShop/paygoods",data:{order_id:e,total_price:0},success:function(e){t()},fail:function(){n()},successStatusAbnormal:function(){n()}});h.appMethod.goPay({orderId:e,successUrl:function(){return(4==o.data.pickUpType&&2==o.data.account_type?"/diningOrderDetail?detail=":"/goodsOrderPaySuccess?detail=")+e+(o.franchisee_id?"&franchisee="+o.franchisee_id:"")+"&is_group="+!!o.is_group}(),failUrl:function(){var t=4==o.data.pickUpType?"/diningOrderDetail?detail=":"/goodsOrderDetail?detail=";return o.is_group?"/groupOrderDetail?id="+e+(o.franchisee_id?"&franchisee="+o.franchisee_id:""):t+e+(o.franchisee_id?"&franchisee="+o.franchisee_id:"")}(),cancel:n})},a.goToMyAddress=function(){var e=a.data.selectAddress?a.data.selectAddress.id:"";a.isFromSelectAddress=!0,h.appMethod.turnToPage("/eCommerce/pages/myAddress/myAddress?id="+e)},a.useBalanceChange=function(e){a.setData({useBalance:e}),a.getCalculationInfo()},a.useCashDelivery=function(e){0==a.data.selfPayOnDelivery&&e.detail.value&&(a.setData({is_self_delivery:!1}),a.deliveryWayChange({currentTarget:{dataset:{type:0}}})),a.setData({cashOnDelivery:e.detail.value})},a.goToAdditionalInfo=function(){h.appMethod.setGoodsAdditionalInfo(a.additional_info),h.appMethod.turnToPage("/eCommerce/pages/goodsAdditionalInfo/goodsAdditionalInfo")},a.exchangeCouponInit=function(e){var t=a;h.appMethod.sendRequest({url:"/index.php?r=AppShop/getGoods",data:{data_id:e},success:function(e){var a=e.data[0].form_data,n=[],o={models:[],price:0,modelId:"",models_text:"",imgurl:""};a.model_items.length?(o.price=Number(a.model_items[0].price),o.imgurl=a.model_items[0].img_url,o.modelId=a.model_items[0].id):(o.price=Number(a.price),o.imgurl=a.cover);for(var i in a.model)i&&(n.push(a.model[i]),o.models.push(a.model[i].subModelId[0]),o.models_text+="“"+a.model[i].subModelName[0]+"” ");a.model=n,t.setData({"exchangeCouponData.dialogHidden":!1,"exchangeCouponData.goodsInfo":a,"exchangeCouponData.selectModelInfo":o})},successStatusAbnormal:function(){h.appMethod.showModal({content:"兑换的商品已下架"})}})},a.exchangeCouponHideDialog=function(){a.setData({selectDiscountInfo:{title:"不使用优惠",name:"无",no_use_benefit:1},"exchangeCouponData.dialogHidden":!0,"exchangeCouponData.hasSelectGoods":!1,"exchangeCouponData.voucher_coupon_goods_info":{}}),a.getCalculationInfo()},a.exchangeCouponSelectSubModel=function(e){var t=e.target.dataset,n=t.modelIndex,o=t.submodelIndex,i={},s=a.data.exchangeCouponData.selectModelInfo.models,r=a.data.exchangeCouponData.goodsInfo.model,c="";s[n]=r[n].subModelId[o];for(var l=0;l<s.length;l++)for(var d=r[l].subModelId,u=0;u<d.length;u++)s[l]==d[u]&&(c+="“"+r[l].subModelName[u]+"” ");i["exchangeCouponData.selectModelInfo.models"]=s,i["exchangeCouponData.selectModelInfo.models_text"]=c,a.setData(i),a.exchangeCouponResetSelectCountPrice()},a.exchangeCouponResetSelectCountPrice=function(){for(var e=a.data.exchangeCouponData.selectModelInfo.models.join(","),t=a.data.exchangeCouponData.goodsInfo.model_items,n={},o=t.length-1;o>=0;o--)if(t[o].model==e){n["exchangeCouponData.selectModelInfo.stock"]=t[o].stock,n["exchangeCouponData.selectModelInfo.price"]=t[o].price,n["exchangeCouponData.selectModelInfo.modelId"]=t[o].id,n["exchangeCouponData.selectModelInfo.imgurl"]=t[o].img_url;break}a.setData(n)},a.exchangeCouponConfirmGoods=function(){var e=a,t=e.data.exchangeCouponData.goodsInfo,n=t.model,o=e.data.exchangeCouponData.selectModelInfo.models,i="";if(o.length>0)for(var s=0;s<o.length;s++)for(var r=n[s].subModelId,c=0;c<r.length;c++)o[s]==r[c]&&(i+=n[s].subModelName[c]+"； ");t.model_value_str=i,e.setData({"exchangeCouponData.dialogHidden":!0,"exchangeCouponData.selectModelInfo":{},"exchangeCouponData.hasSelectGoods":!0,"exchangeCouponData.voucher_coupon_goods_info":{goods_id:t.id,num:1,model_id:e.data.exchangeCouponData.selectModelInfo.modelId},"exchangeCouponData.goodsInfo":t}),e.getCalculationInfo()},a.inputGoodsCount=function(e){var t=+e.detail.value,n=e.target.dataset.index;isNaN(t)||t<=0||(clearTimeout(a.inputTimer),a.inputTimer=setTimeout(function(){a.changeGoodsNum(n,t)},500))},a.toDeliveryList=function(){var e=a,t="";e.franchisee_id?(t+="?franchiseeId="+e.franchisee_id,t+=e.data.selectDelivery.id?"&deliveryId="+e.data.selectDelivery.id:""):t+=e.data.selectDelivery.id?"?deliveryId="+e.data.selectDelivery.id:"",h.appMethod.turnToPage("/eCommerce/pages/goodsDeliveryList/goodsDeliveryList"+t)},a.showMemberDiscount=function(){a.memberDiscountRef.current.showDialog(a.data.selectDiscountInfo)},a.afterSelectedBenefit=function(e){a.setData({selectDiscountInfo:e.detail.selectedDiscount,"exchangeCouponData.hasSelectGoods":!1,"exchangeCouponData.voucher_coupon_goods_info":{}}),a.getCalculationInfo()},a.getSuppInfo=function(e){var t=a;h.appMethod.sendRequest({hideLoading:!0,url:"/index.php?r=pc/AppShop/GetDelivery",method:"post",data:{delivery_ids:e},success:function(e){for(var a=0;a<e.data.length;a++)for(var n=e.data[a].delivery_info,o=0;o<n.length;o++)0==n[o].is_required&&1==n[o].is_hidden&&t.setData({hasRequiredSuppInfo:!0}),1==n[o].is_hidden&&t.setData({noAdditionalInfo:!1});if(1==e.data.length&&1==t.data.additional_goodsid_arr.length){for(var i=0,s=0,r=0;r<e.data[0].delivery_info.length;r++)1==e.data[0].delivery_info[r].is_hidden&&(i++,s=r);if(1==i){var c={};c[t.data.additional_goodsid_arr[0]]=[],c[t.data.additional_goodsid_arr[0]].push({title:e.data[0].delivery_info[s].name,type:e.data[0].delivery_info[s].type,is_required:e.data[0].delivery_info[s].is_required,value:""}),t.setData({additional_info:c,aloneDeliveryShow:!0})}}}})},a.selectPickMethod=function(e,t){var n=a,o=a.cart_id_arr,i=t||a.data.seckillType;h.appMethod.sendRequest({url:"/index.php?r=AppEcommerce/getCanUsePickUpTypeAtAddOrder",method:"post",data:{cart_id_arr:o},success:function(t){var a=t.data.goods_pick_up_type_arr;if(1==i)for(var o=0;o<a.length;o++)4==a[o]&&a.splice(o,1);if(n.setData({diningData:t.data.dining_data||"",selectDiscountInfo:{},pickUpTypeArr:a,intraCityData:t.data.intra_city_data,isShowPickMask:"first"!=e,pickUpType:n.data.pickUpType&&-1!=!n.data.pickUpType?n.data.pickUpType:t.data.goods_pick_up_type_arr[0]}),"first"==e){switch(n.data.pickUpType){case"4":n.getDiningFuncSetting(n.getDiningData);break;case"3":n.getSelfDeliveryList();break;case"2":if(0==t.data.intra_city_data.in_business_time&&1==a.length)return void h.appMethod.showModal({content:"店铺歇业中，不支持此配送！",confirmText:"知道了",confirm:function(e){h.appMethod.turnBack()}});n.setData({sameJourneyTimeType:1})}4!=n.data.pickUpType&&n.getCalculationInfo()}},successShowModalConfirm:function(){h.appMethod.turnBack()}})},a.deliveryWayChange=function(e){var t=e.currentTarget.dataset.type;a.setData({selectDiscountInfo:{},pickUpType:t,sameJourneyTimeType:2==t?1:"",isShowPickMask:!1,cashOnDelivery:!1}),3==t?a.getSelfDeliveryList():4==t&&a.getDiningFuncSetting(a.getDiningData),4!=t&&a.getCalculationInfo()},a.goSameJourneyAddress=function(e){var t=a.data.selectSameJourney;a.isFromSelectAddress=!0,h.appMethod.turnToPage("/eCommerce/pages/goodsSameJourney/goodsSameJourney?from=preview&sameJourneyId="+(t?t.id:"")+"&franchiseeId="+a.franchisee_id)},a.getGoodsStoreSet=function(e){var t=a;h.appMethod.sendRequest({url:"/index.php?r=AppEcommerce/getPickUpGoodsTypeSetting",data:{pick_up_type:e,sub_shop_app_id:a.franchisee_id},success:function(a){var n=a.data.config_data;3==e&&n?(t.setData({selfAppointmentSwitch:1==n.pick_up_time_status&&1==n.appointment.status,onlyImmediatlyPickSwitch:1==n.pick_up_time_status&&1!=n.appointment.status&&1==n.immediate_info.self_pcik_up_status,selfDeliveryPhone:n.is_phone,selfDeliveryScan:1==n.pick_up_time_status&&1==n.immediate_info.status&&1==n.immediate_info.scan_qrcode_status}),t.data.onlyImmediatlyPickSwitch&&t.showServiceTime("onlyImme")):2==e&&n?t.getsameJourneyTime(n.business_rule):4==e&&t.setData({app_store_data:a.data.app_store_data||""})}})},a.showSameJourneyTime=function(){if(!a.data.selectSameJourney.id)return void h.appMethod.showModal({content:"请先选择地址"});a.getGoodsStoreSet(2)},a.getsameJourneyTime=function(e){var t=[],n=(new Date).getMinutes()+ +Number(a.data.sameJourneyImmediatlyTime),o=(new Date).getHours();if(n>=60&&(o++,n-=60),1==e.type)for(var i=!0;o<24;o++)i&&n>0&&n<=30?(i=!1,t.push(o+":30")):(i&&n>30&&(i=!1,o++),t.push(o+":00"),t.push(o+":30"));else{var s=(new Date).getDay(),r=void 0;2==e.type&&e.custom.business_time.map(function(e){0==s&&(s=7),1==e.business_week[s-1]&&(r=e.business_time_interval)}),console.log(r),r&&r.map(function(e){var a=o,i=Number(e.end_time.substring(0,2)),s=Number(e.start_time.substring(0,2)),r=Number(e.end_time.substring(0,2)),c=(Number(e.start_time.substring(3,5)),Number(e.end_time.substring(3,5)));if(o<=s)o=s,n=0;else if(o>r)return;for(;o<=r;o++)o==a&&n<=30&&0!=n?t.push(o+":30"):o==a&&n>30||(o==i&&c<30?t.push(o+":00"):o==i&&0==c||(t.push(o+":00"),t.push(o+":30")))})}a.setData({sameJourneyHoursArr:t,isShowSameJourneyTime:!0})},a.selectSameJourneyTime=function(e){var t=e.currentTarget.dataset.type,n=a.data.sameJourneyHoursArr,o=e.currentTarget.dataset.index,i=n[o];a.setData({sameJourneyTimeType:"immedia"==t?1:2,sameJourneyDateTime:"immedia"==t?"":i,isShowSameJourneyTime:!1})},a.inputFormControl=function(e){var t=a.data.additional_info;t[a.data.additional_goodsid_arr[0]][0].value=e.detail.value,a.setData({additional_info:t})},a.addDeliveryImg=function(){var e=a,t=a.data.additional_info,n=a.data.additional_goodsid_arr[0],o=t[n][0].value||[];h.appMethod.chooseImage(function(a){t[n][0].value=o.concat(a),e.setData({additional_info:t})},9-t[n][0].value.length)},a.deleteImage=function(e){var t=a,n=a.data.additional_info,o=a.data.additional_goodsid_arr[0],i=e.currentTarget.dataset.imageIndex,s=n[o][0].value;s.splice(i,1),n[o][0].value=s,t.setData({additional_info:n})},a.closeGoodsPick=function(){a.setData({isShowPickMask:!1,isShowServiceTime:!1,isShowSameJourneyTime:!1})},a.showServiceTime=function(e){var t=a.data.selectDelivery,n=a;h.appMethod.sendRequest({url:"/index.php?r=AppEcommerce/GetEcTostoreAppointmentDateList",data:{sub_shop_app_id:n.franchisee_id,self_delivery_app_store_id:t.id||""},success:function(t){var a=t.data;if("onlyImme"==e)return void n.setData({waitingQueueTime:a.duration_time,tostoreOrderType:1});var o=a.setting_data.appointment.appointment_time_type,i="",s="",r=a.date_arr,c=a.setting_data.appointment.advance_appointment_info,l=(new Date).getHours(),d=a.business_time_rule,u=24,m=(new Date).getMinutes(),p=!1,f=1==a.setting_data.immediate_info.status&&1==c.type,g=!0;if(2==d.type){var h=r[0].week,v=void 0;d.custom.business_time.map(function(e){0==h&&(h=7),1==e.business_week[h-1]&&(v=e.business_time_interval,u=+v[v.length-1].end_time.substring(0,2))}),v&&v.map(function(e){var t=Number(e.start_time.substring(0,2)),a=Number(e.end_time.substring(0,2)),n=Number(e.start_time.substring(3,5));Number(e.end_time.substring(3,5));(l>t&&l<a||l==t&&m>=n)&&(p=!0)})}else p=!0;for(var _=0;_<r.length;_++)if(0==_&&(2==c.type&&+c.num+l>=u||1==c.type&&l>=u)&&(r[_].is_vaild=0,f=!1),1==r[_].is_vaild&&1!=o){i=r[_].date,s=r[_].week;break}r.map(function(e){1==e.is_vaild&&(g=!1)}),n.businessTimeType=d.type,n.setData({getEcTostoredate:a,waitingQueueTime:a.duration_time,tostoreTimeType:o,isShowServiceTime:!0,noImmediaPick:f,tostoreDateTime:n.data.tostoreDateTime?n.data.tostoreDateTime:i,tostoreWeekTime:n.data.tostoreWeekTime?n.data.tostoreWeekTime:s,businessTimeRule:1==d.type?"":d.custom.business_time,advanceAppointmentInfo:c,noAppointmentShow:g,showImmediatelyTime:p}),1!=o&&n.getTostoreTime(),2==d.type&&n.getNoAppointmentWord()}})},a.getNoAppointmentWord=function(){var e="商家营业时间：",t="";a.data.businessTimeRule.map(function(t){for(var a=0;a<t.business_week.length;a++)if(1==t.business_week[a])switch(a){case 0:e+="周一、";break;case 1:e+="周二、";break;case 2:e+="周三、";break;case 3:e+="周四、";break;case 4:e+="周五、";break;case 5:e+="周六、";break;case 6:e+="周日、"}t.business_time_interval.map(function(t){e+=t.start_time+"-"+t.end_time+" "})});var n=a.data.getEcTostoredate.setting_data.appointment,o=n.advance_appointment_info;switch(o.type){case"1":t+="无需提前，";break;case"2":t+="需提前"+o.num+"小时，";break;case"3":t+="需提前"+o.num+"天，"}t+="最多可预约"+n.valid_days+"天内时间",a.setData({noAppointmentWorda:e,noAppointmentWordb:t})},a.selectTostoreTime=function(e){var t=a.data.getEcTostoredate.date_arr,n=e.currentTarget.dataset.index,o=t[n].date,i=t[n].week;a.setData({tostoreOrderType:2,dateIndex:n,tostoreDateTime:o,tostoreWeekTime:i,isShowServiceTime:1!=a.data.tostoreTimeType}),a.getTostoreTime()},a.getTostoreTime=function(){var e=(new Date).getMonth()+1,t=(new Date).getMinutes(),n=(new Date).getHours(),o=(new Date).getDate(),i=(e<10?"0"+e:e)+"-"+(o<10?"0"+o:o),s=[],r=!0,c=a.data.businessTimeRule,l=Number(a.data.tostoreWeekTime),d=void 0,u=1==a.businessTimeType,m=a.data.advanceAppointmentInfo,p=+m.num+n>24?+m.num+n-24:+m.num+n;if(2==a.businessTimeType&&c.map(function(e){0==l&&(l=7),1==e.business_week[l-1]&&(d=e.business_time_interval)}),i===a.data.tostoreDateTime)if(2==a.businessTimeType)d&&d.map(function(e){var o=n,i=Number(e.end_time.substring(0,2)),r=Number(e.start_time.substring(0,2)),c=Number(e.end_time.substring(0,2)),l=Number(e.start_time.substring(3,5)),d=Number(e.end_time.substring(3,5));if(n<p&&(o=n=p),(n>r&&n<c||n==r&&t>=l)&&!p&&(u=!0),n<r)n=r,t=0;else if(n>c)return;for(;n<=c;n++)if(2==a.data.tostoreTimeType){if(n==i)continue;s.push(n+":00-"+(n+1)+":00")}else{if(n==o&&t<=30&&0!=t){s.push(n+":30-"+(n+1)+":00");continue}if(n==o&&t>30)continue;if(n==i&&d>=30){s.push(n+":00-"+n+":30");continue}if(n==i&&0==d)continue;s.push(n+":00-"+n+":30"),s.push(n+":30-"+(n+1)+":00")}});else for(n<p&&(n=p);n<24;n++)if(2==a.data.tostoreTimeType){if(r&&t>0&&(r=!1,n++),n>=24)continue;s.push(n+":00-"+(n+1)+":00")}else{if(r&&t>0&&t<=30){r=!1,s.push(n+":30-"+(n+1)+":00");continue}if(r&&t>30&&(r=!1,n++),n>=24)continue;s.push(n+":00-"+n+":30"),s.push(n+":30-"+(n+1)+":00")}else if(2==a.businessTimeType)d&&d.map(function(e){var t=Number(e.start_time.substring(0,2)),o=Number(e.end_time.substring(0,2)),i=Number(e.start_time.substring(0,2));a.data.getEcTostoredate.date_arr[1].date==a.data.tostoreDateTime&&i<p&&+m.num+n>24&&(i=p);for(var r=Number(e.end_time.substring(0,2)),c=Number(e.start_time.substring(3,5)),l=Number(e.end_time.substring(3,5));i<=r;i++)if(2==a.data.tostoreTimeType){if(i==o||i==t&&c>0)continue;s.push(i+":00-"+(i+1)+":00")}else{if(i==t&&c<=30&&0!=c){s.push(i+":30-"+(i+1)+":00");continue}if(i==t&&c>30)continue;if(i==o&&l<=30&&0!=l){s.push(i+":00-"+i+":30");continue}if(i==o&&0==l)continue;s.push(i+":00-"+i+":30"),s.push(i+":30-"+(i+1)+":00")}});else{var f=0;for(a.data.getEcTostoredate.date_arr[1].date==a.data.tostoreDateTime&&f<p&&+m.num+n>24&&(f=p);f<24;f++)2==a.data.tostoreTimeType?s.push(f+":00-"+(f+1)+":00"):(s.push(f+":00-"+f+":30"),s.push(f+":30-"+(f+1)+":00"));dateArr.map(function(e){1==e.is_vaild&&(noAppointmentShow=!1)}),_this.businessTimeType=c.type,_this.setData({getEcTostoredate:data,waitingQueueTime:data.duration_time,tostoreTimeType:tostoreTimeType,isShowServiceTime:!0,noImmediaPick:noImmediaPick,tostoreDateTime:_this.data.tostoreDateTime?_this.data.tostoreDateTime:tostoreDateTime,tostoreWeekTime:_this.data.tostoreWeekTime?_this.data.tostoreWeekTime:l,businessTimeRule:1==c.type?"":c.custom.business_time,advanceAppointmentInfo:m,noAppointmentShow:noAppointmentShow}),1!=tostoreTimeType&&_this.getTostoreTime(),2==c.type&&_this.getNoAppointmentWord()}a.setData({tostoreHoursArr:s,showImmediatelyTime:u})},a.selectTostoreHourTime=function(e){var t=a.data.tostoreHoursArr,n=e.currentTarget.dataset.index,o=t[n];a.setData({tostoreOrderType:2,tostoreHourTime:o,isShowServiceTime:!1}),a.getTostoreTime()},a.getSelfDeliveryList=function(){var e=a;h.appMethod.sendRequest({url:"/index.php?r=AppShop/getSelfDeliveryList",data:{sub_shop_app_id:e.franchisee_id},success:function(t){var a=t.data.store_list_data;if(!a)return void h.appMethod.showModal({content:"商家暂无自提门店",confirm:function(){h.appMethod.turnBack()}});1==a.length&&e.setData({selectDelivery:a[0]}),a.length>=2&&!e.data.selectDelivery&&h.appMethod.showModal({content:"当前尚未选择自提点",confirmText:"去设置",cancelText:"取消",showCancel:!0,confirm:function(){e.toDeliveryList()}}),e.getGoodsStoreSet(3)}})},a.tostoreImmediately=function(){a.setData({tostoreOrderType:1,tostoreHourTime:"",isShowServiceTime:!1})},a.getPhoneNumber=function(e){var t=a;/getPhoneNumber:fail/.test(e.detail.errMsg)||h.appMethod.sendRequest({url:"/index.php?r=AppUser/GetPhoneNumber",data:{encryptedData:e.detail.encryptedData,iv:e.detail.iv},success:function(e){h.appMethod.setUserInfoStorage({phone:e.data}),t.setData({phone:e.data})},successStatus5:function(){h.appMethod.goLogin({success:function(){h.appMethod.showModal({content:"获取手机号失败，请再次点击授权获取"})},fail:function(){h.appMethod.showModal({content:"获取手机号失败，请再次点击授权获取"})}})}})},a.getInStoreSeat=function(){var e=a;h.appMethod.scanCode({success:function(t){var a=t.path,n=a.split(/\?location_id=/)[1];h.appMethod.sendRequest({url:"/index.php?r=AppEcommerce/getEcLocationData",data:{id:n,sub_shop_app_id:e.franchisee_id},success:function(t){0==t.data.status?e.setData({locationId:n,inStoreSeatName:t.data.title}):h.appMethod.showModal({content:"未检索到座位号"})}})},fail:function(e){h.appMethod.showModal({content:"未检索到座位号"})}})},a.inputPhone=function(e){a.setData({phone:e.target.value})},a.hidePerfectAddress=function(){a.setData({expressAddressNull:!1})},a.manuallyAddAddress=function(){a.isFromSelectAddress=!0,h.appMethod.turnToPage("/eCommerce/pages/addAddress/addAddress")},a.importWeChatAddress=function(){var e=a;h.appMethod.chooseAddress({success:function(t){h.appMethod.sendRequest({method:"post",url:"/index.php?r=AppShop/AddWxAddress",data:{detailInfo:t.detailInfo||"",cityName:t.cityName||"",provinceName:t.provinceName||"",UserName:t.userName||"",telNumber:t.telNumber||"",district:t.district||"",countyName:t.countyName||""},success:function(){e.getCalculationInfo()}})}})},a.getDiningFuncSetting=function(e){var t=a;h.appMethod.sendRequest({url:"/index.php?r=AppEcommerce/getFuncSetting",data:{sub_shop_app_id:a.franchisee_id,ordering_food_type:1,pick_up_type:4},success:function(a){for(var n=a.data.take_meal_type||[],o=[],i=0;i<n.length;i++)o.push({idx:n[i],text:t.data.take_meal_type_text[n[i]]});t.path=a.data.add_dish_info.page||"",t.setData({take_meal_type:n[0],take_meal_type_arr:o,location_status:0!=a.data.location_status,account_type:a.data.account_info.account_type,allow_add_dish:1==a.data.add_dish_info.allow_app_status,allow_app_account:!!a.data.account_info.account_way[1]}),"function"==typeof e&&e()}})},a.checkIsAddDishing=function(){var e=a;if(1==e.data.account_type)return void e.getCalculationInfo();h.appMethod.sendRequest({url:"/index.php?r=AppEcommerce/CheckLocationIsEmpty",data:{location_id:a.data.ec_location_id},success:function(t){e.setData({is_addDishing:!t.data,people_num:t.data?e.data.people_num:0}),e.getCalculationInfo()}})},a.turnToAddDish=function(){if(a.franchisee_id){var e=a;return void h.appMethod.showModal({title:"温馨提示",content:"子店商品继续点菜只能跳转子店首页或者连锁首页",showCancel:!0,confirm:function(){e.goToHomepage()}})}var t=JSON.parse(a.path),n=t.action;_.clickEventHandler[n]&&_.clickEventHandler[n](t,"","")},a.goToHomepage=function(){var e=a,t=e.franchisee_id,n=h.appMethod.getChainId();if(t&&t!=n){var o=Taro.getCurrentPages(),i=o[o.length-2];i&&"franchisee/pages/goodsMore/goodsMore"==i.route?h.appMethod.turnBack({delta:2}):_.clickEventHandler["to-franchisee"]({"franchisee-id":t})}else{var s=h.appMethod.getHomepageRouter();h.appMethod.reLaunch({url:"/pages/"+s+"/"+s})}},a.scanPlaceInfo=function(e){var t=a;a.saveFormId(e.detail.formId),h.appMethod.scanCode({success:function(e){var a=e.path;if(!a)return void h.appMethod.showModal({content:"位置码错误，请重新扫码!",confirmText:"知道了"});var n=a.split("?");if(n[0]==a)return"";for(var o=n[1].split("&"),i={},s=0;s<o.length;s++){var r=o[s].split("=");i[r[0]]=r[1]}var c=t.data.ec_location_id;t.scanInitUserInfo(c,i.ec_location_id,t.checkIsAddDishing)},fail:function(e){console.log(e)}})},a.scanInitUserInfo=function(e,t,n){var o=a;h.appMethod.sendRequest({url:"/index.php?r=AppEcommerce/scanQrcodeInitCartUserInfo",data:{sub_shop_app_id:a.franchisee_id,pre_location_id:e||"",location_id:t||a.data.ec_location_id,cart_id_arr:a.cart_id_arr_my},method:"post",success:function(e){0==e.status&&(o.franchisee_id?(h.appMethod.globalData[o.franchisee_id]={},h.appMethod.globalData[o.franchisee_id].ec_location_id=t):h.appMethod.globalData.ec_location_id=t,o.setData({ec_location_id:t,location_name:e.data.location_title||""}),"function"==typeof n&&n(o.getCalculationInfo))},successStatusAbnormal:function(e){1==e.status&&o.data.ec_location_id&&o.data.is_together&&o.loopRequestMultiOrder()}})},a.saveFormId=function(e){h.appMethod.sendRequest({hideLoading:!0,url:"/index.php?r=api/AppMsgTpl/SaveUserFormId",data:{form_id:e},method:"post",success:function(e){}})},a.changeTakeMealType=function(e){var t=+e.detail.value;a.setData({take_meal_type_index:t,take_meal_type:a.data.take_meal_type_arr[t].idx}),a.getCalculationInfo()},a.changeDiningMode=function(e){var t=+e.detail.value;a.setData({dining_mode:t+1}),a.getCalculationInfo()},a.changeCustomNum=function(e){var t=+e.detail.value;a.setData({people_num:t+1}),a.getCalculationInfo()},a.turnToStore=function(){},a.callPhone=function(e){h.appMethod.callPhone(e)},document.title="确认支付",a}return(0,p.default)(t,e),(0,l.default)(t,[{key:"componentWillMount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,b.getCurrentPageQueryParams)();this.franchisee_id=e.franchisee||"";var t=e.team_token||"",a=e.group_buy_people||0,n=e.limit_buy||"",o=(e.type,e.secType||0);this.franchisee_id=e.franchisee||"",this.cart_id_arr=e.cart_arr?decodeURIComponent(e.cart_arr).split(","):[],this.is_group=e.is_group||"";var i="";i=this.franchisee_id?h.appMethod.globalData[this.franchisee_id]?h.appMethod.globalData[this.franchisee_id].ec_location_id:"":e.ec_location_id||h.appMethod.globalData.ec_location_id||"",this.setData({ec_location_id:i,limit_buy:n,is_group:this.is_group,teamToken:t,group_buy_people:a,phone:h.appMethod.getUserInfo().phone,seckillType:o}),this.selectPickMethod("first",o),this.dataInitial()}},{key:"componentDidMount",value:function(){this.isFromSelectAddress&&(this.getCalculationInfo(),this.isFromSelectAddress=!1)}},{key:"componentWillUnmount",value:function(){if(this.downcountArr&&this.downcountArr.length){this.downcountArr=this.downcountArr.concat().reverse();for(var e=0;e<this.downcountArr.length;e++)this.downcountArr[e]&&this.downcountArr[e].clear()}}},{key:"render",value:function(){var e=this,t=this.state,a=(t.showGetUserInfo,t.discountList),n=t.location_name,o=t.is_addDishing,s=t.customNumArr,r=t.people_num,c=t.pickUpTypeArr,l=t.pickUpType,d=t.selectAddress,u=t.storeStyle,m=t.selectDelivery,p=t.selectSameJourney,f=t.dining_mode_arr,h=t.dining_mode,v=t.take_meal_type_arr,_=t.take_meal_type_index,y=t.take_meal_type,E=t.ec_location_id,R=t.sameJourneyTimeType,k=t.sameJourneyImmediatlyTime,x=t.sameJourneyDateTime,C=t.selfAppointmentSwitch,D=t.tostoreDateTime,S=t.tostoreTimeType,I=t.tostoreOrderType,M=t.waitingQueueTime,T=t.tostoreHourTime,P=t.onlyImmediatlyPickSwitch,L=t.selfDeliveryPhone,A=t.phone,F=t.selfDeliveryScan,O=t.inStoreSeatName,B=t.goodsList,j=t.is_group,G=t.exchangeCouponData,q=t.group_buy_price,U=t.original_price,z=t.activePreferential,V=t.express_fee,W=t.box_fee,H=t.server_fee,J=t.tissue_fee,Y=t.account_type,Q=t.selectDiscountInfo,K=t.selectDiscountIndex,X=t.discount_cut_price,$=t.useBalance,Z=t.deduction,ee=t.balance,te=t.cashOnDelivery,ae=t.totalPayment,ne=t.canCashDelivery,oe=t.selfPayOnDelivery,ie=t.orderRemark,se=t.hasRequiredSuppInfo,re=t.deliverydWrite,ce=t.noAdditionalInfo,le=t.aloneDeliveryShow,de=t.additional_info,ue=t.additional_goodsid_arr,me=t.allow_add_dish,pe=(t.dialogHidden,t.selectModelInfo,t.goodsInfo,t.intraCityData),fe=t.diningData,ge=t.dining_data,he=t.isShowPickMask,ve=t.noImmediaPick,_e=t.showImmediatelyTime,ye=t.getEcTostoredate,Ee=t.dateIndex,be=t.tostoreHoursArr,Ne=t.noAppointmentShow,Re=t.noAppointmentWordb,ke=t.noAppointmentWorda,we=t.isShowServiceTime,xe=t.sameJourneyHoursArr,Ce=t.isShowSameJourneyTime,De=t.expressAddressNull;return g.default.createElement(g.default.Fragment,null,g.default.createElement("div",{className:"official-page preview-seckill-order"},g.default.createElement("div",{className:"preview-goods-wrap"},o&&g.default.createElement("div",{className:"pick-method flex-between",style:(0,b.convertLineStyleData)("font-weight:bold;")},g.default.createElement("span",null,"桌位号"),g.default.createElement("span",null,n)),o&&g.default.createElement("div",{className:"pick-method",style:(0,b.convertLineStyleData)("margin-bottom:20rpx;")},g.default.createElement(Picker,{className:"pick-method-box",style:(0,b.convertLineStyleData)("border-bottom:0;"),range:s,onChange:this.changeCustomNum},g.default.createElement("span",{style:(0,b.convertLineStyleData)("font-weight:bold;")},"就餐人数"),g.default.createElement("span",{className:"pull-right ico-moon icon-rightarrow"}),g.default.createElement("span",{className:"pull-right pick-method-title",style:(0,b.convertLineStyleData)("font-weight:bold;")},r))),g.default.createElement("div",{className:"pick-method",onClick:c&&c.length>1?this.selectPickMethod:null,hidden:o},g.default.createElement("div",{className:"pick-method-box"},"取货方式",(c&&c.length)>1&&g.default.createElement("span",{className:"pull-right ico-moon icon-rightarrow"}),g.default.createElement("span",{className:"pull-right pick-method-title",style:(0,b.convertLineStyleData)(4==l?"font-weight:bold;":"")},1==l?"快递":2==l?"同城":3==l?"自提":"点餐"))),1==l&&g.default.createElement("div",{className:"preview-section"},d.id?g.default.createElement(g.default.Fragment,null,g.default.createElement("div",{className:"address-box",onClick:this.goToMyAddress,"data-address-id":d.id},g.default.createElement("span",{className:"ico-moon icon-goods-location"}),g.default.createElement("div",{className:"address-detail"},g.default.createElement("div",{className:"buyer-name-box"},g.default.createElement("span",{className:"store-config-label",style:(0,b.convertLineStyleData)("background:"+u.theme)},"快递"),g.default.createElement("span",{className:"buyer-name"},d.address_info.name),g.default.createElement("span",null,d.address_info.contact)),g.default.createElement("div",{className:"buyer-address"},d.address_info.province.text+d.address_info.city.text+d.address_info.district.text+d.address_info.detailAddress)),g.default.createElement("div",{className:"ico-moon icon-rightarrow"}))):g.default.createElement(g.default.Fragment,null,g.default.createElement("div",{className:"address-null-box",onClick:this.goToMyAddress},g.default.createElement("div",{className:"pull-right ico-moon icon-rightarrow"}),g.default.createElement("div",null,g.default.createElement("span",{className:"ico-moon icon-goods-location"}),g.default.createElement("span",{className:"add-new-address"},"新增地址"))))),3==l&&g.default.createElement("div",{className:"preview-section"},m.id?g.default.createElement(g.default.Fragment,null,g.default.createElement("div",{className:"address-box",onClick:this.toDeliveryList,"data-address-id":m.id},g.default.createElement("span",{className:"ico-moon icon-goods-location"}),g.default.createElement("div",{className:"address-detail"},g.default.createElement("div",{className:"buyer-name-box"},g.default.createElement("span",{className:"store-config-label",style:(0,b.convertLineStyleData)("background:"+u.theme)},"自提"),g.default.createElement("span",{className:"buyer-name"},m.contact_name),g.default.createElement("span",null,m.service_phone)),g.default.createElement("div",{className:"buyer-address"},m.region_data.region_string+m.address_detail)),g.default.createElement("div",{className:"ico-moon icon-rightarrow"}))):g.default.createElement(g.default.Fragment,null,g.default.createElement("div",{className:"address-null-box",onClick:this.toDeliveryList},g.default.createElement("div",{className:"pull-right ico-moon icon-rightarrow"}),g.default.createElement("div",null,g.default.createElement("span",{className:"ico-moon icon-goods-location"}),g.default.createElement("span",{className:"add-new-address"},"选择自提点"))))),2==l&&g.default.createElement("div",{className:"preview-section"},p.id?g.default.createElement(g.default.Fragment,null,g.default.createElement("div",{className:"address-box",onClick:this.goSameJourneyAddress},g.default.createElement("span",{className:"ico-moon icon-goods-location"}),g.default.createElement("div",{className:"address-detail"},g.default.createElement("div",{className:"buyer-name-box"},g.default.createElement("span",{className:"store-config-label",style:(0,b.convertLineStyleData)("background:"+u.theme)},"同城"),g.default.createElement("span",{className:"buyer-name"},p.address_info.name),g.default.createElement("span",null,p.address_info.contact)),g.default.createElement("div",{className:"buyer-address"},p.address_info.province.text+p.address_info.city.text+p.address_info.district.text+p.address_info.detailAddress)),g.default.createElement("div",{className:"ico-moon icon-rightarrow"}))):g.default.createElement(g.default.Fragment,null,g.default.createElement("div",{className:"address-null-box"},g.default.createElement("div",{className:"pull-right ico-moon icon-rightarrow"}),g.default.createElement("div",{onClick:this.goSameJourneyAddress},g.default.createElement("span",{className:"ico-moon icon-goods-location"}),g.default.createElement("span",{className:"add-new-address"},"选择同城地址"))))),4==l&&!o&&g.default.createElement("div",{className:!0},g.default.createElement("div",{className:"eating-info-wrapper"},g.default.createElement("div",{className:"eating-info-item flex-between"},g.default.createElement("span",{className:"mustFill"},"就餐人数"),g.default.createElement(Picker,{className:"eating-picker",onChange:this.changeCustomNum,range:s},g.default.createElement("span",{style:(0,b.convertLineStyleData)("font-weight:bold;")},r||1),g.default.createElement("span",{className:"ico-moon icon-rightarrow icon-right"}))),g.default.createElement("div",{className:"eating-info-item flex-between"},g.default.createElement("span",{className:"mustFill"},"就餐方式"),g.default.createElement(Picker,{className:"eating-picker",range:f,onChange:this.changeDiningMode},g.default.createElement("span",{style:(0,b.convertLineStyleData)("font-weight:bold;")},2==h?"打包":"堂食"),g.default.createElement("span",{className:"ico-moon icon-rightarrow icon-right"}))),g.default.createElement("div",{className:"eating-info-item flex-between"},g.default.createElement("span",{className:"mustFill"},"取餐方式"),g.default.createElement(Picker,{className:"eating-picker",range:v,onChange:this.changeTakeMealType,rangeKey:"text",value:_},g.default.createElement("span",{style:(0,b.convertLineStyleData)("font-weight:bold;")},v[_].text),g.default.createElement("span",{className:"ico-moon icon-rightarrow icon-right"}))),g.default.createElement("div",{className:"eating-info-item flex-between"},g.default.createElement("span",{className:1==y?"mustFill":""},"桌号"),g.default.createElement("div",{className:"flex-between",onClick:this.scanPlaceInfo,style:(0,b.convertLineStyleData)("flex:1;")},g.default.createElement("span",{style:(0,b.convertLineStyleData)("color:#999;text-align:right;width:100%;")},E?n:"扫码获取位置信息"),g.default.createElement("span",{className:"ico-moon icon-shopping-scan",style:(0,b.convertLineStyleData)("padding-left:20rpx;font-size:30rpx;color:#999;")}))))),g.default.createElement("div",{className:"address-bg"},g.default.createElement("img",{src:"http://cdn.jisuapp.cn/static/webapp/images/xcx-goods/goods-address-bg.png"})),2==l&&g.default.createElement("div",{className:"preview-box margin-bottom-16"},g.default.createElement("div",{onClick:this.showSameJourneyTime,className:"single-box"},"取货时间",g.default.createElement("div",{className:"pull-right appointment-time-box"},g.default.createElement("span",{className:"appointment-time",style:(0,b.convertLineStyleData)("color:"+u.theme)},1==R?"尽快送达(预计"+(k||"")+"分钟后送达)":x?"大约"+x+"送达":"请选择送达时间"),g.default.createElement("span",{className:"ico-moon icon-rightarrow"})))),3==l&&g.default.createElement("div",{className:"preview-box border-bottom30"},C&&g.default.createElement("div",{onClick:this.showServiceTime,className:"single-box"},"取货时间",g.default.createElement("div",{className:"pull-right appointment-time-box"},1==S&&D&&2==I?g.default.createElement("span",{className:"appointment-time",style:(0,b.convertLineStyleData)("color:"+u.theme)},w.date(D)):1==S&&1==I?g.default.createElement("span",{className:"appointment-time",style:(0,b.convertLineStyleData)("color:"+u.theme)},0==M?"立即取货":"大约等待"+M+"分钟"):1!=S&&T&&2==I?g.default.createElement("span",{className:"appointment-time",style:(0,b.convertLineStyleData)("color:"+u.theme)},w.date(D)+" "+T):1!=S&&1==I?g.default.createElement("span",{className:"appointment-time",style:(0,b.convertLineStyleData)("color:"+u.theme)},w.date(D)+(0==M?" 立即取货":"大约等待"+M+"分钟")):g.default.createElement("span",{className:"appointment-time",style:(0,b.convertLineStyleData)("color:"+u.theme)},"请选择时间"),g.default.createElement("span",{className:"ico-moon icon-rightarrow"}))),P&&M>=0&&g.default.createElement("div",{className:"single-box"},"取货时间",g.default.createElement("div",{className:"pull-right appointment-time-box"},g.default.createElement("span",{className:"appointment-time",style:(0,b.convertLineStyleData)("color:"+u.theme)},0==M?"无需等待":"大约等待"+M+"分钟"))),1==L&&g.default.createElement("div",{className:"single-box"},"联系手机号",g.default.createElement("div",{className:"pull-right input-phone-box"},g.default.createElement("input",{type:"text",onChange:this.inputPhone,value:A,placeholder:"请输入手机号"}),g.default.createElement("button",{className:"get-phone-number",style:(0,b.convertLineStyleData)("color:"+u.theme)},"自动授权"))),F&&g.default.createElement("div",{className:"single-box",onClick:this.getInStoreSeat},"店内位置",g.default.createElement("div",{className:"pull-right scan-seat-box"},g.default.createElement("span",null,O||"请扫码获取位置信息"),g.default.createElement("span",{className:"ico-moon icon-shopping-scan"})))),B.map(function(t,a){return g.default.createElement("div",{className:"preview-goods-order-list",key:!0},g.default.createElement("div",{className:"seckill-time"},g.default.createElement("div",{className:"countdown",style:(0,b.convertLineStyleData)("color:"+u.theme)},0==t.seckill_start_state?g.default.createElement("label",null,"距开始"):1==t.seckill_start_state?g.default.createElement("label",null,"距结束还剩"):2==t.seckill_start_state&&g.default.createElement("label",null,"已结束"),t.downCount.days&&g.default.createElement("span",{className:"days"},t.downCount.days+"天"),g.default.createElement("span",{className:"hours countdown-text",style:(0,b.convertLineStyleData)("background-color:"+u.theme)},t.downCount.hours),":",g.default.createElement("span",{className:"minutes countdown-text",style:(0,b.convertLineStyleData)("background-color:"+u.theme)},t.downCount.minutes),":",g.default.createElement("span",{className:"seconds countdown-text",style:(0,b.convertLineStyleData)("background-color:"+u.theme)},t.downCount.seconds))),g.default.createElement("div",{className:"preview-goods-order-item"},g.default.createElement("img",{className:"preview-goods-cover",src:t.cover,mode:"aspectFill"}),g.default.createElement("div",{className:"preview-goods-content"},g.default.createElement("div",{className:"preview-goods-title"},g.default.createElement("span",{className:"exchange-tip"},"秒杀"),t.title),t.model_value_str&&g.default.createElement("div",{className:"preview-goods-model"},t.model_value_str),g.default.createElement("div",{className:"goods-price-box"},g.default.createElement("span",{className:"preview-goods-price",style:(0,b.convertLineStyleData)(j?"":"color:"+u.theme)},"¥"+t.price),g.default.createElement("span",{className:"seckill-original-price"},"¥"+t.original_price),!j&&g.default.createElement("div",{className:"good-number-box pull-right"},g.default.createElement("div",{className:"goods-minus","data-index":a,onClick:e.clickMinusButton},"-"),g.default.createElement("input",{className:"goods-count","data-index":a,type:"number",value:t.num,onChange:e.inputGoodsCount}),g.default.createElement("div",{className:"goods-plus",style:(0,b.convertLineStyleData)("color:"+u.theme),"data-index":a,onClick:e.clickPlusButton},"+")),j&&g.default.createElement("div",{className:"good-number-box pull-right"},g.default.createElement("div",{className:"group-count"},"数量："+t.num))),g.default.createElement("div",{className:"seckill-remaining-num"},"当前剩余件数："+t.stock))))}),G.hasSelectGoods&&g.default.createElement("div",{className:"preview-goods-order-list"},g.default.createElement("div",{className:"preview-goods-order-item"},g.default.createElement("img",{className:"preview-goods-cover",src:G.goodsInfo.cover}),g.default.createElement("div",{className:"preview-goods-content"},g.default.createElement("div",{className:"preview-goods-title"},g.default.createElement("span",{className:"exchange-tip"},"赠品"),G.goodsInfo.title),G.goodsInfo.model_value_str&&g.default.createElement("div",{className:"preview-goods-model"},G.goodsInfo.model_value_str),g.default.createElement("div",{className:"goods-number-contain"},g.default.createElement("div",{className:"exchange-num pull-right"},"x1"))))),g.default.createElement("div",{className:"preview-box"},g.default.createElement("div",{className:"single-box"},"商品金额",g.default.createElement("span",{className:"pull-right"},"¥ "+(j?q:U))),g.default.createElement("div",{className:"single-box"},"活动优惠",g.default.createElement("span",{className:"pull-right"},"秒杀-￥"+z)),4!=l&&g.default.createElement("div",{className:"single-box"},"运费",g.default.createElement("span",{className:"pull-right"},"¥ "+V)),4==l&&W>0&&g.default.createElement("div",{className:"single-box"},"餐盒费",g.default.createElement("span",{className:"pull-right"},"¥"+W)),4==l&&H>0&&g.default.createElement("div",{className:"single-box"},"服务费",g.default.createElement("span",{className:"pull-right"},"¥"+H)),4==l&&J>0&&g.default.createElement("div",{className:"single-box"},"纸巾费",g.default.createElement("span",{className:"pull-right"},"¥"+J)),!!a.length&&g.default.createElement("div",{onClick:this.showMemberDiscount,hidden:4==l&&2==Y},g.default.createElement("div",{className:"balance-switch"},g.default.createElement("span",null,"优惠方式"),g.default.createElement("div",{className:"ico-moon icon-rightarrow pull-right"}),g.default.createElement("span",{className:"pull-right"},Q.name)),g.default.createElement("div",{hidden:0==K,className:"balance-price"},g.default.createElement("span",{className:"pull-right",style:(0,b.convertLineStyleData)("color:"+u.theme)},"- ¥"+X))),0!=ee&&g.default.createElement("div",{hidden:4==l&&2==Y},g.default.createElement("div",{className:"balance-switch"},g.default.createElement("span",null,"使用储值金"),g.default.createElement(i.default,{color:u.theme,style:(0,b.convertLineStyleData)("transform:scale(0.7);"),className:"pull-right",checked:$,onChange:this.useBalanceChange})),g.default.createElement("div",{hidden:!$,className:"balance-price"},g.default.createElement("span",{className:"pull-right",style:(0,b.convertLineStyleData)("color:"+u.theme)},"- ¥"+Z))),ae>0&&(1==l&&1==ne||3==l&&1==oe)&&g.default.createElement("div",null,g.default.createElement("div",{className:"balance-switch"},g.default.createElement("span",null,"货到付款（先下单，验货后支付）"),g.default.createElement(i.default,{color:u.theme,className:"pull-right",onChange:this.useCashDelivery,checked:te})))),g.default.createElement("div",{className:"preview-box"},g.default.createElement("div",{className:"buyer-message single-box"},"买家留言",g.default.createElement("div",{className:"pull-right"},g.default.createElement("input",{className:"remark",value:ie,onChange:this.remarkInput,placeholder:"买家留言"}))),!ce&&!le&&g.default.createElement("div",{className:"border-top1 single-box",onClick:this.goToAdditionalInfo},"补充信息",g.default.createElement("div",{className:"ico-moon icon-rightarrow pull-right"}),g.default.createElement("span",{style:(0,b.convertLineStyleData)("color:"+(se&&!re?u.theme:"#666")),className:"additional-tip pull-right"},re?"已填写":"未填写"))),le&&g.default.createElement(g.default.Fragment,null,de[ue[0]].map(function(t,a){return g.default.createElement("div",{className:"additional-list",key:!0},"text"==t.type&&g.default.createElement("div",{className:"additional-text"},g.default.createElement("span",{className:"additional-name "+(0==t.is_required?"is-required":"")},t.title),g.default.createElement("div",{className:"additional-info"},g.default.createElement("input",{type:"text",onChange:e.inputFormControl,value:t.value}))),"mul-text"==t.type&&g.default.createElement("div",{className:"additional-textarea"},g.default.createElement("span",{className:"additional-name "+(0==t.is_required?"is-required":"")},t.title),g.default.createElement("div",{className:"additional-info"},g.default.createElement("textarea",{maxlength:"-1",onInput:e.inputFormControl,value:t.value}))),"picture"==t.type&&g.default.createElement("div",{className:"additional-picture"},g.default.createElement("span",{className:"additional-name "+(0==t.is_required?"is-required":"")},t.title),g.default.createElement("div",{className:"additional-info"},t.value.map(function(t,a){return g.default.createElement("div",{className:"image-list",key:!0},g.default.createElement("img",{src:t}),g.default.createElement("label",{className:"delete-image ico-moon icon-closes",onClick:e.deleteImage,"data-image-index":a},"-"))}),t.value.length<9&&g.default.createElement("div",{className:"add-images",onClick:e.addDeliveryImg},g.default.createElement("span",{className:"ico-moon icon-goods-add-image"}),g.default.createElement("div",null,"添加图片")))))})),g.default.createElement("div",{className:"bottom-nav",hidden:4==l&&2==Y},g.default.createElement("div",{className:"preview-goods-total-price"},"合计:",g.default.createElement("span",{className:"price-count",style:(0,b.convertLineStyleData)("color:"+u.theme)},"¥"+ae)),g.default.createElement("form",null,g.default.createElement("button",{type:"button",onClick:this.confirmPayment,style:(0,b.convertLineStyleData)("background:"+u.theme)},te?"货到付款":"在线支付"))),4==l&&2==Y&&g.default.createElement("div",{className:"all-price-box flex-between"},g.default.createElement("div",{className:"add-dishs",hidden:!me,style:(0,b.convertLineStyleData)("color:"+u.theme+";"),onClick:this.turnToAddDish},"继续点菜"),g.default.createElement("form",{style:(0,b.convertLineStyleData)("flex:1;")},g.default.createElement("button",{type:"button",onClick:this.confirmPayment,className:"all-price-calculate",style:(0,b.convertLineStyleData)("background-color:"+u.theme+";border-radius:0;")},"下单")))),he&&g.default.createElement("div",{className:"goods-pick-mask"},g.default.createElement("div",{className:"goods-pick-box"},g.default.createElement("div",{className:"goods-pick-header"},"更换取货方式"),g.default.createElement("div",{className:"goods-pick-content"},c.map(function(t,a){return g.default.createElement("div",{key:t,className:"goods-pick-menu"},g.default.createElement("div",{className:"pick-detail "+(2!=t||1==pe.is_enough_price&&1==pe.in_business_time?"":"no-achieve-price-box")},g.default.createElement("div",{className:"pick-style"},1==t?"快递":2==t?"同城配送":3==t?"上门自提":"堂食点餐"),2==t&&1!=pe.in_business_time?g.default.createElement("div",{className:"no-achieve-price",style:(0,b.convertLineStyleData)("color:"+u.theme)},"不在营业时间"):2==t&&1!=pe.is_enough_price?g.default.createElement("div",{className:"no-achieve-price",style:(0,b.convertLineStyleData)("color:"+u.theme)},"未达到起送价 还差"+pe.min_deliver_price_balance+"元"):4==t&&1!=fe.in_business_time&&g.default.createElement("div",{className:"no-achieve-price",style:(0,b.convertLineStyleData)("color:"+u.theme)},"店铺已打烊")),g.default.createElement("div",{className:"pick-btn-box"},g.default.createElement("span",{style:(0,b.convertLineStyleData)(1==t||3==t||2==t&&1==pe.is_enough_price&&1==pe.in_business_time||4==t&&1==ge.in_business_time?"color:"+u.theme+";border-color:"+u.theme:"color: #999;border-color: #D2D2D2"),onClick:1==t||3==t||2==t&&1==pe.is_enough_price&&1==pe.in_business_time||4==t&&1==ge.in_business_time?e.deliveryWayChange:null,"data-type":t},"选择")))})),g.default.createElement("div",{className:"goods-pick-bottom",onClick:this.closeGoodsPick},"关闭"))),we&&g.default.createElement("div",{className:"goods-pick-mask"},g.default.createElement("div",{className:"goods-pick-box"},g.default.createElement("div",{className:"goods-pick-header"},"选择取货时间"),Ne?g.default.createElement("div",{className:"none-appointment-time"},g.default.createElement("img",{className:"no-reservation",src:"http://cdn.jisuapp.cn/static/webapp/images/xcx-goods/no-reservation.png"}),g.default.createElement("div",{className:"title"},"暂无可预约时间"),g.default.createElement("div",{className:"tips"},Re),g.default.createElement("div",{className:"tips"},ke)):g.default.createElement(g.default.Fragment,null,1==S&&g.default.createElement("div",{className:"goods-pick-content"},ve&&_e&&g.default.createElement("div",{onClick:this.tostoreImmediately,className:"goods-pick-time "+(1==I?"selected":""),style:(0,b.convertLineStyleData)(1==I?"color:"+u.theme:"")},"立即取货（"+(0==M?"无需等待":"大约等待"+M+"分钟")+"）"),ye.date_arr.map(function(t,a){return g.default.createElement(g.default.Fragment,{key:!0},1==t.is_vaild&&g.default.createElement("div",{onClick:e.selectTostoreTime,"data-index":a,className:"goods-pick-time "+(1!=I&&D==t.date?"selected":""),style:(0,b.convertLineStyleData)(1!=I&&D==t.date?"color:"+u.theme:"")},w.date(t.date)+"(星期"+w.week(t.week)+")"))})),ye.setting_data&&1!=S&&g.default.createElement("div",{className:"double-column-time"},g.default.createElement("div",{className:"double-time-day"},ye.date_arr.map(function(t,a){return g.default.createElement(g.default.Fragment,{key:!0},1==t.is_vaild&&g.default.createElement("div",{onClick:e.selectTostoreTime,"data-index":a,className:"goods-pick-time  "+(D==t.date?"selected":""),style:(0,b.convertLineStyleData)(D==t.date?"color:"+u.theme:"")},w.date(t.date)+"(星期"+w.week(t.week)+")"))})),g.default.createElement("div",{className:"double-time-hours"},!Ee&&_e&&ve&&g.default.createElement("div",{onClick:this.tostoreImmediately,className:"goods-pick-time "+(1==I?"selected":""),style:(0,b.convertLineStyleData)(1==I?"color:"+u.theme:"")},"立即取货（"+(0==M?"无需等待":"大约等待"+M+"分钟")+"）"),be.map(function(t,a){return g.default.createElement("div",{onClick:e.selectTostoreHourTime,"data-index":a,className:T==t?"selected":"",style:(0,b.convertLineStyleData)(T==t?"color:"+u.theme:""),key:!0},t)})))),g.default.createElement("div",{className:"goods-pick-bottom",onClick:this.closeGoodsPick},"关闭"))),Ce&&g.default.createElement("div",{className:"goods-pick-mask"},g.default.createElement("div",{className:"goods-pick-box"},g.default.createElement("div",{className:"goods-pick-header"},"选择送达时间"),g.default.createElement("div",{className:"goods-pick-content goods-same-journey-time"},g.default.createElement("div",{onClick:this.selectSameJourneyTime,"data-type":"immedia",className:"goods-pick-time "+(1==R?"selected":""),style:(0,b.convertLineStyleData)(1==R?"color:"+u.theme:"")},"尽快送达(预计"+k+"分钟后送达)"),xe.map(function(t,a){return g.default.createElement(g.default.Fragment,{key:!0},g.default.createElement("div",{onClick:e.selectSameJourneyTime,"data-type":"appoint","data-index":a,className:"goods-pick-time "+(1!=R&&x==t?"selected":""),style:(0,b.convertLineStyleData)(1!=R&&x==t?"color:"+u.theme:"")},t))})),g.default.createElement("div",{className:"goods-pick-bottom",onClick:this.closeGoodsPick},"关闭"))),De&&g.default.createElement("div",{className:"perfect-address-mask",onClick:this.hidePerfectAddress},g.default.createElement("div",{className:"perfect-address-box",onClick:this.stopPropagation},g.default.createElement("div",{className:"perfect-address-title"},"提示"),g.default.createElement("div",{className:"perfect-address-tips"},"请完善地址信息~"),g.default.createElement("div",{className:"perfect-address-bottom"},g.default.createElement("span",{onClick:this.manuallyAddAddress},"手动新增地址"),g.default.createElement("span",{onClick:this.importWeChatAddress,className:"import-weChat-address"},"导入微信地址"))))),g.default.createElement(N.MemberDiscount,{ref:this.memberDiscountRef}))}}]),t}(k.default);t.default=x},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(0),i=n(o),s=a(3),r=n(s),c=a(1),l=n(c),d=a(2),u=n(d),m=a(5),p=a(6),f=a(7),g=n(f);a(419);var h=function(e){function t(e){(0,i.default)(this,t);var a=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={storeStyle:{}},a.orderId="",a.goToHomepage=function(){var e=m.appMethod.getHomepageRouter();m.appMethod.reLaunch({url:"/pages/"+e+"/"+e})},a.goToComment=function(){m.appMethod.turnToPage("/eCommerce/pages/makeComment/makeComment?detail="+a.orderId+"&franchisee="+a.data.franchiseeId,1)},a.getAppECStoreConfig=function(){m.appMethod.getAppECStoreConfig(function(e){a.setData({storeStyle:e.color_config,hasRecommendConfig:!!e.recommend_config})},a.data.franchiseeId)},document.title="交易成功",a}return(0,u.default)(t,e),(0,r.default)(t,[{key:"componentWillMount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,p.getCurrentPageQueryParams)();"transation"!=e.pageFrom&&m.appMethod.setPageTitle("评价成功"),this.orderId=e.orderId,this.setData({franchiseeId:e.franchiseeId||"",pageFrom:e.pageFrom})}},{key:"componentDidMount",value:function(){this.getAppECStoreConfig()}},{key:"render",value:function(){var e=this.state,t=(e.showGetUserInfo,e.storeStyle),a=e.pageFrom,n=e.hasRecommendConfig;e.franchiseeId;return React.createElement("div",{className:"official-page transaction-success"},n?React.createElement("div",{className:"success-box",style:(0,p.convertLineStyleData)("background:"+t.theme)},React.createElement("div",{className:"title"},React.createElement("img",{className:"goods-complete-succes",src:"http://develop.zhichiwangluo.com/static/webapp/images/xcx-goods/goods-complete-success.png"}),React.createElement("span",null,"transation"==a?"交易成功":"评价成功")),React.createElement("div",{className:"slogan"},"transation"==a?"去评价一下这次的购物体验吧~":"再去逛逛店铺吧~"),React.createElement("div",{className:"btn-area"},"transation"==a&&React.createElement("div",{onClick:this.goToComment},"立即评价"),React.createElement("div",{onClick:this.goToHomepage},"返回首页")),React.createElement("img",{className:"goods-complete-bg",src:"http://develop.zhichiwangluo.com/static/webapp/images/xcx-goods/goods-complete-bg.png"})):React.createElement(React.Fragment,null,React.createElement("div",{className:"no-recommend-box"},React.createElement("div",{className:"success-box",style:(0,p.convertLineStyleData)("background:"+t.theme)},React.createElement("div",{className:"title"},React.createElement("img",{className:"goods-complete-succes",src:"http://develop.zhichiwangluo.com/static/webapp/images/xcx-goods/big-goods-complete-success.png"})),React.createElement("img",{className:"goods-complete-bg",src:"http://develop.zhichiwangluo.com/static/webapp/images/xcx-goods/goods-complete-bg.png"})),React.createElement("div",{className:"goods-complete-title",style:(0,p.convertLineStyleData)("color:"+t.theme)},"transation"==a?"交易成功":"评价成功"),React.createElement("div",{className:"slogan"},"transation"==a?"去评价一下这次的购物体验吧~":"再去逛逛店铺吧~"),React.createElement("div",{className:"btn-area"},"transation"==a&&React.createElement("div",{className:"go-comment",style:(0,p.convertLineStyleData)("color:"+t.theme+";border-color:"+t.theme),onClick:this.goToComment},"立即评价"),React.createElement("div",{className:"transation"==a?"":"comment-back-homepage",style:(0,p.convertLineStyleData)("color:"+t.theme+";border-color:"+t.theme),onClick:this.goToHomepage},"返回首页")))))}}]),t}(g.default);t.default=h},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(0),i=n(o),s=a(3),r=n(s),c=a(1),l=n(c),d=a(2),u=n(d),m=a(5),p=a(6),f=a(7),g=n(f);a(421);var h=function(e){function t(e){(0,i.default)(this,t);var a=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={info:{},logistics:[],arriveTime:"",sameCity:0},a.orderId="",a.franchiseeId="",a.getTransporterInfo=function(){var e=a;m.appMethod.sendRequest({url:"/index.php?r=AppTransport/queryTransporterInfo",data:{order_id:e.orderId,sub_shop_app_id:e.franchiseeId},success:function(t){var a=t.data,n=[{latitude:a.transporterLat,longitude:a.transporterLng,iconPath:"/images/transport.png",width:50,height:50,callout:{content:"距离店铺"+a.tripartite_info.distance+"米",fontSize:11,color:"#333333",borderRadius:4,bgColor:"#ffffff",padding:10,display:"ALWAYS",textAlign:"center"}}];e.setData({info:a,riderMakers:n,centerLatitude:+a.transporterLat+4e-4,centerLongitude:a.transporterLng,showMap:!0})}})},a.getTransportOrderFlow=function(){var e=a;m.appMethod.sendRequest({url:"/index.php?r=AppTransport/getTransportOrderFlow",data:{order_id:e.orderId,sub_shop_app_id:e.franchiseeId},success:function(t){e.setData({logistics:t.data.reverse()})}})},a.getSameJourneySet=function(){var e=a;m.appMethod.sendRequest({url:"/index.php?r=AppEcommerce/getPickUpGoodsTypeSetting",data:{pick_up_type:2,sub_shop_app_id:e.franchiseeId},success:function(t){var a=t.data.app_store_data,n=[{latitude:a.latitude,longitude:a.longitude,iconPath:"http://cdn.jisuapp.cn/static/webapp/images/xcx-goods/merchant-delivery.png",width:47,height:51,callout:{content:"商家配送暂无配送信息",fontSize:11,color:"#333333",borderRadius:4,bgColor:"#ffffff",padding:5,display:"ALWAYS",textAlign:"center"}}];e.setData({riderMakers:n,centerLatitude:+a.latitude+4e-4,centerLongitude:a.longitude,phone:a.contact_phone,showMap:!0})}})},a.contactPhone=function(e){m.appMethod.makePhoneCall(e.currentTarget.dataset.phone)},document.title="配送信息",a}return(0,u.default)(t,e),(0,r.default)(t,[{key:"componentWillMount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,p.getCurrentPageQueryParams)(),t=e.type,a=e.sameCity;this.orderId=e.orderId,this.franchiseeId=e.franchiseeId||"",this.getTransportOrderFlow(),0==t?this.getSameJourneySet():this.getTransporterInfo(),this.setData({type:t,arriveTime:e.arriveTime,sameCity:a})}},{key:"render",value:function(){var e=this.state,t=(e.showGetUserInfo,e.type),a=e.logistics,n=e.arriveTime,o=e.showMap,i=(e.centerLongitude,e.centerLatitude,e.riderMakers,e.phone),s=e.info,r=e.sameCity;return React.createElement("div",{className:"official-page same-journey-logistic"},0==r&&React.createElement("div",{className:"journey-logistics-header"},React.createElement("div",{className:"logistic-status"},0==t?"商家自配送":a[0]&&a[0].content.msg),n&&React.createElement("div",{className:"service-time"},"预计送达时间：",React.createElement("span",null,n)),o&&React.createElement(React.Fragment,null),0==t?React.createElement("div",{className:"rider-info"},"商家信息",React.createElement("span",{onClick:this.contactPhone,"data-phone":i,className:"pull-right contact-rider"},"联系商家")):React.createElement("div",{className:"rider-info"},"骑手信息",s.transporter_phone&&React.createElement("span",{onClick:this.contactPhone,"data-phone":s.transporter_phone,className:"pull-right contact-rider"},"联系骑手"),React.createElement("span",{className:"pull-right rider-name"},s.transporterName))),React.createElement("div",{id:"logisticsPage"},React.createElement("div",{className:"logistics-container"},React.createElement("div",{className:"logistics-list"},a.map(function(e,t){return React.createElement("div",{key:e.id,className:"logistics-item"},React.createElement("div",{className:"logistics-location"},e.content.msg),React.createElement("div",{className:"logistics-time"},e.op_time))})))))}}]),t}(g.default);t.default=h},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(0),i=n(o),s=a(3),r=n(s),c=a(1),l=n(c),d=a(2),u=n(d),m=a(5),p=a(6),f=a(7),g=n(f);a(423);var h=function(e){function t(e){(0,i.default)(this,t);var a=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={is_select:!1,is_over:!1,isMultiple:!1,rebateNum:0,activity_rewards:{},extra_times_limit:{},times_limit:{},recv_limit:0,type:"",surplus_times:0},a.getEffectActivity=function(){var e=a;m.appMethod.sendRequest({url:"/index.php?r=ShareGiftActivity/GetEffectActivity",success:function(t){var a=t.data;e.setData({rebateNum:0,description:a.description,activity_rewards:a.extra_rewards,times_limit:a.times_limit,extra_times_limit:a.extra_times_limit,recv_limit:a.recv_limit,type:a.immediately,surplus_times:a.surplus_times,immediately:a.immediately})}})},a.getRewards=function(e){var t=a;m.appMethod.sendRequest({url:"/index.php?r=ShareGiftActivity/CanRecvRewards",data:{appoint_ids:t.data.ids,extra_appoint_ids:t.data.extraIds},success:function(a){if(a.data){var n=a.data,o=n.extra_rewards[0]||"";o&&(o=t.typeClassify(o.type,o));for(var i in n.rewards){var s=n.rewards[i];s=t.typeClassify(s.type,s)}t.setData({extra_rewards:o}),t.loadRewards(e,n)}}})},a.loadRewards=function(e,t){var n=a,o=t.rewards||[],i=o.length,s=t.recv_chance,r=t.recv_limit,c=t.share_persons,l=n.data.isMultiple;e&&s>1&&1==r&&i>1&&(l=!0);for(var d in o){var u=o[d];u.times=0,u.is_select=!1,e?(o[d].giftsModal=0==r||1==o.length?"0":s>1?"2":"1",o[d].is_select=!1,1==o[d].type&&(0==o[d].stock?o[d].is_hide=!0:o[d].is_hide=!1)):(o[d].giftsModal=n.data.gifts[d].giftsModal,o[d].is_select=n.data.gifts[d].is_select,1==o[d].type&&(1==n.data.gifts[d].is_hide?o[d].is_hide=!0:o[d].is_hide=!1)),n.typeClassify(u.type,u)}n.setData({gifts:o,giftslen:i,share_persons:c,isMultiple:l,rebateNum:0,showModal:!0,recv_chance:s,recv_limit:r,callback:""})},a.typeClassify=function(e,t){switch(e){case"1":t.image="http://cdn.jisuapp.cn/static/webapp/images/share-gifts/coupon.png",t.path="/eCommerce/pages/couponList/couponList";break;case"2":t.image="http://cdn.jisuapp.cn/static/webapp/images/share-gifts/integral.png",t.path="/userCenter/pages/myIntegral/myIntegral";break;case"3":t.image="http://cdn.jisuapp.cn/static/webapp/images/share-gifts/balance.png",t.path="/eCommerce/pages/balance/balance";break;case"4":case"5":t.image="http://cdn.jisuapp.cn/static/webapp/images/share-gifts/vip-card.png",t.path="/eCommerce/pages/vipBenefits/vipBenefits";break;case"6":t.image="http://cdn.jisuapp.cn/static/webapp/images/share-gifts/collect.png",t.path="/awardManagement/pages/collectStars/collectStars";break;case"7":t.image="http://cdn.jisuapp.cn/static/webapp/images/share-gifts/lucky-wheel.png",t.path="/awardManagement/pages/luckyWheelDetail/luckyWheelDetail";break;case"8":t.image="http://cdn.jisuapp.cn/static/webapp/images/share-gifts/scratch.png",t.path="/awardManagement/pages/scratch/scratch";break;case"9":t.image="http://cdn.jisuapp.cn/static/webapp/images/share-gifts/golden.png",t.path="/awardManagement/pages/goldenEggs/goldenEggs"}return t},a.showGifts=function(e){var t=e.target.dataset.type,n=e.target.dataset.index,o=a.typeClassify(t,{}),i=o.path;4!=t&&5!=t||(i=i+"?id="+a.data.gifts[n].value),m.appMethod.turnToPage(i)},a.recvReward=function(e){var t=a,n=e.currentTarget.dataset,o=n.index,i=n.type,s=t.data.rebateNum,r=t.data.gifts[o]||"all",c=t.data.gifts,l=[];if("all"!=i)r.times=1,l.push(r);else if(l=c,0==s)return;for(var d in c)c[d].times>=1||c[d].is_select?(c[d].is_select=!0,c[d].giftsModal=0):(c[d].is_select=!1,c[d].giftsModal=1);t.setData({gifts:c}),t.getRecv(l)},a.getRecv=function(e){var t=a;m.appMethod.sendRequest({url:"/index.php?r=ShareGiftActivity/RecvRewards",method:"POST",data:{rewards:e},success:function(e){t.getRewards(!1);var a=e.data,n=!0;if(a&&a.length)for(var o=0;o<a.length;o++)a[o].recv_result||(m.appMethod.showModal({content:a[o].reason}),n=!1);n&&m.appMethod.showToast({title:"领取成功",icon:"none",duration:3e3})}})},a.clickMinusButton=function(e){a.changeGiftsNums("minus",e)},a.clickPlusButton=function(e){a.changeGiftsNums("plus",e)},a.inputBuyCount=function(e){a.changeGiftsNums("input",e)},a.changeGiftsNums=function(e,t){var n=a,o=t.currentTarget.dataset,i=o.index,s=+t.detail.value,r=n.data.gifts,c=n.data.rebateNum,l=0,d="plus"==e?r[i].times+1:"minus"==e?r[i].times-1:s,u={};if(a.setData({is_select:!1}),"input"==e){if(!/^[0-9]+$/.test(s))return u["gifts["+i+"].times"]=r[i].times,void n.setData(u);c=0;for(var p in r)i!=p&&(c+=r[p].times);if((l=c+s)>n.data.recv_chance)return m.appMethod.showToast({title:"已超过最大可领取奖励量",icon:"none",duration:1e3}),u["gifts["+i+"].times"]=1,u.is_select=!0,u.rebateNum=c+1,void a.setData(u);if(r[i].times>=r[i].stock)return m.appMethod.showToast({title:"已超过最大库存量",icon:"none",duration:1e3}),u["gifts["+i+"].times"]=r[i].times,u.is_select=!0,u.rebateNum=c+1,void a.setData(u);u["gifts["+i+"].times"]=s}if("plus"==e){if((l=c+1)>n.data.recv_chance)return m.appMethod.showToast({title:"已超过最大可领取奖励量",icon:"none",duration:1e3}),void a.setData({is_select:!0,rebateNum:c});if(1==r[i].type&&!r[i].stock)return m.appMethod.showToast({title:"优惠券已领完",icon:"none",duration:1e3}),void a.setData({is_select:!0,rebateNum:c});if((4==r[i].type||5==r[i].type)&&d>1)return m.appMethod.showToast({title:"会员卡最多领取一次",icon:"none",duration:1e3}),void a.setData({is_select:!0,rebateNum:c});if(r[i].times>=r[i].stock)return m.appMethod.showToast({title:"已超过最大库存量",icon:"none",duration:1e3}),void a.setData({is_select:!0,rebateNum:c});u["gifts["+i+"].times"]=d}else if("minus"==e){if(l=c-1,d<0)return;c=c,u["gifts["+i+"].times"]=0==d?0:d}u.rebateNum=l,n.setData(u)},document.title="分享有礼",a}return(0,u.default)(t,e),(0,r.default)(t,[{key:"componentWillMount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,p.getCurrentPageQueryParams)();this.setData({ids:e.ids||"",extraIds:e.extraIds||""}),this.getEffectActivity(),this.getRewards(!0)}},{key:"render",value:function(){var e=this,t=this.state,a=t.recv_limit,n=t.giftslen,o=t.recv_chance,i=t.isMultiple,s=t.surplus_times,r=t.type,c=t.share_persons,l=t.gifts,d=t.rebateNum,u=t.extra_rewards,m=t.immediately,f=t.times_limit,g=t.activity_rewards,h=t.extra_times_limit,v=t.description;return React.createElement("div",{className:"official-page share-gifts"},React.createElement("div",{id:"shareGifts"},React.createElement("div",{className:"banner-top"},React.createElement("div",{className:"image-wrap"},React.createElement("img",{src:"http://cdn.jisuapp.cn/static/webapp/images/share-gifts/banner-top.png",mode:"aspectFill"}))),React.createElement("div",{className:"total-main-wrap"},React.createElement("div",{className:"methods-wrap"},React.createElement("div",{className:"share-gifts-title"},0==a||1==n?React.createElement(React.Fragment,null,"恭喜你获得以下奖励"):1==a&&React.createElement(React.Fragment,null,0==o?"奖励领取成功":i?"以下奖励可选":"以下奖励选一个",i&&React.createElement("div",{className:"no-normal"},o>0&&React.createElement(React.Fragment,null,1==r&&React.createElement(React.Fragment,null,"成功分享",React.createElement("span",{style:(0,p.convertLineStyleData)("color:#FF7100;")},s),"次，剩余",React.createElement("span",{style:(0,p.convertLineStyleData)("color:#FF7100;")},o),"次机会"),2==r&&React.createElement(React.Fragment,null,"成功分享",React.createElement("span",{style:(0,p.convertLineStyleData)("color:#FF7100;")},c),"位好友，剩余",React.createElement("span",{style:(0,p.convertLineStyleData)("color:#FF7100;")},o),"次机会"))))),i?React.createElement("div",null,React.createElement("div",{className:"share-method-list"},l.map(function(t,n){return React.createElement(React.Fragment,{key:n},!t.is_hide&&React.createElement("div",{className:"main-wrap"},React.createElement("div",null,React.createElement("img",{src:t.image}),React.createElement("span",{className:"mian-title"},t.title),0==a&&t.already_times>1&&React.createElement("span",{space:"ensp"},"*"+t.already_times)),(4==t.type||5==t.type)&&t.already_recv||1==t.type&&!t.is_hide&&0==t.stock?React.createElement(React.Fragment,null,React.createElement("div",{className:"showGifts","data-type":t.type,onClick:e.showGifts,"data-index":n},"查看")):React.createElement(React.Fragment,null,0==o?React.createElement(React.Fragment,null,t.is_select?React.createElement("div",{className:"showGifts","data-type":t.type,onClick:e.showGifts,"data-index":n},"查看"):React.createElement("div",{className:"getGifts select","data-type":t.type,"data-index":n},"领取")):React.createElement(React.Fragment,null,0!=o&&React.createElement("div",{className:"quantity"},React.createElement("label",{className:"minus"}),React.createElement("input",{className:"pay-buy-count txt",type:"number",value:t.times,"data-index":n,onInput:e.inputBuyCount}),React.createElement("label",{className:"plus"}),React.createElement("div",{className:"response-area response-area-minus",onClick:e.clickMinusButton,"data-index":n}),React.createElement("div",{className:"response-area response-area-plus isRelative",onClick:e.clickPlusButton,"data-index":n}))))))})),0!=o&&React.createElement(React.Fragment,null,React.createElement("div",{style:(0,p.convertLineStyleData)("width:100%;padding-bottom:40rpx;background:#fff;")},React.createElement("div",{className:"getGifts "+(0==d?"select":"no_select")+" multi-getGifts",onClick:this.recvReward,"data-type":"all","data-index":index},"领取")))):React.createElement("div",{className:"share-method-list"},l&&l.map(function(t,n){return React.createElement(React.Fragment,{key:n},!t.is_hide&&React.createElement("div",{className:"main-wrap"},React.createElement("div",null,React.createElement("img",{src:t.image}),React.createElement("span",{className:"mian-title"},t.title),(0==a||1==l.length)&&t.already_times>1&&React.createElement("span",{space:"ensp"},"*"+t.already_times)),(4==t.type||5==t.type)&&t.already_recv||1==t.type&&!t.is_hide&&0==t.stock?React.createElement(React.Fragment,null,React.createElement("div",{className:"showGifts","data-type":t.type,onClick:e.showGifts,"data-index":n},"查看")):React.createElement(React.Fragment,null,1==t.giftsModal?React.createElement(React.Fragment,null,!t.is_select&&o>0?React.createElement("div",{onClick:e.recvReward,className:"getGifts no_select","data-type":t.type,"data-index":n},"领取"):React.createElement("div",{className:"getGifts select","data-type":t.type,"data-index":n},"领取")):React.createElement(React.Fragment,null,React.createElement("div",{className:"getGifts",onClick:e.showGifts,"data-index":n,"data-type":t.type},"查看")))))}))),u&&u.num>=1&&2==m&&React.createElement("div",{className:"extra-wrap"},React.createElement("div",{className:"share-gifts-title"},"拉新额外奖励"),React.createElement("div",{className:"share-method-list"},React.createElement("div",{className:"main-wrap"},React.createElement("div",null,React.createElement("img",{src:u.image}),React.createElement("span",{className:"mian-title"},u.reward_title),u.num>1&&React.createElement("span",{space:"ensp"},"*"+u.num)),React.createElement("div",{className:"showGifts","data-type":u.type,onClick:this.showGifts},"查看")))),v&&React.createElement("div",{className:"toast-wrap"},React.createElement("div",{className:"tips"},"分享说明"),React.createElement("div",{className:"content"},React.createElement("div",null,"分享奖励：",l&&l.map(function(e,t){return React.createElement("span",{key:t,style:(0,p.convertLineStyleData)("color:#ff7100;")},e.title+(t==l.length-1?"":"、"))}),1==a&&l.length>1?"("+l.length+"选1)":""),React.createElement("div",null,"奖励限制：每个用户"+(2==f.type?"每天":"")+"有",React.createElement("span",null,f.value),"次领取奖励机会"),g.length>0&&React.createElement(React.Fragment,null,React.createElement("div",null,"拉新额外奖励：",React.createElement("span",null,g[0].title)),React.createElement("div",null,"拉新奖励限制：每个用户"+(2==h.type?"每天":"")+"有",React.createElement("span",null,h.value),"次奖励机会")))))))}}]),t}(g.default);t.default=h},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(9),i=n(o),s=a(0),r=n(s),c=a(3),l=n(c),d=a(1),u=n(d),m=a(2),p=n(m),f=a(4),g=n(f),h=a(5),v=a(12),_=n(v),y=a(6),E=a(15),b=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(E),N=a(58),R=a(7),k=n(R);a(425);var w=function(e){function t(e){(0,r.default)(this,t);var a=(0,u.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={pageData:{useBalance:!0,selectDiscountInfo:{},discountList:[]},exchangeCouponData:{dialogHidden:!0,goodsInfo:{},selectModelInfo:{},hasSelectGoods:!1,voucher_coupon_goods_info:{}},changeOrder:!1,showMoreBtn:!1,showMoreGoods:!1,showBenefitInfo:!1,customNumArr:Array.from(new Array(101).keys()).slice(1),userToken:h.appMethod.globalData.userInfo.user_token},a.franchisee_id="",a.requesting=!1,a.pickUpType=0,a.memberDiscountRef=g.default.createRef(),a.onPullDownRefresh=function(){a.dataInit(),setTimeout(function(){h.appMethod.stopPullDownRefresh()},3e3)},a.dataInit=function(){a.getDiningBaseSetting(),a.getDiningFuncSetting(),a.getOrderDetail(a.noticeMethod)},a.showBtnStyle=function(){var e=0;a.data.pageData.allow_app_account&&e++,a.data.pageData.allow_add_dish&&17==a.data.pageData.orderInfo.status&&e++,a.data.pageData.orderInfo.goods_reduced_nums&&a.data.pageData.ec_dining_data.has_reduce_dishes&&e++,a.setData({showBtnNum:e})},a.showMoreBtn=function(){a.setData({showMoreBtn:!a.data.showMoreBtn})},a.getAppECStoreConfig=function(){h.appMethod.getAppECStoreConfig(function(e){a.setData({storeConfig:e,storeStyle:e.color_config})},a.franchisee_id)},a.getOrderDetail=function(e){var t=a;h.appMethod.sendRequest({url:"/index.php?r=AppShop/getOrder",data:{order_id:a.data.orderId},method:"post",success:function(a){var n=a.data[0].form_data,o=n.ecommerce_info,i=o.ecommerce_dining_child_order,s=0,r={},c=[],l=[],d=!1,u=[];if(n.additional_info){for(var m=0;m<n.goods_info.length;m++){var p=n.goods_info[m].delivery_id,f=n.goods_info[m].goods_id;p&&"0"!=p&&-1==c.indexOf(f)&&(l.push(n.goods_info[m]),c.push(f),d=!0)}r.hasAdditionalInfo=d,h.appMethod.setPreviewGoodsInfo(l),h.appMethod.setGoodsAdditionalInfo(n.additional_info||{})}for(var g=0;g<i.length;g++)for(var v=i[g].child_form_data,_=0;_<v.length;_++){s+=v[_].goods_list.length;for(var y=0;y<v[_].goods_list.length;y++)v[_].goods_list[y].model_value&&v[_].goods_list[y].model_value.length&&(v[_].goods_list[y].model_value_str=v[_].goods_list[y].model_value.join("|"))}n.goods_info.forEach(function(e,t){e.is_vip_goods&&(e.model_value&&e.model_value.length&&(e.model_value_str=e.model_value.join("|")),1==o.ec_dining_data.account_type&&e.refunded_num?e.count=e.num-e.refunded_num:e.count=e.num,u.push(e))}),Array.isArray(n.selected_benefit_info)?r["pageData.show_benefit_info"]=!1:r["pageData.show_benefit_info"]=!0,r["pageData.box_fee"]=n.box_fee,r["pageData.tissue_fee"]=n.tissue_fee,r["pageData.server_fee"]=n.server_fee,r["pageData.goodsSum"]=s,r["pageData.totalPayment"]=n.total_price,r["pageData.orderInfo"]=n,r["pageData.people_num"]=n.people_num,r["pageData.additional_info"]=n.additional_info,r["pageData.ec_dining_data"]=o.ec_dining_data,r["pageData.location_id"]=o.ec_dining_data.location_id||"",r["pageData.account_type"]=o.ec_dining_data.account_type,r["pageData.dining_mode"]=o.ec_dining_data.dining_mode,r["pageData.diningOrderList"]=o.ecommerce_dining_child_order,r.vip_goods_list=u;var E=n.selected_benefit_info;Array.isArray(E)||"coupon"==E.discount_type&&2==E.benefit_type&&(r["exchangeCouponData.selectModelInfo"]=E,r["exchangeCouponData.hasSelectGoods"]=!0,r["exchangeCouponData.goodsInfo.cover"]=E.goods_img,r["exchangeCouponData.goodsInfo.title"]=E.goods_title||"",r["exchangeCouponData.goodsInfo.model_value_str"]=E.model_name||""),t.pickUpType=n.pick_up_type,t.setData(r),2==o.ec_dining_data.account_type&&t.showBtnStyle(),t.modifyTime(n),"function"==typeof e&&e()}})},a.noticeMethod=function(){var e=a.data.pageData,t={};1==e.account_type&&3==e.orderInfo.status?e.ec_dining_data.location_id?t.showNoticeModal=!0:t.showNoticeModal=!1:17==e.orderInfo.status?t.showNoticeModal=!0:t.showNoticeModal=!1,a.setData(t)},a.showNoticeModalFn=function(){a.setData({showNoticeModal:!1})},a.orderDelete=function(){var e=a.data.orderId,t=a.franchisee_id,n=h.appMethod.getAppId(),o=t==h.appMethod.getAppId()?"":t;h.appMethod.showModal({content:"是否删除该订单？",showCancel:!0,cancelText:"取消",confirmText:"确定",confirmColor:"#FF7100",confirm:function(){h.appMethod.sendRequest({url:"/index.php?r=AppShop/HideOrder",data:{order_id:e,app_id:n,sub_shop_app_id:o},success:function(e){h.appMethod.turnBack()}})}})},a.orderCancel=function(){var e=a;h.appMethod.sendRequest({url:"/index.php?r=AppShop/cancelOrder",data:{order_id:a.data.orderId},success:function(t){e.getOrderDetail()}})},a.goOrderProgress=function(){var e=a.data.orderId,t=a.franchisee_id,n="/eCommerce/pages/goodsOrderProgress/goodsOrderProgress?orderId="+e+(t?"&franchisee="+t:"");h.appMethod.turnToPage(n)},a.turnToRufundDish=function(){var e=a.data.orderId,t=a.data.pageData.account_type;h.appMethod.turnToPage("/eCommerce/pages/refundDishesDetail/refundDishesDetail?detail="+e+"&type="+t)},a.turnToComment=function(e){var t=a.data.orderId,n=a.franchisee_id,o=n===h.appMethod.getAppId()?"":"&franchisee="+n;h.appMethod.turnToPage("/eCommerce/pages/makeComment/makeComment?detail="+t+o)},a.changeDiningOrder=function(){a.setData({changeOrder:!0,showMoreBtn:!1})},a.changeCustomNum=function(e){var t=+e.detail.value+1;t!=a.data.pageData.people_num&&(a.setData({"pageData.people_num":t}),a.getCalculationInfo(),a.changeOrderInfo())},a.changeOrderInfo=function(){h.appMethod.sendRequest({url:"/index.php?r=AppEcommerce/ChangePeopleNum",data:{num:a.data.pageData.people_num,order_id:a.data.orderId},success:function(e){}})},a.saveOrderInfo=function(){a.setData({changeOrder:!1})},a.turnToAddDish=function(){if(a.franchisee_id){var e=a;return void h.appMethod.showModal({title:"温馨提示",content:"子店商品继续点菜只能跳转子店首页或者连锁首页",showCancel:!0,confirm:function(){e.goToHomepage()}})}a.data.pageData.location_id&&(h.appMethod.globalData.ec_location_id=a.data.pageData.location_id);var t=JSON.parse(a.path),n=t.action;b.clickEventHandler[n]&&b.clickEventHandler[n](t,"","")},a.goToHomepage=function(){var e=a,t=e.franchisee_id,n=h.appMethod.getChainId();if(t&&t!=n){var o=h.appMethod.getCurrentPages(),i=o[o.length-2];i&&"franchisee/pages/goodsMore/goodsMore"==i.route?h.appMethod.turnBack({delta:2}):b.clickEventHandler["to-franchisee"]({"franchisee-id":t})}else{var s=h.appMethod.getHomepageRouter();h.appMethod.reLaunch({url:"/pages/"+s+"/"+s})}},a.getCalculationInfo=function(e){var t=a;h.appMethod.sendRequest({url:"/index.php?r=AppShop/calculationPrice",method:"post",data:{dining_order_id:a.data.orderId,ecommerce_info:{ec_dining_data:{ordering_food_type:1,dining_mode:t.data.pageData.dining_mode,people_num:t.data.pageData.people_num,take_meal_type:t.data.pageData.take_meal_type,location_id:t.data.pageData.location_id,account_type:t.data.pageData.account_type}},sub_shop_app_id:a.franchisee_id,is_balance:a.data.pageData.useBalance?1:0,selected_benefit:a.data.pageData.selectDiscountInfo,pick_up_type:4,voucher_coupon_goods_info:a.data.exchangeCouponData.voucher_coupon_goods_info},success:function(a){var n=a.data,o=n.can_use_benefit,i=n.goods_info,s=[],r=n.selected_benefit_info,c=[],l=[],d={},u=[];o.coupon_benefit&&o.coupon_benefit.length&&u.push({label:"coupon",value:o.coupon_benefit}),o.all_vip_benefit&&o.all_vip_benefit.length&&u.push({label:"vip",value:o.all_vip_benefit}),Array.isArray(o.integral_benefit)||o.integral_benefit&&u.push({label:"integral",value:[o.integral_benefit]}),"coupon"==r.discount_type&&3==r.type&&0==t.data.exchangeCouponData.hasSelectGoods&&t.exchangeCouponInit(parseInt(r.value)),i.forEach(function(e){e.delivery_id&&0!=e.delivery_id&&-1==l.indexOf(e.goods_id)&&(c.push(e.delivery_id),l.push(e.goods_id),s.push(e))}),d["pageData.box_fee"]=n.box_fee,d["pageData.server_fee"]=n.server_fee,d["pageData.tissue_fee"]=n.tissue_fee,d["pageData.discountList"]=u,d["pageData.selectDiscountInfo"]=r,d["pageData.discount_cut_price"]=n.discount_cut_price,d["pageData.total_discount_cut_price"]=n.total_discount_cut_price,d["pageData.balance"]=n.balance,d["pageData.deduction"]=n.use_balance,d["pageData.original_price"]=n.original_price,d["pageData.totalPayment"]=t.readyCount?n.price:n.order_amount_price,d["pageData.additional_goodsid_arr"]=l,t.setData(d),h.appMethod.setPreviewGoodsInfo(s),"function"==typeof e&&e()}})},a.showMemberDiscount=function(){a.memberDiscountRef.current.showDialog(a.data.pageData.selectDiscountInfo)},a.afterSelectedBenefit=function(e){a.setData({"pageData.selectDiscountInfo":e.detail.selectedDiscount,"exchangeCouponData.hasSelectGoods":!1,"exchangeCouponData.voucher_coupon_goods_info":{}}),a.getCalculationInfo()},a.useBalanceChange=function(e){a.setData({"pageData.useBalance":e.detail.value}),a.getCalculationInfo()},a.exchangeCouponInit=function(e){var t=a;h.appMethod.sendRequest({url:"/index.php?r=AppShop/getGoods",data:{data_id:e},success:function(e){var a=e.data[0].form_data,n=[],o={models:[],price:0,modelId:"",models_text:"",imgurl:""};a.model_items.length?(o.price=Number(a.model_items[0].price),o.imgurl=a.model_items[0].img_url,o.modelId=a.model_items[0].id):(o.price=Number(a.price),o.imgurl=a.cover);for(var i in a.model)i&&(n.push(a.model[i]),o.models.push(a.model[i].subModelId[0]),o.models_text+="“"+a.model[i].subModelName[0]+"” ");a.model=n,t.setData({"exchangeCouponData.dialogHidden":!1,"exchangeCouponData.goodsInfo":a,"exchangeCouponData.selectModelInfo":o})},successStatusAbnormal:function(){h.appMethod.showModal({content:"兑换的商品已下架"})}})},a.exchangeCouponHideDialog=function(){a.setData({"pageData.selectDiscountInfo":{title:"不使用优惠",name:"无",no_use_benefit:1},"exchangeCouponData.dialogHidden":!0,"exchangeCouponData.hasSelectGoods":!1,"exchangeCouponData.voucher_coupon_goods_info":{}}),a.getCalculationInfo()},a.exchangeCouponSelectSubModel=function(e){var t=e.target.dataset,n=t.modelIndex,o=t.submodelIndex,i={},s=a.data.exchangeCouponData.selectModelInfo.models,r=a.data.exchangeCouponData.goodsInfo.model,c="";s[n]=r[n].subModelId[o];for(var l=0;l<s.length;l++)for(var d=r[l].subModelId,u=0;u<d.length;u++)s[l]==d[u]&&(c+="“"+r[l].subModelName[u]+"” ");i["exchangeCouponData.selectModelInfo.models"]=s,i["exchangeCouponData.selectModelInfo.models_text"]=c,a.setData(i),a.exchangeCouponResetSelectCountPrice()},a.exchangeCouponResetSelectCountPrice=function(){for(var e=a.data.exchangeCouponData.selectModelInfo.models.join(","),t=a.data.exchangeCouponData.goodsInfo.model_items,n={},o=t.length-1;o>=0;o--)if(t[o].model==e){n["exchangeCouponData.selectModelInfo.stock"]=t[o].stock,n["exchangeCouponData.selectModelInfo.price"]=t[o].price,n["exchangeCouponData.selectModelInfo.modelId"]=t[o].id,n["exchangeCouponData.selectModelInfo.imgurl"]=t[o].img_url;break}a.setData(n)},a.exchangeCouponConfirmGoods=function(){var e=a,t=e.data.exchangeCouponData.goodsInfo,n=t.model,o=e.data.exchangeCouponData.selectModelInfo.models,i="";if(o.length>0)for(var s=0;s<o.length;s++)for(var r=n[s].subModelId,c=0;c<r.length;c++)o[s]==r[c]&&(i+=n[s].subModelName[c]+"； ");t.model_value_str=i,e.setData({"exchangeCouponData.dialogHidden":!0,"exchangeCouponData.selectModelInfo":{},"exchangeCouponData.hasSelectGoods":!0,"exchangeCouponData.voucher_coupon_goods_info":{goods_id:t.id,num:1,model_id:e.data.exchangeCouponData.selectModelInfo.modelId},"exchangeCouponData.goodsInfo":t}),e.getCalculationInfo()},a.cancelPayment=function(){a.setData({"pageData.selectDiscountInfo":{},exchangeCouponData:{},changeOrder:!1,showBenefitInfo:!1}),a.getOrderDetail()},a.confirmPayment=function(e){var t,n=a,o=e.detail.formId||"";o&&a.saveFormId(o),a.requesting||(a.requesting=!0,h.appMethod.sendRequest({url:"/index.php?r=AppShop/addCartOrder",method:"post",data:(t={dining_order_id:a.data.orderId,formId:e.detail.formId,sub_shop_app_id:a.franchisee_id,selected_benefit:a.data.pageData.selectDiscountInfo,is_balance:a.data.pageData.useBalance?1:0,ecommerce_info:{ec_dining_data:{ordering_food_type:1,dining_mode:n.data.pageData.dining_mode,people_num:n.data.pageData.people_num,take_meal_type:n.data.pageData.take_meal_type,location_id:n.data.pageData.location_id,account_type:n.data.pageData.account_type}},pick_up_type:4},(0,i.default)(t,"dining_order_id",a.data.orderId),(0,i.default)(t,"remark",a.data.pageData.orderInfo.orderRemark),(0,i.default)(t,"voucher_coupon_goods_info",a.data.exchangeCouponData.voucher_coupon_goods_info),t),success:function(e){n.setData({"pageData.totalPayment":e.total_price}),n.data.pageData.allow_app_account&&n.payOrder(e.data)},fail:function(){n.requesting=!1},successStatusAbnormal:function(){n.requesting=!1}}))},a.goPayOrder=function(){a.payOrder(a.data.orderId)},a.payOrder=function(e){function t(){var t="/eCommerce/pages/goodsOrderPaySuccess/goodsOrderPaySuccess?detail="+e+(o.franchisee_id?"&franchisee="+o.franchisee_id:"")+"&is_group="+!!o.is_group;o.franchisee_id?h.appMethod.turnToPage(t,1):h.appMethod.sendRequest({url:"/index.php?r=AppMarketing/CheckAppCollectmeStatus",data:{order_id:e,sub_app_id:o.franchisee_id},success:function(e){0==e.valid&&(t+="&collectBenefit=1"),h.appMethod.turnToPage(t,1)}})}function n(){if(o.is_group){if(o.data.teamToken)return void h.appMethod.turnBack();h.appMethod.turnToPage("/eCommerce/pages/groupOrderDetail/groupOrderDetail?id="+e+(o.franchisee_id?"&franchisee="+o.franchisee_id:""),1)}else{if(4==o.pickUpType)return o.getOrderDetail(),void o.setData({changeOrder:!1,showBenefitInfo:!1});h.appMethod.turnToPage("/eCommerce/pages/goodsOrderDetail/goodsOrderDetail?detail="+e+(o.franchisee_id?"&franchisee="+o.franchisee_id:""),1)}}var o=a;if(0==a.data.pageData.totalPayment)return void h.appMethod.sendRequest({url:"/index.php?r=AppShop/paygoods",data:{order_id:e,total_price:0},success:function(e){t()},fail:function(){n()},successStatusAbnormal:function(){n()}});h.appMethod.goPay({orderId:e})},a.setClipboardData=function(e){var t=e.currentTarget.dataset.content;h.appMethod.setClipboardData({data:t})},a.callPhone=function(e){h.appMethod.callPhone(e)},a.showMoreGoods=function(){a.setData({showMoreGoods:!a.data.showMoreGoods})},a.getDiningBaseSetting=function(){var e=a;h.appMethod.sendRequest({url:"/index.php?r=AppEcommerce/getPickUpGoodsTypeSetting",data:{pick_up_type:4,sub_shop_app_id:e.franchisee_id},success:function(t){e.setData({app_store_data:t.data.app_store_data})}})},a.getDiningFuncSetting=function(){var e=a;h.appMethod.sendRequest({url:"/index.php?r=AppEcommerce/getFuncSetting",data:{sub_shop_app_id:a.franchisee_id,ordering_food_type:1,pick_up_type:4},success:function(t){e.path=t.data.add_dish_info.page||"",e.setData({"pageData.allow_add_dish":1==t.data.add_dish_info.allow_app_status,"pageData.allow_app_account":!!t.data.account_info.account_way[1]})}})},a.saveFormId=function(e){h.appMethod.sendRequest({url:"/index.php?r=api/AppMsgTpl/SaveUserFormId",data:{form_id:e},method:"post",success:function(e){console.log(e)}})},a.readyCount=!1,a.showBenefitInfo=function(e){a.getOrderDetail(),2==a.data.pageData.ec_dining_data.account_type&&17==a.data.pageData.orderInfo.status&&(a.getCalculationInfo(a.afterShowBeneft),a.readyCount=!0)},a.afterShowBeneft=function(){a.setData({showBenefitInfo:!0,changeOrder:!0})},a.goToAdditionalInfo=function(){h.appMethod.setGoodsAdditionalInfo(a.data.pageData.additional_info),h.appMethod.turnToPage("/eCommerce/pages/goodsAdditionalInfo/goodsAdditionalInfo?from=diningOrderDetail")},a.modifyTime=function(e){var t={};t["pageData.add_time"]=_.default.formatTimeYMD(e.add_time,"YYYY-MM-DD"),t["pageData.payment_time"]=_.default.formatTimeYMD(e.payment_time),a.data.pageData.diningOrderList.forEach(function(e,a){t["pageData.diningOrderList["+a+"].add_time"]=_.default.formatTimeYMD(e.add_time,"hh:mm:ss")}),a.setData(t)},a.showVipGoodsList=function(){a.setData({showVipGoodsList:!0})},a.hideVipGoodsList=function(){a.setData({showVipGoodsList:!1})},document.title="订单详情",a}return(0,p.default)(t,e),(0,l.default)(t,[{key:"componentWillMount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,y.getCurrentPageQueryParams)(),t=e.detail||"";this.franchisee_id=e.franchisee||"",this.setData({orderId:t,franchisee_id:this.franchisee_id,"pageData.useBalance":!this.franchisee_id})}},{key:"componentDidMount",value:function(){this.dataInit()}},{key:"render",value:function(){var e=this,t=this.state,a=(t.showGetUserInfo,t.pageData),n=t.showNoticeModal,o=t.orderId,i=t.changeOrder,s=t.showMoreBtn,r=t.showBtnNum,c=t.showBenefitInfo,l=t.hasAdditionalInfo,d=t.customNumArr,u=t.app_store_data,m=t.showMoreGoods,p=t.userToken,f=t.exchangeCouponData,h=t.balance,v=t.franchisee_id,_=(t.dialogHidden,t.selectModelInfo,t.goodsInfo,t.storeStyle),E=t.vip_goods_list,b=t.showVipGoodsList;return g.default.createElement(g.default.Fragment,null,g.default.createElement("div",{className:"official-page dining-order-detail"},g.default.createElement("div",{className:"dining-wrapper"},g.default.createElement("div",{className:"order-bg-wrapper"},g.default.createElement("div",{className:"order-bg-pic"}),n&&g.default.createElement("div",{className:"dining-notice",hidden:2==a.ec_dining_data.take_meal_type},g.default.createElement("span",{className:"ico-moon icon-community-report dining-notice-icon"}),g.default.createElement("span",null,"您已下单成功，请不要轻易换桌！"),g.default.createElement("span",{className:"ico-moon icon-closes dining-notice-close",onClick:this.showNoticeModalFn})),g.default.createElement("div",{className:"dining-order-status  flex-between",style:(0,y.convertLineStyleData)("padding-top:"+(n?"50":"40")+"rpx;")},1==a.account_type&&!i&&g.default.createElement(g.default.Fragment,null,0==a.orderInfo.status?g.default.createElement("div",{className:"order-info"},g.default.createElement("div",{className:"order-info-title",onClick:this.goOrderProgress},g.default.createElement("span",null,"待付款"),g.default.createElement("span",{className:"ico-moon icon-rightarrow",style:(0,y.convertLineStyleData)("font-size:32rpx;margin-left:10rpx;color:#fff;")})),g.default.createElement("span",{className:"order-info-tips"},"20分钟内未付款，将自动取消订单")):3==a.orderInfo.status?g.default.createElement("div",{className:"order-info"},g.default.createElement("div",{className:"order-info-title",onClick:this.goOrderProgress},g.default.createElement("span",null,"待评价"),g.default.createElement("span",{className:"ico-moon icon-rightarrow",style:(0,y.convertLineStyleData)("font-size:32rpx;margin-left:10rpx;color:#fff;")})),a.ec_dining_data.duration_time>0&&g.default.createElement("span",{className:"order-info-tips"},"预计等待"+a.ec_dining_data.duration_time+"分钟")):6==a.orderInfo.status?g.default.createElement("div",{className:"order-info"},g.default.createElement("div",{className:"order-info-title",onClick:this.goOrderProgress},g.default.createElement("span",null,"已完成"),g.default.createElement("span",{className:"ico-moon icon-rightarrow",style:(0,y.convertLineStyleData)("font-size:32rpx;margin-left:10rpx;color:#fff;")}))):7==a.orderInfo.status?g.default.createElement("div",{className:"order-info"},g.default.createElement("div",{className:"order-info-title",onClick:this.goOrderProgress},g.default.createElement("span",null,"已关闭"),g.default.createElement("span",{className:"ico-moon icon-rightarrow",style:(0,y.convertLineStyleData)("font-size:32rpx;margin-left:10rpx;color:#fff;")}))):8==a.orderInfo.status&&g.default.createElement("div",{className:"order-info"},g.default.createElement("div",{className:"order-info-title",onClick:this.goOrderProgress},g.default.createElement("span",null,"待商家接单"),g.default.createElement("span",{className:"ico-moon icon-rightarrow",style:(0,y.convertLineStyleData)("font-size:32rpx;margin-left:10rpx;color:#fff;")})),g.default.createElement("span",{className:"order-info-tips"},"15分钟内商家未接单，将自动取消订单")),g.default.createElement("div",{className:"order-operate-box"},(6==a.orderInfo.status||3==a.orderInfo.status||7==a.orderInfo.status)&&g.default.createElement("div",{className:"order-operate",onClick:this.orderDelete},"删除订单"),0==a.orderInfo.status&&g.default.createElement("div",{className:"order-operate change",style:(0,y.convertLineStyleData)("height:56rpx;"),onClick:this.goPayOrder},"立即支付"),3==a.orderInfo.status&&g.default.createElement("div",{className:"order-operate change","data-id":o,onClick:this.turnToComment},"立即评价"),!!+a.ec_dining_data.has_reduce_dishes&&g.default.createElement("div",{className:"order-operate change",onClick:this.turnToRufundDish},"退款详情"))),2==a.account_type&&!i&&!c&&g.default.createElement(g.default.Fragment,null,0==a.orderInfo.status&&g.default.createElement("div",{className:"order-info"},g.default.createElement("div",{className:"order-info-title",onClick:this.goOrderProgress},g.default.createElement("span",null,"待付款"),g.default.createElement("span",{className:"ico-moon icon-rightarrow",style:(0,y.convertLineStyleData)("font-size:32rpx;margin-left:10rpx;color:#fff;")}))),17==a.orderInfo.status?g.default.createElement("div",{className:"order-info"},g.default.createElement("div",{className:"order-info-title",onClick:this.goOrderProgress},g.default.createElement("span",null,"已下单"),g.default.createElement("span",{className:"ico-moon icon-rightarrow",style:(0,y.convertLineStyleData)("font-size:32rpx;margin-left:10rpx;color:#fff;")})),a.ec_dining_data.duration_time>0&&g.default.createElement("span",{className:"order-info-tips"},"预计等待"+a.ec_dining_data.duration_time+"分钟")):16==a.orderInfo.status?g.default.createElement("div",{className:"order-info"},g.default.createElement("div",{className:"order-info-title",onClick:this.goOrderProgress},g.default.createElement("span",null,"待商家接单"),g.default.createElement("span",{className:"ico-moon icon-rightarrow",style:(0,y.convertLineStyleData)("font-size:32rpx;margin-left:10rpx;color:#fff;")})),g.default.createElement("span",{className:"order-info-tips"},"15分钟内商家未接单，将自动取消订单")):7==a.orderInfo.status?g.default.createElement("div",{className:"order-info"},g.default.createElement("div",{className:"order-info-title",onClick:this.goOrderProgress},g.default.createElement("span",null,"已关闭"),g.default.createElement("span",{className:"ico-moon icon-rightarrow",style:(0,y.convertLineStyleData)("font-size:32rpx;margin-left:10rpx;color:#fff;")}))):3==a.orderInfo.status?g.default.createElement("div",{className:"order-info"},g.default.createElement("div",{className:"order-info-title",onClick:this.goOrderProgress},g.default.createElement("span",null,"待评价"),g.default.createElement("span",{className:"ico-moon icon-rightarrow",style:(0,y.convertLineStyleData)("font-size:32rpx;margin-left:10rpx;color:#fff;")}))):6==a.orderInfo.status&&g.default.createElement("div",{className:"order-info"},g.default.createElement("div",{className:"order-info-title",onClick:this.goOrderProgress},g.default.createElement("span",null,"已完成"),g.default.createElement("span",{className:"ico-moon icon-rightarrow",style:(0,y.convertLineStyleData)("font-size:32rpx;margin-left:10rpx;color:#fff;")}))),g.default.createElement("div",{className:"order-operate-box"},3==r&&g.default.createElement("div",{className:"order-operate showMoreBtn",onClick:this.showMoreBtn},g.default.createElement("div",null,g.default.createElement("span",null,"更多"),g.default.createElement("span",{className:"ico-moon "+(s?"icon-uparrow":"icon-downarrow"),style:(0,y.convertLineStyleData)("font-size:24rpx;margin-left:10rpx;")})),g.default.createElement("div",{className:"moreBtn-box",hidden:!s},17==a.orderInfo.status&&g.default.createElement("div",{style:(0,y.convertLineStyleData)("color:#FE782F;"),onClick:this.changeDiningOrder},"修改订单"),(0==a.orderInfo.status||17==a.orderInfo.status)&&g.default.createElement("div",{style:(0,y.convertLineStyleData)("height:56rpx;top:120rpx;color:#FE782F;"),onClick:0==a.orderInfo.status?"goPayOrder":"showBenefitInfo",hidden:!a.allow_app_account},"立即支付"),3==a.orderInfo.status&&g.default.createElement("div",{style:(0,y.convertLineStyleData)("color:#FE782F;"),"data-id":o,onClick:this.turnToComment},"立即评价"))),17==a.orderInfo.status&&g.default.createElement("div",{className:"order-operate",onClick:this.changeDiningOrder,hidden:3==r},"修改订单"),a.ec_dining_data.has_reduce_dishes&&g.default.createElement("div",{className:"order-operate change",onClick:this.turnToRufundDish},"退菜详情"),(6==a.orderInfo.status||3==a.orderInfo.status||7==a.orderInfo.status)&&g.default.createElement("div",{className:"order-operate",onClick:this.orderDelete},"删除订单"),(0==a.orderInfo.status||17==a.orderInfo.status&&3!=r)&&g.default.createElement("div",{className:"order-operate change",style:(0,y.convertLineStyleData)("height:56rpx;"),onClick:0==a.orderInfo.status?"goPayOrder":"showBenefitInfo",hidden:!a.allow_app_account},"立即支付"),3==a.orderInfo.status&&3!=r&&g.default.createElement("div",{className:"order-operate","data-id":o,onClick:this.turnToComment},"立即评价"),17==a.orderInfo.status&&a.allow_add_dish&&g.default.createElement("div",{className:"order-operate change",onClick:this.turnToAddDish},"加菜"),(16==a.orderInfo.status||8==a.orderInfo.status)&&g.default.createElement("div",{className:"order-operate cancel",onClick:this.orderCancel},"取消订单"))))),g.default.createElement("div",{className:"eating-place-wrapper",style:(0,y.convertLineStyleData)("margin-top:"+(i||c?"-160":"-100")+"rpx;")},g.default.createElement("div",{className:"half-shadow",style:(0,y.convertLineStyleData)("left: 0rpx;")}),g.default.createElement("div",{className:"half-shadow",style:(0,y.convertLineStyleData)("right: -60rpx;")}),g.default.createElement("div",{className:"eating-type flex-between"},g.default.createElement("div",null,a.ec_dining_data&&1==a.ec_dining_data.dining_mode?"堂食":"打包"),g.default.createElement("div",{style:(0,y.convertLineStyleData)("font-weight:bold;color:#333;font-size:28rpx;")},a.ec_dining_data&&1==a.ec_dining_data.take_meal_type?"送餐到桌":"前台自取")),g.default.createElement("div",{className:"eating-place-num"},g.default.createElement("div",{className:"eating-num-item"},g.default.createElement("div",{style:(0,y.convertLineStyleData)("font-size:68rpx;"),className:"ellipsis "+(a.ec_dining_data&&2==a.ec_dining_data.take_meal_type?"max_width":"limit_width")},a.ec_dining_data&&a.ec_dining_data.formatted_queue_num||"------"),g.default.createElement("div",{style:(0,y.convertLineStyleData)("color:#666;")},"流水号")),a.location_id&&g.default.createElement("div",{className:"eating-num-item"},g.default.createElement("div",{style:(0,y.convertLineStyleData)("font-size:68rpx;"),className:"ellipsis limit_width"},a.ec_dining_data.location_name||"------"),g.default.createElement("div",{style:(0,y.convertLineStyleData)("color:#666;")},"桌号"))),g.default.createElement("div",{className:"eating-info-detail"},g.default.createElement("div",{className:"flex-between",style:(0,y.convertLineStyleData)(a.orderInfo&&a.orderInfo.remark||l?"margin-bottom:20rpx;":"")},g.default.createElement("div",{style:(0,y.convertLineStyleData)("color:#999;")},"就餐人数"),i&&g.default.createElement(Picker,{className:"eating-picker",onChange:this.changeCustomNum,range:d},g.default.createElement("span",{style:(0,y.convertLineStyleData)("font-weight:bold;")},(a.people_num||1)+"人"),g.default.createElement("span",{className:"ico-moon icon-rightarrow icon-right"})),!i&&g.default.createElement("div",null,a.people_num+"人")),g.default.createElement("div",{hidden:!(a.orderInfo&&a.orderInfo.remark),className:"flex-between",style:(0,y.convertLineStyleData)(l?"margin-bottom:20rpx;":"")},g.default.createElement("div",{style:(0,y.convertLineStyleData)("color:#999;")},"订单备注"),g.default.createElement("div",null,a.orderInfo&&a.orderInfo.remark||"无")),l&&g.default.createElement("div",{className:"flex-between",onClick:this.goToAdditionalInfo},g.default.createElement("div",{style:(0,y.convertLineStyleData)("color:#999;")},"补充信息"),g.default.createElement("span",{className:"ico-moon icon-rightarrow icon-right"})))),g.default.createElement("div",{className:"dining-shop-box"},g.default.createElement("div",{className:"dining-shop flex-between"},g.default.createElement("span",{style:(0,y.convertLineStyleData)("font-size:28rpx;font-weight:bold;")},u&&u.title),g.default.createElement("span",{className:"ico-moon icon-fn-phone icon-right",style:(0,y.convertLineStyleData)("font-size:44rpx;"),"data-phone":u&&u.contact_phone,onClick:this.callPhone}))),g.default.createElement("div",{className:"order-info-wrapper"},g.default.createElement("div",{style:(0,y.convertLineStyleData)("height:"+(a.goodsSum<4||m?"":"240rpx")+";overflow:hidden;")},a.diningOrderList&&a.diningOrderList.map(function(t,n){return g.default.createElement("div",{className:"order-info-box",key:"order_index"},t.child_form_data.map(function(n,o){return g.default.createElement(g.default.Fragment,{key:n.buyer_info.buyer_id},g.default.createElement("div",{className:"custom-info-wrapper flex-between"},g.default.createElement("div",{className:"flex-between"},1==t.from_admin?g.default.createElement("div",{className:"custom-info"},g.default.createElement("img",{src:"http://cdn.jisuapp.cn/static/webapp/images/xcx-dining/default.png"})):0==t.from_admin&&g.default.createElement("div",{className:"custom-info"},g.default.createElement("img",{src:n.buyer_info.cover_thumb})),g.default.createElement("span",{className:"custom-name","data-id":n.buyer_info.buyer_id},n.buyer_info.nickname+(n.buyer_info.buyer_id==p?"（我）":"")+(1==t.from_admin?"（商家）":""))),g.default.createElement("span",{className:"custom-selected"},t.add_time)),g.default.createElement("div",{className:"goods-info-wrapper"},n.goods_list.map(function(n,i){return g.default.createElement(g.default.Fragment,{key:i},!!+n.reduced_num&&g.default.createElement("div",{className:"goods-info-item",style:(0,y.convertLineStyleData)(0==i&&a.goodsSum>3&&!m?"border-bottom:0;padding-bottom:0;":"")},g.default.createElement("div",{className:"goods-image"},g.default.createElement("img",{src:n.cover,mode:"aspectFill"})),g.default.createElement("div",{className:"goods-detail"},g.default.createElement("div",{className:"flex-between"},g.default.createElement("div",{style:(0,y.convertLineStyleData)("max-width:400rpx;"),className:"ellipsis"},n.max_can_use_integral>0&&g.default.createElement("span",{className:"goods-special"},"积"),1==n.is_seckill&&g.default.createElement("span",{className:"goods-special"},"秒杀"),g.default.createElement("span",{className:"goods-name",style:(0,y.convertLineStyleData)("text-decoration:line-through;")},n.goods_name)),10==t.status?g.default.createElement("span",{className:"goods-status2"},"已拒绝"):40==t.status?g.default.createElement("span",{className:"goods-status2"},"已关闭"):(0==t.status||20==t.status||30==t.status)&&g.default.createElement("span",{className:"goods-status2"},1==a.account_type?"已退款":"已退菜")),n.model_value_str&&g.default.createElement("div",{className:"goods-type"},g.default.createElement("div",{className:"type-size ellipsis"},n.model_value_str)),g.default.createElement("div",{className:"goods-price flex-between"},g.default.createElement("div",{className:"price-box"},g.default.createElement("span",{className:"priceNow"},g.default.createElement("span",{style:(0,y.convertLineStyleData)("font-size:20rpx;")},"¥"),n.price),!a.orderInfo&&g.default.createElement("span",{className:"priceBefore"},g.default.createElement("span",{style:(0,y.convertLineStyleData)("font-size:20rpx;")},"￥"),n.virtual_price||0)),g.default.createElement("div",{style:(0,y.convertLineStyleData)("color:#999;font-size:24rpx;")},g.default.createElement("span",{className:"ico-moon icon-closes",style:(0,y.convertLineStyleData)("font-size:20rpx;")}),n.reduced_num)))),!!+n.num&&g.default.createElement("div",{className:"goods-info-item",style:(0,y.convertLineStyleData)(0==i&&a.goodsSum>3&&!m?"border-bottom:0;padding-bottom:0;":"")},g.default.createElement("div",{className:"goods-image"},g.default.createElement("img",{src:n.cover,mode:"aspectFill"})),g.default.createElement("div",{className:"goods-detail"},g.default.createElement("div",{className:"flex-between"},g.default.createElement("div",{style:(0,y.convertLineStyleData)("max-width:400rpx;"),className:"ellipsis"},n.max_can_use_integral>0&&g.default.createElement("span",{className:"goods-special"},"积"),1==n.is_seckill&&g.default.createElement("span",{className:"goods-special"},"秒杀"),g.default.createElement("span",{className:"goods-name"},n.goods_name)),(20==t.status||30==t.status)&&g.default.createElement("span",{className:"goods-status3"},"已出厨")),n.model_value_str&&g.default.createElement("div",{className:"goods-type"},g.default.createElement("div",{className:"type-taste ellipsis"},n.model_value_str)),g.default.createElement("div",{className:"goods-price flex-between"},g.default.createElement("div",{className:"price-box"},g.default.createElement("span",{className:"priceNow"},g.default.createElement("span",{style:(0,y.convertLineStyleData)("font-size:20rpx;")},"¥"),n.price),!a.orderInfo&&g.default.createElement("span",{className:"priceBefore"},g.default.createElement("span",{style:(0,y.convertLineStyleData)("font-size:20rpx;")},"￥"),n.virtual_price||0)),!a.orderInfo&&g.default.createElement("div",{className:"calculate-wrapper"},g.default.createElement("div",{className:"calculate-sub",onClick:e.subGoods,"data-key":o,"data-index":i,"data-value":n.goodsNum},"-"),g.default.createElement("div",{className:"calculate-num"},n.goodsNum),g.default.createElement("div",{className:"calculate-add",onClick:e.addGoods,"data-key":o,"data-index":i,"data-value":n.goodsNum},"+")),a.orderInfo&&g.default.createElement("div",{style:(0,y.convertLineStyleData)("color:#999;font-size:24rpx;")},g.default.createElement("span",{className:"ico-moon icon-closes",style:(0,y.convertLineStyleData)("font-size:20rpx;")}),n.num)))))})))}))})),a.goodsSum>3&&g.default.createElement("div",{className:"goods-showMore"},g.default.createElement("div",{className:"goods-more",hidden:m,onClick:this.showMoreGoods},"展开更多",g.default.createElement("span",{className:"ico-moon icon-downarrow"})),g.default.createElement("div",{className:"goods-more",hidden:!m,onClick:this.showMoreGoods},"点击收起",g.default.createElement("span",{className:"ico-moon icon-uparrow"}))),f.hasSelectGoods&&!f.selectModelInfo.is_refunded&&g.default.createElement("div",{className:"goods-voucher"},g.default.createElement("div",{className:"goods-image"},g.default.createElement("img",{src:f.goodsInfo.cover,mode:"aspectFill"})),g.default.createElement("div",{className:"goods-detail"},g.default.createElement("div",{className:"flex-between"},g.default.createElement("div",{style:(0,y.convertLineStyleData)("max-width:400rpx;"),className:"ellipsis"},g.default.createElement("span",{className:"goods-special"},"赠品"),g.default.createElement("span",{className:"goods-name"},f.goodsInfo.title))),goods.model_value_str&&g.default.createElement("div",{className:"goods-type"},g.default.createElement("div",{className:"type-taste ellipsis"},goods.model_value_str)),g.default.createElement("div",{style:(0,y.convertLineStyleData)("text-align: right;")},"x1"))),g.default.createElement("div",{className:"other-price-wrapper",style:(0,y.convertLineStyleData)("margin-bottom:"+(c?"20rpx":"")+";")},g.default.createElement("div",{className:"other-price-item flex-between",hidden:0==a.tissue_fee},g.default.createElement("span",null,"纸巾费"),g.default.createElement("span",null,"￥"+a.tissue_fee)),a.ec_dining_data&&1==a.ec_dining_data.dining_mode?g.default.createElement("div",{className:"other-price-item flex-between",hidden:0==a.server_fee},g.default.createElement("span",null,"服务费"),g.default.createElement("span",null,"￥"+a.server_fee)):a.ec_dining_data&&2==a.ec_dining_data.dining_mode&&g.default.createElement("div",{className:"other-price-item flex-between",hidden:0==a.box_fee},g.default.createElement("span",null,"包装费"),g.default.createElement("span",null,"￥"+a.box_fee)),g.default.createElement("div",{className:"discounted-item flex-between"},g.default.createElement("div",{className:"discounted-item-detail"},g.default.createElement("span",{style:(0,y.convertLineStyleData)("font-size:24rpx;")},"商品金额")),g.default.createElement("span",null,"￥"+(a.orderInfo&&a.orderInfo.total_original_price))),1==a.account_type?g.default.createElement(g.default.Fragment,null,!(7==a.orderInfo.status)&&a.show_benefit_info&&g.default.createElement("div",{className:"discounted-item flex-between"},g.default.createElement("div",{className:"discounted-item-detail"},g.default.createElement("span",{className:"other-type"},"优惠"),g.default.createElement("span",{style:(0,y.convertLineStyleData)("font-size:24rpx;")},a.orderInfo.selected_benefit_info.name)),g.default.createElement("span",{style:(0,y.convertLineStyleData)("color:#ff7100;")},"￥"+a.orderInfo.discount_cut_price)),a.orderInfo.use_balance>0&&g.default.createElement("div",{className:"discounted-item flex-between"},g.default.createElement("div",{className:"discounted-item-detail"},g.default.createElement("span",{className:"other-type"},"储值"),g.default.createElement("span",{style:(0,y.convertLineStyleData)("font-size:24rpx;")},"储值优惠")),g.default.createElement("span",{style:(0,y.convertLineStyleData)("color:#ff7100;")},"-¥"+a.orderInfo.use_balance))):(2==a.account_type&&a.orderInfo&&0==a.orderInfo.status||a.orderInfo&&3==a.orderInfo.status||a.orderInfo&&6==a.orderInfo.status)&&g.default.createElement(g.default.Fragment,null,a.show_benefit_info&&g.default.createElement("div",{className:"discounted-item flex-between"},g.default.createElement("div",{className:"discounted-item-detail"},g.default.createElement("span",{className:"other-type"},"优惠"),g.default.createElement("span",{style:(0,y.convertLineStyleData)("font-size:24rpx;")},a.orderInfo.selected_benefit_info.name)),g.default.createElement("span",{style:(0,y.convertLineStyleData)("color:#ff7100;")},"￥"+a.orderInfo.selected_benefit_info.discount_price)),a.orderInfo.use_balance>0&&g.default.createElement("div",{className:"discounted-item flex-between"},g.default.createElement("div",{className:"discounted-item-detail"},g.default.createElement("span",{className:"other-type"},"储值"),g.default.createElement("span",{style:(0,y.convertLineStyleData)("font-size:24rpx;")},"储值优惠")),g.default.createElement("span",{style:(0,y.convertLineStyleData)("color:#ff7100;")},"-￥"+a.orderInfo.use_balance))),(a.orderInfo&&1==a.orderInfo.is_vip_order&&"0.00"!=a.orderInfo.vip_cut_price&&!c||!a.discountList.length)&&g.default.createElement("div",{className:"discounted-item flex-between",style:(0,y.convertLineStyleData)("padding-bottom:0;")},g.default.createElement("div",{className:"discounted-item-detail"},g.default.createElement("span",{className:"other-type"},"优惠"),g.default.createElement("span",{style:(0,y.convertLineStyleData)("font-size:24rpx;")},"会员价")),g.default.createElement("span",{style:(0,y.convertLineStyleData)("color:#ff7100;")},"-¥"+(a.orderInfo&&a.orderInfo.vip_cut_price))),(a.orderInfo&&1==a.orderInfo.is_vip_order&&"0.00"!=a.orderInfo.vip_cut_price&&!c||!a.discountList.length)&&g.default.createElement("div",{className:"discounted-item vip_goods_detail",onClick:this.showVipGoodsList,style:(0,y.convertLineStyleData)("margin-bottom:20rpx;")},g.default.createElement("div",{className:"ico-moon icon-rightarrow pull-right"}),g.default.createElement("span",{className:"pull-right select-discount"},"查看详情"))),c&&g.default.createElement("div",{className:"payment-wrapper",hidden:!a.discountList.length},1==a.orderInfo.is_vip_order&&"0.00"!=a.orderInfo.vip_cut_price&&g.default.createElement("div",{className:"discounted-item flex-between",style:(0,y.convertLineStyleData)("padding-bottom:0;padding-top:30rpx;border:none;")},g.default.createElement("div",{className:"discounted-item-detail"},g.default.createElement("span",{className:"other-type"},"优惠"),g.default.createElement("span",{style:(0,y.convertLineStyleData)("font-size:24rpx;")},"会员价")),g.default.createElement("span",{style:(0,y.convertLineStyleData)("color:#ff7100;")},"-¥"+a.orderInfo.vip_cut_price)),1==a.orderInfo.is_vip_order&&"0.00"!=a.orderInfo.vip_cut_price&&g.default.createElement("div",{className:"discounted-item vip_goods_detail",onClick:this.showVipGoodsList},g.default.createElement("div",{className:"ico-moon icon-rightarrow pull-right"}),g.default.createElement("span",{className:"pull-right select-discount"},"查看详情")),g.default.createElement("div",{className:"discounts-item flex-between",style:(0,y.convertLineStyleData)("align-items:baseline;"),onClick:this.showMemberDiscount},g.default.createElement("span",null,"优惠方式"),g.default.createElement("div",{className:"discounts-type"},g.default.createElement("div",{className:"discounts-name"},g.default.createElement("div",{className:"ellipsis",style:(0,y.convertLineStyleData)("max-width:400rpx;display:inline-block;")},a.selectDiscountInfo.title),g.default.createElement("span",{className:"ico-moon icon-rightarrow icon-right"})),g.default.createElement("div",{className:"discounts-price"},"-￥"+(a.selectDiscountInfo.discount_cut_price||0)))),0!=h&&!v&&g.default.createElement("div",{className:"discounts-item flex-between",style:(0,y.convertLineStyleData)("align-items: flex-start;")},g.default.createElement("span",{className:"discounts-name",style:(0,y.convertLineStyleData)("margin-top:14rpx;")},"使用储值金"),g.default.createElement("div",{className:"discounts-type"},g.default.createElement(Switch,{color:"#FF7100",style:(0,y.convertLineStyleData)("transform:scale(.75);margin-right:-20rpx;"),checked:a.useBalance,onChange:this.useBalanceChange}),g.default.createElement("div",{hidden:!a.useBalance,className:"balance-price"},g.default.createElement("span",{className:"pull-right",style:(0,y.convertLineStyleData)("color:#FF7100;")},"- ¥"+a.deduction))))),g.default.createElement("div",{className:"price-count-box",hidden:c},g.default.createElement("div",{className:"price-count"},a.orderInfo&&a.orderInfo.total_discount_cut_price>0&&g.default.createElement("span",{style:(0,y.convertLineStyleData)("color:#999;font-size:26rpx;margin-right:28rpx;")},"已优惠¥"+a.orderInfo.total_discount_cut_price+"元"),g.default.createElement("span",{style:(0,y.convertLineStyleData)("font-size:28rpx;vertical-align:text-bottom;")},"总计:"),g.default.createElement("span",{style:(0,y.convertLineStyleData)("font-size:40rpx;color:#ff7100;")},"￥"+a.totalPayment))),g.default.createElement("div",{className:"order-baseInfo"},g.default.createElement("div",{className:"baseInfo-item flex-between"},g.default.createElement("span",{style:(0,y.convertLineStyleData)("color:#666;")},"下单日期"),g.default.createElement("span",{style:(0,y.convertLineStyleData)("color:#999;")},a.add_time)),a.orderInfo&&a.orderInfo.payment_time&&g.default.createElement("div",{className:"baseInfo-item flex-between"},g.default.createElement("span",{style:(0,y.convertLineStyleData)("color:#666;")},"支付时间"),g.default.createElement("span",{style:(0,y.convertLineStyleData)("color:#999;")},a.payment_time)),g.default.createElement("div",{className:"baseInfo-item flex-between"},g.default.createElement("span",{style:(0,y.convertLineStyleData)("color:#666;")},"订单编号"),g.default.createElement("div",null,g.default.createElement("span",{style:(0,y.convertLineStyleData)("color:#999;")},o),g.default.createElement("span",{style:(0,y.convertLineStyleData)("margin:0 20rpx;width:1px;height:20rpx;background-color:#f1f1f1;display:inline-block;")}),g.default.createElement("span",{style:(0,y.convertLineStyleData)("color:#ff7100;"),onClick:this.setClipboardData,"data-content":o},"复制"))))),2==a.account_type&&g.default.createElement(g.default.Fragment,null,i&&!c&&g.default.createElement("div",{className:"changeOrder-wrapper all-price-box"},a.allow_add_dish&&g.default.createElement("div",{className:"changeOrder add",onClick:this.turnToAddDish,hidden:!a.location_id},"加菜"),g.default.createElement("div",{className:"changeOrder",style:(0,y.convertLineStyleData)("color:#ff7100;padding:0 25rpx;"),onClick:this.showBenefitInfo,hidden:!a.allow_app_account},"保存并支付"),g.default.createElement("div",{className:"changeOrder save",onClick:this.saveOrderInfo,hidden:c,style:(0,y.convertLineStyleData)(a.allow_app_account||a.allow_add_dish?"":"flex:1;")},"保存")),c&&g.default.createElement("div",{className:"all-price-box flex-between",hidden:!i},g.default.createElement("div",{className:"all-price"},g.default.createElement("span",{style:(0,y.convertLineStyleData)("white-space:nowrap;")},"合计："),g.default.createElement("span",{className:"all-price-now priceNow ellipse",style:(0,y.convertLineStyleData)("color:"+_.theme+";max-width:200rpx;")},"￥"+a.totalPayment),g.default.createElement("span",{className:"discounted-price",style:(0,y.convertLineStyleData)("background-color:"+_.theme+";")},"已优惠¥"+a.total_discount_cut_price)),g.default.createElement("div",{className:"flex-between"},g.default.createElement("div",{className:"cancel_pay",onClick:this.cancelPayment},"取消"),g.default.createElement("form",{reportSubmit:"true",onSubmit:this.confirmPayment},g.default.createElement("button",{formType:"submit",className:"all-price-calculate",style:(0,y.convertLineStyleData)("background-color:"+_.theme+"; width:190rpx;border-radius:0;")},"去结算")))))),b&&g.default.createElement("div",{className:"vip_goods_mask",onClick:this.hideVipGoodsList},g.default.createElement("div",{className:"vipGoodsWarp"},a.orderInfo.dining_vip_card_info&&g.default.createElement("div",{className:"custom-info-wrapper flex-between"},g.default.createElement("div",{className:"flex-between"},g.default.createElement("div",{className:"custom-info"},g.default.createElement("img",{src:a.orderInfo.dining_vip_card_info.cover_thumb})),g.default.createElement("span",{className:"custom-name"},a.orderInfo.dining_vip_card_info.title)),g.default.createElement("div",{className:"pull-right"},g.default.createElement("span",{className:"cut_price_tip"},"优惠"),g.default.createElement("span",{className:"vip_cut_price"},"-¥"+a.orderInfo.vip_cut_price))),g.default.createElement("div",{className:"goods-info-wrapper"},E.map(function(t,n){return g.default.createElement(g.default.Fragment,{key:"items"},!!+t.refunded_num&&g.default.createElement("div",{className:"goods-info-item",style:(0,y.convertLineStyleData)(0==n&&a.goodsSum>3&&!m?"border-bottom:0;padding-bottom:0;":"")},g.default.createElement("div",{className:"goods-image"},g.default.createElement("img",{src:t.cover,mode:"aspectFill"})),g.default.createElement("div",{className:"goods-detail"},g.default.createElement("div",{className:"flex-between"},g.default.createElement("div",{style:(0,y.convertLineStyleData)("max-width:400rpx;"),className:"ellipsis"},t.max_can_use_integral>0&&g.default.createElement("span",{className:"goods-special"},"积"),1==t.is_seckill&&g.default.createElement("span",{className:"goods-special"},"秒杀"),g.default.createElement("span",{className:"goods-name",style:(0,y.convertLineStyleData)("text-decoration:line-through;")},t.goods_name)),10==orderData.status?g.default.createElement("span",{className:"goods-status2"},"已拒绝"):40==orderData.status&&g.default.createElement("span",{className:"goods-status2"},"已关闭"),g.default.createElement("span",{className:"goods-status2"},"已退")),t.model_value_str&&g.default.createElement("div",{className:"goods-type"},g.default.createElement("div",{className:"type-size ellipsis"},t.model_value_str)),g.default.createElement("div",{className:"goods-price flex-between"},g.default.createElement("div",{className:"price-box"},g.default.createElement("span",{className:"priceNow"},g.default.createElement("span",{style:(0,y.convertLineStyleData)("font-size:20rpx;")},"¥"),t.price),1==a.orderInfo.is_vip_order&&t.is_vip_goods&&g.default.createElement("span",{className:"dinning_vip_tips"},"会员价"),g.default.createElement("span",{className:"priceBefore",style:(0,y.convertLineStyleData)("margin-left:12rpx;font-size:28rpx;text-decoration:none;")},g.default.createElement("span",{style:(0,y.convertLineStyleData)("font-size:20rpx;")},"¥"),t.original_price)),g.default.createElement("div",{style:(0,y.convertLineStyleData)("color:#999;font-size:24rpx;")},g.default.createElement("span",{className:"ico-moon icon-closes",style:(0,y.convertLineStyleData)("font-size:20rpx;")}),t.refunded_num)))),t.count&&g.default.createElement("div",{className:"goods-info-item",style:(0,y.convertLineStyleData)(0==n&&a.goodsSum>3&&!m?"border-bottom:0;padding-bottom:0;":"")},g.default.createElement("div",{className:"goods-image"},g.default.createElement("img",{src:t.cover,mode:"aspectFill"})),g.default.createElement("div",{className:"goods-detail"},g.default.createElement("div",{className:"flex-between"},g.default.createElement("div",{style:(0,y.convertLineStyleData)("max-width:400rpx;"),className:"ellipsis"},t.max_can_use_integral>0&&g.default.createElement("span",{className:"goods-special"},"积"),1==t.is_seckill&&g.default.createElement("span",{className:"goods-special"},"秒杀"),g.default.createElement("span",{className:"goods-name"},t.goods_name)),(20==orderData.status||30==orderData.status)&&g.default.createElement("span",{className:"goods-status3"},"已出厨")),t.model_value_str&&g.default.createElement("div",{className:"goods-type"},g.default.createElement("div",{className:"type-taste ellipsis",style:(0,y.convertLineStyleData)("max-width:400rpx;")},t.model_value_str)),g.default.createElement("div",{className:"goods-price flex-between"},g.default.createElement("div",{className:"price-box"},g.default.createElement("span",{className:"priceNow"},g.default.createElement("span",{style:(0,y.convertLineStyleData)("font-size:20rpx;")},"¥"),t.price),1==a.orderInfo.is_vip_order&&t.is_vip_goods&&g.default.createElement("span",{className:"dinning_vip_tips"},"会员价"),g.default.createElement("span",{className:"priceBefore",style:(0,y.convertLineStyleData)("margin-left:12rpx;font-size:28rpx;text-decoration:none;")},g.default.createElement("span",{style:(0,y.convertLineStyleData)("font-size:20rpx;")},"¥"),t.original_price)),!a.orderInfo&&g.default.createElement("div",{className:"calculate-wrapper"},g.default.createElement("div",{className:"calculate-sub",onClick:e.subGoods,"data-key":key,"data-index":n,"data-value":t.goodsNum},"-"),g.default.createElement("div",{className:"calculate-num"},t.goodsNum),g.default.createElement("div",{className:"calculate-add",onClick:e.addGoods,"data-key":key,"data-index":n,"data-value":t.goodsNum},"+")),a.orderInfo&&g.default.createElement("div",{style:(0,y.convertLineStyleData)("color:#999;font-size:24rpx;")},g.default.createElement("span",{className:"ico-moon icon-closes",style:(0,y.convertLineStyleData)("font-size:20rpx;")}),t.count)))))}))))),g.default.createElement(N.MemberDiscount,{ref:this.memberDiscountRef}))}}]),t}(k.default);t.default=w},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(0),i=n(o),s=a(3),r=n(s),c=a(1),l=n(c),d=a(2),u=n(d),m=a(5),p=a(12),f=n(p),g=a(6),h=a(7),v=n(h);a(427);var _=function(e){function t(e){(0,i.default)(this,t);var a=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={},a.getModifyOrderList=function(){var e=a;m.appMethod.sendRequest({url:"/index.php?r=AppEcommerce/getModifiedOrderList",data:{order_id:a.data.orderId},success:function(t){for(var a=0;a<t.data.length;a++)for(var n=t.data[a].form_data.apply_goods,o=0;o<n.length&&n[o].model_value;o++)n[o].model_value_str=n[o].model_value.join("|");e.setData({diningOrderList:t.data})}})},a.getRufundDetail=function(){var e=a;m.appMethod.sendRequest({url:"/index.php?r=/AppEcommerce/getOrderRefundApplyByOrderId",data:{order_id:a.data.orderId},success:function(t){e.setData({orderInfo:t.data}),e.modifyTime(t.data[0].add_time)}})},a.modifyTime=function(e){var t=f.default.formatTimeYMD(e);a.setData({add_time:t})},document.title="退款详情",a}return(0,u.default)(t,e),(0,r.default)(t,[{key:"componentWillMount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,g.getCurrentPageQueryParams)(),t=e.type,a=e.detail;this.setData({account_type:t,orderId:a}),1==t?this.getRufundDetail():this.getModifyOrderList()}},{key:"render",value:function(){var e=this.state,t=(e.showGetUserInfo,e.add_time),a=e.account_type,n=e.orderInfo,o=e.diningOrderList;return React.createElement("div",{className:"official-page refund-dishes-detail"},1==a?React.createElement("div",{className:"refund-wrapper"},n&&n.map(function(e,a){return React.createElement(React.Fragment,{key:!0},React.createElement("div",{className:"refund-head flex-between"},React.createElement("div",null,"第"+(a+1)+"次退款"),React.createElement("div",null,"申请时间："+t)),React.createElement("div",{className:"refund-goods-wrapper",style:(0,g.convertLineStyleData)("margin-bottom:10rpx;")},React.createElement("div",{className:"refund-title",hidden:a>0},"退款商品"),e.form_data.refund_goods.map(function(e,t){return React.createElement(React.Fragment,{key:!0},React.createElement("div",{className:"goods-info-item"},React.createElement("div",{className:"goods-image"},React.createElement("img",{src:e.cover,mode:"aspectFill"})),React.createElement("div",{className:"goods-detail"},React.createElement("div",{className:"flex-between"},React.createElement("div",{style:(0,g.convertLineStyleData)("display:flex;align-items:center;")},e.max_can_use_integral>0&&React.createElement("span",{className:"goods-special"},"积"),1==e.is_seckill&&React.createElement("span",{className:"goods-special"},"秒杀"),React.createElement("span",{className:"goods-name ellipsis",style:(0,g.convertLineStyleData)("max-width:400rpx;")},e.title))),React.createElement("div",{className:"goods-type"},e.model_name&&React.createElement("div",{className:"type-size"},e.model_name)),React.createElement("div",{className:"goods-price flex-between"},React.createElement("div",{className:"price-box"},React.createElement("span",{className:"priceNow"},React.createElement("span",{style:(0,g.convertLineStyleData)("font-size:30rpx;")},"￥"),e.is_vip_goods?e.price:e.original_price||e.price),e.is_vip_goods&&React.createElement("span",{className:"dinning_vip_tips"},"会员价"),e.is_vip_goods&&React.createElement("span",{style:(0,g.convertLineStyleData)("color:#999;font-size:26rpx;")},"¥"+e.original_price)),React.createElement("div",{className:"calculate-wrapper",style:(0,g.convertLineStyleData)("color:#999;")},"x"+e.num)))))}),React.createElement("div",{className:"refunds-price-wrapper"},React.createElement("div",{className:"refund-info-item flex-between"},React.createElement("span",{id:"refund-price",style:(0,g.convertLineStyleData)("color:#999;")},"退款金额"),React.createElement("span",null,"￥"+e.refund_price)),React.createElement("div",{className:"refund-info-item flex-between"},React.createElement("span",{style:(0,g.convertLineStyleData)("color:#999;")},"退款方式"),React.createElement("span",null,"原付款方式退回")),React.createElement("div",{className:"refund-info-item flex-between"},React.createElement("span",{style:(0,g.convertLineStyleData)("color:#999;")},"退款说明"),React.createElement("span",null,e.form_data.refund_reason_info)))))})):2==a&&React.createElement("div",{className:"refund-wrapper",style:(0,g.convertLineStyleData)("padding-top:30rpx;")},o.map(function(e,t){return React.createElement(React.Fragment,{key:!0},React.createElement("div",{className:"refund-head flex-between"},React.createElement("div",null,"第"+(t+1)+"次退菜"+(1==e.from_admin?"（商家）":"")),React.createElement("div",null,"申请时间："+e.apply_time)),React.createElement("div",{className:"refund-goods-wrapper",style:(0,g.convertLineStyleData)("margin-bottom:10rpx;")},React.createElement("div",{className:"refund-title"},"退菜商品"),e.form_data.apply_goods.map(function(e,t){return React.createElement(React.Fragment,{key:!0},React.createElement("div",{className:"goods-info-item"},React.createElement("div",{className:"goods-image"},React.createElement("img",{src:e.cover,mode:"aspectFill"})),React.createElement("div",{className:"goods-detail"},React.createElement("div",{className:"flex-between"},React.createElement("div",{style:(0,g.convertLineStyleData)("display:flex;align-items:center;")},e.max_can_use_integral>0&&React.createElement("span",{className:"goods-special"},"积"),1==e.is_seckill&&React.createElement("span",{className:"goods-special"},"秒杀"),React.createElement("span",{className:"goods-name ellipsis",style:(0,g.convertLineStyleData)("max-width:400rpx;")},e.goods_name))),e.model_value_str&&React.createElement("div",{className:"goods-type"},React.createElement("div",{className:"type-size ellipsis"},e.model_value_str)),React.createElement("div",{className:"goods-price flex-between"},React.createElement("div",{className:"price-box"},React.createElement("span",{className:"priceNow"},React.createElement("span",{style:(0,g.convertLineStyleData)("font-size:30rpx;")},"￥"),e.is_vip_goods?e.price:e.original_price||e.price),e.is_vip_goods&&React.createElement("span",{className:"dinning_vip_tips"},"会员价"),e.is_vip_goods&&React.createElement("span",{style:(0,g.convertLineStyleData)("color:#999;font-size:26rpx;")},"¥"+e.original_price)),React.createElement("div",{className:"calculate-wrapper",style:(0,g.convertLineStyleData)("color:#999;")},"x"+e.num)))))})))})))}}]),t}(v.default);t.default=_},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(0),i=n(o),s=a(3),r=n(s),c=a(1),l=n(c),d=a(2),u=n(d),m=a(5),p=a(6),f=a(7),g=n(f);a(429);var h=function(e){function t(e){(0,i.default)(this,t);var a=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={codeImgUrl:"",codeNum:"",codeStatus:0},a.setVerificationCodeData=function(e){a.setData({codeImgUrl:e.data.qrcode_url,codeNum:e.data.code,codeStatus:e.data.status})},a.timeInterval="",a.connectSocket=function(){var e=a;m.appMethod.connectSocket({url:"wss://test.zhichiwangluo.com",header:{"content-type":"application/json"},method:"GET"}),m.appMethod.onSocketOpen(function(t){var a={action:"mark_client",user_token:m.appMethod.globalData.userInfo.user_token,scenario_name:"app_order_verify",session_key:m.appMethod.globalData.sessionKey};m.appMethod.sendSocketMessage({data:JSON.stringify(a)}),e.timeInterval=setInterval(function(){var e={action:"heartbeat",user_token:m.appMethod.globalData.userInfo.user_token,scenario_name:"app_order_verify",session_key:m.appMethod.globalData.sessionKey};m.appMethod.sendSocketMessage({data:JSON.stringify(e)})},3e4)}),m.appMethod.onSocketMessage(function(t){var a=JSON.parse(t.data);if("push_to_client"==a.action){var n=JSON.parse(a.msg);"app_order_verify"==n.type&&0==n.status&&(e.setData({codeStatus:1}),clearInterval(e.timeInterval),m.appMethod.closeSocket())}})},document.title="核销码",a}return(0,u.default)(t,e),(0,r.default)(t,[{key:"componentWillMount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,p.getCurrentPageQueryParams)(),t=this,a=e.sub_shop_app_id,n=e.detail;m.appMethod.sendRequest({url:"/index.php?r=AppShop/GetOrderVerifyCode",data:{sub_shop_app_id:a,order_id:n},success:t.setVerificationCodeData})}},{key:"componentWillUnmount",value:function(){var e=this;clearInterval(e.timeInterval)}},{key:"render",value:function(){var e=this.state,t=(e.showGetUserInfo,e.codeStatus),a=e.codeImgUrl,n=e.codeNum;return React.createElement("div",{className:"official-page verification-code-page"},React.createElement("div",{className:"page",id:"verificationCodePage"},React.createElement("div",{className:"verification-code-area "+(1==t?"finished":"")},React.createElement("img",{className:"verification-code-img",src:a}),React.createElement("div",{className:"verification-code-text"},React.createElement("div",null,"核销码:"),React.createElement("div",{className:"num"},n)),React.createElement("div",{className:"verification-code-finished"},React.createElement("div",{className:"text"},"已完成")))))}}]),t}(g.default);t.default=h},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(9),i=n(o),s=a(0),r=n(s),c=a(3),l=n(c),d=a(1),u=n(d),m=a(2),p=n(m),f=a(5),g=a(6),h=a(7),v=n(h);a(431);var _=function(e){function t(e){(0,r.default)(this,t);var a=(0,u.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={centerLat:"",centerLng:"",addressListMakers:[],circles:[{latitude:"",longitude:"",fillColor:"#ff710033",radius:2e3}],sameJourneyId:"",notInRange:!1,showAddress:!1,storeStyle:{}},a.callout={content:"门店地址",fontSize:14,color:"#333333",borderRadius:4,bgColor:"#ffffff",padding:10,display:"ALWAYS",textAlign:"center",notInRange:!1},a.franchiseeId="",a.dataInitial=function(){a.getAppECStoreConfig(),a.getAddressList(),a.getCurrentLocation(),a.getPickUpGoodsType(),a.isShowAddress()},a.getPickUpGoodsType=function(){var e=a;f.appMethod.sendRequest({url:"/index.php?r=AppEcommerce/getPickUpGoodsTypeSetting",data:{pick_up_type:2,sub_shop_app_id:e.franchiseeId},success:function(t){if(t.data.app_store_data){var a=t.data.app_store_data.longitude,n=t.data.app_store_data.latitude,o=e.data.addressListMakers;o.push({latitude:n,longitude:a,iconPath:"/images/delivery.png",width:20,height:20}),e.setData({centerLng:a,centerLat:n,"circles[0].longitude":a,"circles[0].latitude":n,"circles[0].radius":+t.data.config_data.deliver_distance,addressListMakers:o,showMap:!0})}}})},a.getAddressList=function(){var e=a;f.appMethod.sendRequest({url:"/index.php?r=AppShop/addressList",data:{sub_shop_app_id:e.franchiseeId},success:function(t){var a=t.data,n=e.data.addressListMakers,o=!1;a.map(function(e){var t=void 0;t=0==e.address_info.label?"http://cdn.jisuapp.cn/static/webapp/images/xcx-goods/same-city-home.png":1==e.address_info.label?"http://cdn.jisuapp.cn/static/webapp/images/xcx-goods/same-city-school.png":2==e.address_info.label?"http://cdn.jisuapp.cn/static/webapp/images/xcx-goods/same-city-company.png":"http://cdn.jisuapp.cn/static/webapp/images/xcx-goods/same-city-other.png",n.push({latitude:e.latitude,longitude:e.longitude,iconPath:t,width:24,height:28}),e.config&&1!=e.config.intra_city&&(o=!0)});var i=e.data.sameJourneyId?e.data.sameJourneyId:a.length&&a[0].id;e.setData({notInRange:o,addressList:a,sameJourneyId:i,addressListMakers:n})}})},a.selectDelivery=function(e){var t=e.currentTarget.dataset.index,n=a.data.addressList;a.setData({sameJourneyId:n[t].id}),a.sureDelivery()},a.sureDelivery=function(){var e=a.data.sameJourneyId,t=f.appMethod.getCurrentPages(),n=t[t.length-2];if(!n)return Toast.info("当前操作需要返回上一页"),void f.appMethod.turnBack();var o=a.data.addressList;if(!e)return void f.appMethod.showModal({content:"请选择配送点"});if(a.data.compindex&&a.data.compindex>-1){for(var s=a.data.compindex,r=0;r<o.length;r++)if(o[r].id==e){var c;n.setData((c={},(0,i.default)(c,"eles["+s+"].selectSameJourneyId",e),(0,i.default)(c,"eles["+s+"].selectSameJourney",o[r]),(0,i.default)(c,"eles["+s+"].sameJourneyTimeType",""),(0,i.default)(c,"eles["+s+"].sameJourneyDateTime",""),c))}}else for(var l=0;l<o.length;l++)o[l].id==e&&n.setData({selectSameJourneyId:e,selectSameJourney:o[l],sameJourneyTimeType:"",sameJourneyDateTime:""});f.appMethod.turnBack()},a.getAppECStoreConfig=function(){f.appMethod.getAppECStoreConfig(function(e){a.setData({storeStyle:e.color_config})},a.franchiseeId)},a.getCurrentLocation=function(){var e=a;f.appMethod.getLocation({success:function(t){var a=t.latitude,n=t.longitude;f.appMethod.sendRequest({url:"/index.php?r=Map/getAreaInfoByLatAndLng",method:"post",data:{latitude:a,longitude:n},success:function(t){var o=e.data.addressListMakers;o.push({latitude:a,longitude:n,iconPath:"http://cdn.jisuapp.cn/static/webapp/images/xcx-goods/same-city-me.png",width:20,height:20}),e.setData({currentLocationData:t.data,addressListMakers:o})}})}})},a.opratAddress=function(){a.isBack=!0,f.appMethod.turnToPage("/eCommerce/pages/myAddress/myAddress?from=form")},a.isShowAddress=function(){var e=a;f.appMethod.sendRequest({url:"/index.php?r=AppEcommerce/getSwitchBySwitchName",method:"post",data:{switch_name:"intra_city_address_position"},success:function(t){t.status||e.setData({showAddress:1==t.data})}})},document.title="选择配送点",a}return(0,p.default)(t,e),(0,l.default)(t,[{key:"componentWillMount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,g.getCurrentPageQueryParams)();this.franchiseeId=e.franchiseeId||"",this.setData({from:e.from||"",sameJourneyId:e.sameJourneyId||"",compindex:e.compindex||""}),this.dataInitial()}},{key:"componentDidMount",value:function(){this.isBack&&this.getAddressList()}},{key:"render",value:function(){var e=this,t=this.state,a=t.currentLocationData,n=t.storeStyle,o=t.showAddress,i=(t.centerLng,t.centerLat,t.circles,t.addressListMakers,t.showMap),s=t.addressList,r=t.sameJourneyId,c=t.from,l=t.notInRange;return React.createElement("div",{className:"official-page goods-same-journey"},o&&React.createElement("div",{className:"current-location-box",onClick:this.selectGoodsSameJourney},React.createElement("span",{className:"ico-moon icon-goods-location"}),React.createElement("span",null,a&&a.formatted_addresses&&a.formatted_addresses.recommend||"暂无地址"),React.createElement("span",{onClick:this.getCurrentLocation,className:"pull-right renew-position",style:(0,g.convertLineStyleData)("color:"+n.theme)},"重新定位")),i&&o&&React.createElement("div",null),React.createElement("div",{className:"receipt-header"},"收货地址"),React.createElement("div",{className:"delivery-list-box"},console.log(s),s&&s.map(function(t,a){return React.createElement(React.Fragment,{key:t.id},("preview"!=c||t.config&&1==t.config.intra_city)&&React.createElement("div",{className:"delivery-list",onClick:e.selectDelivery,"data-index":a},React.createElement("span",{className:"ico-moon icon-goods-location"}),React.createElement("div",{className:"delivery-list-content"},React.createElement("div",{className:"delivery-list-title"},t.config&&1==t.config.intra_city&&React.createElement("label",{className:"support-same-city address-label"},"可同城"),0==t.address_info.label&&React.createElement("label",{className:"home address-label"},"家"),2==t.address_info.label&&React.createElement("label",{className:"company address-label"},"公司"),1==t.address_info.label&&React.createElement("label",{className:"school address-label"},"学校"),t.address_info.name+" "+t.address_info.contact),React.createElement("div",{className:"delivery-list-detail"},t.address_info.province.text+t.address_info.city.text+t.address_info.district.text+(t.detail_address||""))),React.createElement("label",{style:(0,g.convertLineStyleData)(r==t.id?"color:"+n.theme:""),className:"delivery-check-box ico-moon icon-success-tip "+(r==t.id?"checked":"")})))})),"preview"==c&&s&&!!s.length&&l&&React.createElement(React.Fragment,null,React.createElement("div",{className:"receipt-header no-support-header"},"以下地址超出配送范围"),React.createElement("div",{className:"delivery-list-box no-support-pick"},s.map(function(e,t){return React.createElement(React.Fragment,{key:e.id},e.config&&1!=e.config.intra_city&&React.createElement("div",{className:"delivery-list"},React.createElement("span",{className:"ico-moon icon-goods-location"}),React.createElement("div",{className:"delivery-list-content"},React.createElement("div",{className:"delivery-list-title"},0==e.address_info.label&&React.createElement("label",{className:"address-label"},"家"),2==e.address_info.label&&React.createElement("label",{className:"address-label"},"公司"),1==e.address_info.label&&React.createElement("label",{className:"address-label"},"学校"),e.address_info.name+" "+e.address_info.contact),React.createElement("div",{className:"delivery-list-detail"},e.address_info.province.text+e.address_info.city.text+e.address_info.district.text+(e.detail_address||""))),React.createElement("label",{className:"delivery-check-box ico-moon icon-success-tip"})))}))),!(s&&s.length)&&React.createElement("div",{className:"same-journey-null"},React.createElement("img",{src:"http://cdn.jisuapp.cn/static/webapp/images/xcx-goods/same-journey-null.png"}),React.createElement("div",{onClick:this.opratAddress},"暂无收货地址,",React.createElement("span",{style:(0,g.convertLineStyleData)(n.theme?"color:"+n.theme:"color:#ff7100")},"去添加地址"))),React.createElement("div",{className:"sure-delivery",style:(0,g.convertLineStyleData)("background:"+n.theme),onClick:this.opratAddress},"管理收货地址"))}}]),t}(v.default);t.default=_},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(17),i=n(o),s=a(0),r=n(s),c=a(3),l=n(c),d=a(1),u=n(d),m=a(2),p=n(m);a(16);var f=a(5),g=a(6),h=a(7),v=n(h);a(433);var _=a(434),y=n(_),E=1900,b=2099,N=function(e){function t(e){(0,r.default)(this,t);var a=(0,u.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={year:(new Date).getFullYear(),month:(new Date).getMonth()+1,day:(new Date).getDate(),startDate:"2018-01",endDate:"2099-12",header:!0,next:!0,prev:!0,showMoreDays:!0,weeks:!0,weeksType:"cn",cellSize:32,lunar:!1,days_array:[],memberDays:[],weekTitle:["日","一","二","三","四","五","六"],max_year:2099,max_month:12,min_year:1900,min_month:1,franchiseeId:"",monthsData:[]},a.getMemberDayInfo=function(){var e=a.data.days_array,t=e.length,n=e[0][0],o=e[t-1][6],i=a;f.appMethod.sendRequest({url:"/index.php?r=appVipCard/vipBenefitDayCalendar",method:"post",data:{start_time:n.year+"-"+n.month+"-"+n.day,end_time:o.year+"-"+o.month+"-"+o.day,sub_shop_app_id:i.data.franchiseeId},hideLoading:!1,success:function(e){var t=e.data,a=[],n=!0,o=!1,s=void 0;try{for(var r,c=Object.keys(t)[Symbol.iterator]();!(n=(r=c.next()).done);n=!0){var l=r.value;t[l].length&&3===l.split("-").length&&function(){var e=[];t[l].map(function(t){e.push(t.id)}),a.push({id:e,year:l.split("-")[0],month:l.split("-")[1],day:l.split("-")[2]})}()}}catch(e){o=!0,s=e}finally{try{!n&&c.return&&c.return()}finally{if(o)throw s}}i.setData({memberDays:a}),i._setMemberDay()}})},a._setMemberDay=function(){a.setData({days_array:a._setCalendarData(a.data.year,a.data.month)})},a._checkYear=function(e){if(e<E)throw new RangeError("年份不能小于"+E+"年");if(e>b)throw new RangeError("年份不能大于"+b+"年");return!0},a._checkMonth=function(e){if(e<1)throw new RangeError("月份不能小于1");if(e>12)throw new RangeError("月份不能大于12");return!0},a._checkDay=function(e){if(e<1)throw new RangeError("日期不能小于1");if(e>31)throw new RangeError("日期不能大于31");return!0},a._yearChange=function(e,t){a._checkYear(e)&&a.setData({year:e,days_array:a._setCalendarData(e,a.data.month)})},a._monthChange=function(e,t){a._checkMonth(e)&&a.setData({month:e,days_array:a._setCalendarData(a.data.year,e)})},a._dayChange=function(e,t){a._checkDay(e)&&a.setData({day:e})},a._setStartDate=function(e,t){if(7!=e.length||4!=e.indexOf("-"))throw new Error("起始日期必须是YYYY-MM格式");var n=parseInt(e.split("-")[0]),o=parseInt(e.split("-")[1]);if(!(!isNaN(n)&&n>=E&&!isNaN(o)&&o>=1&&o<=12))throw new Error("起始日期必须是YYYY-MM格式，且大于等于1900-01");a.setData({startDate:e,min_year:n,min_month:o})},a._setEndDate=function(e,t){if(7!=e.length||4!=e.indexOf("-"))throw new Error("结束日期必须是YYYY-MM格式");var n=parseInt(e.split("-")[0]),o=parseInt(e.split("-")[1]);if(!(!isNaN(n)&&n<=2099&&!isNaN(o)&&o>=1&&o<=12))throw new Error("结束日期必须是YYYY-MM格式，且小于等于2099-12");a.setData({endDate:e,max_year:n,max_month:o})},a._headerChange=function(e,t){a.setData({header:!!e})},a._moreChange=function(e,t){a.setData({showMoreDays:!!e,days_array:a._setCalendarData(a.data.year,a.data.month)})},a._weeksTypeChange=function(e,t){switch(e){case"en":a.setData({weeksType:"en",weekTitle:["S","M","T","W","T","F","S"]});break;case"cn":a.setData({weeksType:"cn",weekTitle:["日","一","二","三","四","五","六"]});break;case"full-en":a.setData({weeksType:"full-en",weekTitle:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]});break;default:a.setData({weeksType:"en",weekTitle:["S","M","T","W","T","F","S"]})}},a._showWeeksChange=function(e,t){a.setData({weeks:!!e})},a._setCellSize=function(e,t){a.setData({cellSize:e})},a._showLunar=function(e,t){a.setData({lunar:!!e})},a._setCalendarData=function(e,t){for(var n=new Date(e,t-1,1).getDay(),o=new Array,i=t-1==0?12:t-1,s=t-1==0?a.data.year-1:a.data.year,r=new Date,c=0;c<n;c++)o.push({state:"inactive",day:-1,month:i,year:s,info:"prev",color:"#c3c6d1",background:"transparent"});for(var l=new Date(e,t,0),d=l.getDate(),u=l.getDay(),m=t+1==13?1:t+1,p=t+1==13?a.data.year+1:a.data.year,f=new Array,g=0;g<6-u;g++)f.push({state:"inactive",day:-2,month:m,year:p,info:"next",color:"#c3c6d1",background:"transparent"});for(var h=new Array,v=1;v<=d;v++)h.push({state:"inactive",day:v,month:t,year:e,info:"current",color:"#4a4f74",background:"transparent"});for(var _=h,E=o.concat(_,f),b=0;b<a.data.memberDays.length;b++)for(var N=a.data.memberDays[b],R=0;R<E.length;R++)E[R].year==N.year&&E[R].month==N.month&&E[R].day==N.day&&(E[R].is_member_day=1),E[R].year==r.getFullYear()&&E[R].month===r.getMonth()+1&&E[R].day===r.getDate()&&(E[R].is_today=1);if(a.data.showMoreDays){var k=E.findIndex(function(e){return-2==e.day});if(-1!=k)for(var w=E.length,x=w-k,C=1;C<=x;C++)E[k+C-1].day=C;if(-1!=(k=E.findIndex(function(e){return 1==e.day})-1))for(var D=new Date(e,t-1,0).getDate(),S=0;S<=k;S++)E[S].day=D-k+S}for(var I=0;I<E.length;I++){var M=E[I],T=M.day,P=M.month;if(T>0){var L=y.default.solarToLunar(e,P,T);E[I].lunarMonth=L.monthStr,E[I].lunarDay=L.dayStr,"初一"==L.dayStr&&(E[I].lunarDay=L.monthStr)}}for(var A=new Array,F=new Array,O=0;O<E.length;O++)F.push(E[O]),O%7==6&&(A.push(F),F=new Array);return F.length>0&&A.push(F),A},a.nextMonth=function(){var e={prevYear:a.data.year,prevMonth:a.data.month};12==a.data.month?a.setData({year:a.data.year+1,month:1}):a.setData({month:a.data.month+1}),a.setData({days_array:a._setCalendarData(a.data.year,a.data.month)}),e.currentYear=a.data.year,e.currentMonth=a.data.month,a.getMemberDayInfo()},a.prevMonth=function(){var e={prevYear:a.data.year,prevMonth:a.data.month};1==a.data.month?a.setData({year:a.data.year-1,month:12}):a.setData({month:a.data.month-1}),a.setData({days_array:a._setCalendarData(a.data.year,a.data.month)}),e.currentYear=a.data.year,e.currentMonth=a.data.month,a.getMemberDayInfo()},a.dateChange=function(e){var t={prevYear:a.data.year,prevMonth:a.data.month},n=e[0],o=e[1];a.setData({year:n,month:o,days_array:a._setCalendarData(n,o)}),t.currentYear=n,t.currentMonth=o,a.getMemberDayInfo()},a.dayClick=function(e){var t={year:e.year,month:e.month,day:e.day,color:e.color,lunarMonth:e.lunarMonth,lunarDay:e.lunarDay,background:e.background};console.log(t),a.data.memberDays.map(function(e){if(e.year==t.year&&e.month==t.month&&e.day==t.day){var a="";a=e.id.length>1?"/memberDayList?date="+t.year+"-"+t.month+"-"+t.day:"/memberDayDetail?id="+e.id[0],f.appMethod.turnToPage(a,!1)}})},a.attached=function(){var e=a.data.year,t=a.data.month;a.setData({days_array:a._setCalendarData(e,t)})},a.createYearMonthData=function(){for(var e=[],t=[1,2,3,4,5,6,7,8,9,10,11,12].map(function(e){return{value:e,label:e+"月"}}),a=E;a<b;a++)e.push({value:a,label:a+"年",children:t});return e},document.title="会员日日历",a}return(0,p.default)(t,e),(0,l.default)(t,[{key:"componentWillMount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,g.getCurrentPageQueryParams)(),t=e.franchisee||"";this.setData({franchiseeId:t,monthsData:this.createYearMonthData()}),this._yearChange(this.data.year),this._monthChange(this.data.month),this._dayChange(this.data.day),this._setStartDate(this.data.startDate),this._setEndDate(this.data.endDate),this._headerChange(this.data.header),this._moreChange(this.data.showMoreDays),this._showWeeksChange(this.data.weeks),this._weeksTypeChange(this.data.weeksType),this._setCellSize(this.data.cellSize),this._showLunar(this.data.weeksType),this.getMemberDayInfo()}},{key:"render",value:function(){var e=this,t=this.state,a=t.year,n=t.min_year,o=t.month,s=t.min_month,r=t.prev,c=(t.startDate,t.endDate,t.max_year),l=t.max_month,d=t.next,u=t.header,m=t.weeks,p=t.weekTitle,f=t.days_array,h=t.cellSize,v=t.monthsData;return React.createElement("div",{className:"official-page member-day"},React.createElement("div",{className:"calendar calendar-style"},u&&React.createElement("div",{className:"calendar-header header-style"},a==n&&o==s?React.createElement("span",null):r?React.createElement("span",{className:"ico-moon icon-leftarrow",onClick:this.prevMonth}):React.createElement("span",null),React.createElement(i.default,{data:v,cols:"2",value:[a,o],onOk:function(t){return e.dateChange(t)}},React.createElement("span",{className:"date-text"},a+"年"+o+"月")),a==c&&o==l?React.createElement("span",null):d?React.createElement("span",{className:"ico-moon icon-rightarrow",onClick:this.nextMonth}):React.createElement("span",null)),React.createElement("div",{className:"calendar-board board-style"},m&&7==p.length&&React.createElement("div",{className:"calendar-weeks"},p.map(function(e,t){return React.createElement("span",{className:"calendar-weekday",key:t},e)})),React.createElement("div",{className:"calendar-days"},f.map(function(t,a){return React.createElement(React.Fragment,{key:a},React.createElement("div",{className:"calendar-row"},f[a].map(function(t,a){return React.createElement(React.Fragment,{key:a},t.day<=0?React.createElement("div",{className:"calendar-cell",style:(0,g.convertLineStyleData)("background: "+t.background+"; width: "+h+"px; height: "+h+"px;")},t.is_member_day&&React.createElement("img",{className:"member-day-img",src:""})):React.createElement("div",{className:"calendar-cell cell-rounded "+(1===t.is_today?"today":""),style:(0,g.convertLineStyleData)("background: "+t.background+"; width: "+h+"px; height: "+h+"px;"),onClick:function(){return e.dayClick(t)},"data-day":t},t.is_member_day&&React.createElement("img",{className:"member-day-img",src:"https://cdn.jisuapp.cn/zhichi_frontend/static/webapp/images/vip-card/member-day.png"}),React.createElement("span",{className:"calendar-day",style:(0,g.convertLineStyleData)("color: "+t.color+";")},t.day)))})))})))))}}]),t}(v.default);N.externalClasses=["calendar-style","header-style","board-style"],t.default=N},function(e,t){},function(e,t,a){"use strict";function n(e){if(e<v)throw new RangeError("年份不能小于"+v+"年");if(e>_)throw new RangeError("年份不能大于"+_+"年");return!0}function o(e){if(e<1)throw new RangeError("月份不能小于1");if(e>12)throw new RangeError("月份不能大于12");return!0}function i(e){if(e<1)throw new RangeError("日期不能小于1");if(e>31)throw new RangeError("日期不能大于31");return!0}function s(e){if(n(e))return 15&h[e-v]}function r(e){return s(e)?65536&h[e-v]?30:29:0}function c(e){if(n(e)){for(var t=348,a=32768;a>8;a>>=1)t+=h[e-v]&a?1:0;return t+r(e)}}function l(e,t){if(n(e)&&o(t))return h[e-v]&65536>>t?30:29}function d(e){if(i(e)){var t=new Array("日","一","二","三","四","五","六","七","八","九","十"),a=new Array("初","十","廿","卅"),n="";switch(e){case 10:n="初十";break;case 20:n="二十";break;case 30:n="三十";break;default:n=a[Math.floor(e/10)],n+=t[e%10]}return n}}function u(e,t){if(n(e)&&t<=23&&t>=0){var a=new Array(0,21208,42467,63836,85337,107014,128867,150921,173149,195551,218072,240693,263343,285989,308563,331033,353350,375494,397447,419210,440795,462224,483532,504758);return new Date(31556925974.7*(e-v)+6e4*a[t]+Date.UTC(v,0,6,2,5)).getUTCDate()}}function m(e,t,a){if(n(e)&&o(t)&&i(a)){var u=new Date(v,0,31),m=new Date(e,t-1,a),p=(m-u)/864e5,f=14,g=0,h=0;for(h=v;h<_&&p>0&&(g=c(h),!(p-g<0));h++)p-=g,f+=12;var y=h,b=s(y),N=b>0,R=!1;for(h=1;h<=12&&p>0;h++)b>0&&h==b+1&&!R?(--h,R=!0,g=r(e)):g=l(e,h),R&&h==b+1&&(R=!1),p-=g,R||f++;0==p&&b>0&&h==b+1&&(R?R=!1:(R=!0,--h,--f)),p<0&&(p+=g,--h,--f);var k=h,w=p+1,x="";return x=N?k<b?E[k-1]:k==b?"闰"+E[k-1]:E[k-2]:E[k-1],{year:y,month:k,day:w,isLeap:R,monthStr:x,dayStr:d(w)}}}function p(e,t){if(n(e)&&o(t))return 2==t?e%4==0&&e%100!=0||e%400==0?29:28:y[t-1]}function f(e,t,a){if(n(e)&&o(t)&&i(a)){for(var s=new Date(e,t-1,a),r=s.getDate(),c=t-1,l=r,d=0;d<c;d++)l+=y[d];return(c>1&&e%4==0&&e%100!=0||e%400==0)&&(l+=1),l}}function g(e,t,a){if(n(e)&&o(t)&&i(a)){for(var s=new Date(1900,0,6,2,5,0),r=!1,c=1;c<=24;c++){var l=525948.76*(e-1900)+N[c],d=s.getTime()+60*l*1e3,u=new Date(d);if(f(u.getFullYear(),u.getMonth()+1,u.getDate())==f(e,t,a)){r=b[c];break}}return r}}Object.defineProperty(t,"__esModule",{value:!0});var h=new Array(19416,19168,42352,21717,53856,55632,91476,22176,39632,21970,19168,42422,42192,53840,119381,46400,54944,44450,38320,84343,18800,42160,46261,27216,27968,109396,11104,38256,21234,18800,25958,54432,59984,28309,23248,11104,100067,37600,116951,51536,54432,120998,46416,22176,107956,9680,37584,53938,43344,46423,27808,46416,86869,19872,42448,83315,21200,43432,59728,27296,44710,43856,19296,43748,42352,21088,62051,55632,23383,22176,38608,19925,19152,42192,54484,53840,54616,46400,46496,103846,38320,18864,43380,42160,45690,27216,27968,44870,43872,38256,19189,18800,25776,29859,59984,27480,21952,43872,38613,37600,51552,55636,54432,55888,30034,22176,43959,9680,37584,51893,43344,46240,47780,44368,21977,19360,42416,86390,21168,43312,31060,27296,44368,23378,19296,42726,42208,53856,60005,54576,23200,30371,38608,19415,19152,42192,118966,53840,54560,56645,46496,22224,21938,18864,42359,42160,43600,111189,27936,44448,84835,37744,18936,18800,25776,92326,59984,27424,108228,43744,41696,53987,51552,54615,54432,55888,23893,22176,42704,21972,21200,43448,43344,46240,46758,44368,21920,43940,42416,21168,45683,26928,29495,27296,44368,84821,19296,42352,21732,53600,59752,54560,55968,92838,22224,19168,43476,41680,53584,62034,54560),v=1900,_=2100,y=new Array(31,28,31,30,31,30,31,31,30,31,30,31),E=new Array("正月","二月","三月","四月","五月","六月","七月","八月","九月","十月","冬月","腊月"),b=new Array("小寒","大寒","立春","雨水","惊蛰","春分","清明","谷雨","立夏","小满","芒种","夏至","小暑","大暑","立秋","处暑","白露","秋分","寒露","霜降","立冬","小雪","大雪","冬至"),N=new Array(0,21208,42467,63836,85337,107014,128867,150921,173149,195551,218072,240693,263343,285989,308563,331033,353350,375494,397447,419210,440795,462224,483532,504758);t.default={getLunarLeapMonth:s,getLeapMonthDaysCount:r,getLunarYearDaysCount:c,getLunarYearMonthDaysCount:l,getLunarDayString:d,getLunarTermDay:u,getSolarMonthDaysCount:p,getSolarDayNumber:f,getLunar24Days:g,solarToLunar:m}},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(0),i=n(o),s=a(3),r=n(s),c=a(1),l=n(c),d=a(2),u=n(d),m=a(5),p=a(6),f=a(7),g=n(f);a(436);var h=function(e){function t(e){(0,i.default)(this,t);var a=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={memberDayInfo:{},weekData:[{label:"周一",value:1},{label:"周二",value:2},{label:"周三",value:3},{label:"周四",value:4},{label:"周五",value:5},{label:"周六",value:6},{label:"周日",value:7}],franchiseeId:""},a.getMemberDetail=function(e){var t=a;m.appMethod.sendRequest({url:"/index.php?r=appVipCard/getVipBenefitDay",method:"post",data:{data_id:e,sub_shop_app_id:t.data.franchiseeId},hideLoading:!0,success:function(e){var a=e.data;if("0"===a.date_type)a.start_date===a.end_date?a.date=a.start_date:a.date=a.start_date+" 至 "+a.end_date;else if("1"===a.date_type){var n=a.date_arr.length;a.date="",a.date_arr.forEach(function(e,o){a.date+=o===n-1?t.data.weekData[e-1].label:t.data.weekData[e-1].label+"、"})}else if("2"===a.date_type){var o=a.date_arr.length;a.date="每月",a.date_arr.forEach(function(e,t){a.date+=t===o-1?e+"号":e+"号、"})}a.benefits=[],a.discount&&0!=a.discount&&a.benefits.push({category:"discount",discount:a.discount}),a.user_coupon_list&&Array.isArray(a.user_coupon_list)&&a.user_coupon_list.length&&a.user_coupon_list.map(function(e){e.category="coupon",e.name="0"===e.type?"满减券":"1"===e.type?"打折券":"2"===e.type?"代金券":"3"===e.type?"兑换券":"4"===e.type?"储值券":"5"===e.type?"通用券":"",a.benefits.push(e)}),t.setData({memberDayInfo:e.data}),console.log(t.data.memberDayInfo)}})},document.title="会员日详情",a}return(0,u.default)(t,e),(0,r.default)(t,[{key:"componentWillMount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,p.getCurrentPageQueryParams)(),t=e.id?e.id:"",a=e.franchisee||"";this.setData({franchiseeId:a}),this.getMemberDetail(t)}},{key:"render",value:function(){var e=this.state.memberDayInfo;return React.createElement("div",{className:"official-page member-day-detail"},React.createElement("div",{className:"content"},React.createElement("div",{className:"info-item space-between"},React.createElement("div",{className:"name"},"名称"),React.createElement("div",{className:"right-block"},e.title)),React.createElement("div",{className:"info-item space-between"},React.createElement("div",{className:"name"},"日期"),React.createElement("div",{className:"right-block"},e.date)),React.createElement("div",{className:"info-item space-between"},React.createElement("div",{className:"name"},"时间段"),React.createElement("div",{className:"right-block"},e.start_time+" - "+e.end_time)),React.createElement("div",{className:"info-item space-between"},React.createElement("div",{className:"name"},"可领取用户"),"0"===e.user_condition?React.createElement("div",{className:"right-block"},"所有用户"):"1"===e.user_condition?React.createElement("div",{className:"right-block"},"所有会员"):React.createElement("div",{className:"right-block"},Array.isArray(e.user_condition_list)&&e.user_condition_list.map(function(t,a){return React.createElement("div",{key:!0},a===e.user_condition_list.length-1?t:t+"、")}))),e.benefits&&e.benefits.length&&React.createElement("div",{className:"info-item"},React.createElement("div",{className:"name"},"基本权益"),React.createElement("div",{className:"about-block"},e.benefits.map(function(e,t){return React.createElement("div",{className:"about-item",key:!0},"discount"===e.category?t+1+".所有商品打"+e.discount+"折；（仅会员日活动期间有效）":"coupon"===e.category?t+1+"."+e.name+"-"+e.title:"")}))),""!==e.description&&React.createElement("div",{className:"info-item"},React.createElement("div",{className:"name"},"商家留言"),React.createElement("div",{className:"about-block"},React.createElement("div",{className:"about-item"},e.description)))))}}]),t}(g.default);t.default=h},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(0),i=n(o),s=a(3),r=n(s),c=a(1),l=n(c),d=a(2),u=n(d),m=a(5),p=a(6),f=a(7),g=n(f);a(438);var h=function(e){function t(e){(0,i.default)(this,t);var a=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={listData:[],screenHeight:1624,weekData:[{label:"周一",value:1},{label:"周二",value:2},{label:"周三",value:3},{label:"周四",value:4},{label:"周五",value:5},{label:"周六",value:6},{label:"周日",value:7}],franchiseeId:""},a.getSystemInfo=function(){var e=a;m.appMethod.getSystemInfo({success:function(t){e.setData({screenHeight:2*t.screenHeight})}})},a.getMemberDayList=function(e){var t=a;m.appMethod.sendRequest({url:"/index.php?r=appVipCard/vipBenefitDayCalendar",method:"post",data:{start_time:e,end_time:e,sub_shop_app_id:t.data.franchiseeId},hideLoading:!0,success:function(e){var a=[],n=!0,o=!1,i=void 0;try{for(var s,r=Object.keys(e.data)[Symbol.iterator]();!(n=(s=r.next()).done);n=!0){var c=s.value;a=e.data[c]}}catch(e){o=!0,i=e}finally{try{!n&&r.return&&r.return()}finally{if(o)throw i}}a.map(function(e){if("0"===e.date_type)e.start_date===e.end_date?e.date=e.start_date:e.date=e.start_date+" 至 "+e.end_date;else if("1"===e.date_type){var a=e.date_arr.length;e.date="",e.date_arr.forEach(function(n,o){e.date+=o===a-1?t.data.weekData[n-1].label:t.data.weekData[n-1].label+"、"})}else if("2"===e.date_type){var n=e.date_arr.length;e.date="每月",e.date_arr.forEach(function(t,a){e.date+=a===n-1?t+"号":t+"号、"})}}),t.setData({listData:a})}})},a.gotoDetail=function(e){var t=e.currentTarget.dataset.id,a="/eCommerce/pages/memberDayDetail/memberDayDetail?id="+t;m.appMethod.turnToPage(a,!1)},document.title="会员日列表",a}return(0,u.default)(t,e),(0,r.default)(t,[{key:"componentWillMount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,p.getCurrentPageQueryParams)(),t=e.date?e.date:"",a=e.franchisee||"";this.setData({franchiseeId:a}),this.getSystemInfo(),this.getMemberDayList(t)}},{key:"render",value:function(){var e=this,t=this.state.listData;return React.createElement("div",{className:"official-page member-day-list"},React.createElement("div",{className:"content"},t.map(function(t,a){return React.createElement("div",{className:"memberdDay-item",key:a},React.createElement("div",{className:"top-block"},React.createElement("div",{className:"name"},"名称："+t.title),React.createElement("div",{className:"more-btn","data-id":t.id,onClick:e.gotoDetail},"查看详情")),React.createElement("div",{className:"line"}),React.createElement("div",{className:"bottom-block"},React.createElement("div",{className:"date"},"日期:  "+t.date)))})))}}]),t}(g.default);t.default=h},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(31),i=n(o),s=a(0),r=n(s),c=a(3),l=n(c),d=a(1),u=n(d),m=a(2),p=n(m);a(32);var f=a(4),g=n(f),h=a(5),v=a(6),_=a(7),y=n(_),E=a(58),b=a(11);a(440);var N=function(e){function t(){var e,a,n,o;(0,r.default)(this,t);for(var i=arguments.length,s=Array(i),c=0;c<i;c++)s[c]=arguments[c];return a=n=(0,u.default)(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),n.state={topNavBarData:{isDefault:0,title:"当面付"},isShowNoJoinPrice:!1,appTitle:"",franchisee:"",balanceState:!1,storeState:!0,totalDiscountPrice:"",totalPayment:"",inputPrice:"",oldInputPrice:"",noJoinPrice:"",oldNoJoinPrice:"",requesting:!1,transferConfig:{},userInfo:{},vipCardInfo:{isShow:!1,logo:"cdn.jisuapp.cn/zhichi_frontend/static/webapp/images/transfer/default-vip-card-logo.png"},memberDiscount:[],aloneBenefitState:0,selectedBenefit:{},storeBenefitInfo:{discount_price:"0.00"},useBalancePrice:"0.00",currentStoreBenefitInfo:{},storeBenefitActivityList:[],isShowPriceLimitTip:!1,combineBenefit:{},combineState:{vip:0,coupon:0,integral:0},combineEnable:{vip:0,coupon:0,integral:0},balanceItemInfo:[],balancePayLoading:!1,remark:"",inputState:0,relatedOrderInfo:"",benefitType:{vip:"会员卡",paid_vip:"会员卡",vip_benefit_day:"会员卡",coupon:"优惠券",integral:"积分"},relatedData:{},isShowBalanceItem:!1},n.calculateReqNum=0,n.memberDiscountRef=g.default.createRef(),n.resetData=function(e){n.setData({userInfo:h.appMethod.getUserInfo(),selectedBenefit:{},storeBenefitInfo:{discount_price:"0.00"},totalPayment:"",balanceState:!1,aloneBenefitState:0,remark:"",useBalancePrice:"0.00",combineState:{vip:0,coupon:0,integral:0},storeState:!0,combineBenefit:{},inputState:0,relatedOrderInfo:"",isShowBalanceItem:!1,relatedData:{},oldInputPrice:"",oldNoJoinPrice:"",requesting:!1}),e&&n.setData({inputPrice:"",noJoinPrice:""})},n.getTransferOrderConfig=function(e){h.appMethod.sendRequest({url:"/index.php?r=AppTransferOrder/GetTransferOrderConfig",method:"post",data:{sub_shop_app_id:n.data.franchisee},hideLoading:!0,success:function(t){var a=t.data;if(0===t.status){var o=a.get_vipcard_directly,i=a.vipcard_id,s=a.background_color,r=a.scan_mode,c=a.input_mode;a.background_color=s||"#FF7100","1"===r&&"0"===c&&n.scanPaymentCode(),1==o&&i&&0!=i&&n.vipCardInit(i),e&&e(),n.setData({transferConfig:a}),n.resetCombineEnable()}}})},n.resetCombineEnable=function(){var e=n.data.transferConfig,t=e.combine_benefit_enable,a=e.vip_card_benefit_enable,o=e.coupon_benefit_enable,i=e.integral_benefit_enable;n.setData({combineEnable:{vip:1==t&&1==a?1:0,coupon:1==t&&1==o?1:0,integral:1==t&&1==i?1:0}})},n.vipCardInit=function(e){n.getEnableVipCardList(e,function(){h.appMethod.sendRequest({url:"/index.php?r=AppShop/GetVIPCardInfo",data:{vip_id:e,sub_shop_app_id:n.data.franchisee},hideLoading:!0,success:function(e){var t=e.status,a=e.data;0===t&&n.getUserVipLevel(a[0])}})})},n.getUserVipLevel=function(e){h.appMethod.sendRequest({url:"/index.php?r=AppShop/GetVIPInfo",data:{sub_shop_app_id:n.data.franchisee},hideLoading:!0,success:function(t){var a=t.data;if(0===t.status){var o=a.level?a.level:0,i=a.vip_id?a.vip_id:0;o<=+e.level&&i!==e.id&&(e.isShow=!0,e.logo=e.logo||n.data.vipCardInfo.logo,n.setData({vipCardInfo:e}))}}})},n.getEnableVipCardList=function(e,t){h.appMethod.sendRequest({url:"/index.php?r=AppVipCard/GetEnableVipCardList",data:{sub_shop_app_id:n.data.franchisee},hideLoading:!0,success:function(a){(a.data||[]).forEach(function(a){a.id===e&&t()})}})},n.getCurrentStoreBenefitInfo=function(){h.appMethod.sendRequest({url:"/index.php?r=AppStoreBenefit/GetCurrentStoreBenefitInfo",method:"post",data:{sub_shop_app_id:n.data.franchisee},hideLoading:!0,success:function(e){var t=e.data;0===e.status&&(t&&(t.rule_titles=t.rule_titles.map(function(e){return e=e.replace("分阶段满减<br>",""),e=e.replace("阶段满减<br>","")})),n.setData({currentStoreBenefitInfo:t||{}}))}})},n.goToCouponDesc=function(){var e="/eCommerce/pages/couponDescription/couponDescription?franchisee="+n.data.franchisee;h.appMethod.turnToPage(e,!1)},n.handleVipCard=function(){n.getCollectUserinfoConfig(function(){h.appMethod.turnToPage("/pages/userCenter/userCenter?r=/eCommerce/pages/transferPage/transferPage&id="+n.data.transferConfig.vipcard_id+"&is_no_condition_recv=1&franchisee="+n.data.franchisee)})},n.recvVipCard=function(){h.appMethod.sendRequest({data:{vipcard_id:n.data.transferConfig.vipcard_id,sub_shop_app_id:n.data.franchisee},url:"/index.php?r=AppVipCard/RecvVipCard",hideLoading:!0,success:function(e){h.appMethod.showToast({title:"开卡成功",icon:"success"}),1==n.data.transferConfig.combine_benefit_enable?n.calulateTransferOrderPrice():n.calculateTotalPrice(),n.setData({"vipCardInfo.isShow":!1})}})},n.getCollectUserinfoConfig=function(e){h.appMethod.sendRequest({data:{},url:"/index.php?r=AppVipCard/GetCollectUserinfoConfig",hideLoading:!0,success:function(t){t.data.need_collect_info?e():n.recvVipCard()}})},n.showMemberDiscount=function(e){var t=[],a={},o=n.data.combineBenefit,i=e.currentTarget.dataset.type;"vip"===i?(t.push({label:"vip",value:o.all_vip_benefit}),a={type:"combine",discount_type:o.selected_user_vip.type||"vip",vip_id:o.selected_user_vip.id||0,no_use_benefit:"0.00"===o.vip_benefit_discount_price?1:0}):"coupon"===i?(o.coupon_benefit||(o.coupon_benefit=[]),t.push({label:"coupon",value:o.coupon_benefit.concat(o.cant_use_coupon_benefit||[])}),a={type:"combine",discount_type:"coupon",coupon_id:o.selected_user_coupon_id,no_use_benefit:"0.00"===o.coupon_benefit_discount_price?1:0}):"integral"===i?(t.push({label:"integral",value:o.integral_benefit instanceof Array?o.integral_benefit:[o.integral_benefit]}),a={type:"combine",discount_type:"integral",no_use_benefit:"0.00"===o.integral_benefit.discount_price?1:0}):(t=n.data.memberDiscount,a=n.data.selectedBenefit),n.setData({memberDiscount:t,selectedBenefit:a});var s={discountType:t,franchisee:n.data.franchisee,themeColor:n.data.transferConfig.background_color,afterSelectedDiscount:n.afterSelectedBenefit};n.memberDiscountRef.current.show(s),n.memberDiscountRef.current.showDialog(n.data.selectedBenefit,n.data.franchisee)},n.inputPrice=function(e){var t=/^\d{1,5}(\.\d{0,2})?$/,a=!1,o=2===e.target.value.split("¥").length?e.target.value.split("¥")[1]:e.target.value;if(o=o.replace(/\s+/g,""),t.test(o)||""===o||(h.appMethod.showToast({title:"价格区间仅支持0.01~99999.99元",icon:"none",duration:1e3}),o=n.data.oldInputPrice,a=!0),n.setData({inputState:0,storeState:!0,selectedBenefit:{},combineBenefit:{},oldInputPrice:o,inputPrice:o,isShowPriceLimitTip:a,noJoinPrice:+o<+n.data.noJoinPrice?"":n.data.noJoinPrice,oldNoJoinPrice:+o<+n.data.oldNoJoinPrice?"":n.data.oldNoJoinPrice}),0!=o)1==n.data.transferConfig.combine_benefit_enable?(n.resetCombineEnable(),n.calulateTransferOrderPrice()):n.calculateTotalPrice({});else var i=setInterval(function(){n.data.requesting||0!=n.data.inputPrice?n.data.requesting||0==n.data.inputPrice||clearInterval(i):(n.resetData(),clearInterval(i))},10)},n.noJoinPriceInput=function(e){var t=/^\d{1,5}(\.\d{0,2})?$/,a=2===e.target.value.split("¥").length?e.target.value.split("¥")[1]:e.target.value;a=a.replace(/\s+/g,""),t.test(a)||(a=""),+n.data.inputPrice?+a>=+n.data.inputPrice&&(a=n.data.oldNoJoinPrice,h.appMethod.showToast({title:"需小于消费金额",icon:"none",duration:1e3})):(a=n.data.oldNoJoinPrice,h.appMethod.showToast({title:"请先输入消费金额",icon:"none",duration:1e3})),n.setData({storeState:!0,selectedBenefit:{},combineBenefit:{},noJoinPrice:a,oldNoJoinPrice:a}),1==n.data.transferConfig.combine_benefit_enable?n.calulateTransferOrderPrice():n.calculateTotalPrice({})},n.priceBlur=function(e){var t=2===e.target.value.split("¥").length?e.target.value.split("¥")[1]:e.target.value,a=e.currentTarget.dataset.type,o={};"number"==typeof+t&&(t=(+t).toFixed(2)),"price"===a?o={inputPrice:t}:"no-join-price"===a&&(o={noJoinPrice:t}),n.setData(o)},n.confirmPay=function(){var e=n.data.inputPrice,t=n.data.totalPayment,a={},o={},i=n.data.selectedBenefit,s=n.data.relatedOrderInfo,r=n.data.transferConfig.combine_benefit_enable;if(!n.data.requesting){if(n.setData({requesting:!0}),isNaN(e)||(+e).toFixed(2)<=0)return h.appMethod.showModal({content:"请输入正确的金额"}),void n.setData({requesting:!1});if(isNaN(t)||t<0)return alertTip("error payment amount"),void n.setData({requesting:!1});n.data.storeState&&n.data.storeBenefitInfo.discount_price&&(a=n.data.storeBenefitInfo),2!==n.data.inputState&&(o=n.filterCombinationBenefit());var c={price:e,least_cost:n.data.noJoinPrice,check_price:t,message:n.data.remark,goods_type:5,sub_shop_app_id:n.data.franchisee};c=2===n.data.inputState?Object.assign(c,{selected_benefit:s.selected_benefit_info,is_balance:+s.use_balance?1:0}):Object.assign(c,{selected_benefit:1==r?"":i,selected_store_benefit:1==r?"":a,is_balance:n.data.balanceState?1:0,selected_combination_benefit:1==r?o:""}),n.data.relatedData.order_id&&(c.scan_code_order_id=n.data.relatedData.order_id),h.appMethod.sendRequest({url:"/index.php?r=AppShop/createTransferOrder",method:"post",data:c,success:function(e){var t=e.data;n.payOrder(t)},fail:function(){n.setData({requesting:!1})}})}},n.filterCombinationBenefit=function(){var e=n.data.combineBenefit,t=n.data.combineEnable;if(e.use_balance=+n.data.useBalancePrice,e.total_price=+n.data.totalPayment,e.total_discount_price=+n.data.totalDiscountPrice,0===t.vip&&delete e.vip_benefit,0===t.coupon)delete e.coupon_benefit,delete e.selected_user_coupon_id;else if(1===t.coupon){var a={};e.coupon_benefit.map(function(t){t.user_coupon_id==e.selected_user_coupon_id&&(a=t)}),a.user_coupon_id&&(e.coupon_benefit=a)}return 0===t.integral&&delete e.integral_benefit,n.data.storeState||delete e.store_benefit,e},n.payOrder=function(e){function t(){var t="/eCommerce/pages/transferPaySuccess/transferPaySuccess?detail="+e+"?franchisee="+o.data.franchisee;o.setData({requesting:!1}),h.appMethod.turnToPage(t,1)}function a(){o.setData({requesting:!1}),h.appMethod.turnToPage("/eCommerce/pages/transferOrderDetail/transferOrderDetail?detail="+e,1)}var o=n;if(0==n.data.totalPayment)return void h.appMethod.sendRequest({url:"/index.php?r=AppShop/paygoods",data:{order_id:e,total_price:0},success:function(e){t()},fail:function(){a()}});h.appMethod.goPay({orderId:e,successUrl:"/transferPaySuccess?detail="+e+"?franchisee="+o.data.franchisee,failUrl:"/transferOrderDetail?detail="+e,cancel:a}),n.setData({requesting:!1})},n.calculateTotalPrice=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.data.selectedBenefit;if(0!=+n.data.inputPrice){n.calculateReqNum++;var t=+n.data.inputPrice,a=n.calculateReqNum;n.setData({requesting:!0}),h.appMethod.sendRequest({hideLoading:!0,url:"/index.php?r=AppShop/calculationPrice",method:"post",data:{price:t,selected_benefit:e,is_balance:n.data.balanceState?1:0,not_use_store_benefit:n.data.storeState?0:1,sub_shop_app_id:n.data.franchisee,least_cost:+n.data.noJoinPrice},success:function(e){var o=e.data,i=o.can_use_benefit,s=0,r={},c=n.data.transferConfig,l=[],d=!1,u=o.total_discount_cut_price|o.discount_cut_price,m=i.coupon_benefit,p=i.cant_use_coupon_benefit,f=i.all_vip_benefit,g=i.integral_benefit;if(n.calculateReqNum===a){if(n.calculateReqNum=0,0==+t)return void n.setData({selectedBenefit:{},useBalancePrice:"0.00",totalPayment:"",balanceState:!1,aloneBenefitState:0,"storeBenefitInfo.discount_price":"0.00"});1==c.coupon_benefit_enable&&(p&&p.length&&(i.cant_use_coupon_benefit=p.map(function(e){return e.disabled=!0,e})),l.push({label:"coupon",value:m.concat(i.cant_use_coupon_benefit||[])})),1==c.vip_card_benefit_enable&&l.push({label:"vip",value:f}),1==c.integral_benefit_enable&&l.push({label:"integral",value:g instanceof Array?g:[g]}),i.data.length&&l.map(function(e){e.value.length>0&&(s=1)}),s&&(r=o.selected_benefit_info||{},r.discount_cut_price=(+o.selected_benefit_info.discount_cut_price||0).toFixed(2)),o.store_benefit_info||(o.store_benefit_info={discount_price:"0.00"}),o.store_benefit_info.discount_price=(+o.store_benefit_info.discount_price).toFixed(2),o.store_benefit_info.discount_price=(+o.store_benefit_info.discount_price).toFixed(2),t-u>+o.balance&&(d=!0),n.setData({totalPayment:o.price,memberDiscount:l,selectedBenefit:r,aloneBenefitState:s,storeBenefitInfo:o.store_benefit_info,useBalancePrice:(+o.use_balance).toFixed(2),isShowBalanceItem:d,requesting:!1})}},fail:function(){n.calculateReqNum===a&&(n.calculateReqNum=0,n.setData({requesting:!1}))}})}},n.calulateTransferOrderPrice=function(){if(0!=+n.data.inputPrice){n.calculateReqNum++;var e=+n.data.inputPrice,t=n.data.combineEnable,a=n.calculateReqNum;n.setData({requesting:!0}),h.appMethod.sendRequest({hideLoading:!0,url:"/index.php?r=AppTransferOrder/CalulateTransferOrderPrice",method:"post",data:{price:e,no_use_vip_benefit:t.vip?0:1,no_use_coupon_benefit:t.coupon?0:1,no_use_integral_benefit:t.integral?0:1,selected_user_coupon_id:n.data.combineBenefit.selected_user_coupon_id||0,selected_user_vip:n.data.combineBenefit.selected_user_vip||{},no_use_balance:n.data.balanceState?0:1,no_use_store_benefit:n.data.storeState?0:1,sub_shop_app_id:n.data.franchisee,least_cost:+n.data.noJoinPrice},success:function(o){var i=o.data,s=i.combine_benefit,r={vip:0,coupon:0,integral:0},c=!1,l=s.all_vip_benefit,d=s.vip_benefit,u=s.coupon_benefit,m=s.integral_benefit,p=s.cant_use_coupon_benefit;n.calculateReqNum===a&&(n.calculateReqNum=0,l.length&&d.discount_price&&(r.vip=1,s.vip_benefit_discount_price="0.00",l.forEach(function(e){e.vip_id==s.selected_user_vip.id&&e.discount_type==s.selected_user_vip.type&&(s.vip_benefit_discount_price=t.vip?(+e.discount_price).toFixed(2):"0.00")})),u.length?(r.coupon=1,s.coupon_benefit_discount_price="0.00",u.forEach(function(e){e.user_coupon_id==s.selected_user_coupon_id&&(s.coupon_benefit_discount_price=t.coupon?(+e.discount_price).toFixed(2):"0.00")})):s.coupon_benefit_discount_price="0.00",p.length&&(s.cant_use_coupon_benefit=p.map(function(e){return e.disabled=!0,e})),m.max_can_use_integral&&(r.integral=1,s.integral_benefit.discount_price=t.integral?(+m.discount_price).toFixed(2):"0.00"),s.store_benefit||(s.store_benefit={discount_price:"0.00"}),e-i.total_discount_price>+n.data.userInfo.balance&&(c=!0),s.store_benefit.discount_price=(+s.store_benefit.discount_price).toFixed(2),n.setData({totalPayment:i.total_price,totalDiscountPrice:i.total_discount_price,combineBenefit:s,storeBenefitInfo:s.store_benefit,useBalancePrice:(+i.use_balance).toFixed(2),combineState:r,isShowBalanceItem:c,requesting:!1}))},fail:function(){n.calculateReqNum===a&&(n.calculateReqNum=0,n.setData({requesting:!1}))}})}},n.inputRemark=function(e){n.data.remark=e.target.value},n.updateBalanceState=function(e){n.setData({balanceState:e}),1==n.data.transferConfig.combine_benefit_enable?n.calulateTransferOrderPrice():n.calculateTotalPrice()},n.updateStoreState=function(e){n.setData({storeState:e,selectedBenefit:{}}),1==n.data.transferConfig.combine_benefit_enable?n.calulateTransferOrderPrice():n.calculateTotalPrice()},n.getAppShopByPage=function(){var e=n.data.franchisee;h.appMethod.sendRequest({url:"/index.php?r=AppShop/GetAppShopByPage",data:{sub_shop_app_id:e},hideLoading:!0,success:function(e){var t={},a=e.data[0];t.franchiseeInfo=a,t.appTitle=a.name,n.setData(t)}})},n.afterSelectedBenefit=function(e){var t=e.selectedDiscount,a=n.data.combineEnable,o=n.data.combineBenefit;"combine"===t.type?("coupon"===t.discount_type?t.no_use_benefit?(o.selected_user_coupon_id=0,a.coupon=0):(o.selected_user_coupon_id=t.coupon_id,a.coupon=1):"vip"===t.discount_type||"paid_vip"===t.discount_type||"vip_benefit_day"===t.discount_type?t.no_use_benefit?(o.selected_user_vip={},a.vip=0):(o.selected_user_vip={id:t.vip_id,type:t.discount_type},a.vip=1):"integral"===t.discount_type&&(a.integral=t.no_use_benefit?0:1),n.setData({combineEnable:a,combineBenefit:o})):n.setData({selectedBenefit:t}),1==n.data.transferConfig.combine_benefit_enable?n.calulateTransferOrderPrice():n.calculateTotalPrice()},n.getStoreBenefitActivityList=function(){h.appMethod.sendRequest({url:"/index.php?r=AppStoreBenefit/GetStoreBenefitActivityList",method:"post",data:{sub_shop_app_id:n.data.franchisee},hideLoading:!0,success:function(e){var t=[];e.data.map(function(e){e.activity_start_date=e.activity_start_date.substr(0,16),e.activity_end_date=e.activity_end_date.substr(0,16),1!==e.expired&&t.push(e)}),n.setData({storeBenefitActivityList:t})}})},n.getBalanceData=function(){h.appMethod.sendRequest({url:"/index.php?r=AppShop/getAppUserBalance",hideLoading:!0,success:function(e){n.setData({"userInfo.balance":(+e.data.balance).toFixed(2)})}})},n.scanPaymentCode=function(){h.appMethod.scanCode({onlyFromCamera:!1,success:function(e){var t=e.path,a=n.getQueryString(t,"scene");n.getSceneData(a)}})},n.getBalanceInfo=function(){var e={ver:"2.2"};h.appMethod.sendRequest({url:"/index.php?r=AppShop/getStoredItems",data:e,hideLoading:!0,success:function(e){var t=e.status,a=e.data;0===t&&(a=a.map(function(e){var t=[];return e.g_price=Number(e.g_price),e.g_integral=Number(e.g_integral),e.g_price&&t.push(e.g_price+"元"),e.g_integral&&t.push(e.g_integral+"积分"),e.g_vip_card&&e.g_vip_card.title&&t.push(e.g_vip_card.title),e.g_coupon_list&&e.g_coupon_list.length&&e.g_coupon_list.forEach(function(e){t.push(e.num+"张"+e.title)}),t.length&&(t[0]="赠送"+t[0]),e.discounts=t.join("、"),e}),n.setData({balanceItemInfo:a}))}})},n.gotoRecharge=function(e){var t=e.target.dataset.index,a=n.data.balanceItemInfo[t],o={type:"1",stored_id:a.id,form_id:e.target.formId};h.appMethod.showModal({title:"即将充值"+a.price+"元储值",success:function(e){e.confirm&&h.appMethod.sendRequest({url:"/index.php?r=AppShop/creatStoredItemOrder",data:o,hideLoading:!0,success:function(e){n.balancePay(e.data)}})}})},n.balancePay=function(e){h.appMethod.goPay({orderId:e})},n.getSceneData=function(e){var t={scene:e,sub_shop_app_id:n.data.franchisee};h.appMethod.sendRequest({url:"/index.php?r=AppTransferOrder/GetSceneData",data:t,hideLoading:!0,success:function(e){var t=e.status,a=e.data;if(0===t&&a.order_id){var o=a.original_price,i=a.total_price,s=a.not_discount_price,r=a.related_order_id;a.selected_benefit_info||(a.selected_benefit_info={}),a.selected_benefit_info.discount_price=(+a.selected_benefit_info.discount_price||0).toFixed(2),a.use_balance=(+a.use_balance||0).toFixed(2),a.coupon_fee=(+a.coupon_fee||0).toFixed(2),n.setData({relatedData:a,inputPrice:(+o||0).toFixed(2),noJoinPrice:(+s||0).toFixed(2),isShowNoJoinPrice:!!+s,relatedOrderInfo:a,inputState:r?2:1}),r?n.setData({totalPayment:(+i||0).toFixed(2)}):1==n.data.transferConfig.combine_benefit_enable?n.calulateTransferOrderPrice():n.calculateTotalPrice()}}})},n.getQueryString=function(e,t){if(!e)return"";var a=e.split("?")[1]||"",n=new RegExp("(^|&)"+t+"=([^&]*)(&|$)","i"),o=a.match(n);return null!=o?unescape(o[2]):""},n.config={navigationBarTitleText:"当面付",navigationBarTextStyle:"black",navigationStyle:"custom"},o=a,(0,u.default)(n,o)}return(0,p.default)(t,e),(0,l.default)(t,[{key:"componentWillMount",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,v.getCurrentPageQueryParams)(),a=t.franchisee||"",n=t.scene,o=a?"":h.appMethod.getAppTitle();this.setData({appTitle:o,franchisee:a,userInfo:h.appMethod.getUserInfo(),franchiseeIdInfo:{id:a}}),a&&this.getAppShopByPage(),this.getBalanceData(),this.getTransferOrderConfig(function(){n&&e.getSceneData(n)}),this.getCurrentStoreBenefitInfo(),this.getStoreBenefitActivityList(),this.getBalanceInfo()}},{key:"render",value:function(){var e=this,t=this.state,a=(t.showGetUserInfo,t.topNavBarData,t.franchiseeIdInfo,t.memberDiscount,t.franchisee),n=t.transferConfig,o=t.appTitle,s=t.storeBenefitActivityList,r=t.inputPrice,c=t.inputState,l=t.isShowPriceLimitTip,d=t.noJoinPrice,u=t.currentStoreBenefitInfo,m=t.storeState,p=t.storeBenefitInfo,f=t.vipCardInfo,h=t.aloneBenefitState,_=t.selectedBenefit,y=t.combineState,N=t.combineBenefit,R=t.userInfo,k=t.balanceState,w=t.useBalancePrice,x=t.relatedOrderInfo,C=t.benefitType,D=t.balanceItemInfo,S=t.isShowBalanceItem,I=(t.remark,t.totalPayment),M=t.requesting;return g.default.createElement("div",{className:"official-page transfer-page"},g.default.createElement(g.default.Fragment,null,g.default.createElement("div",{className:"transfer-wrap"},g.default.createElement("div",{className:"transfer-header"},g.default.createElement("div",{className:"transfer-name"},"付款给",g.default.createElement("span",{className:"account"},o)),!!s.length&&g.default.createElement("div",{className:"coupon-desc",onClick:this.goToCouponDesc,style:(0,v.convertLineStyleData)("color: "+n.background_color)},"优惠说明")),g.default.createElement("div",{className:"transfer-input consumption-block"},g.default.createElement("div",{className:"space-between"},g.default.createElement("div",{className:"input-text"},"消费金额"),g.default.createElement("div",{className:"input-price-block"},g.default.createElement("input",{value:""!==r?"¥"+r:"",className:"input-price "+(1==n.scan_mode?"m-r-40":""),placeholder:"0"===n.input_mode?"":"请输入金额",onInput:this.inputPrice,onBlur:this.priceBlur,disabled:1===c||2===c||"0"===n.input_mode,"data-type":"price"}),1==n.scan_mode&&g.default.createElement("span",{className:"ico-moon icon-shopping-scan",onClick:this.scanPaymentCode}))),l&&g.default.createElement("div",{className:"price-limit"},"价格区间仅支持0.01~99999.99元")),1==n.scan_mode&&g.default.createElement("div",{className:"scan-tip-block"},g.default.createElement("span",{className:"scan-tip"},"扫码可快速填充")),1==n.least_cost&&2!==c&&g.default.createElement("div",{className:"transfer-input no-join-block"},g.default.createElement("div",{className:"input-text"},"不参与金额"),g.default.createElement("div",{className:"input-price-block"},g.default.createElement("input",{value:""!==d?"¥"+d:"",className:"input-price",style:(0,v.convertLineStyleData)("font-size: 32rpx"),placeholder:"0"===n.input_mode?"":"请输入金额",onInput:this.noJoinPriceInput,onBlur:this.priceBlur,disabled:1===c||2===c||"0"===n.input_mode,"data-type":"no-join-price"}))),2!==c&&g.default.createElement("div",{className:"discount-block"},u.activity_title&&g.default.createElement("div",{className:"item space-between store-discount"},g.default.createElement("span",{className:"store-title"},"店铺满减"),g.default.createElement("div",null,g.default.createElement("div",{className:"discount-text",hidden:r},u.rule_titles.map(function(e,t){return g.default.createElement("span",{key:t},0===t?e:", "+e)})),r&&g.default.createElement(g.default.Fragment,null,g.default.createElement(i.default,{checked:m,onChange:this.updateStoreState}),p.discount_price&&0!=p.discount_price&&m&&g.default.createElement("div",{className:"discount-price",style:(0,v.convertLineStyleData)("color: "+n.background_color)},"-¥"+p.discount_price),0==p.discount_price&&m&&g.default.createElement("div",{className:"store-tip"},"不满足满减条件")))),f.isShow&&g.default.createElement("div",{className:"item vip-card-block"},g.default.createElement("div",{className:"vip-card"},g.default.createElement("img",{className:"card-img",src:f.logo}),g.default.createElement("div",{className:"card-info"},g.default.createElement("div",{className:"card-name"},f.app_name+" "+f.title),0!=f.discount?g.default.createElement("div",{className:"card-mess"},"免费开卡享 "+f.discount+"折"):f.coupon_list&&""!=f.coupon_list?g.default.createElement("div",{className:"card-mess"},"免费开卡享 赠送优惠券"):0!=f.integral&&g.default.createElement("div",{className:"card-mess"},"免费开卡享 赠送"+f.integral+"积分")),g.default.createElement("div",{className:"card-btn",onClick:this.handleVipCard},"立即开卡"))),!!+h&&g.default.createElement("div",{className:"item space-between member-discount",onClick:this.showMemberDiscount},g.default.createElement("div",{style:(0,v.convertLineStyleData)("font-size: 28rpx")},"会员优惠"),g.default.createElement("div",{className:"member-discount-detail"},_.discount_cut_price&&"0.00"!==_.discount_cut_price&&g.default.createElement("div",{className:"price",style:(0,v.convertLineStyleData)("color: "+n.background_color)},"-¥"+_.discount_cut_price),_.discount_cut_price&&"0.00"===_.discount_cut_price&&g.default.createElement("div",{className:"price",style:(0,v.convertLineStyleData)("color: "+n.background_color)},"未使用"),g.default.createElement("div",{className:"ico-moon icon-rightarrow"}))),!!+y.vip&&1==n.vip_card_benefit_enable&&g.default.createElement("div",{className:"item member-discount","data-type":"vip",onClick:this.showMemberDiscount},g.default.createElement("div",{style:(0,v.convertLineStyleData)("font-size: 28rpx")},"会员卡优惠"),g.default.createElement("div",{className:"member-discount-detail"},N.vip_benefit&&"0.00"!==N.vip_benefit_discount_price&&g.default.createElement("div",{className:"price",style:(0,v.convertLineStyleData)("color: "+n.background_color)},"-¥"+N.vip_benefit_discount_price),N.vip_benefit&&"0.00"===N.vip_benefit_discount_price&&g.default.createElement("div",{className:"price",style:(0,v.convertLineStyleData)("color: "+n.background_color)},"未使用"),g.default.createElement("div",{className:"ico-moon icon-rightarrow"}))),1==n.combine_benefit_enable&&r&&1==n.coupon_benefit_enable&&g.default.createElement("div",{className:"item member-discount","data-type":"coupon",onClick:this.showMemberDiscount},g.default.createElement("div",{style:(0,v.convertLineStyleData)("font-size: 28rpx")},"优惠券减免"),g.default.createElement("div",{className:"member-discount-detail"},1===y.coupon&&g.default.createElement(g.default.Fragment,null,N.coupon_benefit_discount_price&&"0.00"!==N.coupon_benefit_discount_price&&g.default.createElement("div",{className:"price",style:(0,v.convertLineStyleData)("color: "+n.background_color)},"-¥"+N.coupon_benefit_discount_price),N.coupon_benefit_discount_price&&"0.00"===N.coupon_benefit_discount_price&&g.default.createElement("div",{className:"price",style:(0,v.convertLineStyleData)("color: "+n.background_color)},"未使用")),0===y.coupon&&g.default.createElement(g.default.Fragment,null,g.default.createElement("div",{className:"price",style:(0,v.convertLineStyleData)("color: "+n.background_color)},"无可用优惠券")),g.default.createElement("div",{className:"ico-moon icon-rightarrow"}))),!!+y.integral&&1==n.integral_benefit_enable&&g.default.createElement("div",{className:"item member-discount","data-type":"integral",onClick:this.showMemberDiscount},g.default.createElement("div",{style:(0,v.convertLineStyleData)("font-size: 28rpx")},"积分抵扣"),g.default.createElement("div",{className:"member-discount-detail"},N.integral_benefit&&"0.00"!==N.integral_benefit.discount_price&&g.default.createElement("div",{className:"price",style:(0,v.convertLineStyleData)("color: "+n.background_color)},"-¥"+N.integral_benefit.discount_price),N.integral_benefit&&"0.00"===N.integral_benefit.discount_price&&g.default.createElement("div",{className:"price",style:(0,v.convertLineStyleData)("color: "+n.background_color)},"未使用"),g.default.createElement("div",{className:"ico-moon icon-rightarrow"}))),"0"!==n.use_balance_enable&&""===a&&R.balance&&0!=R.balance&&g.default.createElement("div",{className:"item space-between stored-value-discount"},g.default.createElement("span",{style:(0,v.convertLineStyleData)("font-size: 28rpx")},"储值抵扣（余额：￥"+R.balance+"）"),g.default.createElement("div",{className:"stored-value-block"},g.default.createElement(i.default,{onChange:this.updateBalanceState,checked:k}),g.default.createElement("div",{className:"stored-value-price",hidden:!k||0==w,style:(0,v.convertLineStyleData)("color: "+n.background_color)},"-¥"+w)))),2===c&&g.default.createElement("div",{className:"discount-block"},x.selected_benefit_info.discount_type&&g.default.createElement("div",{className:"item member-discount"},g.default.createElement("div",{style:(0,v.convertLineStyleData)("font-size: 28rpx")},C[x.selected_benefit_info.discount_type]+"优惠"),g.default.createElement("div",{className:"member-discount-detail"},g.default.createElement("div",{className:"price",style:(0,v.convertLineStyleData)("color: "+n.background_color)},"-¥"+x.selected_benefit_info.discount_price))),"0.00"!==x.use_balance&&g.default.createElement("div",{className:"item member-discount"},g.default.createElement("div",{style:(0,v.convertLineStyleData)("font-size: 28rpx")},"储值抵扣"),g.default.createElement("div",{className:"member-discount-detail"},g.default.createElement("div",{className:"price",style:(0,v.convertLineStyleData)("color: "+n.background_color)},"-¥"+x.use_balance))),"0.00"!==x.coupon_fee&&g.default.createElement("div",{className:"item member-discount"},g.default.createElement("div",{style:(0,v.convertLineStyleData)("font-size: 28rpx")},"社交立减金"),g.default.createElement("div",{className:"member-discount-detail"},g.default.createElement("div",{className:"price",style:(0,v.convertLineStyleData)("color: "+n.background_color)},"-¥"+x.coupon_fee)))),S&&D.length&&"0"!==n.use_balance_enable&&2!==c&&""===a&&g.default.createElement("div",{className:"balance-block"},g.default.createElement("div",{className:"title"},"储值优惠"),1===D.length&&g.default.createElement(g.default.Fragment,null,g.default.createElement("div",{className:"detail"},D.map(function(t,a){return g.default.createElement("div",{className:"balance-item-first",key:a,style:(0,v.convertLineStyleData)("border-color: "+n.background_color)},g.default.createElement("div",{className:"price",style:(0,v.convertLineStyleData)("color: "+n.background_color)},"￥"+t.price),g.default.createElement("div",{className:"discount-wrapper"},g.default.createElement("div",{className:"discount-item"},t.discounts)),g.default.createElement("form",{className:"balance-form"},g.default.createElement("button",{className:"pay-btn",type:"button","data-index":a,onClick:e.gotoRecharge,style:(0,v.convertLineStyleData)("background-color: "+n.background_color)},"立即充值")))}))),D.length>1&&g.default.createElement(g.default.Fragment,null,g.default.createElement(b.ScrollView,{"scroll-x":"true",className:"balance-scroll"},D.map(function(t,a){return g.default.createElement("div",{className:"balance-item-second",key:a,style:(0,v.convertLineStyleData)("border-color: "+n.background_color+"; width: "+(2===D.length?"258rpx":"216rpx"))},g.default.createElement("div",{className:"price-block"},g.default.createElement("div",{className:"price",style:(0,v.convertLineStyleData)("color: "+n.background_color)},"￥"+t.price),g.default.createElement("div",{className:"discount-wrapper"},g.default.createElement("div",{className:"discount-item"},t.discounts))),g.default.createElement("form",{className:"balance-form"},g.default.createElement("button",{className:"pay-btn",type:"button","data-index":a,onClick:e.gotoRecharge,style:(0,v.convertLineStyleData)("color: "+n.background_color+";")},"立即充值")))})))),g.default.createElement("div",{className:"transfer-input remark"},g.default.createElement("div",{className:"input-text"},"备注"),g.default.createElement("input",{style:(0,v.convertLineStyleData)("font-size: 28rpx; text-overflow: ellipsis;"),maxLength:"30",placeholder:"请填写备注信息",onInput:this.inputRemark})),g.default.createElement("button",{className:"submit-btn",disabled:""===I||M,onClick:this.confirmPay,style:(0,v.convertLineStyleData)("background: "+n.background_color)},(""===I?"":I+"元  ")+"确认支付"))),g.default.createElement(E.MemberDiscount,{ref:this.memberDiscountRef}))}}]),t}(y.default);t.default=N},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(0),i=n(o),s=a(3),r=n(s),c=a(1),l=n(c),d=a(2),u=n(d),m=a(5),p=a(6),f=a(7),g=n(f);a(442);var h=function(e){function t(e){(0,i.default)(this,t);var a=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={artivityList:[],franchisee:"",statusOptions:{"-1":{label:"未开始"},0:{label:"进行中",className:"active"},1:{label:"已结束"},2:{label:"即将开始",className:"begin"}}},a.getStoreBenefitActivityList=function(){m.appMethod.sendRequest({url:"/index.php?r=AppStoreBenefit/GetStoreBenefitActivityList",method:"post",data:{sub_shop_app_id:a.data.franchisee},success:function(e){var t=e.status,n=e.data;if(0===t){var o=[];n.forEach(function(e){var t=e.activity_start_date,n=e.activity_end_date,i=e.expired,s=e.rule_titles,r=e.periods;if(e.activity_start_date=t.substr(0,10),e.activity_end_date=n.substr(0,10),e.activity_rules&&e.activity_rules.length>0){var c=e.activity_rules[e.activity_rules.length-1],l=c.discount_price,d=c.discount_limit;e.max_discount_price=-1==d?l:l*d%1==0?l*d:(l*d).toFixed(2)}-1!==n.indexOf("9999")&&(e.activity_end_date="长期"),Object.keys(a.data.statusOptions).includes(""+i)||(e.expired=1),s.length&&(e.rule_titles=s.map(function(e){return e})),r.length&&(e.periodsText=r.join(";")),1!=i&&o.push(e)});var i=o.filter(function(e){return 0==e.expired}),s=o.filter(function(e){return 2==e.expired}),r=o.filter(function(e){return-1==e.expired}),c=i.concat(s,r);a.setData({artivityList:c})}}})},document.title="优惠券",a}return(0,u.default)(t,e),(0,r.default)(t,[{key:"componentWillMount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,p.getCurrentPageQueryParams)(),t=e.franchisee||"";this.setData({franchisee:t}),this.getStoreBenefitActivityList()}},{key:"render",value:function(){var e=this.state,t=e.artivityList,a=e.statusOptions;return React.createElement("div",{className:"official-page coupon-description"},React.createElement("div",{className:"coupon-desc"},React.createElement("div",{className:"top-block",style:(0,p.convertLineStyleData)("background-image: url(http://www.zhichiwangluo.com/zhichi_frontend/static/webapp/images/transfer/coupon-desc-head.png)")},React.createElement("div",{className:"tip"},"买单享优惠"),React.createElement("div",{className:"tip"},"赶快参与吧")),React.createElement("div",{className:"coupon-wrappr"},t.map(function(e,t){return React.createElement("div",{className:"coupon-item",key:t},React.createElement("div",{className:"title"},React.createElement("div",{className:"status "+(a[e.expired].className||"")},a[e.expired].label||""),e.activity_title),React.createElement("div",{className:"detail coupon-detail"},React.createElement("div",{className:"left"},"优惠规则："),React.createElement("div",{className:"right"},e.rule_titles.map(function(e,t){return React.createElement("span",{className:"detail-item rich-text",key:t,dangerouslySetInnerHTML:{__html:e}})}))),React.createElement("div",{className:"detail"},React.createElement("div",{className:"left"},"使用时间："),React.createElement("div",{className:"right"},React.createElement("span",null,e.periodsText))),React.createElement("div",{className:"detail"},"活动日期："+e.activity_start_date+" 至 "+e.activity_end_date))}))))}}]),t}(g.default);t.default=h},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(9),i=n(o),s=a(17),r=n(s),c=a(107),l=n(c),d=a(39),u=n(d),m=a(0),p=n(m),f=a(3),g=n(f),h=a(1),v=n(h),_=a(2),y=n(_);a(16),a(109),a(35);var E=a(5),b=a(12),N=a(6),R=a(7),k=n(R);a(444);var w={dateFilter:function(e){var t=getDate().getHours(),a=e;if(t<6){var n=getDate(getDate(a).getTime()-864e5);a=n.getFullYear()+"-"+(n.getMonth()+1>=10?n.getMonth()+1:"0"+(n.getMonth()+1))+"-"+(n.getDate()>=10?n.getDate():"0"+n.getDate())}return a}},x=function(e){function t(e){(0,p.default)(this,t);var a=(0,v.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={appointmentInfo:{},goodsId:"",longRangeIndex:0,periodRangeIndex:0,selectedDate:"",selectedDateIfBusiness:0,selectedPeriod:"",serviceTimeUnit:"",unitType:"",date:"",time:"12:00",color:"",isHotelService:!0},a.dataInitialName=function(){var e,t,n=a.data.unitType,o=a.data.isHotelService;if(6!=n){switch(n){case"1":case"2":t="请先选择预约日期",e="请先选择预约日期";break;case"3":t="请先选择起始日期",e="请先选择起始日期"}o=!1}else t="请先选择起始日期",e="请先选择起始日期",o=!0;a.setData({"appointmentInfo.serviceLongRange[0]":t,"appointmentInfo.servicePrice":e,isHotelService:o})},a.dataInitial=function(){a.getAppointmentList({app_id:E.appMethod.getAppId(),data_id:a.data.goodsId,sub_shop_app_id:a.data.franchiseeId,ck_id:eaa3f988dc6905c67674e708d0752fc2},!0)},a.getAppointmentList=function(e,t){var n=a;E.appMethod.sendRequest({url:"/index.php?r=AppAppointment/getAppointmentList",data:e,success:function(e){var a,o,i,s,r,c,l={},a=e.data,d=a.appointment_info;if(l.color="#F05B10",t){switch(e.unit_type){case"1":r="分";break;case"2":r="小时";break;case"3":case"6":r="天"}if("天"==r)s=a.selected_start_day.substring(0,4)+"-"+a.selected_start_day.substring(4,6)+"-"+a.selected_start_day.substring(6,8),i=a.selected_end_day.substring(0,4)+"-"+a.selected_end_day.substring(4,6)+"-"+a.selected_end_day.substring(6,8),l["appointmentInfo.appointmentStartDateRange"]=s,l["appointmentInfo.appointmentEndDateRange"]=i;else{var u=function(e,t){return e-t};o=a.selected_day.substring(0,4)+"-"+a.selected_day.substring(4,6)+"-"+a.selected_day.substring(6,8),c=a.can_select_time_long.sort(u),l["appointmentInfo.serviceLongRange"]=c;for(var m in a.can_select_interval){var p=a.can_select_interval[m].split("-");if(a.can_select_interval[m].substring(6,8)>=24){var f=p[1].split(":")[0]-24>=10?p[1].split(":")[0]-24:"0"+(p[1].split(":")[0]-24);a.can_select_interval[m]=p[0]+"-次日"+f+":"+p[1].split(":")[1]}else a.can_select_interval[m]=p[0]+"-当日"+p[1]}l["appointmentInfo.servicePeriodRange"]=a.can_select_interval,l["appointmentInfo.appointmentDateRange"]=o}l.selectedDate=1,l.selectedDateIfBusiness=1,l.serviceTimeUnit=r}for(var m in d){var g=d[m].interval,h=g.split("-")[0].split(":")[0],v=g.split("-")[0].split(":")[1],f=g.split("-")[1].split(":")[0],_=g.split("-")[1].split(":")[1],y=h>=24?"次日"+(1*h-24)+":"+v:"当日"+1*h+":"+v,E=f>=24?"次日"+(1*f-24)+":"+_:"当日"+1*f+":"+_;d[m].interval=y+"-"+E}l["appointmentInfo.servicePeriodList"]=d||"",l["appointmentInfo.servicePrice"]="0"!=a.appointment_price?a.appointment_price+"元":"免费",n.setData(l)},fail:function(e){console.log(e)}})},a.serviceLongChange=function(e){var t=a.state.appointmentInfo.serviceLongRange.indexOf(e[0]);a.setData({longRangeIndex:t}),a.serviceConditionChange()},a.setTime=function(e,t){var a,n,o,i;return a=e.split(":"),n=a[0].replace(/[^0-9]/gi,""),o=a[1].replace(/[^0-9]/gi,""),i=1*o+1*t,o=i>59?i-60*Math.floor(i/60):i,o=o>9?o:"0"+o,n=i>59?Math.floor(i/60)+1*n:n,n+":"+o},a.bindDateAppointmentChange=function(e){var t,n,o,e=(0,b.formatTimeYMD)(e,"YYYY-MM-DD"),i=a.data.appointmentInfo.servicePeriodRange[a.data.periodRangeIndex];if(a.setData({"appointmentInfo.appointmentDay":e}),"?"!=a.data.appointmentInfo.servicePrice){var s=i.split("-");2==a.data.unitType&&"请先选择预约日期"!=a.data.appointmentInfo.serviceLongRange[0]?t="当日"==s[1].substring(0,2)?s[0]+"-"+s[1].substring(2):s[0]+"-"+(parseInt(s[1].substring(2,4))+24)+s[1].substring(4):1==a.data.unitType&&"请先选择预约日期"!=a.data.appointmentInfo.serviceLongRange[0]&&(n=a.data.time),"请先选择预约日期"!=a.data.appointmentInfo.serviceLongRange[0]&&(o=a.data.appointmentInfo.serviceLongRange[a.data.longRangeIndex])}a.getAppointmentList({day:a.data.appointmentInfo.appointmentDay.split("-").join(""),app_id:E.appMethod.getAppId(),data_id:a.data.goodsId,interval:t||"",start_time:n||"",time_long:o||"",sub_shop_app_id:a.data.franchiseeId},!0)},a.bindStartDateChange=function(e){var t=(0,b.formatTimeYMD)(e,"YYYY-MM-DD"),n=a.data.isHotelService?new Date(t).getTime()+864e5:new Date(t).getTime(),o=a.timestampToTime(n);a.setData({"appointmentInfo.appointmentStartDateRange":t,"appointmentInfo.appointmentEndDateRange":o}),a.getAppointmentList({start_date:t.split("-").join(""),end_date:a.data.appointmentInfo.appointmentEndDateRange.split("-").join(""),app_id:E.appMethod.getAppId(),data_id:a.data.goodsId,sub_shop_app_id:a.data.franchiseeId},!0)},a.bindEndDateChange=function(e){var t=(0,b.formatTimeYMD)(e,"YYYY-MM-DD"),n=new Date(t).getTime(),o=new Date(a.data.appointmentInfo.appointmentStartDateRange).getTime();if(n<o||n<=o&&a.data.isHotelService)return E.appMethod.showModal({content:"结束日期有误，请重新选择"}),!1;a.setData({"appointmentInfo.appointmentEndDateRange":t}),a.getAppointmentList({start_date:a.data.appointmentInfo.appointmentStartDateRange?a.data.appointmentInfo.appointmentStartDateRange.split("-").join(""):a.data.appointmentInfo.appointmentDay.split("-").join(""),end_date:t.split("-").join(""),app_id:E.appMethod.getAppId(),data_id:a.data.goodsId,sub_shop_app_id:a.data.franchiseeId},!0)},a.bindTimeChange=function(e,t){var n=(0,b.formatTimeYMD)(e,"hh:mm");if(a.setData({time:n}),6==t)return!1;a.serviceConditionChange()},a.servicePeriodSelectChange=function(e){var t=a.state.appointmentInfo.servicePeriodRange.indexOf(e[0]);a.setData({periodRangeIndex:t}),"小时"==a.data.serviceTimeUnit&&a.serviceConditionChange()},a.serviceDateChange=function(e){var t=e.currentTarget.dataset,n=t.ifbusinessday,o=t.date,i={};i.selectedDate=o,n||(i["appointmentInfo.servicePeriodList"]=""),a.setData(i),n&&a.serviceConditionChange()},a.servicePeriodListChange=function(e){var t=e.currentTarget.dataset,n=t.canBuy;1!=t.expired&&0!=n&&a.setData({selectedPeriod:e.currentTarget.dataset.interval})},a.serviceConditionChange=function(){var e=a.getParam();a.getAppointmentList(e,!1),a.setData({selectedPeriod:""})},a.hiddeAddToShoppingCart=function(){a.setData({addToShoppingCartHidden:!0})},a.getParam=function(){var e=a.data.appointmentInfo;if(a.data.appointmentInfo.serviceLongRange){a.data.appointmentInfo.serviceLongRange[0]}if(e.serviceLongRange){e.serviceLongRange[a.data.longRangeIndex]}var t={app_id:E.appMethod.getAppId(),data_id:a.data.goodsId,sub_shop_app_id:a.data.franchiseeId};if(2==a.data.unitType){var n=e.servicePeriodRange[a.data.periodRangeIndex],o="当日"==n.substring(6,8)?n.split("当日").join(""):n.substring(0,6)+(1*n.substring(8,10)+24)+n.substring(10);t.interval=o,t.day=a.data.appointmentInfo.appointmentDay.split("-").join(""),t.time_long=e.serviceLongRange[a.data.longRangeIndex]}else 1==a.data.unitType?(t.day=a.data.appointmentInfo.appointmentDay.split("-").join(""),t.start_time=a.data.time,t.time_long=e.serviceLongRange[a.data.longRangeIndex]):3==a.data.unitType&&(t.start_date=a.data.appointmentInfo.appointmentStartDateRange.split("-").join(""),t.end_date=a.data.appointmentInfo.appointmentEndDateRange.split("-").join(""));return t},a.timestampToTime=function(e){var t=new Date(e);return t.getFullYear()+"-"+(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-"+(t.getDate()<10?"0"+t.getDate():t.getDate())},a.getShopParam=function(){var e=a.data.appointmentInfo;if(a.data.appointmentInfo.serviceLongRange){a.data.appointmentInfo.serviceLongRange[0]}if(e.serviceLongRange){e.serviceLongRange[a.data.longRangeIndex]}var t={app_id:E.appMethod.getAppId(),goods_id:a.data.goodsId,sub_shop_app_id:a.data.franchiseeId};if("小时"==a.data.serviceTimeUnit){var n=a.data.selectedPeriod.split("-")[0].split(":")[0],o=1*n.substring(2),i=a.data.selectedPeriod.split("-")[0].split(":")[1],s=a.data.selectedPeriod.split("-")[1].split(":")[0].substring(0,2),r=parseInt(a.data.selectedPeriod.split("-")[1].split(":")[0].substring(2)),r="次日"==s?r+24:r,c=a.data.selectedPeriod.split("-")[1].split(":")[1],l="当日"==n.substring(0,2)?o+":"+i:o+24+":"+i,d=r<o||l.split(":")[0]>=24?r+24+":"+c:r+":"+c,u=l+"-"+d;t.appointment_interval=u,t.appointment_unit_type=2,t.appointment_day=a.data.appointmentInfo.appointmentDay.split("-").join(""),t.appointment_time_long=e.serviceLongRange[a.data.longRangeIndex]}else"分"==a.data.serviceTimeUnit?(t.appointment_unit_type=1,t.appointment_day=a.data.appointmentInfo.appointmentDay.split("-").join(""),t.appointment_time_long=e.serviceLongRange[a.data.longRangeIndex],t.appointment_interval=a.data.time+"-"+a.setTime(a.data.time,e.serviceLongRange[a.data.longRangeIndex])):"天"==a.data.serviceTimeUnit&&("6"==a.data.unitType&&(t.appointment_day=a.data.appointmentInfo.appointmentStartDateRange.split("-").join("")),t.appointment_unit_type=a.data.unitType,t.appointment_start_date=a.data.appointmentInfo.appointmentStartDateRange.split("-").join(""),t.appointment_end_date=a.data.appointmentInfo.appointmentEndDateRange.split("-").join(""));return t},a.sureMakeAppointment=function(e){var t,n=a.data.selectedPeriod,o=a.data.franchiseeId,i=a.data.appointmentInfo.servicePrice,s=a.data.serviceTimeUnit,r=a.data.time,c=a;return i?"小时"!=s||n?(t=a.getShopParam(),t.model_id=0,t.num=1,t.is_appointment=1,void E.appMethod.sendRequest({url:"/index.php?r=AppShop/AddCart",data:t,success:function(e){var t=[e.data],a="/eCommerce/pages/previewAppointmentOrder/previewAppointmentOrder?cart_arr="+encodeURIComponent(t)+"&to_store="+JSON.stringify(r);o&&(a+="&franchisee="+o),c.hiddeAddToShoppingCart(),E.appMethod.turnToPage(a,!0)}})):void E.appMethod.showModal({content:"请选择具体时间"}):void E.appMethod.showModal({content:"该时间段已被预约，请选择其他时间段"})},document.title="预约",a}return(0,y.default)(t,e),(0,g.default)(t,[{key:"componentWillMount",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,N.getCurrentPageQueryParams)(),a=t.detail,n=t.franchisee||"",o=t.param,i={};new Date;e={year:(new Date).getFullYear(),month:(new Date).getMonth()+1>=10?(new Date).getMonth()+1:"0"+((new Date).getMonth()+1),date:(new Date).getDate()>=10?(new Date).getDate():"0"+(new Date).getDate(),startHours:(new Date).getHours()+1>=10?(new Date).getHours()+1:"0"+((new Date).getHours()+1),endHours:(new Date).getHours()+2>=10?(new Date).getHours()+2:"0"+((new Date).getHours()+2)},i.appointmentDay="请先选择预约日期",i.appointmentStartDateRange="请先选择起始日期",i.appointmentEndDateRange="请先选择起始日期",i.serviceLongRange=["1小时"],i.servicePeriodRange=[e.startHours+":00-当日"+e.endHours+":00"],i.intervalStart=[e.year+"-"+e.month+"-"+e.date],this.setData({goodsId:a,franchiseeId:n,unitType:o,appointmentInfo:i}),this.dataInitialName()}},{key:"render",value:function(){var e=this,t=this.state,a=(t.showGetUserInfo,t.unitType),n=t.appointmentInfo,o=t.color,s=t.serviceTimeUnit,c=t.periodRangeIndex,d=t.appointmentTime,m=t.time,p=t.longRangeIndex,f=t.selectedDate,g=t.selectedPeriod,h=n.servicePeriodRange.map(function(e){return{label:e,value:e}}),v=n.serviceLongRange.map(function(e){return{label:e+s,value:e}});return React.createElement("div",{className:"official-page make-appointment"},React.createElement("div",{className:"appointmentPage-wrap page",id:"appointmentPage","data-router":"appointmentPage"},React.createElement("div",{style:(0,N.convertLineStyleData)("position:sticky;")},React.createElement("div",{className:"appointment-top-section"},("天"==s||3==a||6==a)&&React.createElement("div",{className:"appointment-model-field"},React.createElement("span",null,"起始日期"),React.createElement("div",{className:"appointment-model-right"},React.createElement(l.default,{mode:"date",extra:n.appointmentStartDateRange,value:6==a?new Date(w.dateFilter(n.intervalStart[0])):isNaN(new Date(n.appointmentStartDateRange).getTime())?null:new Date(n.appointmentStartDateRange),minDate:6==a?new Date(w.dateFilter(n.intervalStart[0])):isNaN(new Date(n.intervalStart).getTime())?null:new Date(n.intervalStart),maxDate:new Date("3030-09-01"),onChange:this.bindStartDateChange},React.createElement(u.default.Item,{style:(0,N.convertLineStyleData)("color: "+o)})))),("天"==s||3==a||6==a)&&React.createElement("div",{className:"appointment-model-field"},React.createElement("span",null,"结束日期"),React.createElement("div",{className:"appointment-model-right"},React.createElement(l.default,{mode:"date",extra:n.appointmentEndDateRange,value:isNaN(new Date(n.appointmentEndDateRange).getTime())?null:new Date(n.appointmentEndDateRange),minDate:new Date(n.intervalStart),maxDate:new Date("3030-09-01"),onChange:this.bindEndDateChange},React.createElement(u.default.Item,{style:(0,N.convertLineStyleData)("color: "+o)})))),("分"==s||"时"==s||2==a||1==a)&&React.createElement("div",{className:"appointment-model-field"},React.createElement("span",null,"预约日期"),React.createElement("div",{className:"appointment-model-right"},React.createElement(l.default,{mode:"date",extra:n.appointmentDay,value:isNaN(new Date(n.appointmentDay).getTime())?null:new Date(n.appointmentDay),minDate:new Date(n.intervalStart[0]),maxDate:new Date("3030-09-01"),onChange:this.bindDateAppointmentChange},React.createElement(u.default.Item,{style:(0,N.convertLineStyleData)("color: "+o)})))),React.createElement("div",{className:"appointment-model-field",hidden:"天"==s||3==a||6==a},React.createElement("span",null,"营业时段"),React.createElement("div",{className:"appointment-model-right"},React.createElement(r.default,{className:"appointment-field-selection",cols:1,data:h,value:[h[c].value],onChange:this.servicePeriodSelectChange},React.createElement(u.default.Item,{style:(0,N.convertLineStyleData)("color: "+o)})))),("天"==s||"分"==s||1==a||3==a||6==a)&&React.createElement("div",{className:"appointment-model-field"},React.createElement("span",null,"预约时间"),React.createElement("span",(0,i.default)({style:(0,N.convertLineStyleData)("float:right;")},"style",(0,N.convertLineStyleData)("color: "+o)),d),React.createElement("div",{className:"appointment-model-right"},React.createElement(l.default,{className:"appointment-field-selection",mode:"time",value:new Date("2010-10-10 "+m),onChange:function(t){return e.bindTimeChange(t,a)}},React.createElement(u.default.Item,{style:(0,N.convertLineStyleData)("color: "+o)})))),React.createElement("div",{className:"appointment-model-field",hidden:"天"==s||3==a||6==a},React.createElement("span",null,"服务时长"),React.createElement("div",{className:"appointment-model-right"},React.createElement(r.default,{className:"appointment-field-selection",cols:1,extra:"请先选择预约日期",data:v,value:[v[p].value],onChange:this.serviceLongChange},React.createElement(u.default.Item,{style:(0,N.convertLineStyleData)("color: "+o)})))),React.createElement("div",{className:"appointment-model-field",style:(0,N.convertLineStyleData)("border:none;")},React.createElement("span",null,"服务价格"),React.createElement("div",{className:"appointment-model-right"},React.createElement("span",{className:"appointment-service-price",style:(0,N.convertLineStyleData)("color: "+o)},n.servicePrice)))),React.createElement("div",{className:"appointment-time-section"},React.createElement("div",{className:"appointment-date-list"},n&&n.serviceDateList&&n.serviceDateList.map(function(t,a){return React.createElement("div",{key:t.date,className:"appointment-date-item "+(f==t.date?"selected":"")+" "+(t.ifBusiness?"":"disabled"),"data-date":t.date,"data-ifBusinessDay":t.ifBusiness,onClick:e.serviceDateChange},React.createElement("div",null,t.week,!t.ifBusiness&&React.createElement("span",null,"(不营业)")),React.createElement("div",null,t.modifiedDate))})),React.createElement("div",{className:"appointment-period-list"},n&&n.servicePeriodList&&n.servicePeriodList.map(function(t,a){return React.createElement("div",{key:a,className:"appointment-period-item "+(g==t.interval?"selected":"")+" "+(0==t.can_buy||1==t.expired?"disabled":""),onClick:e.servicePeriodListChange,"data-expired":t.expired,"data-can-buy":t.can_buy,"data-interval":t.interval},React.createElement("div",null,t.interval),(0==t.can_buy||1==t.expired)&&React.createElement("span",null,"("+(1==t.expired?"过期":"约满")+")"))})))),React.createElement("div",{className:"appointment-bottom-bar"},React.createElement("form",null,React.createElement("button",{type:"button",onClick:this.sureMakeAppointment,className:"btn btn-block sure-make-appointment"},"确认")))))}}]),t}(k.default);t.default=x},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(0),i=n(o),s=a(3),r=n(s),c=a(1),l=n(c),d=a(2),u=n(d),m=a(5),p=a(6),f=a(7),g=n(f);a(446);var h=function(e){function t(){var e,a,n,o;(0,i.default)(this,t);for(var s=arguments.length,r=Array(s),c=0;c<s;c++)r[c]=arguments[c];return a=n=(0,l.default)(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r))),n.state={orderInfo:{},combinationBenefit:{},orderStatus:{0:"待付款",6:"已完成",7:"已关闭"},isFromBack:!1,isFromTemplateMsg:!1,orderId:"",discountList:[]},n.dataInitial=function(){n.getOrderDetail(n.data.orderId)},n.turnToFormDetail=function(){var e=n.data.orderInfo.pay_form_data;m.appMethod.turnToPage("/userCenter/pages/myMessage/myMessage?from=transforDetail&formid="+e.pay_form_id+"&form="+e.pay_form+"&formDataId="+e.pay_form_data_id)},n.getOrderDetail=function(e,t){var a=n,o={};m.appMethod.getOrderDetail({data:{order_id:e,sub_shop_app_id:n.data.franchiseeId},success:function(e){var t=e.data[0].form_data;t.selected_combination_benefit&&(o=t.selected_combination_benefit,o.store_benefit&&o.store_benefit.discount_price&&(o.store_benefit.discount_price=(+o.store_benefit.discount_price).toFixed(2)),o.vip_benefit_discount_price&&(o.vip_benefit_discount_price=(+o.vip_benefit_discount_price).toFixed(2)),o.coupon_benefit_discount_price&&(o.coupon_benefit_discount_price=(+o.coupon_benefit_discount_price).toFixed(2)),o.integral_benefit&&o.integral_benefit.discount_price&&(o.integral_benefit.discount_price=(+o.integral_benefit.discount_price).toFixed(2))),t.store_benefit_info&&t.store_benefit_info.discount_price&&(t.store_benefit_info.discount_price=(+t.store_benefit_info.discount_price).toFixed(2)),t.selected_benefit_info&&t.selected_benefit_info.discount_cut_price&&(t.selected_benefit_info.discount_cut_price=(+t.selected_benefit_info.discount_cut_price).toFixed(2)),t.use_balance&&(t.use_balance=(+t.use_balance).toFixed(2)),t.coupon_fee&&(t.coupon_fee=(+t.coupon_fee).toFixed(2)),delete t.can_use_benefit.coupon_benefit,a.setData({orderInfo:t,combinationBenefit:o,discountList:t.can_use_benefit.data,index:t.can_use_benefit.selected_index})}})},n.cancelOrder=function(e){var t=n.data.orderId,a=n;m.appMethod.showModal({content:"是否取消订单？",showCancel:!0,confirmText:"是",cancelText:"否",confirm:function(){m.appMethod.sendRequest({url:"/index.php?r=AppShop/cancelOrder",data:{order_id:t,sub_shop_app_id:a.data.franchiseeId},success:function(e){var t={};t["orderInfo.status"]="7",a.setData(t)}})}})},n.payOrder=function(e){var t=n,a=n.data.orderId;if(0==n.data.orderInfo.total_price)return void m.appMethod.sendRequest({url:"/index.php?r=AppShop/paygoods",data:{order_id:a,total_price:0},success:function(e){t.getOrderDetail(t.data.orderId)}});m.appMethod.goPay({orderId:a})},n.goToHomepage=function(){var e=m.appMethod.getHomepageRouter();m.appMethod.turnToPage("/pages/"+e+"/"+e,!0)},n.changeDiscount=function(e){var t=n,a=(t.data.orderInfo.can_use_benefit.selected_index,parseInt(e.detail.value));n.setData({index:a});var o=t.data.orderInfo.can_use_benefit.data[a].discount_type,i=t.data.orderInfo.can_use_benefit.data[a].coupon_id;m.appMethod.sendRequest({url:"/index.php?r=AppShop/ChangeOrder",data:{app_id:m.appMethod.getAppId(),order_id:t.data.orderId,discount_type:o,coupon_id:i,sub_shop_app_id:t.data.franchiseeId},success:function(e){t.getOrderDetail(t.data.orderId)}})},n.verificationCode=function(){m.appMethod.turnToPage("/eCommerce/pages/verificationCodePage/verificationCodePage?detail="+n.data.orderId+"&sub_shop_app_id="+n.data.franchiseeId)},n.toFixed2=function(e){return(+e).toFixed(2)},o=a,(0,l.default)(n,o)}return(0,u.default)(t,e),(0,r.default)(t,[{key:"componentWillMount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,p.getCurrentPageQueryParams)();this.setData({orderId:e.detail,isFromTemplateMsg:"template_msg"===e.from,franchiseeId:e.franchisee||""}),this.dataInitial()}},{key:"componentDidMount",value:function(){this.data.isFromBack?this.data.orderId&&this.getOrderDetail(this.data.orderId,1):this.setData({isFromBack:!0})}},{key:"render",value:function(){var e=this.state,t=e.orderInfo,a=e.combinationBenefit;return React.createElement("div",{className:"official-page transfer-order-detail"},React.createElement("div",{className:"transfer-wrap"},React.createElement("div",{className:"top-block"},"6"===t.status&&React.createElement("img",{className:"icon-img",src:"http://www.zhichiwangluo.com/zhichi_frontend/static/webapp/images/transfer/finish-icon.svg"}),("0"===t.status||"7"===t.status)&&React.createElement("img",{className:"icon-img",src:"http://www.zhichiwangluo.com/zhichi_frontend/static/webapp/images/transfer/no-finish-icon.svg"}),React.createElement("div",{className:"text"},"0"===t.status?"订单未完成":"6"===t.status?"订单已完成":"7"===t.status?"订单已关闭":""),React.createElement("img",{className:"bg-img",src:"http://www.zhichiwangluo.com/zhichi_frontend/static/webapp/images/transfer/wave.png"})),React.createElement("div",{className:"total-payment"},React.createElement("div",{className:"content"},React.createElement("div",{className:"text"},"实付金额"),React.createElement("div",{className:"price"},"¥"+t.total_price))),React.createElement("div",{className:"transfer-detail"},React.createElement("div",{className:"detail-item"},React.createElement("div",{className:"detail-text"},"消费金额"),React.createElement("div",{className:"detail-content"},"¥"+t.original_price)),t.store_benefit_info&&t.store_benefit_info.discount_price&&0!=t.store_benefit_info.discount_price&&React.createElement("div",{className:"detail-item"},React.createElement("div",{className:"detail-text"},"店铺满减"),React.createElement("div",{className:"detail-content"},"-¥"+t.store_benefit_info.discount_price)),t.selected_benefit_info&&("vip"===t.selected_benefit_info.discount_type||"paid_vip"===t.selected_benefit_info.discount_type||"vip_benefit_day"===t.selected_benefit_info.discount_type)&&t.selected_benefit_info.discount_cut_price&&0!=t.selected_benefit_info.discount_cut_price&&React.createElement("div",{className:"detail-item"},React.createElement("div",{className:"detail-text"},"会员卡优惠"),React.createElement("div",{className:"detail-content"},"-¥"+t.selected_benefit_info.discount_cut_price)),t.selected_benefit_info&&"coupon"===t.selected_benefit_info.discount_type&&t.selected_benefit_info.discount_cut_price&&0!=t.selected_benefit_info.discount_cut_price&&React.createElement("div",{className:"detail-item"},React.createElement("div",{className:"detail-text"},"券类优惠"),React.createElement("div",{className:"detail-content"},"-¥"+t.selected_benefit_info.discount_cut_price)),t.selected_benefit_info&&"integral"===t.selected_benefit_info.discount_type&&t.selected_benefit_info.discount_cut_price&&0!=t.selected_benefit_info.discount_cut_price&&React.createElement("div",{className:"detail-item"},React.createElement("div",{className:"detail-text"},"积分抵扣"),React.createElement("div",{className:"detail-content"},"-¥"+t.selected_benefit_info.discount_cut_price)),a.store_benefit&&a.store_benefit.discount_price&&0!=a.store_benefit.discount_price&&React.createElement("div",{className:"detail-item"},React.createElement("div",{className:"detail-text"},"店铺满减"),React.createElement("div",{className:"detail-content"},"-¥"+a.store_benefit.discount_price)),a.vip_benefit_discount_price&&0!=a.vip_benefit_discount_price&&React.createElement("div",{className:"detail-item"},React.createElement("div",{className:"detail-text"},"会员卡优惠"),React.createElement("div",{className:"detail-content"},"-¥"+a.vip_benefit_discount_price)),a.coupon_benefit_discount_price&&0!=a.coupon_benefit_discount_price&&React.createElement("div",{className:"detail-item"},React.createElement("div",{className:"detail-text"},"券类优惠"),React.createElement("div",{className:"detail-content"},"-¥"+a.coupon_benefit_discount_price)),a.integral_benefit&&a.integral_benefit.discount_price&&0!=a.integral_benefit.discount_price&&React.createElement("div",{className:"detail-item"},React.createElement("div",{className:"detail-text"},"积分抵扣"),React.createElement("div",{className:"detail-content"},"-¥"+a.integral_benefit.discount_price)),t.use_balance&&0!=t.use_balance&&React.createElement("div",{className:"detail-item"},React.createElement("div",{className:"detail-text"},"储值"),React.createElement("div",{className:"detail-content"},"-¥"+t.use_balance)),t.coupon_fee&&0!=t.coupon_fee&&React.createElement("div",{className:"detail-item"},React.createElement("div",{className:"detail-text"},"社交立减金"),React.createElement("div",{className:"detail-content"},"-¥"+t.coupon_fee))),t.remark&&React.createElement("div",{className:"remarks"},React.createElement("div",{className:"text"},"备注"),React.createElement("div",{className:"content"},t.remark)),"0"===t.status&&React.createElement("div",{className:"transfer-bottom-operation"},React.createElement("span",{className:"btn carry-btn",onClick:this.payOrder},"支付"),React.createElement("span",{className:"btn cancel-btn",onClick:this.cancelOrder},"取消支付"))))}}]),t}(g.default);t.default=h},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(9),i=n(o),s=a(0),r=n(s),c=a(3),l=n(c),d=a(1),u=n(d),m=a(2),p=n(m),f=a(5),g=a(6),h=a(7),v=n(h);a(448);var _=function(e){function t(e){(0,r.default)(this,t);var a=(0,u.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={totalPayment:"",payInfo:{},hideScratchCanvas:!0,isShowScratchBtn:"",scratchIsFail:!0,scratchIsPrize:!0,scratchIsDurMax:!1,scratchIsLimit:!1,scratchIsComfort:!0,scratchIsDegree:!1,scratchInfo:{},scratchTimes:0,scratchId:"",scratchIsScroll:!0,time_limit:"",scratchPrizeTitle:"",vipCardInfo:{isShow:!1},couponList:[{active_title:"领取后立即生效，",condition:"10.00",discount:"10.00",discount_type:"coupon",end_use_date:"9999-12-31",end_use_time:"23:59:00",expire_day_count:0,name:"满10减9.9",start_use_date:"1000-01-01",start_use_time:"00:00:00",title:"满10减9.9（满10.00减9.90）",type:"0",value:"9.90"}],benefitConfig:{},collectBenefitData:{},starData:[],payActivity:"",isShowVipCardDialog:!1,ifUserInfo:!1,userCityArr:["","",""],userInfo:{},isRecvVipCard:!1,transferConfig:{},appTitle:"",isGetPhoneNumber:!1,ifWxCoupon:!1,timestamp:"",signature:"",ifGetComfort:!1},a.orderId="",a.getTransferOrderConfig=function(){var e=a;f.appMethod.sendRequest({url:"/index.php?r=AppTransferOrder/GetTransferOrderConfig",method:"post",data:{sub_shop_app_id:e.data.franchisee},success:function(t){e.setData({transferConfig:t.data})}})},a.setPaySuccessBenefitConfig=function(e){var t=a,n="";Number(t.data.payInfo.total_price)+Number(t.data.payInfo.use_balance)<e.condition_price||("scratch_card"===e.type?t.activityInit():"vipcard_permission"===e.type?t.judgmentVipCard(e.vipcard_id):"coupon"===e.type?(t.setCouponInfo(e.coupon_id),n=e.type):"collectme"===e.type?t.checkAppCollectmeStatus():"balance"===e.type?(1==e.balance_type?e.balance=e.balance_value*a.data.totalPayment%1==0?e.balance_value*a.data.totalPayment:Math.floor(e.balance_value*a.data.totalPayment*100)/100:e.balance=e.balance_value,n=e.type):n=e.type,t.setData({benefitConfig:e,payActivity:n}))},a.activityInit=function(){var e=a;f.appMethod.isLogin()?e.getScratchData():f.appMethod.goLogin({success:function(){e.getScratchData()}})},a.getScratchData=function(){var e=a;f.appMethod.sendRequest({url:"/index.php?r=appLotteryActivity/getActivity",method:"post",data:{category:3},success:function(t){var a=t.data;e.scratchInit(),e.setData({scratchInfo:a,scratchId:a.id,scratchTimes:a.times,time_limit:a.time_limit})}})},a.scratchInit=function(){var e=a,t=f.appMethod.globalData.systemInfo,n=722*t.windowWidth/750,o=290*t.windowWidth/750;e.scratch=new Scratch(e,{canvasWidth:n,canvasHeight:o,imageResource:f.appMethod.getSiteBaseUrl()+"/index.php?r=Download/DownloadResourceFromUrl&url=https://chn.jisuapp.cn/static/webapp/images/scratchMovie.png",maskColor:"red",r:18,callback:function(){e.setData({hideScratchCanvas:!0}),e.data.ifWxCoupon&&setTimeout(function(){e.toAddCard()},500)},imgLoadCallback:function(){setTimeout(function(){e.setData({hideScratchCanvas:!1,isShowScratchBtn:!0,payActivity:e.data.benefitConfig.type})},10)}})},a.startScratch=function(){var e=a;if(e.data.scratchId)if(0==e.data.time_limit)e.setData({scratchIsLimit:!0,hideScratchCanvas:!0,isShowScratchBtn:!1});else if(console.log(e.data.scratchTimes),e.data.scratchTimes<=0)0==e.data.scratchInfo.time_share?e.setData({scratchIsDegree:!0,hideScratchCanvas:!0,isShowScratchBtn:!1}):e.setData({scratchIsDurMax:!0,hideScratchCanvas:!0,isShowScratchBtn:!1});else{if(e.scratchLoading)return!1;e.setData({isShowScratchBtn:!1}),e.scratchLoading=!0,e.getLottery()}},a.getLottery=function(){var e=a;f.appMethod.sendRequest({url:"/index.php?r=appLotteryActivity/lottery",method:"post",hideLoading:!0,data:{activity_id:e.data.scratchId,app_id:f.appMethod.globalData.appId},success:function(t){var a=t.data,n={};if(e.scratch.start(),"谢谢参与"==a.title)n={},n.scratchIsFail=!1,n.scratchTimes=a.time,n.time_limit=a.time_limit,e.setData(n);else{n={},1==a.is_comfort?n.scratchIsComfort=!1:(n.scratchIsPrize=!1,n.scratchPrizeTitle=a.title);var o=a.card_id||!1;n.ifWxCoupon=o,n.timestamp=a.timestamp||"",n.signature=a.signature||"",n.scratchTimes=a.time,n.time_limit=a.time_limit,e.setData(n)}e.scratchLoading=!1},successStatusAbnormal:function(t){e.scratchLoading=!1,1==t.status&&e.setData({isShowScratchBtn:!0})}})},a.failBtnClick=function(){var e=a;e.scratch.reset(),e.setData({hideScratchCanvas:!1,scratchIsFail:!0}),setTimeout(function(){e.setData({isShowScratchBtn:!0})},100)},a.winningBtnClick=function(){var e=a;e.scratch.reset(),e.setData({hideScratchCanvas:!1,scratchIsPrize:!0}),setTimeout(function(){e.setData({isShowScratchBtn:!0})},100)},a.comfortBtnClick=function(){var e=a;e.scratch.reset(),e.setData({hideScratchCanvas:!1,scratchIsComfort:!0}),setTimeout(function(){e.setData({isShowScratchBtn:!0})},100)},a.getGoldenData=function(e){var t=a;f.appMethod.sendRequest({url:"/index.php?r=appLotteryActivity/getTimeAfterConsume",method:"post",data:{order_id:e,sub_app_id:t.data.franchisee},success:function(e){e.integral&&t.setData({rewardPointObj:{showModal:!0,count:e.integral,callback:""}})}})},a.getOrderDetail=function(){var e=a;f.appMethod.getOrderDetail({data:{order_id:a.orderId},success:function(t){var a=t.data[0].form_data;e.setData({totalPayment:a.total_price,payInfo:a}),a.pay_success_benefit_info&&a.pay_success_benefit_info[0]&&0===a.pay_success_benefit_info[0].status&&e.setPaySuccessBenefitConfig(a.pay_success_benefit_info[0].benefit_info)}})},a.transferSuccessCallback=function(){var e=f.appMethod.getHomepageRouter();f.appMethod.turnToPage("/pages/"+e+"/"+e,!0)},a.goToOrderDetail=function(){var e=a.data.franchisee?"&franchisee="+a.data.franchisee:"";f.appMethod.turnToPage("/eCommerce/pages/transferOrderDetail/transferOrderDetail?detail="+a.orderId+e,1)},a.setCouponInfo=function(e){var t=a;f.appMethod.sendRequest({url:"/index.php?r=AppShop/GetCouponInfo",data:{coupon_id:e},hideLoading:!0,success:function(e){var a=[];a.push(e.data),t.setData({couponList:a})}})},a.recvCoupon=function(e){var t=e.currentTarget.dataset.couponid;f.appMethod.sendRequest({url:"/index.php?r=AppShop/recvCoupon",data:{coupon_id:t},hideLoading:!0,success:function(e){}})},a.checkAppCollectmeStatus=function(){var e=a;f.appMethod.sendRequest({url:"/index.php?r=AppMarketing/CheckAppCollectmeStatus",data:{order_id:e.orderId},success:function(t){1!==t.valid&&e.getCollectBenefitData(e.orderId)}})},a.getCollectBenefitData=function(e){var t=a;f.appMethod.sendRequest({url:"/index.php?r=AppMarketing/CollectmeSendCoupon",data:{order_id:e},hideLoading:!0,success:function(e){for(var a=[],n=0;n<e.data.star_num;n++)a.push("light");for(var o=0;o<e.data.collect_num-e.data.star_num;o++)a.push("dark");t.setData({collectBenefitData:e.data,starData:a,payActivity:t.data.benefitConfig.type})}})},a.goToWheelDetail=function(){var e=a.data.franchisee?"?franchisee="+a.data.franchisee:"";f.appMethod.turnToPage("/awardManagement/pages/luckyWheelDetail/luckyWheelDetail"+e,1)},a.goToGoldenEggs=function(){var e=a.data.franchisee?"?franchisee="+a.data.franchisee:"";f.appMethod.turnToPage("/awardManagement/pages/goldenEggs/goldenEggs"+e,1)},a.touchStart=function(e){if(a.isStart){var t=a.drawRect(e.touches[0].x,e.touches[0].y);a.ctx.clearRect(t[0],t[1],t[2],t[2]),a.ctx.draw(!0)}},a.touchMove=function(e){if(console.log(e),a.isStart){var t=a.drawRect(e.touches[0].x,e.touches[0].y);a.ctx.clearRect(t[0],t[1],t[2],t[2]),a.ctx.draw(!0)}},a.touchEnd=function(e){if(console.log(e),a.isStart){var t=a.canvasWidth,n=a.canvasHeight,o=a.minX,i=a.minY,s=a.maxX,r=a.maxY;s-o>.5*t&&r-i>.5*n&&(a.ctx.draw(),a.endCallBack&&a.endCallBack(),a.isStart=!1,a.page.setData({scratchIsScroll:!0}))}},a.goToUserCenter=function(){var e=f.appMethod.getHomepageRouter();f.appMethod.turnToPage("/pages/"+e+"/"+e,!0)},a.judgmentVipCard=function(e){var t=a;a.getEnableVipCardList(e,function(){f.appMethod.sendRequest({url:"/index.php?r=AppShop/GetVIPCardInfo",data:{vip_id:e},success:function(e){var a=e.data[0];t.getUserVipLevel(a)}})})},a.getUserVipLevel=function(e){var t=a;f.appMethod.sendRequest({url:"/index.php?r=AppShop/GetVIPInfo",data:{},success:function(a){var n=a.data.level?a.data.level:0,o=a.data.vip_id?a.data.vip_id:0;n<=+e.level&&o!==e.id&&(e.isShow=!0,t.setData({vipCardInfo:e,payActivity:t.data.benefitConfig.type}))}})},a.getEnableVipCardList=function(e,t){var n=a;f.appMethod.sendRequest({url:"/index.php?r=AppVipCard/GetEnableVipCardList",data:{sub_shop_app_id:n.data.franchisee},success:function(a){a.data.map(function(a){a.id===e&&t()})}})},a.handleVipCard=function(){a.getCollectUserinfoConfig(function(){f.appMethod.turnToPage("/pages/userCenter/userCenter?card_id="+a.data.vipCardInfo.id+"&is_no_condition_recv=1&franchisee="+a.data.franchisee)})},a.recvVipCard=function(){var e=a;f.appMethod.sendRequest({data:{vipcard_id:e.data.vipCardInfo.id,sub_shop_app_id:e.data.franchisee},url:"/index.php?r=AppVipCard/RecvVipCard",hideLoading:!0,success:function(e){f.appMethod.showToast({title:"开卡成功",icon:"success"})}})},a.saveUserInfo=function(){var e=a.data.userInfo,t=a,n=a.data.userInfoCollectConfig,o={};if("China"===e.country&&(e.country="中国"),e.province=a.data.userCityArr[0],e.city=a.data.userCityArr[1],1==n.collect_username&&""===e.nickname||1==n.collect_phone&&!e.phone||1==n.collect_birthday&&""===e.birthday||1==n.collect_region&&(""===e.province||""===e.city))return void f.appMethod.showModal({content:"请填写完整的会员信息"});o.nickname=e.nickname,o.phone=e.phone,o.birthday=e.birthday,o.country=e.country,o.province=e.province,o.city=e.city,f.appMethod.sendRequest({url:"/index.php?r=AppData/saveUserInfo",method:"post",data:o,success:function(a){0===a.status&&(f.appMethod.setUserInfoStorage(e),t.recvVipCard())}})},a.getCollectUserinfoConfig=function(e){var t=a;JSON.parse(JSON.stringify(f.appMethod.getUserInfo()));f.appMethod.sendRequest({data:{},url:"/index.php?r=AppVipCard/GetCollectUserinfoConfig",hideLoading:!0,success:function(a){a.data.need_collect_info?e():t.recvVipCard()}})},a.closeVipCardDialog=function(e){"shadow"===e.target.dataset.type&&a.setData({isShowVipCardDialog:!1})},a.getAppShopByPage=function(){var e=a,t=a.data.franchisee;f.appMethod.sendRequest({url:"/index.php?r=AppShop/GetAppShopByPage",data:{sub_shop_app_id:t},success:function(t){var a={},n=t.data[0];a.appTitle=n.name,e.setData(a)}})},a.getPhoneNumber=function(e){if(!a.data.isGetPhoneNumber||11!==userInfo.phone.length){var t=a;f.appMethod.checkSession(function(){e.detail.encryptedData&&f.appMethod.sendRequest({hideLoading:!0,url:"/index.php?r=AppUser/GetPhoneNumber",data:{encryptedData:e.detail.encryptedData||"",iv:e.detail.iv||""},success:function(e){f.appMethod.setUserInfoStorage({phone:e.data}),t.setData({"userInfo.phone":e.data,isGetPhoneNumber:!0})},successStatus5:function(){f.appMethod.goLogin({success:function(){f.appMethod.showModal({content:"获取手机号失败，请再次点击授权获取"})},fail:function(){f.appMethod.showModal({content:"获取手机号失败，请再次点击授权获取"})}})}})})}},a.inputUserInfo=function(e){var t={};"name"===e.currentTarget.dataset.type?t={"userInfo.name":e.detail.value}:"phone"===e.currentTarget.dataset.type&&(t={"userInfo.phone":e.detail.value}),a.setData(t)},a.bindBirthdayChange=function(e){a.setData({"userInfo.birthday":e.detail.value})},a.bindCityChange=function(e){a.setData({userCityArr:e.detail.value})},a.toAddCard=function(){var e=a.data,t=e.ifWxCoupon,n=a;f.appMethod.addCard({cardList:[{cardId:t,cardExt:'{"nonce_str":"'+e.timestamp+'","timestamp":"'+e.timestamp+'", "signature":"'+e.signature+'"}'}],success:function(t){n.setData({ifWxCoupon:!1,ifGetComfort:!0}),f.appMethod.sendRequest({url:"/index.php?r=appLotteryActivity/recvWeChatCoupon",data:{card_id:t.cardList[0].cardId,sub_app_id:e.franchisee,activity_id:e.scratchId},success:function(e){f.appMethod.showModal({title:"提示",content:"领取卡券成功",showCancel:!1})}})}})},a.shadeClose=function(e){var t=a,n=e.currentTarget.dataset.type;f.appMethod.showModal({title:"提示",content:"微信优惠券不领取到卡包，下次就不能再领取了哦，确定放弃优惠么？",showCancel:!0,confirm:function(e){t.setData({ifWxCoupon:!1,ifGetComfort:!1}),1==n?t.winningBtnClick():2==n&&t.comfortBtnClick()}})},a.config={navigationBarTitleText:"支付成功"},document.title="交易成功",a}return(0,p.default)(t,e),(0,l.default)(t,[{key:"componentWillMount",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,g.getCurrentPageQueryParams)(),a=t.franchisee||"",n=a?"":f.appMethod.getAppTitle();this.setData({appTitle:n,franchisee:a}),a&&this.getAppShopByPage(),this.orderId=t.detail||"",this.getTransferOrderConfig(),this.getGoldenData(t.detail),setTimeout(function(){e.getOrderDetail()})}},{key:"render",value:function(){var e=this.state,t=e.appTitle,a=e.totalPayment,n=e.payInfo,o=(e.transferConfig,e.benefitConfig),s=e.vipCardInfo,r=e.payActivity,c=e.collectBenefitData,l=e.starData,d=e.couponList,u=e.isRecvVipCard,m=e.scratchIsFail,p=e.scratchIsPrize,f=e.scratchPrizeTitle,h=e.ifWxCoupon,v=e.scratchIsDurMax,_=e.scratchIsLimit,y=e.scratchIsComfort,E=e.ifGetComfort,b=e.scratchIsDegree,N=e.hideScratchCanvas,R=e.scratch,k=e.scratchIsScroll,w=e.isShowScratchBtn;return React.createElement("div",{className:"official-page transfer-pay-success"},React.createElement("div",null,React.createElement("div",{className:"top-block"},React.createElement("div",{className:"success-block"}),React.createElement("div",{className:"transfer-mess"},React.createElement("div",{className:"beneficiary"},t),React.createElement("div",{className:"price-block"},"¥",React.createElement("span",{className:"actually-price"},a),React.createElement("span",{className:"original-price"},"¥"+n.original_price))),React.createElement("div",{className:"discount-wrapper"},n.discount_cut_price&&"0.00"!==n.discount_cut_price&&React.createElement("div",{className:"discount-item"},React.createElement("span",null,"优惠金额"),React.createElement("span",null,"-¥"+n.discount_cut_price)),!!+n.use_balance&&"0.00"!==n.use_balance&&React.createElement("div",{className:"discount-item"},React.createElement("span",null,"储值抵扣"),React.createElement("span",null,"-¥"+n.use_balance)),n.send_integral_info&&!!+n.send_integral_info.consume_send_integral&&React.createElement("div",{className:"discount-item"},React.createElement("span",null,"获得积分"),React.createElement("span",{className:"count"},"+"+n.send_integral_info.consume_send_integral))),React.createElement("div",{className:"btn-wrapper"},React.createElement("div",{className:"btn ok-btn",onClick:this.transferSuccessCallback},"完成"),React.createElement("div",{className:"btn view-btn",onClick:this.goToOrderDetail},"查看订单"))),r&&React.createElement("div",{className:"activity"},React.createElement("div",{className:"copyWriting"},React.createElement("div",{className:"line"}),React.createElement("span",{className:"text"},"活动")),("coupon"===o.type||"vipcard_permission"===o.type&&s.isShow||"integral"===o.type||"balance"===o.type||"lucky_wheel"===o.type||"golden_eggs"===o.type)&&React.createElement("div",{className:"get-reward-text"},"本次交易获得"+("coupon"===o.type?"优惠券":"vipcard_permission"===o.type?"会员卡":"integral"===o.type?"积分":"balance"===o.type?"储值金":"lucky_wheel"===o.type?"大转盘":"golden_eggs"===o.type?"砸金蛋":"")+"奖励"),"collectme"===r&&React.createElement("div",{className:"collect"},React.createElement("div",{className:"text"},"集集乐个数: "+c.star_num),React.createElement("div",{className:"star-block "+(l&&6===l.length?"star-six":"")},l.map(function(e,t){return React.createElement(React.Fragment,{key:!0},"light"==e?React.createElement("img",{className:"star",src:"http://www.zhichiwangluo.com/zhichi_frontend/static/webapp/images/transfer/start@2x.png"}):"dark"==e&&React.createElement("img",{className:"star",src:"http://www.zhichiwangluo.com/zhichi_frontend/static/webapp/images/transfer/star-empty@2x.png"}))})),c.star_num==c.collect_num&&React.createElement("div",{className:"star-full"},React.createElement("div",{className:"star-full-text"},"满")),React.createElement("div",{className:"about"},"消费满"+c.value+"元，累计一颗心，积满可获得优惠券"+c.coupon_title+"一张")),"coupon"===r&&React.createElement("div",{className:"coupon"},d.map(function(e,t){return React.createElement("div",{className:"coupon-item",key:e.id},React.createElement("div",{className:"info"},React.createElement("div",{className:"coupon-title"},e.title),0==e.type&&React.createElement("div",{className:"use-condition"},"使用条件：满"+e.condition+"元，减"+e.value+"元"),1==e.type&&React.createElement("div",{className:"use-condition"},"使用条件: 打"+e.value+"折"),2==e.type&&React.createElement("div",{className:"use-condition"},"使用条件：可抵扣"+e.value+"元"),3==e.type&&React.createElement("div",{className:"use-condition"},""==e.extra_condition?React.createElement("span",null,"使用条件: 直接兑换"+e.coupon_goods_info.title):e.extra_condition.price?React.createElement("span",null,"使用条件: 消费满"+e.extra_condition.price+"元可兑换"+e.coupon_goods_info.title):e.extra_condition.goods_id&&React.createElement("span",null,"使用条件: 购买"+e.condition_goods_info.title+"可兑换"+e.coupon_goods_info.title)),4==e.type&&React.createElement("div",{className:"use-condition"},"使用条件: 储值金可充值"+e.value+"元"),5==e.type&&React.createElement("div",{className:"use-condition"},"使用条件: "+e.extra_condition),1===d.length&&React.createElement("div",{className:"pending-btn2","data-couponId":e.id},"已领取")),React.createElement("div",{className:"background-word-area"},React.createElement("div",{className:"background-circle"}),0==e.type&&React.createElement("div",{className:"background-word"},"减"),1==e.type&&React.createElement("div",{className:"background-word"},"折"),2==e.type&&React.createElement("div",{className:"background-word"},"代"),3==e.type&&React.createElement("div",{className:"background-word"},"兑"),4==e.type&&React.createElement("div",{className:"background-word"},"储"),5==e.type&&React.createElement("div",{className:"background-word"},"通")))})),"vipcard_permission"===r&&s.isShow&&React.createElement("div",{className:"vip-card",style:(0,g.convertLineStyleData)("background-image: url(http://www.zhichiwangluo.com/zhichi_frontend/static/webapp/images/transfer/vip-card-default.png)")},React.createElement("img",{className:"card-img",src:s.logo?s.logo:"http://www.zhichiwangluo.com/zhichi_frontend/static/webapp/images/transfer/default-vip-card-logo.png"}),React.createElement("div",{className:"card-info"},React.createElement("div",{className:"card-name"},s.app_name+" "+s.title),0!=s.discount?React.createElement("div",{className:"card-mess"},"开卡可享 "+s.discount+"折"):s.coupon_list&&""!=s.coupon_list?React.createElement("div",{className:"card-mess"},"开卡可享 赠送优惠券"):0!=s.integral&&React.createElement("div",{className:"card-mess"},"开卡可享 赠送"+s.integral+"积分")),!u&&React.createElement("div",{className:"card-btn",onClick:this.handleVipCard},"立即开卡"),u&&React.createElement("div",{className:"card-btn",onClick:this.goToUserCenter},"立即使用")),"integral"===r&&React.createElement("div",{className:"integral"},React.createElement("div",{className:"integral-block"},React.createElement("div",{className:"text"},"获得额外积分"),React.createElement("div",{className:"num"},"+"+n.send_integral_info.pay_success_benefit_send_integral))),"balance"===r&&React.createElement("div",{className:"recharge"},React.createElement("div",{className:"recharge-block"},React.createElement("div",{className:"text"},"获得额外储值金"),React.createElement("div",{className:"num"},"+"+o.balance))),"lucky_wheel"===r&&React.createElement("div",{className:"turntable",onClick:this.goToWheelDetail},React.createElement("div",{className:"tip"},"立即前往")),"golden_eggs"===r&&React.createElement("div",{className:"gold-egg",onClick:this.goToGoldenEggs},React.createElement("div",{className:"tip"},"立即前往")),"scratch_card"===r&&React.createElement("div",{id:"scratch"},React.createElement("div",{className:"scratchFail",hidden:m},React.createElement("img",{src:"http://www.zhichiwangluo.com/static/webapp/images/transfer/scratch-bg.png"}),React.createElement("div",{className:"failTitle"},React.createElement("div",{className:"failText"},"很遗憾没有中奖哦"),React.createElement("div",{className:"failBtn",onClick:this.failBtnClick},"再来一次"))),React.createElement("div",{className:"scratchWinning",hidden:p},React.createElement("img",{src:"http://www.zhichiwangluo.com/static/webapp/images/transfer/scratch-bg2.png"}),React.createElement("div",{className:"winningTitle"},React.createElement("div",{className:"winningText"},"恭喜你获得了"),React.createElement("div",{className:"winningText winningValue"},f),h?React.createElement("div",{className:"btnGroup"},React.createElement("div",{className:"winningBtn",onClick:this.toAddCard},"立即领取"),React.createElement("div",{className:"winningBtn",onClick:this.shadeClose,"data-type":"1"},"再来一次")):React.createElement("div",{className:"winningBtn",onClick:this.winningBtnClick},"再来一次"))),React.createElement("div",{className:"scratchDurMax",hidden:!v},React.createElement("img",{src:"http://www.zhichiwangluo.com/static/webapp/images/transfer/scratch-bg.png"}),React.createElement("div",{className:"durMaxTitle"},React.createElement("div",{className:"durMaxText"},"对不起，您的刮奖次数不足，"),React.createElement("div",{className:"durMaxText"},"分享即可获取次数哦~"))),React.createElement("div",{className:"scratchLimit",hidden:!_},React.createElement("img",{src:"http://www.zhichiwangluo.com/static/webapp/images/transfer/scratch-bg.png"}),React.createElement("div",{className:"limitTitle"},React.createElement("div",{className:"limitText"},"今日刮奖次数已达到上限，"),React.createElement("div",{className:"limitText"},"明日可继续参与刮奖哦~"))),React.createElement("div",{className:"scratchComfort",hidden:y},React.createElement("img",{src:"http://www.zhichiwangluo.com/static/webapp/images/transfer/scratch-bg2.png"}),React.createElement("div",{className:"comfortTitle"},E?React.createElement("div",{className:"comfortText"},"已领取，在微信卡包中查看哦~"):React.createElement("div",(0,i.default)({className:"comfortText"},"className","comfortText"),"又没中奖，送你一个小礼品"),!h&&!E&&React.createElement("div",{className:"comfortText"},">在优惠券卡包进行查收哦~"),h?React.createElement("div",{className:"btnGroup"},React.createElement("div",{className:"comfortBtn",onClick:this.toAddCard},"立即领取"),React.createElement("div",{className:"comfortBtn",onClick:this.shadeClose,"data-type":"2"},"知道了")):React.createElement(React.Fragment,null,!E&&React.createElement("div",{className:"comfortText"},"在优惠券卡包进行查收哦~"),React.createElement("div",{className:"comfortBtn",onClick:this.comfortBtnClick},"知道了")))),React.createElement("div",{className:"scratchDegree",hidden:!b},React.createElement("img",{src:"http://www.zhichiwangluo.com/static/webapp/images/transfer/scratch-bg.png"}),React.createElement("div",{className:"degreeTitle"},React.createElement("div",{className:"degreeText"},"对不起，您本次获取的刮奖次数不足"))),React.createElement("div",{hidden:N,className:"scratch_wp",style:(0,g.convertLineStyleData)("width: "+R.width+"px; height: "+R.height+"px;")},React.createElement(Canvas,{className:"scratch-canvas",style:(0,g.convertLineStyleData)("width: "+R.width+"px; height: "+R.height+"px;"),canvasId:"scratch",onTouchStart:this.touchStart,onTouchMove:this.touchMove,onTouchEnd:this.touchEnd,disableScroll:!k},w&&React.createElement(CoverView,{className:"showArea"},React.createElement(CoverView,{className:"showTitle"},"赢取优惠大奖"),React.createElement(CoverView,{className:"showBtn",onClick:this.startScratch},"点我刮奖"))))))))}}]),t}(v.default);t.default=_},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(0),i=n(o),s=a(3),r=n(s),c=a(1),l=n(c),d=a(2),u=n(d),m=a(5),p=a(6),f=a(11),g=a(7),h=n(g);a(450);var v=function(e){function t(e){(0,i.default)(this,t);var a=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={list:[],param:{page:1,page_size:5,is_leader_order:1,current_status:0},isLeader:1,status:0,noMore:!1},a.getMyGroupBuy=function(){var e=a;m.appMethod.sendRequest({url:"/index.php?r=AppGroupBuy/MyGroupBuy",data:e.data.param,success:function(t){e.setData({list:t.data})}})},a.onShareAppMessage=function(e){var t=a,n="/pages/myGroup/myGroup",o="",i="";if("button"==e.from){var s=e.target.dataset.index,r=a.data.list[s],c=r.form_data.group_buy_order_info,l=r.team_token,d=r.form_data.goods_info[0],u=r.app_id==m.appMethod.getAppId()?"":"&franchisee="+r.app_id;n="/joinGroupDetail?detail="+c.goods_id+"&teamToken="+l+u+(m.appMethod.globalData.pageShareKey?"&psid="+m.appMethod.globalData.pageShareKey:""),o=m.appMethod.getUserInfo("nickname")+" 喊你拼单啦~ "+d.price+"元拼"+d.goods_name+"，火爆抢购中......",i="https://www.zhichiwangluo.com/zhichi_frontend/static/webapp/images/group_goods_share.jpeg"}return m.appMethod.shareAppMessage({title:o,path:n,imageUrl:i,success:function(e){m.appMethod.sendRequest({hideLoading:!0,url:"/index.php?r=appShop/getIntegralLog",data:{add_time:e},success:function(e){0==e.status&&e.data&&t.setData({rewardPointObj:{showModal:!0,count:e.data,callback:""}})}})}})},a.getGroupOrders=function(e){a.setData({isLeader:e.currentTarget.dataset.status}),a.setData({"param.page":1,"param.current_status":0,"param.is_leader_order":e.currentTarget.dataset.status}),a.setData({status:0,noMore:!1});var t=a;m.appMethod.sendRequest({url:"/index.php?r=AppGroupBuy/MyGroupBuy",data:t.data.param,success:function(e){t.setData({list:e.data})}})},a.getGroupOrderByStatus=function(e){a.setData({"param.page":1,"param.current_status":e.currentTarget.dataset.status}),a.setData({status:e.currentTarget.dataset.status});var t=a;m.appMethod.sendRequest({url:"/index.php?r=AppGroupBuy/MyGroupBuy",data:t.data.param,success:function(e){t.setData({list:e.data})}})},a.turnToDetail=function(e){var t=e.currentTarget.dataset.orderid,a=e.currentTarget.dataset.franchisee,n=a===m.appMethod.getAppId()?"":"&franchisee="+a;m.appMethod.turnToPage("/eCommerce/pages/groupOrderDetail/groupOrderDetail?id="+t+n)},a.getMore=function(e){if(console.warn("more"),e.target.dataset.page===a.data.param.page&&!a.data.noMore){var t=a;a.data.param.page=e.target.dataset.page+1,m.appMethod.sendRequest({url:"/index.php?r=AppGroupBuy/MyGroupBuy",data:t.data.param,success:function(e){if(0==e.is_more&&t.setData({noMore:!0}),0!=e.data.length){var a=t.data.list.concat(e.data);t.setData({list:a}),t.setData({"param.page":t.data.param.page})}}})}},a.retrieveMoney=function(e){var t=a,n=e.currentTarget.dataset.franchisee;n=n===m.appMethod.getAppId()?"":n,m.appMethod.sendRequest({url:"/index.php?r=AppShop/ComfirmRefund",data:{order_id:e.target.dataset.id,sub_shop_app_id:n},success:function(e){0===e.status&&(m.appMethod.showToast({title:"确认成功"}),t.componentWillMount())}})},a.onceMore=function(e){var t=e.currentTarget.dataset.id,a=e.currentTarget.dataset.franchisee,n=a===m.appMethod.getAppId()?"":"&franchisee="+a;m.appMethod.turnToPage("/pages/groupGoodsDetail/groupGoodsDetail?detail="+t+n)},a.pay=function(e){var t=e.currentTarget.dataset.franchisee;t=t===m.appMethod.getAppId()?"":t;var a=t?"":"&franchisee="+t;m.appMethod.goPay({orderId:e.target.dataset.id,franchisee:t,successUrl:"/groupOrderDetail?id="+orderId+a})},a.goToOrderDetail=function(){m.appMethod.turnToPage("/eCommerce/pages/myOrder/myOrder")},a.cancelOrder=function(e){var t=a,n=e.currentTarget.dataset.franchisee;n=n===m.appMethod.getAppId()?"":n,m.appMethod.showModal({content:"是否取消拼团？",showCancel:!0,confirmText:"是",cancelText:"否",confirm:function(){m.appMethod.sendRequest({url:"/index.php?r=AppShop/CancelOrder",data:{order_id:e.target.dataset.id,sub_app_id:n},success:function(e){console.log(e),t.componentWillMount()}})}})},document.title="我的拼团",a}return(0,u.default)(t,e),(0,r.default)(t,[{key:"componentWillMount",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,p.getCurrentPageQueryParams)(),this);m.appMethod.globalData.myGroupRefresh=!1,e.getMyGroupBuy()}},{key:"componentDidMount",value:function(){m.appMethod.globalData.myGroupRefresh&&(this.setData({param:{page:1,page_size:5,is_leader_order:1,current_status:0}}),this.getMyGroupBuy(),m.appMethod.globalData.myGroupRefresh=!1)}},{key:"render",value:function(){var e=this,t=this.state,a=t.isLeader,n=t.status,o=t.param,i=t.list;return React.createElement("div",{className:"official-page my-group"},React.createElement("div",{className:"wrap"},React.createElement("div",{className:"tabs"},React.createElement("div",{className:"content "+(1==a?" active-tab":""),"data-status":"1",onClick:this.getGroupOrders},"我发起的团"),React.createElement("div",{className:"content "+(0==a?" active-tab":""),"data-status":"0",onClick:this.getGroupOrders},"我参与的团")),React.createElement(f.ScrollView,{className:"sub-tabs","scroll-x":"true"},React.createElement("div",{className:"status "+(0==n?" active-sub-tab":""),"data-status":"0",onClick:this.getGroupOrderByStatus},"全部"),React.createElement("div",{className:"status "+(1==n?" active-sub-tab":""),"data-status":"1",hidden:0==a,onClick:this.getGroupOrderByStatus},"未开团"),React.createElement("div",{className:"status "+(2==n?" active-sub-tab":""),"data-status":"2",onClick:this.getGroupOrderByStatus},"拼团中"),React.createElement("div",{className:"status "+(3==n?" active-sub-tab":""),"data-status":"3",onClick:this.getGroupOrderByStatus},"拼团成功"),React.createElement("div",{className:"status "+(4==n?" active-sub-tab":""),"data-status":"4",onClick:this.getGroupOrderByStatus},"拼团失败"),React.createElement("div",{className:"status "+(5==n?" active-sub-tab":""),"data-status":"5",onClick:this.getGroupOrderByStatus},"已关闭")),React.createElement(f.ScrollView,{className:"list","scroll-y":"true","data-page":o.page,bindscrolltolower:this.getMore,"enable-back-to-top":"true"},i.map(function(t,a){return React.createElement("div",{className:"orders",key:!0},React.createElement("div",{className:"head"},React.createElement("div",{className:"order-time"},"下单时间:"+t.add_time),React.createElement("div",{className:"order-status",hidden:!(1==t.form_data.group_buy_order_info.current_status)},"未开团"),React.createElement("div",{className:"order-status",hidden:!(2==t.form_data.group_buy_order_info.current_status)},"拼团中"),React.createElement("div",{className:"order-status",hidden:!(3==t.form_data.group_buy_order_info.current_status)},"拼团成功"),React.createElement("div",{className:"order-status",hidden:!(4==t.form_data.group_buy_order_info.current_status)},"拼团失败"),React.createElement("div",{className:"order-status",hidden:!(5==t.form_data.group_buy_order_info.current_status)},"已关闭")),React.createElement("div",{className:"goods-detail","data-orderid":t.order_id,"data-franchisee":t.app_id,onClick:e.turnToDetail},React.createElement("div",{className:"goods-wrap"},React.createElement("img",{src:t.form_data.goods_info[0].cover}),React.createElement("div",{className:"middle"},React.createElement("div",{className:"goods-name"},t.form_data.goods_info[0].goods_name),React.createElement("div",{className:"goods-spec"},t.form_data.goods_info[0].model_value)),React.createElement("div",{className:"price"},React.createElement("div",{className:"pay-price"},"¥"+t.form_data.goods_info[0].price),React.createElement("div",{className:"origin-price"},"¥"+t.form_data.original_price),React.createElement("div",{className:"num"},"x"+t.form_data.goods_info[0].num))),React.createElement("div",{className:"group-info"},React.createElement("div",{className:"info"},"团长昵称："+t.form_data.group_buy_order_info.leader_username),React.createElement("div",{className:"info"},"拼团进度："+t.form_data.group_buy_order_info.max_user_num+"人团|已拼"+t.form_data.group_buy_order_info.current_user_count+"人，还差"+(t.form_data.group_buy_order_info.max_user_num-t.form_data.group_buy_order_info.current_user_count)+"人成团"),React.createElement("div",{className:"info "+(1==t.form_data.group_buy_order_info.current_status||5==t.form_data.group_buy_order_info.current_status?"hide":"")},"结束时间："+t.form_data.group_buy_order_info.expired_time))),React.createElement("div",{className:"order-info"},"共"+t.form_data.goods_info[0].num+"件商品 合计：¥",React.createElement("span",{style:(0,p.convertLineStyleData)("font-size:30rpx;")},t.total_price),"(含运费¥"+t.express_fee+")"),React.createElement("div",{className:"order-btn",hidden:!(1==t.form_data.group_buy_order_info.current_status)},React.createElement("div",{className:"group-btn white","data-id":t.order_id,"data-franchisee":t.app_id,onClick:e.cancelOrder},"取消拼团"),React.createElement("div",{className:"group-btn red","data-id":t.order_id,"data-type":t.goods_type,"data-franchisee":t.app_id,onClick:e.pay},"立即支付")),React.createElement("div",{className:"order-btn",hidden:!(2==t.form_data.group_buy_order_info.current_status)},React.createElement("button",{openType:"share",className:"group-btn red","data-detail":t.form_data.goods_info[0].goods_id,"data-franchisee":t.app_id,"data-index":a},"分享")),React.createElement("div",{className:"order-btn",hidden:!(3==t.form_data.group_buy_order_info.current_status)},React.createElement("div",{className:"group-btn white","data-franchisee":t.app_id,onClick:e.goToOrderDetail},"查看订单"),React.createElement("div",{className:"group-btn yellow","data-id":t.form_data.goods_info[0].goods_id,"data-franchisee":t.app_id,onClick:e.onceMore},"再拼一次")),React.createElement("div",{className:"order-btn",hidden:!(4==t.form_data.group_buy_order_info.current_status)},React.createElement("div",{className:"group-btn white","data-id":t.order_id,"data-franchisee":t.app_id,onClick:e.retrieveMoney},"已收到退款"),React.createElement("div",{className:"group-btn yellow","data-id":t.form_data.goods_info[0].goods_id,"data-franchisee":t.app_id,onClick:e.onceMore},"再拼一次")),React.createElement("div",{className:"order-btn",hidden:!(5==t.form_data.group_buy_order_info.current_status)},React.createElement("div",{className:"group-btn yellow","data-id":t.form_data.goods_info[0].goods_id,"data-franchisee":t.app_id,onClick:e.onceMore},"再拼一次")))}),React.createElement("div",{className:"no-more"},"没有更多数据了~"))))}}]),t}(h.default);t.default=v},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(31),i=n(o),s=a(17),r=n(s),c=a(0),l=n(c),d=a(3),u=n(d),m=a(1),p=n(m),f=a(2),g=n(f);a(32),a(16);var h=a(5),v=a(6),_=a(7),y=n(_);a(452);var E=function(e){function t(e){(0,l.default)(this,t);var a=(0,p.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={goodsList:[],selectAddress:{},appointment_user_name:"",appointment_user_phone:"",discountList:[],selectDiscountInfo:{},selectDiscountIndex:"",orderRemark:"",is_self_delivery:0,express_fee:"",balance:"",useBalance:!0,deduction:"",discount_cut_price:"",original_price:"",totalPayment:"",shopAddress:"",noAdditionalInfo:!0,is_group:"",to_store:"",exchangeCouponData:{dialogHidden:!0,goodsInfo:{},selectModelInfo:{},hasSelectGoods:!1,voucher_coupon_goods_info:{}}},a.isFromSelectAddress=!1,a.hasRequiredSuppInfo=!1,a.franchisee_id="",a.cart_id_arr=[],a.cart_data_arr=[],a.requesting=!1,a.additional_info={},a.is_group="",a.dataInitial=function(){a.getCalculationInfo(),a.getShopAddress(),a.getCartList()},a.getCartList=function(){var e=a,t=a.franchisee_id;h.appMethod.sendRequest({url:"/index.php?r=AppShop/cartList",data:{page:1,page_size:100,sub_shop_app_id:t,parent_shop_app_id:t?h.appMethod.globalData.appId:""},success:function(t){var a,n,o,i,s=[];if(e.cart_id_arr.length)for(var r=0;r<=t.data.length-1;r++)e.cart_id_arr.indexOf(t.data[r].id)>=0&&s.push(t.data[r]);else s=t.data;for(var r=0;r<=s.length-1;r++){var c=s[r],l=c.model_value;c.model_value_str=l&&l.join?"("+l.join("|")+")":"",e.cart_data_arr.push({cart_id:c.id,goods_id:c.goods_id,model_id:c.model_id,num:c.num})}a={month:s[0].appointment_start.substring(4,6),day:s[0].appointment_start.substring(6,8),hours:s[0].appointment_start.substring(8)},n={month:s[0].appointment_end.substring(4,6),day:s[0].appointment_end.substring(6,8),hours:s[0].appointment_end.substring(8)},i=n.day>a.day||n.month>a.month?n.month+"月"+n.day+"日":"当日",o=a.month+"月"+a.day+"日 "+a.hours+" - "+i+n.hours,e.setData({goodsList:s,service_period:o})}})},a.getCalculationInfo=function(){var e=a;h.appMethod.sendRequest({url:"/index.php?r=AppShop/calculationPrice",method:"post",data:{sub_shop_app_id:a.franchisee_id,address_id:a.data.selectAddress.id,cart_id_arr:a.cart_id_arr,is_balance:a.data.useBalance?1:0,is_self_delivery:a.data.is_self_delivery,selected_benefit:a.data.selectDiscountInfo,voucher_coupon_goods_info:a.data.exchangeCouponData.voucher_coupon_goods_info},success:function(t){var a,n,o=t.data,i=o.can_use_benefit.data,s=o.goods_info,r=s[0].appointment_info.need_user_address,c=[],l=[],d=[];if(i&&i.length&&i.unshift({title:"不使用优惠",name:"无",no_use_benefit:1}),e.data.selectDiscountInfo&&1==e.data.selectDiscountInfo.no_use_benefit)n=e.data.selectDiscountInfo,a=0;else if((n=o.selected_benefit_info)&&n.discount_type){for(var u=0;u<=i.length-1;u++)if(n.discount_type===i[u].discount_type){if("coupon"!==n.discount_type){a=u;break}if(n.coupon_id===i[u].coupon_id){a=u;break}}"coupon"==n.discount_type&&3==n.type&&0==e.data.exchangeCouponData.hasSelectGoods&&e.exchangeCouponInit(parseInt(n.value))}for(var u=0;u<=s.length-1;u++)s[u].delivery_id&&0!=s[u].delivery_id&&-1==l.indexOf(s[u].id)&&(d.push(s[u].delivery_id),l.push(s[u].id),c.push(s[u]));e.setData({selectAddress:o.address||{},discountList:i||[],selectDiscountIndex:a||"",selectDiscountInfo:n||"",express_fee:o.express_fee,discount_cut_price:o.discount_cut_price,balance:o.balance,deduction:o.use_balance,original_price:o.original_price||"免费",totalPayment:o.price,noAdditionalInfo:!d.length,need_user_address:r}),d.length&&!e.hasRequiredSuppInfo&&e.getSuppInfo(d),h.appMethod.setPreviewGoodsInfo(c)},successStatusAbnormal:function(e){setTimeout(function(){h.appMethod.turnBack()},2e3)}})},a.getShopAddress=function(){var e=a;h.appMethod.sendRequest({url:"/index.php?r=AppShop/getAppShopLocationInfo",success:function(t){e.setData({shopAddress:t.data})}})},a.remarkInput=function(e){var t=e.target.value;a.setData({orderRemark:t})},a.previewImage=function(e){h.appMethod.previewImage({current:e.currentTarget.dataset.src})},a.clickMinusButton=function(e){var t=e.currentTarget.dataset.index;+a.data.goodsList[t].num<=0||a.changeGoodsNum(t,"minus")},a.clickPlusButton=function(e){var t=e.currentTarget.dataset.index;a.changeGoodsNum(t,"plus")},a.changeGoodsNum=function(e,t){var n,o=a.data.goodsList[e],i=+o.num,s="plus"==t?i+1:i-1,r=a,c={};if(0==s&&"minus"==t)return void h.appMethod.showModal({content:"确定从购物车删除该商品？",showCancel:!0,confirm:function(){r.cart_data_arr[e].num=s,c["goodsList["+e+"].num"]=s,r.setData(c),r.deleteGoods(e)}});n={goods_id:o.goods_id,model_id:o.model_id||"",num:s,sub_shop_app_id:r.franchisee_id,is_seckill:1==o.is_seckill?1:""},h.appMethod.sendRequest({hideLoading:!0,url:"/index.php?r=AppShop/addCart",data:n,success:function(t){r.cart_data_arr[e].num=s,c["goodsList["+e+"].num"]=s,c.selectDiscountInfo="",r.setData(c),r.getCalculationInfo()},fail:function(t){c={},r.cart_data_arr[e].num=i,c["goodsList["+e+"].num"]=i,r.setData(c)}})},a.deleteGoods=function(e){var t,n=a.data.goodsList,o=a;h.appMethod.sendRequest({url:"/index.php?r=AppShop/deleteCart",method:"post",data:{cart_id_arr:[a.cart_data_arr[e].cart_id],sub_shop_app_id:a.franchisee_id},success:function(a){if((t=n.concat([])).splice(e,1),0==t.length)return void h.appMethod.turnBack();for(var i=n[e],s=!0,r=t.length-1;r>=0;r--)if(t[r].id==i){s=!1;break}s&&delete o.additional_info[i],o.cart_data_arr.splice(e,1),o.setData({goodsList:t,selectDiscountInfo:""}),o.getCalculationInfo()}})},a.confirmPayment=function(e){var t=(a.data.goodsList,a),n=a.data.selectDiscountInfo;if("0"!=a.data.need_user_address&&0==a.data.is_self_delivery&&!a.data.selectAddress.id)return void h.appMethod.showModal({content:"请添加个人信息"});for(var o in a.additional_info)if(void 0!==o){!0;break}return"0"!=a.data.need_user_address||a.data.appointment_user_phone&&a.data.appointment_user_name?t.hasRequiredSuppInfo?void h.appMethod.showModal({content:"请填写商品补充信息"}):void(a.requesting||(a.requesting=!0,h.appMethod.sendRequest({url:"/index.php?r=AppShop/addCartOrder",method:"post",data:{cart_arr:a.cart_data_arr,formId:e.detail.formId,sub_shop_app_id:a.franchisee_id,selected_benefit:n,is_balance:a.data.useBalance?1:0,is_self_delivery:a.data.is_self_delivery,remark:a.data.orderRemark,address_id:a.data.selectAddress.id,additional_info:a.additional_info,voucher_coupon_goods_info:a.data.exchangeCouponData.voucher_coupon_goods_info,appointment_to_store_time:a.data.to_store,appointment_user_phone:a.data.appointment_user_phone,appointment_user_name:a.data.appointment_user_name},success:function(e){t.payOrder(e.data)},fail:function(){t.requesting=!1},successStatusAbnormal:function(){t.requesting=!1}}))):void h.appMethod.showModal({content:"请填写个人信息"})},a.payOrder=function(e){function t(){var t="/eCommerce/pages/goodsOrderPaySuccess/goodsOrderPaySuccess?detail="+e+(o.franchisee_id?"&franchisee="+o.franchisee_id:"")+"&is_group="+!!o.is_group+"&code=code";o.franchisee_id?h.appMethod.turnToPage(t,1):h.appMethod.sendRequest({url:"/index.php?r=AppMarketing/CheckAppCollectmeStatus",data:{order_id:e,sub_app_id:o.franchisee_id},success:function(e){0==e.valid&&(t+="&collectBenefit=1"),h.appMethod.turnToPage(t,1)}})}function n(){h.appMethod.turnToPage("/eCommerce/pages/appointmentOrderDetail/appointmentOrderDetail?detail="+e,1)}var o=a;if(0==a.data.totalPayment)return void h.appMethod.sendRequest({url:"/index.php?r=AppShop/paygoods",data:{order_id:e,total_price:0},success:function(e){t()},fail:function(){n()},successStatusAbnormal:function(){n()}});var i="/goodsOrderPaySuccess?detail="+e+(o.franchisee_id?"&franchisee="+o.franchisee_id:"")+"&is_group="+!!o.is_group+"&code=code";h.appMethod.goPay({orderId:e,successUrl:i,failUrl:"/appointmentOrderDetail?detail="+e,cancel:n})},a.discountChange=function(e){console.log(e);var t=e[0];a.setData({selectDiscountInfo:a.data.discountList[t],selectDiscountIndex:t,"exchangeCouponData.hasSelectGoods":!1,"exchangeCouponData.voucher_coupon_goods_info":{}}),a.getCalculationInfo()},a.goToMyAddress=function(){var e=a.data.selectAddress.id;a.isFromSelectAddress=!0,h.appMethod.turnToPage("/eCommerce/pages/myAddress/myAddress?id="+e+"&need_address="+a.data.need_user_address)},a.appointmentUserName=function(e){a.setData({appointment_user_name:e.target.value})},a.appointmentUserPhone=function(e){a.setData({appointment_user_phone:e.target.value})},a.showAddAddress=function(){var e=a;a.isFromSelectAddress=!0,h.appMethod.chooseAddress({success:function(t){h.appMethod.sendRequest({method:"post",url:"/index.php?r=AppShop/AddWxAddress",data:{detailInfo:t.detailInfo||"",cityName:t.cityName||"",provinceName:t.provinceName||"",UserName:t.userName||"",telNumber:t.telNumber||"",district:t.district||"",countyName:t.countyName||""},success:function(){e.dataInitial()}})},fail:function(){h.appMethod.turnToPage("/eCommerce/pages/addAddress/addAddress")}})},a.makeStorePhoneCall=function(){h.appMethod.makePhoneCall(a.data.shopAddress.shop_contact)},a.openStoreLocation=function(){var e=a.data.shopAddress.region_string+a.data.shopAddress.shop_location;e=e.replace(/\s/g,""),h.appMethod.sendRequest({url:"/index.php?r=Map/GetLatAndLngByAreaInfo",data:{location_info:e},success:function(e){e.result&&h.appMethod.openLocation({latitude:e.result.location.lat,longitude:e.result.location.lng})}})},a.useBalanceChange=function(e){a.setData({useBalance:e}),a.getCalculationInfo()},a.deliveryWayChange=function(e){a.setData({is_self_delivery:e.detail.value}),a.getCalculationInfo()},a.goToAdditionalInfo=function(){h.appMethod.setGoodsAdditionalInfo(a.additional_info),h.appMethod.turnToPage("/eCommerce/pages/goodsAdditionalInfo/goodsAdditionalInfo")},a.exchangeCouponInit=function(e){var t=a;h.appMethod.sendRequest({url:"/index.php?r=AppShop/getGoods",data:{data_id:e},success:function(e){var a=e.data[0].form_data,n=[],o={models:[],price:0,modelId:"",models_text:"",imgurl:""};a.model_items.length?(o.price=Number(a.model_items[0].price),o.imgurl=a.model_items[0].img_url,o.modelId=a.model_items[0].id):(o.price=Number(a.price),o.imgurl=a.cover);for(var i in a.model)i&&(n.push(a.model[i]),o.models.push(a.model[i].subModelId[0]),o.models_text+="“"+a.model[i].subModelName[0]+"” ");a.model=n,t.setData({"exchangeCouponData.dialogHidden":!1,"exchangeCouponData.goodsInfo":a,"exchangeCouponData.selectModelInfo":o})}})},a.exchangeCouponHideDialog=function(){a.setData({selectDiscountInfo:a.data.discountList[0],selectDiscountIndex:0,"exchangeCouponData.dialogHidden":!0,"exchangeCouponData.hasSelectGoods":!1,"exchangeCouponData.voucher_coupon_goods_info":{}}),a.getCalculationInfo()},a.exchangeCouponSelectSubModel=function(e){var t=e.target.dataset,n=t.modelIndex,o=t.submodelIndex,i={},s=a.data.exchangeCouponData.selectModelInfo.models,r=a.data.exchangeCouponData.goodsInfo.model,c="";s[n]=r[n].subModelId[o];for(var l=0;l<s.length;l++)for(var d=r[l].subModelId,u=0;u<d.length;u++)s[l]==d[u]&&(c+="“"+r[l].subModelName[u]+"” ");i["exchangeCouponData.selectModelInfo.models"]=s,i["exchangeCouponData.selectModelInfo.models_text"]=c,a.setData(i),a.exchangeCouponResetSelectCountPrice()},a.exchangeCouponResetSelectCountPrice=function(){for(var e=a.data.exchangeCouponData.selectModelInfo.models.join(","),t=a.data.exchangeCouponData.goodsInfo.model_items,n={},o=t.length-1;o>=0;o--)if(t[o].model==e){n["exchangeCouponData.selectModelInfo.stock"]=t[o].stock,n["exchangeCouponData.selectModelInfo.price"]=t[o].price,n["exchangeCouponData.selectModelInfo.modelId"]=t[o].id,n["exchangeCouponData.selectModelInfo.imgurl"]=t[o].img_url;break}a.setData(n)},a.exchangeCouponConfirmGoods=function(){var e=a,t=e.data.exchangeCouponData.goodsInfo,n=t.model,o=e.data.exchangeCouponData.selectModelInfo.models,i="";if(o.length>0){i="(";for(var s=0;s<o.length;s++)for(var r=n[s].subModelId,c=0;c<r.length;c++)o[s]==r[c]&&(i+=n[s].subModelName[c]+"|");i+=")"}t.model_value_str=i,e.setData({"exchangeCouponData.dialogHidden":!0,"exchangeCouponData.selectModelInfo":{},"exchangeCouponData.hasSelectGoods":!0,"exchangeCouponData.voucher_coupon_goods_info":{goods_id:t.id,num:1,model_id:e.data.exchangeCouponData.selectModelInfo.modelId},"exchangeCouponData.goodsInfo":t}),e.getCalculationInfo()},a.getSuppInfo=function(e){var t=a;h.appMethod.sendRequest({hideLoading:!0,url:"/index.php?r=AppShop/GetDelivery",method:"post",data:{delivery_id:e[0]},success:function(e){if(e.data){for(var a=e.data.delivery_info,n=0;n<a.length;n++)if(0==a[n].is_required)return void(t.hasRequiredSuppInfo=!0)}else t.setData({noAdditionalInfo:!0})}})},document.title="确认支付",a}return(0,g.default)(t,e),(0,u.default)(t,[{key:"componentWillMount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,v.getCurrentPageQueryParams)();this.franchisee_id=e.franchisee||"",this.cart_id_arr=e.cart_arr?decodeURIComponent(e.cart_arr).split(","):[],this.dataInitial(),this.is_group=e.is_group||"",this.setData({is_group:this.is_group,to_store:e.to_store?JSON.parse(e.to_store):""})}},{key:"componentDidMount",value:function(){this.isFromSelectAddress&&(this.getCalculationInfo(),this.isFromSelectAddress=!1)}},{key:"render",value:function(){var e=this.state,t=(e.showGetUserInfo,e.goodsList),a=e.is_group,n=e.service_period,o=e.original_price,s=e.exchangeCouponData,c=e.orderRemark,l=e.is_self_delivery,d=e.selectAddress,u=e.need_user_address,m=e.appointmentUserName,p=e.appointmentUserPhone,f=e.shopAddress,g=e.selectDiscountIndex,h=e.discountList,_=e.selectDiscountInfo,y=e.discount_cut_price,E=e.useBalance,b=e.deduction,N=e.balance,R=e.noAdditionalInfo,k=e.totalPayment;e.dialogHidden,e.selectModelInfo,e.goodsInfo;return h=h.map(function(e,t){return{label:e.title,value:t}}),React.createElement("div",{className:"official-page preview-appointment-order"},React.createElement("div",{className:"preview-goods-order-wrap",id:"preview-goods-order"},React.createElement("div",{className:"preview-goods-order-list preview-goods-order-section"},t.map(function(e,t){return React.createElement(React.Fragment,{key:e.id},React.createElement("div",{className:"preview-goods-order-item"},React.createElement("img",{className:"preview-goods-cover "+(a?"group-buy":""),src:e.cover,mode:"aspectFill"}),React.createElement("div",{className:"preview-goods-content"},React.createElement("div",{className:"preview-goods-title"},e.title),e.model_value_str&&React.createElement("div",{className:"preview-goods-model"},e.model_value_str),React.createElement("div",{className:"preview-appointment-service-period"},n),React.createElement("div",{className:"preview-quantity-section"},React.createElement("div",{className:"preview-goods-price"},"2"!=e.integral?React.createElement(React.Fragment,null,React.createElement("div",{className:"preview-goods-price"},"¥"+("0"==o?"免费":o))):React.createElement(React.Fragment,null,!(0!=e.use_integral&&"0.00"==o)&&React.createElement("span",null,"0.00"==o&&0==e.use_integral?"免费":"¥"+o),0!=e.use_integral&&"0.00"!=o&&React.createElement("span",null,"+"),0!=e.use_integral&&React.createElement("span",null,e.use_integral+"积分")))))))}),s.hasSelectGoods&&React.createElement("div",{className:"preview-goods-order-item"},React.createElement("img",{className:"preview-goods-cover",src:s.goodsInfo.cover,mode:"aspectFill"}),React.createElement("div",{className:"preview-goods-content"},React.createElement("div",{className:"preview-goods-title"},s.goodsInfo.title),s.goodsInfo.model_value_str&&React.createElement("div",{className:"preview-goods-model"},s.goodsInfo.model_value_str),React.createElement("div",{className:"preview-quantity-section"},React.createElement("div",{className:"gift-text"},"赠品"),React.createElement("div",{className:"quantity pull-right"},React.createElement("span",null,"数量："),React.createElement("span",{className:"buy-goods-count"},"1")))))),React.createElement("div",{className:"preview-goods-order-section"},React.createElement("div",{style:(0,v.convertLineStyleData)("color:#333;margin-bottom:10px;")},"买家留言"),React.createElement("textarea",{value:c,maxLength:"30",onInput:this.remarkInput,placeholder:"买家留言"})),"1"==u?React.createElement("div",{className:"preview-goods-order-section",hidden:1==l},d.id?React.createElement(React.Fragment,null,React.createElement("div",{style:(0,v.convertLineStyleData)("position:relative;")},React.createElement("div",{style:(0,v.convertLineStyleData)("margin-bottom:7px;width:250px;")},d.address_info.name+" "+d.address_info.contact),React.createElement("div",null,d.address_info.province.text+d.address_info.city.text+d.address_info.district.text+d.address_info.detailAddress),React.createElement("div",{className:"preview-address-options"},React.createElement("span",{style:(0,v.convertLineStyleData)("margin-right:15px;"),onClick:this.goToMyAddress,"data-address-id":d.id},"更换"),React.createElement("span",{onClick:this.showAddAddress},"添加个人信息")))):React.createElement(React.Fragment,null,React.createElement("div",{className:"pull-right ico-moon icon-rightarrow"}),React.createElement("div",{onClick:this.showAddAddress},"添加个人信息"))):React.createElement("div",{className:"preview-goods-order-section"},React.createElement("div",null,"个人信息"),React.createElement("label",{style:(0,v.convertLineStyleData)("margin-top:5px;color:#666;padding-left:10px;display:block;")},"您的姓名",React.createElement("input",{onBlur:this.appointmentUserName,placeholder:"请输入姓名",className:"appointment-user-name",value:m})),React.createElement("label",{style:(0,v.convertLineStyleData)("margin-top:5px;color:#666;padding-left:10px;display:block;")},"联系方式",React.createElement("input",{onBlur:this.appointmentUserPhone,placeholder:"请输入联系方式",className:"appointment-user-phone",value:p}))),React.createElement("div",{className:"preview-goods-order-section",hidden:0==l},React.createElement("div",{onClick:this.openStoreLocation},React.createElement("label",{className:"ico-moon icon-location"}),f.region_string+f.shop_location),React.createElement("div",{style:(0,v.convertLineStyleData)("margin:12px 0;"),onClick:this.makeStorePhoneCall},React.createElement("label",{className:"ico-moon icon-phone"}),f.shop_contact),React.createElement("div",{style:(0,v.convertLineStyleData)("font-size:12px;color:#aaa;margin-left:2px;")},"亲,勾选上门店自提,需要自己去门店取货哦！")),React.createElement("div",{className:"preview-goods-order-section",style:(0,v.convertLineStyleData)("margin-bottom:1px;")},"预约金额",React.createElement("span",{className:"pull-right price-count"},"¥"+o)),!!h.length&&React.createElement("div",{className:"preview-goods-order-section",style:(0,v.convertLineStyleData)("margin-bottom:1px;")},React.createElement("div",{className:"preview-section-title"},"优惠方式:",React.createElement("div",{className:"ico-moon icon-rightarrow"})),React.createElement(r.default,{onChange:this.discountChange,cols:1,value:[g],data:h,style:(0,v.convertLineStyleData)("margin-bottom:-12rpx;")},React.createElement("div",{className:"select-discount-title",style:(0,v.convertLineStyleData)("display: flex; justify-content: space-between")},React.createElement("span",{className:"pull-left"},_.name),React.createElement("span",{className:"pull-right",hidden:0==g},"-¥"+y)))),0!=N&&React.createElement("div",{className:"preview-goods-order-section"},React.createElement("div",{className:"use-balance-option"},React.createElement("span",null,"使用储值金"),React.createElement(i.default,{className:"pull-right",checked:E,onChange:this.useBalanceChange})),React.createElement("div",{hidden:!E,className:"select-discount-title",style:(0,v.convertLineStyleData)("margin-top:9px;margin-bottom:-12rpx;")},"储值金抵现",React.createElement("span",{className:"pull-right"},"- ¥"+b))),!R&&React.createElement("div",{className:"preview-goods-order-section",onClick:this.goToAdditionalInfo},"补充信息",React.createElement("div",{className:"ico-moon icon-rightarrow pull-right",style:(0,v.convertLineStyleData)("color:#aaa;")})),React.createElement("div",{className:"bottom-nav"},React.createElement("div",{className:"preview-goods-total-price"},"合计:",React.createElement("span",{className:"price-count"},"¥"+k)),React.createElement("form",null,React.createElement("button",{type:"button",onClick:this.confirmPayment},"去付款")))))}}]),t}(y.default);t.default=E},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(0),i=n(o),s=a(3),r=n(s),c=a(1),l=n(c),d=a(2),u=n(d),m=a(5),p=a(6),f=a(7),g=n(f);a(454);var h=function(e){function t(e){(0,i.default)(this,t);var a=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={orderData:{},orderInfo:{},orderStatus:{0:"待付款",1:"待商家确认",2:"待消费",3:"待评价",4:"退款审核中",5:"退款中",6:"已消费",7:"已关闭"},selectAddressId:"",goodsAdditionalInfo:{},hasAdditionalInfo:!1,customFields:[],orderId:"",isFromTemplateMsg:!1,originalPrice:"",useBalance:"",freightAdress:{},express_fee:"",discount_cut_price:"",isFromBack:!1},a.dataInitial=function(){a.getOrderDetail(a.data.orderId),a.initialAddressId()},a.getOrderDetail=function(e){var t=a;m.appMethod.getOrderDetail({data:{order_id:e,sub_shop_app_id:a.data.franchiseeId},success:function(e){for(var a=e.data[0],n=a.form_data,o=!1,i=n.appointment_order_info.appointment_start_date,s=n.appointment_order_info.appointment_end_date,r=[],c=[],l=0;l<n.goods_info.length;l++){var d=n.goods_info[l].delivery_id,u=n.goods_info[l].id;d&&"0"!=d&&-1==c.indexOf(u)&&(r.push(n.goods_info[l]),c.push(u),o=!0)}n.remark=n.remark?n.remark.replace(/\n|\\n/g,"\n"):n.remark,i&&s&&(i.substring(0,4)==s.substring(0,4)?(n.appointment_order_info.appointment_start_date=i.substring(4,6)+"-"+i.substring(6),n.appointment_order_info.appointment_end_date=s.substring(4,6)+"-"+s.substring(6)):(n.appointment_order_info.appointment_start_date=i.substring(0,4)+"-"+i.substring(4,6)+"-"+i.substring(6),n.appointment_order_info.appointment_end_date=s.substring(0,4)+"-"+s.substring(4,6)+"-"+s.substring(6))),"6"==n.appointment_order_info.appointment_unit_type?n.timeDiff=Date.parse(new Date)-Date.parse(new Date(n.appointment_time.split("~")[1]))>0:n.timeDiff=!1,t.setData({orderData:a,orderInfo:n,hasAdditionalInfo:o,appointment_interval:n.appointment_order_info.appointment_interval&&n.appointment_order_info.appointment_interval.substring(6,8)>=24?n.appointment_order_info.appointment_interval.substring(0,6)+"次日"+(1*n.appointment_order_info.appointment_interval.substring(6,8)-24)+n.appointment_order_info.appointment_interval.substring(8):n.appointment_order_info.appointment_interval,discount_cut_price:n.discount_cut_price,useBalance:Number(n.use_balance),express_fee:e.data[0].express_fee}),m.appMethod.setPreviewGoodsInfo(r),m.appMethod.setGoodsAdditionalInfo(n.additional_info||{})}})},a.orderDelete=function(e){var t=a.data.orderId,n=a.data.franchiseeId;m.appMethod.showModal({content:"订单删除后不可找回，确认删除？",showCancel:!0,cancelText:"取消",confirmText:"确定",confirm:function(){m.appMethod.sendRequest({url:"/index.php?r=AppShop/HideOrder",data:{order_id:t,sub_shop_app_id:n},success:function(e){m.appMethod.turnBack()}})}})},a.cancelOrder=function(e){var t=a.data.orderInfo.order_id,n=a;m.appMethod.showModal({content:"是否取消订单？",showCancel:!0,confirmText:"是",cancelText:"否",confirm:function(){m.appMethod.sendRequest({url:"/index.php?r=AppShop/cancelOrder",data:{order_id:t,sub_shop_app_id:n.data.franchiseeId},success:function(e){var t={};t["orderInfo.status"]=7,n.setData(t)}})}})},a.payOrder=function(e){var t,n=(a.data.orderInfo.address_info,a);if(t=a.data.orderInfo.order_id,0==a.data.orderInfo.total_price)return void m.appMethod.sendRequest({url:"/index.php?r=AppShop/paygoods",data:{order_id:t,total_price:0},success:function(e){setTimeout(function(){m.appMethod.showToast({title:"支付成功",icon:"success",success:function(){n.paySuccessCallback()}})})}});var o="/goodsOrderPaySuccess?detail="+t+(franchiseeId?"&franchisee="+franchiseeId:"")+"&code=code";m.appMethod.goPay({orderId:t,successUrl:o})},a.applyDrawback=function(){var e=a.data.orderInfo.order_id,t=a;m.appMethod.showModal({content:"确定要申请退款？",showCancel:!0,confirmText:"确定",cancelText:"取消",confirm:function(){m.appMethod.sendRequest({url:"/index.php?r=AppShop/applyRefund",data:{order_id:e,sub_shop_app_id:t.data.franchiseeId},success:function(e){var a={};a["orderInfo.status"]=4,t.setData(a)}})}})},a.receiveDrawback=function(){var e=a.data.orderInfo.order_id,t=a;m.appMethod.showModal({content:"确定已收到退款？",showCancel:!0,confirmText:"确定",cancelText:"取消",confirm:function(){m.appMethod.sendRequest({url:"/index.php?r=AppShop/comfirmRefund",data:{order_id:e,sub_shop_app_id:t.data.franchiseeId},success:function(e){var a={};a["orderInfo.status"]=7,t.setData(a)}})}})},a.checkLogistics=function(){var e=a.data.orderInfo.order_id;m.appMethod.turnToPage("/eCommerce/pages/logisticsPage/logisticsPage?detail="+e)},a.sureReceipt=function(){var e=a.data.orderInfo.order_id,t=a;m.appMethod.showModal({content:"确定已消费？",showCancel:!0,confirmText:"确定",cancelText:"取消",confirm:function(){m.appMethod.sendRequest({url:"/index.php?r=AppShop/comfirmOrder",data:{order_id:e,sub_shop_app_id:t.data.franchiseeId},success:function(e){var a={};a["orderInfo.status"]=3,t.setData(a)}})}})},a.makeComment=function(){var e=a.data.franchiseeId,t="/eCommerce/pages/makeComment/makeComment?detail="+a.data.orderInfo.order_id+(e?"&franchisee="+e:"");m.appMethod.turnToPage(t)},a.showAddressList=function(){var e=a.data.selectAddressId,t=a.data.orderInfo.order_id,n=a.data.franchiseeId;m.appMethod.turnToPage("/eCommerce/pages/myAddress/myAddress?id="+e+"&oid="+t+"&sub_shop_id="+n,!0)},a.showAddAddress=function(){var e=a.data.orderInfo.order_id,t=a;if(m.appMethod.chooseAddress)m.appMethod.chooseAddress({success:function(a){m.appMethod.sendRequest({method:"post",url:"/index.php?r=AppShop/AddWxAddress",data:{detailInfo:a.detailInfo||"",cityName:a.cityName||"",provinceName:a.provinceName||"",UserName:a.userName||"",telNumber:a.telNumber||"",district:a.district||"",countyName:a.countyName||"",order_id:e},success:function(){t.dataInitial()}})}});else{var e=a.data.orderInfo.order_id;m.appMethod.turnToPage("/eCommerce/pages/addAddress/addAddress?oid="+e)}},a.goToHomepage=function(){var e=m.appMethod.getHomepageRouter();m.appMethod.turnToPage("/pages/"+e+"/"+e,!0)},a.verificationCode=function(){m.appMethod.turnToPage("/eCommerce/pages/verificationCodePage/verificationCodePage?detail="+a.data.orderInfo.order_id+"&sub_shop_app_id="+a.data.franchiseeId)},a.getFreigtAdress=function(){var e=a;m.appMethod.sendRequest({url:"/index.php?r=AppShop/getAppShopLocationInfo",data:{app_id:m.appMethod.getAppId()},success:function(t){e.setData({freightAdress:t.data})}})},a.freightGoMap=function(){var e=a,t=e.data.freightAdress.region_string+e.data.freightAdress.shop_location;t=t.replace(/\s+/g,""),m.appMethod.sendRequest({url:"/index.php?r=Map/GetLatAndLngByAreaInfo",data:{location_info:t},success:function(e){e.result&&m.appMethod.openLocation({latitude:e.result.location.lat,longitude:e.result.location.lng})}})},a.initialAddressId=function(){var e=a;m.appMethod.sendRequest({url:"/index.php?r=AppShop/addressList",data:{app_id:m.appMethod.getAppId()},success:function(t){t.data.length&&e.setData({selectAddressId:t.data[0].id})}})},a.freightPlayPhone=function(){var e=a;m.appMethod.makePhoneCall(e.data.freightAdress.shop_contact)},a.seeAdditionalInfo=function(){m.appMethod.turnToPage("/eCommerce/pages/goodsAdditionalInfo/goodsAdditionalInfo?from=goodsOrderDetail")},a.paySuccessCallback=function(){var e=a.data.orderInfo.order_id,t=a.data.franchiseeId,n="/eCommerce/pages/goodsOrderPaySuccess/goodsOrderPaySuccess?detail="+e+(t?"&franchisee="+t:"")+"&code=code";t?m.appMethod.turnToPage(n,1):m.appMethod.sendRequest({url:"/index.php?r=AppMarketing/CheckAppCollectmeStatus",data:{order_id:e,sub_app_id:t},success:function(e){0==e.valid&&(n+="&collectBenefit=1"),m.appMethod.turnToPage(n,1)}})},document.title="订单详情",a}return(0,u.default)(t,e),(0,r.default)(t,[{key:"componentWillMount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,p.getCurrentPageQueryParams)();this.setData({orderId:e.detail,isFromTemplateMsg:"template_msg"===e.from,franchiseeId:e.franchisee||""}),this.dataInitial()}},{key:"componentDidMount",value:function(){this.data.isFromBack?this.data.orderInfo.order_id&&this.getOrderDetail(this.data.orderInfo.order_id):this.setData({isFromBack:!0})}},{key:"render",value:function(){var e=this.state,t=(e.showGetUserInfo,e.isFromTemplateMsg),a=e.orderStatus,n=e.orderInfo,o=e.appointment_interval,i=e.discount_cut_price,s=e.useBalance,r=e.hasAdditionalInfo;return React.createElement("div",{className:"official-page appointment-order-detail"},React.createElement("div",null,t&&React.createElement("div",{className:"order-detail-section orderDetail-goto-homepage",onClick:this.goToHomepage,style:(0,p.convertLineStyleData)("margin-bottom:0;")},React.createElement("div",{className:"ico-moon icon-rightarrow"}),"返回首页"),React.createElement("div",{className:"order-detail-section top-section"},React.createElement("div",{style:(0,p.convertLineStyleData)("margin-bottom: 18rpx;")},"订单状态: "+a[n.status]),React.createElement("div",null,"订单号: "+n.order_id)),0==+n.status&&React.createElement("div",{className:"order-detail-section",style:(0,p.convertLineStyleData)("border-top:1px solid #e8e8e8;")},"等待买家付款"),n&&n.appointment_order_info&&n.appointment_order_info.appointment_user_phone?React.createElement("div",{className:"order-detail-section"},React.createElement("div",{className:"address-info-section"},(0==n.is_self_delivery||!n.appointment_order_info.appointment_user_phone)&&React.createElement(React.Fragment,null,React.createElement("div",{style:(0,p.convertLineStyleData)("margin-bottom: 3px")},n.appointment_order_info.appointment_user_name+" "+n.appointment_order_info.appointment_user_phone)))):React.createElement("div",{className:"order-detail-section"},React.createElement("div",{className:"address-info-section"},0!=n.is_self_delivery&&n&&n.appointment_order_info&&n.appointment_order_info.appointment_user_phone?React.createElement(React.Fragment,null,React.createElement("div",{style:(0,p.convertLineStyleData)("margin-bottom: 3px")},n&&n.appointment_order_info&&n.appointment_order_info.appointment_user_name+" "+n.appointment_order_info.appointment_user_phone)):React.createElement(React.Fragment,null,React.createElement("div",{style:(0,p.convertLineStyleData)("margin-bottom: 3px")},n.address_info&&n.address_info.name+" "+n.address_info.contact),0!=(n&&n.appointment_order_info&&n.appointment_order_info.need_user_address)&&React.createElement("div",null,n&&n.address_info&&n.address_info.province.text+n.address_info.city.text+n.address_info.district.text+n.address_info.detailAddress)))),React.createElement("div",{className:"order-detail-section",style:(0,p.convertLineStyleData)("margin-bottom: 0; padding-bottom: 0; border-bottom: none;")},n&&n.goods_info&&n.goods_info.map(function(e,t){return React.createElement("div",{className:"goods-list-item",key:e.id},React.createElement("img",{className:"goods-cover",src:e.cover}),1==e.is_seckill?React.createElement(React.Fragment,null,React.createElement("div",{className:"goods-content goods-seckill-content"},React.createElement("div",null,e.goods_name),e.model_value&&React.createElement("div",{className:"goods-model"},e.model_value)),React.createElement("div",{className:"goods-right goods-seckill-right"},React.createElement("div",null,React.createElement("span",{className:"goods-seckill-price"},"¥"+e.price),React.createElement("span",{className:"goods-original-price"},"¥"+e.original_price)),React.createElement("div",{className:"goods-seckill-sign"},"秒杀商品"),React.createElement("div",{style:(0,p.convertLineStyleData)("margin-top: 5px;")},"× "+e.num))):React.createElement(React.Fragment,null,React.createElement("div",{className:"goods-content"},React.createElement("div",null,e.goods_name),e.model_value&&React.createElement("div",{className:"goods-model"},e.model_value),e.is_benefit_goods&&React.createElement("div",{className:"gift-text"},"赠品")),!e.is_benefit_goods&&React.createElement("div",{className:"goods-right"},React.createElement("div",null,"¥"+e.price),React.createElement("div",{style:(0,p.convertLineStyleData)("margin-top: 5px;")},"× "+e.num))))})),n&&n.appointment_order_info&&(3==n.appointment_order_info.appointment_unit_type||6==n.appointment_order_info.appointment_unit_type)?React.createElement("div",{className:"order-detail-section",style:(0,p.convertLineStyleData)("margin-bottom: 0;")},"起始日期",React.createElement("span",{className:"pull-right"},n.appointment_order_info.appointment_start_date)):React.createElement("div",{className:"order-detail-section",style:(0,p.convertLineStyleData)("margin-bottom: 0;")},"预约日期",React.createElement("span",{className:"pull-right"},n&&n.appointment_order_info&&n.appointment_order_info.appointment_day)),n&&n.appointment_order_info&&(3==n.appointment_order_info.appointment_unit_type||6==n.appointment_order_info.appointment_unit_type)?React.createElement("div",{className:"order-detail-section",style:(0,p.convertLineStyleData)("margin-bottom: 0;")},"结束日期",React.createElement("span",{className:"pull-right"},n&&n.appointment_order_info&&n.appointment_order_info.appointment_end_date)):React.createElement("div",{className:"order-detail-section",style:(0,p.convertLineStyleData)("margin-bottom: 0;")},"预约时段",React.createElement("span",{className:"pull-right"},o)),n&&n.appointment_order_info&&(3==n.appointment_order_info.appointment_unit_type||6==n.appointment_order_info.appointment_unit_type)?React.createElement("div",{className:"order-detail-section"},"预约时间",React.createElement("span",{className:"pull-right"},n.appointment_order_info.appointment_to_store_time)):React.createElement("div",{className:"order-detail-section"},"服务时长",React.createElement("span",{className:"pull-right"},n&&n.appointment_order_info&&n.appointment_order_info.appointment_time_long)),1==n.has_seckill?React.createElement("div",{className:"order-detail-section",style:(0,p.convertLineStyleData)("margin-bottom: 0;")},"预约金额",React.createElement("span",{className:"pull-right"},"¥"+n.seckill_original_price)):React.createElement("div",{className:"order-detail-section",style:(0,p.convertLineStyleData)("margin-bottom: 0;")},"预约金额",React.createElement("span",{className:"pull-right"},"¥"+(n.original_price||"免费"))),1==n.has_seckill&&React.createElement("div",{className:"order-detail-section",style:(0,p.convertLineStyleData)("margin-bottom: 0;")},"活动优惠",React.createElement("span",{className:"pull-right"},"秒杀  - ¥"+n.seckill_cut_price)),React.createElement("div",{className:"order-detail-section"},"优惠抵扣",React.createElement("span",{className:"pull-right"},"- ¥"+i)),!!+n.total_integral&&0!=n.total_integral&&"0"!=n.total_integral&&React.createElement("div",{className:"order-detail-section",style:(0,p.convertLineStyleData)("margin-bottom: 0;")},"订单积分",React.createElement("span",{className:"pull-right"},n.total_integral+"积分")),React.createElement("div",{className:"order-detail-section"},"订单总价",React.createElement("span",{className:"pull-right"},"¥"+(n.original_price?n.order_total_price:"免费"))),(n.status||n.coupon_fee)&&React.createElement("div",{style:(0,p.convertLineStyleData)("margin-bottom: 0; border-top:1px solid #e8e8e8;")}),0!=n.status&&React.createElement("div",{className:"order-detail-section",style:(0,p.convertLineStyleData)("margin-bottom: 0;")},"储值抵扣",React.createElement("span",{className:"pull-right"},"- ¥"+s)),!!+n.coupon_fee&&React.createElement("div",{className:"order-detail-section",style:(0,p.convertLineStyleData)("margin-bottom: 0;")},"社交立减金",React.createElement("span",{className:"pull-right"},"- ¥"+n.coupon_fee)),React.createElement("div",{className:"order-detail-section"},"需付款",React.createElement("span",{className:"pull-right",style:(0,p.convertLineStyleData)("color: #ff7100;")},"¥"+("0.00"!=n.total_price?n.total_price:"免费"))),!!+r&&React.createElement("div",{className:"order-detail-section",onClick:this.seeAdditionalInfo,style:(0,p.convertLineStyleData)("border-top:1px solid #e8e8e8;")},"补充信息",React.createElement("div",{className:"ico-moon icon-rightarrow pull-right"})),n.remark&&React.createElement("div",{className:"order-detail-section",style:(0,p.convertLineStyleData)("border-top:1px solid #e8e8e8;")},React.createElement("div",{className:"section-title"},"留言"),React.createElement("div",{className:"section-content"},React.createElement("span",null,n.remark))),React.createElement("div",{className:"bottom-nav"},React.createElement("div",{className:"txt-r"},0==n.status&&React.createElement(React.Fragment,null,React.createElement("span",{className:"btn",onClick:this.cancelOrder},"取消订单"),React.createElement("span",{className:"btn btn-orange orderDetail-pay-directly",onClick:this.payOrder},"立即支付")),1==n.status&&React.createElement(React.Fragment,null,React.createElement("span",{className:"btn",onClick:this.verificationCode},"核销码"),!n.timeDiff&&React.createElement("span",{className:"btn",onClick:this.applyDrawback},"申请退款")),2==n.status&&React.createElement(React.Fragment,null,React.createElement("span",{className:"btn",onClick:this.verificationCode},"核销码"),!n.timeDiff&&React.createElement("span",{className:"btn",onClick:this.applyDrawback},"申请退款"),React.createElement("span",{className:"btn btn-orange",onClick:this.sureReceipt},"确认消费")),3==n.status&&React.createElement(React.Fragment,null,React.createElement("span",{className:"btn",onClick:this.orderDelete},"刪除订单"),React.createElement("span",{className:"btn btn-orange",onClick:this.makeComment},"去评价")),4==n.status&&React.createElement(React.Fragment,null,React.createElement("span",null,"退款审核中")),5==n.status&&React.createElement(React.Fragment,null,React.createElement("span",{className:"btn",onClick:this.receiveDrawback},"收到退款")),6==n.status&&React.createElement(React.Fragment,null,React.createElement("span",{className:"btn",onClick:this.verificationCode},"核销码"),React.createElement("span",{className:"btn",onClick:this.orderDelete},"刪除订单")),7==n.status&&React.createElement(React.Fragment,null,React.createElement("span",{className:"btn",onClick:this.orderDelete},"刪除订单"))))))}}]),t}(g.default);t.default=h},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(0),i=n(o),s=a(3),r=n(s),c=a(1),l=n(c),d=a(2),u=n(d),m=a(5),p=a(6),f=a(11),g=a(7),h=n(g);a(456);var v=function(e){function t(e){(0,i.default)(this,t);var a=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={currentTabIndex:1,myPrizeList:[],storeStyle:{}},a.clickTap=function(e){var t=a,n=e.currentTarget.dataset.index,o={};o.currentTabIndex=n,t.setData(o),t.getMyPrizeCenter(n)},a.getMyPrizeCenter=function(e){var t=a;m.appMethod.sendRequest({url:"/index.php?r=appLotteryActivity/myPrizeCenter",method:"post",data:{category:e,page:1,page_size:999,sub_app_id:t.data.franchisee},success:function(e){t.setData({myPrizeList:e.data})}})},a.getAppECStoreConfig=function(){m.appMethod.getAppECStoreConfig(function(e){a.setData({storeStyle:e.color_config})},a.data.franchisee)},document.title="中奖记录",a}return(0,u.default)(t,e),(0,r.default)(t,[{key:"componentWillMount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,p.getCurrentPageQueryParams)();this.setData({franchisee:e.franchisee||""})}},{key:"componentDidMount",value:function(e){this.getMyPrizeCenter(1),this.getAppECStoreConfig()}},{key:"render",value:function(){var e=this.state,t=(e.showGetUserInfo,e.currentTabIndex),a=e.storeStyle,n=e.myPrizeList;return React.createElement("div",{className:"official-page winning-record"},React.createElement("div",{className:"winningRecord page",id:"winningRecord"},React.createElement("div",{className:"record-tab-list"},React.createElement("div",{"data-index":"1",style:(0,p.convertLineStyleData)(1==t?"color:"+a.theme+";border-color:"+a.theme:""),className:1==t?"active":"",onClick:this.clickTap},"大转盘"),React.createElement("div",{"data-index":"2",style:(0,p.convertLineStyleData)(2==t?"color:"+a.theme+";border-color:"+a.theme:""),className:2==t?"active":"",onClick:this.clickTap},"砸金蛋"),React.createElement("div",{"data-index":"3",style:(0,p.convertLineStyleData)(3==t?"color:"+a.theme+";border-color:"+a.theme:""),className:3==t?"active":"",onClick:this.clickTap},"刮刮乐")),React.createElement("div",{className:"record-content-body"},React.createElement("div",{className:"scrollContainer"},React.createElement(f.ScrollView,{"scroll-y":"true"},n.map(function(e,t){return React.createElement("div",{className:"record-wrap-list",key:e.id,"data-id":e.id,hidden:""==n},React.createElement("div",{className:"record-name"},e.prize_level+":"+e.custom_prize_title),e.custom_prize_title!=e.prize_title&&React.createElement("div",{className:"record-name custom-record-name"},React.createElement("span",null,"奖品"),e.prize_title),React.createElement("div",{className:"record-start"},React.createElement("div",{className:"record-apply"},"使用日期："+e.start_use_date+"至"+e.end_use_date)),1!=e.coupon_type&&React.createElement("div",{className:"record-staus ico-moon icon-winning-record-"+("0"==e.is_selected?"nouse":"used"),style:(0,p.convertLineStyleData)("color:"+("0"==e.is_selected?"#FF7100":"#999999"))}),React.createElement("div",{className:"record-end"},"中奖时间："+e.add_time))})),React.createElement("div",{className:"record-none",hidden:""!=n},"暂无任何中奖记录")))))}}]),t}(h.default);t.default=v},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(9),i=n(o),s=a(0),r=n(s),c=a(3),l=n(c),d=a(1),u=n(d),m=a(2),p=n(m),f=a(5),g=a(6),h=a(11),v=a(7),_=n(v);a(458);var y=function(e){function t(e){(0,r.default)(this,t);var a=(0,u.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={messageType:5,systemBranch:{data:[],isMore:0,currentPage:1,onload:!1,unreadCount:0},interactBranch:{data:[],isMore:0,currentPage:1,onload:!1,unreadCount:0},pushBranch:{data:[],isMore:0,currentPage:1,onload:!1,unreadCount:0},messageDetail:0,messageDetailFormData:[],review_switch:0,form_data:{review_status:3,review_result:""}},a.getMessageData=function(e,t){var n=a;f.appMethod.sendRequest({url:"/index.php?r=AppNotify/GetUserAppNotifyMsg",data:{app_id:f.appMethod.globalData.appId,types:e||"5,6,16",page:t||""},success:function(e){for(var t in e.data)switch(parseInt(t)){case 5:n.setData({"systemBranch.data":n.data.systemBranch.data?n.data.systemBranch.data.concat(n.parseMessageData(e.data[t].data)):n.parseMessageData(e.data[t].data),"systemBranch.isMore":e.data[t].is_more||"","systemBranch.currentPage":e.data[t].current_page||"","systemBranch.onload":!1,"systemBranch.unreadCount":e.data[t].unread_count||""});break;case 6:n.setData({"interactBranch.data":n.data.interactBranch.data?n.data.interactBranch.data.concat(n.parseMessageData(e.data[t].data)):n.parseMessageData(e.data[t].data),"interactBranch.isMore":e.data[t].is_more||"","interactBranch.currentPage":e.data[t].current_page||"","interactBranch.onload":!1,"interactBranch.unreadCount":e.data[t].unread_count||""});break;case 16:var a={},o=n.data.pushBranch.data||[],i=e.data[t];a["pushBranch.data"]=o?o.concat(n.parseMessageData(i.data)):n.parseMessageData(i.data),a["pushBranch.isMore"]=i.is_more||"",a["pushBranch.currentPage"]=i.current_page||"",a["pushBranch.onload"]=!1,a["pushBranch.unreadCount"]=i.unread_count||"",n.setData(a)}}})},a.parseMessageData=function(e){for(var t=[],a=void 0,n=void 0,o=0;o<e.length;o++)switch(parseInt(e[o].type)){case 1:a=e[o].content&&JSON.parse(e[o].content),n={},n.messageType=parseInt(e[o].type),n.className="type-system",n.messageTitle=a.title,n.messageTime=e[o].add_time,n.messageImg=a.pic,n.messageContent=a.description,n.messagePageUrl=e[o].page_url,t.push(n);break;case 2:a=e[o].content&&JSON.parse(e[o].content),n={},n.messageType=parseInt(e[o].type),n.className="type-pay",n.messageTitle="支付成功",n.messageTime=e[o].add_time,n.messageImg="icon-message-pay",n.messagePrice=a.total_price,n.messageOrderId=a.order_id,t.push(n);break;case 3:a=e[o].content&&JSON.parse(e[o].content),n={},n.messageType=parseInt(e[o].type),n.className="type-form",n.messageTitle="表单提交成功",n.messageTime=e[o].add_time,n.messageImg="icon-message-form",n.messageContent=a.form_name,n.messageForm=a.form,n.messageFormId=a.form_id,n.messageFormDataId=e[o].sub_id,n.review_status=e[o].data_info.length?e[o].data_info[0].form_data.review_status:3,n.review_switch=e[o].data_info.length?e[o].data_info[0].form_data.review_switch:0,t.push(n);break;case 4:n={},n.messageType=parseInt(e[o].type),n.className="type-comment",n.messageTitle="评论消息",n.messageTime=e[o].add_time,n.messageImg="icon-message-comment",n.messageContent=e[o].content+" 回复了你的话题",t.push(n);break;case 8:n={},n.messageType=parseInt(e[o].type),n.className="type-Administrators",n.messageTitle="管理员通知",n.messageTime=e[o].add_time,n.messageImg="icon-notify",n.messageContent=e[o].content.replace(/\\n/g,"\n"),t.push(n);break;case 16:a=e[o].content&&JSON.parse(e[o].content),n={},n.messageType=parseInt(e[o].type),n.className="type-push",n.messageTitle="推送消息",n.messageTime=e[o].add_time,n.messageImg="icon-message-push",n.messageContent=a&&a.content||"",n.messageEventParams=a.page_url||"",t.push(n)}return t},a.checkMoreMessageData=function(e){var t=a;switch(e.target.id){case"myMessage-system-message":0==t.data.systemBranch.isMore||t.data.systemBranch.onload||(t.getMessageData(5,t.data.systemBranch.currentPage+1),t.setData({"systemBranch.onload":!0}));break;case"myMessage-interact-message":0==t.data.interactBranch.isMore||t.data.interactBranch.onload||(t.getMessageData(6,t.data.interactBranch.currentPage+1),t.setData({"interactBranch.onload":!0}));break;case"myMessage-push-message":var n=t.data.pushBranch;0==n.isMore||n.onload||(t.getMessageData(16,n.currentPage+1),t.setData({"pushBranch.onload":!0}))}},a.changeMessageType=function(e){6==e.target.dataset.messageType&&a.setData({"interactBranch.unreadCount":0}),a.setData({messageType:e.target.dataset.messageType})},a.jumpToPage=function(e){var t=e.currentTarget.dataset.pageUrl;if(t){var a="/pages/"+t+"/"+t;f.appMethod.turnToPage(a,!0)}},a.showMessageDetailForm=function(e){var t=a,n=e.currentTarget.dataset.form,o=e.currentTarget.dataset.formId,i=e.currentTarget.dataset.formDataId,s=[];f.appMethod.setPageTitle("表单消息"),f.appMethod.sendRequest({url:"/index.php?r=pc/WebAppMgr/getForm",data:{app_id:f.appMethod.globalData.appId,form_id:o},success:function(e){s=e.data.field_arr;for(var a in s)"region_id"===s[a].field&&s.splice(a,1);t.setData({review_switch:e.data.review_switch}),f.appMethod.sendRequest({url:"/index.php?r=AppData/getFormData",data:{app_id:f.appMethod.globalData.appId,form:n,data_id:i},success:function(e){var a=[],n=e.data[0].form_data;for(var o in n){for(var i=-1,r=0;r<s.length;r++)s[r].field==o&&(i=r);if(-1!=i){var c={};switch(parseInt(s[i].type)){case 1:c={},c.dataType=1,c.dataName=s[i].name,c.dataContent=n[o],a.push(c);break;case 2:c={},c.dataType=2,c.dataName=s[i].name,c.dataContent=n[o],a.push(c);break;case 3:c={},c.dataType=3,c.dataName=s[i].name,c.dataContent="富文本类型",a.push(c);break;case 12:c={},c.dataType=12,c.dataName=s[i].name,n[o].map(function(e){e.virtual=""}),c.dataContent=n[o],a.push(c)}i++}}t.setData({messageDetail:3,messageDetailFormData:a,form_data:n})}})}})},a.confirmMessageDetailForm=function(){f.appMethod.setPageTitle("系统通知"),"transforDetail"===a.options.from&&a.getMessageData(),a.setData({messageDetail:0,messageDetailFormData:[]})},a.tapEventCommonHandler=function(e){var t=e.currentTarget.dataset.eventParams;t&&t.action&&"none"!=t.action&&f.appMethod.tapEventCommonHandler(e)},a.getReviewConfig=function(){f.appMethod.sendRequest({url:"/index.php?r=AppConfig/GetAppDataReviewTextConfig",method:"post",hideLoading:!0,success:function(e){a.setData({reviewList:e.data})}})},a.bindplay=function(e){var t=e.currentTarget.dataset,n=t.tag,o=t.index,s=t.id,r=a.data.messageDetailFormData[n].dataContent,c=a.data.contextData||{};Taro.showLoading({title:"加载中"}),r[o].virtual=r[o].fileName,c[s]||(c[s]=Taro.createVideoContext(s)),a.setData((0,i.default)({contextData:c},"messageDetailFormData["+n+"].dataContent",r)),setTimeout(function(){c[s].play(),c[s].requestFullScreen(),Taro.hideLoading()},600)},a.bindPlayVideo=function(e){var t=e.currentTarget.dataset.id,n=a.data.contextData||{};Object.keys(n).length>0&&Object.keys(n).forEach(function(e,a){t!=e&&n[e].pause()})},document.title="系统通知",a}return(0,p.default)(t,e),(0,l.default)(t,[{key:"componentWillMount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,g.getCurrentPageQueryParams)();this.options=e,this.getReviewConfig(),"transforDetail"===e.from?(this.setData({messageDetail:3}),this.showMessageDetailForm({currentTarget:{dataset:{form:e.form,formDataId:e.formDataId,formId:e.formid}}})):this.getMessageData()}},{key:"render",value:function(){var e=this,t=this.state,a=(t.showGetUserInfo,t.messageType),n=t.interactBranch,o=t.messageDetail,i=t.systemBranch,s=t.reviewList,r=t.pushBranch,c=t.messageDetailFormData,l=t.review_switch,d=t.form_data;return React.createElement("div",{className:"official-page my-message"},React.createElement("div",{className:"myMessage-wrap page",id:"myMessage"},0==o&&React.createElement("div",{className:"myMessage-top-nav"},React.createElement("div",{className:"myMessage-type-list"},React.createElement("div",{className:"myMessage-type-item "+(5==a?"active":""),onClick:this.changeMessageType,"data-message-type":"5"},"系统消息"),React.createElement("div",{className:"myMessage-type-item "+(6==a?"active":"")+" "+(n.unreadCount>0?"has-noread":""),onClick:this.changeMessageType,"data-message-type":"6"},"互动消息"),React.createElement("div",{className:"myMessage-type-item "+(16==a?"active":"")+" "+(n.unreadCount>0?"has-noread":""),onClick:this.changeMessageType,"data-message-type":"16"},"推送消息"))),0==o&&React.createElement("div",{className:"myMessage-content-container"},React.createElement(h.ScrollView,{id:"myMessage-system-message",className:"myMessage-content "+(5==a?"active":""),"scroll-y":"true",lowerThreshold:"116",bindscrolltolower:this.checkMoreMessageData},i.data.map(function(t,a){return React.createElement(React.Fragment,{key:t.messageOrderId},1==t.messageType?React.createElement("div",{className:"message-item "+t.className,onClick:e.jumpToPage,"data-page-url":t.messagePageUrl},React.createElement("div",{className:"message-title"},t.messageTitle),React.createElement("div",{className:"message-time"},t.messageTime),React.createElement("img",{className:"message-img",src:t.messageImg}),React.createElement("div",{className:"message-content"},t.messageContent)):2==t.messageType?React.createElement("div",{className:"message-item "+t.className},React.createElement("div",{className:"message-title"},t.messageTitle),React.createElement("div",{className:"message-time"},t.messageTime),React.createElement("div",{className:"message-img"},React.createElement("div",{className:"ico-moon "+t.messageImg})),React.createElement("div",{className:"message-content"},React.createElement("div",{className:"message-price"},React.createElement("div",{className:"message-price-text"},"支付金额："),React.createElement("div",{className:"message-price-text"},"¥"+t.messagePrice)),React.createElement("div",{className:"message-orderNum"},React.createElement("div",{className:"message-orderNum-text"},"订单号："),React.createElement("div",{className:"message-orderNum-text"},t.messageOrderId)))):3==t.messageType?React.createElement("div",{className:"message-item "+t.className,"data-form":t.messageForm,"data-form-id":t.messageFormId,"data-form-data-id":t.messageFormDataId,onClick:e.showMessageDetailForm},React.createElement("div",{className:"message-title"},t.messageTitle),React.createElement("div",{className:"message-time"},t.messageTime),React.createElement("div",{className:"message-img"},React.createElement("div",{className:"ico-moon "+t.messageImg})),React.createElement("div",{className:"message-content"},React.createElement("div",{className:"message-price"},React.createElement("div",{className:"message-price-text"},t.messageContent),(t.review_status||t.review_status>=0)&&1==t.review_switch&&React.createElement("div",{className:"message-price-text"},"状态：",React.createElement("span",{className:0==t.review_status?"":1==t.review_status?"success-examine":"faile-examine"},0==t.review_status?s.applying_text||"待审核":1==t.review_status?s.apply_passed_text||"审核通过":s.apply_unpassed_text||"审核不通过"))))):8==t.messageType&&React.createElement("div",{className:"message-item "+t.className},React.createElement("div",{className:"message-title"},t.messageTitle),React.createElement("div",{className:"message-time"},t.messageTime),React.createElement("div",{className:"message-img"},React.createElement("div",{className:"ico-moon "+t.messageImg})),React.createElement("div",{className:"message-content"},React.createElement("span",null,t.messageContent))))}),!i.data.length&&React.createElement("div",null,React.createElement("div",{className:"request-none"},React.createElement("img",{src:"http://cdn.jisuapp.cn/static/webapp/images/request-none.png",mode:"widthFix"}),React.createElement("div",null,"暂无数据~")))),React.createElement(h.ScrollView,{id:"myMessage-interact-message",className:"myMessage-content "+(6==a?"active":""),"scroll-y":"true",lowerThreshold:"116",bindscrolltolower:this.checkMoreMessageData},n.data.map(function(e,t){return React.createElement(React.Fragment,{key:e.messageOrderId},4==e.messageType&&React.createElement("div",{className:"message-item "+e.className},React.createElement("div",{className:"message-title"},e.messageTitle),React.createElement("div",{className:"message-time"},e.messageTime),React.createElement("div",{className:"message-img"},React.createElement("div",{className:"ico-moon "+e.messageImg})),React.createElement("div",{className:"message-content"},e.messageContent)))}),!n.data.length&&React.createElement("div",null,React.createElement("div",{className:"request-none"},React.createElement("img",{src:"http://cdn.jisuapp.cn/static/webapp/images/request-none.png",mode:"widthFix"}),React.createElement("div",null,"暂无数据~")))),React.createElement(h.ScrollView,{id:"myMessage-push-message",className:"myMessage-content "+(16==a?"active":""),"scroll-y":"true",lowerThreshold:"116",bindscrolltolower:this.checkMoreMessageData},r.data.map(function(t,a){return React.createElement(React.Fragment,{key:t.messageOrderId},16==t.messageType&&React.createElement("div",{className:"message-item "+t.className,"data-event-params":t.messageEventParams,onClick:e.tapEventCommonHandler},React.createElement("div",{className:"message-title"},t.messageTitle),React.createElement("div",{className:"message-time"},t.messageTime),React.createElement("div",{className:"message-img"},React.createElement("div",{className:"ico-moon "+t.messageImg})),React.createElement("div",{className:"message-content"},t.messageContent)))}),!r.data.length&&React.createElement("div",null,React.createElement("div",{className:"request-none"},React.createElement("img",{src:"http://cdn.jisuapp.cn/static/webapp/images/request-none.png",mode:"widthFix"}),React.createElement("div",null,"暂无数据~"))))),3==o&&React.createElement("div",{className:"myMessage-detail-form"},React.createElement("div",{className:"myMessage-form-list"},c.map(function(t,a){return React.createElement("div",{className:"myMessage-form-item",key:a},React.createElement("div",{className:"data-name"},t.dataName),2!=t.dataType&&12!=t.dataType?React.createElement("div",{className:"data-content"},t.dataContent):2==t.dataType?React.createElement(React.Fragment,null,pictureWxsModule.isArray(t.dataContent)?React.createElement(React.Fragment,null,t.dataContent.map(function(e,t){return React.createElement("img",{key:t,className:"data-img",src:e})})):React.createElement(React.Fragment,null,React.createElement("img",{key:!0,className:"data-img",src:t.dataContent}))):12==t.dataType&&React.createElement(React.Fragment,null,React.createElement("div",{className:"data-content"},t.dataContent.map(function(t,n){return React.createElement("div",{className:"video-item",key:n},React.createElement("video",{id:"wxParse"+n,className:"video",poster:t.previewImageUrl,src:t.fileName,"data-id":"wxParse"+n,onPlay:e.bindPlayVideo,controls:!0},React.createElement(CoverView,{className:"controls","data-tag":a,"data-index":n,hidden:t.fileName==t.virtual,"data-id":"wxParse"+n,onClick:e.bindplay})))}))))})),1==l&&React.createElement("div",{className:"myMessage-form-list"},React.createElement("div",{className:"myMessage-form-item"},React.createElement("div",{className:"data-name"},"状态"),React.createElement("div",{className:"data-content"},0==d.review_status?s.applying_text||"待审核":1==d.review_status?s.apply_passed_text||"审核通过":s.apply_unpassed_text||"审核不通过")),d.review_result&&React.createElement("div",{className:"myMessage-form-item"},React.createElement("div",{className:"data-name"},"备注"),React.createElement("div",{className:"data-content"},d.review_result))),React.createElement("div",{className:"myMessage-form-confirm",onClick:this.confirmMessageDetailForm},"关闭"))))}}]),t}(_.default);t.default=y},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(0),i=n(o),s=a(3),r=n(s),c=a(1),l=n(c),d=a(2),u=n(d),m=a(5),p=a(6),f=a(11),g=a(7),h=n(g);a(460);var v=function(e){function t(e){(0,i.default)(this,t);var a=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={integralPage:0,canUseIntegral:0,totalIntegral:0,integralFontSize:60,currentMessageType:"income",navFixed:!1,integralRule:{convertNum:100,consumeNum:0,loginNum:0,postCommentNum:0,shareNum:0},incomeBranch:{data:[],isMore:0,currentPage:1,onload:!1},outcomeBranch:{data:[],isMore:0,currentPage:1,onload:!1}},a.headHeight=180,a.getIntegralDetailData=function(){var e=a;m.appMethod.sendRequest({url:"/index.php?r=AppShop/GetIntegralInfo",success:function(t){var a=(""+t.data.can_use_integral).length+(""+t.data.total_integral).length,n=a>0?60-2*a:60;e.setData({canUseIntegral:t.data.can_use_integral,totalIntegral:t.data.total_integral,integralFontSize:n})}})},a.getIntegralRuleData=function(){var e=a;m.appMethod.sendRequest({url:"/index.php?r=AppShop/IntegralRule",success:function(t){e.setData({"integralRule.convertNum":t.data.convert_num||0,"integralRule.consumeNum":t.data.consume_num,"integralRule.loginNum":t.data.login_num||0,"integralRule.postCommentNum":t.data.post_comment_num,"integralRule.shareNum":t.data.share_num})}})},a.getMessageData=function(e,t){var n=a,o="";"income"==e?o="add":(e="outcome")&&(o="minus"),m.appMethod.sendRequest({url:"/index.php?r=AppShop/UserIntegralAction",data:{action:o,page:t||1},success:function(t){switch(e){case"income":n.setData({"incomeBranch.data":(n.data.incomeBranch.data?n.data.incomeBranch.data.concat(n.parseMessageData(t.data)):n.parseMessageData(t.data))||"","incomeBranch.isMore":t.is_more,"incomeBranch.currentPage":t.current_page||"","incomeBranch.onload":!1});break;case"outcome":n.setData({"outcomeBranch.data":(n.data.outcomeBranch.data?n.data.outcomeBranch.data.concat(n.parseMessageData(t.data)):n.parseMessageData(t.data))||"","outcomeBranch.isMore":t.is_more,"outcomeBranch.currentPage":t.current_page||"","outcomeBranch.onload":!1})}}})},a.parseMessageData=function(e){for(var t=[],a={},n=0;n<e.length;n++)a={content:e[n].content,num:e[n].num,time:e[n].time},t.push(a);return t},a.checkMoreMessageData=function(){var e=a;switch(e.data.currentMessageType){case"income":0==e.data.incomeBranch.isMore||e.data.incomeBranch.onload||(e.getMessageData("income",e.data.incomeBranch.currentPage+1),e.setData({"incomeBranch.onload":!0}));break;case"outcome":0==e.data.outcomeBranch.isMore||e.data.outcomeBranch.onload||(e.getMessageData("outcome",e.data.outcomeBranch.currentPage+1),e.setData({"outcomeBranch.onload":!0}))}},a.fixedMessageNav=function(e){var t=a;e.target.scrollTop<=a.headHeight?t.setData({navFixed:!1}):t.setData({navFixed:!0})},a.setCurrentMessageType=function(e){a.setData({currentMessageType:e.target.dataset.type})},a.showIntegralRule=function(){m.appMethod.setPageTitle("积分规则"),a.setData({integralPage:1})},a.hideIntegralRule=function(){m.appMethod.setPageTitle("个人积分"),a.setData({integralPage:0})},document.title="个人积分",a}return(0,u.default)(t,e),(0,r.default)(t,[{key:"componentWillMount",value:function(){this.getIntegralDetailData(),this.getIntegralRuleData(),this.getMessageData("income"),this.getMessageData("outcome"),this.headHeight=360/(m.appMethod.globalData.systemInfo&&m.appMethod.globalData.systemInfo.rpxRatio?m.appMethod.globalData.systemInfo.rpxRatio:2)}},{key:"render",value:function(){var e=this.state,t=(e.showGetUserInfo,e.integralFontSize),a=e.canUseIntegral,n=e.totalIntegral,o=e.currentMessageType,i=e.navFixed,s=e.incomeBranch,r=e.outcomeBranch,c=e.integralPage,l=e.integralRule;return React.createElement("div",{className:"official-page my-integral"},React.createElement("div",{className:"myIntegral-wrap page",id:"myIntegral"},0==c&&React.createElement(f.ScrollView,{className:"myIntegral-content",bindscroll:this.fixedMessageNav,"scroll-y":"true",lowerThreshold:"116",bindscrolltolower:this.checkMoreMessageData},React.createElement("div",{className:"integral-detail"},React.createElement("div",null,React.createElement("img",{src:"https://cdn.jisuapp.cn/zhichi_frontend/static/jisuapp_editor/images/integralBg.png",className:"integral-bg-img"})),React.createElement("div",{className:"integral-card-bg"}),React.createElement("div",{className:"integral-card"},React.createElement("div",{className:"integral-detail-circle"}),React.createElement("div",{className:"detail-num",style:(0,p.convertLineStyleData)("font-size:"+t+"rpx")},React.createElement("span",null,a+" / "+n)),React.createElement("div",{className:"detail-name"},React.createElement("span",null,"现有积分/总积分")),React.createElement("div",{className:"integral-detail-bottomline"})),React.createElement("div",{className:"detail-rule",onClick:this.showIntegralRule},React.createElement("span",null,"积分规则"),React.createElement("div",{className:"single-icon"},"?"))),React.createElement("div",{className:"message-nav"},React.createElement("div",{className:"type-item "+("income"==o?"active":""),onClick:this.setCurrentMessageType,"data-type":"income"},"收入"),React.createElement("div",{className:"type-item "+("outcome"==o?"active":""),onClick:this.setCurrentMessageType,"data-type":"outcome"},"支出")),React.createElement("div",{className:"message-nav "+(i?"fixed":"nofixed")},React.createElement("div",{className:"type-item "+("income"==o?"active":""),onClick:this.setCurrentMessageType,"data-type":"income"},"收入"),React.createElement("div",{className:"type-item "+("outcome"==o?"active":""),onClick:this.setCurrentMessageType,"data-type":"outcome"},"支出")),React.createElement("div",{className:"message-content "+("income"==o?"active":"")},s.data.map(function(e,t){return React.createElement(React.Fragment,{key:t},React.createElement("div",{className:"message-item"},React.createElement("div",{className:"message-title"},e.content),React.createElement("div",{className:"message-time"},e.time),React.createElement("div",{className:"message-num"},e.num)))})),React.createElement("div",{className:"message-content "+("outcome"==o?"active":"")},r.data.map(function(e,t){return React.createElement(React.Fragment,{key:t},React.createElement("div",{className:"message-item"},React.createElement("div",{className:"message-title"},e.content),React.createElement("div",{className:"message-time"},e.time),React.createElement("div",{className:"message-num"},e.num)))}))),1==c&&React.createElement("div",{className:"myIntegral-rule"},React.createElement("div",{className:"rule-list"},!!+l.consumeNum&&0!=l.consumeNum&&React.createElement("div",{className:"rule-item"},React.createElement("div",{className:"item-name"},"积累规则"),React.createElement("div",{className:"item-content"},"消费 "+l.consumeNum+" 元，获得 1 积分")),0!=l.loginNum&&React.createElement("div",{className:"rule-item"},React.createElement("div",{className:"item-name"},"额外积分"),React.createElement("div",{className:"item-content"},"每天登录送 "+l.loginNum+" 积分")),0!=l.shareNum&&React.createElement("div",{className:"rule-item"},React.createElement("div",{className:"item-name"},"额外积分"),React.createElement("div",{className:"item-content"},"推荐好友送 "+l.shareNum+" 积分")),0!=l.postCommentNum&&React.createElement("div",{className:"rule-item"},React.createElement("div",{className:"item-name"},"额外积分"),React.createElement("div",{className:"item-content"},"商品评论送 "+l.postCommentNum+" 积分")),React.createElement("div",{className:"rule-item"},React.createElement("div",{className:"item-name"},"使用积分"),React.createElement("div",{className:"item-content"},(l.convertNum||"100")+" 积分 = 1元")),React.createElement("div",{className:"rule-item"},React.createElement("div",{className:"item-name"},"提醒"),React.createElement("div",{className:"item-content"},"消费积分并不会影响升级会员卡，与会员升级相关的是总积分"))),React.createElement("div",{className:"confirm-btn",onClick:this.hideIntegralRule},"确定"))))}}]),t}(h.default);t.default=v},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(0),i=n(o),s=a(3),r=n(s),c=a(1),l=n(c),d=a(2),u=n(d),m=(a(5),a(6)),p=a(7),f=n(p);a(462);var g=function(e){function t(e){(0,i.default)(this,t);var a=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={},a.onPullDownRefresh=function(){},a.onReachBottom=function(){},document.title="拼团须知",a}return(0,u.default)(t,e),(0,r.default)(t,[{key:"componentWillMount",value:function(){arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,m.getCurrentPageQueryParams)()}},{key:"componentDidMount",value:function(){}},{key:"componentDidMount",value:function(){}},{key:"componentDidHide",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return React.createElement("div",{className:"official-page group-rules"},React.createElement("div",{className:"wrap"},React.createElement("div",{className:"title"},"参与条件"),React.createElement("div",{className:"content"},"1. 参与用户（包括开团用户和参团用户）需在小程序内允许授权，并绑定有效手机号码，才能参加拼团活动。（若进入时未允许授权，请点击右上角，选择关于，在设置里打开授权。）"),React.createElement("div",{className:"title"},"玩法介绍"),React.createElement("div",{className:"content"},"1. 活动期间，用户可以在拼团商品详情下单发起拼团。"),React.createElement("div",{className:"content"},"2. 用户只有付款成功，才算成功开团或者成功参团，创建订单未付款不算有效参与拼团玩法。"),React.createElement("div",{className:"content"},"3. 拼团列表中显示N人团，为N人成团（例：3人团含义为3人成团，先付款的成员先加入团，人数满3人即为拼团成功）。每位用户在同一个团内只占1个拼团人数。"),React.createElement("div",{className:"content"},"4. 用户在规定时间内达到拼团人数，则拼团成功，商家分别发货；如果未能在规定时间内达到拼团人数，则拼团失败，系统自动触发退款。"),React.createElement("div",{className:"content"},"5. 为保证拼团成功，开团时请根据实际情况选择合适的拼团人数。"),React.createElement("div",{className:"title"},"注意事项"),React.createElement("div",{className:"content"},"1. 用户需在开团后规定的拼团时限内完成拼团，如果在拼团时限内商品拼团活动结束，拼团仍未成功，则默认用户拼团失败。"),React.createElement("div",{className:"content"},"2. 商品开团期间，用户进行中的团（包括自行开团与参团）数量不得超过商家限制的数量（拼团成功与拼团失败的团不计入进行中的团），在每个团中购买的商品数量不得超过商家限制的数量。"),React.createElement("div",{className:"content"},"3. 用户付款成功后，在拼团进行时不可申请退款。")))}}]),t}(f.default);t.default=g},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(0),i=n(o),s=a(3),r=n(s),c=a(1),l=n(c),d=a(2),u=n(d),m=a(5),p=a(6),f=a(7),g=n(f);a(464);var h=function(e){function t(e){(0,i.default)(this,t);var a=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={list:{},more_members_arr:[],orderId:""},a.getOrderInfo=function(){var e=a;m.appMethod.sendRequest({url:"/index.php?r=AppGroupBuy/GetGroupBuyOrderInfo",data:{order_id:e.data.orderId,sub_app_id:e.data.franchisee},success:function(t){var a=t.data,n=a.form_data.remark,o=[],i=Number(a.form_data.group_buy_order_info.max_user_num),s=0;if(i<=5){s=i-a.form_data.group_buy_order_info.team_member_list.length;for(var r=0;r<s;r++)o.push("")}else{s=3-a.form_data.group_buy_order_info.team_member_list.length;for(var c=0;c<s;c++)o.push("")}a.form_data.remark=n?n.replace(/\n|\\n/g,"\n"):n,e.setData({list:a,more_members_arr:o})}})},a.onShareAppMessage=function(e){var t=a,n=a.data.list.form_data.goods_info[0],o=a.data.list.form_data.team_token,i=("button"==e.from?e.target.dataset.detail:n.goods_id,a.data.franchisee),s="/joinGroupDetail?detail="+n.goods_id+"&teamToken="+o+(i?"&franchisee="+i:"")+(m.appMethod.globalData.pageShareKey?"&psid="+m.appMethod.globalData.pageShareKey:""),r=m.appMethod.getUserInfo("nickname")+" 喊你拼单啦~ "+n.price+"元拼"+n.goods_name+"，火爆抢购中......";return m.appMethod.shareAppMessage({title:r,path:s,imageUrl:"https://cdn.jisuapp.cn/zhichi_frontend/static/webapp/images/group_goods_share.jpeg",success:function(e){m.appMethod.sendRequest({hideLoading:!0,url:"/index.php?r=appShop/getIntegralLog",data:{add_time:e},success:function(e){0==e.status&&e.data&&t.setData({rewardPointObj:{showModal:!0,count:e.data,callback:""}})}})}})},a.pay=function(e){var t=a,n=t.data.franchisee?"&franchisee="+t.data.franchisee:"",o="/groupOrderDetail?id="+orderId+n;m.appMethod.goPay({orderId:orderId,successUrl:o})},a.retrieveMoney=function(e){var t=a;m.appMethod.sendRequest({url:"/index.php?r=AppShop/ComfirmRefund",data:{order_id:e.target.dataset.id,sub_shop_app_id:t.data.franchisee},success:function(e){0===e.status&&(Taro.showToast({title:"确认成功"}),t.getOrderInfo(),m.appMethod.globalData.myGroupRefresh=!0)}})},a.onceMore=function(e){var t=e.currentTarget.dataset.id,n=a.data.franchisee?"&franchisee="+a.data.franchisee:"";m.appMethod.turnToPage("/groupGoodsDetail?detail="+t+n)},a.goToOrderDetail=function(){m.appMethod.turnToPage("/myOrder")},document.title="拼团详情",a}return(0,u.default)(t,e),(0,r.default)(t,[{key:"componentWillMount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,p.getCurrentPageQueryParams)(),t=this;t.setData({orderId:e.id||"",franchisee:e.franchisee||""}),t.getOrderInfo()}},{key:"render",value:function(){var e=this.state,t=e.list,a=e.more_members_arr;return React.createElement("div",{className:"official-page group-order-detail"},t.form_data&&React.createElement(React.Fragment,null,React.createElement("div",{className:"order-status"},React.createElement("div",{style:(0,p.convertLineStyleData)("margin-bottom:20rpx;"),hidden:!(1==t.form_data.group_buy_order_info.current_status)},"未开团"),React.createElement("div",{style:(0,p.convertLineStyleData)("margin-bottom:20rpx;"),hidden:!(2==t.form_data.group_buy_order_info.current_status)},"拼团中"),React.createElement("div",{style:(0,p.convertLineStyleData)("margin-bottom:20rpx;"),hidden:!(3==t.form_data.group_buy_order_info.current_status)},"拼团成功"),React.createElement("div",{style:(0,p.convertLineStyleData)("margin-bottom:20rpx;"),hidden:!(4==t.form_data.group_buy_order_info.current_status)},"拼团失败"),React.createElement("div",{style:(0,p.convertLineStyleData)("margin-bottom:20rpx;"),hidden:!(5==t.form_data.group_buy_order_info.current_status)},"拼团结束"),React.createElement("div",{style:(0,p.convertLineStyleData)("font-size:26rpx;")},"团号："+t.form_data.team_token)),React.createElement("div",{className:"contact-info container"},React.createElement("div",{className:"ico-moon icon-location"}),React.createElement("div",{className:"detail-info"},React.createElement("div",{className:"address"},1!=t.form_data.is_self_delivery?"配送地址："+t.form_data.address_info.province.text+t.form_data.address_info.city.text+t.form_data.address_info.district.text+t.form_data.address_info.detailAddress:"自提地址："+t.form_data.self_delivery_info.address),React.createElement("div",{className:"address"},"联系人："+(1!=t.form_data.is_self_delivery?t.form_data.address_info.name:t.form_data.self_delivery_info.contact_name)),React.createElement("div",{className:"address"},"联系电话："+(1!=t.form_data.is_self_delivery?t.form_data.address_info.contact:t.form_data.self_delivery_info.contact_phone)))),React.createElement("div",{className:"contact-info container"},React.createElement("div",{className:"ico-moon icon-comment"}),React.createElement("div",{className:"detail-info"},React.createElement("div",{className:"address"},"买家留言"),React.createElement("div",{className:"address"},React.createElement("span",null,t.form_data.remark)))),React.createElement("div",{className:"container order-detail"},React.createElement("div",{className:"order-id"},"订单号："+t.form_data.order_id),React.createElement("div",{className:"goods-wrap"},React.createElement("img",{src:t.form_data.goods_info[0].cover}),React.createElement("div",{className:"price"},React.createElement("div",{className:"space-between"},React.createElement("div",{className:"goods-name text-overflow"},t.form_data.goods_info[0].goods_name),React.createElement("div",{className:"pay-price"},"¥"+t.form_data.goods_info[0].original_price)),React.createElement("div",{className:"origin-price"},"拼团(-¥"+t.form_data.group_buy_order_info.discount_price+")"),React.createElement("div",{className:"space-between"},React.createElement("div",{className:"goods-spec text-overflow"},t.form_data.goods_info[0].model_value),React.createElement("div",{className:"num"},"x"+t.form_data.goods_info[0].num)))),React.createElement("div",{className:"discount"},React.createElement("div",{className:"content"},React.createElement("div",{className:"ico-moon icon-group-pay"}),"储值金："+t.form_data.use_balance),React.createElement("div",{className:"content"},React.createElement("div",{className:"ico-moon icon-coupon"}),"优惠方式："+t.form_data.selected_benefit.title)),React.createElement("div",{className:"order-info"},"共"+t.form_data.goods_info[0].num+"件商品 实付：",React.createElement("span",{className:"red-price"},"¥"+t.form_data.total_price),"(含运费¥"+t.express_fee+")"),React.createElement("div",{className:"progress",hidden:0===t.form_data.group_buy_order_info.team_member_list.length},React.createElement("div",{className:"title"},"拼团进度："),React.createElement("div",{className:"head-logo"},React.createElement("div",{className:"group-leader"},React.createElement("img",{src:t.form_data.group_buy_order_info.team_member_list[0].thumb}),React.createElement("div",{className:"tag"},"团长")),t.form_data.group_buy_order_info.max_user_num<=5&&React.createElement("div",{className:"group-number"},t.form_data.group_buy_order_info.team_member_list.map(function(e,t){return React.createElement("img",{key:t,hidden:0===t,className:"members",src:e.thumb})}),a.map(function(e,t){return React.createElement("div",{key:t,className:"more-members"},"?")})),t.form_data.group_buy_order_info.max_user_num>5&&React.createElement("div",{className:"group-number"},t.form_data.group_buy_order_info.team_member_list.map(function(e,t){return React.createElement("img",{key:t,className:"members",hidden:0===t||t>2,src:e.thumb})}),a.map(function(e,t){return React.createElement("div",{key:t,className:"more-members"},"?")}),React.createElement("div",{className:"omit"},"..."),t.form_data.group_buy_order_info.team_member_list.length<t.form_data.group_buy_order_info.max_user_num&&React.createElement("div",{className:"more-members"},"?"),t.form_data.group_buy_order_info.team_member_list.length==t.form_data.group_buy_order_info.max_user_num&&React.createElement("img",{className:"members",src:t.form_data.group_buy_order_info.team_member_list[t.form_data.group_buy_order_info.max_user_num-1].thumb}))),React.createElement("div",{className:"total-mumber"},"已拼",React.createElement("span",{className:"red-price"},t.form_data.group_buy_order_info.current_user_count),"人，还差",React.createElement("span",{className:"red-price"},t.form_data.group_buy_order_info.max_user_num-t.form_data.group_buy_order_info.current_user_count),"人成团")),React.createElement("div",{className:"group-info"},React.createElement("div",{className:"centent"},"下单时间："+t.form_data.add_time),React.createElement("div",{className:"centent"},"拼团人数："+t.form_data.group_buy_order_info.max_user_num+"人团"),React.createElement("div",{className:"centent"},"拼团时限："+t.form_data.group_buy_order_info.hour_of_duration+"小时"+t.form_data.group_buy_order_info.minute_of_duration+"分钟"),React.createElement("div",{className:"centent",hidden:!(3==t.form_data.group_buy_order_info.current_status)},"结束时间："+t.form_data.group_buy_order_info.expired_time),React.createElement("div",{className:"centent",hidden:!(3==t.form_data.group_buy_order_info.current_status)},"成功时间："+t.form_data.group_buy_order_info.success_time))),React.createElement("div",{className:"group-btn",hidden:!(1==t.form_data.group_buy_order_info.current_status)},React.createElement("div",{className:"btn white hide"},"取消拼团"),React.createElement("div",{className:"btn red","data-id":t.form_data.order_id,"data-type":t.form_data.goods_type,onClick:this.pay},"立即支付")),React.createElement("div",{className:"group-btn",hidden:!(2==t.form_data.group_buy_order_info.current_status)},React.createElement("button",{className:"btn red",openType:"share","data-detail":t.form_data.goods_info[0].goods_id},"分享")),React.createElement("div",{className:"group-btn",hidden:!(3==t.form_data.group_buy_order_info.current_status)},React.createElement("div",{className:"btn white",style:(0,p.convertLineStyleData)("color:#000;"),onClick:this.goToOrderDetail},"查看订单"),React.createElement("div",{className:"btn yellow","data-id":t.form_data.goods_info[0].goods_id,onClick:this.onceMore},"再拼一次")),React.createElement("div",{className:"group-btn",hidden:!(4==t.form_data.group_buy_order_info.current_status)},React.createElement("div",{className:"btn white","data-id":t.form_data.order_id,onClick:this.retrieveMoney,hidden:7==t.form_data.group_buy_order_info.current_status},"已收到退款"),React.createElement("div",{className:"btn yellow","data-id":t.form_data.goods_info[0].goods_id,onClick:this.onceMore},"再拼一次"))))}}]),t}(g.default);t.default=h},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(0),i=n(o),s=a(3),r=n(s),c=a(1),l=n(c),d=a(2),u=n(d),m=a(5),p=a(6),f=a(7),g=n(f),h=a(12),v=n(h);a(466);var _=function(e){function t(e){(0,i.default)(this,t);var a=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={status:4,formid:[],goodsData:{goods_list:[]}},a.page=1,a.isMore=1,a.seckillFunc=[],a.pageInit=function(){var e=a;m.appMethod.isLogin()?e.loadAll():m.appMethod.goLogin({success:function(){e.loadAll()}})},a.loadAll=function(){a.loadList()},a.loadList=function(){var e=a,t=a.data.goodsData;0==t.is_more||t.loading||(e.setData({"goodsData.loading":!0}),m.appMethod.sendRequest({url:"/index.php?r=appGroupBuy/goodsList",data:{page:e.page,page_size:10,status:0,sub_shop_app_id:e.data.franchiseeId},success:function(t){for(var a=t.data,n={},o=e.data.goodsData.goods_list||[],i=o.length,s=e.downcountArr||[],r=0;r<a.length;r++){var c=a[r],l=void 0;c.description="",c.downCount={hours:"00",minutes:"00",seconds:"00",day:"00"},c.server_time=a.current_time||Date.parse(new Date)/1e3,c.seckill_end_time=v.default.formatTime(new Date(1e3*c.end_date)),c.seckill_start_time=v.default.formatTime(new Date(1e3*c.start_date)),c.original_price="0.00"==c.virtual_price?c.original_price:c.virtual_price,0==c.status||1==c.status||2==c.status?l=m.appMethod.beforeGroupDownCount(c,e,"goodsData.goods_list["+(i+r)+"]"):3==c.status&&"-1"!=c.end_date&&(l=m.appMethod.duringGroupDownCount(c,e,"goodsData.goods_list["+(i+r)+"]")),l&&s.push(l)}1==e.page&&(o=[]),n["goodsData.goods_list"]=o.concat(a),n["goodsData.is_more"]=t.is_more,e.downcountArr=s,e.setData(n),e.page++},complete:function(){var t={};t["goodsData.loading"]=!1,e.setData(t)}}))},a.gotoDetail=function(e){var t=a,n=e.currentTarget.dataset,o=t.data.franchiseeId,i=o?"&franchisee="+o:"";a.saveUserFormId(function(){var e=4==n.status?"/goodsDetail?detail="+n.goodsid+i:"/gpgoodsDetail?goods_id="+n.goodsid+"&activity_id="+n.activityid+i;m.appMethod.turnToPage(e)})},a.remainMe=function(e){var t=a,n=e.currentTarget.dataset,o=n.index,i=t.data.goodsData.goods_list;m.appMethod.sendRequest({url:"/index.php?r=appShop/careActivity",data:{data_id:n.goodsid,activity_id:n.activityid,activity_type:0,sub_shop_app_id:t.data.franchiseeId},success:function(e){for(var t=0;t<i.length;t++)if(o==t){m.appMethod.showToast({title:"设置开团提醒成功！",duration:2e3});var n={};n["goodsData.goods_list["+t+"].status"]=2,a.setData(n)}}})},a.formSubmit_collect=function(e){a.data.formid.push(e.detail.formId)},a.saveUserFormId=function(e){m.appMethod.showLoading({title:"加载中"});var t=a;m.appMethod.sendRequest({url:"/index.php?r=api/AppMsgTpl/saveUserFormId",method:"post",data:{sub_shop_app_id:t.data.franchiseeId,form_id:t.data.formid||[]},complete:function(){m.appMethod.hideLoading(),e&&e(),t.setData({formid:[]})}})},a.onPullDownRefresh=function(){a.page=1,a.loadList(),a.pullRefreshTime=setTimeout(function(){Taro.stopPullDownRefresh()},3e3)},a.onReachBottom=function(){a.loadList()},a.onShareAppMessage=function(){},document.title="拼团中心",a}return(0,u.default)(t,e),(0,r.default)(t,[{key:"componentWillMount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,p.getCurrentPageQueryParams)(),t=this;t.setData({franchiseeId:e.franchisee||"",franchiseeIdInfo:{id:e.franchisee||""}}),t.pageInit()}},{key:"componentDidMount",value:function(){}},{key:"componentDidMount",value:function(){}},{key:"componentDidHide",value:function(){}},{key:"componentWillUnmount",value:function(){if(this.downcountArr&&this.downcountArr.length){this.downcountArr=this.downcountArr.concat().reverse();for(var e=0;e<this.downcountArr.length;e++)this.downcountArr[e]&&this.downcountArr[e].clear()}}},{key:"render",value:function(){var e=this,t=this.state.goodsData;return React.createElement("div",{className:"official-page group-center"},React.createElement("div",{className:"app"},React.createElement("div",{className:"collage-goodsList"},React.createElement("div",{className:"collage-section"},React.createElement("div",{className:"goods-list list"},t.goods_list.map(function(t,a){return React.createElement("div",{className:"goods-item isRelative",key:a,onClick:e.gotoDetail,"data-goodsid":t.goods_id,"data-activityid":t.activity_id,"data-status":t.status},React.createElement("div",{className:"image-wrap"},React.createElement("img",{src:t.cover})),React.createElement("div",{className:"content-wrap"},React.createElement("div",{className:"title"},React.createElement("div",{className:"type"},React.createElement("div",null,React.createElement("span",{className:"ico-moon icon-number-people"})),React.createElement("span",null,0==t.activity_type?t.num_of_people.length>1?"多人团":t.num_of_people[0]+"人团":1==t.activity_type?"新人团":2==t.activity_type?"阶梯团":3==t.activity_type?"帮帮团":"抽奖团")),t.title),3!=t.status||"-1"!=t.end_date?React.createElement("div",{className:"same-line"},React.createElement("div",{className:"first-line"},React.createElement("div",{className:"price-detail"},React.createElement("span",{className:"min-price"},"¥",React.createElement("span",{style:(0,p.convertLineStyleData)("font-size:36rpx;")},t.group_buy_price)),React.createElement("span",{className:"origin-price"},"¥"+t.original_price)),React.createElement("div",{className:"to-join"},0==t.status?React.createElement(React.Fragment,null,React.createElement("button",{className:"ready"},"即将开团")):1==t.status?React.createElement(React.Fragment,null,React.createElement("button",{className:"remain",onClick:e.remainMe,"data-goodsid":t.goods_id,"data-activityid":t.activity_id,"data-index":a},"提醒我")):2==t.status?React.createElement(React.Fragment,null,React.createElement("button",{className:"reminded"},"已提醒")):3==t.status?React.createElement(React.Fragment,null,React.createElement("button",{className:"go"},4==t.activity_type?"参与抽奖":"去拼团")):4==t.status&&React.createElement(React.Fragment,null,React.createElement("button",{className:"over"},"已结束")))),React.createElement("div",{className:"second-line"},React.createElement("div",{className:"sales-num"},React.createElement(React.Fragment,null,"已团"+t.goods_count+"件")),!(3==t.status&&"-1"==t.end_date)&&4!=t.status&&React.createElement("div",{className:"count-big-down"},(3!=t.status?"距开始":"距结束")+" "+("00"!=t.downCount.days&&"0"!=t.downCount.days?t.downCount.days+"天":"")+" "+t.downCount.hours+" : "+t.downCount.minutes+" : "+t.downCount.seconds))):React.createElement("div",{className:"differ-line"},React.createElement("div",{className:"first-line"},React.createElement("div",{className:"price-detail"},React.createElement("span",{className:"min-price"},"¥",React.createElement("span",{style:(0,p.convertLineStyleData)("font-size:36rpx;")},t.group_buy_price)),React.createElement("span",{className:"origin-price"},"¥"+t.original_price)),React.createElement("div",{className:"sales-num"},React.createElement(React.Fragment,null,"已团"+t.goods_count+"件"))),React.createElement("div",{className:"second-line"},React.createElement("div",{className:"to-join"},0==t.status?React.createElement(React.Fragment,null,React.createElement("button",{className:"ready"},"即将开团")):1==t.status?React.createElement(React.Fragment,null,React.createElement("button",{className:"remain",onClick:e.remainMe,"data-goodsid":t.goods_id,"data-activityid":t.activity_id,"data-index":a},"提醒我")):2==t.status?React.createElement(React.Fragment,null,React.createElement("button",{className:"reminded"},"已提醒")):3==t.status?React.createElement(React.Fragment,null,React.createElement("button",{className:"go"},4==t.activity_type?"参与抽奖":"去拼团")):4==t.status&&React.createElement(React.Fragment,null,React.createElement("button",{className:"over"},"已结束")))))))}))))))}}]),t}(g.default);t.default=_},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(0),i=n(o),s=a(3),r=n(s),c=a(1),l=n(c),d=a(2),u=n(d),m=a(5),p=a(6),f=a(7),g=n(f);a(468);var h=function(e){function t(e){(0,i.default)(this,t);var a=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={topNavBarData:{title:"会员卡",isDefault:0},vipList:[]},a.getVIPCardList=function(){var e=a;m.appMethod.sendRequest({url:"/index.php?r=AppShop/GetUserVIPCardList",data:{parent_app_id:m.appMethod.getAppId()},success:function(t){e.setData({vipList:t.data})},complete:function(){}})},a.turnToVipCard=function(e){var t=e.currentTarget.dataset.id,a=e.currentTarget.dataset.appid,n=e.currentTarget.dataset.ispaidcard;m.appMethod.turnToPage("/eCommerce/pages/vipCard/vipCard?detail="+t+"&franchisee="+a+"&is_paid_vip="+n)},document.title="会员卡",a}return(0,u.default)(t,e),(0,r.default)(t,[{key:"componentWillMount",value:function(){this.getVIPCardList()}},{key:"render",value:function(){var e=this,t=this.state,a=(t.showGetUserInfo,t.topNavBarData,t.vipList);return React.createElement("div",{className:"official-page vip-card-list"},React.createElement("div",{className:"page"},React.createElement("div",{className:"vip-banner"},React.createElement("img",{src:"http://cdn.jisuapp.cn/static/webapp/images/franchisee/vip-banner.jpg",mode:"aspectFill"})),React.createElement("div",{className:"vip-list"},a.map(function(t,a){return React.createElement(React.Fragment,{key:t.id},React.createElement("div",{className:"vip-item",style:(0,p.convertLineStyleData)("background: "+(1==t.background_type?t.background:"url("+t.background+")")+";background-size:cover;background-position:center center;"),"data-appid":t.app_id,"data-id":t.id,"data-ispaidcard":t.is_paid_vip,onClick:e.turnToVipCard},React.createElement("div",{className:"vip-item-cover"},React.createElement("img",{src:t.logo,mode:"aspectFill"})),React.createElement("div",{className:"vip-item-info"},React.createElement("div",{className:"vip-item-title"},t.app_name+" "+t.title),0!=t.discount?React.createElement("div",{className:"vip-item-rights"},"可享 "+t.discount+"折"):t.coupon_list&&""!=t.coupon_list?React.createElement("div",{className:"vip-item-rights"},"可享 赠送优惠券"):0!=t.integral?React.createElement("div",{className:"vip-item-rights"},"可享 赠送"+t.integral+"积分"):t.birthday_coupon_list&&""!=t.birthday_coupon_list?React.createElement("div",{className:"vip-item-rights"},"生日 赠送优惠券"):t.is_free_postage&&1==t.is_free_postage&&React.createElement("div",{className:"vip-item-rights"},"可享 包邮")),React.createElement("div",{className:"vip-item-bottom"},"有效日期: "+(-1==t.expired_time?"永久有效":t.expired_time))))})),0==a.length&&React.createElement("div",{className:"no-receive-card"},React.createElement("div",{className:"tip-area"},React.createElement("img",{className:"tip-img",src:"http://cdn.jisuapp.cn/zhichi_frontend/static/webapp/images/no-vip.png"}),React.createElement("span",{className:"tip-text-1"},"暂无可用会员卡"),React.createElement("span",{className:"tip-text-2"},"获取方式，可留意店家消息")))))}}]),t}(g.default);t.default=h},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(9),i=n(o),s=a(0),r=n(s),c=a(3),l=n(c),d=a(1),u=n(d),m=a(2),p=n(m),f=a(5),g=a(6),h=a(11),v=a(7),_=n(v);a(470);var y=function(e){function t(e){(0,r.default)(this,t);var a=(0,u.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={messageType:5,systemBranch:{data:[],isMore:0,currentPage:1,onload:!1,unreadCount:0},interactBranch:{data:[],isMore:0,currentPage:1,onload:!1,unreadCount:0},pushBranch:{data:[],isMore:0,currentPage:1,onload:!1,unreadCount:0},messageDetail:0,messageDetailFormData:[],review_switch:0},a.getMessageData=function(e,t){var n=a;f.appMethod.sendRequest({url:"/index.php?r=AppNotify/GetUserAppNotifyMsg",data:{app_id:f.appMethod.globalData.appId,types:e||"5,6,16",page:t||""},success:function(e){for(var t in e.data)switch(parseInt(t)){case 5:n.setData({"systemBranch.data":n.data.systemBranch.data?n.data.systemBranch.data.concat(n.parseMessageData(e.data[t].data)):n.parseMessageData(e.data[t].data),"systemBranch.isMore":e.data[t].is_more||"","systemBranch.currentPage":e.data[t].current_page||"","systemBranch.onload":!1,"systemBranch.unreadCount":e.data[t].unread_count||""})}}})},a.parseMessageData=function(e){for(var t=[],a=void 0,n=void 0,o=0;o<e.length;o++)switch(parseInt(e[o].type)){case 3:a=e[o].content&&JSON.parse(e[o].content),n={},n.messageType=parseInt(e[o].type),n.className="type-form",n.messageTitle="表单提交成功",n.messageTime=e[o].add_time,n.messageImg="icon-message-form",n.messageContent=a.form_name,n.messageForm=a.form,n.messageFormId=a.form_id,n.messageFormDataId=e[o].sub_id,n.review_status=e[o].data_info.length?e[o].data_info[0].form_data.review_status:3,n.review_switch=e[o].data_info?e[o].data_info[0].form_data.review_switch:0,t.push(n)}return t},a.checkMoreMessageData=function(e){var t=a;switch(e.target.id){case"myMessage-system-message":0==t.data.systemBranch.isMore||t.data.systemBranch.onload||(t.getMessageData(5,t.data.systemBranch.currentPage+1),t.setData({"systemBranch.onload":!0}));break;case"myMessage-interact-message":0==t.data.interactBranch.isMore||t.data.interactBranch.onload||(t.getMessageData(6,t.data.interactBranch.currentPage+1),t.setData({"interactBranch.onload":!0}));break;case"myMessage-push-message":var n=t.data.pushBranch;0==n.isMore||n.onload||(t.getMessageData(16,n.currentPage+1),t.setData({"pushBranch.onload":!0}))}},a.showMessageDetailForm=function(e){var t=a,n=e.currentTarget.dataset.form,o=e.currentTarget.dataset.formId,i=e.currentTarget.dataset.formDataId,s=[];f.appMethod.setPageTitle("表单消息"),f.appMethod.sendRequest({url:"/index.php?r=pc/WebAppMgr/getForm",data:{app_id:f.appMethod.globalData.appId,form_id:o},success:function(e){s=e.data.field_arr;for(var a in s)"region_id"===s[a].field&&s.splice(a,1);t.setData({review_switch:e.data.review_switch}),f.appMethod.sendRequest({url:"/index.php?r=AppData/getFormData",data:{app_id:f.appMethod.globalData.appId,form:n,data_id:i},success:function(e){var a=[],n=e.data[0].form_data;for(var o in n){for(var i=-1,r=0;r<s.length;r++)s[r].field==o&&(i=r);if(-1!=i){var c={};switch(parseInt(s[i].type)){case 1:c={},c.dataType=1,c.dataName=s[i].name,c.dataContent=n[o],a.push(c);break;case 2:c={},c.dataType=2,c.dataName=s[i].name,c.dataContent=n[o],a.push(c);break;case 3:c={},c.dataType=3,c.dataName=s[i].name,c.dataContent="富文本类型",a.push(c)}i++}}t.setData({messageDetail:3,messageDetailFormData:a,form_data:n})}})}})},a.confirmMessageDetailForm=function(){f.appMethod.setPageTitle("表单提交信息"),a.setData({messageDetail:0,messageDetailFormData:[]})},a.getReviewConfig=function(){f.appMethod.sendRequest({url:"/index.php?r=AppConfig/GetAppDataReviewTextConfig",method:"post",hideLoading:!0,success:function(e){a.setData({reviewList:e.data})}})},a.bindplay=function(e){var t=e.currentTarget.dataset,n=t.tag,o=t.index,s=t.id,r=a.data.messageDetailFormData[n].dataContent,c=a.data.contextData||{};Taro.showLoading({title:"加载中"}),r[o].virtual=r[o].fileName,c[s]||(c[s]=Taro.createVideoContext(s)),a.setData((0,i.default)({contextData:c},"messageDetailFormData["+n+"].dataContent",r)),setTimeout(function(){c[s].play(),c[s].requestFullScreen(),Taro.hideLoading()},600)},a.bindPlayVideo=function(e){var t=e.currentTarget.dataset.id,n=a.data.contextData||{};Object.keys(n).length>0&&Object.keys(n).forEach(function(e,a){t!=e&&n[e].pause()})},document.title="表单提交信息",a}return(0,p.default)(t,e),(0,l.default)(t,[{key:"componentWillMount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,g.getCurrentPageQueryParams)();this.options=e,this.getReviewConfig(),"transforDetail"===e.from?(this.setData({messageDetail:3}),this.showMessageDetailForm({currentTarget:{dataset:{form:e.form,formDataId:e.formDataId,formId:e.formid}}})):this.getMessageData()}},{key:"render",value:function(){var e=this,t=this.state,a=(t.showGetUserInfo,t.messageType),n=t.systemBranch,o=t.reviewList,i=t.messageDetail,s=t.messageDetailFormData,r=t.review_switch,c=t.form_data;return React.createElement("div",{className:"official-page my-form-message"},React.createElement("div",{className:"myMessage-wrap page",id:"myMessage"},0==i&&React.createElement("div",{className:"myMessage-content-container"},React.createElement(h.ScrollView,{id:"myMessage-system-message",className:"myMessage-content "+(5==a?"active":""),"scroll-y":"true",lowerThreshold:"116",bindscrolltolower:this.checkMoreMessageData},n.data.map(function(t,a){return React.createElement(React.Fragment,{key:!0},3==t.messageType&&React.createElement("div",{className:"message-item "+t.className,"data-form":t.messageForm,"data-form-id":t.messageFormId,"data-form-data-id":t.messageFormDataId,onClick:e.showMessageDetailForm},React.createElement("div",{className:"message-title"},t.messageTitle),React.createElement("div",{className:"message-time"},t.messageTime),React.createElement("div",{className:"message-img"},React.createElement("div",{className:"ico-moon "+t.messageImg})),React.createElement("div",{className:"message-content"},React.createElement("div",{className:"message-price"},React.createElement("div",{className:"message-price-text"},t.messageContent),(t.review_status||t.review_status>=0)&&1==t.review_switch&&React.createElement("div",{className:"message-price-text"},"状态：",React.createElement("span",{className:0==t.review_status?"":1==t.review_status?"success-examine":"faile-examine"},0==t.review_status?o.applying_text||"待审核":1==t.review_status?o.apply_passed_text||"审核通过":o.apply_unpassed_text||"审核不通过"))))))}),!n.data.length&&React.createElement("div",null,React.createElement("div",{className:"request-none"},React.createElement("img",{src:"http://cdn.jisuapp.cn/static/webapp/images/request-none.png",mode:"widthFix"}),React.createElement("div",null,"暂无数据~"))))),3==i&&React.createElement("div",{className:"myMessage-detail-form"},React.createElement("div",{className:"myMessage-form-list"},s.map(function(t,a){return React.createElement("div",{className:"myMessage-form-item",key:!0},React.createElement("div",{className:"data-name"},t.dataName),2!=t.dataType&&12!=t.dataType?React.createElement("div",{className:"data-content"},t.dataContent):2==t.dataType?React.createElement(React.Fragment,null,pictureWxsModule.isArray(t.dataContent)?React.createElement(React.Fragment,null,t.dataContent.map(function(e,t){return React.createElement("img",{key:!0,className:"data-img",src:e})})):React.createElement(React.Fragment,null,React.createElement("img",{key:!0,className:"data-img",src:t.dataContent}))):12==t.dataType&&React.createElement(React.Fragment,null,React.createElement("div",{className:"data-content"},t.dataContent.map(function(t,n){return React.createElement("div",{className:"video-item",key:!0},React.createElement("video",{id:"wxParse"+n,className:"video",poster:t.previewImageUrl,src:t.fileName,"data-id":"wxParse"+n,onPlay:e.bindPlayVideo,controls:!0},React.createElement(CoverView,{className:"controls","data-tag":a,"data-index":n,hidden:t.fileName==t.virtual,"data-id":"wxParse"+n,onClick:e.bindplay})))}))))})),1==r&&React.createElement("div",{className:"myMessage-form-list"},React.createElement("div",{className:"myMessage-form-item"},React.createElement("div",{className:"data-name"},"状态"),React.createElement("div",{className:"data-content"},0==c.review_status?o.applying_text||"待审核":1==c.review_status?o.apply_passed_text||"审核通过":o.apply_unpassed_text||"审核不通过")),c.review_result&&React.createElement("div",{className:"myMessage-form-item"},React.createElement("div",{className:"data-name"},"备注"),React.createElement("div",{className:"data-content"},c.review_result))),React.createElement("div",{className:"myMessage-form-confirm",onClick:this.confirmMessageDetailForm},"关闭"))))}}]),t}(_.default);t.default=y},function(e,t){},function(t,a,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(a,"__esModule",{value:!0});var i=n(31),s=o(i),r=n(17),c=o(r),l=n(0),d=o(l),u=n(3),m=o(u),p=n(1),f=o(p),g=n(2),h=o(g);n(32),n(16);var v=n(5),_=n(6),y=n(7),E=o(y);n(472);var b=function(t){function a(t){(0,d.default)(this,a);var n=(0,f.default)(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,t));return n.state={orderInfo:{},orderStatus:[{0:"待付款",1:"待发货",2:"待收货",3:"待评价",4:"退款审核中",5:"退款中",6:"已完成",7:"已关闭"},{0:"待付款",1:"待确认",2:"待消费",3:"待评价",4:"退款审核中",5:"退款中",6:"已完成",7:"已关闭"},{0:"待付款",1:"待接单",2:"待送餐",3:"待评价",4:"退款审核中",5:"退款中",6:"已完成",7:"已关闭"},{0:"待付款",1:"待商家确认",2:"商家已确认",3:"已完成",4:"退款审核中",5:"退款中",6:"已完成",7:"已关闭"}],addressList:[],selectAddressId:"",addressDialogHidden:!0,goodsAdditionalInfo:{},hasAdditionalInfo:!1,customFields:[],isFromBack:!1,orderId:"",isFromTemplateMsg:!1,discountList:[],toStoreInfo:{},originalPrice:"",openBalance:!0,currentBalance:"",useBalance:"",freghtSwitch:"",freightAdress:{},delivery:"",express_fee:"",discount_cut_price:""},n.dataInitial=function(){n.getOrderDetail(n.data.orderId),n.getFreigtAdress(),n.initialAddressId()},n.getOrderDetail=function(e,t){var a=n;v.appMethod.getOrderDetail({data:{order_id:e,sub_shop_app_id:n.data.franchiseeId},success:function(e){var n=e.data[0].form_data,o=a.data.hasAdditionalInfo,i="";if(n.totalPay=n.total_price,!t)for(var s=0;s<n.goods_info.length;s++){var r=n.goods_info[s].delivery_id;r&&"0"!=r&&(a.getGoodsCustomField(s,r),o=!0)}n.address_info&&a.data.freghtSwitch&&(i=n.address_info.address_id,a.setData({selectAddressId:i})),n.tostore_data&&n.tostore_data.appointed_time&&(n.tostore_data.format_appointed_time=n.tostore_data.appointed_time.substr(11,5)),a.setData({orderInfo:n,discountList:n.can_use_benefit.data,index:n.can_use_benefit.selected_index,hasAdditionalInfo:o,toStoreInfo:n.tostore_data,discount_cut_price:n.discount_cut_price,currentBalance:Number(e.data[0].balance),useBalance:Number(n.use_balance),express_fee:e.data[0].express_fee}),a.data.franchiseeId?a.setData({openBalance:!1}):0==a.data.orderInfo.status&&a.data.currentBalance<a.data.useBalance&&v.appMethod.showToast({title:"储值金不足，请及时充值",success:function(){a.isUseBalance()}})}})},n.orderDelete=function(e){var t=n.data.orderId,a=n.data.franchiseeId;v.appMethod.showModal({content:"订单删除后不可找回，确认删除？",showCancel:!0,cancelText:"取消",confirmText:"确定",confirm:function(){v.appMethod.sendRequest({url:"/index.php?r=AppShop/HideOrder",data:{order_id:t,sub_shop_app_id:a},success:function(e){v.appMethod.turnBack()}})}})},n.getGoodsCustomField=function(e,t){var a=n;v.appMethod.sendRequest({url:"/index.php?r=pc/AppShop/GetDelivery",data:{delivery_id:t},success:function(t){var n=t.data.delivery_info,o=a.data.orderInfo.goods_info[e].goods_id,i={},s=[];i["goodsAdditionalInfo."+o]=n;for(var r=0;r<n.length;r++){var c={};c.type=n[r].type,c.title=n[r].name,s.push(c)}i["customFields["+e+"]"]=s,a.setData(i)}})},n.customFieldInput=function(e){var t=e.currentTarget.dataset,a=t.goodsIndex,o=t.fieldIndex,i=e.detail.value,s={};s["customFields["+a+"]["+o+"].value"]=i,n.setData(s)},n.uploadCustomFieldImage=function(e){var t=n,a=e.currentTarget.dataset,o=a.goodsIndex,i=a.fieldIndex,s={};v.appMethod.chooseImage(function(e){s["customFields["+o+"]["+i+"].value"]=e,t.setData(s)},9)},n.deleteCustomFieldImage=function(e){var t=e.currentTarget.dataset,a=t.goodsIndex,o=t.fieldIndex,i=n.data.customFields[a][o].value,s=t.imageIndex,r={};i.splice(s,1),r["customFields["+a+"]["+o+"].value"]=i,n.setData(r)},n.sendDeliveryInfo=function(){for(var e={},t=n.data.orderInfo.goods_info,a=0;a<t.length;a++)e[t[a].goods_id]=n.data.customFields[a];v.appMethod.sendRequest({url:"/index.php?r=AppShop/SetAdditional",method:"POST",data:{order_id:n.data.orderInfo.order_id,additional_info:e},success:function(e){}})},n.cancelOrder=function(e){var t=n.data.orderInfo.order_id,a=n;v.appMethod.showModal({content:"是否取消订单？",showCancel:!0,confirmText:"是",cancelText:"否",confirm:function(){v.appMethod.sendRequest({url:"/index.php?r=AppShop/cancelOrder",data:{order_id:t,sub_shop_app_id:a.data.franchiseeId},success:function(e){var t={};t["orderInfo.status"]=7,a.setData(t)}})}})},n.payOrder=function(e){var t,a=n.data.orderInfo.address_info,o=n;return a||3==n.data.orderInfo.goods_type?(n.data.hasAdditionalInfo&&n.sendDeliveryInfo(),t=n.data.orderInfo.order_id,0==n.data.orderInfo.totalPay?void v.appMethod.sendRequest({url:"/index.php?r=AppShop/paygoods",data:{order_id:t,total_price:0},success:function(e){v.appMethod.showToast({title:"支付成功",success:function(){o.getOrderDetail(o.data.orderInfo.order_id)}})}}):void v.appMethod.goPay({orderId:o.data.orderInfo.order_id})):void v.appMethod.showModal({content:"请选择邮寄地址"})},n.applyDrawback=function(){var e=n.data.orderInfo.order_id,t=n;v.appMethod.showModal({content:"确定要申请退款？",showCancel:!0,confirmText:"确定",cancelText:"取消",confirm:function(){v.appMethod.sendRequest({url:"/index.php?r=AppShop/applyRefund",data:{order_id:e,sub_shop_app_id:t.data.franchiseeId},success:function(e){var a={};a["orderInfo.status"]=4,t.setData(a)}})}})},n.receiveDrawback=function(){var e=n.data.orderInfo.order_id,t=n;v.appMethod.showModal({content:"确定已收到退款？",showCancel:!0,confirmText:"确定",cancelText:"取消",confirm:function(){v.appMethod.sendRequest({url:"/index.php?r=AppShop/comfirmRefund",data:{order_id:e,sub_shop_app_id:t.data.franchiseeId},success:function(e){var a={};a["orderInfo.status"]=7,t.setData(a)}})}})},n.checkLogistics=function(){var e=n.data.orderInfo.order_id;v.appMethod.turnToPage("/eCommerce/pages/logisticsPage/logisticsPage?detail="+e)},n.sureReceipt=function(){var e=n.data.orderInfo.order_id,t=n;v.appMethod.showModal({content:"确定已收到货物？",showCancel:!0,confirmText:"确定",cancelText:"取消",confirm:function(){v.appMethod.sendRequest({url:"/index.php?r=AppShop/comfirmOrder",data:{order_id:e,sub_shop_app_id:t.data.franchiseeId},success:function(e){var a={};a["orderInfo.status"]=3,t.setData(a)}})}})},n.makeComment=function(){var e=n.data.franchiseeId,t="/eCommerce/pages/makeComment/makeComment?detail="+n.data.orderInfo.order_id+(e?"&franchisee="+e:"");v.appMethod.turnToPage(t)},n.addAddress=function(){var e=n.data.orderInfo.order_id;v.appMethod.turnToPage("/eCommerce/pages/addAddress/addAddress?oid="+e)},n.selectAddress=function(e){var t=e.currentTarget.dataset.index,a=n.data.orderInfo.order_id,o=n.data.addressList[t],i=n;v.appMethod.sendRequest({url:"/index.php?r=AppShop/setAddress",data:{order_id:a,address_id:o.id,sub_shop_app_id:i.data.franchiseeId,is_self_delivery:delivery},success:function(e){i.setData({"orderInfo.address_info":o.address_info}),i.hideAddressList(),i.changeFreightWay()}})},n.editAddress=function(e){var t=e.currentTarget.dataset.index,a=n.data.addressList[t].id,o=n.data.orderInfo.order_id;v.appMethod.turnToPage("/eCommerce/pages/addAddress/addAddress?id="+a+"&oid="+o)},n.showAddressList=function(){var e=n.data.selectAddressId,t=n.data.orderInfo.order_id,a=n.data.franchiseeId;v.appMethod.turnToPage("/eCommerce/pages/myAddress/myAddress?id="+e+"&oid="+t+"&sub_shop_id="+a,!0)},n.showAddAddress=function(){var e=n.data.orderInfo.order_id,t=n;v.appMethod.chooseAddress({success:function(a){v.appMethod.sendRequest({method:"post",url:"/index.php?r=AppShop/AddWxAddress",data:{detailInfo:a.detailInfo||"",cityName:a.cityName||"",provinceName:a.provinceName||"",UserName:a.userName||"",telNumber:a.telNumber||"",district:a.district||"",countyName:a.countyName||"",order_id:e},success:function(){t.dataInitial()}})}})},n.hideAddressList=function(){n.setData({addressDialogHidden:!0})},n.deleteAddress=function(e){var t=e.currentTarget.dataset.index,a=n.data.addressList[t].id,o=n;v.appMethod.showModal({content:"确定要删除地址？",showCancel:!0,confirmText:"确定",cancelText:"取消",confirm:function(){v.appMethod.sendRequest({url:"/index.php?r=AppShop/delAddress",data:{address_id:a},success:function(e){var n=o.data.addressList,i={};n.splice(t,1),i.addressList=n,a==o.data.orderInfo.address_info.id&&(i["orderInfo.address_info"]=null),o.setData(i)}})}})},n.previewImage=function(e){v.appMethod.previewImage({current:e.currentTarget.dataset.src})},n.goToHomepage=function(){var e=v.appMethod.getHomepageRouter();v.appMethod.turnToPage("/pages/"+e+"/"+e,!0)},n.changeDiscount=function(e){var t=n,a=(t.data.orderInfo.can_use_benefit.selected_index,parseInt(e.detail.value));n.setData({index:a});var o=t.data.orderInfo.can_use_benefit.data[a].discount_type,i=t.data.orderInfo.can_use_benefit.data[a].coupon_id;v.appMethod.sendRequest({url:"/index.php?r=AppShop/ChangeOrder",data:{app_id:v.appMethod.getAppId(),order_id:t.data.orderInfo.order_id,discount_type:o,coupon_id:i,sub_shop_app_id:t.data.franchiseeId},success:function(e){t.getOrderDetail(e.data[0].form_data.order_id)}})},n.verificationCode=function(){v.appMethod.turnToPage("/eCommerce/pages/verificationCodePage/verificationCodePage?detail="+n.data.orderInfo.order_id+"&sub_shop_app_id="+n.data.franchiseeId)},n.customerConfirm=function(){var e=n;v.appMethod.sendRequest({url:"/index.php?r=AppShop/CompleteTostoreOrder",data:{order_id:n.data.orderInfo.order_id},success:function(){var t={};t["orderInfo.status"]=6,e.setData(t)}})},n.isUseBalance=function(e){var t=n,a="";a=e?Number(e.detail.value):0,v.appMethod.sendRequest({url:"/index.php?r=AppShop/ChangeOrder",data:{app_id:v.appMethod.getAppId(),order_id:t.data.orderInfo.order_id,sub_shop_app_id:t.data.franchiseeId,is_balance:a},success:function(e){t.getOrderDetail(e.data[0].form_data.order_id)}})},n.freghtRadioChange=function(e){var t="",a=n,o=n.data.orderInfo.order_id,i="";2==e.detail.value?(t=!0,i=1):(t=!1,i=0),v.appMethod.sendRequest({url:"/index.php?r=AppShop/setAddress",data:{is_self_delivery:i,order_id:o,address_id:a.data.selectAddressId,sub_shop_app_id:a.data.franchiseeId},success:function(e){a.changeFreightWay()}}),n.setData({freghtSwitch:t,delivery:i})},n.getFreigtAdress=function(){var e=n;v.appMethod.sendRequest({url:"/index.php?r=AppShop/getAppShopLocationInfo",data:{app_id:v.appMethod.getAppId()},success:function(t){e.setData({freightAdress:t.data})}})},n.freightGoMap=function(){var e=n,t=e.data.freightAdress.region_string+e.data.freightAdress.shop_location;t=t.replace(/\s+/g,""),v.appMethod.sendRequest({url:"/index.php?r=Map/GetLatAndLngByAreaInfo",data:{location_info:t},success:function(e){e.result&&Taro.openLocation({latitude:e.result.location.lat,longitude:e.result.location.lng})}})},n.initialAddressId=function(){var e=n;v.appMethod.sendRequest({url:"/index.php?r=AppShop/addressList",data:{app_id:v.appMethod.getAppId()},success:function(t){t.data.length&&e.setData({selectAddressId:t.data[0].id})}})},n.changeFreightWay=function(){var t=n;Number(e.detail.value);v.appMethod.sendRequest({url:"/index.php?r=AppShop/ChangeOrder",data:{app_id:v.appMethod.getAppId(),order_id:t.data.orderInfo.order_id,sub_shop_app_id:t.data.franchiseeId},success:function(e){t.getOrderDetail(e.data[0].form_data.order_id)}})},n.freightPlayPhone=function(){var e=n;v.appMethod.makePhoneCall(e.data.freightAdress.shop_contact)},document.title="订单详情",n}return(0,h.default)(a,t),(0,m.default)(a,[{key:"componentWillMount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,_.getCurrentPageQueryParams)();this.setData({orderId:e.detail,isFromTemplateMsg:"template_msg"===e.from,franchiseeId:e.franchisee||""}),this.dataInitial()}},{key:"componentDidMount",value:function(){this.data.isFromBack?this.data.orderInfo.order_id&&this.getOrderDetail(this.data.orderInfo.order_id,1):this.setData({isFromBack:!0})}},{key:"render",value:function(){var e=this,t=this.state,a=(t.showGetUserInfo,t.isFromTemplateMsg),n=t.orderStatus,o=t.orderInfo,i=t.freightAdress,r=t.freghtSwitch,l=t.toStoreInfo,d=t.customFields,u=t.goodsAdditionalInfo,m=t.express_fee,p=t.discountList,f=t.discount_cut_price,g=t.openBalance,h=t.useBalance,v=t.currentBalance;return React.createElement("div",{className:"official-page order-detail"},React.createElement("div",{className:"orderDetail-wrap page",id:"orderDetail"},a&&React.createElement("div",{className:"orderDetail-section orderDetail-goto-homepage",onClick:this.goToHomepage,style:(0,_.convertLineStyleData)("margin-bottom:0;")},React.createElement("div",{className:"ico-moon icon-rightarrow"}),"返回首页"),React.createElement("div",{className:"orderDetail-section",style:(0,_.convertLineStyleData)("color:#fff;background-color:#535961;")},React.createElement("div",{style:(0,_.convertLineStyleData)("margin-bottom:4px;")},"订单状态："+o.goods_type&&o.status&&n[o.goods_type][o.status]),React.createElement("div",null,"订单号："+o.order_id)),0!=i.is_self_delivery&&0==o.goods_type&&React.createElement("div",{className:"orderDetail-section"},React.createElement(RadioGroup,{className:"freght-radio",onChange:this.freghtRadioChange},React.createElement("label",{className:"radio"},React.createElement(Radio,{value:"1",checked:"checked"}),"快递"),React.createElement("label",{className:"radio"},React.createElement(Radio,{value:"2"}),"上门自提"))),(0==o.goods_type||1==o.goods_type||2==o.goods_type)&&React.createElement("div",{className:"orderDetail-section orderDetail-address-detail right-arrow-bar","data-id":o.address_info?o.address_info.address_id:"",hidden:r},o.address_info?React.createElement(React.Fragment,null,React.createElement("div",{onClick:this.showAddressList},React.createElement("div",null,o.address_info.name+" "+o.address_info.contact),React.createElement("div",{style:(0,_.convertLineStyleData)("color:#aaa;")},o.address_info.province.text+o.address_info.city.text+o.address_info.district.text+o.address_info.detailAddress)),o.status<1&&React.createElement("div",{className:"orderDetail-address-ops"},React.createElement("span",{onClick:this.showAddressList},"更换地址"))):React.createElement(React.Fragment,null,React.createElement("div",{className:"ico-moon icon-rightarrow"}),React.createElement("div",{onClick:this.goToMyAddress},"添加地址"))),React.createElement("div",{className:"orderDetail-section",hidden:!r},React.createElement("div",{onClick:this.freightGoMap,className:"locationName"},React.createElement("label",{className:"ico-moon icon-location freightAdress-ico"}),i.region_string+" "+i.shop_location),React.createElement("div",{className:"freightAdress-phone",onClick:this.freightPlayPhone},React.createElement("label",{className:"ico-moon icon-phone freightAdress-ico"}),i.shop_contact),React.createElement("div",{className:"freightAdress-tip"},"亲，勾选上门店自提,需要自己去门店取货哦！")),3==o.goods_type&&React.createElement(React.Fragment,null,React.createElement("div",{className:"orderDetail-section"},React.createElement("div",{className:"tostore-queue-section"},React.createElement("span",null,"取餐号: "+l.formatted_queue_num),React.createElement("span",{className:"pull-right"},"取餐时间 "+l.format_appointed_time)),React.createElement("div",{className:"orderDetail-item-row"},"位置信息:",React.createElement("span",null,o.location_name)),React.createElement("div",{className:"orderDetail-item-row"},"就餐方式:",1==l.tostore_order_type?React.createElement("span",null,"点餐"):React.createElement("span",null,"预约 "+l.tostore_appointment_time)),React.createElement("div",{className:"orderDetail-item-row"},"手机号码:",React.createElement("span",null,l.tostore_buyer_phone)),React.createElement("div",{className:"orderDetail-item-row"},"备注信息:",React.createElement("span",null,l.tostore_remark||"无")))),React.createElement("div",{className:"orderDetail-section"},React.createElement("div",{className:"orderDetail-order-list"},o.goods_info&&o.goods_info.map(function(t,a){return React.createElement(React.Fragment,{key:!0},React.createElement("div",{className:"dialog-block-item"},React.createElement("img",{className:"list-goods-cover",src:t.cover}),React.createElement("div",{className:"list-goods-content"},React.createElement("div",null,t.goods_name),t.model_value&&React.createElement("div",{className:"list-goods-model"},t.model_value)),React.createElement("div",{className:"list-goods-right"},React.createElement("div",null,"¥"+t.price),React.createElement("div",null,"× "+t.num))),u[t.goods_id]&&React.createElement("div",{className:"dialog-block-item"},u[t.goods_id].map(function(n,i){return React.createElement("div",{className:"customField-container",key:!0},o.additional_info&&o.additional_info[t.goods_id]?React.createElement(React.Fragment,null,"text"===n.type||"mul-text"===n.type?React.createElement(React.Fragment,null,React.createElement("div",null,n.name+":"+o.additional_info[t.goods_id][i].value)):"picture"===n.type&&React.createElement(React.Fragment,null,o.additional_info[t.goods_id][i].value.map(function(t,a){return React.createElement("div",{className:"custom-field-image",key:!0},React.createElement("img",{src:t,mode:"aspectFit",onClick:e.previewImage,"data-src":t}))}))):React.createElement(React.Fragment,null,"text"===n.type?React.createElement(React.Fragment,null,React.createElement("input",{"data-name":n.name,"data-goods-index":a,"data-field-index":i,placeholder:n.name,onInput:e.customFieldInput})):"mul-text"===n.type?React.createElement(React.Fragment,null,React.createElement("textarea",{"data-name":n.name,"data-goods-index":a,"data-field-index":i,placeholder:n.name,onInput:e.customFieldInput})):"picture"===n.type&&React.createElement(React.Fragment,null,d[a][i].value.map(function(t,n){return React.createElement("div",{className:"custom-field-image",key:!0},React.createElement("img",{src:t,mode:"aspectFit",onClick:e.previewImage,"data-src":t}),React.createElement("label",{className:"delete-img",onClick:e.deleteCustomFieldImage,"data-goods-index":a,"data-field-index":i,"data-image-index":n},"×"))}),React.createElement("div",{className:"upload-field-image",onClick:e.uploadCustomFieldImage,"data-name":n.name,"data-goods-index":a,"data-field-index":i},n.name))))})))})),React.createElement("div",{className:"dialog-block-item"},React.createElement("div",{className:"orderDetail-item-row"},"商品总额：",React.createElement("span",{className:"pull-right"},"¥"+o.original_price)),React.createElement("div",{className:"orderDetail-item-row",hidden:3==o.goods_type},"物流费用：",m&&0!=m&&React.createElement("span",{className:"pull-right"},"¥"+m),(!m||0==m)&&React.createElement("span",{className:"pull-right"},"包邮")),React.createElement("div",{className:"orderDetail-item-row",hidden:o.selected_benefit&&null==o.selected_benefit.discount_type},React.createElement(c.default,{disabled:0!=o.status,onChange:this.changeDiscount,rangeKey:"title",value:index,range:p},React.createElement("div",{className:"picker"},"店铺优惠：",React.createElement("span",{style:(0,_.convertLineStyleData)("float:right;")},p[index].title)))),React.createElement("div",{className:"orderDetail-item-row",hidden:o.selected_benefit&&null==o.selected_benefit.discount_type},"优惠抵扣：",React.createElement("span",{className:"pull-right"},"- ¥"+f))),React.createElement("div",{className:"dialog-block-item"},React.createElement("div",{className:"orderDetail-item-row"},"下单时间：",React.createElement("span",{className:"pull-right"},o.add_time)),1==g&&0==o.status&&React.createElement("div",{className:"orderDetail-item-row balance"},"储值金：",React.createElement(s.default,{className:"pull-right",checked:0!=h,type:"switch",onChange:this.isUseBalance}),React.createElement("span",{className:"pull-right balance-num"},"¥"+v)),0!=o.status&&React.createElement("div",{className:"orderDetail-item-row"},"储值抵扣：",React.createElement("span",{className:"pull-right"},"- ¥"+h)),React.createElement("div",{className:"orderDetail-item-row"},"实付价格：",React.createElement("span",{className:"orderDetail-pay-count pull-right"},"¥"+o.totalPay))),React.createElement("div",{className:"txt-r orderDetail-btn-status"},0==o.status&&React.createElement(React.Fragment,null,React.createElement("span",{className:"btn orderDetail-cancel-order",onClick:this.cancelOrder},"取消订单"),React.createElement("span",{className:"btn btn-orange orderDetail-pay-directly",onClick:this.payOrder},"立即支付")),1==o.status&&React.createElement(React.Fragment,null,React.createElement("span",null,n[o.goods_type][1]),React.createElement("span",{className:"btn orderDetail-verification-code",onClick:this.verificationCode},"核销码"),3!=o.goods_type&&React.createElement("span",{className:"btn orderDetail-apply-drawback",onClick:this.applyDrawback},"申请退款")),2==o.status&&React.createElement(React.Fragment,null,React.createElement("span",{className:"btn orderDetail-verification-code",onClick:this.verificationCode},"核销码"),3==o.goods_type&&React.createElement("span",{className:"btn orderDetail-verification-code",onClick:this.customerConfirm},"确认"),3!=o.goods_type&&React.createElement("span",{className:"btn orderDetail-check-logistics",onClick:this.checkLogistics},"查看物流"),3!=o.goods_type&&React.createElement("span",{className:"btn orderDetail-apply-drawback",onClick:this.applyDrawback},"申请退款"),3!=o.goods_type&&React.createElement("span",{className:"btn btn-orange orderDetail-sure-receipt",onClick:this.sureReceipt},"确认收货")),3==o.status&&React.createElement(React.Fragment,null,3!=o.goods_type&&React.createElement("span",{className:"btn myOrder-delete",onClick:this.orderDelete},"刪除订单"),3!=o.goods_type&&React.createElement("span",{className:"btn orderDetail-check-logistics",onClick:this.checkLogistics},"查看物流"),3!=o.goods_type&&React.createElement("span",{className:"btn btn-orange orderDetail-make-comment",onClick:this.makeComment},"去评价")),4==o.status&&React.createElement(React.Fragment,null,React.createElement("span",null,"退款审核中")),5==o.status&&React.createElement(React.Fragment,null,React.createElement("span",{className:"btn orderDetail-receive-drawback",onClick:this.receiveDrawback},"收到退款")),6==o.status&&React.createElement(React.Fragment,null,React.createElement("span",{className:"btn orderDetail-verification-code",onClick:this.verificationCode},"核销码"),3!=o.goods_type&&React.createElement("span",{className:"btn orderDetail-check-logistics",onClick:this.checkLogistics},"查看物流"),React.createElement("span",{className:"btn myOrder-delete",onClick:this.orderDelete},"刪除订单")),7==o.status&&React.createElement(React.Fragment,null,React.createElement("span",{className:"btn myOrder-delete",onClick:this.orderDelete},"刪除订单"))))))}}]),a}(E.default);a.default=b},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(26),i=n(o),s=a(0),r=n(s),c=a(3),l=n(c),d=a(1),u=n(d),m=a(2),p=n(m);a(27);var f=a(5),g=a(6),h=a(7),v=n(h);a(474);var _=function(e){function t(e){(0,r.default)(this,t);var a=(0,u.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={topNavBarData:{isDefault:0,title:"商品详情"},goodsInfo:{},addToShoppingCartCount:0,selectModelInfo:{models:[],stock:"",price:"",buyCount:0},pageQRCodeData:{shareDialogShow:"100%",shareMenuShow:!1},defaultPhoto:"",addToShoppingCartHidden:!0,ifAddToShoppingCart:!0,priceDiscountStr:"",cartGoodsNum:0,cartGoodsTotalPrice:0,pageNavigating:!1},a.numChangeTimeout="",a.goodsId="",a.models="",a.cartData="",a.cart_id="",a.fromBack=!1,a.franchiseeId="",a.touchStartPos={},a.dataInitial=function(){a.getGoodsDetail()},a.getGoodsDetail=function(){var e=a;f.appMethod.sendRequest({url:"/index.php?r=AppShop/getGoods",data:{data_id:a.goodsId,sub_shop_app_id:a.franchiseeId},success:function(t){e.modifyGoodsDetail(t),e.getCartList()}})},a.getCartList=function(){var e=a;f.appMethod.sendRequest({hideLoading:!0,url:"/index.php?r=AppShop/cartList",data:{page:1,page_size:100,sub_shop_app_id:a.franchiseeId,parent_shop_app_id:a.franchiseeId?f.appMethod.globalData.appId:""},success:function(t){var a=0,n=0,o=0,i=!1;e.cartData=t.data;for(var s=t.data.length-1;s>=0;s--){var r=t.data[s];3==r.goods_type&&(i=!0,a+=+r.num*+r.price,n+=+r.num),e.goodsId==r.goods_id&&(r.model?r.model==e.models&&(o=r.num,e.cart_id=r.id):(o=r.num,e.cart_id=r.id))}e.setData({tostoreTypeFlag:i,cartGoodsNum:n,cartGoodsTotalPrice:a.toFixed(2),addToShoppingCartCount:o})}})},a.onShareAppMessage=function(){var e=a,t=a.goodsId,n=(a.data.contact,a.franchiseeId),o=f.appMethod.globalData.PromotionUserToken?"&user_token="+f.appMethod.globalData.PromotionUserToken:"",i="/pages/toStoreDetail/toStoreDetail?detail="+t+(n?"&franchisee="+n:"")+o+(f.appMethod.globalData.pageShareKey?"&psid="+f.appMethod.globalData.pageShareKey:"");return f.appMethod.shareAppMessage({path:i,success:function(t){f.appMethod.showToast({title:"转发成功",duration:500}),f.appMethod.sendRequest({hideLoading:!0,url:"/index.php?r=appShop/getIntegralLog",data:{add_time:t},success:function(t){0==t.status&&t.data&&e.setData({rewardPointObj:{showModal:!0,count:t.data,callback:""}})}})}})},a.goToShoppingCart=function(){var e=a.franchiseeId,t="/eCommerce/pages/shoppingCart/shoppingCart"+(e?"?franchisee="+e:"");f.appMethod.turnToPage(t)},a.modifyGoodsDetail=function(e){var t,n,o,i,s=f.appMethod.getAppCurrentPage(),r=e.data[0].form_data,c=(r.description,[]),l=[],d="",u={},m=a;if(r.business_time&&r.business_time.business_time){for(var p=r.business_time.business_time,g="",i=0;i<p.length;i++)g+=p[i].start_time.substring(0,2)+":"+p[i].start_time.substring(2,4)+"-"+p[i].end_time.substring(0,2)+":"+p[i].end_time.substring(2,4)+"/";g="出售时间："+g.substring(0,g.length-1),m.setData({businesssTimeString:g})}if(r.model_items.length){a.models=r.model_items[0].model;var h=r.model_items;n=h[0].price,t=h[0].stock,o=h[0].id}else n=r.price,t=r.stock;for(var v in r.model)if(v){var _=r.model[v];c.push(_),l.push(_.subModelId[0])}r.model=c,0!=Number(r.max_can_use_integral)&&(d="（积分可抵扣"+Number(r.max_can_use_integral)/100+"元）"),u={goodsInfo:r,"selectModelInfo.models":l,"selectModelInfo.stock":t,"selectModelInfo.price":n,"selectModelInfo.modelId":o||"",priceDiscountStr:d,goodsRate:(100*r.goods_rate.level_1).toFixed(0)},r.model.length?u.showSelectModel=!0:u.showChangeCount=!0,s.setData(u)},a.hiddeAddToShoppingCart=function(){a.setData({addToShoppingCartHidden:!0})},a.selectSubModel=function(e){var t=e.target.dataset,n=t.modelIndex,o=t.submodelIndex,i=0,s={},r=a.models.split(",");r[n]=t.submodelId,a.models=r.join(",");for(var c=a.cartData.length-1;c>=0;c--){var l=a.cartData[c];a.goodsId==l.goods_id&&(l.model?l.model==a.models&&(i=l.num,a.cart_id=l.id):(i=l.num,a.cart_id=l.id))}a.setData({addToShoppingCartCount:i}),s["selectModelInfo.models["+n+"]"]=a.data.goodsInfo.model[n].subModelId[o],a.setData(s),a.resetSelectCountPrice()},a.resetSelectCountPrice=function(){for(var e=a.data.selectModelInfo.models.join(","),t=a.data.goodsInfo.model_items,n={},o=t.length-1;o>=0;o--)if(t[o].model==e){n["selectModelInfo.stock"]=t[o].stock,n["selectModelInfo.price"]=t[o].price,n["selectModelInfo.modelId"]=t[o].id;break}a.setData(n)},a.clickMinusButton=function(e){+a.data.addToShoppingCartCount<=0||a.changeCartGoodsNum("minus")},a.clickPlusButton=function(e){a.changeCartGoodsNum("plus")},a.changeCartGoodsNum=function(e){a.numChangeTimeout&&clearTimeout(a.numChangeTimeout);var t,n=a.data.goodsInfo,o=+a.data.addToShoppingCartCount,i="plus"==e?o+1:o-1,s=+a.data.cartGoodsNum,r=+a.data.cartGoodsTotalPrice,c=("plus"==e?n.price:n.price,a);return i>+n.stock?void f.appMethod.showModal({content:"库存不足"}):0==i&&"minus"==e?void f.appMethod.sendRequest({hideLoading:!0,url:"/index.php?r=AppShop/deleteCart",method:"post",data:{cart_id_arr:[c.cart_id],sub_shop_app_id:c.franchiseeId},success:function(e){c.getCartList()},fail:function(e){c.setData({addToShoppingCartCount:o,cartGoodsNum:s,cartGoodsTotalPrice:r})}}):(t={goods_id:n.id,model_id:n.modelId||"",num:i,sub_shop_app_id:c.franchiseeId},void(a.numChangeTimeout=setTimeout(function(){f.appMethod.sendRequest({url:"/index.php?r=AppShop/addCart",data:t,success:function(e){c.cart_id=e.data,c.getCartList()},successStatusAbnormal:function(e){c.setData({addToShoppingCartCount:0})}})},300)))},a.clickModelMinusButton=function(){var e=+a.data.addToShoppingCartCount,t=a;if(!(e<=0))return e<=1?void f.appMethod.sendRequest({hideLoading:!0,url:"/index.php?r=AppShop/deleteCart",method:"post",data:{cart_id_arr:[t.cart_id],sub_shop_app_id:t.franchiseeId},success:function(){t.setData({addToShoppingCartCount:e-1}),t.getCartList()},fail:function(e){t.setData({addToShoppingCartCount:currentGoodsNum,cartGoodsNum:currentCartNum,cartGoodsTotalPrice:currentTotalPrice})}}):void a.sureAddToShoppingCart()},a.clickModelPlusButton=function(){var e=a.data.selectModelInfo;if(+a.data.addToShoppingCartCount+1>+e.stock)return void f.appMethod.showModal({content:"库存不足"});a.sureAddToShoppingCart("plus")},a.sureAddToShoppingCart=function(e){var t=a,n=+a.data.addToShoppingCartCount;"plus"==e?n+=1:n-=1;var o={goods_id:a.goodsId,model_id:a.data.selectModelInfo.modelId||"",num:n,sub_shop_app_id:a.franchiseeId||""};f.appMethod.sendRequest({url:"/index.php?r=AppShop/addCart",data:o,success:function(e){t.cart_id=e.data.data,t.setData({addToShoppingCartCount:n}),t.getCartList()},successStatusAbnormal:function(e){t.setData({addToShoppingCartCount:0})}})},a.readyToPay=function(){if(!(a.data.cartGoodsNum<=0)&&a.data.tostoreTypeFlag){var e=a.franchiseeId,t="/orderMeal/pages/previewOrderDetail/previewOrderDetail"+(e?"?franchisee="+e:"");f.appMethod.turnToPage(t)}},a.goTostoreComment=function(){var e=a.franchiseeId,t="/orderMeal/pages/tostoreComment/tostoreComment?detail="+a.goodsId+(e?"&franchisee="+e:"");f.appMethod.turnToPage(t)},a.showQRCodeComponent=function(){var e=a,t=a.data.goodsInfo,n=f.appMethod.createAnimation({timingFunction:"ease",duration:400});f.appMethod.sendRequest({url:"/index.php?r=AppDistribution/DistributionShareQRCode",data:{obj_id:e.goodsId,type:3,text:t.title,price:e.data.showChangeCount?t.price:e.data.selectModelInfo.price,goods_img:t.img_urls?t.img_urls[0]:t.cover,sub_shop_id:e.franchiseeId,p_id:f.appMethod.globalData.p_id||""},success:function(t){n.bottom("0").step(),e.setData({"pageQRCodeData.shareDialogShow":0,"pageQRCodeData.shareMenuShow":!0,"pageQRCodeData.goodsInfo":t.data,"pageQRCodeData.animation":n.export()})}})},a.getValidateTostore=function(){var e=a;f.appMethod.sendRequest({hideLoading:!0,url:"/index.php?r=AppShop/precheckShoppingCart",data:{sub_shop_app_id:e.franchiseeId||"",parent_shop_app_id:e.franchiseeId?f.appMethod.getAppId():""},success:function(t){e.readyToPay()},successStatusAbnormal:function(t){f.appMethod.showModal({content:t.data,confirm:function(){1==t.status&&e.goToShoppingCart()}})}})},a.pageTouchStart=function(e){var t=e.touches;t.length>1||(a.touchStartPos={clientX:t[0].clientX,clientY:t[0].clientY})},a.pageTouchMove=function(e){},a.stopPropagation=function(){},document.title="商品详情",a}return(0,p.default)(t,e),(0,l.default)(t,[{key:"componentWillMount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,g.getCurrentPageQueryParams)(),t=e.contact||"",a=f.appMethod.getDefaultPhoto(),n=e.user_token;this.setData({contact:t,defaultPhoto:a}),n&&(f.appMethod.globalData.PromotionUserToken=n),this.goodsId=e.detail||"",this.franchiseeId=e.franchisee||"",this.dataInitial()}},{key:"componentDidMount",value:function(){this.fromBack?(this.getCartList(),this.resetSelectCountPrice()):this.fromBack=!0}},{key:"render",value:function(){var e=this,t=this.state,a=(t.topNavBarData,t.pageQRCodeData,t.rewardPointObj,t.shareGiftsObj,t.collectGiftsObj,t.collectGetObj,t.showGetUserInfo,t.goodsInfo),n=t.indicatorDots,o=(t.wxParseDescription,t.addToShoppingCartCount),s=t.showChangeCount,r=t.selectModelInfo,c=t.showSelectModel,l=t.businesssTimeString,d=t.goodsRate,u=t.cartGoodsNum,m=t.cartGoodsTotalPrice,p=t.tostoreTypeFlag;return React.createElement("div",{className:"official-page to-store-detail"},React.createElement("div",{className:"toStore-detail-wrap",onTouchStart:this.pageTouchStart,onTouchMove:this.pageTouchMove},React.createElement("div",{className:"toStore-detail-content"},React.createElement("div",null,React.createElement("div",{className:"toStore-detail-nav"},React.createElement("div",{className:"pull-right ico-moon icon-share",onClick:this.showQRCodeComponent})),a.img_urls?React.createElement("div",{className:"slick-carousel-container"},React.createElement(i.default,{dots:n,infinite:!0,autoplay:!0,autoplayInterval:5e3},a.img_urls.map(function(e,t){return React.createElement("div",{key:t,class:"slider-img-wrap"},React.createElement("img",{src:e,className:"slide-image"}))}))):React.createElement("div",{className:"toStore-cover-container"},React.createElement("img",{src:a.cover,mode:"aspectFill",onLoad:this.toStoreCoverOnload})),React.createElement("div",{className:"toStore-goods-info"},React.createElement("div",{className:"toStore-goods-title"},a.title),React.createElement("div",{className:"toStore-goods-details rich-text",dangerouslySetInnerHTML:{__html:a.description}}),s&&React.createElement("div",{style:(0,g.convertLineStyleData)("margin-top: 30px;margin-bottom:10px;overflow: hidden;")},"2"!=a.integral?React.createElement(React.Fragment,null,React.createElement("div",{className:"toStore-price"},"¥"+a.price)):React.createElement(React.Fragment,null,"0.00"!=a.price&&React.createElement("div",{className:"toStore-price"},"¥"+a.price),"0.00"!=a.price&&0!=a.max_can_use_integral&&React.createElement("div",{className:"toStore-price"},"+"),0!=a.max_can_use_integral&&React.createElement("div",{className:"toStore-price"},a.max_can_use_integral+"积分")),React.createElement("div",{className:"quantity",style:(0,g.convertLineStyleData)("position:absolute;right:20px;")},React.createElement("label",{className:"minus "+(o<=0?"disabled":"")}),React.createElement("span",{className:"buy-goods-count"},o),React.createElement("label",{className:"plus"}),React.createElement("div",{className:"response-area response-area-minus",onClick:this.clickMinusButton}),React.createElement("div",{className:"response-area response-area-plus",onClick:this.clickPlusButton}))),c&&React.createElement("div",{style:(0,g.convertLineStyleData)("text-align:left")},React.createElement("div",{className:"pay-toStore-models"},a.model.map(function(t,a){return React.createElement("div",{key:!0},React.createElement("span",{style:(0,g.convertLineStyleData)("vertical-align:top;line-height:32px;width:120rpx;display:inline-block;text-align:right;margin-left:-25px;font-size:24rpx;")},t.name+"："),React.createElement("label",{className:"pills-list",style:(0,g.convertLineStyleData)("width:528rpx;")},t.subModelName.map(function(n,o){return React.createElement("label",{key:!0,"data-model-index":a,"data-submodel-index":o,className:"subModel "+(r.models[a]==t.subModelId[o]?"select":""),"data-submodel-id":t.subModelId[o],onClick:e.selectSubModel},n)})))})),React.createElement("div",{className:"dialog-block-item"},React.createElement("div",{className:"clearfix"},"2"!=a.integral?React.createElement(React.Fragment,null,React.createElement("div",{className:"pay-current-price pull-left"},"¥"+r.price)):React.createElement(React.Fragment,null,"0.00"!=r.price&&React.createElement("div",{className:"pay-current-price pull-left"},"¥"+r.price),"0.00"!=r.price&&0!=a.max_can_use_integral&&React.createElement("div",{className:"pay-current-price pull-left"},"+"),0!=a.max_can_use_integral&&React.createElement("div",{className:"pay-current-price pull-left"},a.max_can_use_integral+"积分")),React.createElement("div",{className:"pull-right"},React.createElement("div",{className:"quantity"},React.createElement("label",{className:"minus "+(r.buyCount<1?"disabled":"")}),React.createElement("span",{className:"buy-goods-count"},o),React.createElement("label",{className:"plus"}),React.createElement("div",{className:"response-area response-area-minus",onClick:this.clickModelMinusButton}),React.createElement("div",{className:"response-area response-area-plus",onClick:this.clickModelPlusButton})))))),React.createElement("div",{className:"businesssTime"},l)),React.createElement("div",{className:"tostore-goods-comment"},React.createElement("span",{onClick:this.goTostoreComment},"查看评价（好评度",React.createElement("span",{style:(0,g.convertLineStyleData)("color: #ff7100;")},d+"%"),"）"),React.createElement("label",{className:"ico-moon icon-rightarrow",style:(0,g.convertLineStyleData)("vertical-align:middle;")})))),React.createElement("div",{className:"toStore-bottom-nav"},React.createElement("div",{className:"bottom-nav-detail",onClick:this.goToShoppingCart},React.createElement("label",{className:"icon-shoppingcart ico-moon"},0!=u&&React.createElement("label",{className:"toStore-cart-tip"},u)),React.createElement("span",null,"¥"+m)),React.createElement("div",{className:"bottom-nav-ready "+(0==u?"disabled":"")+" "+(p?"":"disabled"),onClick:this.getValidateTostore},"选好了"))))}}]),t}(v.default);t.default=_},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(0),i=n(o),s=a(3),r=n(s),c=a(1),l=n(c),d=a(2),u=n(d),m=a(5),p=a(12),f=n(p),g=a(6),h=a(7),v=n(h);a(476);var _=function(e){function t(e){(0,i.default)(this,t);var a=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={topNavBarData:{title:"优惠券",isDefault:0},detailShow:!1,status:"receive",couponId:"",franchiseeId:"",couponDetail:{},receiveSuccess:0,receiveCount:0,receiveLimitNum:0,rechargeSuccess:0,verifySuccess:!1,verifyQrcodeUrl:"",verifyShow:!1,verifyData:{success:!1,qrcodeUrl:""},recving:!1,recv_type:"",coupon:{}},a.getCouponInfo=function(){var e=a;m.appMethod.sendRequest({url:"/index.php?r=AppShop/GetCouponInfo",data:{sub_app_id:e.data.franchiseeId,coupon_id:e.data.couponId},hideLoading:!0,success:function(t){e.setCouponData(t.data)}})},a.getUserListCouponInfo=function(){var e=a;m.appMethod.sendRequest({url:"/index.php?r=AppShop/getUserListCouponInfo",data:{sub_app_id:e.data.franchiseeId,user_coupon_id:e.data.couponId,verify_log_order_by:"desc"},hideLoading:!0,success:function(t){var a=t.data[0];if(!a)return e.setData({status:"receive"}),void e.getCouponInfo();var n=a.form_data&&a.form_data.verify_log||[];n&&0!==n.length&&n.forEach(function(e){e.add_time=f.default.formatTimeYMD(e.add_time,"YYYY/MM/DD hh:mm:ss")}),e.setCouponData(a)}})},a.setCouponData=function(e){var t=a,n="",o="";0==e.type?n="满"+e.condition+"，减"+e.value+"元":1==e.type?n="打"+e.value+"折":2==e.type?n="可抵扣"+e.value+"元":3==e.type?""==e.extra_condition?n="直接兑换"+e.coupon_goods_info.title:e.extra_condition.price?n="消费满"+e.extra_condition.price+"元可兑换"+e.coupon_goods_info.title:e.extra_condition.goods_id&&(n="购买"+e.condition_goods_info.title+"可兑换"+e.coupon_goods_info.title):4==e.type?n="储值金可充值"+e.value+"元":5==e.type?n=e.extra_condition:6==e.type&&(n="可使用"+parseInt(e.value)+"次"),e.user_condition_list&&e.user_condition_list.length>0?e.user_condition_list.forEach(function(t,a){a==e.user_condition_list.length-1?o+=t:o=o+t+","}):("0"==e.user_condition&&(o="所有用户"),"1"==e.user_condition&&(o="所有会员"));var i=e;i.useCondition=n,i.stampsUser=o,t.setData({couponDetail:i}),t.setData({detailShow:!0})},a.goToHomepage=function(){var e=m.appMethod.getHomepageRouter();m.appMethod.turnToPage("/pages/"+e+"/"+e,1)},a.formSubmit=function(e){var t=a,n=e.detail.formId;a.data.recving||(a.setRecving(!0),m.appMethod.sendRequest({url:"/index.php?r=AppShop/RecvCoupon",data:{coupon_id:t.data.couponId,sub_app_id:t.data.franchiseeId,form_id:n,recv_type:t.data.recv_type},hideLoading:!0,success:function(e){t.setData({receiveSuccess:1,receiveCount:e.data.recv_count,receiveLimitNum:e.data.limit_num,"couponDetail.is_already_recv":e.data.is_already_recv}),setTimeout(function(){t.hideReceiveToast()},3e3)},complete:function(){t.setRecving(!1)}}))},a.setRecving=function(e){a.setData({recving:e})},a.gotoTransferPage=function(){var e="/eCommerce/pages/transferPage/transferPage";a.data.franchiseeId&&(e+="?franchisee="+a.data.franchiseeId),m.appMethod.turnToPage(e,!1)},a.gotoRecharge=function(e){var t=a,n=e.currentTarget.dataset.id;m.appMethod.sendRequest({url:"/index.php?r=AppShop/useCoupon",data:{user_coupon_id:n},hideLoading:!0,success:function(e){t.setData({rechargeSuccess:1,"couponDetail.status":2}),setTimeout(function(){t.hideRechargeToast()},3e3)}})},a.hideReceiveToast=function(){a.setData({receiveSuccess:0,receiveCount:0,receiveLimitNum:0})},a.hideRechargeToast=function(){a.setData({rechargeSuccess:0})},a.onShareAppMessage=function(e){var t=a,n=t.data.franchiseeId,o="";return"receive"==t.data.status?o=t.data.couponId:"use"==t.data.status&&(o=t.data.couponDetail.coupon_id),{title:"速抢！限量优惠券，别说我不爱你~",path:"/pages/couponDetail/couponDetail?status="+(t.data.status||"receive")+"&detail="+o+"&franchisee="+n,success:function(e){},fail:function(e){}}},a.showCouponVerify=function(){var e=m.appMethod.globalData.siteBaseUrl+"/index.php?r=AppShop/couponQrcode&app_id="+(a.data.franchiseeId?a.data.franchiseeId:m.appMethod.globalData.appId)+"&user_coupon_id="+a.data.couponId;a.setData({detailShow:!1,verifyShow:!0,"verifyData.qrcodeUrl":e}),a.connectSocket()},a.hideCouponVerify=function(){a.setData({detailShow:!0,verifyShow:!1}),clearInterval(a.timeInterval),a.socketOpen&&m.appMethod.closeSocket()},a.timeInterval="",a.socketOpen=!1,a.connectSocket=function(){var e=a;m.appMethod.connectSocket({url:"wss://ceshi.zhichiwangluo.com",header:{"content-type":"application/json"},method:"GET"}),m.appMethod.onSocketOpen(function(t){e.socketOpen=!0;var a={action:"mark_client",user_token:m.appMethod.globalData.userInfo.user_token,scenario_name:"app_coupon_verify",session_key:m.appMethod.globalData.sessionKey};m.appMethod.sendSocketMessage({data:JSON.stringify(a)}),e.timeInterval=setInterval(function(){var e={action:"heartbeat",user_token:m.appMethod.globalData.userInfo.user_token,scenario_name:"app_coupon_verify",session_key:m.appMethod.globalData.sessionKey};m.appMethod.sendSocketMessage({data:JSON.stringify(e)})},3e4)}),m.appMethod.onSocketMessage(function(t){var a=e.data.couponDetail,n=JSON.parse(t.data);if("push_to_client"==n.action){var o=JSON.parse(n.msg);if("app_coupon_verify"==o.type&&0==o.status){if(6!=a.type)e.setData({"couponDetail.status":2});else{var i=a.un_verify_times-1,s=a.verified_times+1;e.setData({"couponDetail.un_verify_times":i,"couponDetail.verified_times":s}),0==i&&e.setData({"couponDetail.status":2})}e.setData({"verifyData.success":!0}),clearInterval(e.timeInterval),m.appMethod.closeSocket()}}}),m.appMethod.onSocketClose(function(t){e.socketOpen=!1,clearInterval(e.timeInterval),console.log("WebSocket 已关闭！")}),m.appMethod.onSocketError(function(t){e.socketOpen=!1,console.log("WebSocket连接打开错误，请检查！")})},a.turnToCouponGoodsList=function(e){var t="receive"===a.data.status?a.data.couponId:a.data.couponDetail.coupon_id,n=a.data.franchiseeId,o="/eCommerce/pages/couponGoodsListPage/couponGoodsListPage?detail="+t;n&&(o+="&franchisee="+n),m.appMethod.turnToPage(o)},a.toggleVerificationDetail=function(){var e=a.data.verificationDetailShow,t=!e,n=t?"核销详情":"优惠券";a.setData({detailShow:!t,verificationDetailShow:t,"topNavBarData.title":n})},document.title="优惠券",a}return(0,u.default)(t,e),(0,r.default)(t,[{key:"componentWillMount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,g.getCurrentPageQueryParams)(),t=this,a=e.status||"receive",n=e.detail||"",o=e.franchisee||"",i=e.recv_type||"";t.setData({status:a,couponId:n,franchiseeId:o,recv_type:i}),"receive"==a?t.getCouponInfo():"use"==a&&t.getUserListCouponInfo()}},{key:"componentWillUnmount",value:function(){var e=this;clearInterval(e.timeInterval),e.socketOpen&&m.appMethod.closeSocket()}},{key:"render",value:function(){var e=this.state,t=e.couponDetail,a=e.detailShow,n=e.status,o=e.coupon,i=e.receiveSuccess,s=e.receiveCount,r=e.receiveLimitNum,c=e.rechargeSuccess,l=e.verifyShow,d=e.verifyData,u=e.verificationDetailShow;return React.createElement("div",{className:"official-page coupon-detail"},React.createElement("div",{className:"page",id:"couponDetail",style:(0,g.convertLineStyleData)("background: "+t.background)},React.createElement("div",{className:"coupon-detail-wrap "+(a?"show":"")},React.createElement("div",{className:"top-section"},React.createElement("img",{className:"logo",src:t.logo}),React.createElement("div",{className:"name"},t.app_name),React.createElement("div",{className:"ico-moon icon-share-new share",hidden:"use"==n&&0==t.in_show_list||"receive"==n&&(0==t.enable_status||0==t.stock||0==t.in_show_list)},React.createElement("button",{className:"share-btn",onClick:this.shareClickEvent})),React.createElement("div",{className:"division-line"},React.createElement("div",{className:"left-circle",style:(0,g.convertLineStyleData)("background: "+t.background)}),React.createElement("div",{className:"right-circle",style:(0,g.convertLineStyleData)("background: "+t.background)}))),React.createElement("div",{className:"middle-section"},React.createElement("div",{className:"title",style:(0,g.convertLineStyleData)("use"==n&&4!=t.type?"padding-right:90rpx;":"")},t.title),React.createElement("div",{className:"sub-title"},t.sub_title),"use"==n&&4!=t.type&&React.createElement("div",{className:"ico-moon icon-qrcode-new qrcode",onClick:this.showCouponVerify}),React.createElement("div",null,"receive"!=n||0!=t.enable_status&&0!=t.in_show_list||2==t.exchangeable?"receive"==n&&0==t.stock&&2!=t.exchangeable?React.createElement("div",{className:"function-btn disabled"},"已领完"):"receive"==n&&1==t.is_already_recv&&2!=t.exchangeable?React.createElement("div",{className:"function-btn disabled"},"已领取"):"receive"==n&&0==t.is_already_recv&&2!=t.exchangeable?React.createElement("button",{className:"function-btn",onClick:this.formSubmit,"data-coupon-id":o.id,style:(0,g.convertLineStyleData)("background-color:"+t.button_color)},"立即领取"):"use"==n&&2==t.status?React.createElement("div",{className:"function-btn disabled"},"已使用"):"use"==n&&3==t.status?React.createElement("div",{className:"function-btn disabled"},"已失效"):"use"==n&&4==t.status?React.createElement("div",{className:"function-btn disabled"},"未生效"):"use"==n&&3==t.type?React.createElement("div",null):"use"==n&&4==t.type?React.createElement("div",{className:"function-btn",onClick:this.gotoRecharge,"data-id":t.id,style:(0,g.convertLineStyleData)("background-color:"+t.button_color)},"立即充值"):"use"==n&&5==t.type&&React.createElement("div",null):React.createElement("div",{className:"function-btn disabled"},"已下架")),React.createElement("div",{className:"detail-item condition"},React.createElement("div",{className:"item-name"},"使用条件："),React.createElement("div",{className:"item-content"},t.useCondition)),React.createElement("div",{className:"detail-item time"},React.createElement("div",{className:"item-name"},"可用时间："),React.createElement("div",{className:"item-content"},React.createElement("div",{className:"date-duration"},"-1"==t.expire?t.start_use_date+"至"+t.end_use_date:"0"==t.expire?"领取当天生效,有效期1天":"领取"+(t.react>0?t.react+"天后":"当天")+"生效，有效期"+t.expire+"天"),React.createElement("div",{className:"other-case"},(1==t.exclude_holiday?"除法定节假日":"")+" "+(1==t.exclude_weekend?"周一至周五":"")),React.createElement("div",{className:"time-duration"},t.start_use_time+"-"+t.end_use_time)))),6==t.type&&"use"==n&&React.createElement("div",{className:"middle-section",onClick:this.toggleVerificationDetail},React.createElement("div",{className:"detail-item verify"},React.createElement("div",{className:"item-right"},React.createElement("span",{className:"item-name"},"核销详情"),React.createElement("div",{className:"item-content"},React.createElement("span",null,"已核销："+t.verified_times),React.createElement("span",null,"未核销："+(t.verify_times-t.verified_times)))),React.createElement("div",{className:"ico-moon icon-rightarrow"}))),React.createElement("div",{className:"bottom-section"},t.extra_goods&&"null"!=t.extra_goods&&React.createElement("div",{className:"detail-item couponGoods",onClick:this.turnToCouponGoodsList},React.createElement("div",{className:"item-name"},"部分可用商品"),React.createElement("div",{className:"item-right"},React.createElement("span",null,"查看"),React.createElement("label",{className:"ico-moon icon-rightarrow"}))),""!=t.address&&React.createElement("div",{className:"detail-item address"},React.createElement("div",{className:"item-name"},"店铺地址："),React.createElement("div",{className:"item-content"},t.address)),""!=t.stampsUser&&React.createElement("div",{className:"detail-item detail-item-user"},React.createElement("div",{className:"item-name"},"可领取用户："),React.createElement("div",{className:"item-content"},t.stampsUser)),""!=t.phone&&React.createElement("div",{className:"detail-item phone"},React.createElement("div",{className:"item-name"},"联系电话："),React.createElement("div",{className:"item-content"},t.phone)),React.createElement("div",{className:"goto-homepage",onClick:this.goToHomepage},React.createElement("div",{className:"goto-homepage-text"},"返回首页"),React.createElement("div",{className:"ico-moon icon-rightarrow"})))),React.createElement("div",{className:"zc-toast-bg "+(1==i?"show":""),onClick:this.hideReceiveToast},React.createElement("div",{className:"zc-toast receive-success"},React.createElement("span",{className:"icon",type:"success",size:"20"}),React.createElement("div",{className:"title"},"领取成功!"),React.createElement("div",{className:"content"},"已领"+s+"张，限领"+r+"张"))),React.createElement("div",{className:"zc-toast-bg "+(1==c?"show":""),onClick:this.hideToast},React.createElement("div",{className:"zc-toast recharge-success"},React.createElement("span",{className:"icon",type:"success",size:"20"}),React.createElement("div",{className:"title"},"充值成功!"),React.createElement("div",{className:"content"},"请到储值金中查看"))),React.createElement("div",{className:"coupon-verify-wrap "+(l?"show":"")},React.createElement("div",{className:"top-section"},React.createElement("div",{className:"cancel",onClick:this.hideCouponVerify,hidden:d.success},"取消"),React.createElement("div",{className:"name"},t.app_name),React.createElement("div",{className:"title"},t.title)),React.createElement("div",{className:"division-line"},React.createElement("div",{className:"left-circle",style:(0,g.convertLineStyleData)("background: "+t.background)}),React.createElement("div",{className:"right-circle",style:(0,g.convertLineStyleData)("background: "+t.background)})),React.createElement("div",{className:"bottom-section"},d.success?d.success&&React.createElement("div",{className:"success-block"},React.createElement("div",{className:"success-tip"},React.createElement("span",{className:"success-tip-icon",type:"success",size:"20"}),React.createElement("span",{className:"success-tip-text"},"核销成功!")),React.createElement("div",{className:"back-tip",onClick:this.hideCouponVerify},">>>返回")):React.createElement("div",{className:"verify-block"},React.createElement("img",{className:"qrcode",src:d.qrcodeUrl}),React.createElement("div",{className:"code"},"核销码："+t.verify_code),React.createElement("div",{className:"tip"},"提示：请提示商家扫码核销")))),React.createElement("div",{className:"coupon-cerification-detail "+(u?"show":"")},React.createElement("div",{className:"detail-title"},React.createElement("span",{className:"detail-num num"},"序号"),React.createElement("span",{className:"detail-time"},"核销时间")),t.form_data&&t.form_data.verify_log&&0!==t.form_data.verify_log.length?React.createElement("div",{className:"detail-list"},t.form_data.verify_log.map(function(e,t){return React.createElement("div",{className:"detail-item",key:!0},React.createElement("span",{className:"item-num num"},t+1),React.createElement("span",{className:"item-time"},e.add_time))})):React.createElement("div",{className:"detail-nodata"},"- 暂无数据 -"),React.createElement("div",{className:"detail-back-btn",onClick:this.toggleVerificationDetail},"返回"))))}}]),t}(v.default);t.default=_},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(17),i=n(o),s=a(0),r=n(s),c=a(3),l=n(c),d=a(1),u=n(d),m=a(2),p=n(m);a(16);var f=a(5),g=a(6),h=a(7),v=n(h);a(478);var _=function(e){function t(e){(0,r.default)(this,t);var a=(0,u.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={hideVerifyPhone:!0,hideBindNewPhone:!0,appLogo:"",appTitleLen:0,appTitle:"",isQuick:!0,oldCode:"",oldCodeBtnDisabled:!1,oldCodeStatus:"获取验证码",nextStepDisabled:!1,newPhone:"",nationCode:"86",intlCode:"",newCode:"",newCodeBtnDisabled:!1,newCodeStatus:"获取验证码",bindNewPhoneBtnDisabled:!1,codeInterval:60,phonePreFix:[{value:86,label:"中国大陆",intlCode:"CN"},{value:852,label:"中国香港",intlCode:"HK"},{value:853,label:"中国澳门",intlCode:"MO"},{value:886,label:"中国台湾",intlCode:"TW"},{value:1,label:"美国",intlCode:"US"},{value:1,label:"加拿大",intlCode:"CA"},{value:81,label:"日本",intlCode:"JP"},{value:60,label:"马来西亚",intlCode:"MY"}],selectPhonePreFix:[86],oldPhonePicCodeUrl:"",newPhonePicCodeUrl:"",hasMerged:!1,accountList:[],isPageBottom:!1,isMember:0},a.oldPhonePicCode="",a.newPhonePicCode="",a.formerPageRouter="",a.formerOtherRouter="",a.dataInitial=function(){f.appMethod.isLogin()?(a.pageDataInitial(),a.getXcxUserInfo()):f.appMethod.goLogin({success:function(e){a.pageDataInitial(),a.getXcxUserInfo()}})},a.pageDataInitial=function(){a.setData({appLogo:f.appMethod.globalData.appLogo,appTitle:f.appMethod.globalData.appTitle,appTitleLen:f.appMethod.globalData.appTitle.length})},a.getXcxUserInfo=function(){var e=f.appMethod.getUserInfo("has_merged");a.setData({hasMerged:void 0==e||0==e})},a.changeType=function(e){var t=a,n=!0;n="quick"==e.currentTarget.dataset.type,t.setData({isQuick:n})},a.getAccountInfo=function(e){var t=a;f.appMethod.sendRequest({url:"/index.php?r=AppShop/GetAccountIfCouldMerge",data:{},success:function(a){t.setData({accountList:a.data.list||[]}),"function"==typeof e&&e(a)}})},a.sendCodeToOldPhone=function(){var e=a;if(!a.data.oldCodeBtnDisabled){if(!a.oldPhonePicCode)return void f.appMethod.showModal({content:"请输入图形验证码"});a.setData({oldCodeStatus:"正在发送...",oldCodeBtnDisabled:!0}),f.appMethod.sendRequest({url:"/index.php?r=AppData/PhoneCode",data:{pic_code:a.oldPhonePicCode},success:function(){var t,a=e.data.codeInterval;t=setInterval(function(){a<0?(clearInterval(t),e.setData({oldCodeStatus:"获取验证码",oldCodeBtnDisabled:!1})):(e.setData({oldCodeStatus:a+"s"}),a--)},1e3)},successStatusAbnormal:function(){e.setData({oldCodeStatus:"获取验证码",oldCodeBtnDisabled:!1})},fail:function(){e.setData({oldCodeStatus:"获取验证码",oldCodeBtnDisabled:!1})}})}},a.inputOldCode=function(e){a.setData({oldCode:e.target.value})},a.nextStep=function(){var e=a;if(!a.data.oldCode)return void f.appMethod.showModal({content:"请输入验证码"});a.data.nextStepDisabled||(a.setData({nextStepDisabled:!0}),f.appMethod.sendRequest({url:"/index.php?r=AppData/VerifyPhone",method:"post",data:{code:a.data.oldCode},success:function(){e.setData({hideVerifyPhone:!0,hideBindNewPhone:!1}),e.refreshNewPhonePicCode()},complete:function(){e.setData({nextStepDisabled:!1})}}))},a.inputPhone=function(e){a.setData({newPhone:e.target.value})},a.inputNewCode=function(e){a.setData({newCode:e.target.value})},a.sendCodeToNewPhone=function(){var e=a,t=a.data.newPhone,n="86"!=a.data.nationCode?a.data.nationCode+"-"+t:t,o=/^1\d{10}$/.test(n)||/^\+?\d+-\d+$/.test(n);return f.appMethod.getStorage({key:"session_key",success:function(e){if(""==e.data)return void f.appMethod.showModal({content:"未获取授权，验证码获取失败"})}}),a.newPhonePicCode?o?void(a.data.newCodeBtnDisabled||(a.setData({newCodeStatus:"正在发送...",newCodeBtnDisabled:!0}),f.appMethod.sendRequest({url:"/index.php?r=AppData/NewPhoneCode",method:"post",data:{phone:n,pic_code:a.newPhonePicCode},success:function(t){var a,n=e.data.codeInterval;a=setInterval(function(){n<0?(clearInterval(a),e.setData({newCodeStatus:"获取验证码",newCodeBtnDisabled:!1})):(e.setData({newCodeStatus:n+"s"}),n--)},1e3)},successStatusAbnormal:function(){e.setData({newCodeStatus:"获取验证码",newCodeBtnDisabled:!1})},fail:function(){e.setData({newCodeStatus:"获取验证码",newCodeBtnDisabled:!1})}}))):void f.appMethod.showModal({content:"请输入正确的手机号码"}):void f.appMethod.showModal({content:"请输入图形验证码"})},a.bindNewPhone=function(){var e=a,t=a.data.newPhone,n=a.data.newCode,o="86"!=a.data.nationCode?a.data.nationCode:"",i=a.data.intlCode,s=o?o+"-"+t:t,r=/^1\d{10}$/.test(s)||/^\+?\d+-\d+$/.test(s);if(t&&n)return r?void(a.data.bindNewPhoneBtnDisabled||(a.setData({bindNewPhoneBtnDisabled:!0}),f.appMethod.sendRequest({url:"/index.php?r=AppData/XcxVerifyNewPhone",mehtod:"post",data:{phone:s,code:n,nationCode:o,intlCode:i},success:function(a){f.appMethod.setUserInfoStorage({phone:t}),f.appMethod.showToast({title:"绑定成功",icon:"success",success:function(){e.getAccountInfo(function(){e.data.hasMerged&&e.data.accountList.length>0?f.appMethod.turnToPage("/userCollect",1):e.formerOtherRouter?f.appMethod.turnToPage("/"+e.formerOtherRouter+"&from=bindCellphone",!0):1===e.data.isMember?f.appMethod.turnToPage("/"+e.formerPageRouter+"?is_member=1",1):f.appMethod.turnToPage("/"+e.formerPageRouter,1)})}})},fail:function(e){f.appMethod.showModal({content:"绑定失败"+e.data})},complete:function(){e.setData({bindNewPhoneBtnDisabled:!1})}}))):void f.appMethod.showModal({content:"请输入正确的手机号码"})},a.getPhoneNumber=function(e){var t=a;"getPhoneNumber:fail user deny"==e.detail.errMsg||"getPhoneNumber:fail:user denied"==e.detail.errMsg||"getPhoneNumber:fail:cancel to confirm login"==e.detail.errMsg?(console.log(e.detail.errMsg),f.appMethod.addLog(e.detail)):"getPhoneNumber:fail 该 appid 没有权限"==e.detail.errMsg||"getPhoneNumber:fail jsapi has no permission, event…sg=permission got, detail=jsapi has no permission"==e.detail.errMsg?(f.appMethod.showModal({content:"该appid没有权限，目前该功能针对非个人开发者，且完成了认证的小程序开放（不包含海外主体）"}),f.appMethod.addLog(e.detail)):e.detail.encryptedData?f.appMethod.checkSession(function(){f.appMethod.sendRequest({hideLoading:!0,url:"/index.php?r=AppUser/GetPhoneNumber",data:{encryptedData:e.detail.encryptedData,iv:e.detail.iv},success:function(e){f.appMethod.setUserInfoStorage({phone:e.data}),f.appMethod.showToast({title:"授权成功",icon:"success",success:function(){t.getAccountInfo(function(){t.data.hasMerged&&t.data.accountList.length>0?f.appMethod.turnToPage("/userCollect",1):t.formerOtherRouter?f.appMethod.turnToPage("/"+t.formerOtherRouter+"&from=bindCellphone",!0):t.data.isMember?f.appMethod.turnToPage("/"+t.formerPageRouter+"?is_member=1",1):f.appMethod.turnToPage("/"+t.formerPageRouter,1)})}})},successStatus5:function(){f.appMethod.goLogin({success:function(){f.appMethod.showModal({content:"获取手机号失败，请再次点击授权获取"})},fail:function(){f.appMethod.showModal({content:"获取手机号失败，请再次点击授权获取"})}})}})}):(f.appMethod.showModal({content:"无法获取到手机号，请检查该appid是否有权限"}),f.appMethod.addLog(e))},a.inputOldPhonePicCode=function(e){var t=e.target.value;a.oldPhonePicCode=t},a.inputNewPhonePicCode=function(e){var t=e.target.value;a.newPhonePicCode=t},a.refreshOldPhonePicCode=function(){a.setData({oldPhonePicCodeUrl:(f.appMethod.getSiteBaseUrl()||"")+"/index.php?r=Login/GetIdentifyCode&i="+parseInt(1e7*Math.random())})},a.refreshNewPhonePicCode=function(){a.setData({newPhonePicCodeUrl:(f.appMethod.getSiteBaseUrl()||"")+"/index.php?r=Login/GetIdentifyCode&i="+parseInt(1e7*Math.random())})},a.backToHomePage=function(){f.appMethod.turnToPage("/"+f.appMethod.globalData.homepageRouter)},a.bindPickerChange=function(e){var t=void 0,n=void 0;a.state.phonePreFix.some(function(a){var o=a.value===e[0];return o&&(t=a.value,n=a.intlCode),o}),a.setData({selectPhonePreFix:e,nationCode:t,intlCode:n})},document.title="手机绑定",a}return(0,p.default)(t,e),(0,l.default)(t,[{key:"componentWillMount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,g.getCurrentPageQueryParams)(),t=f.appMethod.getUserInfo();e.p&&(this.formerOtherRouter=decodeURIComponent(e.p)),1==e.is_member&&this.setData({isMember:1}),this.formerPageRouter=e.r||"",t.phone?(this.setData({hideVerifyPhone:!1}),this.refreshOldPhonePicCode(),this.getAccountInfo()):(this.setData({hideBindNewPhone:!1}),this.refreshNewPhonePicCode());var a=f.appMethod.getTabPagePathArr(),n=this.formerPageRouter;a.indexOf(n)>-1&&this.setData({showBackHomeButton:!0}),this.dataInitial()}},{key:"render",value:function(){var e=this,t=this.state,a=t.isPageBottom,n=t.appLogo,o=t.appTitleLen,s=t.appTitle,r=t.hideVerifyPhone,c=t.oldPhonePicCodeUrl,l=t.oldCodeStatus,d=t.hideBindNewPhone,u=(t.isQuick,t.nationCode),m=t.phonePreFix,p=t.selectPhonePreFix,f=t.newPhonePicCodeUrl,h=t.newCodeStatus,v=t.newPhone,_=t.newCode,y=t.showBackHomeButton;return React.createElement("div",{className:"official-page bind-cellphone"},React.createElement("div",{id:"bindPhonePage"},React.createElement("div",{className:"page bindPhone-wrap",id:"bindPhonePage","data-router":"bindPhonePage",style:(0,g.convertLineStyleData)(a?"padding-bottom:600rpx":"")},React.createElement("div",{className:"header-wrap"},React.createElement("div",{className:"image-wrap"},React.createElement("img",{src:n})),React.createElement("div",{className:"title-wrap",style:(0,g.convertLineStyleData)("font-size:"+(o>=8?"30rpx":"55rpx"))},s)),React.createElement("div",{className:"verify-wrap",hidden:r},React.createElement("div",{className:"verify-row getCode"},React.createElement("input",{className:"pic-code-input",onInput:this.inputOldPhonePicCode,placeholder:"图片验证码"}),React.createElement("div",{className:"pic-code-wrap"},React.createElement("img",{className:"pic-code",mode:"aspectFit",src:c,onClick:this.refreshOldPhonePicCode}))),React.createElement("div",{className:"verify-row postCode"},React.createElement("input",{onInput:this.inputOldCode,placeholder:"请输入验证码"}),React.createElement("div",{className:"get-code-btn",onClick:this.sendCodeToOldPhone},l)),React.createElement("div",{className:"option-btn next-step",onClick:this.nextStep},"下一步")),React.createElement("div",{className:"bind-new-tel-wrap",hidden:d},React.createElement("div",{className:"main-wrap"},React.createElement(React.Fragment,null,React.createElement("div",{className:"any-message"},React.createElement("div",{className:"verify-row phonenum"},React.createElement(i.default,{className:"prefix-code",data:m,value:p,cols:1,onOk:function(t){return e.bindPickerChange(t)}},React.createElement("div",null,"+"+u)),React.createElement("span",{className:"ico-moon icon-rightarrow"}),React.createElement("input",{className:"code-tel",onInput:this.inputPhone,placeholder:"手机号"})),React.createElement("div",{className:"verify-row getCode"},React.createElement("input",{className:"pic-code-input",onInput:this.inputNewPhonePicCode,placeholder:"图片验证码"}),React.createElement("div",{className:"pic-code-wrap"},React.createElement("img",{className:"pic-code",mode:"aspectFit",src:f,onClick:this.refreshNewPhonePicCode}))),React.createElement("div",{className:"verify-row postCode"},React.createElement("input",{onInput:this.inputNewCode,placeholder:"请输入验证码"}),React.createElement("div",{className:"get-code-btn",onClick:this.sendCodeToNewPhone},h))),React.createElement("div",{className:"option-btn bind-new-tel-btn "+(v&&_?"":"disabled"),onClick:this.bindNewPhone},"登录")))),y&&React.createElement("div",{className:"back-home-btn icon-back-to-home ico-moon",onClick:this.backToHomePage}))))}}]),t}(v.default);t.default=_},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(0),i=n(o),s=a(3),r=n(s),c=a(1),l=n(c),d=a(2),u=n(d),m=a(5),p=a(6),f=a(7),g=n(f);a(480);var h=function(e){function t(e){(0,i.default)(this,t);var a=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={history:[],inputContent:""},a.searchList=function(){var e=a.data.history,t=a.data.inputContent,n=e.indexOf(t);n>-1&&e.splice(n,1),e.unshift(t),a.setData({history:e}),m.appMethod.setStorage({key:"history",data:e}),a.data.comeSearch?(m.appMethod.setStorage({key:"current-search",data:t}),m.appMethod.turnBack(),m.appMethod.globalData.classifyGoodsListPageRefresh=!0):a.turnToClassifyGoodsListPage(t)},a.quickSearch=function(e){var t=e.target.dataset.tag;a.setData({inputContent:t}),a.data.comeSearch?(m.appMethod.setStorage({key:"current-search",data:t}),m.appMethod.turnBack(),m.appMethod.globalData.classifyGoodsListPageRefresh=!0):a.turnToClassifyGoodsListPage(t)},a.turnToClassifyGoodsListPage=function(e){var t=a.data,n="";""!=t.isHideStock&&(n+="&isHideStock="+t.isHideStock),""!=t.isHideSales&&(n+="&isHideSales="+t.isHideSales),""!=t.integral&&(n+="&integral="+t.integral),""!=t.isShowVirtualPrice&&(n+="&isShowVirtualPrice="+t.isShowVirtualPrice),""!=t.isShoppingCart&&(n+="&isShoppingCart="+t.isShoppingCart),""!=t.isBuyNow&&(n+="&isBuyNow="+t.isBuyNow),""!=t.category&&(n+="&category_id="+t.category),1==+t.isShowFG&&(n+="&isShowFG=1"),m.appMethod.turnToPage("/pages/classifyGoodsListPage/classifyGoodsListPage?form="+t.form+"&search="+e+n,!0)},a.bindChange=function(e){var t=e.target.value;a.setData({inputContent:t})},a.clearSearch=function(){a.setData({inputContent:"",showResult:!1})},a.clearHistory=function(){var e=a;m.appMethod.removeStorage({key:"history",success:function(t){e.setData({history:[]})}})},a.navigateBack=function(){m.appMethod.turnBack()},document.title="搜索",a}return(0,u.default)(t,e),(0,r.default)(t,[{key:"componentWillMount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,p.getCurrentPageQueryParams)();this.setData({form:e.form||"",comeSearch:!!e.search,inputContent:e.search||"",isHideStock:e.isHideStock||"",isHideSales:e.isHideSales||"",integral:e.integral||"",isShowVirtualPrice:e.isShowVirtualPrice||"",isShoppingCart:e.isShoppingCart||"",isBuyNow:e.isBuyNow||"",category:e.category||"",isShowFG:e.isShowFG||""});var t=this;m.appMethod.getStorage({key:"history",success:function(e){t.setData({history:e.data||[]})}})}},{key:"render",value:function(){var e=this,t=this.state,a=t.inputContent,n=t.history;return React.createElement("div",{className:"official-page advance-search"},React.createElement("div",{className:"comp-search"},React.createElement("div",{className:"ico-moon icon-location locate hide",onClick:this.filterByLocation},"全国"),React.createElement("div",{className:"search-wrap"},React.createElement("span",{size:"14",type:"search",onClick:this.searchList}),React.createElement("input",{id:"search",value:a,onInput:this.bindChange,onBlur:this.searchList,name:"input",placeholder:"请输入搜索关键词"}),React.createElement("div",{className:"cross "+(""==a?"hide":""),onClick:this.clearSearch},"×")),React.createElement("button",{className:"cancel",onClick:this.navigateBack},"取消")),React.createElement("div",{className:"history"},React.createElement("div",{className:"title"},React.createElement("span",{className:"left"},"历史搜索"),React.createElement("span",{className:"right",onClick:this.clearHistory},"清除")),React.createElement("div",{className:"content"},n&&n.map(function(t,a){return React.createElement("div",{className:"history-item",key:!0,"data-tag":t,onClick:e.quickSearch},t)}))))}}]),t}(g.default);t.default=h},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(26),i=n(o),s=a(0),r=n(s),c=a(3),l=n(c),d=a(1),u=n(d),m=a(2),p=n(m);a(27);var f=a(5),g=a(6),h=a(7),v=n(h);a(482);var _=function(e){function t(){var e,a,n,o;(0,r.default)(this,t);for(var i=arguments.length,s=Array(i),c=0;c<i;c++)s[c]=arguments[c];return a=n=(0,u.default)(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),n.state={appTitle:"",appLogo:"",extensionId:"",extensionItemData:{},currentPage:""},n.dataInitial=function(){n.getExtensionPageData(n.data.extensionId)},n.getExtensionPageData=function(e){var t=n;f.appMethod.sendRequest({url:"/index.php?r=AppExtensionInfo/getOneExtensionInfo",data:{id:e},hideLoading:!0,success:function(e){var a=JSON.parse(e.data.config_data);t.setData({extensionItemData:a}),f.appMethod.setPageTitle(t.data.appTitle||"即速应用 webapp")}})},n.jumpToHome=function(){var e=f.appMethod.globalData.homepageRouter,t="/"+e;f.appMethod.turnToPage(t,!0)},n.jumpToPage=function(e){var t=e.currentTarget.dataset.pageUrl;f.appMethod.turnToPage(t,!1)},n.jumpToRouter=function(e){var t=e.currentTarget.dataset.pageUrl,a="/"+t;f.appMethod.turnToPage(a,!1)},n.copyWifiPassword=function(){Taro.setClipboardData({data:n.data.extensionItemData.wifi.wifi_password,success:function(e){f.appMethod.showToast({title:"复制成功",success:function(){}})}})},n.showWifiPage=function(){var e="/extensionPage?extension_id="+n.data.extensionId+"&current_page=wifi";f.appMethod.turnToPage(e,!1)},o=a,(0,u.default)(n,o)}return(0,p.default)(t,e),(0,l.default)(t,[{key:"componentWillMount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,g.getCurrentPageQueryParams)();this.setData({appTitle:f.appMethod.globalData.appTitle,appLogo:f.appMethod.globalData.appLogo,extensionId:e.extension_id,currentPage:e.current_page||"home"}),this.dataInitial()}},{key:"render",value:function(){var e=this,t=this.state,a=t.appLogo,n=t.appTitle,o=t.extensionItemData,s=t.currentPage;return React.createElement("div",{className:"official-page extension-page"},React.createElement("div",{className:"extensionPage-wrap page",id:"extensionPage"},"home"==s?React.createElement("div",{className:"home-page"},React.createElement("div",{className:"goto-home-item",onClick:this.jumpToHome},React.createElement("img",{className:"app-logo",src:a}),React.createElement("span",{className:"app-title"},n),React.createElement("span",{className:"tip"},"进入首页"),React.createElement("div",{className:"ico-moon icon-rightarrow"})),o.wifi&&1==o.wifi.show&&1==o.wifi.is_main?React.createElement("div",{className:"main-extension-item wifi"},React.createElement("div",{className:"wifi-setting"},React.createElement("span",{className:"setting-field"},"Wi-Fi名称:"),React.createElement("span",{className:"setting-text"},o.wifi.wifi_name)),React.createElement("div",{className:"wifi-setting"},React.createElement("span",{className:"setting-field"},"Wi-Fi密码:"),React.createElement("span",{className:"setting-text"},o.wifi.wifi_password),React.createElement("div",{className:"copy-password",onClick:this.copyWifiPassword},"复制"))):o.facetoface_pay&&1==o.facetoface_pay.show&&1==o.facetoface_pay.is_main?React.createElement("div",{className:"main-extension-item facetoface-pay","data-page-url":"/eCommerce/pages/transferPage/transferPage",onClick:this.jumpToPage},React.createElement("div",{className:"main-item-icon"},React.createElement("div",{className:"ico-moon icon-facetoface-pay"})),React.createElement("span",{className:"main-item-name"},"面对面付款"),React.createElement("span",{className:"main-item-tip"},"立即前往"),React.createElement("div",{className:"ico-moon icon-rightarrow"})):o.coupon&&1==o.coupon.show&&1==o.coupon.is_main?React.createElement("div",{className:"main-extension-item coupon","data-page-url":"/eCommerce/pages/couponList/couponList",onClick:this.jumpToPage},React.createElement("div",{className:"main-item-icon"},React.createElement("div",{className:"ico-moon icon-coupon"})),React.createElement("span",{className:"main-item-name"},"优惠券"),React.createElement("span",{className:"main-item-tip"}),React.createElement("div",{className:"ico-moon icon-rightarrow"})):o.vip_card&&1==o.vip_card.show&&1==o.vip_card.is_main&&React.createElement("div",{className:"main-extension-item vip-card","data-page-url":"/eCommerce/pages/vipCard/vipCard",onClick:this.jumpToPage},React.createElement("div",{className:"main-item-icon"},React.createElement("div",{className:"ico-moon icon-vip-card"})),React.createElement("span",{className:"main-item-name"},"会员卡"),React.createElement("span",{className:"main-item-tip"}),React.createElement("div",{className:"ico-moon icon-rightarrow"})),React.createElement("div",{className:"extension-item-list"},o.wifi&&1==o.wifi.show&&0==o.wifi.is_main&&React.createElement("div",{className:"extension-item",onClick:this.showWifiPage},React.createElement("div",{className:"item-icon ico-moon icon-wifi"}),React.createElement("span",{className:"item-text"},"Wi-Fi"),React.createElement("div",{className:"ico-moon icon-rightarrow"})),o.facetoface_pay&&1==o.facetoface_pay.show&&0==o.facetoface_pay.is_main&&React.createElement("div",{className:"extension-item","data-page-url":"/eCommerce/pages/transferPage/transferPage",onClick:this.jumpToPage},React.createElement("div",{className:"item-icon ico-moon icon-facetoface-pay"}),React.createElement("span",{className:"item-text"},"面对面付款"),React.createElement("div",{className:"ico-moon icon-rightarrow"})),o.coupon&&1==o.coupon.show&&0==o.coupon.is_main&&React.createElement("div",{className:"extension-item","data-page-url":"/eCommerce/pages/couponList/couponList",onClick:this.jumpToPage},React.createElement("div",{className:"item-icon ico-moon icon-coupon"}),React.createElement("span",{className:"item-text"},"优惠券"),React.createElement("div",{className:"ico-moon icon-rightarrow"})),o.vip_card&&1==o.vip_card.show&&0==o.vip_card.is_main&&React.createElement("div",{className:"extension-item","data-page-url":"/eCommerce/pages/vipCard/vipCard",onClick:this.jumpToPage},React.createElement("div",{className:"item-icon ico-moon icon-vip-card"}),React.createElement("span",{className:"item-text"},"会员卡"),React.createElement("div",{className:"ico-moon icon-rightarrow"}))),o.advert_img&&1==o.advert_img.show&&React.createElement("div",{className:"advert-img-item"},React.createElement(i.default,{autoplay:!0},o.advert_img.img_list.map(function(t,a){return React.createElement("a",{key:a,style:{display:"inline-block",width:"100%",height:"1.95rem"}},React.createElement("img",{src:t.url,className:"slide-image",mode:"widthFix",onClick:e.jumpToRouter,"data-page-url":t.link,style:{width:"100%",verticalAlign:"top",height:"100%"}}))})))):"wifi"==s&&React.createElement("div",{className:"second-page"},o.wifi&&1==o.wifi.show&&React.createElement("div",{className:"main-extension-item wifi"},React.createElement("div",{className:"wifi-setting"},React.createElement("span",{className:"setting-field"},"Wi-Fi名称:"),React.createElement("span",{className:"setting-text"},o.wifi.wifi_name)),React.createElement("div",{className:"wifi-setting"},React.createElement("span",{className:"setting-field"},"Wi-Fi密码:"),React.createElement("span",{className:"setting-text"},o.wifi.wifi_password),React.createElement("div",{className:"copy-password",onClick:this.copyWifiPassword},"复制"))))))}}]),t}(v.default);t.default=_},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(0),i=n(o),s=a(3),r=n(s),c=a(1),l=n(c),d=a(2),u=n(d),m=a(6),p=a(7),f=n(p),g=a(113),h=function(e){function t(e){(0,i.default)(this,t);var a=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={},document.title="地图",a}return(0,u.default)(t,e),(0,r.default)(t,[{key:"componentWillMount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,m.getCurrentPageQueryParams)(),t=JSON.parse(e.eventParams),a={};a.markers=t,a.longitude=t[0].longitude,a.latitude=t[0].latitude,this.setData(a)}},{key:"render",value:function(){var e=this.state,t=e.longitude,a=e.latitude,n=e.markers;return React.createElement(g.Map,{longitude:t,latitude:a,scale:"17",markers:n,style:{width:"100%",height:"100%"}})}}]),t}(f.default);t.default=h},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(0),i=n(o),s=a(3),r=n(s),c=a(1),l=n(c),d=a(2),u=n(d),m=a(4),p=n(m),f=a(6),g=a(5);a(485);var h=function(e){function t(e){return(0,i.default)(this,t),(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return(0,u.default)(t,e),(0,r.default)(t,[{key:"componentWillMount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,f.getCurrentPageQueryParams)();if(console.log(e),this.orderId=e.orderId,!this.orderId)return void console.error("orderId 参数未传");e&&1==e.isPayBack?this.getOrder():history.replaceState(null,null,location.href+"&isPayBack=1")}},{key:"getOrder",value:function(){g.appMethod.sendRequest({url:"/index.php?r=AppShop/getOrder",data:{order_id:this.orderId,sub_shop_app_id:this.franchisee},success:function(e){var t=g.appMethod.getStorageSync("payCallbackUrl");0!=e.data[0].form_data.status?t.successUrl&&g.appMethod.turnToPage(t.successUrl,{},!0):t.failUrl&&g.appMethod.turnToPage(t.failUrl,{},!0),g.appMethod.removeStorage({key:"payCallbackUrl"})},fail:function(){}})}},{key:"render",value:function(){return p.default.createElement("div",{className:"paying-tip"},"正在支付。。。")}}]),t}(p.default.Component);t.default=h},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(0),i=n(o),s=a(3),r=n(s),c=a(1),l=n(c),d=a(2),u=n(d),m=a(5),p=a(6),f=a(7),g=n(f);a(487);var h=function(e){function t(e){(0,i.default)(this,t);var a=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={selectedCollectType:"电商",isHideTypeNav:!0,recordTabType:0,collectStarsData:{collectedNum:0,collectNum:8,starStyleArr:["dark","dark","dark","dark","dark","dark","dark","dark"],dark_img:"http://img.zhichiwangluo.com/zcimgdir/album/file_5afac25ca94fb.png"},starRecordList:{list:[],isNull:!1,loadingData:{isLoading:!1}},awardRecordList:{list:[],isNull:!1,loadingData:{isLoading:!1}}},a.onReachBottom=function(){},a.initialLoadingData=function(){a.setData({starRecordList:{list:[],isNull:!1,loadingData:{isLoading:!1}},awardRecordList:{list:[],isNull:!1,loadingData:{isLoading:!1}}})},a.getCollectStarsData=function(){var e=a;m.appMethod.sendRequest({url:"/index.php?r=appMarketing/GetUserCollectNum",data:{sub_app_id:e.data.franchiseeId},success:function(t){var a=t.data,n=[],o=0;if(void 0!=a.togetherNum){o=a.togetherNum;for(var i=0;i<a.collectNum;i++)i<a.togetherNum?n.push("light"):n.push("dark")}else{o=a.ecommerceNum;for(var s=0;s<a.collectNum;s++)s<a.ecommerceNum?n.push("light"):n.push("dark")}0==a.status&&m.appMethod.showModal({content:"没有进行中的活动"}),0==a.status&&1==a.isReset&&(o=0,n=["dark","dark","dark","dark","dark","dark","dark","dark"]),a.collectedNum=o,a.starStyleArr=n,e.setData({collectStarsData:a})}})},a.getStarsRecordData=function(){var e=a,t=a.data.starRecordList,n=t.list,o=t.loadingData;t.isNull;o.isLoading||(e.setData({"starRecordList.loadingData.isLoading":!0}),m.appMethod.sendRequest({url:"/index.php?r=appMarketing/GetUserCollectRecord",data:{sub_app_id:e.data.franchiseeId},hideLoading:!0,success:function(t){var a=t.data;a&&0!==a.length?(o={isLoading:!1},e.setData({"starRecordList.list":n.concat(a),"starRecordList.loadingData":o})):e.setData({"starRecordList.isNull":!0})},complete:function(){e.setData({"starRecordList.loadingData.isLoading":!1})}}))},a.getAwardRecordData=function(){var e=a,t=a.data.awardRecordList,n=t.list,o=t.loadingData;t.isNull;o.isLoading||(e.setData({"awardRecordList.loadingData.isLoading":!0}),m.appMethod.sendRequest({url:"/index.php?r=appMarketing/GetUserRewardsRecord",data:{sub_app_id:e.data.franchiseeId},hideLoading:!0,success:function(t){var a=t.data;a&&0!==a.length?(o={isLoading:!1},e.setData({"awardRecordList.list":n.concat(a),"awardRecordList.loadingData":o})):e.setData({"awardRecordList.isNull":!0})},complete:function(){e.setData({"awardRecordList.loadingData.isLoading":!1})}}))},a.toggleMoreType=function(){var e=a.data.isHideTypeNav;a.setData({isHideTypeNav:!e})},a.selectCollectType=function(e){var t=["电商","到店","当面付","分享赠送","拉新赠送","收藏赠送"],n=e.target.dataset.type,o=a.data.collectStarsData,i=[],s=0;0==n&&(s=o.ecommerceNum||0),1==n?s=o.toStoreNum||0:2==n?s=o.facePayNum||0:3==n?s=o.shareBaseNum||0:4==n?s=o.shareExtraNum||0:5==n&&(s=o.collectActivityNum||0);for(var r=0;r<o.collectNum;r++)r<s?i.push("light"):i.push("dark");a.setData({selectedCollectType:t[n]||"","collectStarsData.collectedNum":s,"collectStarsData.starStyleArr":i}),a.toggleMoreType()},a.recordTabSwitch=function(e){var t=e.currentTarget.dataset.recordType;a.data.recordTabType!=t&&(a.setData({recordTabType:t}),a.initialLoadingData(),1==t?a.getAwardRecordData():a.getStarsRecordData())},document.title="集集乐",a}return(0,u.default)(t,e),(0,r.default)(t,[{key:"componentWillMount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,p.getCurrentPageQueryParams)();this.setData({franchiseeId:e.franchisee||""}),this.getCollectStarsData(),this.getStarsRecordData()}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.state,t=e.selectedCollectType,a=e.isHideTypeNav,n=e.collectStarsData,o=e.undefined,i=e.recordTabType,s=e.starRecordList,r=e.awardRecordList;return React.createElement("div",{className:"official-page collect-starts"},React.createElement("div",{className:"collectStar-container"},n.togetherNum==o&&React.createElement("div",{className:"collect-type-wrapper"},React.createElement("div",{className:"type-selected",onClick:this.toggleMoreType},React.createElement("span",null,t),React.createElement("span",{className:"ico-moon icon-"+(a?"downarrow":"uparrow")})),React.createElement("div",{className:"type-list-wrapper",style:(0,p.convertLineStyleData)("height: "+(a?"0":"480rpx")+";")},React.createElement("div",{className:"type-list",onClick:this.selectCollectType},React.createElement("span",{"data-type":"0"},"电商"),React.createElement("span",{"data-type":"1"},"到店"),React.createElement("span",{"data-type":"2"},"当面付"),React.createElement("span",{"data-type":"3"},"分享赠送"),React.createElement("span",{"data-type":"4"},"拉新赠送"),React.createElement("span",{"data-type":"5"},"收藏赠送")))),React.createElement("div",{className:"collect-info-wrapper",style:(0,p.convertLineStyleData)("margin-top:"+(0==n.countMethod?"10rpx":"0")+";")},React.createElement("div",{className:"info-num"},React.createElement("span",null,"集集乐个数："+n.collectedNum+"个")),React.createElement("div",{className:"info-star info-star-"+n.collectNum},n.starStyleArr.map(function(e,t){return React.createElement("div",{className:"star-item",key:t},"light"==e&&React.createElement("img",{className:"star-item",src:n.light_img,mode:"aspectFill"}),"dark"==e&&React.createElement("img",{className:"star-item",src:n.dark_img,mode:"aspectFill"}))})),1==n.status?React.createElement("div",{className:"info-desc"},React.createElement("span",{className:"info-desc-condition"},"消费"+(0==n.playType?"每满":"超过")+n.value+"元，累计1颗星，集满可获"+n.coupon+"一张"),1==n.isReset?React.createElement("span",{className:"info-desc-time"},"活动结束星数清空"):React.createElement("span",{className:"info-desc-time"},"活动结束星数保留")):React.createElement("div",{className:"info-desc"},React.createElement("span",null,"当前暂无活动"))),React.createElement("div",{className:"collect-record-wrapper"},React.createElement("div",{className:"record-tab"},React.createElement("div",{className:0==i?"active":"","data-record-type":"0",onClick:this.recordTabSwitch},React.createElement("span",null,"集星记录"),React.createElement("span",{className:"line"})),React.createElement("div",{className:1==i?"active":"","data-record-type":"1",onClick:this.recordTabSwitch},React.createElement("span",null,"奖励记录"),React.createElement("span",{className:"line"}))),React.createElement("div",{className:"record-content"},0==i&&React.createElement("div",{className:"record-star"},React.createElement("div",{className:"record-star-title"},React.createElement("span",{className:"time"},"集星时间"),React.createElement("span",{className:"origin"},"集星来源"),React.createElement("span",{className:"num"},"集星数量")),s.list&&s.list.length>0&&React.createElement("div",{className:"record-star-list"},s.list.map(function(e,t){return React.createElement("div",{className:"record-star-item",key:t},React.createElement("span",{className:"time"},e.collect_time),React.createElement("span",{className:"origin"},e.collect_type),React.createElement("span",{className:"num"},e.collect_num))})),s.loadingData.isLoading&&React.createElement("div",{className:"loading-wrap"},React.createElement("div",{className:"loading-view"},React.createElement("div",{className:"loading-dot1"}),React.createElement("div",{className:"loading-dot2"}))),s.isNull&&React.createElement("div",{className:"record-list-null"},React.createElement("img",{src:"http://cdn.jisuapp.cn/static/webapp/images/request-none.png"}),React.createElement("span",null,"~ 暂无集星记录 ~"))),1==i&&React.createElement("div",{className:"record-award"},!r.isNull&&React.createElement("div",{className:"record-award-list"},r.list.map(function(e,t){return React.createElement("div",{className:"record-award-item",key:t},React.createElement("span",{className:"item-title"},e.coupon_title),React.createElement("div",{className:"item-use-time"},React.createElement("span",null,"使用时间："),React.createElement("span",{className:"item-itme-txt"},e.start_use_date+"至"+e.end_use_date)),React.createElement("span",{className:"item-award-time"},"中奖时间："+e.recv_time),1==e.status&&React.createElement("span",{className:"ico-moon icon-winning-record-nouse"}),2==e.status&&React.createElement("span",{className:"ico-moon icon-winning-record-used"}),3==e.status&&React.createElement("span",{className:"ico-moon icon-winning-record-invalid"}))})),r.loadingData.isLoading&&React.createElement("div",{className:"loading-wrap"},React.createElement("div",{className:"loading-view"},React.createElement("div",{className:"loading-dot1"}),React.createElement("div",{className:"loading-dot2"}))),r.isNull&&React.createElement("div",{className:"record-list-null"},React.createElement("img",{src:"http://cdn.jisuapp.cn/static/webapp/images/request-none.png"}),React.createElement("span",null,"~ 暂无奖励记录 ~")))))))}}]),t}(g.default);t.default=h},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(9),i=n(o),s=a(0),r=n(s),c=a(3),l=n(c),d=a(1),u=n(d),m=a(2),p=n(m),f=a(5),g=a(6),h=a(11),v=a(7),_=n(v);a(489);var y=function(e){function t(e){(0,r.default)(this,t);var a=(0,u.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={topNavBarData:{title:"参与活动赢大奖",isDefault:0},activityId:"",activityData:{},winnerList:[],recordSick:0,animationData:{},awardsList:{},opportunities:"",text:"Page animation",congratulation:0,prizeTitle:"",prizeFail:0,colorAwardDefault:"#FE7F3A",colorAwardSelect:"rgba(255,113,0,.5)",indexSelect:"",isRunning:!1,runDegs:0,duraMax:0,comfort:0,isPlay:!1,isExchange:0,exchangeMessage:{},chanageMes:"",inputValue:"",isdegree:0,RecordSickArr:[],winListData:{},winListData2:{},franchisee:"",ifWxCoupon:!1,timestamp:"",signature:"",ifGetComfort:!1,isShare:!1},a.getShareKey=function(e){var t=a,n=new Object;n.activity_id=e,t.data.franchisee&&(n.sub_app_id=t.data.franchisee),f.appMethod.sendRequest({url:"/index.php?r=appLotteryActivity/getShareKey",data:n,success:function(e){var a=e;0==a.status&&t.setData({shareKey:a.data})}})},a.getTimeByShareKey=function(e,t){var n=a,o=new Object;o.activity_id=e,o.share_key=t,n.data.franchisee&&(o.sub_app_id=n.data.franchisee),f.appMethod.sendRequest({url:"/index.php?r=appLotteryActivity/getTimeByShareKey",data:o,success:function(e){}})},a.getWinnerList=function(e){var t=a;f.appMethod.sendRequest({url:"/index.php?r=appLotteryActivity/getWinnerList",method:"post",data:{activity_id:e,sub_app_id:t.data.franchisee},success:function(e){var a=44*(e.count+5);t.setData({winnerList:e.data}),t.animationTop(a,!0)}})},a.animation="",a.animation2="",a.animationTop=function(e,t){var n=a;clearTimeout(n.timeer),clearTimeout(n.timeer2),t?(n.animation.top("1.9rem").step({duration:0,timingFunction:"step-start"}),n.animation2.top("1.9rem").step({duration:0,timingFunction:"step-start"}),n.setData({winListData:n.animation.export(),winListData2:n.animation2.export()}),setTimeout(function(){n.animation.top("-"+e/100+"rem").step({duration:15e3,timingFunction:"linear"}),n.setData({winListData:n.animation.export()}),n.animationTopCopy(e,t)},50)):(n.timeer=setTimeout(function(){n.animation.top("1.9rem").step({duration:0,timingFunction:"step-start"}),n.setData({winListData:n.animation.export()})},200/(e+200)*15e3),n.timeer2=setTimeout(function(){n.animation.top("-"+e/100+"rem").step({duration:15e3,timingFunction:"linear"}),n.setData({winListData:n.animation.export()}),n.animationTopCopy(e)},e/(e+200)*15e3))},a.animationTopCopy=function(e,t){var n=a;clearTimeout(n.timeer3),clearTimeout(n.timeer4),t||(n.timeer3=setTimeout(function(){n.animation2.top("1.9rem").step({duration:0,timingFunction:"step-start"}),n.setData({winListData2:n.animation2.export()})},200/(e+200)*15e3)),n.timeer4=setTimeout(function(){n.animation2.top("-"+e/100+"rem").step({duration:15e3,timingFunction:"linear"}),n.setData({winListData2:n.animation2.export()}),n.animationTop(e)},e/(e+200)*15e3)},a.clickpagePrize=function(){var e=a;e.setData({recordSick:1}),e.getMyPrize()},a.clickRecordSick=function(e){a.setData({recordSick:0})},a.stopPropagation=function(){},a.confirmClick=function(){a.setData({congratulation:0})},a.dataInitial=function(){var e=a,t=new Object;t.category=0,e.data.franchisee&&(t.sub_app_id=e.data.franchisee),f.appMethod.sendRequest({url:"/index.php?r=appLotteryActivity/getActivity",method:"post",data:t,success:function(t){var a=t.data;a.description=a.description.replace(/\\n/g,"\n"),e.setData({activityData:a,opportunities:a.times}),f.appMethod.setNavigationBarTitle({title:t.data.title}),e.getWinnerList(e.data.activityData.id),e.data.shareKey&&e.getTimeByShareKey(e.data.activityData.id,e.data.shareKey),e.getShareKey(e.data.activityData.id)}})},a.getLottery=function(e){var t=a,n=t.data.activityData.turntable,o=0;o=-1==e.turntable_id?t.getNotWinIndex():t.drawClick(e.turntable_id);var i=t.data.runDegs;console.log("deg",i),i=i-i%360+(2880-45*o-22.5),console.log("deg",i);var s=f.appMethod.createAnimation({duration:4e3,timingFunction:"ease"});t.animationRun=s,s.rotate(i).step(),t.setData({animationData:s.export(),opportunities:t.data.opportunities-1,runDegs:i}),setTimeout(function(){var a=n[o].prize_title;1==e.is_comfort?(t.setData({comfort:1,isRunning:!1,ifWxCoupon:e.card_id||!1,timestamp:e.timestamp||"",signature:e.signature||""}),e.card_id?t.toAddCard():t.getWinnerList(t.data.activityData.id)):"谢谢参与"==a?t.setData({prizeFail:1,isRunning:!1}):(t.setData({congratulation:1,prize_title:a,isRunning:!1,ifWxCoupon:e.card_id||!1,timestamp:e.timestamp||"",signature:e.signature||""}),e.card_id?t.toAddCard():t.getWinnerList(t.data.activityData.id))},5e3)},a.notwinningClick=function(){a.setData({prizeFail:0})},a.tipClick=function(){var e=a;if(e.data.activityData.id)return e.data.opportunities<=0?void(0==e.data.activityData.time_share?e.setData({isdegree:1}):e.setData({duraMax:1})):void(e.data.isRunning||(e.setData({isRunning:!0}),f.appMethod.sendRequest({url:"/index.php?r=appLotteryActivity/lottery",method:"post",data:{activity_id:e.data.activityData.id,sub_app_id:e.data.franchisee},success:function(t){0==e.data.activityData.category?e.getLottery(t.data):e.startGame(t.data)},successStatusAbnormal:function(){e.setData({isRunning:!1})}})))},a.startGame=function(e){var t=a,n=t.data.indexSelect,o=0,i=0;i=-1==e.turntable_id?t.getNotWinIndex():t.drawClick(e.turntable_id);var s=i+24-n;t.setData({opportunities:t.data.opportunities-1});var r=setInterval(function(){if(n++,(o+=1)>s)if(clearInterval(r),1==e.is_comfort)t.setData({comfort:1,isRunning:!1,ifWxCoupon:e.card_id||!1,timestamp:e.timestamp||"",signature:e.signature||""}),e.card_id?t.toAddCard():t.getWinnerList(t.data.activityData.id);else if("谢谢参与"==t.data.activityData.turntable[t.data.indexSelect].prize_title)t.setData({prizeFail:1,isRunning:!1});else{var a=e.card_id||!1;t.setData({congratulation:1,prize_title:t.data.activityData.turntable[t.data.indexSelect].prize_title,isRunning:!1,ifWxCoupon:a,timestamp:e.timestamp||"",signature:e.signature||""}),a?t.toAddCard():t.getWinnerList(t.data.activityData.id)}else n%=8,t.setData({indexSelect:n})},100)},a.drawClick=function(e){for(var t=a,n=t.data.activityData.turntable,o=0,i=0;i<n.length;i++)n[i].id==e&&(o=i);return o},a.getNotWinIndex=function(){for(var e=a,t=e.data.activityData.turntable,n=0,o=0;o<t.length;o++)-1==t[o].coupon_id&&(n=o);return n},a.playMusics=function(){a.data.activityData.bgm?a.data.isPlay?a.audioCtx.pause():a.audioCtx.play():f.appMethod.showToast({title:"活动未开始，没有音乐",icon:"none"})},a.audioPlay=function(){a.setData({isPlay:!0})},a.audioPause=function(){a.setData({isPlay:!1})},a.onShareAppMessage=function(e){a.setData({isShare:!0});var t=a.data.franchisee?"&franchisee="+a.data.franchisee:"",n=a;return f.appMethod.shareAppMessage({title:n.data.activityData.title,path:"/awardManagement/pages/luckyWheelDetail/luckyWheelDetail?id="+a.data.activityId+"&shareKey="+n.data.shareKey+t,success:function(e){n.data.ifWxCoupon||n.setData({prizeFail:0,duraMax:0,congratulation:0})},fail:function(e){},complete:function(){n.setData({isShare:!1})}})},a.sureClick=function(){a.setData({duraMax:0})},a.comfortClick=function(){a.setData({comfort:0,ifGetComfort:!1})},a.exchangeCancel=function(){a.setData({isExchange:0})},a.exchangePrize=function(){a.getMyIntegral()},a.getMyIntegral=function(){var e=a;f.appMethod.sendRequest({url:"/index.php?r=appLotteryActivity/getMyIntegralExchangeTimes",method:"post",data:{activity_id:e.data.activityData.id,sub_app_id:e.data.franchisee},success:function(t){e.setData({isExchange:1,exchangeMessage:t.data})}})},a.degreeClick=function(){a.setData({isdegree:0})},a.exchangeAll=function(){var e=a;e.setData({inputValue:e.data.exchangeMessage.exchange_times})},a.bindReplaceInput=function(e){a.setData({inputValue:e.detail.value})},a.exchangeConfirm=function(){a.getTime()},a.getTime=function(){var e=a;f.appMethod.sendRequest({url:"/index.php?r=appLotteryActivity/getTime",method:"post",data:{activity_id:e.data.activityData.id,type:"integral",times:e.data.inputValue,sub_app_id:e.data.franchisee},success:function(t){e.setData({opportunities:t.data,isExchange:0,inputValue:""})}})},a.getMyPrize=function(){var e=a;f.appMethod.sendRequest({url:"/index.php?r=appLotteryActivity/getMyPrize",method:"post",data:{activity_id:e.data.activityData.id,sub_app_id:e.data.franchisee},success:function(t){e.setData({RecordSickArr:t.data})}})},a.toAddCard=function(){var e=a.data,t=e.ifWxCoupon,n=a;f.appMethod.addCard({cardList:[{cardId:t,cardExt:'{"nonce_str":"'+e.timestamp+'","timestamp":"'+e.timestamp+'", "signature":"'+e.signature+'"}'}],success:function(t){n.setData({ifWxCoupon:!1,ifGetComfort:!0}),f.appMethod.sendRequest({url:"/index.php?r=appLotteryActivity/recvWeChatCoupon",data:{card_id:t.cardList[0].cardId,sub_app_id:e.franchisee,activity_id:e.activityData.id,app_id:e.activityData.app_id},success:function(e){f.appMethod.showModal({title:"提示",content:"领取卡券成功",showCancel:!1}),n.getWinnerList(n.data.activityData.id)}})}})},a.shadeClose=function(){if(!a.data.isShare){var e=a;e.data.ifWxCoupon?f.appMethod.showModal({title:"提示",content:"微信优惠券不领取到卡包，下次就不能再领取了哦，确定放弃优惠么？",showCancel:!0,confirm:function(t){e.setData({congratulation:0,comfort:0,ifWxCoupon:!1,ifGetComfort:!1})}}):a.setData({congratulation:0,comfort:0,ifGetComfort:!1})}},document.title="参与活动赢大奖",a}return(0,p.default)(t,e),(0,l.default)(t,[{key:"componentWillMount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,g.getCurrentPageQueryParams)(),t=this,a=(t.data.activityData.id,e.franchisee||"");this.setData({franchisee:a,shareKey:e.shareKey||"","topNavBarData.topNavBarHeight":f.appMethod.globalData.topNavBarHeight||0}),f.appMethod.isLogin()?t.dataInitial():f.appMethod.goLogin({success:function(){t.dataInitial()},fail:function(){f.appMethod.turnBack()}}),this.animation=f.appMethod.createAnimation({duration:0,timingFunction:"step-start"}),this.animation2=f.appMethod.createAnimation({duration:0,timingFunction:"step-start"})}},{key:"componentWillUnmount",value:function(){var e=this;clearTimeout(e.timeer),clearTimeout(e.timeer2),clearTimeout(e.timeer3),clearTimeout(e.timeer4)}},{key:"render",value:function(){var e=this.state,t=(e.showGetUserInfo,e.topNavBarData),a=(e.rewardPointObj,e.shareGiftsObj,e.collectGiftsObj,e.collectGetObj,e.activityData),n=e.isPlay,o=e.goldenData,s=e.opportunities,r=e.indexSelect,c=e.colorAwardSelect,l=e.colorAwardDefault,d=e.animationData,u=e.winnerList,m=e.winListData,p=e.winListData2,f=e.duraMax,v=e.isdegree,_=e.prize_title,y=e.ifWxCoupon,E=e.congratulation,b=e.RecordSickArr,N=e.recordSick,R=e.ifGetComfort,k=e.comfort,w=e.exchangeMessage,x=e.inputValue,C=e.isExchange,D=e.prizeFail;return React.createElement(React.Fragment,null,React.createElement("div",{className:"official-page lucky-wheel-detail"},React.createElement("div",{className:"luckyWheelDetail page",id:"luckyWheelDetail"},React.createElement("img",{className:"lucky-cantaniner",style:(0,g.convertLineStyleData)(t.topNavBarHeight?"top:"+t.topNavBarHeight+"px":""),src:a.background||"http://cdn.jisuapp.cn/static/webapp/images/phone-container.png"}),0!=a.bgm&&React.createElement("div",{className:"pageMusic "+(1==n?"active":""),onClick:this.playMusics,style:(0,g.convertLineStyleData)(t.topNavBarHeight?"top:"+(t.topNavBarHeight+8)+"px":"")},1==n&&React.createElement("span",{className:"ico-moon icon-luckyMusic"}),0==n&&React.createElement("span",{className:"ico-moon icon-luckyMute"}),o&&0!=o.bgm&&React.createElement(Audio,{id:"luckyAudio",src:a.bgm,onPlay:this.audioPlay,onPause:this.audioPause,loop:!0})),React.createElement("div",{className:"lucky-wheel-content"},"1"==a.category?React.createElement("div",{className:"motive-square"},React.createElement("img",{src:"http://cdn.jisuapp.cn/static/webapp/images/phone-surprise.png"})):React.createElement("div",{className:"motive"},React.createElement("img",{src:"http://cdn.jisuapp.cn/static/webapp/images/phone-motive.png"})),React.createElement("div",{className:"wholeDiv",style:(0,g.convertLineStyleData)("background:"+(1==a.category?"rgba(97, 65, 116, 0.6)":"rgba(243,190,30,.3)"))},React.createElement("div",{className:"todayChance",style:(0,g.convertLineStyleData)("color:"+(1==a.category?"#fff":"#6b3600"))},"你今日还剩",React.createElement("label",{style:(0,g.convertLineStyleData)("color:"+(1==a.category?"#fed932":"#ff090f"))},s),"次抽奖机会"),React.createElement("div",{className:"personNum",style:(0,g.convertLineStyleData)("color:"+(1==a.category?"#fff":"#6b3600")+";display:"+("-1"==a.joined_show?"none":"inline-block"))},",共有",React.createElement("label",{style:(0,g.convertLineStyleData)("color:"+(1==a.category?"#fed932":"#ff090f"))},a.joined_show),"人参加活动")),"1"==a.category?React.createElement("div",{id:"plateDiv"},React.createElement("img",{id:"plate_img",src:"http://cdn.jisuapp.cn/static/webapp/images/startSquare.png",onClick:this.tipClick}),React.createElement("div",{className:"plate-cont"},React.createElement("img",{src:"http://cdn.jisuapp.cn/static/webapp/images/phone-square.gif"}),a.turntable.map(function(e,t){return React.createElement("div",{className:"zf zf"+t,"data-id":e.id,style:(0,g.convertLineStyleData)("background-color:"+(t===r?c:l)+";"),key:t},React.createElement("img",{src:e.prize_logo}),React.createElement("div",null,e.prize_title))}))):React.createElement("div",{id:"outDiv"},React.createElement("img",{id:"tip",src:"http://cdn.jisuapp.cn/static/webapp/images/phone-start.png",onClick:this.tipClick,"data-id":a.id}),React.createElement("div",{className:"outer-cont",animation:d},React.createElement("img",{className:"img",src:"http://cdn.jisuapp.cn/static/webapp/images/phone-wheel.gif"}),a.turntable&&a.turntable.map(function(e,t){return React.createElement("div",{className:"zp zp"+t,"data-id":e.id,key:e.id},React.createElement("label",null,e.prize_title),React.createElement("img",{src:e.prize_logo}))}))),React.createElement("div",{className:"structurePrize"},React.createElement("div",{className:"lookPrize",onClick:this.clickpagePrize},"查看奖品"),React.createElement("div",{className:"exchangePrize",style:(0,g.convertLineStyleData)("display:"+(0==a.integral_exchange?"none":"inline-block")),onClick:this.exchangePrize},"积分兑换")),React.createElement("div",{className:"winList"},React.createElement("div",{className:"wintitle"},"中奖名单"),React.createElement("div",{className:"winCon",style:(0,g.convertLineStyleData)("background:"+(1==a.category?"#6b4780":"#AE2C53"))},0===u.length?React.createElement("div",{className:"no-winner-list"},"暂无中奖名单"):React.createElement(React.Fragment,null,React.createElement("div",{className:"winconList",animation:m},u.map(function(e,t){return React.createElement("div",{key:t},e.nickname+"抽中"+e.prize_title)})),React.createElement("div",{className:"winconList",animation:p},u.map(function(e,t){return React.createElement("div",{key:t},e.nickname+"抽中"+e.prize_title)}))))),React.createElement("div",{className:"active-rule"},React.createElement("div",{className:"active-rule-title"},"活动规则"),React.createElement("div",{className:"strip-content",style:(0,g.convertLineStyleData)("background:"+(1==a.category?"#6b4780":"#AE2C53"))},React.createElement("div",{className:"strip-time"},React.createElement("label",null,"活动时间："),React.createElement("label",{className:"specific-time"},a.start_time,"-",a.end_time)),React.createElement("div",{className:"textValue",style:(0,g.convertLineStyleData)("word-break:break-all;")},React.createElement("span",null,a.description)),a.user_times_initial>0&&React.createElement("div",{className:"prizedTotalBox"},React.createElement("label",{className:"prizeDisc"},"·"),"用户每日首次登录可获取",React.createElement("label",null,a.user_times_initial),"次抽奖机会"),React.createElement("div",{className:"drawTotalTimes"},React.createElement("label",{className:"prizeDisc"},"·"),"每日抽奖机会最多为",React.createElement("label",null,"-1"==a.user_times?"无数":a.user_times),"次"),"0"!=a.integral_exchange&&React.createElement("div",{className:"exchangeTimes"},React.createElement("label",{className:"prizeDisc"},"·"),"每",React.createElement("label",null,"0"==a.integral_exchange?"0":a.integral_exchange),"积分可兑换一次抽奖机会"),"0"!=a.time_share&&React.createElement("div",{className:"sharesTimes"},React.createElement("label",{className:"prizeDisc"},"·"),"每成功分享1个好友可增加",React.createElement("label",null,"0"==a.time_share?"0":a.time_share),"次抽奖机会，最多可增加",React.createElement("label",null,"0"==a.time_share_limit?"0":a.time_share_limit),"次机会")))),1==f&&React.createElement("div",{className:"duraMaxDiv"},React.createElement("div",{className:"duraMaxDiv-wrap"},React.createElement("div",{className:"duraMaxDiv-con"},React.createElement("div",null,"对不起,您的抽奖",React.createElement("label",{className:"balance"},"次数不足"))),React.createElement("div",{className:"duraMaxDiv-btns"},React.createElement("div",{className:"duraMaxDiv-cancel",onClick:this.sureClick},"确定"),React.createElement("button",{className:"duraMaxDiv-confirm",openType:"share"},"获取更多")))),1==v&&React.createElement("div",{className:"degreeDiv"},React.createElement("div",{className:"degreeDiv-wrap"},React.createElement("div",{className:"degreeDiv-con"},React.createElement("div",null,"对不起,您的抽奖",React.createElement("label",{className:"balance"},"次数不足"))),React.createElement("div",{className:"degreeDiv-btns"},React.createElement("div",{className:"degreeDiv-confirm",onClick:this.degreeClick},"确定"),React.createElement("div",{className:"degreeDiv-cancel",onClick:this.degreeClick},"取消")))),1==E&&React.createElement("div",{className:"Congratulations_sick",onClick:this.shadeClose},React.createElement("div",{className:"Congratulations_wrap"},React.createElement("div",{className:"Congratulations-con"},React.createElement("img",{src:"http://cdn.jisuapp.cn/static/webapp/images/Congratulations.png"}),React.createElement("label",null,_)),React.createElement("div",{className:"Congratulations-btns"},y?React.createElement("button",{className:"btns Congratulations-confirm",style:(0,g.convertLineStyleData)("margin-left: 62px;"),onClick:this.toAddCard},"立即领取"):React.createElement("button",{className:"btns Congratulations-confirm",style:(0,g.convertLineStyleData)("margin-left: 62px;"),onClick:this.confirmClick},"确定"),React.createElement("button",{className:"btns Congratulations-share",style:(0,g.convertLineStyleData)("margin-left: 25px;"),openType:"share"},"传达喜悦")))),1==N&&React.createElement("div",{className:"record_sick",onClick:this.clickRecordSick},React.createElement("div",{className:"record_wrap",onClick:this.stopPropagation},React.createElement("div",{className:"record_header"}),React.createElement("div",{className:"record_content"},React.createElement("img",{className:"img_con",style:(0,g.convertLineStyleData)("display:"+(""==b?"none":"block")),src:"http://cdn.jisuapp.cn/static/webapp/images/prize_con.png"}),React.createElement("div",{className:"content_title"},React.createElement("div",{className:"record_line"}),React.createElement("label",null,"中奖时间"),React.createElement("label",null,"获得奖品")),React.createElement(h.ScrollView,{"scroll-y":"true",className:"prizeList",hidden:""==b},b.map(function(e,t){return React.createElement("div",{key:t},React.createElement("label",null,e.add_time),React.createElement("label",null,e.prize_title))})),React.createElement("div",{className:"record_fail",hidden:""!=b},React.createElement("img",{src:"http://cdn.jisuapp.cn/static/webapp/images/prize_fail.png"}),React.createElement("div",null,"暂未获得任何奖品哦~"))))),1==k&&React.createElement("div",{className:"consolation_sick",onClick:this.shadeClose},React.createElement("div",{className:"consolation_wrap"},React.createElement("div",{className:"consolation_title"},"安慰奖",React.createElement("div",{className:"conBefore"}),React.createElement("div",{className:"conAfter"})),React.createElement("div",{className:"consolation_con"},React.createElement("img",{src:"http://cdn.jisuapp.cn/static/webapp/images/consolation.png"}),R?React.createElement("div",{className:"comfortText"},"已领取，在微信卡包中查看哦~"):React.createElement("div",(0,i.default)({className:"comfortText"},"className","comfortText"),"又没中奖，送你一个小礼品"),!y&&!R&&React.createElement("div",{className:"comfortText"},"在优惠券卡包进行查收哦~")),y?React.createElement("div",{className:"comfortCouponBtn"},React.createElement("button",{className:"push consolation_share",onClick:this.toAddCard},"立即领取"),React.createElement("button",{className:"push consolation_confirm",onClick:this.shadeClose},"确定")):React.createElement("div",{className:"consolation_btns"},React.createElement("button",{className:"push consolation_confirm",onClick:this.comfortClick},"确定")))),1==C&&React.createElement("div",{className:"exchange"},React.createElement("div",{className:"exchange-wrap"},React.createElement("div",{className:"exchange-con"},React.createElement("div",{className:"exchangeCan"},"可兑换次数：",React.createElement("label",null,w.exchange_times),React.createElement("label",null,"次")),React.createElement("div",{className:"exchangeLimit"},"兑换次数：",React.createElement("input",{type:"text",onInput:this.bindReplaceInput,value:x}),React.createElement("label",{className:"exchangeAll",onClick:this.exchangeAll},"全部兑换")),React.createElement("div",{className:"exchangeRule"},"兑换规则：",React.createElement("label",null,w.integral_exchange),"分/次"),React.createElement("div",{className:"exchangeBalance"},"积分余额：",React.createElement("label",null,w.can_use_integral),"分")),React.createElement("div",{className:"exchange-btns"},React.createElement("div",{className:"exchange-cancel",onClick:this.exchangeCancel},"取消"),React.createElement("div",{className:"exchange-confirm",onClick:this.exchangeConfirm},"确定")))),1==D&&React.createElement("div",{className:"notwinning_sick"},React.createElement("div",{className:"notwinning_wrap"},React.createElement("div",{className:"notwinning_title"},"未中奖",React.createElement("div",{className:"conBefore"}),React.createElement("div",{className:"conAfter"})),React.createElement("div",{className:"notwinning_con"},React.createElement("img",{src:"http://cdn.jisuapp.cn/static/webapp/images/notWinning.png"}),React.createElement("div",null,"很遗憾！"),React.createElement("div",null,"您什么都没抽中哦~")),React.createElement("div",{className:"notwinning_btns"},React.createElement("button",{className:"push notwinning_confirm",onClick:this.notwinningClick},"确定")))))))}}]),t}(_.default);t.default=y},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(9),i=n(o),s=a(0),r=n(s),c=a(3),l=n(c),d=a(1),u=n(d),m=a(2),p=n(m),f=a(5),g=a(6),h=a(7),v=n(h);a(491);var _=function(e){function t(e){(0,r.default)(this,t);var a=(0,u.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={topNavBarData:{isDefault:0,title:"参与活动赢大奖"},activityId:"",goldenData:{},winnerList:[],exchangeMessage:{},isExchange:0,isRecord:0,eggsList:[{hasAnimate:!1},{hasAnimate:!1},{hasAnimate:!1}],comfort:0,prizeFail:0,congratulation:0,eggNum:"",isdegree:0,duraMax:0,isPlay:!1,inputValue:"",myPrize:[],isSinker:!1,isWin:!1,animationData:{},animationData2:{},franchisee:"",ifWxCoupon:!1,timestamp:"",signature:"",ifGetComfort:!1,isShare:!1},a.getGoldenInfo=function(){var e=a,t=new Object;t.category=2,e.data.franchisee&&(t.sub_app_id=e.data.franchisee),f.appMethod.sendRequest({url:"/index.php?r=appLotteryActivity/getActivity",method:"post",data:t,success:function(t){var a=t.data;a.description=a.description.replace(/\\n/g,"\n"),e.setData({goldenData:a,eggNum:a.times}),f.appMethod.setNavigationBarTitle({title:a.title}),e.audioCtx=f.appMethod.createAudioContext("goldenAudio"),0!=a.bgm?e.audioCtx.play():e.audioCtx.pause(),e.getWinnerList(e.data.goldenData.id),e.data.shareKey&&e.getTimeByShareKey(e.data.goldenData.id,e.data.shareKey),e.getShareKey(e.data.goldenData.id)}})},a.getShareKey=function(e){var t=a,n=new Object;n.activity_id=e,t.data.franchisee&&(n.sub_app_id=t.data.franchisee),f.appMethod.sendRequest({url:"/index.php?r=appLotteryActivity/getShareKey",data:n,success:function(e){var a=e;0==a.status&&t.setData({shareKey:a.data})}})},a.getTimeByShareKey=function(e,t){var n=a,o=new Object;o.activity_id=e,o.share_key=t,n.data.franchisee&&(o.sub_app_id=n.data.franchisee),f.appMethod.sendRequest({url:"/index.php?r=appLotteryActivity/getTimeByShareKey",data:o,success:function(e){}})},a.getWinnerList=function(e){var t=a;f.appMethod.sendRequest({url:"/index.php?r=appLotteryActivity/getWinnerList",method:"post",hideLoading:!0,data:{activity_id:e,sub_app_id:t.data.franchisee},success:function(e){var a=44*(e.count+5);t.setData({winnerList:e.data}),t.animationTop(a,!0)}})},a.getMyIntegral=function(){var e=a;f.appMethod.sendRequest({url:"/index.php?r=appLotteryActivity/getMyIntegralExchangeTimes",method:"post",data:{activity_id:e.data.goldenData.id,sub_app_id:e.data.franchisee},success:function(t){e.setData({exchangeMessage:t.data})}})},a.exchangePrizeClick=function(){var e=a;e.getMyIntegral(),e.setData({isExchange:1})},a.exchangeCancel=function(){a.setData({isExchange:0})},a.recordClick=function(){var e=a;e.setData({isRecord:1}),e.getMyPrize()},a.recordWrapClick=function(){a.setData({isRecord:0})},a.stopPropagation=function(){},a.startEgg=function(e){var t=a,n=e.currentTarget.dataset.index;if(t.data.goldenData.id&&!t.eggsLoading){if(t.eggsLoading=!0,t.data.eggNum<=0)return 0==t.data.goldenData.time_share?t.setData({isdegree:1}):t.setData({duraMax:1}),void(t.eggsLoading=!1);t.eggsClick(n),t.setData({isSinker:!0})}},a.eggsLoading=!1,a.eggsClick=function(e){var t=a;f.appMethod.sendRequest({url:"/index.php?r=appLotteryActivity/lottery",method:"post",hideLoading:!0,data:{activity_id:t.data.goldenData.id,app_id:f.appMethod.globalData.appId,sub_app_id:t.data.franchisee},success:function(a){var n=a.data,o={};"谢谢参与"==n.title?(o.isWin=!1,setTimeout(function(){o={},o["eggsList["+e+"].hasAnimate"]=!1,o.prizeFail=1,t.setData(o),t.eggsLoading=!1},2200)):(o.isWin=!0,setTimeout(function(){o={},1==n.is_comfort?o.comfort=1:(o.congratulation=1,o.prize_title=n.title);var a=n.card_id||!1;o.ifWxCoupon=a,o.timestamp=n.timestamp||"",o.signature=n.signature||"",o["eggsList["+e+"].hasAnimate"]=!1,t.setData(o),t.eggsLoading=!1,a&&t.toAddCard()},2200),t.data.ifWxCoupon||t.getWinnerList(t.data.goldenData.id)),o.eggNum=t.data.eggNum-1,o["eggsList["+e+"].hasAnimate"]=!0,t.setData(o)},successStatusAbnormal:function(){t.eggsLoading=!1}})},a.notwinningClick=function(){a.setData({prizeFail:0})},a.confirmClick=function(){a.setData({congratulation:0})},a.duraClick=function(){a.setData({duraMax:0})},a.comfortClick=function(){a.setData({comfort:0,ifGetComfort:!1})},a.degreeClick=function(){a.setData({isdegree:0})},a.onShareAppMessage=function(e){a.setData({isShare:!0});var t=a;t.getShareKey(t.data.goldenData.id);var n=a.data.franchisee?"&franchisee="+a.data.franchisee:"";return f.appMethod.shareAppMessage({title:t.data.goldenData.title,path:"/awardManagement/pages/goldenEggs/goldenEggs?id="+t.data.activityId+"&shareKey="+t.data.shareKey+n,success:function(e){t.data.ifWxCoupon||t.setData({prizeFail:0,duraMax:0,congratulation:0})},fail:function(e){},complete:function(){t.setData({isShare:!1})}})},a.playMusics=function(){a.data.goldenData.bgm?a.data.isPlay?a.audioCtx.pause():a.audioCtx.play():f.appMethod.showToast({title:"活动未开始，没有音乐",icon:"none"})},a.audioPlay=function(){a.setData({isPlay:!0})},a.audioPause=function(){a.setData({isPlay:!1})},a.bindReplaceInput=function(e){a.setData({inputValue:e.detail.value})},a.exchangeAll=function(){var e=a;e.setData({inputValue:e.data.exchangeMessage.exchange_times})},a.exchangeConfirm=function(){var e=a;e.data.goldenData.id&&e.getIntegralTime()},a.getIntegralTime=function(){var e=a;f.appMethod.sendRequest({url:"/index.php?r=appLotteryActivity/getTime",method:"post",data:{activity_id:e.data.goldenData.id,type:"integral",times:e.data.inputValue,sub_app_id:e.data.franchisee},success:function(t){e.setData({eggNum:t.data,isExchange:0,inputValue:""})}})},a.getMyPrize=function(){var e=a;f.appMethod.sendRequest({url:"/index.php?r=appLotteryActivity/getMyPrize",method:"post",data:{activity_id:e.data.goldenData.id,sub_app_id:e.data.franchisee},success:function(t){e.setData({myPrize:t.data})}})},a.animation="",a.animation2="",a.animationTop=function(e,t){var n=a;clearTimeout(n.timeer),clearTimeout(n.timeer2),t?(n.animation.top("190rpx").step({duration:0,timingFunction:"step-start"}),n.animation2.top("190rpx").step({duration:0,timingFunction:"step-start"}),n.setData({animationData:n.animation.export(),animationData2:n.animation2.export()}),setTimeout(function(){n.animation.top("-"+e+"rpx").step({duration:15e3,timingFunction:"linear"}),n.setData({animationData:n.animation.export()}),n.animationTopCopy(e,t)},50)):(n.timeer=setTimeout(function(){n.animation.top("190rpx").step({duration:0,timingFunction:"step-start"}),n.setData({animationData:n.animation.export()})},200/(e+200)*15e3),n.timeer2=setTimeout(function(){n.animation.top("-"+e+"rpx").step({duration:15e3,timingFunction:"linear"}),n.setData({animationData:n.animation.export()}),n.animationTopCopy(e)},e/(e+200)*15e3))},a.animationTopCopy=function(e,t){var n=a;clearTimeout(n.timeer3),clearTimeout(n.timeer4),t||(n.timeer3=setTimeout(function(){n.animation2.top("190rpx").step({duration:0,timingFunction:"step-start"}),n.setData({animationData2:n.animation2.export()})},200/(e+200)*15e3)),n.timeer4=setTimeout(function(){n.animation2.top("-"+e+"rpx").step({duration:15e3,timingFunction:"linear"}),n.setData({animationData2:n.animation2.export()}),n.animationTop(e)},e/(e+200)*15e3)},a.toAddCard=function(){var e=a.data,t=e.ifWxCoupon,n=a;f.appMethod.addCard({cardList:[{cardId:t,cardExt:'{"nonce_str":"'+e.timestamp+'","timestamp":"'+e.timestamp+'", "signature":"'+e.signature+'"}'}],success:function(t){n.setData({ifWxCoupon:!1,ifGetComfort:!0}),f.appMethod.sendRequest({url:"/index.php?r=appLotteryActivity/recvWeChatCoupon",data:{card_id:t.cardList[0].cardId,sub_app_id:e.franchisee,activity_id:e.goldenData.id,app_id:e.goldenData.app_id},success:function(e){f.appMethod.showModal({title:"提示",content:"领取卡券成功",showCancel:!1}),n.getWinnerList(n.data.goldenData.id)}})}})},a.shadeClose=function(){if(!a.data.isShare){var e=a;e.data.ifWxCoupon?f.appMethod.showModal({title:"提示",content:"微信优惠券不领取到卡包，下次就不能再领取了哦，确定放弃优惠么？",showCancel:!0,confirm:function(t){e.setData({congratulation:0,comfort:0,ifWxCoupon:!1,ifGetComfort:!1})}}):a.setData({congratulation:0,comfort:0,ifGetComfort:!1})}},document.title="参与活动赢大奖",a}return(0,p.default)(t,e),(0,l.default)(t,[{key:"componentWillMount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,g.getCurrentPageQueryParams)(),t=this,a=(t.data.goldenData.id,e.franchisee||"");this.setData({franchisee:a,shareKey:e.shareKey||""}),f.appMethod.isLogin()?t.getGoldenInfo():f.appMethod.goLogin({success:function(){t.getGoldenInfo()},fail:function(){f.appMethod.turnBack()}}),this.animation=f.appMethod.createAnimation({duration:0,timingFunction:"step-start"}),this.animation2=f.appMethod.createAnimation({duration:0,timingFunction:"step-start"})}},{key:"componentWillUnmount",value:function(){var e=this;clearTimeout(e.timeer),clearTimeout(e.timeer2),clearTimeout(e.timeer3),clearTimeout(e.timeer4)}},{key:"render",value:function(){var e=this,t=this.state,a=(t.showGetUserInfo,t.topNavBarData,t.rewardPointObj,t.shareGiftsObj,t.collectGiftsObj,t.collectGetObj,t.goldenData),n=t.isPlay,o=t.isSinker,s=t.eggsList,r=t.isWin,c=t.eggNum,l=t.winnerList,d=t.animationData,u=t.animationData2,m=t.exchangeMessage,p=t.inputValue,f=t.isExchange,h=t.myPrize,v=t.isRecord,_=t.duraMax,y=t.isdegree,E=t.prize_title,b=t.ifWxCoupon,N=t.congratulation,R=t.prizeFail,k=t.ifGetComfort,w=t.comfort;return React.createElement(React.Fragment,null,React.createElement("div",{className:"official-page golden-eggs"},React.createElement("div",{className:"page",id:"goldenEggs"},React.createElement("img",{className:"golden_cantaniner",src:a.background||"http://cdn.jisuapp.cn/static/webapp/images/goldenContainer.png"}),0!=a.bgm&&React.createElement("div",{className:"goldenMusic "+(1==n?"active":""),onClick:this.playMusics},1==n&&React.createElement("span",{className:"ico-moon icon-luckyMusic"}),0==n&&React.createElement("span",{className:"ico-moon icon-luckyMute"})),React.createElement("div",{className:"scatter"},React.createElement("img",{src:"http://cdn.jisuapp.cn/static/webapp/images/goldenMotive.png"})),React.createElement("div",{className:"goldenHouse"},React.createElement("div",{className:"goldenSinker",hidden:1==o},React.createElement("img",{src:"http://cdn.jisuapp.cn/static/webapp/images/goldenSinker.gif"})),React.createElement("div",{className:"goldenEgg"},s.map(function(t,a){return React.createElement("div",{onClick:e.startEgg,key:a,"data-index":a,className:"egg"+a},React.createElement("div",{className:"egg-gif "+(r?"egg-win":"egg-notwin"),hidden:!t.hasAnimate,"data-index":a}),React.createElement("div",{className:"egg-png",hidden:t.hasAnimate}))}),React.createElement("img",{src:"http://cdn.jisuapp.cn/static/webapp/images/golden-eggs-win.png",hidden:!0}),React.createElement("img",{src:"http://cdn.jisuapp.cn/static/webapp/images/golden-eggs-notwin.png",hidden:!0})),React.createElement("div",{className:"activeData"},React.createElement("div",{className:"activepopNum",style:(0,g.convertLineStyleData)("margin-top:"+(-1==a.joined_show?"35rpx":"11rpx"))},"你有",React.createElement("span",null,c),"次砸蛋机会"),-1!=a.joined_show&&React.createElement("div",{className:"phone-personNum"},"已有",React.createElement("span",null,a.joined_show),"人参加活动"))),React.createElement("div",{className:"structurePrize"},React.createElement("div",{className:"lookPrize",onClick:this.recordClick},"查看奖品"),React.createElement("div",{className:"exchangePrize",onClick:this.exchangePrizeClick,style:(0,g.convertLineStyleData)("display:"+(0==a.integral_exchange?"none":"inline-block"))},"积分兑换")),React.createElement("div",{className:"golden-winner"},React.createElement("div",{className:"winner-header"},React.createElement("span",null,"中奖名单")),React.createElement("div",{className:"winner-content"},0===l.length?React.createElement("div",{className:"no-winner-list"},"暂无中奖名单"):React.createElement(React.Fragment,null,React.createElement("div",{className:"winner-list",animation:d},l.map(function(e,t){return React.createElement("div",{key:t},React.createElement("span",null,e.nickname),React.createElement("span",null,e.prize_title))})),React.createElement("div",{className:"winner-list",animation:u},l.map(function(e,t){return React.createElement("div",{key:t},React.createElement("span",null,e.nickname),React.createElement("span",null,e.prize_title))}))))),React.createElement("div",{className:"golden-rule"},React.createElement("div",{className:"rule-header"},React.createElement("span",null,"兑奖说明")),React.createElement("div",{className:"rule-content"},React.createElement("div",{className:"rule-startTime"},"开始时间：",React.createElement("span",null,a.start_time)),React.createElement("div",{className:"rule-endTime"},"结束时间：",React.createElement("span",null,a.end_time)),React.createElement("div",{className:"rule-prizeMes"},React.createElement("span",null,a.description)),React.createElement("div",null,"获取砸金蛋次数："),a.user_times_initial>0&&React.createElement("div",{className:"rule-goldenNum"},React.createElement("label",{className:"goldenDisc"},"·"),"用户每日首次登录可获取",React.createElement("span",null,a.user_times_initial),"次砸金蛋机会。"),React.createElement("div",{className:"rule-most"},React.createElement("label",{className:"goldenDisc"},"·"),"每日砸金蛋机会最多为",React.createElement("span",null,"-1"==a.user_times?"无限":a.user_times),"次。"),0!=a.integral_exchange&&React.createElement("div",{className:"rule-exchanage"},React.createElement("label",{className:"goldenDisc"},"·"),"每",React.createElement("span",null,a.integral_exchange),"积分可兑换一次砸金蛋机会。"),0!=a.time_share&&React.createElement("div",{className:"rule-share"},React.createElement("label",{className:"goldenDisc"},"·"),"每成功分享给1个好友可增加",React.createElement("span",null,a.time_share),"次砸金蛋机会，最多可增加",React.createElement("span",null,a.time_share_limit),"次机会。"),0==a.consume_money&&0!=a.consume_times&&React.createElement("div",null,React.createElement("label",{className:"goldenDisc"},"·"),"消费即赠送",React.createElement("span",null,a.consume_times),"次砸金蛋机会。"),0!=a.consume_money&&React.createElement("div",null,React.createElement("label",{className:"goldenDisc"},"·"),"单次消费每满",React.createElement("span",null,a.consume_money),"元，则赠送",React.createElement("span",null,a.consume_times),"次砸金蛋机会，最多增加",React.createElement("span",null,a.consume_times_limit),"次机会。"),React.createElement("div",{style:(0,g.convertLineStyleData)("margin-top: 5px;")},"此活动最终解释权归本店所有;"),React.createElement("div",null,"ps：优惠券奖品直接发放，可在小程序我的优惠券中查看。"))),1==f&&React.createElement("div",{className:"exchange"},React.createElement("div",{className:"exchange-wrap"},React.createElement("div",{className:"exchange-con"},React.createElement("div",{className:"exchangeCan"},"可兑换次数：",React.createElement("label",null,m.exchange_times),React.createElement("label",null,"次")),React.createElement("div",{className:"exchangeLimit"},"兑换次数：",React.createElement("input",{type:"text",onInput:this.bindReplaceInput,value:p}),React.createElement("label",{className:"exchangeAll",onClick:this.exchangeAll},"全部兑换")),React.createElement("div",{className:"exchangeRule"},"兑换规则：",React.createElement("label",null,m.integral_exchange),"/次"),React.createElement("div",{className:"exchangeBalance"},"积分余额：",React.createElement("label",null,m.can_use_integral),"分")),React.createElement("div",{className:"exchange-btns"},React.createElement("div",{className:"exchange-cancel",onClick:this.exchangeCancel},"取消"),React.createElement("div",{className:"exchange-confirm",onClick:this.exchangeConfirm},"确定")))),1==v&&React.createElement("div",{className:"golden-record",onClick:this.recordWrapClick},React.createElement("div",{className:"record-wrap",onClick:this.stopPropagation},React.createElement("div",{className:"record-wrap-header"},"我的中奖记录"),React.createElement("div",{className:"record-wrap-edge"},React.createElement("div",{className:"record-wrap-con"},React.createElement("div",{className:"record-wrap-title"},React.createElement("div",{className:"record_line"}),React.createElement("span",null,"中奖时间"),React.createElement("span",null,"获得奖品")),React.createElement("div",{className:"record-list",hidden:""==h},h.map(function(e,t){return React.createElement("div",{key:t},React.createElement("span",null,e.add_time),React.createElement("span",null,e.prize_title))})),React.createElement("div",{className:"record_fail",hidden:""!=h},React.createElement("img",{src:"http://cdn.jisuapp.cn/static/webapp/images/golden-fail.png"}),React.createElement("div",null,"暂未获得任何奖品哦~")))))),1==_&&React.createElement("div",{className:"duraMaxDiv"},React.createElement("div",{className:"duraMaxDiv-wrap"},React.createElement("div",{className:"duraMaxDiv-con"},React.createElement("div",null,"对不起,您的砸金蛋",React.createElement("label",{className:"balance"},"次数不足"))),React.createElement("div",{className:"duraMaxDiv-btns"},React.createElement("div",{className:"duraMaxDiv-cancel",onClick:this.duraClick},"确定"),React.createElement("button",{className:"duraMaxDiv-confirm",openType:"share"},"获取更多")))),1==y&&React.createElement("div",{className:"degreeDiv"},React.createElement("div",{className:"degreeDiv-wrap"},React.createElement("div",{className:"degreeDiv-con"},React.createElement("div",null,"对不起,您的砸金蛋",React.createElement("label",{className:"balance"},"次数不足"))),React.createElement("div",{className:"degreeDiv-btns"},React.createElement("div",{className:"degreeDiv-cancel",onClick:this.degreeClick},"取消"),React.createElement("div",{className:"degreeDiv-confirm",onClick:this.degreeClick},"确定")))),1==N&&React.createElement("div",{className:"Congratulations_sick",onClick:this.shadeClose},React.createElement("div",{className:"Congratulations_wrap"},React.createElement("div",{className:"Congratulations-con"},React.createElement("img",{src:"http://cdn.jisuapp.cn/static/webapp/images/Congratulations.png"}),React.createElement("label",null,E)),React.createElement("div",{className:"Congratulations-btns"},b?React.createElement("button",{className:"btns Congratulations-confirm",style:(0,g.convertLineStyleData)("margin-left: 112rpx;"),onClick:this.toAddCard},"立即领取"):React.createElement("button",{className:"btns Congratulations-confirm",style:(0,g.convertLineStyleData)("margin-left: 112rpx;"),onClick:this.confirmClick},"确定"),React.createElement("button",{className:"btns Congratulations-share",style:(0,g.convertLineStyleData)("margin-left: 58rpx;"),openType:"share"},"传达喜悦")))),1==R&&React.createElement("div",{className:"notwinning_sick"},React.createElement("div",{className:"notwinning_wrap"},React.createElement("div",{className:"notwinning_title"},"未中奖",React.createElement("div",{className:"conBefore"}),React.createElement("div",{className:"conAfter"})),React.createElement("div",{className:"notwinning_con"},React.createElement("img",{src:"http://cdn.jisuapp.cn/static/webapp/images/notWinning.png"}),React.createElement("div",null,"很遗憾！"),React.createElement("div",null,"您什么都没砸中哦~")),React.createElement("div",{className:"notwinning_btns"},React.createElement("button",{className:"push notwinning_confirm",onClick:this.notwinningClick},"确定")))),1==w&&React.createElement("div",{className:"consolation_sick",onClick:this.shadeClose},React.createElement("div",{className:"consolation_wrap"},React.createElement("div",{className:"consolation_title"},"安慰奖",React.createElement("div",{className:"conBefore"}),React.createElement("div",{className:"conAfter"})),React.createElement("div",{className:"consolation_con"},React.createElement("img",{src:"http://cdn.jisuapp.cn/static/webapp/images/consolation.png"}),k?React.createElement("div",{className:"comfortText"},"已领取，在微信卡包中查看哦~"):React.createElement("div",(0,i.default)({className:"comfortText"},"className","comfortText"),"又没中奖，送你一个小礼品"),!b&&!k&&React.createElement("div",{className:"comfortText"},">在优惠券卡包进行查收哦~")),b?React.createElement("div",{className:"comfortCouponBtn"},React.createElement("button",{className:"push consolation_confirm",onClick:this.shadeClose},"确定"),React.createElement("button",{className:"push consolation_share",onClick:this.toAddCard},"立即领取")):React.createElement("div",{className:"consolation_btns"},React.createElement("button",{className:"push consolation_confirm",onClick:this.comfortClick},"确定")))))))}}]),t}(v.default);t.default=_},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(9),i=n(o),s=a(0),r=n(s),c=a(3),l=n(c),d=a(1),u=n(d),m=a(2),p=n(m),f=a(5),g=a(6),h=a(7),v=n(h);a(493);var _=function(e){function t(e){(0,r.default)(this,t);var a=(0,u.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={topNavBarData:{title:"刮刮乐",isDefault:0},isShowBtn:!1,scratchInfo:{},scratchTimes:"",scratchId:"",winnerList:[],isPrizeSick:!1,isIntel:!1,myPrize:[],intelMes:{},inputValue:"",isFail:!0,isPrize:!0,isComfort:!0,hideCanvas:!1,isDegree:!1,isDurMax:!1,scratchPrizeTitle:"",animationData:{},animationData2:{},isScroll:!0,isPlay:!1,isLimit:!1,time_limit:"",isRoll:!0,scratchStatus:"",franchisee:"",ifWxCoupon:!1,timestamp:"",signature:"",ifGetComfort:!1},a.getShareKey=function(e){var t=a,n=new Object;n.activity_id=e,t.data.franchisee&&(n.sub_app_id=t.data.franchisee),f.appMethod.sendRequest({url:"/index.php?r=appLotteryActivity/getShareKey",data:n,success:function(e){var a=e;0==a.status&&t.setData({shareKey:a.data})}})},a.getTimeByShareKey=function(e,t){var n=a,o=new Object;o.activity_id=e,o.share_key=t,n.data.franchisee&&(o.sub_app_id=n.data.franchisee),f.appMethod.sendRequest({url:"/index.php?r=appLotteryActivity/getTimeByShareKey",data:o,success:function(e){}})},a.startScratch=function(){var e=a;if(e.data.scratchId)if(0==e.data.time_limit)e.setData({isLimit:!0,hideCanvas:!0,isShowBtn:!1});else if(e.data.scratchTimes<=0)0==e.data.scratchInfo.time_share?e.setData({isDegree:!0,hideCanvas:!0,isShowBtn:!1}):e.setData({isDurMax:!0,hideCanvas:!0,isShowBtn:!1});else{if(e.scratchLoading)return!1;e.setData({isShowBtn:!1}),e.scratchLoading=!0,e.getLottery()}},a.getScratchData=function(){var e=a,t=new Object;t.category=3,e.data.franchisee&&(t.sub_app_id=e.data.franchisee),f.appMethod.sendRequest({url:"/index.php?r=appLotteryActivity/getActivity",method:"post",data:t,success:function(t){var a=t.data;a.description=a.description.replace(/\\n/g,"\n"),e.setData({scratchInfo:a,scratchTimes:a.times,scratchId:a.id,time_limit:a.time_limit}),f.appMethod.setNavigationBarTitle({title:a.title}),e.audioCtx=f.appMethod.createAudioContext("scratchAudio"),0!=a.bgm?e.audioCtx.play():e.audioCtx.pause(),e.getWinnerList(a.id),e.data.shareKey&&e.getTimeByShareKey(a.id,e.data.shareKey),e.getShareKey(e.data.scratchId)}})},a.scratchLoading=!1,a.getLottery=function(){var e=a;f.appMethod.sendRequest({url:"/index.php?r=appLotteryActivity/lottery",method:"post",hideLoading:!0,data:{activity_id:e.data.scratchId,sub_app_id:e.data.franchisee},success:function(t){var a=t.data,n={};if(e.scratch.start(),"谢谢参与"==a.title)n={},n.isFail=!1,n.scratchTimes=a.time,n.time_limit=a.time_limit,e.setData(n);else{n={},1==a.is_comfort?n.isComfort=!1:(n.isPrize=!1,n.scratchPrizeTitle=a.title);var o=a.card_id||!1;n.ifWxCoupon=o,n.timestamp=a.timestamp||"",n.signature=a.signature||"",n.scratchTimes=a.time,n.time_limit=a.time_limit,e.setData(n),e.getWinnerList(e.data.scratchId)}e.scratchLoading=!1},successStatusAbnormal:function(t){e.scratchLoading=!1,1==t.status&&e.setData({isShowBtn:!0})}})},a.getWinnerList=function(e){var t=a;f.appMethod.sendRequest({url:"/index.php?r=appLotteryActivity/getWinnerList",method:"post",hideLoading:!0,data:{activity_id:e,sub_app_id:t.data.franchisee},success:function(e){var a=44*(e.count+5);t.setData({winnerList:e.data}),t.animationTop(a,!0)}})},a.animation="",a.animation2="",a.animationTop=function(e,t){var n=a;clearTimeout(n.timeer),clearTimeout(n.timeer2),t?(n.animation.top("190rpx").step({duration:0,timingFunction:"step-start"}),n.animation2.top("190rpx").step({duration:0,timingFunction:"step-start"}),n.setData({animationData:n.animation.export(),animationData2:n.animation2.export()}),setTimeout(function(){n.animation.top("-"+e+"rpx").step({duration:15e3,timingFunction:"linear"}),n.setData({animationData:n.animation.export()}),n.animationTopCopy(e,t)},50)):(n.timeer=setTimeout(function(){n.animation.top("190rpx").step({duration:0,timingFunction:"step-start"}),n.setData({animationData:n.animation.export()})},200/(e+200)*15e3),n.timeer2=setTimeout(function(){n.animation.top("-"+e+"rpx").step({duration:15e3,timingFunction:"linear"}),n.setData({animationData:n.animation.export()}),n.animationTopCopy(e)},e/(e+200)*15e3))},a.animationTopCopy=function(e,t){var n=a;clearTimeout(n.timeer3),clearTimeout(n.timeer4),t||(n.timeer3=setTimeout(function(){n.animation2.top("190rpx").step({duration:0,timingFunction:"step-start"}),n.setData({animationData2:n.animation2.export()})},200/(e+200)*15e3)),n.timeer4=setTimeout(function(){n.animation2.top("-"+e+"rpx").step({duration:15e3,timingFunction:"linear"}),n.setData({animationData2:n.animation2.export()}),n.animationTop(e)},e/(e+200)*15e3)},a.playMusics=function(){a.data.scratchInfo.bgm?a.data.isPlay?a.audioCtx.pause():a.audioCtx.play():f.appMethod.showToast({title:"活动未开始，没有音乐",icon:"none"})},a.audioPlay=function(){a.setData({isPlay:!0})},a.audioPause=function(){a.setData({isPlay:!1})},a.lookPrize=function(){var e=a;e.data.scratchId&&(e.setData({isPrizeSick:!0,hideCanvas:!0,isShowBtn:!1,isRoll:!1}),e.getMyPrize())},a.wrapPrize=function(){var e=a;a.scratch.reset(),a.setData({isPrizeSick:!1,hideCanvas:!1,isRoll:!0}),setTimeout(function(){e.setData({isShowBtn:!0})},100)},a.stopPropagation=function(){},a.intelClick=function(){a.data.scratchId&&(a.setData({isIntel:!0,hideCanvas:!0,isShowBtn:!1}),a.getMyIntegral())},a.intelClose=function(){var e=a;a.scratch.reset(),a.setData({isIntel:!1,hideCanvas:!1,isFail:!0,isPrize:!0,isComfort:!0}),setTimeout(function(){e.setData({isShowBtn:!0})},50)},a.failBtnClick=function(){var e=a;e.scratch.reset(),e.setData({hideCanvas:!1,isFail:!0}),setTimeout(function(){e.setData({isShowBtn:!0})},100)},a.winningBtnClick=function(){var e=a;e.scratch.reset(),e.setData({hideCanvas:!1,isPrize:!0}),setTimeout(function(){e.setData({isShowBtn:!0})},100)},a.comfortBtnClick=function(){var e=a;e.scratch.reset(),e.setData({hideCanvas:!1,isComfort:!0,ifGetComfort:!1}),setTimeout(function(){e.setData({isShowBtn:!0})},100)},a.bindReplaceInput=function(e){a.setData({inputValue:e.detail.value})},a.intelConfirm=function(){var e=a;e.data.scratchId&&e.getIntegralTime()},a.scratchInteAll=function(){var e=a;e.setData({inputValue:e.data.intelMes.exchange_times})},a.getMyPrize=function(){var e=a;f.appMethod.sendRequest({url:"/index.php?r=appLotteryActivity/getMyPrize",method:"post",hideLoading:!0,data:{activity_id:e.data.scratchId,sub_app_id:e.data.franchisee},success:function(t){e.setData({myPrize:t.data})}})},a.getMyIntegral=function(){var e=a;f.appMethod.sendRequest({url:"/index.php?r=appLotteryActivity/getMyIntegralExchangeTimes",method:"post",data:{activity_id:e.data.scratchId,sub_app_id:e.data.franchisee},success:function(t){e.setData({intelMes:t.data})}})},a.getIntegralTime=function(){var e=a;f.appMethod.sendRequest({url:"/index.php?r=appLotteryActivity/getTime",method:"post",data:{activity_id:e.data.scratchId,type:"integral",times:e.data.inputValue,sub_app_id:e.data.franchisee},success:function(t){e.scratch.reset(),e.setData({scratchTimes:t.data,isIntel:!1,inputValue:"",hideCanvas:!1,isDurMax:!1,isDegree:!1}),setTimeout(function(){e.setData({isShowBtn:!0})},200)}})},a.onShareAppMessage=function(e){var t=a,n=a.data.franchisee?"&franchisee="+a.data.franchisee:"";return f.appMethod.shareAppMessage({title:t.data.scratchInfo.title,path:"/awardManagement/pages/scratch/scratch?id="+t.data.scratchId+"&shareKey="+t.data.shareKey+n,success:function(e){},fail:function(e){}})},a.touchStart=function(){},a.touchEnd=function(){},a.touchMove=function(){},a.imgOnLoad=function(){},a.toAddCard=function(){var e=a.data,t=e.ifWxCoupon,n=a;f.appMethod.addCard({cardList:[{cardId:t,cardExt:'{"nonce_str":"'+e.timestamp+'","timestamp":"'+e.timestamp+'", "signature":"'+e.signature+'"}'}],success:function(t){n.setData({ifWxCoupon:!1}),f.appMethod.sendRequest({url:"/index.php?r=appLotteryActivity/recvWeChatCoupon",data:{card_id:t.cardList[0].cardId,sub_app_id:e.franchisee,activity_id:e.scratchInfo.id,app_id:e.scratchInfo.app_id},success:function(e){f.appMethod.showModal({title:"提示",content:"领取卡券成功",showCancel:!1}),n.setData({ifGetComfort:!0}),n.getWinnerList(n.data.scratchId)}})}})},a.shadeClose=function(e){var t=a,n=e.currentTarget.dataset.type;f.appMethod.showModal({title:"提示",content:"微信优惠券不领取到卡包，下次就不能再领取了哦，确定放弃优惠么？",showCancel:!0,confirm:function(e){t.setData({ifWxCoupon:!1,ifGetComfort:!1}),1==n?t.winningBtnClick():2==n&&t.comfortBtnClick()}})},document.title="刮刮乐",a}return(0,p.default)(t,e),(0,l.default)(t,[{key:"componentWillMount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,g.getCurrentPageQueryParams)(),t=this,a=e.franchisee||"";window.innerWidth,window.innerWidth;t.setData({franchisee:a,shareKey:e.shareKey||""}),f.appMethod.isLogin()?t.getScratchData():f.appMethod.goLogin({success:function(){t.getScratchData()},fail:function(){f.appMethod.turnBack()}}),this.animation=f.appMethod.createAnimation({duration:0,timingFunction:"step-start"}),this.animation2=f.appMethod.createAnimation({duration:0,timingFunction:"step-start"})}},{key:"componentWillUnmount",value:function(){var e=this;clearTimeout(e.timeer),clearTimeout(e.timeer2),clearTimeout(e.timeer3),clearTimeout(e.timeer4)}},{key:"render",value:function(){var e=this.state,t=(e.showGetUserInfo,e.topNavBarData,e.rewardPointObj,e.shareGiftsObj,e.collectGiftsObj,e.collectGetObj,e.scratchInfo),a=e.isPlay,n=e.scratchTimes,o=e.isFail,s=e.isPrize,r=e.scratchPrizeTitle,c=e.ifWxCoupon,l=e.isDurMax,d=e.isLimit,u=e.isComfort,m=e.ifGetComfort,p=e.isDegree,f=e.hideCanvas,h=e.scratch,v=e.isShowBtn,_=e.winnerList,y=e.animationData,E=e.animationData2,b=e.myPrize,N=e.isPrizeSick,R=e.intelMes,k=e.inputValue,w=e.isIntel;return React.createElement("div",{className:"official-page scratch"},React.createElement(React.Fragment,null,React.createElement("div",{className:"page scratch",id:"scratch"},React.createElement("img",{className:"scratch-cantaniner",src:t.background||"http://cdn.jisuapp.cn/static/webapp/images/scratchContainer.png"}),0!=t.bgm&&React.createElement("div",{className:"scratchMusic "+(1==a?"active":""),onClick:this.playMusics},1==a&&React.createElement("span",{className:"ico-moon icon-luckyMusic"}),0==a&&React.createElement("span",{className:"ico-moon icon-luckyMute"})),React.createElement("div",{className:"scratch-scater"},React.createElement("img",{src:"http://cdn.jisuapp.cn/static/webapp/images/scratchPonter.png"})),React.createElement("div",{className:"phoneCx"},React.createElement("div",{className:"phone-todayChance"},"您今日还剩",React.createElement("span",null,n),"次刮奖机会"),-1!=t.joined_show&&React.createElement("div",{className:"phone-personNum"},",共有",React.createElement("span",null,t.joined_show),"人参加活动")),React.createElement("div",{className:"scratchArea"},React.createElement("div",{className:"scratchFail",hidden:o},React.createElement("img",{src:"http://cdn.jisuapp.cn/static/webapp/images/scratchFail.png"}),React.createElement("div",{className:"failTitle"},React.createElement("button",{className:"failShare"},"分享"),React.createElement("div",{className:"failText"},"很遗憾没有中奖哦"),React.createElement("div",{className:"failBtn",onClick:this.failBtnClick},"再来一次"))),React.createElement("div",{className:"scratchWinning",hidden:s},React.createElement("img",{src:"http://cdn.jisuapp.cn/static/webapp/images/scratchPrize.png"}),React.createElement("div",{className:"winningTitle"},React.createElement("button",{className:"winningShare"},"分享"),React.createElement("div",{className:"winningText"},"恭喜你获得了"),React.createElement("div",{className:"winningText winningValue"},r),c?React.createElement("div",{className:"btnGroup"},React.createElement("div",{className:"winningBtn",onClick:this.toAddCard},"立即领取"),React.createElement("div",{className:"winningBtn",onClick:this.shadeClose,"data-type":"1"},"再来一次")):React.createElement("div",{className:"winningBtn",onClick:this.winningBtnClick},"再来一次"))),React.createElement("div",{className:"scratchDurMax",hidden:!l},React.createElement("img",{src:"http://cdn.jisuapp.cn/static/webapp/images/scratchLimit.png"}),React.createElement("div",{className:"durMaxTitle"},React.createElement("button",{className:"durMaxShare"},"分享"),React.createElement("div",{className:"durMaxText"},"对不起，您的刮奖次数不足，"),React.createElement("div",{className:"durMaxText"},"分享即可获取次数哦~"))),React.createElement("div",{className:"scratchLimit",hidden:!d},React.createElement("img",{src:"http://cdn.jisuapp.cn/static/webapp/images/scratchLimit.png"}),React.createElement("div",{className:"limitTitle"},React.createElement("button",{className:"limitShare"},"分享"),React.createElement("div",{className:"limitText"},"今日刮奖次数已达到上限，"),React.createElement("div",{className:"limitText"},"明日可继续参与刮奖哦~"))),React.createElement("div",{className:"scratchComfort",hidden:u},React.createElement("img",{src:"http://cdn.jisuapp.cn/static/webapp/images/scratchComfort.png"}),React.createElement("div",{className:"comfortTitle"},React.createElement("button",{className:"comfortShare"},"分享"),m?React.createElement("div",{className:"comfortText"},"已领取，在微信卡包中查看哦~"):React.createElement("div",(0,i.default)({className:"comfortText"},"className","comfortText"),"又没中奖，送你一个小礼品"),c?React.createElement("div",{className:"btnGroup"},React.createElement("div",{className:"comfortBtn",onClick:this.toAddCard},"立即领取"),React.createElement("div",{className:"comfortBtn",onClick:this.shadeClose,"data-type":"2"},"知道了")):React.createElement(React.Fragment,null,!m&&React.createElement("div",{className:"comfortText"},"在优惠券卡包进行查收哦~"),React.createElement("div",{className:"comfortBtn",onClick:this.comfortBtnClick},"知道了")))),React.createElement("div",{className:"scratchDegree",hidden:!p},React.createElement("img",{src:"http://cdn.jisuapp.cn/static/webapp/images/scratchLimit.png"}),React.createElement("div",{className:"degreeTitle"},React.createElement("div",{className:"degreeText"},"对不起，您的刮奖次数不足"))),React.createElement("div",{hidden:f,className:"scratch_wp",style:(0,g.convertLineStyleData)("width: "+(h&&h.width)+"px; height: "+(h&&h.height)+"px;")},React.createElement("div",{hidden:v},React.createElement("canvas",{className:"scratch-canvas",style:(0,g.convertLineStyleData)("width: "+(h&&h.width)+"px; height: "+(h&&h.height)+"px;"),onTouchStart:this.touchStart,onTouchMove:this.touchMove,onTouchEnd:this.touchEnd})),v&&React.createElement("div",{className:"showArea"},React.createElement("div",{className:"showTitle"},"赢取优惠大奖"),React.createElement("div",{className:"showBtn",onClick:this.startScratch},"点我刮奖")))),React.createElement("div",{className:"structurePrize"},React.createElement("div",{className:"scratch-lookPrize",onClick:this.lookPrize},"查看奖品"),React.createElement("div",{className:"scratch-exchangePrize",onClick:this.intelClick,style:(0,g.convertLineStyleData)("display:"+(0==t.integral_exchange?"none":"inline-block"))},"积分兑换")),React.createElement("div",{className:"scratchRoster"},React.createElement("div",{className:"rosterTitle"},React.createElement("div",{className:"rosterStar"})),React.createElement("div",{className:"rosterCon"},0===_.length?React.createElement("div",{className:"no-roster-list"},"暂无中奖名单"):React.createElement(React.Fragment,null,React.createElement("div",{className:"rosterList",animation:y},_.map(function(e,t){return React.createElement("div",{key:!0},e.nickname+" 抽中 "+e.prize_title)})),React.createElement("div",{className:"rosterList",animation:E},_.map(function(e,t){return React.createElement("div",{key:!0},e.nickname+" 抽中 "+e.prize_title)}))))),React.createElement("div",{className:"scratchExplain"},React.createElement("div",{className:"explainTitle"},React.createElement("div",{className:"explainStar"})),React.createElement("div",{className:"explainCon"},React.createElement("div",{className:"explainTimeDiv"},React.createElement("span",null,"活动时间："),React.createElement("span",{className:"explainTime"},t.start_time,"-",t.end_time)),React.createElement("div",{className:"explainRule"},React.createElement("span",null,t.description)),React.createElement("div",null,"获取刮奖次数："),t.user_times_initial>0&&React.createElement("div",{className:"explainDayTime"},React.createElement("label",{className:"scratchDisc"},"·"),"用户每日首次登录可获取",React.createElement("span",null,t.user_times_initial),"次刮奖机会"),React.createElement("div",{className:"explainLimit"},React.createElement("label",{className:"scratchDisc"},"·"),"每日抽奖机会最多为",React.createElement("span",{className:"explainValue"},"-1"==t.user_times?"无限":t.user_times),"次"),0!=t.integral_exchange&&React.createElement("div",{className:"explainIntegral"},React.createElement("label",{className:"scratchDisc"},"·"),"每",React.createElement("span",null,t.integral_exchange),"积分可兑换一次抽奖机会"),0!=t.time_share&&React.createElement("div",{className:"explainShare"},React.createElement("label",{className:"scratchDisc"},"·"),React.createElement("div",null,"每成功分享1个好友可增加",React.createElement("span",null,t.time_share),"次抽奖机会，最多可增加",React.createElement("span",null,t.time_share_limit),"次机会")),0!=t.consume_times&&React.createElement("div",{className:"explainMoney"},React.createElement("label",{className:"scratchDisc"},"·"),"消费即赠送一次刮奖机会。"))),1==N&&React.createElement("div",{className:"scratchPrize-sick",onClick:this.wrapPrize},React.createElement("div",{className:"scratchPrize-bg",onTouchMove:!0}),React.createElement("div",{className:"scratchPrize-wrap",onClick:this.stopPropagation},React.createElement("div",{className:"scratchPrize-header",onTouchMove:!0}),React.createElement("div",{className:"scratchPrize-con"},React.createElement("img",{className:"scratchImg",src:"http://cdn.jisuapp.cn/static/webapp/images/prize_con.png",hidden:""==b,onTouchMove:!0}),React.createElement("div",{className:"scratchPrize-title",onTouchMove:!0},React.createElement("div",{className:"scratchPrize-line"}),React.createElement("label",null,"中奖时间"),React.createElement("label",null,"获得奖品")),React.createElement("div",{className:"scratchprize-list",hidden:""==b},b.map(function(e,t){return React.createElement("div",{key:!0},React.createElement("label",null,e.add_time),React.createElement("label",null,e.prize_title))})),React.createElement("div",{className:"scratchPrize-fail",hidden:""!=b},React.createElement("img",{src:"http://cdn.jisuapp.cn/static/webapp/images/prize_fail.png"}),React.createElement("div",null,"暂未获得任何奖品哦~"))))),1==w&&React.createElement("div",{className:"scratchInte"},React.createElement("div",{className:"scratchInte-wrap"},React.createElement("div",{className:"scratchInte-con"},React.createElement("div",{className:"scratchInteCan"},"可兑换次数:",React.createElement("label",null,R.exchange_times),React.createElement("label",null,"次")),React.createElement("div",{className:"scratchInteLimit"},"兑换次数:",React.createElement("input",{type:"text",onInput:this.bindReplaceInput,value:k}),React.createElement("label",{className:"scratchInteAll",onClick:this.scratchInteAll},"全部兑换")),React.createElement("div",{className:"scratchInteRule"},"兑换规则:",React.createElement("label",null,R.integral_exchange),"分/次"),React.createElement("div",{className:"scratchInteBalance"},"积分余额:",React.createElement("label",null,R.can_use_integral),"分")),React.createElement("div",{className:"scratchInte-btns"},React.createElement("div",{className:"scratchInte-cancel",onClick:this.intelClose},"取消"),React.createElement("div",{className:"scratchInte-confirm",onClick:this.intelConfirm},"确定")))))))}}]),t}(v.default);t.default=_},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(0),i=n(o),s=a(3),r=n(s),c=a(1),l=n(c),d=a(2),u=n(d),m=a(5),p=a(6),f=a(7),g=n(f);a(495);var h=function(e){function t(e){(0,i.default)(this,t);var a=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={orderData:{},orderInfo:{},hiddenmodalput:!0,untimes:"",numberOfStampsUrl:"",addLabelText:"",status_name:{},goodsAdditionalInfo:{},hasAdditionalInfo:!1,customFields:[],orderId:"",isFromTemplateMsg:!1,originalPrice:"",useBalance:"",freightAdress:{},express_fee:"",discount_cut_price:"",isFromBack:!1,showWriteOffCodeBox:!1,showEventDialog:!1,eventType:"",detailShow:!0,cerificationShow:!1,verifyShow:!1,verifyData:{success:!1,qrcodeUrl:""}},a.verifiTimeInterval="",a.dataInitial=function(){a.getOrderDetail(a.data.orderId),a.setData({appName:m.appMethod.globalData.appTitle,appLogo:m.appMethod.globalData.appLogo})},a.getVerificationInfo=function(){a.setData({detailShow:!1,cerificationShow:!0})},a.getOrderDetail=function(e){var t=a;m.appMethod.getOrderDetail({data:{order_id:e,sub_shop_app_id:a.data.franchiseeId},success:function(e){var a=e.data[0],n=a.form_data,o=!1,i=[],s=[];if(n.additional_info)for(var r=0;r<n.goods_info.length;r++){var c=n.goods_info[r].delivery_id,l=n.goods_info[r].goods_id;c&&"0"!=c&&-1==s.indexOf(l)&&(i.push(n.goods_info[r]),s.push(l),o=!0)}var d=n.remark,u=void 0;switch(n.remark=d?d.replace(/\n|\\n/g,"\n"):d,n.status){case"0":u="未付款";break;case"1":u="已付款";break;case"7":u="已关闭"}t.setData({orderData:a,orderInfo:n,hasAdditionalInfo:o,discount_cut_price:n.discount_cut_price,useBalance:n.use_balance,express_fee:e.data[0].express_fee,status_name:u}),m.appMethod.setPreviewGoodsInfo(i),m.appMethod.setGoodsAdditionalInfo(n.additional_info||{})}})},a.goToHomepage=function(){var e=m.appMethod.getHomepageRouter();m.appMethod.turnToPage("/pages/"+e+"/"+e,!0)},a.copyOrderId=function(){var e=a;Taro.setClipboardData({data:e.data.orderId,success:function(e){m.appMethod.showToast({title:"复制成功",icon:"success"})}})},a.addLabelInput=function(e){a.setData({addLabelText:e.detail.value})},a.confirm=function(){if(+a.data.orderInfo.un_verify_times<+a.data.addLabelText)return m.appMethod.showModal({content:"核销次数超过剩余次数"}),void a.setData({hiddenmodalput:!0,addLabelText:""});var e=a.data.numberOfStampsUrl+"&Number="+a.data.addLabelText;a.setData({hiddenmodalput:!0,addLabelText:""}),m.appMethod.turnToPage(e,!1)},a.cancel=function(){a.setData({hiddenmodalput:!0,addLabelText:""})},a.getWriteOffCodeBox=function(){var e=a.data.orderInfo.user_coupon_id,t=a.data.franchiseeId?a.data.franchiseeId:m.appMethod.globalData.appId,n="/exchangeCoupon/pages/numberOfStampsUsed/numberOfStampsUsed?detail="+e+"&franchisee="+t;a.setData({numberOfStampsUrl:n,hiddenmodalput:!1})},a.hideCouponVerify=function(){a.setData({detailShow:!0,verifyShow:!1,cerificationShow:!1}),clearInterval(a.timeInterval),a.socketOpen&&Taro.closeSocket()},a.timeInterval="",a.socketOpen=!1,a.connectSocket=function(){var e=a;Taro.connectSocket({url:"wss://ceshi.zhichiwangluo.com",header:{"content-type":"application/json"},method:"GET"}),Taro.onSocketOpen(function(t){e.socketOpen=!0;var a={action:"mark_client",user_token:m.appMethod.globalData.userInfo.user_token,scenario_name:"app_coupon_verify",session_key:m.appMethod.globalData.sessionKey};Taro.sendSocketMessage({data:JSON.stringify(a)}),e.timeInterval=setInterval(function(){var e={action:"heartbeat",user_token:m.appMethod.globalData.userInfo.user_token,scenario_name:"app_coupon_verify",session_key:m.appMethod.globalData.sessionKey};Taro.sendSocketMessage({data:JSON.stringify(e)})},3e4)}),Taro.onSocketMessage(function(t){var a=JSON.parse(t.data);if("push_to_client"==a.action){var n=JSON.parse(a.msg);"app_coupon_verify"==n.type&&0==n.status&&(e.setData({"verifyData.success":!0}),clearInterval(e.timeInterval),Taro.closeSocket())}}),Taro.onSocketClose(function(t){e.socketOpen=!1,clearInterval(e.timeInterval),console.log("WebSocket 已关闭！")}),Taro.onSocketError(function(t){e.socketOpen=!1,console.log("WebSocket连接打开错误，请检查！")})},document.title="订单详情",a}return(0,u.default)(t,e),(0,r.default)(t,[{key:"componentWillMount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,p.getCurrentPageQueryParams)();this.setData({orderId:e.detail,isFromTemplateMsg:"template_msg"===e.from,franchiseeId:e.franchisee||""}),this.dataInitial()}},{key:"componentDidMount",value:function(){this.data.isFromBack?this.data.orderInfo.order_id&&this.getOrderDetail(this.data.orderInfo.order_id):this.setData({isFromBack:!0})}},{key:"component",value:function(){var e=this;clearInterval(e.timeInterval),e.socketOpen&&Taro.closeSocket()}},{key:"privateStopNoop",value:function(e){e.stopPropagation()}},{key:"render",value:function(){var e=this.state,t=(e.showGetUserInfo,e.detailShow),a=e.isFromTemplateMsg,n=e.status_name,o=e.orderInfo,i=e.appLogo,s=(e.hiddenmodalput,e.addLabelText,e.labelFocus,e.cerificationShow);return React.createElement("div",{className:"official-page number-of-stamps-order-detail"},React.createElement(React.Fragment,null,React.createElement("div",{className:"order-contain "+(t?"show":"")},a&&React.createElement("div",{className:"orderDetail-goto-homepage",onClick:this.goToHomepage},"返回首页"),React.createElement("div",{className:"seller-shipped"},React.createElement("div",null,"订单状态："+n)),React.createElement(React.Fragment,null,React.createElement("div",{className:"app-box"},React.createElement("div",null,React.createElement("span",{className:"app-name"},"下单时间"),React.createElement("div",{className:"contact-service pull-right"},React.createElement("span",null,o.add_time)))),React.createElement(React.Fragment,null,React.createElement("div",{className:"goods-detail-box"},React.createElement("img",{src:i}),React.createElement("div",null,o.goods_info&&o.goods_info.goods_name&&React.createElement("div",{className:"goods-rules",style:(0,p.convertLineStyleData)("color: #333;font-size:26rpx")},o.goods_info.goods_name),React.createElement("div",{className:"goods-rules"},"使用时间"+(o.goods_info&&o.goods_info.expire)),React.createElement("div",{className:"goods-price"},o.goods_info&&0!=o.goods_info.price&&"0.00"!=o.goods_info.price&&React.createElement("span",{className:"color333"},"¥"+o.goods_info.price),o.goods_info&&0!=o.goods_info.price&&"0.00"!=o.goods_info.price&&o.goods_info.integral&&React.createElement("span",{className:"color333"},"+"),o.goods_info&&o.goods_info.integral&&React.createElement("span",{className:"color333"},o.goods_info.integral+"积分"),React.createElement("span",{className:"pull-right"},"x 1")))))),React.createElement("div",{className:"actual-payment"},React.createElement("div",null,React.createElement("span",null,"实际付款"),React.createElement("span",{className:"pull-right colorff7"},"¥"+o.total_price))),0!=o.status&&6==o.coupon_type&&React.createElement("div",{className:"order-used"},React.createElement("div",{className:"order-used-title",onClick:this.getVerificationInfo},React.createElement("span",null,"核销情况"),React.createElement("div",{className:"ico-moon icon-rightarrow"})),React.createElement("div",{className:"order-used-line order-used-bottom"},React.createElement("div",null,"已核销"),React.createElement("div",{className:"colorff7"},o.verified_times+"次")),React.createElement("div",{className:"order-used-line"},React.createElement("div",null,"未核销"),React.createElement("div",{className:"colorff7"},o.un_verify_times+"次"))),React.createElement("div",{className:"order-number"},React.createElement("div",null,React.createElement("span",null,"订单编号"),React.createElement("span",null,o.order_id),React.createElement("span",{className:"pull-right",onClick:this.copyOrderId},"复制"))),6==o.coupon_type&&1==o.can_verify&&0!=o.status&&0!=o.un_verify_times&&React.createElement("div",{className:"order-bottom"},React.createElement("span",{className:"btn",onClick:this.getWriteOffCodeBox},"核销码"))),React.createElement("div",{className:"coupon-cerification-info "+(s?"show":"")},o.verify_log&&o.verify_log.length>0&&React.createElement("div",{className:"ceification-info-title"},React.createElement("span",{className:"ceification-info-left"},"核销次数"),React.createElement("span",null,"核销时间")),o.verify_log&&o.verify_log.length>0&&React.createElement("div",{style:(0,p.convertLineStyleData)("min-height:300rpx;background: #fff;")},o.verify_log.map(function(e,t){return React.createElement("div",{className:"ceification-info-line",key:"key"},React.createElement("span",{className:"ceification-info-left"},e.consume_times),React.createElement("span",null,e.add_time))})),o.verify_log&&0==o.verify_log.length&&React.createElement("div",{className:"coupon-cerification-nodata"},"- 暂无数据 -"),React.createElement("div",{style:(0,p.convertLineStyleData)("text-align:center")},React.createElement("div",{className:"ceification-info-back",onClick:this.hideCouponVerify},"返回")))))}}]),t}(g.default);t.default=h},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(44),i=n(o),s=a(0),r=n(s),c=a(3),l=n(c),d=a(1),u=n(d),m=a(2),p=n(m);a(45);var f=a(5),g=a(6),h=a(7),v=n(h);a(497);var _=function(e){function t(e){(0,r.default)(this,t);var a=(0,u.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={verifyData:{success:!1,qrcodeUrl:""},useNumber:1,couponDetail:{}},a.getWriteOffCodeBox=function(){var e=f.appMethod.globalData.siteBaseUrl+"/index.php?r=AppShop/couponQrcode&app_id="+(a.data.franchiseeId?a.data.franchiseeId:f.appMethod.globalData.appId)+"&user_coupon_id="+a.data.couponDetail.id+"&consume_times="+a.data.useNumber;a.setData({"verifyData.qrcodeUrl":e}),a.connectSocket()},a.hideCouponVerify=function(){clearInterval(a.timeInterval),a.socketOpen&&f.appMethod.closeSocket(),f.appMethod.turnBack()},a.timeInterval="",a.socketOpen=!1,a.connectSocket=function(){var e=a;f.appMethod.connectSocket({url:"wss://xcx.zhichiwangluo.com",header:{"content-type":"application/json"},method:"GET"}),f.appMethod.onSocketOpen(function(t){e.socketOpen=!0,console.log("打开WebSocket");var a={action:"mark_client",user_token:f.appMethod.globalData.userInfo.user_token,scenario_name:"app_coupon_verify",session_key:f.appMethod.globalData.sessionKey};f.appMethod.sendSocketMessage({data:JSON.stringify(a)}),e.timeInterval=setInterval(function(){console.log("打开轮询");var e={action:"heartbeat",user_token:f.appMethod.globalData.userInfo.user_token,scenario_name:"app_coupon_verify",session_key:f.appMethod.globalData.sessionKey};f.appMethod.sendSocketMessage({data:JSON.stringify(e)})},3e4)}),f.appMethod.onSocketMessage(function(t){var a=JSON.parse(t.data);if("push_to_client"==a.action){var n=JSON.parse(a.msg);console.log(n),"app_coupon_verify"==n.type&&0==n.status&&(e.setData({"verifyData.success":!0}),clearInterval(e.timeInterval),f.appMethod.closeSocket())}}),f.appMethod.onSocketClose(function(t){e.socketOpen=!1,clearInterval(e.timeInterval),console.log("WebSocket 已关闭！")}),f.appMethod.onSocketError(function(t){e.socketOpen=!1,console.log("WebSocket连接打开错误，请检查！")})},document.title="核销码",a}return(0,p.default)(t,e),(0,l.default)(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillMount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,g.getCurrentPageQueryParams)(),t=this,a=e.detail||"",n=e.franchisee||"",o=e.Number||1;f.appMethod.sendRequest({url:"/index.php?r=AppShop/getUserListCouponInfo",data:{sub_app_id:n,user_coupon_id:a},hideLoading:!0,success:function(e){t.setData({couponDetail:e.data[0],useNumber:o}),t.getWriteOffCodeBox()}})}},{key:"componentWillUnmount",value:function(){var e=this;clearInterval(e.timeInterval),e.socketOpen&&f.appMethod.closeSocket()}},{key:"render",value:function(){var e=this.state,t=(e.showGetUserInfo,e.verifyData),a=e.couponDetail;return React.createElement(React.Fragment,null,React.createElement("div",{className:"official-page number-of-stamps-used"},React.createElement("div",{className:"coupon-verify-wrap show"},React.createElement("div",{className:"bottom-section"},t.success?t.success&&React.createElement("div",{className:"success-block"},React.createElement("div",{className:"success-tip"},React.createElement(i.default,{className:"success-tip-icon",type:"success",size:"xxs"}),React.createElement("span",{className:"success-tip-text"},"核销成功!")),React.createElement("div",{className:"back-tip",onClick:this.hideCouponVerify},">>>返回")):React.createElement("div",{className:"verify-block"},React.createElement("div",{className:"qrcode"},React.createElement("img",{src:t.qrcodeUrl})),React.createElement("div",{className:"code"},React.createElement("div",{style:(0,g.convertLineStyleData)("color: #FF7100")},"核销码"),React.createElement("div",null,a.verify_code)))))))}}]),t}(v.default);t.default=_},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(44),i=n(o),s=a(158),r=n(s),c=a(0),l=n(c),d=a(3),u=n(d),m=a(1),p=n(m),f=a(2),g=n(f);a(45);var h=a(5),v=a(6),_=a(7),y=n(_);a(505);var E=function(e){function t(e){(0,l.default)(this,t);var a=(0,p.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={couponId:"",couponDetail:{},receiveSuccess:0,receiveCount:0,receiveLimitNum:0,rechargeSuccess:0,verifySuccess:!1,verifyQrcodeUrl:"",verifyShow:!1,style:"",verifyData:{success:!1,qrcodeUrl:""}},a.cutStyle=function(e){return"string"!=typeof e?e:e.split(";").reduce(function(e,t){var a=t.split(":"),n=(0,r.default)(a,2),o=n[0],i=n[1];return i=i&&i.trim()||"",i&&(e[o]=i),e},{})},a.setCouponData=function(e){var t=a,n="",o=void 0,i="";0==e.type?(n="满"+e.condition+"，减"+e.value+"元",o="满减券"):1==e.type?(n="打"+e.value+"折",o="打折券"):2==e.type?(n="可抵扣"+e.value+"元",o="代金券"):3==e.type?(""==e.extra_condition?n="直接兑换"+e.coupon_goods_info.title:e.extra_condition.price?n="消费满"+e.extra_condition.price+"元可兑换"+e.coupon_goods_info.title:e.extra_condition.goods_id&&(n="购买"+e.condition_goods_info.title+"可兑换"+e.coupon_goods_info.title),o="兑换券"):4==e.type?(n="储值金可充值"+e.value+"元",o="储值券"):5==e.type?(n=e.extra_condition,o="通用券"):6==e.type&&(n="可使用"+parseInt(e.value)+"次",o="次数券");var s=e;e.user_condition_list&&e.user_condition_list.length>0?e.user_condition_list.forEach(function(t,a){a==e.user_condition_list.length-1?i+=t:i=i+t+","}):("0"==e.user_condition&&(i="所有用户"),"1"==e.user_condition&&(i="所有会员")),s.useCondition=n,s.stampsType=o,s.stampsUser=i,t.setData({couponDetail:s})},a.formSubmit=function(e){var t=a,n=t.data.couponDetail;return 0==n.recv_status?void h.appMethod.showModal({content:"超过可兑换次数"}):0!==n.exchange_condition.price?void h.appMethod.turnToPage("/exchangeCoupon/pages/exchangeCouponDetailOrder/exchangeCouponDetailOrder?id="+n.id):void h.appMethod.showModal({title:"是否确认兑换？",content:"注：兑换成功后不支持退换",showCancel:!0,cancelText:"否",confirmText:"是",confirm:function(){h.appMethod.sendRequest({url:"/index.php?r=appCoupon/addCouponOrder",data:{app_id:h.appMethod.globalData.appId,id:n.id},hideLoading:!0,success:function(e){if(0===e.status){if(n.limit_num>=n.user_recv_num+1){var a=n;a.user_recv_num++,t.setData({receiveSuccess:1,couponDetail:a})}else{var o=n;o.recv_status=0,t.setData({receiveSuccess:1,couponDetail:o})}setTimeout(function(){t.hideReceiveToast()},3e3)}},complete:function(e){}})}})},a.hideReceiveToast=function(){a.setData({receiveSuccess:0})},a.hideRechargeToast=function(){a.setData({rechargeSuccess:0})},a.timeInterval="",a.socketOpen=!1,a.connectSocket=function(){var e=a;h.appMethod.connectSocket({url:"wss://ceshi.zhichiwangluo.com",header:{"content-type":"application/json"},method:"GET"}),h.appMethod.onSocketOpen(function(t){e.socketOpen=!0;var a={action:"mark_client",user_token:h.appMethod.globalData.userInfo.user_token,scenario_name:"app_coupon_verify",session_key:h.appMethod.globalData.sessionKey};h.appMethod.sendSocketMessage({data:JSON.stringify(a)}),e.timeInterval=setInterval(function(){var e={action:"heartbeat",user_token:h.appMethod.globalData.userInfo.user_token,scenario_name:"app_coupon_verify",session_key:h.appMethod.globalData.sessionKey};h.appMethod.sendSocketMessage({data:JSON.stringify(e)})},3e4)}),h.appMethod.onSocketMessage(function(t){var a=JSON.parse(t.data);if("push_to_client"==a.action){var n=JSON.parse(a.msg);"app_coupon_verify"==n.type&&0==n.status&&(e.setData({"verifyData.success":!0,"couponDetail.status":2}),clearInterval(e.timeInterval),h.appMethod.closeSocket())}}),h.appMethod.onSocketClose(function(t){e.socketOpen=!1,clearInterval(e.timeInterval),console.log("WebSocket 已关闭！")}),h.appMethod.onSocketError(function(t){e.socketOpen=!1,console.log("WebSocket连接打开错误，请检查！")})},document.title="兑换券详情",a}return(0,g.default)(t,e),(0,u.default)(t,[{key:"componentWillMount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,v.getCurrentPageQueryParams)(),t=this,a=h.appMethod.globalData.exchangeCouponStyle,n={};if(a){var o=this.cutStyle(a.style);n.strStyle=o,n.lineBackgroundColor=a.customFeature.lineBackgroundColor,n.secColor=a.customFeature.secColor}var i=e.id;t.setData({couponId:i,style:n}),h.appMethod.sendRequest({url:"/index.php?r=AppShop/GetCouponInfo",data:{app_id:h.appMethod.globalData.appId,coupon_id:i},hideLoading:!0,success:function(e){t.setCouponData(e.data)}})}},{key:"componentWillUnmount",value:function(){var e=this;clearInterval(e.timeInterval),e.socketOpen&&h.appMethod.closeSocket()}},{key:"render",value:function(){var e=this.state,t=(e.showGetUserInfo,e.couponDetail),a=e.style,n=e.receiveSuccess;return React.createElement(React.Fragment,null,React.createElement("div",{className:"official-page exchange-coupon-detail"},React.createElement("div",{className:"page",id:"couponDetail",style:(0,v.convertLineStyleData)("background: "+t.background)},React.createElement("div",{className:"exchange-coupon-wrap show"},React.createElement("div",{className:"exchange-coupon-bg"},React.createElement("div",{className:"ticket certificate-ticket",onClick:this.gotoCouponDetail,style:(0,v.convertLineStyleData)("background-color: "+a.lineBackgroundColor)},React.createElement("div",{className:"top-section",style:(0,v.convertLineStyleData)("border-color:"+a.secColor)}),0==t.type?React.createElement(React.Fragment,null,React.createElement("div",{className:"detail-info"},React.createElement("div",{className:"name"},t.title),React.createElement("div",{className:"use-condition",style:(0,v.convertLineStyleData)("color:"+a.strStyle.color+";font-size:"+a.strStyle["font-size"])},t.exchange_condition.price>0&&React.createElement("span",null,"¥"+t.exchange_condition.price),t.exchange_condition.price>0&&t.exchange_condition.integral>0&&React.createElement("span",null,"+"),t.exchange_condition.integral>0&&React.createElement("span",null,t.exchange_condition.integral+"积分"))),React.createElement("div",{className:"background-word-area",style:(0,v.convertLineStyleData)("border-color:"+a.secColor)},React.createElement("div",{className:"background-circle",style:(0,v.convertLineStyleData)("background-color:"+a.secColor)}),React.createElement("div",{className:"background-word"},"减"))):1==t.type?React.createElement(React.Fragment,null,React.createElement("div",{className:"detail-info"},React.createElement("div",{className:"name"},t.title),React.createElement("div",{className:"use-condition",style:(0,v.convertLineStyleData)("color:"+a.strStyle.color+";font-size:"+a.strStyle["font-size"])},t.exchange_condition.price>0&&React.createElement("span",null,"¥"+t.exchange_condition.price),t.exchange_condition.price>0&&t.exchange_condition.integral>0&&React.createElement("span",null,"+"),t.exchange_condition.integral>0&&React.createElement("span",null,t.exchange_condition.integral+"积分"))),React.createElement("div",{className:"background-word-area",style:(0,v.convertLineStyleData)("border-color:"+a.secColor)},React.createElement("div",{className:"background-circle",style:(0,v.convertLineStyleData)("background-color:"+a.secColor)}),React.createElement("div",{className:"background-word"},"折"))):2==t.type?React.createElement(React.Fragment,null,React.createElement("div",{className:"detail-info"},React.createElement("div",{className:"name"},t.title),React.createElement("div",{className:"use-condition",style:(0,v.convertLineStyleData)("color:"+a.strStyle.color+";font-size:"+a.strStyle["font-size"])},t.exchange_condition.price>0&&React.createElement("span",null,"¥"+t.exchange_condition.price),t.exchange_condition.price>0&&t.exchange_condition.integral>0&&React.createElement("span",null,"+"),t.exchange_condition.integral>0&&React.createElement("span",null,t.exchange_condition.integral+"积分"))),React.createElement("div",{className:"background-word-area",style:(0,v.convertLineStyleData)("border-color:"+a.secColor)},React.createElement("div",{className:"background-circle",style:(0,v.convertLineStyleData)("background-color:"+a.secColor)}),React.createElement("div",{className:"background-word"},"代"))):3==t.type?React.createElement(React.Fragment,null,React.createElement("div",{className:"detail-info"},React.createElement("div",{className:"name"},t.title),React.createElement("div",{className:"use-condition",style:(0,v.convertLineStyleData)("color:"+a.strStyle.color+";font-size:"+a.strStyle["font-size"])},t.exchange_condition.price>0&&React.createElement("span",null,"¥"+t.exchange_condition.price),t.exchange_condition.price>0&&t.exchange_condition.integral>0&&React.createElement("span",null,"+"),t.exchange_condition.integral>0&&React.createElement("span",null,t.exchange_condition.integral+"积分"))),React.createElement("div",{className:"background-word-area",style:(0,v.convertLineStyleData)("border-color:"+a.secColor)},React.createElement("div",{className:"background-circle",style:(0,v.convertLineStyleData)("background-color:"+a.secColor)}),React.createElement("div",{className:"background-word"},"兑"))):4==t.type?React.createElement(React.Fragment,null,React.createElement("div",{className:"detail-info"},React.createElement("div",{className:"name"},t.title),React.createElement("div",{className:"use-condition",style:(0,v.convertLineStyleData)("color:"+a.strStyle.color+";font-size:"+a.strStyle["font-size"])},t.exchange_condition.price>0&&React.createElement("span",null,"¥"+t.exchange_condition.price),t.exchange_condition.price>0&&t.exchange_condition.integral>0&&React.createElement("span",null,"+"),t.exchange_condition.integral>0&&React.createElement("span",null,t.exchange_condition.integral+"积分"))),React.createElement("div",{className:"background-word-area",style:(0,v.convertLineStyleData)("border-color:"+a.secColor)},React.createElement("div",{className:"background-circle",style:(0,v.convertLineStyleData)("background-color:"+a.secColor)}),React.createElement("div",{className:"background-word"},"储"))):5==t.type?React.createElement(React.Fragment,null,React.createElement("div",{className:"detail-info"},React.createElement("div",{className:"name"},t.title),React.createElement("div",{className:"use-condition",style:(0,v.convertLineStyleData)("color:"+a.strStyle.color+";font-size:"+a.strStyle["font-size"])},t.exchange_condition.price>0&&React.createElement("span",null,"¥"+t.exchange_condition.price),t.exchange_condition.price>0&&t.exchange_condition.integral>0&&React.createElement("span",null,"+"),t.exchange_condition.integral>0&&React.createElement("span",null,t.exchange_condition.integral+"积分"))),React.createElement("div",{className:"background-word-area",style:(0,v.convertLineStyleData)("border-color:"+a.secColor)},React.createElement("div",{className:"background-circle",style:(0,v.convertLineStyleData)("background-color:"+a.secColor)}),React.createElement("div",{className:"background-word"},"通"))):6==t.type&&React.createElement(React.Fragment,null,React.createElement("div",{className:"detail-info"},React.createElement("div",{className:"name"},t.title),React.createElement("div",{className:"use-condition",style:(0,v.convertLineStyleData)("color:"+a.strStyle.color+";font-size:"+a.strStyle["font-size"])},t.exchange_condition.price>0&&React.createElement("span",null,"¥"+t.exchange_condition.price),t.exchange_condition.price>0&&t.exchange_condition.integral>0&&React.createElement("span",null,"+"),t.exchange_condition.integral>0&&React.createElement("span",null,t.exchange_condition.integral+"积分"))),React.createElement("div",{className:"background-word-area",style:(0,v.convertLineStyleData)("border-color:"+a.secColor)},React.createElement("div",{className:"background-circle",style:(0,v.convertLineStyleData)("background-color:"+a.secColor)}),React.createElement("div",{className:"background-word"},"次"))),React.createElement("div",{className:"bottom-section",style:(0,v.convertLineStyleData)("background-color: "+a.lineBackgroundColor)},React.createElement("div",null,"有效期 "+("-1"==t.expire?t.start_use_date+"至"+t.end_use_date:"0"==t.expire?"领取当天生效,有效期1天":"领取"+(t.react>0?t.react+"天后":"当天")+"生效，有效期"+t.expire+"天")+" "+(0==t.exclude_holiday?"":"除去法定节假日")+" "+(0==t.exclude_weekend?"":"周一至周五")+" "+t.start_use_time+"-"+t.end_use_time))),React.createElement("div",{className:"function-btn-wrap"},React.createElement("form",null,0!=t.stock&&0==t.user_recv_num?React.createElement("button",{className:"function-btn",type:"button",onClick:this.formSubmit,"data-coupon-id":t.id,style:(0,v.convertLineStyleData)("background-color:"+a.secColor)},"立即兑换"):0==t.stock?React.createElement("button",{className:"function-btn disabled"},"已抢完"):0!=t.stock&&0!==t.user_recv_num&&React.createElement("button",{className:"function-btn",type:"button",onClick:this.formSubmit,"data-coupon-id":t.id,style:(0,v.convertLineStyleData)("background-color:"+a.secColor)},"再次兑换")))),React.createElement("div",{className:"middle-section"},React.createElement("div",{className:"detail-item condition"},React.createElement("div",{className:"item-name"},"优惠券类型："),React.createElement("div",{className:"item-content"},t.stampsType)),React.createElement("div",{className:"detail-item condition"},React.createElement("div",{className:"item-name"},"优惠券名称："),React.createElement("div",{className:"item-content"},t.title)),React.createElement("div",{className:"detail-item condition"},React.createElement("div",{className:"item-name"},"可领取用户："),React.createElement("div",{className:"item-content"},t.stampsUser)),React.createElement("div",{className:"detail-item time"},React.createElement("div",{className:"item-name"},"可用时间："),React.createElement("div",{className:"item-content",style:(0,v.convertLineStyleData)("position:relative;top:-5rpx")},React.createElement("div",{className:"date-duration"},"-1"==t.expire?t.start_use_date+"至"+t.end_use_date:"0"==t.expire?"领取当天生效,有效期1天":"领取"+(t.react>0?t.react+"天后":"当天")+"生效，有效期"+t.expire+"天"),React.createElement("div",{className:"other-case"},(1==t.exclude_holiday?"除法定节假日":"")+" "+(1==t.exclude_weekend?"周一至周五":"")),React.createElement("div",{className:"time-duration"},t.start_use_time+"-"+t.end_use_time))),6==t.type&&React.createElement("div",{className:"detail-item condition"},React.createElement("div",{className:"item-name"},"可兑换次数："),React.createElement("div",{className:"item-content"},t.useCondition)),6!=t.type&&React.createElement("div",{className:"detail-item condition"},React.createElement("div",{className:"item-name"},"优惠方式："),React.createElement("div",{className:"item-content"},t.useCondition)))),React.createElement("div",{className:"zc-toast-bg "+(1==n?"show":""),onClick:this.hideReceiveToast},React.createElement("div",{className:"zc-toast receive-success"},React.createElement(i.default,{className:"icon",type:"success",size:"xss"}),React.createElement("div",{className:"title"},"兑换成功!"))))))}}]),t}(y.default);t.default=E},function(e,t,a){e.exports={default:a(500),__esModule:!0}},function(e,t,a){a(88),a(65),e.exports=a(501)},function(e,t,a){var n=a(148),o=a(29)("iterator"),i=a(55);e.exports=a(20).isIterable=function(e){var t=Object(e);return void 0!==t[o]||"@@iterator"in t||i.hasOwnProperty(n(t))}},function(e,t,a){e.exports={default:a(503),__esModule:!0}},function(e,t,a){a(88),a(65),e.exports=a(504)},function(e,t,a){var n=a(47),o=a(147);e.exports=a(20).getIterator=function(e){var t=o(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return n(t.call(e))}},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(31),i=n(o),s=a(158),r=n(s),c=a(9),l=n(c),d=a(0),u=n(d),m=a(3),p=n(m),f=a(1),g=n(f),h=a(2),v=n(h);a(32);var _=a(5),y=a(6),E=a(58),b=a(7),N=n(b);a(507);var R=function(e){function t(e){var a;(0,u.default)(this,t);var n=(0,g.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state=(a={useBalance:!0,balance:"",couponId:"",couponDetail:"",payInfo:"",discountList:[],isFromSelectAddress:!1,franchisee_id:"",cart_id_arr:[],cart_data_arr:[]},(0,l.default)(a,"balance",""),(0,l.default)(a,"requesting",!1),(0,l.default)(a,"additional_info",{}),(0,l.default)(a,"is_group",""),(0,l.default)(a,"inputTimer",""),(0,l.default)(a,"style",""),(0,l.default)(a,"exchangeCouponData",{dialogHidden:!0,goodsInfo:{},selectModelInfo:{},hasSelectGoods:!1,voucher_coupon_goods_info:{}}),a),n.hasRequiredSuppInfo=!1,n.memberDiscountRef=React.createRef(),n.cutStyle=function(e){return"string"!=typeof e?e:e.split(";").reduce(function(e,t){var a=t.split(":"),n=(0,r.default)(a,2),o=n[0],i=n[1];return i=i&&i.trim()||"",i&&(e[o]=i),e},{})},n.getExchangeCouponInfo=function(){var e=n;_.appMethod.sendRequest({url:"/index.php?r=AppShop/GetCouponInfo",data:{app_id:_.appMethod.globalData.appId,coupon_id:e.data.couponId},hideLoading:!0,success:function(t){e.setCouponData(t.data)}})},n.setCouponData=function(e){var t=n,a="";0==e.type?a="满"+e.condition+"，减"+e.value+"元":1==e.type?a="打"+e.value+"折":2==e.type?a="可抵扣"+e.value+"元":3==e.type?""==e.extra_condition?a="直接兑换"+e.coupon_goods_info.title:e.extra_condition.price?a="消费满"+e.extra_condition.price+"元可兑换"+e.coupon_goods_info.title:e.extra_condition.goods_id&&(a="购买"+e.condition_goods_info.title+"可兑换"+e.coupon_goods_info.title):4==e.type?a="储值金可充值"+e.value+"元":5==e.type&&(a=e.extra_condition);var o=e;o.useCondition=a,t.setData({couponDetail:o})},n.useBalanceChange=function(e){n.setData({useBalance:e}),n.changePayInfo()},n.changePayInfo=function(){var e=n;_.appMethod.sendRequest({url:"/index.php?r=appCoupon/calculateCouponPrice",data:{app_id:_.appMethod.globalData.appId,id:e.data.couponId,select_benefit:e.data.selectDiscountInfo.no_use_benefit?"no_use_benefit":"",no_use_balance:e.data.useBalance?0:1,"select_benefit[discount_type]":e.data.selectDiscountInfo.discount_type,"select_benefit[vip_id]":e.data.selectDiscountInfo.vip_id,"select_benefit[coupon_id]":e.data.selectDiscountInfo.coupon_id,"select_benefit[discount_title]":e.data.selectDiscountInfo.discount_title},hideLoading:!0,method:"post",success:function(t){var a=t.data;e.setData({payInfo:a,balance:a.balance})}})},n.getPayInfo=function(){var e=n;_.appMethod.sendRequest({url:"/index.php?r=appCoupon/calculateCouponPrice",data:{app_id:_.appMethod.globalData.appId,id:e.data.couponId},hideLoading:!0,method:"post",success:function(t){var a=t.data,n=t.data,o=n.benefit,i=[],s={};n.selected_benefit&&(s={discount_title:n.selected_benefit.discount_title,discount_type:n.selected_benefit.discount_type,coupon_id:n.selected_benefit.coupon_id,vip_id:n.selected_benefit.vip_id}),o.coupon_benefit&&o.coupon_benefit.length&&i.push({label:"coupon",value:o.coupon_benefit}),o.all_vip_benefit&&o.all_vip_benefit.length&&i.push({label:"vip",value:o.all_vip_benefit}),e.setData({balance:a.balance,payInfo:a,discountList:i,selectDiscountInfo:s})},complete:function(e){0!==e.status&&(_.appMethod.showModal({content:e.data}),setTimeout(function(){_.appMethod.turnBack()},1e3))}})},n.confirmPayment=function(e){var t=(n.data.goodsList,n),a=t.data.useBalance?0:1,o=n.data.selectDiscountInfo.discount_type?"":"no_use_benefit";if(!n.requesting){var i=void 0;n.requesting=!0,i=""==o?{app_id:_.appMethod.globalData.appId,id:t.data.couponId,"select_benefit[discount_type]":t.data.selectDiscountInfo.discount_type,"select_benefit[vip_id]":t.data.selectDiscountInfo.vip_id,"select_benefit[coupon_id]":t.data.selectDiscountInfo.coupon_id,"select_benefit[discount_title]":t.data.selectDiscountInfo.discount_title,no_use_balance:a}:{app_id:_.appMethod.globalData.appId,id:t.data.couponId,select_benefit:o,"select_benefit[discount_type]":t.data.selectDiscountInfo.discount_type,"select_benefit[vip_id]":t.data.selectDiscountInfo.vip_id,"select_benefit[coupon_id]":t.data.selectDiscountInfo.coupon_id,"select_benefit[discount_title]":t.data.selectDiscountInfo.discount_title,no_use_balance:a},_.appMethod.sendRequest({url:"/index.php?r=appCoupon/addCouponOrder",method:"post",data:i,success:function(e){t.payOrder(e.data)},fail:function(){t.requesting=!1},successStatusAbnormal:function(){t.requesting=!1}})}},n.cancelOrder=function(e){var t=_.appMethod.getAppId();_.appMethod.sendRequest({url:"/index.php?r=AppShop/cancelOrder",data:{order_id:e,app_id:t,sub_shop_app_id:t},success:function(e){}})},n.payOrder=function(e){function t(){_.appMethod.showModal({content:"兑换成功！"}),setTimeout(function(){_.appMethod.turnBack()},1e3)}function a(){_.appMethod.showModal({content:"兑换失败！"}),this.cancelOrder(e),setTimeout(function(){_.appMethod.turnBack()},1e3)}var o=n;if(0==e.total_price)return _.appMethod.showModal({content:"兑换成功！"}),void setTimeout(function(){_.appMethod.turnBack()},1e3);_.appMethod.sendRequest({url:"/index.php?r=AppShop/GetWxWebappPaymentCode",data:{order_id:e.order_id},success:function(n){var i=n.data;i.orderId=e.order_id,i.success=t,i.goodsType=0,i.fail=a,o.wxPay(i)},fail:function(){a()},successStatusAbnormal:function(){a()}})},n.wxPay=function(e){var t=n;_.appMethod.requestPayment({timeStamp:e.timeStamp,nonceStr:e.nonceStr,package:e.package,signType:e.signType,paySign:e.paySign,success:function(t){_.appMethod.wxPaySuccess(e),e.success()},fail:function(a){if("requestPayment:fail cancel"===a.errMsg)return _.appMethod.showModal({content:"支付已取消"}),t.cancelOrder(e.orderId),void setTimeout(function(){_.appMethod.turnBack()},1e3);_.appMethod.showModal({content:"支付失败"}),setTimeout(function(){_.appMethod.turnBack()},1e3),_.appMethod.wxPayFail(e,a.errMsg)}})},n.showMemberDiscount=function(){n.memberDiscountRef.current.showDialog(n.data.selectDiscountInfo)},n.afterSelectedBenefit=function(e){n.setData({selectDiscountInfo:e.detail.selectedDiscount}),n.changePayInfo()},document.title="确认订单",n}return(0,v.default)(t,e),(0,p.default)(t,[{key:"componentWillMount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,y.getCurrentPageQueryParams)(),t=this,a=e.id,n=_.appMethod.globalData.exchangeCouponStyle,o={};if(n){var i=this.cutStyle(n.style);o.strStyle=i,o.lineBackgroundColor=n.customFeature.lineBackgroundColor,o.secColor=n.customFeature.secColor}t.setData({couponId:a,style:o}),this.getExchangeCouponInfo(),this.getPayInfo()}},{key:"render",value:function(){var e=this.state,t=(e.showGetUserInfo,e.discountList,e.style),a=e.couponDetail,n=e.data,o=e.payInfo,s=e.selectDiscountInfo,r=e.selectDiscountIndex,c=e.useBalance,l=e.balance;return React.createElement(React.Fragment,null,React.createElement("div",{className:"official-page exchange-coupon-detail-order"},React.createElement("div",{className:"preview-goods-wrap"},React.createElement("div",{className:"exchange-coupon"},React.createElement("div",{className:"exchange-coupon-wrapper"},1==a.recv_status?React.createElement("div",{className:"exchange-coupon-linetop",style:(0,y.convertLineStyleData)("background:"+t.secColor)}):0==a.recv_status&&React.createElement("div",{className:"exchange-coupon-linetop",style:(0,y.convertLineStyleData)("background-color:#CCCCCC")}),React.createElement("div",{className:"exchange-coupon-top",style:(0,y.convertLineStyleData)("background-color: "+t.lineBackgroundColor)},React.createElement("div",{className:"exchange-coupon-left"},React.createElement("div",{className:"exchange-coupon-left-first"},a.title),1==a.recv_status?React.createElement("div",{className:"exchange-coupon-left-second",style:(0,y.convertLineStyleData)("color:"+t.strStyle.color+";font-size:"+t.strStyle["font-size"])},a.exchange_condition.price>0&&React.createElement("span",null,"¥"+a.exchange_condition.price),a.exchange_condition.price>0&&!!+a.exchange_condition.integral&&a.exchange_condition.integral>0&&React.createElement("span",null,"+"),!!+a.exchange_condition.integral&&a.exchange_condition.integral>0&&React.createElement("span",null,a.exchange_condition.integral+"积分")):0==a.recv_status&&React.createElement("div",{className:"exchange-coupon-left-second",style:(0,y.convertLineStyleData)("color:#333")},a.exchange_condition.price>0&&React.createElement("span",null,"¥"+a.exchange_condition.price),a.exchange_condition.price>0&&!!+a.exchange_condition.integral&&a.exchange_condition.integral>0&&React.createElement("span",null,"+"),!!+a.exchange_condition.integral&&a.exchange_condition.integral>0&&React.createElement("span",null,a.exchange_condition.integral+"积分"))),1==a.type&&1==a.recv_status?React.createElement("div",{className:"exchange-coupon-icon",style:(0,y.convertLineStyleData)("background-color:"+t.secColor)},React.createElement("div",null,"折")):1==a.type&&0==a.recv_status?React.createElement("div",{className:"exchange-coupon-icon exchange-coupon-icon-used"},React.createElement("div",null,"折")):2==a.type&&1==a.recv_status?React.createElement("div",{className:"exchange-coupon-icon",style:(0,y.convertLineStyleData)("background-color:"+t.secColor)},React.createElement("div",null,"代")):2==a.type&&0==a.recv_status?React.createElement("div",{className:"exchange-coupon-icon exchange-coupon-icon-used"},React.createElement("div",null,"代")):0==a.type&&1==a.recv_status?React.createElement("div",{className:"exchange-coupon-icon",style:(0,y.convertLineStyleData)("background-color:"+t.secColor)},React.createElement("div",null,"减")):0==a.type&&0==a.recv_status?React.createElement("div",{className:"exchange-coupon-icon exchange-coupon-icon-used"},React.createElement("div",null,"减")):3==a.type&&1==a.recv_status?React.createElement("div",{className:"exchange-coupon-icon",style:(0,y.convertLineStyleData)("background-color:"+t.secColor)},React.createElement("div",null,"兑")):3==a.type&&0==a.recv_status?React.createElement("div",{className:"exchange-coupon-icon exchange-coupon-icon-used"},React.createElement("div",null,"兑")):4==a.type&&1==a.recv_status?React.createElement("div",{className:"exchange-coupon-icon",style:(0,y.convertLineStyleData)("background-color:"+t.secColor)},React.createElement("div",null,"储")):4==a.type&&0==a.recv_status?React.createElement("div",{className:"exchange-coupon-icon exchange-coupon-icon-used"},React.createElement("div",null,"储")):5==a.type&&1==a.recv_status?React.createElement("div",{className:"exchange-coupon-icon",style:(0,y.convertLineStyleData)("background-color:"+t.secColor)},React.createElement("div",null,"通")):5==a.type&&0==a.recv_status?React.createElement("div",{className:"exchange-coupon-icon exchange-coupon-icon-used"},React.createElement("div",null,"通")):6==a.type&&1==a.recv_status?React.createElement("div",{className:"exchange-coupon-icon",style:(0,y.convertLineStyleData)("background-color:"+t.secColor)},React.createElement("div",null,"次")):6==a.type&&0==a.recv_status&&React.createElement("div",{className:"exchange-coupon-icon exchange-coupon-icon-used"},React.createElement("div",null,"次")),1==a.recv_status?React.createElement("div",{className:"exchange-coupon-icon-wrapper",style:(0,y.convertLineStyleData)("border-color:"+t.secColor)}):0==a.recv_status&&React.createElement("div",{className:"exchange-coupon-icon-wrapper",style:(0,y.convertLineStyleData)("background-color:#ccc")})),React.createElement("div",{className:"exchange-coupon-bottom",style:(0,y.convertLineStyleData)("background-color: "+t.lineBackgroundColor)},React.createElement("div",{className:"exchange-coupon-cut",style:n?(0,y.convertLineStyleData)(n.style):{}}),React.createElement("div",{className:"desc"},"有效期 "+("-1"==a.expire?a.start_use_date+"至"+a.end_use_date:"0"==a.expire?"领取当天生效,有效期1天":"领取"+(a.react>0?a.react+"天后":"当天")+"生效，有效期"+(a.expire||"")+"天")+" "+(0==a.exclude_holiday?"":"除去法定节假日")+" "+(0==a.exclude_weekend?"":"周一至周五")+" "+(a.start_use_time||"")+"-"+(a.end_use_time||""))))),React.createElement("div",{className:"preview-box"},React.createElement("div",{className:"single-box"},"商品金额",React.createElement("span",{className:"pull-right"},React.createElement("span",null,"¥"+(o.original_price||"")),0!=o.integral&&React.createElement("span",null,"+"),0!=o.integral&&React.createElement("span",null,(o.integral||"")+"积分"))),(o.benefit&&0!=o.benefit.all_vip_benefit.length||o.benefit&&0!=o.benefit.coupon_benefit.length)&&React.createElement("div",{onClick:this.showMemberDiscount},React.createElement("div",{className:"balance-switch"},React.createElement("span",null,"优惠方式"),React.createElement("div",{className:"ico-moon icon-rightarrow pull-right"}),React.createElement("span",{className:"pull-right"},s.discount_title||s.title)),React.createElement("div",{hidden:0==r,className:"balance-price"},React.createElement("span",{className:"pull-right"},"- ¥"+o.discount_price))),React.createElement("div",null,React.createElement("div",{className:"balance-switch"},React.createElement("span",null,"使用储值金"),React.createElement(i.default,{className:"pull-right",checked:c,onChange:this.useBalanceChange})),React.createElement("div",{hidden:!c,className:"balance-price"},React.createElement("span",{className:"pull-right"},"- ¥"+l)))),React.createElement("div",{className:"bottom-nav"},React.createElement("div",{className:"preview-goods-total-price"},"合计:",React.createElement("span",{className:"price-count"},"¥"+(o.final_price||""))),React.createElement("form",null,React.createElement("button",{type:"button",onClick:this.confirmPayment},"立即付款"))))),React.createElement(E.MemberDiscount,{ref:this.memberDiscountRef}))}}]),t}(N.default);t.default=R},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(0),i=n(o),s=a(3),r=n(s),c=a(1),l=n(c),d=a(2),u=n(d),m=a(5),p=a(6),f=a(7),g=n(f);a(509);var h=function(e){function t(e){(0,i.default)(this,t);var a=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={orderData:"",orderInfo:"",userInfo:""},a.orderId="",a.franchiseeId="",a.dataInitial=function(){a.getOrderDetail(),a.getTostoreSetting(),a.setData({userInfo:m.appMethod.getUserInfo()})},a.getOrderDetail=function(){var e=a;m.appMethod.getOrderDetail({data:{order_id:e.orderId,sub_shop_app_id:e.franchiseeId},success:function(t){var a=t.data[0];e.setData({orderData:a,orderInfo:a.form_data})}})},a.getTostoreSetting=function(){var e=a;m.appMethod.sendRequest({url:"/index.php?r=AppTostore/getTostoreLineUpSetting",success:function(t){0==t.status&&e.setData({toStoreSetting:t.data})}})},document.title="保存号单",a}return(0,u.default)(t,e),(0,r.default)(t,[{key:"componentWillMount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,p.getCurrentPageQueryParams)();this.orderId=e.orderId,this.franchiseeId=e.franchiseeId,this.dataInitial()}},{key:"render",value:function(){var e=this.state,t=e.orderInfo,a=e.toStoreSetting,n=e.userInfo;return React.createElement("div",{className:"official-page check-row-number-detail"},React.createElement("div",{className:"shop-setting"},React.createElement("img",{src:t.app_info&&t.app_info.app_logo}),React.createElement("span",{className:"shop-name"},t.app_info&&t.app_info.app_name)),React.createElement("div",{className:"row-num-content-box"},React.createElement("div",{className:"row-num-content"},React.createElement("div",{className:"people-icon"}),React.createElement("div",{className:"top-background"}),React.createElement("div",{className:"take-num-content"},React.createElement("div",{className:"row-number-title"},t.line_up_data&&t.line_up_data.line_up_type_data.name+t.line_up_data.queue_num_name||""),React.createElement("div",{className:"row-number-wait"},React.createElement("span",{className:"line"}),(t.line_up_data&&t.line_up_data.prepare_wait_time)>0?"等待时间"+(t.line_up_data.prepare_wait_time>a.max_display_time?" >"+a.max_display_time:t.line_up_data.prepare_wait_time)+"min":"无需等待",React.createElement("span",{className:"line"}))),React.createElement("div",{className:"add-time"},React.createElement("span",{className:"ico-moon icon-row-number-wait"}),"取号时间： "+(t.add_time||""))),React.createElement("div",{className:"avatar"},React.createElement("img",{src:n.cover_thumb}))),React.createElement("div",{className:"dividing-line-box"},React.createElement("span",{className:"tip-line"}),React.createElement("span",{className:"tip-square"}),React.createElement("span",{className:"tip-line"})),React.createElement("div",{className:"shop-tip"},a&&a.additional_info&&a.additional_info.info))}}]),t}(g.default);t.default=h},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(0),i=n(o),s=a(3),r=n(s),c=a(1),l=n(c),d=a(2),u=n(d),m=a(5),p=a(6),f=a(7),g=n(f);a(511);var h=function(e){function t(e){(0,i.default)(this,t);var a=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={calculationData:"",lineUpSettingData:""},a.lineUpId="",a.franchiseeId="",a.dataInitial=function(){a.getCalculationInfo(),a.getLineUpSetting()},a.getCalculationInfo=function(){var e=a;m.appMethod.sendRequest({url:"/index.php?r=AppShop/calculationPrice",method:"post",data:{sub_shop_app_id:a.franchiseeId,line_up_type_id:a.lineUpId,is_balance:0,selected_benefit:{no_use_benefit:1}},success:function(t){var a=t.data;e.setData({calculationData:a})}})},a.getLineUpSetting=function(){var e=a;m.appMethod.sendRequest({url:"/index.php?r=AppTostore/getTostoreLineUpSetting",data:{sub_app_id:e.franchiseeId},success:function(t){e.setData({lineUpSettingData:t.data})}})},a.confirmOrder=function(e){var t=a;m.appMethod.sendRequest({url:"/index.php?r=AppTostore/addLineUpOrder",method:"post",data:{line_up_type_id:t.lineUpId,formId:e.detail.formId,sub_app_id:t.franchiseeId,selected_benefit:t.data.selectDiscountInfo,is_balance:0},success:function(e){t.payOrder(e.data)},fail:function(){t.requesting=!1},successStatusAbnormal:function(){t.requesting=!1}})},a.payOrder=function(e){function t(){m.appMethod.turnToPage("/orderMeal/pages/rowNumberOrderDetail/rowNumberOrderDetail?detail="+e+(n.franchiseeId?"&franchisee="+n.franchiseeId:""),1)}var n=a;if(0==a.data.calculationData.price)return void m.appMethod.sendRequest({url:"/index.php?r=AppShop/paygoods",data:{order_id:e,total_price:0},success:function(e){t()},fail:function(){t()},successStatusAbnormal:function(){t()}});m.appMethod.sendRequest({url:"/index.php?r=AppShop/GetWxWebappPaymentCode",data:{order_id:e},success:function(a){var o=a.data;o.orderId=e,o.turnToRowNumOrderDetail=t,o.goodsType=0,n.wxPay(o)},fail:function(){t()},successStatusAbnormal:function(){t()}})},a.wxPay=function(e){m.appMethod.requestPayment({timeStamp:e.timeStamp,nonceStr:e.nonceStr,package:e.package,signType:e.signType,paySign:e.paySign,success:function(t){m.appMethod.wxPaySuccess(e),e.turnToRowNumOrderDetail()},fail:function(t){if("requestPayment:fail cancel"===t.errMsg)return void m.appMethod.showModal({content:"支付已取消",complete:function(){m.appMethod.turnBack()}});m.appMethod.showModal({content:"支付失败",complete:e.fail}),m.appMethod.wxPayFail(e,t.errMsg)}})},document.title="确认支付",a}return(0,u.default)(t,e),(0,r.default)(t,[{key:"componentWillMount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,p.getCurrentPageQueryParams)();this.lineUpId=e.detail,this.franchiseeId=e.franchisee||"",this.dataInitial()}},{key:"render",value:function(){var e=this.state,t=e.lineUpSettingData,a=e.calculationData;return React.createElement(React.Fragment,null,React.createElement("div",{className:"official-page preview-row-number-order"},React.createElement("div",{className:"row-number-header"},React.createElement("div",{className:"shop-setting"},React.createElement("img",{src:t.app_info&&t.app_info.app_logo}),React.createElement("div",null,t.app_info&&t.app_info.app_name)),React.createElement("div",null,React.createElement("span",null,"排号费："),React.createElement("span",null,"¥"+t.line_up_price))),React.createElement("div",{className:"row-number-contain"},React.createElement("div",null,"排号类型："+(a.line_up_data&&a.line_up_data.line_up_type_data.name||"")),React.createElement("div",null,"预计等待："+((a.line_up_data&&a.line_up_data.line_up_count_info&&a.line_up_data.line_up_count_info[0].prepare_wait_time)>0?(a.line_up_data.line_up_count_info[0].prepare_wait_time>t.max_display_time?">"+t.max_display_time:a.line_up_data.line_up_count_info[0].prepare_wait_time)+"分钟":"无需等待"))),React.createElement("div",{className:"row-number-contain"},React.createElement("div",null,React.createElement("span",null,"实付金额："),React.createElement("span",null,"¥"+(a.price||"")))),React.createElement("form",{className:"confirm-order-wrap"},React.createElement("button",{type:"button",onClick:this.confirmOrder,className:"comfirm-order"},"确认支付"))))}}]),t}(g.default);t.default=h},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(0),i=n(o),s=a(3),r=n(s),c=a(1),l=n(c),d=a(2),u=n(d),m=a(5),p=a(6),f=a(7),g=n(f);a(513);var h=function(e){function t(e){(0,i.default)(this,t);var a=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={orderId:"",orderInfo:"",orderData:"",isShowCancelWindow:!1,toStoreSetting:"",billingStatus:["未支付","","待使用","","退款申请中","退款中","已使用","已关闭"]},a.franchiseeId="",a.dataInitial=function(){var e=a;a.getTostoreSetting(),setTimeout(function(){e.getOrderDetail()},2e3)},a.getOrderDetail=function(){var e=a;m.appMethod.getOrderDetail({data:{order_id:e.data.orderId,sub_shop_app_id:e.franchiseeId},success:function(t){var a=t.data[0];e.setData({orderData:a,orderInfo:a.form_data})}})},a.cancelTakeNumber=function(){var e=a;m.appMethod.sendRequest({url:"/index.php?r=AppTostore/lineUpOrderRefund",method:"post",data:{order_id:e.data.orderId},success:function(t){e.getOrderDetail(),e.hideCancelWindow()}})},a.showCancelWindow=function(){a.setData({isShowCancelWindow:!0})},a.hideCancelWindow=function(){a.setData({isShowCancelWindow:!1})},a.goToCheckRowNunberDetail=function(){var e=a;m.appMethod.turnToPage("/orderMeal/pages/checkRowNumberDetail/checkRowNumberDetail?orderId="+e.data.orderId+(e.franchiseeId?"&franchisee="+e.franchiseeId:""))},a.getTostoreSetting=function(){var e=a;m.appMethod.sendRequest({url:"/index.php?r=AppTostore/getTostoreLineUpSetting",success:function(t){0==t.status&&e.setData({toStoreSetting:t.data})}})},document.title="订单详情",a}return(0,u.default)(t,e),(0,r.default)(t,[{key:"componentWillMount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,p.getCurrentPageQueryParams)();this.setData({orderId:e.detail}),this.franchiseeId=e.franchisee||"",this.dataInitial()}},{key:"render",value:function(){var e=this.state,t=e.orderInfo,a=e.billingStatus,n=e.toStoreSetting,o=e.isShowCancelWindow;return React.createElement(React.Fragment,null,React.createElement("div",{className:"official-page row-number-order-detail"},React.createElement("div",{className:"row-num-head"},React.createElement("span",null,"我的排号："),React.createElement("span",null,t.line_up_data&&t.line_up_data.queue_num_name)),React.createElement("div",{className:"row-num-contain"},React.createElement("div",null,"号单状态："+(a[t.status]||"")),React.createElement("div",null,"取号时间："+(t.add_time||"")),React.createElement("div",null,"订单号："+(t.order_id||""))),React.createElement("div",{className:"row-num-contain"},React.createElement("div",null,"排号类型："+(t&&t.line_up_data&&t.line_up_data.line_up_type_data&&t.line_up_data.line_up_type_data.name)),React.createElement("div",null,"预计等待："+((t.line_up_data&&t.line_up_data.prepare_wait_time)>0?(t.line_up_data.prepare_wait_time>n.max_display_time?">"+n.max_display_time:t.line_up_data.prepare_wait_time)+"分钟":"无需等待"))),React.createElement("div",{className:"shop-name-contain"},React.createElement("div",{className:"shop-name"},React.createElement("img",{src:t.app_info&&t.app_info.app_logo}),React.createElement("span",null,t.app_info&&t.app_info.app_name)),React.createElement("div",{className:"cost-box"},React.createElement("div",null,"排号费：",React.createElement("span",{className:"pull-right"},"¥"+(t.original_price||""))),React.createElement("div",null,"实付金额：",React.createElement("span",{className:"pull-right orange"},"¥"+(t.total_price||""))))),2==t.status&&React.createElement("div",{className:"row-num-btn-box"},React.createElement("span",{onClick:this.showCancelWindow},"取消排队"),React.createElement("span",{className:"color-btn",onClick:this.goToCheckRowNunberDetail},"查看号单")),o&&React.createElement("div",{className:"cancel-window"},React.createElement("div",{className:"cancel-window-box"},React.createElement("div",{className:"cancel-window-content"},"取消后您的排号信息无法恢复排号费将退款。确定取消？"),React.createElement("div",{className:"cancel-window-btn"},React.createElement("span",{onClick:this.cancelTakeNumber},"取消排号"),React.createElement("span",{className:"orange",onClick:this.hideCancelWindow},"继续排号"))))))}}]),t}(g.default);t.default=h},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(26),i=n(o),s=a(9),r=n(s),c=a(0),l=n(c),d=a(3),u=n(d),m=a(1),p=n(m),f=a(2),g=n(f);a(27);var h=a(5),v=a(6),_=a(12),y=n(_),E=a(7),b=n(E);a(515);var N=function(e){function t(e){var a;(0,l.default)(this,t);var n=(0,p.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state=(a={topNavBarData:{isDefault:0,title:"商品详情"},addToShoppingCartHidden:!0,addToGroupBuyCart:!0,displayComment:!0,imageOrVideo:"image",ifOpenNewGroup:!0,showTips:!0,team_token:"",discountInfo:[],discountInfoArr:[],storeStyle:"",formid:[],isShowTopBar:!0,selectModelInfo:{models:[],stock:"",price:"",virtualPrice:"",buyCount:1,models_text:"",leader_price:0,member_price:0,num_of_people:0,groupBuyCount:1,groupNum:""},progress:"",teamInfo:{team_list:[],is_more:1,curpage:1,loading:!1}},(0,r.default)(a,"imageOrVideo","image"),(0,r.default)(a,"scrollType","goods"),(0,r.default)(a,"carouselCurrentIndex",1),(0,r.default)(a,"isParticipate",!1),(0,r.default)(a,"isGroupMask",!1),(0,r.default)(a,"defaultPhoto",""),(0,r.default)(a,"rect",[]),(0,r.default)(a,"screenHeight",667),a),n.seckillFunc=[],n.page=1,n.isMore=1,n.allStock="",n.loadAll=function(){var e=n;e.getAppECStoreConfig(),e.loadGoods()},n.loadGoods=function(){var e,t,a,o,i,s,r,c,l=n,d=[],u=[],m={},p="",f="",g=0,v=0,_="",E="";h.appMethod.sendRequest({url:"/index.php?r=appGroupBuy/getGoods",data:{activity_id:l.data.activityId,goods_id:l.data.goodsId,sub_shop_app_id:l.data.franchiseeId||"",team_token:l.data.team_token},header:{activity_id:l.data.activityId},success:function(h){var b=h.data.goods_info,N=h.data.group_buy_goods_info,R=N.discount_info,k=[],w=100*Number(h.data.current_user_count/h.data.max_user_num),x=h.data.team_token;b.downCount={hours:"00",minutes:"00",seconds:"00",days:"00"},p=b.description,b.server_time=h.current_time,b.seckill_end_time=y.default.formatTime(new Date(1e3*h.data.end_date)),b.seckill_start_time=y.default.formatTime(new Date(1e3*h.data.start_date)),b.status=h.data.status,0==b.status||1==b.status||2==b.status?l.downcount=l.beforeGroupDownCount(b,h.data,l,"goodsInfo"):3==b.status&&"-1"!=h.data.end_date&&(l.downcount=l.duringGroupDownCount(b,l,"goodsInfo")),p=p?p.replace(/\u00A0|\u2028|\u2029|\uFEFF/g,""):p,b.description=p,b.virtual_price="0.00"==b.virtual_price&&b.virtual_price?"":b.virtual_price;for(var C in b.model)if(C){var D=b.model[C];d.push(D),D&&D.subModelName&&(m[D.id]=D.subModelName.join("、"),u.push(D.subModelId[0]),f=u.toString(),_+="“"+D.subModelName[0]+"” ")}if(b.model_items.length){var S=b.model_items;for(I=0,c=S.length;I<c;I++)g=S[I].price,b.highPrice=b.highPrice>g?b.highPrice:g,b.lowPrice=b.lowPrice<g?b.lowPrice:g,v+=Number(S[I].stock),0==I&&(t=g,i=Number(S[I].num_of_people),r=S[I].member_price||0,s=S[I].leader_price||0,e=S[0].stock,a=S[0].id,E=S[I].img_url,o="0.00"!=S[I].virtual_price&&S[I].virtual_price?S[I].virtual_price:"");v/=N.num_of_people.length}else t=b.price,e=b.stock,E=b.cover,i=Number(R[0].num_of_people||N.goods_num),r=R[0].member_price||0,s=R[0].leader_price||0,o="0.00"!=b.virtual_price&&b.virtual_price?b.virtual_price:"";for(var I=0;I<R.length;I++)R[I].model_id==a&&k.push(R[I]);b.model=d;var M=b.goods_express_data.express_fee_sort;if(1==M.length){var T=M[0];b.express_fee=0==T?"包邮":T+"元"}else b.express_fee=M[0]+"~"+M[1]+"元";l.setData({"selectModelInfo.models":u||"","selectModelInfo.stock":e||"","selectModelInfo.price":t||"","selectModelInfo.groupNum":i||"","selectModelInfo.modelId":a||"","selectModelInfo.models_text":_||"","selectModelInfo.imgurl":E||"","selectModelInfo.virtualPrice":o||"","selectModelInfo.leader_price":s||0,"selectModelInfo.member_price":r||0,"selectModelInfo.num_of_people":i,goods:h.data,goodsInfo:b,discountInfoArr:k,team_token:x||"",groupInfo:N,discountInfo:N.discount_info,progress:w}),l.getAssessList(0,1),"4"==h.data.type||"3"==h.data.type||l.loadTeamList(b.id,N.activity_id,n.pageSize)}})},n.getAppECStoreConfig=function(){h.appMethod.getAppECStoreConfig(function(e){n.setData({storeStyle:e.color_config,hidestock:!(!e.detail_fields||0!=e.detail_fields.stock),isShowVirtualPrice:!(!e.detail_fields||1!=e.detail_fields.virtual_price)})},n.data.franchiseeId)},n.beforeGroupDownCount=function(e,t,a,o){var i=n;return h.appMethod.seckillDownCount({startTime:e.server_time,endTime:e.seckill_start_time,showDays:!0,callback:function(){var n={};n[o+".status"]=3,n[o+".current_status"]=3,n[o+".server_time"]=e.seckill_start_time,a.setData(n),a.loadGoods(),e.server_time=e.seckill_start_time,"-1"!=t.end_date&&(i.downcount=i.duringGroupDownCount(e,a,o))}},a,o+".downCount")},n.duringGroupDownCount=function(e,t,a){return h.appMethod.seckillDownCount({startTime:e.server_time,endTime:e.seckill_end_time,showDays:!0,callback:function(){var e={};e[a+".status"]=4,e[a+".current_status"]=4,t.setData(e)}},t,a+".downCount")},n.loadTeamList=function(e,t){var a=n,o=n.data.teamInfo;0==o.is_more&&o.loading||(n.setData({"teamInfo.loading":!0}),h.appMethod.sendRequest({url:"/index.php?r=appGroupBuy/getTeamListByGoods",data:{activity_id:t,goods_id:e,sub_shop_app_id:a.data.franchiseeId||"",page:n.page,page_size:2},success:function(e){for(var t=e.data,n={},i=o.team_list,s=i.length,r=a.downcountArr||[],c=0;c<t.length;c++)!function(n){var i=t[n],c=void 0,l=n+s;i.description="",i.downCount={hours:"00",minutes:"00",seconds:"00"},i.server_time=e.current_time,i.seckill_end_time=y.default.formatTime(new Date(1e3*i.expired_time));var d="teamInfo.team_list["+l+"]";(c=h.appMethod.seckillDownCount({startTime:i.server_time,endTime:i.seckill_end_time,callback:function(){var e={};e[d+".current_status"]=3,e["teamInfo.count"]=o.count-1,a.setData(e)}},a,d+".downCount"))&&r.push(c)}(c);n["teamInfo.team_list"]=i.concat(e.data),n["teamInfo.count"]=e.count,n["teamInfo.is_more"]=e.is_more,n["teamInfo.curpage"]=1,n["teamInfo.loading"]=!1,a.downcountArr=r,a.setData(n),a.page++,a.getRect()}}))},n.showMoreTeams=function(){var e=10+n.pageSize;n.loadTeamList(n.data.goodsId,n.data.activityId,e),n.pageSize=e},n.singleBuy=function(){n.showCartHidden(),n.setData({isGroupMask:!1,isShowTopBar:!1})},n.showProductSpecify=function(){n.showCartHidden(),n.setData({isGroupMask:!0})},n.groupBuy=function(){n.showCartHidden(),n.setData({isGroupMask:!0})},n.showCartHidden=function(){n.setData({addToShoppingCartHidden:!1,ifAddToShoppingCart:!0,imageOrVideo:"image"})},n.hiddeAddToShoppingCart=function(){n.setData({addToShoppingCartHidden:!0,isShowTopBar:!0})},n.participateGroup=function(e){var t=e.currentTarget.dataset;if("1"==t.joined)return"1"==t.type?void h.appMethod.showModal({content:"您已参加过拼团活动，无法参加该新人团"}):void h.appMethod.showModal({content:"您已参加过该团，不能重新参团"});n.setData({addToGroupBuyCart:!1,ifOpenNewGroup:!1,isParticipate:!0,isShowTopBar:!1,"selectModelInfo.groupNum":e.currentTarget.dataset.num,team_token:e.currentTarget.dataset.token}),n.resetSelectCountPrice()},n.hideGroupBuyCart=function(){n.setData({addToGroupBuyCart:!0,isShowTopBar:!0})},n.showMoreTips=function(){var e=!n.data.showTips;n.setData({showTips:e})},n.hideMask=function(){n.setData({showTips:!0})},n.getRect=function(){n.selectQuery("goods"),n.selectQuery("group"),n.selectQuery("comment"),n.selectQuery("detail")},n.selectQuery=function(e){var t=n,a={goods:0,group:1,comment:2,detail:3};document.querySelector("#"+e).getBoundingClientRect(function(n){var o={},i=e;o["rect["+a[i]+"].top"]=n?n.top:0,o["rect["+a[i]+"].name"]=i,t.setData(o)}),document.documentElement.scrollTop=document.documentElement.scrollTop,document.body.scrollTop=document.body.scrollTop},n.goToPlaylaws=function(){var e="/group/pages/gpplaylaws/gpplaylaws?activityType="+n.data.goods.type+"&autoRefund="+n.data.goods.auto_refund+"&refundMode="+n.data.goods.refund_mode+(n.data.franchiseeId?"&franchisee="+n.data.franchiseeId:"");n.saveUserFormId(function(){h.appMethod.turnToPage(e)})},n.hiddeAddToShoppingCart=function(){n.setData({addToShoppingCartHidden:!0,isShowTopBar:!0})},n.carouselIndex=function(e){n.setData({carouselCurrentIndex:e+1})},n.showQRCodeComponent=function(){var e=n,t=n.data.goodsInfo,a=n.data.groupInfo,o=h.appMethod.createAnimation({timingFunction:"ease",duration:400});h.appMethod.sendRequest({url:"/index.php?r=appGroupBuy/getShareQRCode",data:{goods_id:e.data.goodsId,activity_id:e.data.activityId,sub_shop_app_id:e.data.franchiseeId||"",virtual_price:t.virtual_price=t.virtual_price?t.price:t.virtual_price,type:6,text:t.title,price:a.group_buy_price,goods_img:t.img_urls?t.img_urls[0]:t.cover,user_token:h.appMethod.globalData.PromotionUserToken||""},success:function(t){o.bottom("0").step(),e.setData({"pageQRCodeData.shareDialogShow":0,"pageQRCodeData.shareMenuShow":!0,"pageQRCodeData.goodsInfo":t.data,"pageQRCodeData.animation":o.export()})}})},n.getAssessList=function(e,t,a){var o=n;h.appMethod.getAssessList({method:"post",data:{goods_id:o.data.goodsId,idx_arr:{idx:"level",idx_value:e},page:t,page_size:20,sub_shop_app_id:n.data.franchiseeId||""},success:function(e){var t=e.data;a&&(t=o.data.commentArr.concat(t)),o.setData({commentArr:t,commentNums:e.num,commentPage:o.data.commentPage+1,commentExample:e.data[0]||"",commentTotalPage:e.total_page,displayComment:!(+e.num[0]>0),"rect[2].isShow":+e.num[0]>0})}})},n.selectSubModel=function(e){var t=e.target.dataset,a=t.modelIndex,o=t.submodelIndex,i={},s=(n.data.selectModelInfo,n.data.selectModelInfo.models),r=n.data.goodsInfo.model,c="";s[a]=r[a].subModelId[o];for(var l=0;l<s.length;l++)for(var d=r[l].subModelId,u=0;u<d.length;u++)s[l]==d[u]&&(c+="“"+r[l].subModelName[u]+"” ");i["selectModelInfo.models"]=s,i["selectModelInfo.models_text"]=c,n.setData(i),n.resetSelectCountPrice()},n.resetSelectCountPrice=function(){for(var e=n.data.selectModelInfo.models.join(","),t=n.data.goodsInfo.model_items,a=n.data.discountInfo,o=n.data.goods.type,i=[],s={},r=t.length-1;r>=0;r--)if(t[r].model){if(t[r].model==e&&(4==o||4!=o&&t[r].num_of_people==n.data.selectModelInfo.groupNum)){s["selectModelInfo.stock"]=t[r].stock,s["selectModelInfo.virtualPrice"]="0.00"!=t[r].virtual_price&&t[r].virtual_price?t[r].virtual_price||"":"",s["selectModelInfo.price"]=t[r].price,s["selectModelInfo.member_price"]=t[r].member_price||0,s["selectModelInfo.leader_price"]=t[r].leader_price||0,s["selectModelInfo.modelId"]=t[r].id||"",s["selectModelInfo.imgurl"]=t[r].img_url||"";break}}else if(4==o||4!=o&&t[r].num_of_people==n.data.selectModelInfo.groupNum){s["selectModelInfo.stock"]=t[r].stock,s["selectModelInfo.price"]=t[r].price,s["selectModelInfo.virtualPrice"]="0.00"!=t[r].virtual_price&&t[r].virtual_price?t[r].virtual_price:"",s["selectModelInfo.member_price"]=t[r].member_price||0,s["selectModelInfo.leader_price"]=t[r].leader_price||0,s["selectModelInfo.modelId"]=t[r].id||"",s["selectModelInfo.imgurl"]=t[r].img_url||"";break}for(var c=0;c<a.length;c++)(a[c].model_id==s["selectModelInfo.modelId"]||void 0===a[c].model_id&&!s["selectModelInfo.modelId"])&&i.push(a[c]);s.discountInfoArr=i,n.setData(s)},n.clickMinusButton=function(e){var t=n.data.selectModelInfo.buyCount;t<=1||n.setData({"selectModelInfo.buyCount":t-1,"selectModelInfo.groupBuyCount":t-1})},n.sureJoinGroup=function(e){var t=n;if(!h.appMethod.isLogin())return void h.appMethod.goLogin({success:function(){t.sureJoinGroup(e)}});var a=n.data.franchiseeId,o=JSON.stringify(n.data.selectModelInfo),i=n.data.goodsId,s=n.data.activityId,r=n.data.selectModelInfo.modelId||"",c=n.data.selectModelInfo.groupBuyCount,l=n.data.selectModelInfo.groupNum||"",d=t.data.goods.user_limit_buy,u=t.data.team_token||"";if(0==n.data.selectModelInfo.stock)return void h.appMethod.showModal({content:"商品库存不足"});if(3==t.data.goods.type&&0==t.data.goods.is_leader)h.appMethod.sendRequest({url:"/index.php?r=appGroupBuy/addOrder",method:"post",data:{goods_id:i,activity_id:s,sub_shop_app_id:t.data.franchiseeId||n.data.groupInfo.parent_app_id||"",model_id:r||"",num:c,num_of_people:l,team_token:u,select_benefit:"",is_balance:0,use_balance:0,address_id:""},success:function(e){e.data;if(0!=e.status)return void h.appMethod.showModal({content:e.data});if(t.data.cashOnDelivery){var a="/group/pages/gppaySuccess/gppaySuccess?detail="+e.data.order_id+(t.franchisee_id?"&franchisee="+t.franchisee_id:"")+"&is_group="+!!t.is_group+"&orderid="+e.data.order_id+"&teamToken="+e.data.team_token;t.saveUserFormId(function(){h.appMethod.turnToPage(a,1)})}else t.payOrder(e.data.order_id,e.data.team_token)},fail:function(){t.requesting=!1},successStatusAbnormal:function(){t.requesting=!1}});else{var m="/group/pages/previewGroupOrder/previewGroupOrder?goodsid="+i+"&activityid="+t.data.activityId+"&num="+c+"&modelId="+r+"&numOfPeople="+l+"&is_group=true&group_buy_people="+t.data.selectModelInfo.groupNum+"&is_group_buy=1&limit_buy="+d+"&selectmodel="+o+"&groupType="+t.data.goods.type+"&team_token="+u+"&isFrom=true"+(t.data.franchiseeId?"&franchisee="+t.data.franchiseeId:"")+"&parent_app_id="+n.data.groupInfo.parent_app_id;t.saveUserFormId(function(){a&&(m+="&franchisee="+a),t.setData({addToGroupBuyCart:!0,isShowTopBar:!0}),h.appMethod.turnToPage(m)})}},n.payOrder=function(e,t){function a(){var a="/group/pages/gppaySuccess/gppaySuccess?detail="+e+(i.data.franchiseeId?"&franchisee="+i.data.franchiseeId:"")+"&is_group="+!!i.is_group+"&teamToken="+t;i.franchisee_id?i.saveUserFormId(function(){h.appMethod.turnToPage(a,1)}):h.appMethod.sendRequest({url:"/index.php?r=AppMarketing/CheckAppCollectmeStatus",data:{order_id:e,sub_shop_app_id:i.data.franchiseeId||""},success:function(e){0==e.valid&&(a+="&collectBenefit=1"),i.saveUserFormId(function(){h.appMethod.turnToPage(a,1)})}})}function o(){i.saveUserFormId(function(){h.appMethod.turnToPage("../pluginOrderDetail/pluginOrderDetail?order_id="+e+(i.data.franchiseeId?"&franchisee="+i.data.franchiseeId:""),1)})}var i=n;if(0==n.data.totalPayment)return void h.appMethod.sendRequest({url:"/index.php?r=AppShop/paygoods",data:{order_id:e,sub_shop_app_id:i.data.franchiseeId||"",total_price:0},success:function(e){a()},fail:function(){o()},successStatusAbnormal:function(){o()}});h.appMethod.sendRequest({url:"/index.php?r=AppShop/GetWxWebappPaymentCode",data:{order_id:e,sub_shop_app_id:i.data.franchiseeId||""},success:function(t){var n=t.data;n.orderId=e,n.success=a,n.goodsType=0,n.fail=o,h.appMethod.wxPay(n)},fail:function(){o()},successStatusAbnormal:function(){o()}})},n.confirmPayment=function(e){h.appMethod.sendRequest({url:"/index.php?r=appGroupBuy/addOrder",method:"post",data:{goods_id:that.data.goodsId,activity_id:that.data.activityId,sub_shop_app_id:that.data.franchiseeId||n.data.groupInfo.parent_app_id||"",model_id:modelId=n.data.selectModelInfo.modelId||"",num:n.data.selectModelInfo.groupBuyCount,num_of_people:n.data.selectModelInfo.groupNum||"",team_token:that.data.team_token||"",formId:e.target.formId,select_benefit:that.data.selectDiscountInfo,is_balance:that.data.useBalance?1:0,is_self_delivery:that.data.is_self_delivery,self_delivery_app_store_id:1==that.data.is_self_delivery?that.data.selectDelivery.id:"",remark:that.data.description,address_id:that.data.selectAddress.id||that.data.selectDelivery.id,is_pay_on_delivery:that.data.cashOnDelivery?1:0,additional_info:that.additional_info,express_fee:that.data.express_fee},success:function(e){e.data;if(0!=e.status)return void h.appMethod.showModal({content:e.data});if(that.data.cashOnDelivery){var t="/group/pages/gppaySuccess/gppaySuccess?detail="+e.data.order_id+(that.data.franchiseeId?"&franchisee="+that.data.franchiseeId:"")+"&is_group="+!!that.is_group+"&orderid="+e.data.order_id+"&teamToken="+e.data.team_token;that.saveUserFormId(function(){h.appMethod.turnToPage(t,1)})}else that.payOrder(e.data.order_id,e.data.team_token)},fail:function(){that.requesting=!1},successStatusAbnormal:function(){that.requesting=!1}})},n.clickPlusButton=function(e){var t=e.currentTarget.dataset.type,a=n.data.selectModelInfo,o=(n.data.goodsInfo,a.buyCount),i=+n.data.goods.user_limit_buy,s=a.stock;return 0!=i&&a.buyCount>=i&&"group"==t?(h.appMethod.showModal({content:"已超过该商品的限购件数（每人限购"+i+"件）"}),void n.setData({"selectModelInfo.buyCount":i,"selectModelInfo.groupBuyCount":i})):o>=s&&4!=n.data.goods.type?(h.appMethod.showModal({content:"购买数量不能大于库存"}),void n.setData({"selectModelInfo.buyCount":s,"selectModelInfo.groupBuyCount":s})):void n.setData({"selectModelInfo.buyCount":o+1,"selectModelInfo.groupBuyCount":o+1})},n.clickGroupMinusButton=function(e){var t=n.data.selectModelInfo.groupBuyCount;t<=1||n.setData({"selectModelInfo.groupBuyCount":t-1})},n.clickGroupPlusButton=function(e){var t=n.data.selectModelInfo,a=t.groupBuyCount,o=t.stock,i=n.data.goods.user_limit_buy;a>=o||a>=i||n.setData({"selectModelInfo.groupBuyCount":a+1})},n.selectGroupNum=function(e){n.setData({"selectModelInfo.groupNum":e.currentTarget.dataset.num}),n.resetSelectCountPrice()},n.inputBuyCount=function(e){var t=+e.target.value,a=n.data.selectModelInfo,o=(n.data.goodsInfo,+a.stock),i=+n.data.goods.user_limit_buy;return t>i&&0!=i?(h.appMethod.showModal({content:"已超过该商品的限购件数（每人限购"+i+"件）"}),void n.setData({"selectModelInfo.buyCount":+i,"selectModelInfo.groupBuyCount":+i})):0==t?void n.setData({"selectModelInfo.buyCount":1}):t>=o?(h.appMethod.showModal({content:"购买数量不能大于库存"}),void n.setData({"selectModelInfo.buyCount":+o,"selectModelInfo.groupBuyCount":+o})):void n.setData({"selectModelInfo.buyCount":+t,"selectModelInfo.groupBuyCount":+t})},n.clickPlusImages=function(e){h.appMethod.previewImage({current:e.currentTarget.dataset.src,urls:e.currentTarget.dataset.srcarr})},n.goToHomepage=function(){var e=n,t=e.data.franchiseeId,a=h.appMethod.getChainId();if(t&&t!=a){var o=h.appMethod.getCurrentPages(),i=o[o.length-2];i&&"franchisee/pages/goodsMore/goodsMore"==i.route?h.appMethod.turnBack({delta:2}):customEvent.clickEventHandler["to-franchisee"]({"franchisee-id":t})}else{var s=h.appMethod.getHomepageRouter();h.appMethod.reLaunch({url:"/pages/"+s+"/"+s})}},n.changeImageOrVideo=function(e){n.setData({videoPoster:!1,imageOrVideo:e.currentTarget.dataset.type})},n.startPlayVideo=function(){var e=h.appMethod.createVideoContext("carousel-video");n.setData({videoPoster:!0}),e.play()},n.addFavoriteGoods=function(e){var t=n;h.appMethod.sendRequest({url:"/index.php?r=AppShop/addFavoriteGoods",data:{form_id:e.target.formId,goods_id:t.data.goodsId,sub_shop_app_id:t.data.franchiseeId||""},success:function(e){t.setData({"goods.is_favorite":1})},complete:function(){h.appMethod.showToast({title:"收藏成功!",image:"/images/favorites.png"})}})},n.deleteFavoriteGoods=function(e){n.data.formid.push(e.target.formId);var t=n;h.appMethod.sendRequest({url:"/index.php?r=AppShop/deleteFavoriteGoods",method:"post",data:{goods_id_arr:[t.data.goodsId],sub_shop_app_id:t.data.franchiseeId||""},success:function(e){t.setData({"goods.is_favorite":0})},complete:function(){h.appMethod.showToast({title:"取消收藏!",image:"/images/cancel-favorites.png"})}})},n.sureAddToShoppingCart=function(){if(4==n.data.goods.type)return void h.appMethod.showModal({content:"参与抽奖商品不能加入购物车"});var e=n,t={goods_id:n.data.goodsId,model_id:n.data.selectModelInfo.modelId||"",num:n.data.selectModelInfo.buyCount,sub_shop_app_id:n.data.franchiseeId||"",is_seckill:n.data.isSeckill?1:""};h.appMethod.sendRequest({hideLoading:!0,url:"/index.php?r=AppShop/addCart",data:t,success:function(t){h.appMethod.showToast({title:"添加成功",icon:"success"}),setTimeout(function(){e.hiddeAddToShoppingCart()},1e3)}})},n.showGroupBuy=function(){var e=n.data.team_token,t=n.data.goodsInfo;return 4==t.status?void h.appMethod.showModal({content:"当前拼团已结束"}):0==t.status||1==t.status||2==t.status?void h.appMethod.showModal({content:"当前拼团活动未开启"}):(4!=n.data.goods.type&&(e=""),void n.setData({team_token:e,addToGroupBuyCart:!1,ifOpenNewGroup:!1,isParticipate:!1,isShowTopBar:!1}))},n.buyDirectlyNextStep=function(e){var t=n.data.franchiseeId,a=n,o={goods_id:n.data.goodsId,model_id:n.data.selectModelInfo.modelId||"",num:n.data.selectModelInfo.buyCount,sub_shop_app_id:t||"",is_seckill:n.data.isSeckill?1:""};h.appMethod.sendRequest({url:"/index.php?r=AppShop/addCart",data:o,success:function(e){var n=[e.data],o="/eCommerce/pages/previewGoodsOrder/previewGoodsOrder?cart_arr="+encodeURIComponent(n);a.saveUserFormId(function(){t&&(o+="&franchisee="+t),a.hiddeAddToShoppingCart(),h.appMethod.turnToPage(o)})}})},n.remainMe=function(e){var t=n;h.appMethod.sendRequest({url:"/index.php?r=appShop/careActivity",data:{data_id:t.data.goodsId,activity_id:t.data.activityId,sub_shop_app_id:t.data.franchiseeId||"",activity_type:0},success:function(e){var a={};h.appMethod.showToast({title:"提醒成功！",duration:2e3}),a["goodsInfo.status"]=2,t.setData(a)}}),t.saveUserFormId()},n.goToCommentPage=function(){var e=n.data.franchiseeId,t="/eCommerce/pages/goodsComment/goodsComment?detail="+n.data.goodsId+(e?"&franchisee="+e:"");n.saveUserFormId(function(){h.appMethod.turnToPage(t)})},n.clickCommentLabel=function(e){var t=e.target.dataset.type,a={};a.commentPage=1,a.commnetType=t,n.setData(a),n.getAssessList(t,1)},n.formSubmit_collect=function(e){n.data.formid.push(e.target.formId)},n.saveUserFormId=function(e){var t=n;h.appMethod.sendRequest({url:"/index.php?r=api/AppMsgTpl/saveUserFormId",method:"post",data:{sub_shop_app_id:t.data.franchiseeId||"",form_id:t.data.formid||[]},complete:function(){e&&e(),t.setData({formid:[]})}})},n.soonOpen=function(){h.appMethod.showModal({content:"当前拼团未开启"})},n.onPullDownRefresh=function(){},n.onReachBottom=function(){},n.onPageScroll=function(e){for(var t=n.data.rect,a=e.scrollTop,o=(n.data.scrollTop,"goods"),i=(n.data.screenHeight,0);i<t.length;i++){var s=t[i];s&&a+40>s.top&&!1!==s.isShow&&(o=s.name)}n.setData({scrollType:o,scrollTop:a})},n.onShareAppMessage=function(){var e=n,t=n.data.goodsId,a=n.data.groupInfo,o=n.data.activityId,i=n.data.contact,s=n.data.franchiseeId,r=h.appMethod.globalData.PromotionUserToken?"&user_token="+h.appMethod.globalData.PromotionUserToken:"",c="/group/pages/gpgoodsDetail/gpgoodsDetail?goods_id="+t+"&activity_id="+o+"&contact="+i+(s?"&franchisee="+s:"")+(h.appMethod.globalData.pageShareKey?"&psid="+h.appMethod.globalData.pageShareKey:"")+r,l=a.share_cover?a.share_cover:"https://www.zhichiwangluo.com/zhichi_frontend/static/webapp/images/group_goods_share.jpeg",d=h.appMethod.getUserInfo("nickname"),u=a.share_title?a.share_title:(d?d+" 喊你":"")+"拼单啦~ "+n.data.groupInfo.group_buy_price+"元拼"+n.data.goodsInfo.title+"，火爆抢购中......";return h.appMethod.shareAppMessage({title:u,path:c,imageUrl:l,success:function(t){h.appMethod.showToast({title:"转发成功",duration:500}),h.appMethod.sendRequest({hideLoading:!0,url:"/index.php?r=appShop/getIntegralLog",data:{sub_shop_app_id:_this.data.franchiseeId,add_time:t},success:function(t){0==t.status&&t.data&&e.setData({rewardPointObj:{showModal:!0,count:t.data,callback:""}})}})}})},document.title="商品详情",n}return(0,g.default)(t,e),(0,u.default)(t,[{key:"componentWillMount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,v.getCurrentPageQueryParams)(),t=this,a=e.goods_id,n=e.franchisee,o=e.activity_id,i=h.appMethod.getDefaultPhoto(),s=h.appMethod.getSystemInfoData().screenHeight||667;t.setData({team_token:e.teamToken||"",goodsId:a||"",franchiseeId:n||"",defaultPhoto:i,activityId:o,screenHeight:s,sessionFrom:e.franchisee||h.appMethod.getAppId()||"","topNavBarData.totalHeight":h.appMethod.globalData.topNavBarHeight||0}),t.loadAll()}},{key:"componentDidMount",value:function(){}},{key:"componentDidShow",value:function(){}},{key:"componentDidHide",value:function(){}},{key:"componentWillUnmount",value:function(){if(this.downcount&&this.downcount.clear(),this.downcountArr&&this.downcountArr.length){this.downcountArr=this.downcountArr.concat().reverse();for(var e=0;e<this.downcountArr.length;e++)this.downcountArr[e]&&this.downcountArr[e].clear()}}},{key:"render",value:function(){var e,t,a=this,n=this.state,o=(n.showGetUserInfo,n.topNavBarData),s=(n.pageQRCodeData,n.scrollType),c=n.goodsInfo,l=n.displayComment,d=n.imageOrVideo,u=n.videoPoster,m=n.status,p=n.groupInfo,f=n.goods,g=n.progress,h=n.teamInfo,_=n.commentNums,y=n.commentExample,E=n.defaultPhoto,b=n.storeStyle,N=n.franchiseeId,R=(n.sessionFrom,n.addToShoppingCartHidden),k=n.selectModelInfo,w=n.isShowVirtualPrice,x=n.isSeckill,C=n.addToGroupBuyCart,D=n.isParticipate,S=n.showTips,I=n.discountInfoArr,M=n.godos;return React.createElement("div",{className:"official-page gp-goods-detail"},React.createElement(React.Fragment,null,React.createElement("div",{className:"transition",style:(0,v.convertLineStyleData)("top:"+o.totalHeight+"px;")},React.createElement("div",{"data-type":"goods",className:"isRelative"},React.createElement("span",{className:"goods"==s?"active":""},"商品"),React.createElement("form",{className:"getFormId"},React.createElement("button",{type:"button","data-id":c&&c.id,"data-orderid":c&&c.order_id,"data-bargainid":c&&c.bargain_id,onClick:this.formSubmit_collect,className:"invisibleclass"}))),React.createElement("div",{"data-type":"group",className:"isRelative"},React.createElement("span",{className:"group"==s?"active":""},"拼团"),React.createElement("form",{className:"getFormId"},React.createElement("button",{type:"button","data-id":c&&c.id,"data-orderid":c&&c.order_id,"data-bargainid":c&&c.bargain_id,className:"invisibleclass",onClick:this.formSubmit_collect}))),!l&&React.createElement("div",{"data-type":"comment",className:"isRelative"},React.createElement("span",{className:"comment"==s?"active":""},"评论"),React.createElement("form",{className:"getFormId"},React.createElement("button",{type:"button",className:"invisibleclass","data-id":c&&c.id,"data-orderid":c&&c.order_id,"data-bargainid":c&&c.bargain_id,onClick:this.formSubmit_collect}))),React.createElement("div",{"data-type":"detail",className:"isRelative"},React.createElement("span",{className:"detail"==s?"active":""},"详情"),React.createElement("form",{className:"getFormId"},React.createElement("button",{type:"button",className:"invisibleclass","data-id":c&&c.id,"data-orderid":c&&c.order_id,"data-bargainid":c&&c.bargain_id,onClick:this.formSubmit_collect})))),React.createElement("div",{className:"goods-main"},React.createElement("div",{className:"collage-goodsDetail"},React.createElement("div",{className:"collage-section  goods-message",id:"goods"},"image"==d&&React.createElement("div",{className:"image-carousel-container"},c&&c.img_urls?React.createElement("div",{className:"slick-carousel-container"},React.createElement(i.default,{dots:!1,infinite:!0,autoplay:!0,autoplayInterval:5e3,afterChange:this.carouselIndex},c.img_urls.map(function(e,t){return React.createElement("div",{key:t},React.createElement("img",{"data-src":e,"data-srcarr":c.img_urls,onClick:a.clickPlusImages,className:"slide-image",src:e,onLoad:function(){window.dispatchEvent(new Event("resize"))}}))}))):React.createElement("div",{className:"goods-cover-container"},React.createElement("img",{"data-src":c&&c.cover,onClick:this.clickPlusImages,src:c&&c.cover})),c&&c.video_url&&React.createElement("div",{className:"image-video-menu"},React.createElement("span",{className:"image"==d?"active":"","data-type":"image",onClick:this.changeImageOrVideo},"图片"),React.createElement("span",{className:"video"==d?"active":"","data-type":"video",onClick:this.changeImageOrVideo},"视频"))),c&&c.video_url&&"video"==d&&React.createElement("div",{className:"video-carousel-container"},React.createElement("video",{src:c.video_url,id:"carousel-video",hidden:!u},c.video_url&&React.createElement(CoverView,{className:"image-video-menu"},React.createElement(CoverView,{className:"image"==d?"active":"","data-type":"image",onClick:this.changeImageOrVideo},"图片"),React.createElement(CoverView,{className:"video"==d?"active":"","data-type":"video",onClick:this.changeImageOrVideo},"视频"))),React.createElement("div",{className:"videoele-cover-view",hidden:u},React.createElement("div",{className:"videoele-poster-wrap"},React.createElement("img",{className:"videoele-poster",src:c.video_img,mode:"scaleToFill"})),React.createElement("div",{className:"videoele-play-icon",onClick:this.startPlayVideo},React.createElement("img",{className:"videoele-play-image",src:"http://cdn.jisuapp.cn/static/webapp/images/play.png",mode:"scaleToFill"})),React.createElement("div",{className:"image-video-menu"},React.createElement("span",{className:"image"==d?"active":"","data-type":"image",onClick:this.changeImageOrVideo},"图片"),React.createElement("span",{className:"video"==d?"active":"","data-type":"video",onClick:this.changeImageOrVideo},"视频")))),React.createElement("div",{className:"collage-price-info "+(1==m?"ready":"start")},React.createElement("div",{className:"content-wrap"},React.createElement("div",{className:"min-price"},React.createElement("span",null,"¥"),React.createElement("span",null,p&&p.group_buy_price)),React.createElement("div",{className:"origin-price"},"¥"+(c&&(c.virtual_price||c.goods_price))),React.createElement("div",{className:"remaining-time"},!c||0!=c.status&&1!=c.status&&2!=c.status?c&&3==c.status&&"-1"!=f.end_date&&React.createElement(React.Fragment,null,React.createElement("div",null,"距拼购结束还剩 :"),React.createElement("div",null,"00"!=c.downCount.days&&"0"!=c.downCount.days&&React.createElement(React.Fragment,null,React.createElement("span",null,c.downCount.days),React.createElement("span",null,"天")),React.createElement("span",null,c.downCount.hours),React.createElement("span",null,":"),React.createElement("span",{style:(0,v.convertLineStyleData)("width:48rpx;")},c.downCount.minutes),React.createElement("span",null,":"),React.createElement("span",{style:(0,v.convertLineStyleData)("width:48rpx;")},c.downCount.seconds))):React.createElement(React.Fragment,null,React.createElement("div",null,"距拼购开始还剩 :"),React.createElement("div",null,"00"!=c.downCount.days&&"0"!=c.downCount.days&&React.createElement(React.Fragment,null,React.createElement("span",null,c.downCount.days),React.createElement("span",null,"天")),React.createElement("span",null,c.downCount.hours),React.createElement("span",null,":"),React.createElement("span",{style:(0,v.convertLineStyleData)("width:48rpx;")},c.downCount.minutes),React.createElement("span",null,":"),React.createElement("span",{style:(0,v.convertLineStyleData)("width:48rpx;")},c.downCount.seconds))))),React.createElement("img",{src:"http://cdn.jisuapp.cn//zhichi_frontend/static/webapp/images/group/detail-mask.png"})),React.createElement("div",{className:"collage-title-info"},React.createElement("div",{className:"title-info"},React.createElement("div",{className:"goods-title"},React.createElement("div",{className:"title"},React.createElement("div",{className:"classify-type"},React.createElement("div",null,React.createElement("span",{className:"ico-moon icon-number-people"})),React.createElement("span",null,f&&0==f.type?p.num_of_people.length>1?"多人团":p.num_of_people[0]+"人团":f&&1==f.type?"新人团":f&&2==f.type?"阶梯团":f&&3==f.type?"帮帮团":"抽奖团")),c&&c.title),React.createElement("div",{className:"share-jbtn isRelative",onClick:this.showQRCodeComponent},React.createElement("span",{className:"ico-moon icon-news-sharefriends"}),React.createElement("form",{className:"getFormId"},React.createElement("button",{type:"button",className:"invisibleclass","data-id":c&&c.id,"data-orderid":c&&c.order_id,"data-bargainid":c&&c.bargain_id,onClick:this.formSubmit_collect})))),f&&4!=f.type&&React.createElement("div",null,f&&f.group_buy_discount_tips))),f&&f.successful_team_leader.length>0&&React.createElement("div",{className:"successful_team_leader"},React.createElement("div",null,f.successful_team_leader.map(function(e,t){return React.createElement("img",{src:e,key:t})})),React.createElement("div",null,"拼团成功啦"))),React.createElement("div",{className:"collage-section"},React.createElement("div",{className:"express-info"},"运费 : "+(c&&c.express_fee)),React.createElement("div",{className:"specification-info isRelative",onClick:this.showGroupBuy},React.createElement("div",null,"选择产品规格"),React.createElement("div",null,React.createElement("span",{className:"ico-moon icon-rightarrow"})),React.createElement("form",{className:"getFormId"},React.createElement("button",{type:"button",className:"invisibleclass","data-id":c&&c.id,"data-orderid":c&&c.order_id,"data-bargainid":c&&c.bargain_id,onClick:this.formSubmit_collect}))),React.createElement("div",{className:"goods-other-info"},React.createElement("label",null,"取货方式"),React.createElement("div",{className:"address-pick-up"},c&&c.pick_up_type.map(function(e,t){return React.createElement("div",{key:e},React.createElement("span",{className:"ico-moon icon-goods-support-delivery suporrt"}),React.createElement("span",null,1==e?"快递":2==e?"同城":"自提"))})))),f&&4==f.type&&3==c.status&&React.createElement("div",{className:"collage-section progress-message"},React.createElement("div",{className:"progress"},React.createElement("div",{className:"success",style:(0,v.convertLineStyleData)("width:"+g+"%;")})),React.createElement("div",{className:"tip"},React.createElement("div",null,React.createElement("span",null,f.current_user_count),"人已参与"),React.createElement("div",null,"满"+f.max_user_num+"人开奖"))),React.createElement("div",{className:"collage-section",id:"group"},0==h.count||f&&3==f.type||f&&4==f.type?React.createElement(React.Fragment,null,React.createElement("div",{className:"collage-play-title isRelative",onClick:this.goToPlaylaws},React.createElement("div",null,"拼团玩法"),React.createElement("div",null,React.createElement("span",{className:"ico-moon icon-rightarrow"})),React.createElement("form",{className:"getFormId"},React.createElement("button",{type:"button",className:"invisibleclass","data-id":c&&c.id,"data-orderid":c&&c.order_id,"data-bargainid":c&&c.bargain_id,onClick:this.formSubmit_collect}))),React.createElement("div",{className:"collage-play-category"},0==f.type?React.createElement(React.Fragment,null,React.createElement("div",null,React.createElement("span",{className:"ico-moon icon-regiment-leader icon-step"}),React.createElement("div",null,"团长开团")),React.createElement("div",null,React.createElement("span",{className:"ico-moon icon-fillet-rectangle"})),React.createElement("div",null,React.createElement("span",{className:"ico-moon icon-invite-friends  icon-step"}),React.createElement("div",null,"邀请好友")),React.createElement("div",null,React.createElement("span",{className:"ico-moon icon-fillet-rectangle"})),React.createElement("div",null,React.createElement("span",{className:"ico-moon icon-group-success  icon-step"}),React.createElement("div",null,"拼团成功")),React.createElement("div",null,React.createElement("span",{className:"ico-moon icon-fillet-rectangle"})),React.createElement("div",null,React.createElement("span",{className:"ico-moon icon-wait-shipment  icon-step"}),React.createElement("div",null,"等待发货"))):1==f.type?React.createElement(React.Fragment,null,React.createElement("div",null,React.createElement("span",{className:"ico-moon icon-regiment-leader icon-step"}),React.createElement("div",null,"团长开团")),React.createElement("div",null,React.createElement("span",{className:"ico-moon icon-fillet-rectangle"})),React.createElement("div",null,React.createElement("span",{className:"ico-moon icon-invite-news icon-step"}),React.createElement("div",null,"邀请新人")),React.createElement("div",null,React.createElement("span",{className:"ico-moon icon-fillet-rectangle"})),React.createElement("div",null,React.createElement("span",{className:"ico-moon icon-group-success icon-step"}),React.createElement("div",null,"拼团成功")),React.createElement("div",null,React.createElement("span",{className:"ico-moon icon-fillet-rectangle"})),React.createElement("div",null,React.createElement("span",{className:"ico-moon icon-wait-shipment icon-step"}),React.createElement("div",null,"等待发货"))):2==f.type?React.createElement(React.Fragment,null,React.createElement("div",null,React.createElement("span",{className:"ico-moon icon-regiment-leader icon-step"}),React.createElement("div",null,"团长开团")),React.createElement("div",null,React.createElement("span",{className:"ico-moon icon-fillet-rectangle"})),React.createElement("div",null,React.createElement("span",{className:"ico-moon icon-invite-friends icon-step"}),React.createElement("div",null,"邀请好友")),React.createElement("div",null,React.createElement("span",{className:"ico-moon icon-fillet-rectangle"})),React.createElement("div",null,React.createElement("span",{className:"ico-moon icon-peoplemore-pricelow icon-step"}),React.createElement("div",null,"人数多价格低")),React.createElement("div",null,React.createElement("span",{className:"ico-moon icon-fillet-rectangle"})),React.createElement("div",null,React.createElement("span",{className:"ico-moon icon-wait-shipment icon-step"}),React.createElement("div",null,"等待发货"))):3==f.type?React.createElement(React.Fragment,null,React.createElement("div",null,React.createElement("span",{className:"ico-moon icon-regiment-leader icon-step"}),React.createElement("div",null,"团长开团")),React.createElement("div",null,React.createElement("span",{className:"ico-moon icon-fillet-rectangle"})),React.createElement("div",null,React.createElement("span",{className:"ico-moon icon-friends-pay icon-step"}),React.createElement("div",null,"好友代付")),React.createElement("div",null,React.createElement("span",{className:"ico-moon icon-fillet-rectangle"})),React.createElement("div",null,React.createElement("span",{className:"ico-moon icon-reach-num icon-step"}),React.createElement("div",null,"达到人数")),React.createElement("div",null,React.createElement("span",{className:"ico-moon icon-fillet-rectangle"})),React.createElement("div",null,React.createElement("span",{className:"ico-moon  icon-wait-shipment icon-step"}),React.createElement("div",null,"团长单独发货"))):4==f.type&&React.createElement(React.Fragment,null,React.createElement("div",null,React.createElement("span",{className:"ico-moon  icon-regiment-leader icon-step"}),React.createElement("div",null,"团长开团")),React.createElement("div",null,React.createElement("span",{className:"ico-moon icon-fillet-rectangle"})),React.createElement("div",null,React.createElement("span",{className:"ico-moon icon-invite-friends icon-step"}),React.createElement("div",null,"邀请好友")),React.createElement("div",null,React.createElement("span",{className:"ico-moon icon-fillet-rectangle"})),React.createElement("div",null,React.createElement("span",{className:"ico-moon icon-reach-num icon-step"}),React.createElement("div",null,"达到人数")),React.createElement("div",null,React.createElement("span",{className:"ico-moon icon-fillet-rectangle"})),React.createElement("div",null,React.createElement("span",{className:"ico-moon icon-draw-lucky icon-step"}),React.createElement("div",null,"抽取幸运儿"))))):React.createElement(React.Fragment,null,React.createElement("div",{className:"collage-section list-message"},React.createElement("div",{className:"title"},React.createElement("span",null,h.count+" 人正在火拼中"),React.createElement("div",{className:"collage-play-title isRelative",onClick:this.goToPlaylaws},React.createElement("div",null,"拼团玩法"),React.createElement("div",null,React.createElement("span",{className:"ico-moon icon-rightarrow"})),React.createElement("form",{className:"getFormId"},React.createElement("button",{type:"button",className:"invisibleclass","data-id":c&&c.id,"data-orderid":c&&c.order_id,"data-bargainid":c&&c.bargain_id,onClick:this.formSubmit_collect})))),React.createElement("div",{className:"collage-list"},h.team_list.map(function(e,t){return React.createElement(React.Fragment,{key:t},2==e.current_status&&React.createElement("div",{className:"collage-item isRelative","data-num":e.max_user_num,"data-token":e.team_token,"data-joined":e.joined,"data-type":e.activity_type,onClick:a.participateGroup},React.createElement("div",null,React.createElement("div",{className:"image-wrap"},React.createElement("div",null,React.createElement("img",{src:e.leader_info.cover_thumb})),React.createElement("div",null,React.createElement("img",{src:"http://cdn.jisuapp.cn//zhichi_frontend/static/webapp/images/group/missing-head.png"}))),React.createElement("div",{className:"content-wrap"},React.createElement("div",{className:"name"},e.leader_info.nickname),React.createElement("div",{className:"status"},React.createElement("div",{className:"condition"},"2"==e.activity_type?React.createElement(React.Fragment,null,"已拼",React.createElement("span",null,e.current_user_count),"人"):React.createElement(React.Fragment,null,"还差",React.createElement("span",null,e.need_user_count),"人")),React.createElement("div",{className:"remain"},"距结束仅剩"+("00"!=e.downCount.days&&"0"!=e.downCount.days?e.downCount.days:"")+e.downCount.hours+":"+e.downCount.minutes+":"+e.downCount.seconds)))),React.createElement("div",{className:"btn-wrap"},React.createElement("button",{type:"button"},"立即参团")),React.createElement("form",{className:"getFormId"},React.createElement("button",{type:"button",className:"invisibleclass","data-id":c&&c.id,"data-orderid":c&&c.order_id,"data-bargainid":c&&c.bargain_id,onClick:a.formSubmit_collect}))))})),0!=h.is_more&&React.createElement("div",{className:"show-more",onClick:this.showMoreTeams},"查看更多",React.createElement("span",{className:"ico-moon icon-downarrow"}))))),React.createElement("div",{className:"collage-section shop-message"},React.createElement("div",{className:"collage-shop-info"},React.createElement("div",{className:"image-wrap"},React.createElement("img",{src:f&&f.app_cover})),React.createElement("div",{className:"shop-info"},React.createElement("div",null,f&&f.app_name),React.createElement("div",{className:"sales-num"},"在售",React.createElement("span",{style:(0,v.convertLineStyleData)("color:#d2d2d2;margin:0 10rpx;")},"|"),React.createElement("span",null,f&&f.total_goods),"件商品"))),React.createElement("div",{className:"collage-shop-into isRelative",onClick:this.goToHomepage},"进入店铺",React.createElement("form",{className:"getFormId"},React.createElement("button",{type:"button",className:"invisibleclass","data-id":c&&c.id,"data-orderid":c&&c.order_id,"data-bargainid":c&&c.bargain_id,onClick:this.formSubmit_collect})))),React.createElement("div",{className:"collage-section  comment-message",hidden:l,id:"comment"},React.createElement("div",{className:"comment-title"},React.createElement("div",null,"晒单评价 ("+(_&&_[0]||0)+")"),React.createElement("div",{onClick:this.goToCommentPage},"查看全部 >")),React.createElement("div",{className:"block-item"},y&&React.createElement("div",null,React.createElement("div",{className:"comment-item"},React.createElement("div",null,React.createElement("img",{className:"comment-user-photo",src:y.buyer_headimgurl||E}),React.createElement("div",null,React.createElement("span",{className:"commentPersonName"},y.buyer_nickname),React.createElement("div",{className:"comment-date"},y.add_time))),React.createElement("div",{className:"comment-content"},y.assess_info.content),!!+y.assess_info.has_img&&React.createElement("div",{className:"comPage-comment-pics"},y.assess_info.img_arr.map(function(e,t){return React.createElement("img",{src:e,key:t,"data-src":e,"data-srcarr":y.assess_info.img_arr,onClick:a.clickPlusImages})})))))),React.createElement("div",{className:"goods-detail-section",id:"detail"},React.createElement("div",{className:"goodsDetail-title"},React.createElement("div",null,"商品详情")),React.createElement("div",{className:"goods-details rich-text",dangerouslySetInnerHTML:{__html:f&&f.goods_info.description}}))),React.createElement("div",{className:"collage-bottom"},React.createElement("div",{className:"anthor-btn"},!N&&React.createElement("div",{className:"form-contain goods-opt-item flex-sub-box-3"},React.createElement("form",null,React.createElement("button",{type:"button",onClick:f&&1==f.is_favorite?this.deleteFavoriteGoods:this.addFavoriteGoods},React.createElement("div",{className:"bottom-border-right"},React.createElement("span",{style:(0,v.convertLineStyleData)(f&&1==f.is_favorite?"color:"+b.theme:""),className:"ico-moon icon-"+(f&&1==f.is_favorite?"collect-solid":"goods-detail-favorites")}),React.createElement("div",null,"收藏"))))),React.createElement("div",{className:"goods-opt-item flex-sub-box-"+(N?"2":"3")},React.createElement("div",{className:"ico-moon icon-service2",style:(0,v.convertLineStyleData)("font-size:36rpx;")}),React.createElement("div",null,"客服"))),React.createElement("div",{className:"group-buy-btn"},!(f&&4==f.type&&0==f.can_buy_alone)&&React.createElement("div",{className:"separate-purchase isRelative"},React.createElement("div",{onClick:this.singleBuy},React.createElement("div",null,"¥"+(c&&c.goods_price)),React.createElement("span",null,"单独购买"),React.createElement("form",{className:"getFormId"},React.createElement("button",{type:"button",className:"invisibleclass","data-id":c&&c.id,"data-orderid":c&&c.order_id,"data-bargainid":c&&c.bargain_id,onClick:this.formSubmit_collect})))),c&&0==c.status?React.createElement("div",{className:"soon-draw isRelative",onClick:this.soonOpen},React.createElement("div",null,React.createElement("div",null,"¥"+p.group_buy_price),React.createElement("span",null,"即将开团")),React.createElement("form",{className:"getFormId"},React.createElement("button",{type:"button",className:"invisibleclass","data-id":c.id,"data-orderid":c.order_id,"data-bargainid":c.bargain_id,onClick:this.formSubmit_collect}))):c&&1==c.status?React.createElement("div",{className:"reminded isRelative",onClick:this.remainMe},React.createElement("div",null,React.createElement("div",null,"¥"+p.group_buy_price),React.createElement("span",null,"提醒我")),React.createElement("form",{className:"getFormId"},React.createElement("button",{type:"button",className:"invisibleclass","data-id":c.id,"data-orderid":c.order_id,"data-bargainid":c.bargain_id,onClick:this.formSubmit_collect}))):c&&2==c.status?React.createElement("div",{className:"reminded isRelative"},React.createElement("div",null,React.createElement("div",null,"¥"+p.group_buy_price),React.createElement("span",null,"已提醒")),React.createElement("form",{className:"getFormId"},React.createElement("button",{type:"button",className:"invisibleclass","data-id":c.id,"data-orderid":c.order_id,"data-bargainid":c.bargain_id,onClick:this.formSubmit_collect}))):c&&(3==c.status||-1!=c.end_date)&&React.createElement("div",{className:"group-buying isRelative",onClick:this.showGroupBuy},React.createElement("div",null,React.createElement("div",null,"¥"+p.group_buy_price),React.createElement("span",null,4==f.type?"参与抽奖":"拼团购")),React.createElement("form",{className:"getFormId"},React.createElement("button",{type:"button",className:"invisibleclass","data-id":c.id,"data-orderid":c.order_id,"data-bargainid":c.bargain_id,onClick:this.formSubmit_collect}))))),React.createElement("div",{id:"payDialog",className:"page-dialog-wrap",hidden:R},React.createElement("div",{className:"page-bottom-dialog"},React.createElement("div",{className:"pay-close-dialog page-dialog-close",onClick:this.hiddeAddToShoppingCart},React.createElement("span",{className:"ico-moon icon-closes"}),React.createElement("form",{className:"getFormId"},React.createElement("button",{type:"button",className:"invisibleclass","data-id":c&&c.id,"data-orderid":c&&c.order_id,"data-bargainid":c&&c.bargain_id,onClick:this.formSubmit_collect}))),React.createElement("div",{className:"dialog-goods-header"},React.createElement("div",null,React.createElement("div",{className:"thumb"},React.createElement("div",{className:"thumb-wrap"},React.createElement("img",{"data-src":k.imgurl||c&&c.cover,onClick:this.clickPlusImages,className:"pay-goods-cover",src:k.imgurl||c&&c.cover}))),React.createElement("div",{className:"pay-goods-baseinfo"},React.createElement("div",{className:"pay-goods-price"},React.createElement("div",{className:"pay-current-price"},"0.00"!=k.price&&React.createElement("div",{style:(0,v.convertLineStyleData)("font-size:28rpx;")},"¥"+k.price),w&&0!=k.virtualPrice&&React.createElement("span",{className:"virtualPrice"},"¥"+k.virtualPrice))),React.createElement("div",{className:"pay-goods-stock"},"库存 "+k.stock),k.models_text&&React.createElement("div",{className:"pay-checked-text clearfix"},"已选 :"+k.models_text)))),React.createElement("div",{className:"payDialog-content"},React.createElement("div",{className:"pay-goods-models",hidden:!(c&&c.model_items.length)},c&&c.model.map(function(e,t){return React.createElement("div",{key:t},React.createElement("span",{className:"model-title"},e.name),React.createElement("label",{className:"pills-list"},e.subModelName.map(function(n,o){return React.createElement("label",{key:o,"data-model-index":t,"data-submodel-index":o,className:"subModel "+(k.models[t]==e.subModelId[o]?"select":""),"data-submodel-id":e.subModelId[o],onClick:a.selectSubModel},n)})))})),React.createElement("div",{className:"payDialog-buy-num",style:(0,v.convertLineStyleData)("padding-left:10px;padding-right:10px;")},React.createElement("div",{className:"clearfix"},React.createElement("span",null,"购买数量 :"),React.createElement("div",{className:"pull-right"},React.createElement("div",{className:"quantity pull-left"},React.createElement("label",{className:"minus "+(k.buyCount<=1?"disabled":"")}),React.createElement("input",(e={className:"pay-buy-count",type:"number"},(0,r.default)(e,"className","txt"),(0,r.default)(e,"value",k.buyCount),(0,r.default)(e,"onChange",this.inputBuyCount),e)),React.createElement("label",{className:"plus "+(k.buyCount>=k.stock||x&&k.buyCount>=c.seckill_buy_limit?"disabled":"")}),React.createElement("div",{className:"response-area response-area-minus",onClick:this.clickMinusButton}),React.createElement("div",{className:"response-area response-area-plus",onClick:this.clickPlusButton})))))),React.createElement("div",{className:"dialog-bottom noGroupSureMask"},React.createElement("div",null,React.createElement("div",{className:"pay-add-to-shoppingcart isRelative",onClick:this.sureAddToShoppingCart},"加入购物车",React.createElement("form",{className:"getFormId"},React.createElement("button",{type:"button",className:"invisibleclass","data-id":c&&c.id,"data-orderid":c&&c.order_id,"data-bargainid":c&&c.bargain_id,onClick:this.formSubmit_collect})))),React.createElement("div",null,React.createElement("div",{className:"btn-orange pay-buy-next isRelative",onClick:this.buyDirectlyNextStep},"立即购买",React.createElement("form",{className:"getFormId"},React.createElement("button",{type:"button",className:"invisibleclass","data-id":c&&c.id,"data-orderid":c&&c.order_id,"data-bargainid":c&&c.bargain_id,onClick:this.formSubmit_collect}))))))),React.createElement("div",{id:"groupPayDialog",className:"page-dialog-wrap",hidden:C,onClick:this.hideMask},React.createElement("div",{className:"page-bottom-dialog"},React.createElement("div",{className:"pay-close-dialog page-dialog-close",onClick:this.hideGroupBuyCart},React.createElement("span",{className:"ico-moon icon-closes"}),React.createElement("form",{className:"getFormId"},React.createElement("button",{type:"button",className:"invisibleclass","data-id":c&&c.id,"data-orderid":c&&c.order_id,"data-bargainid":c&&c.bargain_id,onClick:this.formSubmit_collect}))),React.createElement("div",{className:"dialog-goods-header"},React.createElement("div",null,React.createElement("div",{className:"thumb"},React.createElement("div",{className:"thumb-wrap"},React.createElement("img",{"data-src":k.imgurl||c&&c.cover,onClick:this.clickPlusImages,className:"pay-goods-cover",src:k.imgurl||c&&c.cover}))),React.createElement("div",{className:"pay-goods-baseinfo"},React.createElement("div",{className:"pay-goods-price"},React.createElement("div",{className:"pay-current-price groupMaskPrice"},f&&4!=f.type?React.createElement(React.Fragment,null,0==f.is_leader||D?React.createElement(React.Fragment,null,React.createElement("div",{className:"type"},React.createElement("span",{className:"ico-moon icon-number-people"}),"团员价"),React.createElement("div",{style:(0,v.convertLineStyleData)("width:calc(100% - 104rpx);")},React.createElement("div",{className:"member_price"},"¥"+k.member_price),React.createElement("div",{className:"price"},"¥"+(k.virtualPrice||k.price)))):React.createElement(React.Fragment,null,React.createElement("div",{className:"type"},React.createElement("span",{className:"ico-moon icon-leader-logo"}),"团长价"),React.createElement("div",{style:(0,v.convertLineStyleData)("width:calc(100% - 104rpx);")},React.createElement("div",{className:"leader_price"},"¥"+k.leader_price),React.createElement("div",{className:"price"},"¥"+(k.virtualPrice||k.price))))):React.createElement(React.Fragment,null,React.createElement("div",{className:"type"},React.createElement("span",{className:"ico-moon icon-number-people"}),"抽奖团"),React.createElement("div",{className:"member_price"},"¥"+(p&&p.group_buy_price)),React.createElement("div",{className:"price"},"¥"+(k.virtualPrice||c&&c.price))))),React.createElement("div",{className:"pay-goods-stock"},"库存 "+k.stock),k.models_text&&React.createElement("div",{className:"pay-checked-text clearfix"},"已选 :"+k.models_text))),React.createElement("div",{className:"tip"},!f||0!=f.type&&1!=f.type&&3!=f.type?f&&2==f.type?React.createElement(React.Fragment,null,React.createElement("div",null,"TIPS :",f.current_user_count?React.createElement(React.Fragment,null,"已拼"+f.current_user_count+"人，人数越多，价格越低"):React.createElement(React.Fragment,null,"人数越多，价格越低")),React.createElement("div",{className:"showMoreTips",onClick:function(e){a.showMoreTips(e),e.stopPropagation()}},"查看更多",S?React.createElement("span",{className:"ico-moon icon-downarrow"}):React.createElement("span",{className:"ico-moon icon-uparrow"}),React.createElement("div",{className:"mask-tips",hidden:S},I.map(function(e,t){return React.createElement("div",{key:t},React.createElement("span",null,"满"+e.num_of_people+"人"),React.createElement("span",null,"¥"+(D?e.member_price:e.leader_price)))})))):f&&4==f.type&&React.createElement(React.Fragment,null,React.createElement("div",null,"TIPS : 满"+f.least_cost+"元开奖")):React.createElement(React.Fragment,null,React.createElement("div",null,"成团人数: "+k.groupNum+"人团")))),React.createElement("div",{className:"payDialog-content"},f&&0==f.type&&!D&&React.createElement("div",{className:"pay-goods-models"},React.createElement("div",{className:"group-info group-buy-num"},React.createElement("div",{className:"model-title"},"成团人数"),React.createElement("label",{className:"pills-list"},p.num_of_people.map(function(e,t){return React.createElement("label",{key:t,className:"subModel "+(k.groupNum==e?"select":"")+" isRelative","data-num":e,onClick:a.selectGroupNum},e+"人团",React.createElement("form",{className:"getFormId"},React.createElement("button",{type:"button",className:"invisibleclass","data-id":c&&c.id,"data-orderid":c&&c.order_id,"data-bargainid":c&&c.bargain_id,onClick:a.formSubmit_collect})))})))),React.createElement("div",{className:"pay-goods-models",hidden:!(c&&c.model_items.length)},c&&c.model.map(function(e,t){return React.createElement("div",{key:t},React.createElement("span",{className:"model-title"},e.name),React.createElement("label",{className:"pills-list"},e.subModelName.map(function(n,o){return React.createElement("label",{key:o,"data-model-index":t,"data-submodel-index":o,className:"subModel "+(k.models[t]==e.subModelId[o]?"select":""),"data-submodel-id":e.subModelId[o],onClick:a.selectSubModel},n)})))})),React.createElement("div",{className:"payDialog-buy-num"},React.createElement("div",{className:"clearfix"},React.createElement("span",null,"购买数量"),React.createElement("div",{className:"pull-right"},React.createElement("div",{className:"quantity pull-left"},React.createElement("label",{className:"minus "+(k.buyCount<=1?"disabled":"")}),React.createElement("input",(t={className:"pay-buy-count",type:"number"},(0,r.default)(t,"className","txt"),(0,r.default)(t,"value",k.buyCount),(0,r.default)(t,"onChange",this.inputBuyCount),t)),React.createElement("label",{className:"plus "+(k.buyCount>=k.stock||x&&k.buyCount>=c.seckill_buy_limit?"disabled":"")}),React.createElement("div",{className:"response-area response-area-minus",onClick:this.clickMinusButton},React.createElement("form",{className:"getFormId"},React.createElement("button",{type:"button",className:"invisibleclass","data-id":c&&c.id,"data-orderid":c&&c.order_id,"data-bargainid":c&&c.bargain_id,onClick:this.formSubmit_collect}))),React.createElement("div",{className:"response-area response-area-plus",onClick:this.clickPlusButton,"data-type":"group"},React.createElement("form",{className:"getFormId"},React.createElement("button",{type:"button",className:"invisibleclass","data-id":c&&c.id,"data-orderid":c&&c.order_id,"data-bargainid":c&&c.bargain_id,onClick:this.formSubmit_collect})))))))),React.createElement("div",{className:"dialog-bottom groupSureMask"},React.createElement("div",null,f&&(0==f.is_leader||D)?React.createElement("div",{className:"pay-add-to-shoppingcart isRelative","data-isleader":M.is_leader,onClick:this.sureJoinGroup},"马上参团",React.createElement("form",{className:"getFormId"},React.createElement("button",{type:"button",className:"invisibleclass","data-id":c&&c.id,"data-orderid":c&&c.order_id,"data-bargainid":c&&c.bargain_id,onClick:this.formSubmit_collect}))):React.createElement("div",{className:"pay-add-to-shoppingcart isRelative","data-isleader":f&&f.is_leader,onClick:this.sureJoinGroup},f&&4==f.type?"参与抽奖":"马上开团",React.createElement("form",{className:"getFormId"},React.createElement("button",{type:"button",className:"invisibleclass","data-id":c&&c.id,"data-orderid":c&&c.order_id,"data-bargainid":c&&c.bargain_id,onClick:this.formSubmit_collect}))))))))))}}]),t}(b.default);t.default=N},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(0),i=n(o),s=a(3),r=n(s),c=a(1),l=n(c),d=a(2),u=n(d),m=a(5),p=a(6),f=a(7),g=n(f);a(517);var h=function(e){function t(){var e,a,n,o;(0,i.default)(this,t);for(var s=arguments.length,r=Array(s),c=0;c<s;c++)r[c]=arguments[c];return a=n=(0,l.default)(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r))),n.state={activityType:0,autoRefund:"",refundMode:""},n.getPlayMessage=function(){},n.onPullDownRefresh=function(){},n.onReachBottom=function(){},n.onShareAppMessage=function(){},o=a,(0,l.default)(n,o)}return(0,u.default)(t,e),(0,r.default)(t,[{key:"componentWillMount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,p.getCurrentPageQueryParams)(),t=this,a="";switch(t.getPlayMessage(),t.setData({activityType:e.activityType,autoRefund:e.autoRefund,refundMode:e.refundMode}),e.activityType){case"0":a="";break;case"1":a="新人团";break;case"2":a="阶梯团";break;case"3":a="帮帮团";break;case"4":a="抽奖团"}m.appMethod.setNavigationBarTitle({title:a+"拼团须知"})}},{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this.state,t=(e.showGetUserInfo,e.pageQRCodeData,e.activityType),a=e.autoRefund,n=e.refundMode;return React.createElement("div",{className:"official-page gp-play-laws"},React.createElement(React.Fragment,null,React.createElement("div",{className:"collage-playlaws"},React.createElement("div",{className:"collage-section collage-play-category"},4!=t?React.createElement(React.Fragment,null,React.createElement("div",{className:"collage-play-sort"},React.createElement("div",{className:"serial-number"},"1"),React.createElement("div",{className:"serial-intro"},React.createElement("div",{className:"title"},"团长开团"),React.createElement("div",null,React.createElement("img",{src:"http://cdn.jisuapp.cn//zhichi_frontend/static/webapp/images/group/start-immediately(ordinary).png",style:(0,p.convertLineStyleData)("height:308rpx")})))),React.createElement("div",{className:"collage-play-sort"},React.createElement("div",{className:"serial-number"},"2"),React.createElement("div",{className:"serial-intro"},React.createElement("div",{className:"title"},"选择成团人数"),React.createElement("div",null,React.createElement("img",{src:"http://cdn.jisuapp.cn//zhichi_frontend/static/webapp/images/group/select-num(ordinary).png",style:(0,p.convertLineStyleData)("height:357rpx;")})))),React.createElement("div",{className:"collage-play-sort"},React.createElement("div",{className:"serial-number"},"3"),React.createElement("div",{className:"serial-intro"},React.createElement("div",{className:"title"},"邀请好友参团"),React.createElement("div",null,React.createElement("img",{src:"http://cdn.jisuapp.cn//zhichi_frontend/static/webapp/images/group/invite-friends(ordinary).png"})))),React.createElement("div",{className:"collage-play-sort"},React.createElement("div",{className:"serial-number"},"4"),React.createElement("div",{className:"serial-intro"},React.createElement("div",{className:"title"},"在时限内达到成团人数，拼团成功"),React.createElement("div",null,React.createElement("img",{src:"http://cdn.jisuapp.cn//zhichi_frontend/static/webapp/images/group/groupSuccess(ordinary).png"}))))):React.createElement(React.Fragment,null,React.createElement("div",{className:"collage-play-sort"},React.createElement("div",{className:"serial-number"},"1"),React.createElement("div",{className:"serial-intro"},React.createElement("div",{className:"title"},"团长开团"),React.createElement("div",null,React.createElement("img",{src:"http://cdn.jisuapp.cn//zhichi_frontend/static/webapp/images/group/join-draw(draw).png",style:(0,p.convertLineStyleData)("height:308rpx;")})))),React.createElement("div",{className:"collage-play-sort"},React.createElement("div",{className:"serial-number"},"2"),React.createElement("div",{className:"serial-intro"},React.createElement("div",{className:"title"},"活动结束前，邀请好友参团"),React.createElement("div",null,React.createElement("img",{src:"http://cdn.jisuapp.cn//zhichi_frontend/static/webapp/images/group/friends-join(draw).png",style:(0,p.convertLineStyleData)("height:360rpx;")})))),React.createElement("div",{className:"collage-play-sort"},React.createElement("div",{className:"serial-number"},"3"),React.createElement("div",{className:"serial-intro"},React.createElement("div",{className:"title"},"达到抽奖人数，自动开团"),React.createElement("div",null,React.createElement("img",{src:"http://cdn.jisuapp.cn//zhichi_frontend/static/webapp/images/group/automatic-lottery(draw).png"})))))),React.createElement("div",{className:"collage-section collage-play-intro"},React.createElement("div",{className:"title"},"详细说明"),React.createElement("div",{className:"collage-intro-step"},0==t?React.createElement(React.Fragment,null,React.createElement("div",null,"1.活动期间，用户可以在拼团商品详情下单发起拼团。"),React.createElement("div",null,"2.用户支付成功，才算成功开团或参团，创建订单未支付不算有效参与拼团玩法。"),React.createElement("div",null,"3.先付款的成员先加入团，每位用户在同一团内可购买多件，但只占1个拼团人数，且不可重复参团。"),React.createElement("div",null,1==a?React.createElement(React.Fragment,null,"4.在规定时间内达到成团人数，则拼团成功，商家分别发货；未能在规定时间内达到成团人数，则拼团失败，系统自动退款。"):React.createElement(React.Fragment,null,"4.在规定时间内达到最低成团人数，则拼团成功，商家分别发货；未能在规定时间内达到成团人数，则拼团失败，联系商家申请退款。"))):1==t&&React.createElement(React.Fragment,null,React.createElement("div",null,"1.活动期间，用户可以在拼团商品详情下单发起拼团。"),React.createElement("div",null,"2.用户支付成功，才算成功开团或参团，创建订单未支付不算有效参与拼团玩法。"),React.createElement("div",null,"3.新人团需小程序新用户（即24小时内首次登陆，且未参与过拼团的用户）方可参团，先付款的成员先加入团，每位用户在同一团可购买多件，但只占1个拼团人数，且不可重复参团。"),React.createElement("div",null,1==a?React.createElement(React.Fragment,null,"4.在规定时间内达到成团人数，则拼团成功，商家分别发货；未能在规定时间内达到成团人数，则拼团失败，系统自动退款。"):React.createElement(React.Fragment,null,"4.在规定时间内达到最低成团人数，则拼团成功，商家分别发货；未能在规定时间内达到成团人数，则拼团失败，联系商家申请退款。"))),2==t?React.createElement(React.Fragment,null,React.createElement("div",null,"1.活动期间，用户可以在拼团商品详情下单发起拼团。"),React.createElement("div",null,"2.用户支付成功，才算成功开团或参团，创建订单未支付不算有效参与拼团玩法。"),React.createElement("div",null,1==n?React.createElement(React.Fragment,null,"3.阶梯团参团人数越多，价格越低，支付差价将在确认收货后返还成储值金。每位用户在同一团内可购买多件，但只占1个拼团人数，且不可重复参团。"):React.createElement(React.Fragment,null,"3.阶梯团参团人数越多，价格越低，支付差价将在确认收货后返还到支付账号。每位用户在同一团内可购买多件，但只占1个拼团人数，且不可重复参团")),React.createElement("div",null,1==a?React.createElement(React.Fragment,null,"4.在规定时间内达到最低成团人数，则拼团成功，商家分别发货；未能在规定时间内达到成团人数，则拼团失败，系统自动退款。"):React.createElement(React.Fragment,null,"4.在规定时间内达到最低成团人数，则拼团成功，商家分别发货；未能在规定时间内达到成团人数，则拼团失败，联系商家申请退款。"))):3==t?React.createElement(React.Fragment,null,React.createElement("div",null,"1.帮帮团的理念是邀请好友帮助支付获得商品，拼团成功后，商家只给团长发货。"),React.createElement("div",null,"2.活动期间，用户可以在拼团商品详情下单发起拼团。"),React.createElement("div",null,"3.用户支付成功，才算成功帮助成团，创建订单未支付不算有效参与帮帮团，先付款的成员先加入团，用户不可重复参同一团。"),React.createElement("div",null,"4.在规定时间内达到帮帮团人数，则拼团成功，团长获得商品；未能在规定时间内达到成团人数，则拼团失败，系统自动退款。")):4==t&&React.createElement(React.Fragment,null,React.createElement("div",null,"1.用户支付一定金额获得抽奖机会，当参加抽奖用户支付金额达到抽奖门槛，系统自动抽取1名中奖用户，其他未中奖用户将获得等额储值金。活动结束仍未达到抽奖门槛，系统自动退款。"),React.createElement("div",null,"2.活动期间，用户可以在拼团商品详情支付参与抽奖。购买数量越多，中奖概率越大。"),React.createElement("div",null,"3.用户支付成功，才算成功参与抽奖，创建订单未支付不算有效参团玩法。")))))))}}]),t}(g.default);t.default=h},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(31),i=n(o),s=a(9),r=n(s),c=a(0),l=n(c),d=a(3),u=n(d),m=a(1),p=n(m),f=a(2),g=n(f);a(32);var h=a(5),v=a(6),_=a(7),y=n(_);a(519);var E=function(e){function t(e){(0,l.default)(this,t);var a=(0,p.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={id:0,selectmodel:"",order:{},formid:[],isFrom:!0,goodsInfo:{},groupPrice:"",goodsPrice:"",kanfriends:[],cart_id_arr:[],kanprice:0,description:"",num_of_people:0,num:0,status:"P",storeConfig:"",express_fee:0,box_fee:0,selectAddress:"",shop:{id:"0"},exchangeCouponData:{dialogHidden:!0,goodsInfo:{},selectModelInfo:{},hasSelectGoods:!1,voucher_coupon_goods_info:{}},useBalance:!0,selectDiscountInfo:{},cashOnDelivery:!1,is_self_delivery:0,deliverytype:"express",noAdditionalInfo:!0,additional_info_obj:{},goodsType:"",selectDelivery:"",pickUpType:"",expressAddressNull:!1,additional_info:{},payGiftOptions:{},settlementActivityFreePrice:0},a.getLocation=function(){var e=a,t=e.data.pickUpType;h.appMethod.getLocation({success:function(a){a.longitude&&(h.appMethod.sendRequest({url:"/index.php?r=Map/getAreaInfoByLatAndLng",data:{longitude:a.longitude,latitude:a.latitude},success:function(a){e.setData({currentRegionId:a.data.region_id}),3==t&&e.getSelfDeliveryList()}}),e.setData({longitude:a.longitude,latitude:a.latitude}))},fail:function(e){console.log(e),h.appMethod.addLog(e)}})},a.selectPickMethod=function(e){var t=a;a.cart_id_arr;h.appMethod.sendRequest({url:"/index.php?r=AppGroupBuy/getCanUsePickUpTypeAtAddOrder",method:"post",data:{num:t.data.num,goods_id:t.data.goods_id,activity_id:t.data.activityid,model_id:t.data.model_id||"",num_of_people:t.data.num_of_people,team_token:t.data.team_token||"",latitude:t.data.latitude||"",longitude:t.data.longitude||"",region_id:t.data.currentRegionId||"",sub_shop_app_id:t.franchisee_id||""},success:function(a){if(t.setData({pickUpTypeArr:a.data.goods_pick_up_type_arr,intraCityData:a.data.intra_city_data,isShowPickMask:"first"!=e,pickUpType:t.data.pickUpType?t.data.pickUpType:a.data.goods_pick_up_type_arr[0]}),"first"==e){switch(t.data.pickUpType){case"3":t.getSelfDeliveryList();break;case"2":t.setData({sameJourneyTimeType:1})}t.getCalculationInfo()}}})},a.getGoodsStoreSet=function(e){var t=a;h.appMethod.sendRequest({url:"/index.php?r=AppEcommerce/getPickUpGoodsTypeSetting",data:{pick_up_type:e,sub_shop_app_id:a.franchisee_id},success:function(a){var n=a.data.config_data;3==e&&n?(t.setData({selfAppointmentSwitch:1==n.pick_up_time_status&&1==n.appointment.status,onlyImmediatlyPickSwitch:1==n.pick_up_time_status&&1!=n.appointment.status&&1==n.immediate_info.self_pcik_up_status,selfDeliveryPhone:n.is_phone,selfDeliveryScan:1==n.pick_up_time_status&&1==n.immediate_info.status&&1==n.immediate_info.scan_qrcode_status}),t.data.onlyImmediatlyPickSwitch&&t.showServiceTime("onlyImme")):2==e&&n&&t.getsameJourneyTime(n.business_rule)}})},a.tostoreImmediately=function(){a.setData({tostoreOrderType:1,tostoreHourTime:"",isShowServiceTime:!1})},a.selectTostoreTime=function(e){var t=a.data.getEcTostoredate.date_arr,n=e.currentTarget.dataset.index,o=t[n].date,i=t[n].week;a.setData({tostoreOrderType:2,dateIndex:n,tostoreDateTime:o,tostoreWeekTime:i,isShowServiceTime:1!=a.data.tostoreTimeType}),a.getTostoreTime()},a.getTostoreTime=function(){var e=(new Date).getMonth()+1,t=(new Date).getMinutes(),n=(new Date).getHours(),o=(new Date).getDate(),i=(e<10?"0"+e:e)+"-"+(o<10?"0"+o:o),s=[],r=!0,c=a.data.businessTimeRule,l=Number(a.data.tostoreWeekTime),d=void 0,u=1==a.businessTimeType,m=a.data.advanceAppointmentInfo,p=+m.num+n>24?+m.num+n-24:+m.num+n;if(2==a.businessTimeType&&c.map(function(e){0==l&&(l=7),1==e.business_week[l-1]&&(d=e.business_time_interval)}),i===a.data.tostoreDateTime)if(2==a.businessTimeType)d&&d.map(function(e){var o=n,i=Number(e.end_time.substring(0,2)),r=Number(e.start_time.substring(0,2)),c=Number(e.end_time.substring(0,2)),l=Number(e.start_time.substring(3,5)),d=Number(e.end_time.substring(3,5));if(n<p&&(o=n=p),(n>r&&n<c||n==r&&t>=l)&&!p&&(u=!0),n<r)n=r,t=0;else if(n>c)return;for(;n<=c;n++)if(2==a.data.tostoreTimeType){if(n==i)continue;s.push(n+":00-"+(n+1)+":00")}else{if(n==o&&t<=30&&0!=t){s.push(n+":30-"+(n+1)+":00");continue}if(n==o&&t>30)continue;if(n==i&&d>=30){s.push(n+":00-"+n+":30");continue}if(n==i&&0==d)continue;s.push(n+":00-"+n+":30"),s.push(n+":30-"+(n+1)+":00")}});else for(n<p&&(n=p);n<24;n++)if(2==a.data.tostoreTimeType){if(r&&t>0&&(r=!1,n++),n>=24)continue;s.push(n+":00-"+(n+1)+":00")}else{if(r&&t>0&&t<=30){r=!1,s.push(n+":30-"+(n+1)+":00");continue}if(r&&t>30&&(r=!1,n++),n>=24)continue;s.push(n+":00-"+n+":30"),s.push(n+":30-"+(n+1)+":00")}else if(2==a.businessTimeType)d&&d.map(function(e){var t=Number(e.start_time.substring(0,2)),o=Number(e.end_time.substring(0,2)),i=Number(e.start_time.substring(0,2));a.data.getEcTostoredate.date_arr[1].date==a.data.tostoreDateTime&&i<p&&+m.num+n>24&&(i=p);for(var r=Number(e.end_time.substring(0,2)),c=Number(e.start_time.substring(3,5)),l=Number(e.end_time.substring(3,5));i<=r;i++)if(2==a.data.tostoreTimeType){if(i==o||i==t&&c>0)continue;s.push(i+":00-"+(i+1)+":00")}else{if(i==t&&c<=30&&0!=c){s.push(i+":30-"+(i+1)+":00");continue}if(i==t&&c>30)continue;if(i==o&&l<=30&&0!=l){s.push(i+":00-"+i+":30");continue}if(i==o&&0==l)continue;s.push(i+":00-"+i+":30"),s.push(i+":30-"+(i+1)+":00")}});else{var f=0;for(a.data.getEcTostoredate.date_arr[1].date==a.data.tostoreDateTime&&f<p&&+m.num+n>24&&(f=p);f<24;f++)2==a.data.tostoreTimeType?s.push(f+":00-"+(f+1)+":00"):(s.push(f+":00-"+f+":30"),s.push(f+":30-"+(f+1)+":00"))}a.setData({tostoreHoursArr:s,showImmediatelyTime:u})},a.selectTostoreHourTime=function(e){var t=a.data.tostoreHoursArr,n=e.currentTarget.dataset.index,o=t[n];a.setData({tostoreOrderType:2,tostoreHourTime:o,isShowServiceTime:!1})},a.showSameJourneyTime=function(){if(!a.data.selectSameJourney.id)return void h.appMethod.showModal({content:"请先选择地址"});a.getGoodsStoreSet(2)},a.getsameJourneyTime=function(e){var t=[],n=(new Date).getMinutes()+Number(a.data.sameJourneyImmediatlyTime),o=(new Date).getHours();if(n>=60&&(o++,n-=60),1==e.type)for(var i=!0;o<24;o++)i&&n>0&&n<=30?(i=!1,t.push(o+":30")):(i&&n>30&&(i=!1,o++),t.push(o+":00"),t.push(o+":30"));else{var s=(new Date).getDay(),r=void 0;2==e.type&&e.custom.business_time.map(function(e){0==s&&(s=7),1==e.business_week[s-1]&&(r=e.business_time_interval)}),r.map(function(e){var a=o,i=Number(e.end_time.substring(0,2)),s=Number(e.start_time.substring(0,2)),r=Number(e.end_time.substring(0,2)),c=(Number(e.start_time.substring(3,5)),Number(e.end_time.substring(3,5)));if(o<=s)o=s,n=0;else if(o>r)return;for(;o<=r;o++)o==a&&n<=30&&0!=n?t.push(o+":30"):o==a&&n>30||(o==i&&c<30?t.push(o+":00"):o==i&&0==c||(t.push(o+":00"),t.push(o+":30")))})}a.setData({sameJourneyHoursArr:t,isShowSameJourneyTime:!0})},a.getAppECStoreConfig=function(){var e=a;h.appMethod.sendRequest({url:"/index.php?r=appShop/getAppECStoreConfig",data:{sub_shop_app_id:e.franchisee_id||""},success:function(t){0==t.data.express&&e.getSelfDeliveryList(),e.setData({storeConfig:t.data,is_self_delivery:0==t.data.express&&1==t.data.is_self_delivery?1:0,storeStyle:e.franchisee_id?"":t.data.color_config}),e.getCalculationInfo()}})},a.selectSameJourneyTime=function(e){var t=e.currentTarget.dataset.type,n=a.data.sameJourneyHoursArr,o=e.currentTarget.dataset.index,i=n[o];a.setData({sameJourneyTimeType:"immedia"==t?1:2,sameJourneyDateTime:"immedia"==t?"":i,isShowSameJourneyTime:!1})},a.deliveryWayChange=function(e){var t=e.currentTarget.dataset.type;3==t&&a.getSelfDeliveryList(),a.setData({pickUpType:t,sameJourneyTimeType:2==t?1:"",isShowPickMask:!1,cashOnDelivery:!1}),a.getCalculationInfo()},a.getSelfDeliveryList=function(){var e=a;h.appMethod.sendRequest({url:"/index.php?r=AppShop/getSelfDeliveryList",data:{sub_shop_app_id:e.franchisee_id||""},success:function(t){var a=t.data.store_list_data;if(!a)return void h.appMethod.showModal({content:"商家暂无自提门店",confirm:function(){h.appMethod.turnBack()}});1==a.length&&e.setData({selectDelivery:a[0]}),a.length>=2&&!e.data.selectDelivery&&h.appMethod.showModal({content:"当前尚未选择自提点",confirmText:"去设置",cancelText:"取消",showCancel:!0,confirm:function(){e.toDeliveryList()}}),e.getGoodsStoreSet(3)}})},a.toDeliveryList=function(){var e=a,t="";e.franchisee_id?(t+="?franchiseeId="+e.franchisee_id,t+=e.data.selectDelivery.id?"&deliveryId="+e.data.selectDelivery.id:""):t+=e.data.selectDelivery.id?"?deliveryId="+e.data.selectDelivery.id:"",e.saveUserFormId(function(){h.appMethod.turnToPage("/eCommerce/pages/goodsDeliveryList/goodsDeliveryList"+t)})},a.goToAdditionalInfo=function(){h.appMethod.setGoodsAdditionalInfo(a.data.additional_info),a.saveUserFormId(function(){h.appMethod.turnToPage("/eCommerce/pages/goodsAdditionalInfo/goodsAdditionalInfo")})},a.goToMyAddress=function(){var e=a.data.selectAddress&&a.data.selectAddress.id;a.isFromSelectAddress=!0,a.saveUserFormId(function(){h.appMethod.turnToPage("/eCommerce/pages/myAddress/myAddress?id="+e)})},a.clickMinusButton=function(e){var t=e.currentTarget.dataset.index;+a.data.num<=0||a.changeGoodsNum(t,"minus")},a.inputBuyCount=function(e){var t=+e.target.value,n=a.data.goodsInfo,o=+a.data.limit_buy,i=+n.stock;return"4"!=a.data.groupType&&t>o&&0!=o?(h.appMethod.showModal({content:"已超过该商品的限购件数（每人限购"+a.data.limit_buy+"件）"}),void a.setData({num:o})):0==t?void a.setData({num:1}):(t>=i&&(t=i,h.appMethod.showModal({content:"购买数量不能大于库存"})),a.setData({num:+t}),void a.getCalculationInfo())},a.clickPlusButton=function(e){var t=e.currentTarget.dataset.index,n=(a.data.goodsInfo.stock,+a.data.limit_buy),o=a.data.num;if("4"!=a.data.groupType&&""!==n&&0!=n&&+o>=n)return h.appMethod.showModal({content:"已超过该商品的限购件数（每人限购"+n+"件）"}),void a.setData({num:n});a.changeGoodsNum(t,"plus")},a.changeGoodsNum=function(e,t){var n=a.data.goodsInfo,o=+n.stock,i=a.data.num,s="plus"==t?i+1:"minus"==t?i-1:Number(t);return 0==s&&"minus"==t?void a.setData({num:1}):s>o?(h.appMethod.showModal({content:"购买数量不能大于库存"}),void a.setData({num:o})):(a.setData({num:s}),void a.getCalculationInfo())},a.getCalculationInfo=function(){var e=a,t=e.data.goods_id,n=e.data.activityid,o=e.data.model_id||"",i=a.data.tostoreOrderType,s=(new Date).getFullYear(),r=s+"-"+a.data.tostoreDateTime+" "+(a.data.tostoreHourTime||"");h.appMethod.sendRequest({url:"/index.php?r=appGroupBuy/calculatePrice",method:"post",data:{goods_id:t,activity_id:n,pick_up_type:a.data.pickUpType,model_id:o||"",sub_shop_app_id:e.franchisee_id||"",address_id:1==a.data.pickUpType?a.data.selectAddressId:a.data.selectSameJourneyId,cart_id_arr:a.cart_id_arr,is_balance:a.data.useBalance?1:0,is_self_delivery:a.data.is_self_delivery,select_benefit:a.data.selectDiscountInfo,num_of_people:a.data.num_of_people,num:a.data.num,team_token:a.data.team_token||"",ecommerce_info:{ec_tostore_data:{ec_tostore_order_type:i||1,ec_tostore_appointment_time:1!=i&&a.data.selfAppointmentSwitch?r:"",ec_tostore_buyer_phone:a.data.phone||"",ec_tostore_appointment_time_type:a.data.tostoreTimeType||"",ec_tostore_location_id:a.data.locationId||""},intra_city_data:{intra_city_appointment_arrive_time:1==a.data.sameJourneyTimeType?"":a.data.sameJourneyDateTime}},voucher_coupon_goods_info:a.data.exchangeCouponData.voucher_coupon_goods_info,settlement_activity_info:a.data.payGiftOptions},success:function(t){if("string"==typeof t.data)return e.data.isFrom||"已达到抽奖机会购买上限"!=t.data?void h.appMethod.showModal({content:t.data,confirm:function(){h.appMethod.turnBack()}}):(h.appMethod.showModal({content:t.data}),void e.setData({num:1}));var a=t.data,n=a.benefit,o=a.goods_info,i=[],s=a.select_benefit,r=[],c=[];if(2==e.data.pickUpType&&a.intra_city_status_data&&0==a.intra_city_status_data.in_distance)return void h.appMethod.showModal({content:"地址不在配送范围内",confirmText:"去更换",cancelText:"取消",showCancel:!0,confirm:function(){e.goSameJourneyAddress()},cancel:function(){e.setData({selectSameJourney:""})}});var l=[],d="0.00"==o.virtual_price?o.original_price:o.virtual_price,u=a.original_price;n.coupon_benefit&&n.coupon_benefit.length&&l.push({label:"coupon",value:n.coupon_benefit}),n.all_vip_benefit&&n.all_vip_benefit.length&&l.push({label:"vip",value:n.all_vip_benefit}),Array.isArray(n.integral_benefit)||n.integral_benefit&&l.push({label:"integral",value:[n.integral_benefit]}),"coupon"==s.discount_type&&3==s.type&&0==e.data.exchangeCouponData.hasSelectGoods&&e.exchangeCouponInit(parseInt(s.value)),o.delivery_id&&0!=o.delivery_id&&-1==c.indexOf(o.id)&&(r.push(o.delivery_id),c.push(o.goods_id),i.push(o));var m=String(a.original_price-a.group_buy_discount_price);m.split(".")[1]&&(m=Number(m).toFixed(2)),r.length&&!e.data.deliverydWrite&&e.getSuppInfo(r),+a.settlement_activity_item_price&&(a.final_price=(+a.final_price+ +a.settlement_activity_item_price).toFixed(2)),e.setData({expressAddressNull:!a.address&&e.data.expressAddressNull,goodsPrice:d,groupPrice:u,goodsInfo:o,isFrom:!1,selectAddress:1==e.data.pickUpType&&a.address,discountList:l,selectDiscountInfo:s,express_fee:a.express_fee,box_fee:a.box_fee,discount_price:a.discount_price,balance:a.balance,deduction:a.use_balance,original_price:a.original_price,group_buy_price:m,totalPayment:a.final_price,canCashDelivery:a.is_pay_on_delivery||"",noAdditionalInfo:!r.length,cashOnDelivery:a.price>0&&e.data.cashOnDelivery,additional_goodsid_arr:c,selectSameJourney:2==e.data.pickUpType&&a.address,sameJourneyImmediatlyTime:a.intra_city_status_data&&a.intra_city_status_data.deliver_time||"",settlementActivityFreePrice:a.settlement_activity_free_bills_item_price}),h.appMethod.setPreviewGoodsInfo(i)},fail:function(){h.appMethod.turnBack()}})},a.closeGoodsPick=function(){a.setData({isShowPickMask:!1,isShowServiceTime:!1,isShowSameJourneyTime:!1})},a.showServiceTime=function(e){var t=a.data.selectDelivery,n=a;h.appMethod.sendRequest({url:"/index.php?r=AppEcommerce/GetEcTostoreAppointmentDateList",data:{sub_shop_app_id:n.franchisee_id||"",self_delivery_app_store_id:t.id||""},success:function(t){var a=t.data;if("onlyImme"==e)return void n.setData({waitingQueueTime:a.duration_time,tostoreOrderType:1});var o=a.setting_data.appointment.appointment_time_type,i="",s="",r=a.date_arr,c=a.setting_data.appointment.advance_appointment_info,l=(new Date).getHours(),d=a.business_time_rule,u=24,m=(new Date).getMinutes(),p=!1,f=1==a.setting_data.immediate_info.status&&1==c.type,g=!0;if(2==d.type){var h=r[0].week,v=void 0;d.custom.business_time.map(function(e){0==h&&(h=7),1==e.business_week[h-1]&&(v=e.business_time_interval,u=+v[v.length-1].end_time.substring(0,2))}),v&&v.map(function(e){var t=Number(e.start_time.substring(0,2)),a=Number(e.end_time.substring(0,2)),n=Number(e.start_time.substring(3,5));Number(e.end_time.substring(3,5));(l>t&&l<a||l==t&&m>=n)&&(p=!0)})}else p=!0;for(var _=0;_<r.length;_++)if(0==_&&(2==c.type&&+c.num+l>=u||1==c.type&&l>=u)&&(r[_].is_vaild=0),1==r[_].is_vaild&&1!=o){i=r[_].date,s=r[_].week;break}r.map(function(e){1==e.is_vaild&&(g=!1)}),n.businessTimeType=d.type,n.setData({getEcTostoredate:a,waitingQueueTime:a.duration_time,tostoreTimeType:o,isShowServiceTime:!0,noImmediaPick:f,tostoreDateTime:n.data.tostoreDateTime?n.data.tostoreDateTime:i,tostoreWeekTime:n.data.tostoreWeekTime?n.data.tostoreWeekTime:s,businessTimeRule:1==d.type?"":d.custom.business_time,advanceAppointmentInfo:c,noAppointmentShow:g,showImmediatelyTime:p}),1!=o&&n.getTostoreTime(),2==d.type&&n.getNoAppointmentWord()}})},a.goSameJourneyAddress=function(e){var t=a.data.selectSameJourney;a.isFromSelectAddress=!0,h.appMethod.turnToPage("/eCommerce/pages/goodsSameJourney/goodsSameJourney?from=preview&sameJourneyId="+(t?t.id:"")+"&franchiseeId="+a.franchisee_id)},a.commentChange=function(e){var t=e.target.value;t.length>30&&(h.appMethod.showModal({content:"最多只能输入30个字"}),t=t.slice(0,30)),a.setData({description:t})},a.inputFormControl=function(e){var t=a.data.additional_info;t[a.data.additional_goodsid_arr[0]][0].value=e.target.value,a.setData({additional_info:t})},a.getSuppInfo=function(e){var t=a;h.appMethod.sendRequest({hideLoading:!0,url:"/index.php?r=pc/AppShop/GetDelivery",method:"post",data:{delivery_ids:e,sub_shop_app_id:t.franchisee_id||""},success:function(e){for(var a=0;a<e.data.length;a++)for(var n=e.data[a].delivery_info,o=0;o<n.length;o++)0==n[o].is_required&&1==n[o].is_hidden&&t.setData({hasRequiredSuppInfo:!0});if(1==e.data.length&&1==t.data.additional_goodsid_arr.length){var i=0,s=0;if(e.data[0].delivery_info.map(function(e){s++,1==e.is_hidden&&i++}),1==i){var r={};r[t.data.additional_goodsid_arr[0]]=[],r[t.data.additional_goodsid_arr[0]].push({title:e.data[0].delivery_info[s-1].name,type:e.data[0].delivery_info[s-1].type,is_required:e.data[0].delivery_info[s-1].is_required,value:""}),t.setData({additional_info:r,aloneDeliveryShow:!0})}}}})},a.confirmPayment=function(e){var t,n=a.data.formid,o=a,i=(a.data.goodsList,a.data.tostoreOrderType);a.data.selectDiscountInfo;if(n.push(e.target.formId),1==a.data.pickUpType&&!a.data.selectAddress)return void a.setData({expressAddressNull:!0});if(2==a.data.pickUpType&&!a.data.selectSameJourney)return void h.appMethod.showModal({content:"请完善地址信息",confirmText:"去填写",confirm:function(){o.goToMyAddress()}});if(2==a.data.pickUpType&&!a.data.selectSameJourney)return void h.appMethod.showModal({content:"请选择同城地址",confirmText:"去填写",confirm:function(){o.goSameJourneyAddress()}});if(2==a.data.pickUpType&&!a.data.sameJourneyDateTime&&1!=a.data.sameJourneyTimeType)return void h.appMethod.showModal({content:"请选择取货时间"});if(3==a.data.pickUpType&&!a.data.selectDelivery)return void h.appMethod.showModal({content:"请选择上门自提地址",confirmText:"去填写",confirm:function(){o.toDeliveryList()}});for(var s in a.data.additional_info)if(void 0!==s){!0;break}if(3==a.data.pickUpType&&a.data.selfAppointmentSwitch&&!i)return void h.appMethod.showModal({content:"请选择取货时间"});var c=(new Date).getFullYear(),l=c+"-"+a.data.tostoreDateTime+" "+(a.data.tostoreHourTime||"");if(3==a.data.pickUpType&&1==a.data.selfDeliveryPhone&&!util.isPhoneNumber(a.data.phone))return void h.appMethod.showModal({content:"请输入正确的手机号"});if(a.data.hasRequiredSuppInfo&&!a.data.deliverydWrite&&!a.data.aloneDeliveryShow)return void h.appMethod.showModal({content:"商品补充信息未填写，无法进行支付",confirmText:"去填写",confirm:function(){o.goToAdditionalInfo()}});if(a.data.aloneDeliveryShow){var d=a.data.additional_info,u=a.data.additional_goodsid_arr[0];if(0==d[u][0].is_required&&""==d[u][0].value)return void h.appMethod.showModal({content:"请填写"+d[u][0].title,confirmText:"确认"})}if(!a.requesting){a.requesting=!0;h.appMethod.sendRequest({url:"/index.php?r=appGroupBuy/addOrder",method:"post",data:(t={goods_id:o.data.goods_id,activity_id:o.data.activityid,sub_shop_app_id:o.franchisee_id||a.data.parentAppId||"",model_id:o.data.model_id||"",num:o.data.num,num_of_people:o.data.num_of_people,team_token:o.data.team_token||"",formId:e.target.formId,select_benefit:o.data.selectDiscountInfo,is_balance:o.data.useBalance?1:0,is_self_delivery:o.data.is_self_delivery,self_delivery_app_store_id:1==o.data.is_self_delivery?o.data.selectDelivery.id:"",remark:o.data.description,address_id:1==a.data.pickUpType?a.data.selectAddress.id:a.data.selectSameJourney.id,is_pay_on_delivery:o.data.cashOnDelivery?1:0,additional_info:o.data.additional_info,express_fee:o.data.express_fee,box_fee:o.data.box_fee,ecommerce_info:{ec_tostore_data:{ec_tostore_order_type:i||1,ec_tostore_appointment_time:1!=i&&a.data.selfAppointmentSwitch?l:"",ec_tostore_buyer_phone:a.data.phone||"",ec_tostore_appointment_time_type:a.data.tostoreTimeType||"",ec_tostore_location_id:a.data.locationId||""},intra_city_data:{intra_city_appointment_arrive_time:1==a.data.sameJourneyTimeType?"":a.data.sameJourneyDateTime}},pick_up_type:a.data.pickUpType},(0,r.default)(t,"self_delivery_app_store_id",3==a.data.pickUpType?a.data.selectDelivery.id:""),(0,r.default)(t,"voucher_coupon_goods_info",a.data.exchangeCouponData.voucher_coupon_goods_info),(0,r.default)(t,"settlement_activity_info",a.data.payGiftOptions),t),success:function(e){e.data;if(0!=e.status)return void h.appMethod.showModal({content:e.data});if(o.data.cashOnDelivery){var t="/group/pages/gppaySuccess/gppaySuccess?detail="+e.data.order_id+(o.franchisee_id?"&franchisee="+o.franchisee_id:"")+"&is_group="+!!o.is_group+"&orderid="+e.data.order_id+"&teamToken="+e.data.team_token;o.saveUserFormId(function(){h.appMethod.turnToPage(t)})}else o.payOrder(e.data.order_id,e.data.team_token);o.setData({team_token:e.data.team_token})},fail:function(){o.requesting=!1},successStatusAbnormal:function(){o.requesting=!1}})}},a.additionInfo=function(e){var t=a;h.appMethod.sendRequest({url:"/index.php?r=AppShop/info",data:{additional_info:t.data.additional_info,sub_shop_app_id:t.franchisee_id||"",order_id:e},success:function(e){}})},a.payOrder=function(e,t){function n(){var a="/group/pages/gppaySuccess/gppaySuccess?detail="+e+(i.franchisee_id?"&franchisee="+i.franchisee_id:"")+"&is_group="+!!i.is_group+"&teamToken="+t;i.franchisee_id?i.saveUserFormId(function(){h.appMethod.turnToPage(a,1)}):h.appMethod.sendRequest({url:"/index.php?r=AppMarketing/CheckAppCollectmeStatus",data:{sub_shop_app_id:i.franchisee_id||"",order_id:e},success:function(e){0==e.valid&&(a+="&collectBenefit=1"),i.saveUserFormId(function(){h.appMethod.turnToPage(a,1)})}})}function o(){h.appMethod.sendRequest({url:"/index.php?r=appShop/cancelOrder",data:{sub_shop_app_id:i.franchisee_id||"",order_id:e},success:function(){h.appMethod.turnBack()}})}var i=a;if(0==a.data.totalPayment)return void h.appMethod.sendRequest({url:"/index.php?r=AppShop/paygoods",data:{sub_shop_app_id:i.franchisee_id||"",order_id:e,total_price:0},success:function(e){n()},fail:function(){o()},successStatusAbnormal:function(){o()},successShowModalConfirm:function(){h.appMethod.turnBack()}});h.appMethod.sendRequest({url:"/index.php?r=AppShop/GetWxWebappPaymentCode",data:{sub_shop_app_id:i.franchisee_id||"",order_id:e},success:function(t){var a=t.data;a.orderId=e,a.success=n,a.goodsType=0,a.fail=o,h.appMethod.wxPay(a)},fail:function(){o()},successStatusAbnormal:function(){o()},successShowModalConfirm:function(){h.appMethod.turnBack()}})},a.showMemberDiscount=function(){a.selectComponent("#component-memberDiscount").showDialog(a.data.selectDiscountInfo)},a.afterSelectedBenefit=function(e){a.setData({selectDiscountInfo:"无"==e.target.selectedDiscount.name?"no_use_benefit":e.target.selectedDiscount,"exchangeCouponData.hasSelectGoods":!1,"exchangeCouponData.voucher_coupon_goods_info":{}}),a.getCalculationInfo()},a.useBalanceChange=function(e){a.setData({useBalance:e}),a.getCalculationInfo()},a.useCashDelivery=function(e){0==a.data.selfPayOnDelivery&&e.target.value&&a.setData({is_self_delivery:!1}),a.setData({cashOnDelivery:e.target.value}),a.getCalculationInfo()},a.formSubmit_collect=function(e){a.data.formid.push(e.target.formId)},a.saveUserFormId=function(e){h.appMethod.showLoading({title:"加载中"});var t=a;h.appMethod.sendRequest({url:"/index.php?r=api/AppMsgTpl/saveUserFormId",method:"post",data:{sub_shop_app_id:t.franchisee_id||"",form_id:t.data.formid||[]},complete:function(){h.appMethod.hideLoading(),e&&e(),t.setData({formid:[]})}})},a.addDeliveryImg=function(){var e=a,t=a.data.additional_info,n=a.data.additional_goodsid_arr[0],o=t[n][0].value||[];h.appMethod.chooseImage(function(a){t[n][0].value=o.concat(a),e.setData({additional_info:t})},9-t[n][0].value.length)},a.deleteImage=function(e){var t=a,n=a.data.additional_info,o=a.data.additional_goodsid_arr[0],i=e.currentTarget.dataset.imageIndex,s=n[o][0].value;s.splice(i,1),n[o][0].value=s,t.setData({additional_info:n})},a.getNoAppointmentWord=function(){var e="商家营业时间：",t="";a.data.businessTimeRule.map(function(t){for(var a=0;a<t.business_week.length;a++)if(1==t.business_week[a])switch(a){case 0:e+="周一、";break;case 1:e+="周二、";break;case 2:e+="周三、";break;case 3:e+="周四、";break;case 4:e+="周五、";break;case 5:e+="周六、";break;case 6:e+="周日、"}t.business_time_interval.map(function(t){e+=t.start_time+"-"+t.end_time+" "})});var n=a.data.getEcTostoredate.setting_data.appointment,o=n.advance_appointment_info;switch(o.type){case"1":t+="无需提前，";break;case"2":t+="需提前"+o.num+"小时，";break;case"3":t+="需提前"+o.num+"天，"}t+="最多可预约"+n.valid_days+"天内时间",a.setData({noAppointmentWorda:e,noAppointmentWordb:t})},a.getPhoneNumber=function(e){var t=a;/getPhoneNumber:fail/.test(e.target.errMsg)||h.appMethod.sendRequest({url:"/index.php?r=AppUser/GetPhoneNumber",data:{encryptedData:e.target.encryptedData,iv:e.target.iv},success:function(e){h.appMethod.setUserInfoStorage({phone:e.data}),t.setData({phone:e.data})},successStatus5:function(){h.appMethod.goLogin({success:function(){h.appMethod.showModal({content:"获取手机号失败，请再次点击授权获取"})},fail:function(){h.appMethod.showModal({content:"获取手机号失败，请再次点击授权获取"})}})}})},a.inputPhone=function(e){a.setData({phone:e.target.value})},a.hidePerfectAddress=function(){a.setData({expressAddressNull:!1})},a.getInStoreSeat=function(){var e=a;h.appMethod.scanCode({success:function(t){var a=t.path,n=a.split(/\?location_id=/)[1];h.appMethod.sendRequest({url:"/index.php?r=AppEcommerce/getEcLocationData",data:{id:n,sub_shop_app_id:e.franchisee_id},success:function(t){0==t.data.status?e.setData({locationId:n,inStoreSeatName:t.data.title}):h.appMethod.showModal({content:"未检索到座位号"})}})},fail:function(e){h.appMethod.showModal({content:"未检索到座位号"})}})},a.manuallyAddAddress=function(){a.isFromSelectAddress=!0,h.appMethod.turnToPage("/eCommerce/pages/addAddress/addAddress")},a.importWeChatAddress=function(){var e=a;h.appMethod.chooseAddress({success:function(t){h.appMethod.sendRequest({method:"post",url:"/index.php?r=AppShop/AddWxAddress",data:{detailInfo:t.detailInfo||"",cityName:t.cityName||"",provinceName:t.provinceName||"",UserName:t.userName||"",telNumber:t.telNumber||"",district:t.district||"",countyName:t.countyName||""},success:function(){e.getCalculationInfo()}})}})},a.selectedPayGift=function(e){var t=e.detail;a.setData({payGiftOptions:t.options||{}}),a.getCalculationInfo()},document.title="确认订单",a}return(0,g.default)(t,e),(0,u.default)(t,[{key:"componentWillMount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,v.getCurrentPageQueryParams)(),t=this,a=JSON.parse(e.selectmodel),n=e.goodsid,o=e.activityid,i=e.addressId||"",s=e.type||"",r=e.team_token||"",c=e.groupType,l=e.limit_buy,d=a.modelId||"",u=e.isFrom,m=a.models_text;h.appMethod.getStorageSync("session_key");this.cart_id_arr=e.cart_arr?decodeURIComponent(e.cart_arr).split(","):[],this.franchisee_id=e.franchisee||"",this.setData({selectmodel:m,team_token:r,model_id:d,goods_id:n,activityid:o,num_of_people:e.group_buy_people,num:Number(e.num),limit_buy:l,isFrom:u,groupType:c,pickUpType:s,sameJourneyTimeType:2==s?1:"",selectSameJourneyId:2==s?i:"",selectAddressId:1==s?i:"",phone:h.appMethod.getUserInfo().phone,parentAppId:e.parent_app_id||""}),this.getLocation(),setTimeout(function(){t.selectPickMethod("first")},500)}},{key:"componentDidMount",value:function(){this.isFromSelectAddress&&(this.getCalculationInfo(),this.isFromSelectAddress=!1)}},{key:"render",value:function(){var e=this,t=this.state,a=t.discountList,n=t.pickUpTypeArr,o=t.pickUpType,s=t.selectAddress,r=t.selectDelivery,c=t.selectSameJourney,l=t.sameJourneyTimeType,d=t.sameJourneyImmediatlyTime,u=t.sameJourneyDateTime,m=t.selfAppointmentSwitch,p=t.tostoreDateTime,f=t.tostoreTimeType,g=t.tostoreOrderType,_=t.waitingQueueTime,y=t.tostoreHourTime,E=t.onlyImmediatlyPickSwitch,b=t.selfDeliveryPhone,N=t.phone,R=t.selfDeliveryScan,k=t.inStoreSeatName,w=t.goodsInfo,x=t.groupType,C=t.selectmodel,D=t.goodsPrice,S=t.goodsIndex,I=t.num,M=t.is_group,T=t.groupPrice,P=t.selectDiscountInfo,L=t.selectDiscountIndex,A=t.discount_price,F=t.box_fee,O=t.express_fee,B=t.useBalance,j=t.deduction,G=t.balance,q=(t.settlementActivityFreePrice,t.cashOnDelivery),U=t.totalPayment,z=t.canCashDelivery,V=t.selfPayOnDelivery,W=t.comment,H=t.hasRequiredSuppInfo,J=t.deliverydWrite,Y=t.noAdditionalInfo,Q=t.aloneDeliveryShow,K=t.additional_info,X=t.additional_goodsid_arr,$=t.intraCityData,Z=t.storeStyle,ee=t.isShowPickMask,te=t.noImmediaPick,ae=t.showImmediatelyTime,ne=t.getEcTostoredate,oe=t.dateIndex,ie=t.tostoreHoursArr,se=t.noAppointmentShow,re=t.noAppointmentWordb,ce=t.noAppointmentWorda,le=t.isShowServiceTime,de=t.sameJourneyHoursArr,ue=t.isShowSameJourneyTime,me=t.expressAddressNull,pe=h.appMethod.getCurrentPage(),fe=pe.callbackData;return fe&&(s=fe.selectAddress,this.state.selectAddress=fe.selectAddress),React.createElement("div",{className:"official-page preview-group-order"},React.createElement(React.Fragment,null,React.createElement("div",{className:"preview-group-order-wrap",id:"preview-group-order"},React.createElement("div",{className:"preview-group-order-section delivery-method-wrap"},React.createElement("div",{className:"pick-method",onClick:n&&n.length>1?this.selectPickMethod:null},React.createElement("div",{className:"pick-method-box"},"取货方式",n&&n.length>1&&React.createElement("span",{className:"pull-right ico-moon icon-rightarrow"}),React.createElement("span",{className:"pull-right pick-method-title"},1==o?"快递":2==o?"同城":"自提"))),1==o&&React.createElement("div",{className:"preview-section"},s.id?React.createElement(React.Fragment,null,React.createElement("div",{className:"address-box",onClick:this.goToMyAddress,"data-address-id":s.id},React.createElement("span",{className:"ico-moon icon-goods-location"}),React.createElement("div",{className:"address-detail"},React.createElement("div",{className:"buyer-name-box"},React.createElement("span",{className:"store-config-label"},"快递"),React.createElement("span",{className:"buyer-name"},s.address_info.name),React.createElement("span",null,s.address_info.contact)),React.createElement("div",{className:"buyer-address"},s.address_info.province.text+s.address_info.city.text+s.address_info.district.text+s.address_info.detailAddress)),React.createElement("div",{className:"ico-moon icon-rightarrow"}))):React.createElement(React.Fragment,null,React.createElement("div",{className:"address-null-box",onClick:this.goToMyAddress},React.createElement("div",{className:"pull-right ico-moon icon-rightarrow"}),React.createElement("div",null,React.createElement("span",{className:"ico-moon icon-goods-location"}),React.createElement("span",{className:"add-new-address"},"新增地址"))))),3==o&&React.createElement("div",{className:"preview-section"},r.id?React.createElement(React.Fragment,null,React.createElement("div",{className:"address-box",onClick:this.toDeliveryList,"data-address-id":r.id},React.createElement("span",{className:"ico-moon icon-goods-location"}),React.createElement("div",{className:"address-detail"},React.createElement("div",{className:"buyer-name-box"},React.createElement("span",{className:"store-config-label"},"自提"),React.createElement("span",{className:"buyer-name"},r.contact_name),React.createElement("span",null,r.service_phone)),React.createElement("div",{className:"buyer-address"},r.region_data.region_string+r.address_detail)),React.createElement("div",{className:"ico-moon icon-rightarrow"}))):React.createElement(React.Fragment,null,React.createElement("div",{className:"address-null-box",onClick:this.toDeliveryList},React.createElement("div",{className:"pull-right ico-moon icon-rightarrow"}),React.createElement("div",null,React.createElement("span",{className:"ico-moon icon-goods-location"}),React.createElement("span",{className:"add-new-address"},"选择自提点"))))),2==o&&React.createElement("div",{className:"preview-section"},c&&c.id?React.createElement(React.Fragment,null,React.createElement("div",{className:"address-box",onClick:this.goSameJourneyAddress},React.createElement("span",{className:"ico-moon icon-goods-location"}),React.createElement("div",{className:"address-detail"},React.createElement("div",{className:"buyer-name-box"},React.createElement("span",{className:"store-config-label"},"同城"),React.createElement("span",{className:"buyer-name"},c.address_info.name),React.createElement("span",null,c.address_info.contact)),React.createElement("div",{className:"buyer-address"},c.address_info.province.text+c.address_info.city.text+c.address_info.district.text+c.address_info.detailAddress)),React.createElement("div",{className:"ico-moon icon-rightarrow"}))):React.createElement(React.Fragment,null,React.createElement("div",{className:"address-null-box"},React.createElement("div",{className:"pull-right ico-moon icon-rightarrow"}),React.createElement("div",{onClick:this.goSameJourneyAddress},React.createElement("span",{className:"ico-moon icon-goods-location"}),React.createElement("span",{className:"add-new-address"},"选择同城地址"))))),React.createElement("div",{className:"address-bg"},React.createElement("img",{src:"http://cdn.jisuapp.cn/zhichi_frontend/static/webapp/images/xcx-goods/goods-address-bg.png"})),2==o&&React.createElement("div",{className:"preview-box border-bottom30"},React.createElement("div",{onClick:this.showSameJourneyTime,className:"single-box"},"取货时间",React.createElement("div",{className:"pull-right appointment-time-box"},React.createElement("span",{className:"appointment-time"},1==l?"尽快送达(预计"+(d||"")+"分钟后送达)":u?"大约"+u+"送达":"请选择送达时间"),React.createElement("span",{className:"ico-moon icon-rightarrow"})))),3==o&&React.createElement("div",{className:"preview-box border-bottom30"},m&&React.createElement("div",{onClick:this.showServiceTime,className:"single-box"},"取货时间",React.createElement("div",{className:"pull-right appointment-time-box"},1==f&&p&&2==g?React.createElement("span",{className:"appointment-time"},dateTrans.date(p)):1==f&&1==g?React.createElement("span",{className:"appointment-time"},0==_?"立即取货":"大约等待"+_+"分钟"):1!=f&&y&&2==g?React.createElement("span",{className:"appointment-time"},dateTrans.date(p)+" "+y):1!=f&&1==g?React.createElement("span",{className:"appointment-time"},dateTrans.date(p)+(0==_?" 立即取货":"大约等待"+_+"分钟")):React.createElement("span",{className:"appointment-time"},"请选择时间"),React.createElement("span",{className:"ico-moon icon-rightarrow"}))),E&&_>=0&&React.createElement("div",{className:"single-box"},"取货时间",React.createElement("div",{className:"pull-right appointment-time-box"},React.createElement("span",{className:"appointment-time"},0==_?"无需等待":"大约等待"+_+"分钟"))),1==b&&React.createElement("div",{className:"single-box"},"联系手机号",React.createElement("div",{className:"pull-right input-phone-box phone-number-input"},React.createElement("input",{type:"text",onInput:this.inputPhone,value:N,placeholder:"请输入手机号"}),React.createElement("button",{className:"get-phone-number",openType:"getPhoneNumber",onGetphonenumber:this.getPhoneNumber},"自动授权"))),R&&React.createElement("div",{className:"single-box",onClick:this.getInStoreSeat},"店内位置",React.createElement("div",{className:"pull-right scan-seat-box"},React.createElement("span",null,k||"请扫码获取位置信息"),React.createElement("span",{className:"ico-moon icon-shopping-scan"}))))),React.createElement("div",{className:"preview-group-order-list preview-group-order-section"},React.createElement("div",{className:"preview-group-order-item"},React.createElement("img",{className:"preview-goods-cover",src:w.cover,mode:"aspectFill"}),React.createElement("div",{className:"preview-goods-content"},React.createElement("div",{className:"preview-goods-title"},React.createElement("div",null,4!=x?React.createElement(React.Fragment,null,"拼团"):React.createElement(React.Fragment,null,"抽奖")),w.goods_name),C&&React.createElement("div",{className:"preview-goods-model"},'""'==C?"":C),React.createElement("div",{className:"preview-quantity-section"},4!=x?React.createElement(React.Fragment,null,React.createElement("div",{style:(0,v.convertLineStyleData)("display:inline-block;")},React.createElement("div",{className:"preview-goods-price"},"¥"+w.price),React.createElement("div",{className:"preview-init-price"},"¥"+D))):React.createElement(React.Fragment,null,React.createElement("div",{className:"preview-goods-price"},"商品价值：¥"+D)),!M&&React.createElement("div",{className:"good-number-box pull-right"},React.createElement("div",{className:"goods-minus","data-index":S,onClick:this.clickMinusButton},"-"),React.createElement("input",{className:"goods-count","data-index":S,type:"number",value:I,onInput:this.inputBuyCount}),React.createElement("div",{className:"goods-plus","data-index":S,onClick:this.clickPlusButton},"+")))))),React.createElement("div",{className:"preview-group-order-section preview-box"},React.createElement("div",{className:"single-box"},"4"!=x?React.createElement(React.Fragment,null,"商品拼团价",React.createElement("span",{className:"pull-right"},"¥"+T)):React.createElement(React.Fragment,null,"抽奖金额",React.createElement("span",{className:"pull-right"},"¥"+T))),a&&!!a.length&&React.createElement("div",{onClick:this.showMemberDiscount},React.createElement("div",{className:"balance-switch"},React.createElement("span",null,"优惠方式"),React.createElement("div",{className:"ico-moon icon-rightarrow pull-right"}),React.createElement("span",{className:"pull-right select-discount"},P.name)),React.createElement("div",{hidden:0==L,className:"balance-price"},React.createElement("span",{className:"pull-right"},"- ¥"+A))),0!=F&&React.createElement("div",{className:"single-box"},"餐盒费",React.createElement("span",{className:"pull-right"},"¥"+F)),React.createElement("div",{className:"single-box"},"运费",React.createElement("span",{className:"pull-right"},"¥"+O)),0!=G&&React.createElement("div",null,React.createElement("div",{className:"balance-switch"},React.createElement("span",null,"使用储值金"),React.createElement(i.default,{className:"pull-right",style:(0,v.convertLineStyleData)("transform:scale(0.8);"),checked:B,onChange:this.useBalanceChange})),React.createElement("div",{hidden:!B,className:"balance-price"},React.createElement("span",{className:"pull-right"},"- ¥"+j))),U>0&&(1==o&&1==z||3==o&&1==V)&&React.createElement("div",null,React.createElement("div",{className:"balance-switch"},React.createElement("span",null,"货到付款（先下单，验货后支付）"),React.createElement(i.default,{className:"pull-right",onChange:this.useCashDelivery,checked:q})))),React.createElement("div",{className:"preview-box"},React.createElement("div",{className:"buyer-message single-box"},"买家留言",React.createElement("div",{className:"pull-right"},React.createElement("input",{className:"remark",value:W,onInput:this.commentChange,placeholder:"建议留言前先与商家沟通"}))),!Y&&!Q&&React.createElement("div",{className:"border-top1 single-box",onClick:this.goToAdditionalInfo},"补充信息",React.createElement("div",{className:"ico-moon icon-rightarrow pull-right"}),React.createElement("span",{style:(0,v.convertLineStyleData)("color:"+(H&&!J?"#ff7100":"#666")),className:"additional-tip pull-right"},J?"已填写":"未填写"))),Q&&React.createElement(React.Fragment,null,K[X[0]].map(function(t,a){return React.createElement("div",{className:"additional-list preview-box",key:!0},"text"==t.type&&React.createElement("div",{className:"additional-text"},React.createElement("span",{className:"additional-name "+(0==t.is_required?"is-required":"")},t.title),React.createElement("div",{className:"additional-info"},React.createElement("input",{type:"text",onInput:e.inputFormControl,value:t.value}))),"mul-text"==t.type&&React.createElement("div",{className:"additional-textarea"},React.createElement("span",{className:"additional-name "+(0==t.is_required?"is-required":"")},t.title),React.createElement("div",{className:"additional-info"},React.createElement("textarea",{maxlength:"-1",onInput:e.inputFormControl,value:t.value}))),"picture"==t.type&&React.createElement("div",{className:"additional-picture"},React.createElement("span",{className:"additional-name "+(0==t.is_required?"is-required":"")},t.title),React.createElement("div",{className:"additional-info"},t.value.map(function(t,a){return React.createElement("div",{className:"image-list",key:!0},React.createElement("img",{src:t}),React.createElement("label",{className:"delete-image ico-moon icon-closes",onClick:e.deleteImage,"data-image-index":a},"-"))}),t.value.length<9&&React.createElement("div",{className:"add-images",onClick:e.addDeliveryImg},React.createElement("span",{className:"ico-moon icon-goods-add-image"}),React.createElement("div",null,"添加图片")))))})),React.createElement("div",{className:"bottom-nav"},React.createElement("div",{className:"preview-goods-total-price"},"合计:",React.createElement("span",{className:"price-count"},"¥",React.createElement("span",null,U))),React.createElement("form",null,React.createElement("button",{type:"button",onClick:this.confirmPayment},q?"货到付款":"立即下单")))),ee&&React.createElement("div",{className:"goods-pick-mask"},React.createElement("div",{className:"goods-pick-box"},React.createElement("div",{className:"goods-pick-header"},"更换取货方式"),React.createElement("div",{className:"goods-pick-content"},n.map(function(e,t){return React.createElement("div",{key:!0,className:"goods-pick-menu"},React.createElement("div",{className:"pick-detail "+(2!=e||1==$.is_enough_price&&1==$.in_business_time?"":"no-achieve-price-box")},React.createElement("div",{className:"pick-style"},1==e?"快递":2==e?"同城配送":"上门自提"),2==e&&1!=$.in_business_time?React.createElement("div",{className:"no-achieve-price"},"不在营业时间"):2==e&&1!=$.is_enough_price&&React.createElement("div",{className:"no-achieve-price"},"未达到起送价 还差"+$.min_deliver_price_balance+"元")),React.createElement("div",{className:"pick-btn-box"},React.createElement("span",{style:(0,v.convertLineStyleData)(2!=e||1==$.is_enough_price&&1==$.in_business_time?"color:#ff7100;border-color:#ff7100"+Z.theme:"color: #D2D2D2;border-color: #D2D2D2"),onClick:2!=e||1==$.is_enough_price&&1==$.in_business_time?"deliveryWayChange":"","data-type":e},"选择")))})),React.createElement("div",{className:"goods-pick-bottom",onClick:this.closeGoodsPick},"关闭"))),le&&React.createElement("div",{className:"goods-pick-mask"},React.createElement("div",{className:"goods-pick-box"},React.createElement("div",{className:"goods-pick-header"},"选择取货时间"),se?React.createElement("div",{className:"none-appointment-time"},React.createElement("img",{className:"no-reservation",src:"http://cdn.jisuapp.cn/static/webapp/images/xcx-goods/no-reservation.png"}),React.createElement("div",{className:"title"},"暂无可预约时间"),React.createElement("div",{className:"tips"},re),React.createElement("div",{className:"tips"},ce)):React.createElement(React.Fragment,null,1==f&&React.createElement("div",{className:"goods-pick-content"},te&&ae&&React.createElement("div",{onClick:this.tostoreImmediately,className:"goods-pick-time "+(1==g?"selected":"")},"立即取货（"+(0==_?"无需等待":"大约等待"+_+"分钟")+"）"),ne.date_arr.map(function(t,a){return React.createElement(React.Fragment,{key:!0},1==t.is_vaild&&React.createElement("div",{onClick:e.selectTostoreTime,"data-index":a,className:"goods-pick-time "+(1!=g&&p==t.date?"selected":"")},dateTrans.date(t.date)+"(星期"+dateTrans.week(t.week)+")"))})),ne.setting_data&&1!=f&&React.createElement("div",{className:"double-column-time"},React.createElement("div",{className:"double-time-day"},ne.date_arr.map(function(t,a){return React.createElement(React.Fragment,{key:!0},1==t.is_vaild&&React.createElement("div",{onClick:e.selectTostoreTime,"data-index":a,className:"goods-pick-time "+(p==t.date?"selected":"")},dateTrans.date(t.date)+"(星期"+dateTrans.week(t.week)+")"))})),React.createElement("div",{className:"double-time-hours"},!oe&&ae&&te&&React.createElement("div",{onClick:this.tostoreImmediately,className:"goods-pick-time "+(1==g?"selected":"")},"立即取货（"+(0==_?"无需等待":"大约等待"+_+"分钟")+"）"),ie.map(function(t,a){return React.createElement("div",{onClick:e.selectTostoreHourTime,"data-index":a,className:y==t?"selected":"",key:!0},t)})))),React.createElement("div",{className:"goods-pick-bottom",onClick:this.closeGoodsPick},"关闭"))),ue&&React.createElement("div",{className:"goods-pick-mask"},React.createElement("div",{className:"goods-pick-box"},React.createElement("div",{className:"goods-pick-header"},"选择送达时间"),React.createElement("div",{className:"goods-pick-content goods-same-journey-time"},React.createElement("div",{onClick:this.selectSameJourneyTime,"data-type":"immedia",className:"goods-pick-time "+(1==l?"selected":"")},"尽快送达(预计"+d+"分钟后送达)"),de.map(function(t,a){return React.createElement(React.Fragment,{key:!0},React.createElement("div",{onClick:e.selectSameJourneyTime,"data-type":"appoint","data-index":a,className:"goods-pick-time "+(1!=l&&u==t?"selected":"")},t))})),React.createElement("div",{className:"goods-pick-bottom",onClick:this.closeGoodsPick},"关闭"))),me&&React.createElement("div",{className:"perfect-address-mask",onClick:this.hidePerfectAddress},React.createElement("div",{className:"perfect-address-box"},React.createElement("div",{className:"perfect-address-title"},"提示"),React.createElement("div",{className:"perfect-address-tips"},"请完善地址信息~"),React.createElement("div",{className:"perfect-address-bottom"},React.createElement("span",{onClick:this.manuallyAddAddress},"手动新增地址"),React.createElement("span",{onClick:this.importWeChatAddress,className:"import-weChat-address"},"导入微信地址"))))))}}]),t}(y.default);t.default=E},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(17),i=n(o),s=a(9),r=n(s),c=a(0),l=n(c),d=a(3),u=n(d),m=a(1),p=n(m),f=a(2),g=n(f);a(16);var h=a(5),v=a(12),_=n(v),y=a(6),E=a(7),b=n(E);a(521);var N=function(e){function t(e){(0,l.default)(this,t);var a=(0,p.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={page:1,status:0,orderId:"",modelId:"",franchiseeId:"",collectBenefitData:{},starData:[],isFail:!0,isWinning:!0,isComfort:!0,isWhole:!0,scratchId:"",isShowteam:!1,winingTitle:"",isScroll:!0,ifWxCoupon:!1,timestamp:"",signature:"",ifGetComfort:!1,goodsData:{goods_list:[],is_more:1,curpage:1,loading:!1,loadingFail:!1},needNum:0,formid:[]},a.seckillFunc=[],a.isMore=1,a.page=1,a.onReachBottom=function(){a.isMore&&a.loadList()},a.loadList=function(){var e=a;h.appMethod.sendRequest({url:"/index.php?r=appGroupBuy/goodsList",data:{page:e.page,page_size:4,status:1,app_id:e.data.appId,sub_shop_app_id:e.data.franchiseeId||""},success:function(t){for(var n=t.data,o={},i="goodsData",s=a.data.goodsData.goods_list,r=(s.length,e.downcountArr||[]),c=0;c<n.length;c++){var l=n[c];l.description="",l.original_price="0.00"==l.virtual_price?l.original_price:l.virtual_price}var d=t.data;o[i+".goods_list"]=s.concat(d),o[i+".is_more"]=t.is_more,o[i+".curpage"]=1,o[i+".loading"]=!1,o[i+".loadingFail"]=!1,e.downcountArr=r,e.setData(o),e.page++,e.isMore=t.is_more}})},a.loadMyTeams=function(){var e=a;h.appMethod.sendRequest({url:"/index.php?r=appGroupBuy/teamInfo",data:{team_token:e.data.team_token},success:function(t){if(!t.data.order_info)return void setTimeout(function(){e.loadMyTeams()},500);var n=[],o=t.data,i={},s=o.order_info||"",r=s.goods_info[0],c="0.00"==r.virtual_price?r.original_price:r.virtual_price,l=o.model_id||"",d=Number(o.max_user_num)||0,u=d-o.current_user_count||"",c="0.00"==o.virtual_price?o.goods_price:o.virtual_price;if(o.downCount={hours:"00",minutes:"00",seconds:"00",days:"00"},o.member){var m=o.member||"",p=[],f=3==o.activity_type?d-m.length+1:d-m.length,g=0,h={isNum:0,image:"http://cdn.jisuapp.cn//zhichi_frontend/static/webapp/images/group/loading-portrait.png"},v={isNum:0,image:"http://cdn.jisuapp.cn//zhichi_frontend/static/webapp/images/group/missing-head.png"},y={isNum:0,image:"http://cdn.jisuapp.cn//zhichi_frontend/static/webapp/images/group/success-loading.png"};for(var E in m)i={isNum:1,image:m[E]},p.push(i);if(d>5){switch(p.length){case 1:g=2;break;case 2:g=1;break;case 3:g=0}if(p.length<3){n=p;for(var b=0;b<g;b++)n.push(v);n.push(h),n.push(v)}else if(p.length>=3&&p.length<5){for(var N in p)N<3&&n.push(p[N]);n.push(h),n.push(v)}else if(p.length>=5)if(p.length<d){for(var N in p)N<3&&n.push(p[N]);n.push(h),n.push(v)}else{for(var N in p)N<4&&n.push(p[N]);n.push(y)}}else{n=p;for(var R=0;R<f;R++)n.push(v)}}o.server_time=t.current_time,o.seckill_end_time=_.default.formatTime(new Date(1e3*o.expired_time)),0==o.current_status||1==o.current_status?e.downcount=e.beforeGroupDownCount(o,e,"myTeams"):2==o.current_status&&(e.downcount=e.duringGroupDownCount(o,e,"myTeams")),o.parent_shop_app_id&&e.setData({appId:o.parent_shop_app_id,franchiseeId:o.app_id}),e.setData({originPrice:c,myTeams:o,modelId:l,goodsId:o.goods_id,activityId:o.activity_id,orderId:s.order_id,member:n,goodsDetail:s.goods_info[0],needNum:u}),console.log(a.state),e.loadList()}})},a.beforeGroupDownCount=function(e,t,n){var o=a;return h.appMethod.seckillDownCount({startTime:e.server_time,endTime:e.seckill_start_time,showDays:!0,callback:function(){var a={};a[n+".status"]=3,a[n+".current_status"]=3,a[n+".server_time"]=e.seckill_start_time,t.setData(a),e.server_time=e.seckill_start_time,o.downcount=o.duringGroupDownCount(e,t,n)}},t,n+".downCount")},a.duringGroupDownCount=function(e,t,a){return h.appMethod.seckillDownCount({startTime:e.server_time,endTime:e.seckill_end_time,showDays:!0,callback:function(){var e={};e[a+".status"]=4,e[a+".current_status"]=4,t.setData(e),"myTeams"==a&&t.loadMyTeams()}},t,a+".downCount")},a.touchStart=function(e){if(a.isStart){var t=a.drawRect(e.touches[0].x,e.touches[0].y);a.ctx.clearRect(t[0],t[1],t[2],t[2]),a.ctx.draw(!0)}},a.touchMove=function(e){if(a.isStart){var t=a.drawRect(e.touches[0].x,e.touches[0].y);a.ctx.clearRect(t[0],t[1],t[2],t[2]),a.ctx.draw(!0)}},a.touchEnd=function(e){if(a.isStart){var t=a.canvasWidth,n=a.canvasHeight,o=a.minX,i=a.minY,s=a.maxX,r=a.maxY;s-o>.5*t&&r-i>.5*n&&(a.ctx.draw(),a.endCallBack&&a.endCallBack(),a.isStart=!1,a.page.setData({isScroll:!0}))}},a.getGoldenData=function(e){var t=a;h.appMethod.sendRequest({url:"/index.php?r=appLotteryActivity/getTimeAfterConsume",method:"post",data:{order_id:e,app_id:t.data.appId,sub_shop_app_id:t.data.franchiseeId||""},success:function(e){e.data?t.data.code?t.setData({isWhole:!0}):t.setData({isWhole:!1,scratchId:e.data}):t.setData({isWhole:!0}),e.integral&&t.setData({rewardPointObj:{showModal:!0,count:e.integral,callback:""}})}})},a.showAreaClick=function(){var e=a;e.setData({isShowteam:!1}),h.appMethod.sendRequest({url:"/index.php?r=appLotteryActivity/lottery",hideLoading:!0,data:{activity_id:e.data.scratchId,app_id:e.data.appId,sub_shop_app_id:e.data.franchiseeId||""},success:function(t){var a=t.data;if(e.scratch.start(),"谢谢参与"==a.title)e.setData({isFail:!1});else{var n={ifWxCoupon:a.card_id||!1,timestamp:a.timestamp||"",signature:a.signature||""};a.is_comfort?n.isComfort=!1:(n.isWinning=!1,n.winingTitle=a.title),e.setData(n)}}})},a.onShareAppMessage=function(e){var t=a,n=(t.data.goodsDetail,a.data.myTeams||{}),o=n.order_info&&n.order_info.team_token,i=(a.data.modelId,a.data.franchiseeId?"&franchisee="+a.data.franchiseeId:""),s="/group/pages/gpgroupDetail/gpgroupDetail?teamtoken="+o+"&orderId="+t.data.orderId+i,r=n.share_cover?n.share_cover:"https://www.zhichiwangluo.com/zhichi_frontend/static/webapp/images/group_goods_share.jpeg",c=h.appMethod.getUserInfo("nickname");return{path:s,title:n.share_title?n.share_title:(c?c+" 喊你":"")+"拼单啦~ "+(t.data.myTeams&&t.data.myTeams.group_buy_price)+"元拼"+(t.data.myTeams&&t.data.myTeams.goods_title)+"，火爆抢购中......",imageUrl:r,success:function(e){h.appMethod.sendRequest({url:"/index.php?r=appLotteryActivity/getTime",data:{activity_id:t.data.scratchId,type:"share",app_id:t.data.appId,sub_shop_app_id:t.data.franchiseeId||""},success:function(e){}})},fail:function(e){}}},a.getCollectBenefitData=function(e){var t=a;h.appMethod.sendRequest({url:"/index.php?r=AppMarketing/CollectmeSendCoupon",data:{order_id:e,app_id:t.data.appId,sub_shop_app_id:t.data.franchiseeId||""},hideLoading:!0,success:function(e){for(var a=[],n=0;n<e.data.star_num;n++)a.push("light");for(var n=0;n<e.data.collect_num-e.data.star_num;n++)a.push("dark");t.setData({collectBenefitData:e.data,starData:a})}})},a.showMyTeam=function(){var e="/group/pages/gpmyOrder/gpmyOrder"+(a.data.franchiseeId?"?franchisee="+a.data.franchiseeId:"");a.saveUserFormId(function(){h.appMethod.turnToPage(e,1)})},a.openNewGroup=function(){var e=a.data.myTeams;if("0"==e.enable_status)return void h.appMethod.turnToPage("/pages/goodsDetail/goodsDetail?detail="+e.goods_id+(a.data.franchiseeId?"&franchisee="+a.data.franchiseeId:""));var t="/group/pages/gpgoodsDetail/gpgoodsDetail?goods_id="+a.data.myTeams.goods_id+"&activity_id="+a.data.myTeams.activity_id+(a.data.franchiseeId?"&franchisee="+a.data.franchiseeId:"");a.saveUserFormId(function(){h.appMethod.turnToPage(t)})},a.goToHomepage=function(){var e=h.appMethod.getHomepageRouter();h.appMethod.reLaunch({url:"/pages/"+e+"/"+e})},a.gotoDetail=function(e){var t=a,n=e.currentTarget.dataset,o="/group/pages/gpgoodsDetail/gpgoodsDetail?goods_id="+n.goodsid+"&activity_id="+n.activityid+(t.data.franchiseeId?"&franchisee="+t.data.franchiseeId:"");a.saveUserFormId(function(){h.appMethod.turnToPage(o)})},a.goToOrderDetail=function(){var e=a,t="/eCommerce/pages/groupOrderDetail/groupOrderDetail?id="+e.data.orderId+(e.data.franchiseeId?"&franchisee="+e.data.franchiseeId:""),n="/eCommerce/pages/goodsOrderDetail/goodsOrderDetail?detail="+e.data.orderId+(e.data.franchiseeId?"&franchisee="+e.data.franchiseeId:""),o="/eCommerce/pages/appointmentOrderDetail/appointmentOrderDetail?detail="+e.data.orderId+(e.data.franchiseeId?"&franchisee="+e.data.franchiseeId:""),i="/newAppointment/pages/newAppointmentOrderDetail/newAppointmentOrderDetail?detail="+e.data.orderId+(e.data.franchiseeId?"&franchisee="+e.data.franchiseeId:"");e.saveUserFormId(function(){"true"==this.data.is_group?h.appMethod.turnToPage(t,!0):this.data.code?h.appMethod.turnToPage(o,!0):this.data.is_newAppointment?h.appMethod.turnToPage(i,!0):h.appMethod.turnToPage(n,!0)})},a.goToGroupDetail=function(){var e="/group/pages/gporderDetail/gporderDetail?from=paySuccess&teamtoken="+a.data.myTeams.order_info.team_token+(a.data.franchiseeId?"&franchisee="+a.data.franchiseeId:"");a.saveUserFormId(function(){h.appMethod.turnToPage(e)})},a.getOrderDetail=function(){var e=a;h.appMethod.getOrderDetail({data:{order_id:e.data.orderId,app_id:e.data.appId,sub_shop_app_id:e.data.franchiseeId},success:function(t){e.setData({orderInfo:t.data[0].form_data})}})},a.toAddCard=function(){var e=a.data,t=e.ifWxCoupon,n=a;h.appMethod.addCard({cardList:[{cardId:t,cardExt:'{"nonce_str":"'+e.timestamp+'","timestamp":"'+e.timestamp+'", "signature":"'+e.signature+'"}'}],success:function(t){n.setData({ifWxCoupon:!1,ifGetComfort:!0}),h.appMethod.sendRequest({url:"/index.php?r=appLotteryActivity/recvWeChatCoupon",data:{card_id:t.cardList[0].cardId,app_id:n.data.appId,sub_shop_app_id:e.franchiseeId||"",activity_id:e.scratchId},success:function(e){h.appMethod.showModal({title:"提示",content:"领取卡券成功",showCancel:!1})}})}})},a.turnToGoodsDetail=function(){var e="/group/pages/gpgoodsDetail/gpgoodsDetail?goods_id="+a.data.myTeams.goods_id+"&activity_id="+a.data.myTeams.activity_id+(a.data.franchiseeId?"&franchisee="+a.data.franchiseeId:"");a.saveUserFormId(function(){h.appMethod.turnToPage(e)})},a.inviteFriends=function(){var e=a,t=a.data.myTeams,n=h.appMethod.createAnimation({timingFunction:"ease",duration:400});h.appMethod.sendRequest({url:"/index.php?r=appGroupBuy/getShareQRCode",data:{goods_id:t.goods_id,activity_id:t.activity_id,app_id:e.data.appId,sub_shop_app_id:e.data.franchiseeId||"",type:6,text:t.goods_title,price:t.group_buy_price,virtual_price:e.data.originPrice,goods_img:t.img_urls?t.img_urls[0]:t.goods_cover,sub_shop_id:e.data.franchiseeId,user_token:h.appMethod.globalData.PromotionUserToken||"",team_token:t.order_info.team_token,order_id:t.order_info.order_id},success:function(t){n.bottom("0").step(),e.setData({"pageQRCodeData.shareDialogShow":0,"pageQRCodeData.shareMenuShow":!0,"pageQRCodeData.goodsInfo":t.data,"pageQRCodeData.animation":n.export()})}})},a.getAppECStoreConfig=function(){h.appMethod.getAppECStoreConfig(function(e){a.setData({storeStyle:e.color_config})},a.data.franchiseeId)},a.formSubmit_collect=function(e){a.data.formid.push(e.target.formId)},a.saveUserFormId=function(e){h.appMethod.showLoading({title:"加载中"});var t=a;h.appMethod.sendRequest({url:"/index.php?r=api/AppMsgTpl/saveUserFormId",method:"post",data:{app_id:t.data.appId,sub_shop_app_id:t.data.franchiseeId||"",form_id:t.data.formid||[]},complete:function(){h.appMethod.hideLoading(),e&&e(),t.setData({formid:[]})}})},document.title="支付成功",a}return(0,g.default)(t,e),(0,u.default)(t,[{key:"componentWillMount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,y.getCurrentPageQueryParams)(),t=this;1==e.collectBenefit&&(t.getCollectBenefitData(e.detail),t.setData({status:1})),t.setData({team_token:e.teamToken,orderId:e.detail,franchiseeId:e.franchisee||"",is_group:e.is_group||"",code:e.code||"",is_newAppointment:e.is_newAppointment||""}),t.getOrderDetail(),this.loadMyTeams(),this.getAppECStoreConfig(),t.getGoldenData(e.detail);window.innerWidth,window.innerWidth}},{key:"componentWillUnmount",value:function(){this.downcount&&this.downcount.clear()}},{key:"render",value:function(){var e=this,t=this.state,a=(t.showGetUserInfo,t.pageQRCodeData,t.myTeams),n=t.goodsDetail,o=t.originPrice,s=t.goodsInfo,c=t.needNum,l=t.member,d=t.collectBenefitData,u=t.starData,m=t.status,p=t.isWhole,f=t.isFail,g=t.isWinning,h=t.winingTitle,v=t.isComfort,_=t.ifGetComfort,E=t.ifWxCoupon,b=t.hideCanvas,N=t.scratch,R=(t.isScroll,t.isShowteam),k=t.ifUserInfo,w=t.userInfo,x=t.userInfoCollectConfig,C=t.isGetPhoneNumber,D=t.todayDate,S=t.userCityArr,I=t.vipCardInfo,M=t.isShowVipCardDialog,T=(t.orderId,t.franchisee,t.goodsData);return React.createElement("div",{className:"official-page gp-pay-success"},React.createElement(React.Fragment,null,React.createElement("div",{className:"collage-paySuccess"},React.createElement("div",{className:"collage-section collage-goods",style:(0,y.convertLineStyleData)("background:url("+(a&&a.activity_info&&a.activity_info.pay_success_img||"https://img.zhichiwangluo.com/zcimgdir/album/file_5c35b5412bd8d.jpg")+") no-repeat top;background-size:100%;")},React.createElement("div",{className:"goods-infor  isRelative",onClick:this.turnToGoodsDetail},React.createElement("div",{className:"goods-detail"},React.createElement("div",{className:"image-wrap"},React.createElement("img",{src:a&&a.goods_cover})),React.createElement("div",{className:"content-wrap"},React.createElement("div",{className:"title"},React.createElement("div",{className:"classify-type"},React.createElement("div",null,React.createElement("span",{className:"ico-moon icon-number-people"})),React.createElement("span",null,a&&0==a.activity_type?a.max_user_num+"人团":a&&1==a.activity_type?"新人团":a&&2==a.activity_type?"阶梯团":a&&3==a.activity_type?"帮帮团":"抽奖团")),n&&n.goods_name),React.createElement("div",{className:"price"},React.createElement("label",{className:"min-price"},"¥",React.createElement("span",null,a&&a.group_buy_price)),React.createElement("span",{className:"origin-price"},"¥"+o)))),React.createElement("form",{className:"getFormId"},React.createElement("button",{type:"button","data-id":s&&s.id,"data-orderid":s&&s.order_id,"data-bargainid":s&&s.bargain_id,onClick:this.formSubmit_collect,className:"invisibleclass"}))),React.createElement("div",{className:"collage-section collage-infor"},a&&4!=a.activity_type?React.createElement(React.Fragment,null,2==a.current_status&&React.createElement("div",{className:"loading-stand"},React.createElement("div",{className:"tip"},React.createElement("div",null,"2"!=a.activity_type?React.createElement(React.Fragment,null,"还差",React.createElement("span",{className:"needNum"},c+"人"),"拼购成功, 剩余"):React.createElement(React.Fragment,null,"人数越多, 价格越低, 剩余")),React.createElement("div",{className:"countDown"},("00"!=a.downCount.days||"0"!=a.downCount.days)&&React.createElement(React.Fragment,null,React.createElement("span",null,a.downCount.days),React.createElement("span",null,"天")),React.createElement("span",null,a.downCount.hours),React.createElement("span",null,":"),React.createElement("span",{style:(0,y.convertLineStyleData)("width:48rpx;")},a.downCount.minutes),React.createElement("span",null,":"),React.createElement("span",{style:(0,y.convertLineStyleData)("width:48rpx;")},a.downCount.seconds))),React.createElement("div",{className:"member-cover"},l.map(function(e,t){return React.createElement("div",{key:t},React.createElement("img",{src:e.image,style:(0,y.convertLineStyleData)("border: "+(1==e.isNum?"2rpx solid #ff7100":""))}),0==t&&React.createElement("div",{className:"leader-logo"},"团长"))})),React.createElement("div",{className:"btn-wrap"},React.createElement("div",{className:"open-new isRelative",onClick:this.inviteFriends},"邀请好友参团",React.createElement("form",{className:"getFormId"},React.createElement("button",{type:"button",onClick:this.formSubmit_collect,"data-id":s&&s.id,"data-orderid":s&&s.order_id,"data-bargainid":s&&s.bargain_id,className:"invisibleclass"}))),React.createElement("div",{className:"show-own isRelative",onClick:this.showMyTeam},"查看我的拼团",React.createElement("form",{className:"getFormId"},React.createElement("button",{type:"button",onClick:this.formSubmit_collect,"data-id":s.id,"data-orderid":s.order_id,"data-bargainid":s.bargain_id,className:"invisibleclass"}))))),3==a.current_status&&React.createElement("div",{className:"success-stand"},React.createElement("div",{className:"tip"},3==a.activity_type?React.createElement(React.Fragment,null,React.createElement("span",{style:(0,y.convertLineStyleData)("color:#ff7100;")},"拼团成功，"),"商家将给团长发货"):React.createElement(React.Fragment,null,React.createElement("span",{style:(0,y.convertLineStyleData)("color:#ff7100;")},"拼购成功，"),"请耐心等待商家发货")),React.createElement("div",{className:"member-cover"},l.map(function(e,t){return React.createElement("div",{key:t},React.createElement("img",{src:e.image,style:(0,y.convertLineStyleData)("border: "+(1==e.isNum?"2rpx solid #ff7100":""))}),0==t&&React.createElement("div",{className:"leader-logo"},"团长"))})),React.createElement("div",{className:"btn-wrap"},React.createElement("div",{className:"open-new isRelative",onClick:this.openNewGroup},"开启新团",React.createElement("form",{className:"getFormId"},React.createElement("button",{type:"button",onClick:this.formSubmit_collect,"data-id":s&&s.id,"data-orderid":s&&s.order_id,"data-bargainid":s&&s.bargain_id,className:"invisibleclass"}))),React.createElement("div",{className:"show-own isRelative",onClick:this.showMyTeam},"查看我的拼团",React.createElement("form",{className:"getFormId"},React.createElement("button",{type:"button",onClick:this.formSubmit_collect,"data-id":s.id,"data-orderid":s.order_id,"data-bargainid":s.bargain_id,className:"invisibleclass"}))))),(4==a.current_status||5==a.current_status)&&React.createElement("div",{className:"fail-stand"},React.createElement("div",{className:"tip"},React.createElement("div",null,"超过时限,",React.createElement("span",{style:(0,y.convertLineStyleData)("color:#ff7100;")},"团已过期"))),React.createElement("div",{className:"member-cover"},l.map(function(e,t){return React.createElement("div",{key:t},React.createElement("img",{src:e.image,style:(0,y.convertLineStyleData)("border: "+(1==e.isNum?"2rpx solid #ff7100":""))}),0==t&&React.createElement("div",{className:"leader-logo"},"团长"))})),React.createElement("div",{className:"btn-wrap"},React.createElement("div",{className:"open-new isRelative",onClick:this.openNewGroup},"开启新团",React.createElement("form",{className:"getFormId"},React.createElement("button",{type:"button",onClick:this.formSubmit_collect,"data-id":s&&s.id,"data-orderid":s&&s.order_id,"data-bargainid":s&&s.bargain_id,className:"invisibleclass"})))))):React.createElement(React.Fragment,null,a&&2==a.current_status&&React.createElement("div",{className:"success-draw"},React.createElement("div",{className:"tip"},React.createElement("div",null,"抽奖结果将于",React.createElement("div",{className:"countDown"},("00"!=a.downCount.days||"0"!=a.downCount.days)&&React.createElement(React.Fragment,null,React.createElement("span",null,a.downCount.days),React.createElement("span",null,"天")),React.createElement("span",null,a.downCount.hours),React.createElement("span",null,":"),React.createElement("span",{style:(0,y.convertLineStyleData)("width:48rpx;")},a.downCount.minutes),React.createElement("span",null,":"),React.createElement("span",{style:(0,y.convertLineStyleData)("width:48rpx;")},a.downCount.seconds)),"后揭晓")),React.createElement("div",{className:"member-cover"},React.createElement("div",null,React.createElement("img",{src:"http://cdn.jisuapp.cn//zhichi_frontend/static/webapp/images/group/question-mask.png",style:(0,y.convertLineStyleData)("border: "+(1==item.isNum?"2rpx solid #ff7100":""))}))),React.createElement("div",{className:"btn-wrap"},React.createElement("div",{className:"open-new isRelative",onClick:this.inviteFriends},"邀请好友",React.createElement("form",{className:"getFormId"},React.createElement("button",{type:"button",onClick:this.formSubmit_collect,"data-id":s&&s.id,"data-orderid":s&&s.order_id,"data-bargainid":s&&s.bargain_id,className:"invisibleclass"}))),React.createElement("div",{className:"show-own isRelative",onClick:this.showMyTeam},"查看我的拼团",React.createElement("form",{className:"getFormId"},React.createElement("button",{type:"button",onClick:this.formSubmit_collect,"data-id":s&&s.id,"data-orderid":s&&s.order_id,"data-bargainid":s&&s.bargain_id,className:"invisibleclass"}))))),a&&3==a.current_status&&1==a.is_winner&&React.createElement("div",{className:"success-draw"},React.createElement("div",{className:"tip"},React.createElement("div",null,"运气爆棚！",React.createElement("span",{style:(0,y.convertLineStyleData)("color:#ff7100;")},"中奖啦"),"～")),React.createElement("div",{className:"member-cover"},React.createElement("div",null,React.createElement("img",{src:a.winner,style:(0,y.convertLineStyleData)("border: 2rpx solid #ff7100;")}))),React.createElement("div",{className:"btn-wrap"},React.createElement("div",{className:"open-new isRelative",onClick:this.goToGroupDetail},"查看我的拼团",React.createElement("form",{className:"getFormId"},React.createElement("button",{type:"button",onClick:this.formSubmit_collect,"data-id":s&&s.id,"data-orderid":s&&s.order_id,"data-bargainid":s&&s.bargain_id,className:"invisibleclass"}))))),a&&(4==a.current_status||5==a.current_status||0==a.is_winner)&&React.createElement("div",{className:"loading-draw"},React.createElement("div",{className:"tip"},0==a.is_winner?React.createElement(React.Fragment,null,"很遗憾，您未中奖"):React.createElement(React.Fragment,null,"很遗憾，本次活动未达到开奖门槛")),React.createElement("div",{className:"member-cover",style:(0,y.convertLineStyleData)("margin-bottom:50rpx;width:165rpx;height:165rpx;")},React.createElement("img",{src:"http://cdn.jisuapp.cn//zhichi_frontend/static/webapp/images/group/draw-fail.png"})))))),React.createElement("div",{className:"collage-section"},1==m&&React.createElement("div",{className:"collect-benefit-area"},React.createElement("div",{className:"activity-box"},React.createElement("div",{className:"line"}),React.createElement("div",{className:"activity-title"},"活动"),React.createElement("div",{className:"line"})),React.createElement("div",{className:"collect-item"},React.createElement("div",{className:"star-num"},"集集乐个数: "+d.star_num),React.createElement("div",{className:"star-list"},u.map(function(e,t){return React.createElement(React.Fragment,{key:t},"light"==e?React.createElement("img",{className:"star-item",src:d.light_img}):"dark"==e&&React.createElement("img",{className:"star-item",src:d.dark_img}))})),d.star_num==d.collect_num&&React.createElement("div",{className:"star-full"},React.createElement("div",{className:"star-full-text"},"满"))),React.createElement("div",{className:"tip-item"},d.star_num==d.collect_num?React.createElement("div",null,"获得一张"+d.coupon_title):d.star_num!=d.collect_num&&React.createElement("div",null,"消费"+(0==d.play_type?"每满":"超过")+d.value+"元，累计一颗星，集满可获得"+d.coupon_title+"一张"))),React.createElement("div",{className:"scratchWhole",hidden:p},React.createElement("div",{className:"activity-box scratch-activity"},React.createElement("div",{className:"line"}),React.createElement("div",{className:"activity-title"},"活动"),React.createElement("div",{className:"line"})),React.createElement("div",{className:"scratchArea"},React.createElement("div",{className:"scratchFail",hidden:f},React.createElement("img",{src:"http://cdn.jisuapp.cn/static/webapp/images/scratchFail.png"}),React.createElement("div",{className:"failTitle"},React.createElement("button",{className:"failShare"},"分享"),React.createElement("div",{className:"failText"},"很遗憾没有中奖哦"))),React.createElement("div",{className:"scratchWinning",hidden:g},React.createElement("img",{src:"http://cdn.jisuapp.cn/static/webapp/images/scratchPrize.png"}),React.createElement("div",{className:"winningTitle"},React.createElement("button",{className:"winningShare"},"分享"),React.createElement("div",{className:"winningText"},"恭喜你获得了"),React.createElement("div",{className:"winningText winningValue"},h))),React.createElement("div",{className:"scratchComfort",hidden:v},React.createElement("img",{src:"http://cdn.jisuapp.cn/static/webapp/images/scratchComfort.png"}),React.createElement("div",{className:"comfortTitle"},React.createElement("button",{className:"comfortShare"},"分享"),_?React.createElement("div",{className:"comfortText"},"已领取，在微信卡包中查看哦~"):React.createElement("div",(0,r.default)({className:"comfortText"},"className","comfortText"),"又没中奖，送你一个小礼品"),!E&&!_&&React.createElement("div",{className:"comfortText"},">在优惠券卡包进行查收哦~"))),React.createElement("div",{className:"scratch_wp",hidden:b,style:(0,y.convertLineStyleData)("width: "+(N&&N.width)+"px; height: "+(N&&N.height)+"px;")},React.createElement("canvas",{className:"scratch-canvas",style:(0,y.convertLineStyleData)("width: "+(N&&N.width)+"px;height: "+(N&&N.height)+"px;"),onTouchStart:this.touchStart,onTouchMove:this.touchMove,onTouchEnd:this.touchEnd},R&&React.createElement(CoverView,{className:"showArea"},React.createElement(CoverView,{className:"showTitle"},"赢取优惠大奖"),React.createElement(CoverView,{className:"showBtn",onClick:this.showAreaClick},"点我刮奖")))))),M&&React.createElement("div",{className:"vipCard-dialog",onClick:this.closeVipCardDialog,"data-type":"shadow"},!k&&React.createElement("div",{className:"content"},React.createElement("div",{className:"top-block",style:(0,y.convertLineStyleData)("background-image: url(http://www.zhichiwangluo.com/zhichi_frontend/static/webapp/images/transfer/vip-card-dialog-head2.png);")},React.createElement("span",{className:"text"},"请填写会员信息")),React.createElement("div",{className:"vip-info"},1==x.collect_username&&React.createElement("div",{className:"info-item"},React.createElement("div",{className:"item-name"},"姓名"),React.createElement("div",{className:"item-right"},React.createElement("input",{type:"text",placeholder:"请填写姓名",maxlength:"10",value:w.nickname,"data-type":"name",onInput:this.inputUserInfo}))),1==x.collect_phone&&React.createElement("div",{className:"info-item"},React.createElement("div",{className:"item-name"},"电话"),React.createElement("div",{className:"item-right"},React.createElement("input",{type:"number",disabled:"true",placeholder:"请授权手机号码",value:w.phone,"data-type":"phone",onInput:this.inputUserInfo}),C&&React.createElement("button",{className:"get-authorize",style:(0,y.convertLineStyleData)("background-color: #D2D2D2")},"已授权"),!C&&React.createElement("button",{className:"get-authorize",style:(0,y.convertLineStyleData)("background-color: #FF7100"),onGetphonenumber:this.getPhoneNumber},"获得授权"))),1==x.collect_birthday&&React.createElement("div",{className:"info-item"},React.createElement("div",{className:"item-name"},"生日"),React.createElement("div",{className:"item-right"},React.createElement(i.default,{mode:"date",value:w.birthday,start:"1900-01-01",end:D,onChange:this.bindBirthdayChange},React.createElement("div",{className:"picker",style:(0,y.convertLineStyleData)("color: "+(""===w.birthday?"#999":"#000"))},""===w.birthday?"请选择生日信息":w.birthday)),React.createElement("div",{className:"ico-moon icon-rightarrow"}))),1==x.collect_region&&React.createElement("div",{className:"info-item"},React.createElement("div",{className:"item-name"},"城市"),React.createElement("div",{className:"item-right"},React.createElement(i.default,{mode:"region",onChange:this.bindCityChange,value:S},React.createElement("div",{className:"picker",style:(0,y.convertLineStyleData)("color: "+(""===S[0]?"#999":"#000"))},""===S[0]?"请填写所在城市":S[0]+S[1]+S[2])),React.createElement("div",{className:"ico-moon icon-rightarrow"}))),React.createElement("div",{className:"save-btn",onClick:this.saveUserInfo},"立即领取")),React.createElement("div",{className:"ico-moon icon-closed","data-type":"shadow"})),k&&React.createElement("div",{className:"content"},React.createElement("div",{className:"top-block",style:(0,y.convertLineStyleData)("background-image: url(http://www.zhichiwangluo.com/zhichi_frontend/static/webapp/images/transfer/vip-card-dialog-head.png);")},React.createElement("div",{className:"text-block"},React.createElement("div",{className:"success-text"},"注册会员成功"),React.createElement("div",{className:"success-text"},"恭喜获得以下权益"))),React.createElement("div",{className:"interests-block"},I.discount&&React.createElement("div",{className:"interests-item"},React.createElement("img",{className:"icon",src:"http://www.zhichiwangluo.com/zhichi_frontend/static/webapp/images/transfer/discount-icon.svg"}),React.createElement("div",{className:"count"},I.discount+"折"),React.createElement("div",{className:"text"},"会员折扣")),I.coupon_list&&I.coupon_list.length&&React.createElement("div",{className:"interests-item"},React.createElement("img",{className:"icon",src:"http://www.zhichiwangluo.com/zhichi_frontend/static/webapp/images/transfer/coupon-icon.svg"}),React.createElement("div",{className:"count"},I.coupon_list.length+"张"),React.createElement("div",{className:"text"},"会员赠送")),I.integral&&0!=I.integral&&React.createElement("div",{className:"interests-item"},React.createElement("img",{className:"icon",src:"http://www.zhichiwangluo.com/zhichi_frontend/static/webapp/images/transfer/integral-icon.svg"}),React.createElement("div",{className:"count"},I.integral+"+"),React.createElement("div",{className:"text"},"积分赠送"))),React.createElement("div",{className:"ico-moon icon-closed","data-type":"shadow"})))),T.goods_list.length>0&&React.createElement("div",{className:"collage-section collage-more"},React.createElement("div",{className:"collage-section title"},"更多精彩拼团"),React.createElement("div",null,React.createElement("div",{className:"goods-list opposite"},T.goods_list.map(function(t,a){return React.createElement("div",{className:"goods-item isRelative",key:t.goods_id,"data-goodsid":t.goods_id,"data-activityid":t.activity_id,onClick:e.gotoDetail},React.createElement("div",{className:"image-wrap"},React.createElement("img",{src:t.cover})),React.createElement("div",{className:"content-wrap"},React.createElement("div",{className:"title"},React.createElement("div",{className:"classify-type"},React.createElement("div",null,React.createElement("span",{className:"ico-moon icon-number-people"})),React.createElement("span",null,0==t.activity_type?t.num_of_people.length>1?"多人团":t.num_of_people[0]+"人团":1==t.activity_type?"新人团":2==t.activity_type?"阶梯团":3==t.activity_type?"帮帮团":"抽奖团")),t.title),t.salesnum?React.createElement("div",{className:"hava-sales"},React.createElement("div",{className:"price"},React.createElement("span",{className:"min-price"},"¥",React.createElement("span",null,t.group_buy_price)),React.createElement("span",{className:"origin-price"},"¥"+t.original_price)),React.createElement("div",{className:"status"},React.createElement("div",{className:"sales"},"已团"+t.salesnum+"件"),React.createElement("div",{className:"to-join"},0==t.status?React.createElement(React.Fragment,null,React.createElement("button",{className:"ready"},"即将开团")):1==t.status?React.createElement(React.Fragment,null,React.createElement("button",{className:"remain"},"提醒我")):2==t.status?React.createElement(React.Fragment,null,React.createElement("button",{className:"reminded"},"已提醒")):3==t.status?React.createElement(React.Fragment,null,React.createElement("button",{className:"go"},"去拼团")):4==t.status&&React.createElement(React.Fragment,null,React.createElement("button",{className:"over"},"已结束"))))):React.createElement("div",{className:"no-sales"},React.createElement("div",{className:"price"},React.createElement("div",{className:"min-price"},"¥",React.createElement("span",null,t.group_buy_price)),React.createElement("div",{className:"origin-price"},"¥"+t.original_price)),React.createElement("div",{className:"to-join"},0==t.status?React.createElement(React.Fragment,null,React.createElement("button",{className:"ready"},"即将开团")):1==t.status?React.createElement(React.Fragment,null,React.createElement("button",{className:"remain"},"提醒我")):2==t.status?React.createElement(React.Fragment,null,React.createElement("button",{className:"reminded"},"已提醒")):3==t.status?React.createElement(React.Fragment,null,React.createElement("button",{className:"go"},"去拼团")):4==t.status&&React.createElement(React.Fragment,null,React.createElement("button",{className:"over"},"已结束"))))),React.createElement("form",{className:"getFormId"},React.createElement("button",{type:"button",onClick:e.formSubmit_collect,"data-id":s&&s.id,"data-orderid":s&&s.order_id,"data-bargainid":s&&s.bargain_id,className:"invisibleclass"})))})))))))}}]),t}(b.default);t.default=N},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(0),i=n(o),s=a(3),r=n(s),c=a(1),l=n(c),d=a(2),u=n(d),m=a(5),p=a(6),f=a(11),g=a(7),h=n(g);a(523);var v=function(e){function t(e){(0,i.default)(this,t);var a=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={haveData:!0,goodsList:[],isLeader:!0,sub_shop_app_id:"",type:0,formid:[],shareInfo:{group_price:"",share_cover:"",share_title:""}},a.page=1,a.isMore=1,a.pageInit=function(){var e=a;m.appMethod.isLogin()?e.loadAll():m.appMethod.goLogin({success:function(){e.loadAll()}})},a.loadAll=function(){a.loadMyTeams()},a.loadMyTeams=function(){var e=a;m.appMethod.sendRequest({url:"/index.php?r=appGroupBuy/myTeams",data:{page:e.page,status:e.data.type,is_leader:e.data.isLeader?"1":"0",page_size:10,sub_shop_app_id:e.data.franchiseeId||""},success:function(t){if(0!==e.isMore){var a="",n="",o=e.data.goodsList.concat(t.data);for(var i in o)o[i].index=i,n=1e3*t.current_time,a=e.countTime(1e3*o[i].expired_time-n),o[i].expired="(距结束约"+("00"!=a[0]?a[0]+"天":"00"!=a[1]?a[1]+"小时":"00"!=a[2]?a[2]+"分":"00"!=a[3]?"1分":"")+")";e.setData({goodsList:o,haveData:o.length>0}),e.page++,e.isMore=t.is_more}}})},a.goToGroupDetail=function(e){var t=e.currentTarget.dataset.subid,n=t?"&franchisee="+t:"",o=e.currentTarget.dataset,i="/group/pages/gporderDetail/gporderDetail?from=myOrder&teamtoken="+o.teamtoken+n;a.saveUserFormId(function(){m.appMethod.turnToPage(i)})},a.inviteFriends=function(e){var t=a,n=e.currentTarget.dataset,o=n.subid,i=e.currentTarget.dataset.index,s=a.data.goodsList[i],r=s.goods_info[0],c=s.goods_id,l=s.activity_id,d=m.appMethod.createAnimation({timingFunction:"ease",duration:400});m.appMethod.sendRequest({url:"/index.php?r=appGroupBuy/GetGoodsShareInfo",data:{goods_id:c,activity_id:l,sub_shop_app_id:o||""},success:function(e){var a={};a["shareInfo.group_price"]=e.data.price,a["shareInfo.share_cover"]=e.data.share_cover,a["shareInfo.share_title"]=e.data.share_title,t.setData(a),m.appMethod.sendRequest({url:"/index.php?r=appGroupBuy/getShareQRCode",data:{goods_id:c,activity_id:l,sub_shop_app_id:o||"",type:6,text:r.goods_name,price:r.price,virtual_price:"0.00"==r.virtual_price?r.original_price:r.virtual_price,goods_img:r.cover,user_token:m.appMethod.globalData.PromotionUserToken||"",team_token:s.team_token,order_id:s.order_id},success:function(e){d.bottom("0").step(),t.setData({"pageQRCodeData.shareDialogShow":0,"pageQRCodeData.shareMenuShow":!0,"pageQRCodeData.goodsInfo":e.data,"pageQRCodeData.animation":d.export(),goodsShareData:s})}})}})},a.changeIdentity=function(e){var t=e.currentTarget.dataset;a.setData({isLeader:"true"==t.isleader,type:0,goodsList:[]}),a.page=1,a.isMore=1,a.loadMyTeams()},a.changeType=function(e){var t=e.currentTarget.dataset;a.setData({type:t.type,goodsList:[]}),a.page=1,a.isMore=1,a.loadMyTeams()},a.openNewGroup=function(e){var t=e.currentTarget.dataset,n=t.subid===m.appMethod.getAppId()?"":t.subid,o=n?"&franchisee="+n:"",i="/group/pages/gpgoodsDetail/gpgoodsDetail?goods_id="+t.goodsid+"&activity_id="+t.activityid+o;return 3==t.status&&4==t.type||0==t.groupbuy?void m.appMethod.turnToPage("/pages/goodsDetail/goodsDetail?detail="+t.goodsid+o):"5"==t.status?void m.appMethod.showModal({content:"该拼团活动已结束"}):void a.saveUserFormId(function(){m.appMethod.turnToPage(i)})},a.gotoGoodsOrder=function(e){var t=e.currentTarget.dataset.subid,n=t?"&franchisee="+t:"",o="/eCommerce/pages/goodsOrderDetail/goodsOrderDetail?detail="+e.currentTarget.dataset.orderid+n;a.saveUserFormId(function(){m.appMethod.turnToPage(o)})},a.formSubmit_collect=function(e){a.data.formid.push(e.target.formId)},a.saveUserFormId=function(e){m.appMethod.showLoading({title:"加载中"});var t=a;m.appMethod.sendRequest({url:"/index.php?r=api/AppMsgTpl/saveUserFormId",method:"post",data:{form_id:t.data.formid||[],sub_shop_app_id:t.data.franchiseeId||""},complete:function(){m.appMethod.hideLoading(),e&&e(),t.setData({formid:[]})}})},a.countTime=function(e){if(e<0)return["00","00","00"];var t=[],a=Math.floor(e/864e5),n=Math.floor(e%864e5/36e5),o=Math.floor(e%36e5/6e4),i=Math.floor(e%6e4/1e3);return a=String(a).length>=2?a:+a,n=String(n).length>=2?n:"0"+n,o=String(o).length>=2?o:"0"+o,i=String(i).length>=2?i:"0"+i,t[0]=a,t[1]=n,t[2]=o,t[3]=i,t},a.onPullDownRefresh=function(){},a.onReachBottom=function(){a.isMore&&a.loadAll()},a.onShareAppMessage=function(e){var t=a,n=a.data.goodsShareData,o=n.goods_info[0],i=a.data.shareInfo,s=n.team_token,r=(n.activity_type,m.appMethod.globalData.PromotionUserToken&&m.appMethod.globalData.PromotionUserToken,"/group/pages/gpgroupDetail/gpgroupDetail?teamtoken="+s),c=m.appMethod.getUserInfo("nickname"),l=i.share_cover?i.share_cover:"https://www.zhichiwangluo.com/zhichi_frontend/static/webapp/images/group_goods_share.jpeg",d=i.share_title?i.share_title:(c?c+" 喊你":"")+"拼单啦~ "+i.group_price+"元拼"+o.goods_name+"，火爆抢购中......";return m.appMethod.shareAppMessage({title:d,path:r,imageUrl:l,success:function(e){m.appMethod.showToast({title:"转发成功",duration:500}),m.appMethod.sendRequest({hideLoading:!0,url:"/index.php?r=appShop/getIntegralLog",data:{add_time:e,sub_shop_app_id:t.data.franchiseeId||""},success:function(e){0==e.status&&e.data&&t.setData({rewardPointObj:{showModal:!0,count:e.data,callback:""}})}})}})},document.title="我的拼团",a}return(0,u.default)(t,e),(0,r.default)(t,[{key:"componentWillMount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,p.getCurrentPageQueryParams)();this.setData({franchiseeId:e.franchisee||""}),this.pageInit()}},{key:"componentDidMount",value:function(){}},{key:"componentDidShow",value:function(){}},{key:"componentDidHide",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this,t=this.state,a=(t.showGetUserInfo,t.pageQRCodeData,t.isLeader),n=t.goodsInfo,o=t.type,i=t.goodsList,s=t.haveData;return React.createElement("div",{className:"official-page gp-my-order"},React.createElement(React.Fragment,null,React.createElement("div",{className:"collage-myOrder"},React.createElement("div",{className:"collage-section collage-classify"},React.createElement("div",{className:"total-classify"},React.createElement("div",{className:(a?"active":"")+"  isRelative",onClick:this.changeIdentity,"data-isleader":"true"},"我发起的团",React.createElement("form",{className:"getFormId"},React.createElement("button",{type:"button",onClick:this.formSubmit_collect,"data-id":n&&n.id,"data-orderid":n&&n.order_id,"data-bargainid":n&&n.bargain_id,className:"invisibleclass"}))),React.createElement("div",{className:(a?"":"active")+" isRelative",onClick:this.changeIdentity,"data-isleader":"false"},"我参与的团",React.createElement("form",{className:"getFormId"},React.createElement("button",{type:"button",onClick:this.formSubmit_collect,"data-id":n&&n.id,"data-orderid":n&&n.order_id,"data-bargainid":n&&n.bargain_id,className:"invisibleclass"})))),React.createElement(f.ScrollView,{className:"branch-classify","scroll-x":"true"},React.createElement("div",{className:("0"==o?"active":"")+" isRelative",onClick:this.changeType,"data-type":"0"},"全部",React.createElement("form",{className:"getFormId"},React.createElement("button",{type:"button",onClick:this.formSubmit_collect,"data-id":n&&n.id,"data-orderid":n&&n.order_id,"data-bargainid":n&&n.bargain_id,className:"invisibleclass"}))),React.createElement("div",{className:("2"==o?"active":"")+" isRelative",onClick:this.changeType,"data-type":"2"},"拼团中",React.createElement("form",{className:"getFormId"},React.createElement("button",{type:"button",onClick:this.formSubmit_collect,"data-id":n&&n.id,"data-orderid":n&&n.order_id,"data-bargainid":n&&n.bargain_id,className:"invisibleclass"}))),React.createElement("div",{className:("3"==o?"active":"")+" isRelative",onClick:this.changeType,"data-type":"3"},"拼团成功",React.createElement("form",{className:"getFormId"},React.createElement("button",{type:"button","data-id":n&&n.id,"data-orderid":n&&n.order_id,"data-bargainid":n&&n.bargain_id,onClick:this.formSubmit_collect,className:"invisibleclass"}))),React.createElement("div",{className:("4"==o?"active":"")+" isRelative",onClick:this.changeType,"data-type":"4"},"拼团结束",React.createElement("form",{className:"getFormId"},React.createElement("button",{type:"button",onClick:this.formSubmit_collect,"data-id":n&&n.id,"data-orderid":n&&n.order_id,"data-bargainid":n&&n.bargain_id,className:"invisibleclass"}))),a&&React.createElement("div",{className:("5"==o?"active":"")+" isRelative",onClick:this.changeType,"data-type":"5"},"已关闭",React.createElement("form",{className:"getFormId"},React.createElement("button",{type:"button",onClick:this.formSubmit_collect,"data-id":n&&n.id,"data-orderid":n&&n.order_id,"data-bargainid":n&&n.bargain_id,className:"invisibleclass"}))))),React.createElement("div",{className:"collage-section collage-content"},s?React.createElement(React.Fragment,null,React.createElement("div",{className:"data-list"},i.map(function(t,a){return React.createElement("div",{className:"data-item  isRelative",key:a,onClick:e.goToGroupDetail,"data-teamtoken":t.team_token},React.createElement("div",{className:"state-wrap"},React.createElement("div",{className:"timetable"},t.add_time),React.createElement("div",{className:"status",style:(0,p.convertLineStyleData)("color: "+("拼团中"!=t.current_status_title?"#666":"#ff7100"))},t.current_status_title+(2==t.current_status?t.expired:""))),t.parent_shop_app_id&&React.createElement("div",{className:"sub_name"},"店铺："+t.app_name),React.createElement("div",{className:"infor-wrap"},React.createElement("div",{className:"image-wrap"},React.createElement("img",{src:t.goods_info[0].cover})),React.createElement("div",{className:"detail-wrap"},React.createElement("div",{className:"title"},t.goods_info[0].goods_name),React.createElement("div",{className:"buy-infor"},React.createElement("div",{className:"price"},React.createElement("span",null,(0==t.activity_type?t.max_user_num+"人团":1==t.activity_type?"新人团":2==t.activity_type?"阶梯团":3==t.activity_type?"帮帮团":"抽奖团")+" "+(t.data?t.data.type:"")+" ¥"),React.createElement("span",null,t.goods_info[0].price)),React.createElement("div",{className:"num"},"x"+t.goods_info[0].num)),React.createElement("div",{className:"btn-wrap"},1==t.current_status?React.createElement(React.Fragment,null,React.createElement("div",{className:"buy-now orange"},"立即支付"),React.createElement("div",{className:"not-spelling empty"},"不拼了")):2==t.current_status?React.createElement(React.Fragment,null,React.createElement("div",{className:"invite-friends orange",onClick:function(t){e.inviteFriends(t),t.stopPropagation()},"data-index":t.index,"data-subid":t.app_id},"邀请好友")):3==t.current_status?React.createElement(React.Fragment,null,React.createElement("div",{className:"spell-again orange",onClick:e.openNewGroup,"data-goodsId":t.goods_id,"data-activityId":t.activity_id,"data-status":t.current_status,"data-type":t.activity_type,"data-groupbuy":t.is_group_buy,"data-subid":t.app_id},"再拼一次"),7!=t.order_status&&React.createElement("div",{className:"order-progress empty",onClick:e.gotoGoodsOrder,"data-teamToken":t.team_token,"data-orderid":t.order_id,"data-subid":t.app_id},"订单进度")):4==t.current_status&&React.createElement(React.Fragment,null,React.createElement("div",{className:"spell-again orange",onClick:e.openNewGroup,"data-goodsId":t.goods_id,"data-activityId":t.activity_id,"data-status":t.current_status,"data-groupbuy":t.is_group_buy,"data-subid":t.app_id},"再拼一次"))))))})),React.createElement("div",{className:"no-more"},"暂无更多拼购")):React.createElement(React.Fragment,null,React.createElement("div",{className:"no-collage"},React.createElement("div",{className:"image-wrap"},React.createElement("img",{src:"http://cdn.jisuapp.cn//zhichi_frontend/static/webapp/images/group/no-collage.png"})),React.createElement("div",{className:"tip-wrap"},"暂无拼团")))))))}}]),t}(h.default);t.default=v},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(0),i=n(o),s=a(3),r=n(s),c=a(1),l=n(c),d=a(2),u=n(d),m=a(5),p=a(6),f=a(12),g=n(f),h=a(7),v=n(h);a(525);var _=function(e){function t(e){(0,i.default)(this,t);var a=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={page:1,myTeams:{},formid:[],hasAdditionalInfo:!1,coverList:[],goodsData:{goods_list:[],is_more:1,curpage:1,loading:!1,loadingFail:!1},orderId:"",status:4,teamToken:"",needNum:0,progress:0,modelId:0,storeStyle:{}},a.seckillFunc=[],a.isMore=1,a.page=1,a.pageInit=function(){var e=a;m.appMethod.isLogin()?e.loadAll():m.appMethod.goLogin({success:function(){e.loadAll()}})},a.loadAll=function(){a.loadMyTeams(),a.setData({appName:m.appMethod.globalData.appTitle,appLogo:m.appMethod.globalData.appLogo})},a.loadMyTeams=function(){var e=a;m.appMethod.sendRequest({url:"/index.php?r=appGroupBuy/teamInfo",data:{team_token:e.data.team_token},success:function(t){var a=[],n=t.data,o=n.model_id||"",i={},s=n.order_info||"",r=(s.goods_info[0],s.order_id),c=parseInt(100*Number(t.data.current_user_count/t.data.max_user_num)),l=Number(n.max_user_num)||0,d=l-n.current_user_count||"",u=!1,p=[],f=[],h="0.00"==n.virtual_price?n.goods_price:n.virtual_price;if(n.downCount={hours:"00",minutes:"00",seconds:"00",days:"00"},s.additional_info)for(var v=0;v<s.goods_info.length;v++){var _=s.goods_info[v].delivery_id,y=s.goods_info[v].goods_id;_&&"0"!=_&&-1==f.indexOf(y)&&(p.push(s.goods_info[v]),f.push(y),u=!0)}if(n.member){var E=n.member||"",b=[],N=3==n.activity_type?l-E.length+1:l-E.length,R=0,k={isNum:0,image:"http://cdn.jisuapp.cn//zhichi_frontend/static/webapp/images/group/loading-portrait.png"},w={isNum:0,image:"http://cdn.jisuapp.cn//zhichi_frontend/static/webapp/images/group/missing-head.png"},x={isNum:0,image:"http://cdn.jisuapp.cn//zhichi_frontend/static/webapp/images/group/success-loading.png"};for(var C in E)i={isNum:1,image:E[C]},b.push(i);if(l>5){switch(b.length){case 1:R=2;break;case 2:R=1;break;case 3:R=0}if(b.length<3){a=b;for(var v=0;v<R;v++)a.push(w);a.push(k),a.push(w)}else if(b.length>=3&&b.length<5){for(var D in b)D<3&&a.push(b[D]);a.push(k),a.push(w)}else if(b.length>=5)if(b.length<l){for(var D in b)D<3&&a.push(b[D]);a.push(k),a.push(w)}else{for(var D in b)D<4&&a.push(b[D]);a.push(x)}}else{a=b;for(var S=0;S<N;S++)a.push(w)}}n.server_time=t.current_time,n.seckill_end_time=g.default.formatTime(new Date(1e3*n.expired_time)),0==n.current_status||1==n.current_status?e.downcount=e.beforeGroupDownCount(n,e,"myTeams"):2==n.current_status&&(e.downcount=e.duringGroupDownCount(n,e,"myTeams")),n.parent_shop_app_id&&e.setData({appId:n.parent_shop_app_id,franchiseeId:n.app_id}),m.appMethod.setPreviewGoodsInfo(p),m.appMethod.setGoodsAdditionalInfo(s.additional_info||{}),e.setData({progress:c,myTeams:n,modelId:o,hasAdditionalInfo:u,orderId:r,originPrice:h,goodsId:n.goods_id,activityId:n.activity_id,team_token:s.team_token,member:a,goodsDetail:s.goods_info[0],needNum:d}),e.loadList()}})},a.seeAdditionalInfo=function(){m.appMethod.turnToPage("/eCommerce/pages/goodsAdditionalInfo/goodsAdditionalInfo")},a.beforeGroupDownCount=function(e,t,n){var o=a;return m.appMethod.seckillDownCount({startTime:e.server_time,endTime:e.seckill_start_time,showDays:!0,callback:function(){var a={};a[n+".status"]=3,a[n+".current_status"]=3,a[n+".server_time"]=e.seckill_start_time,t.setData(a),e.server_time=e.seckill_start_time,o.downcount=o.duringGroupDownCount(e,t,n)}},t,n+".downCount")},a.duringGroupDownCount=function(e,t,a){return m.appMethod.seckillDownCount({startTime:e.server_time,endTime:e.seckill_end_time,showDays:!0,callback:function(){var e={};e[a+".status"]=4,e[a+".current_status"]=4,t.setData(e),"myTeams"==a&&t.loadMyTeams()}},t,a+".downCount")},a.loadList=function(){var e=a;m.appMethod.sendRequest({url:"/index.php?r=appGroupBuy/goodsList",data:{page:e.page,page_size:4,status:1,app_id:e.data.appId||"",sub_shop_app_id:e.data.franchiseeId||""},success:function(t){for(var n=t.data,o={},i="goodsData",s=a.data.goodsData.goods_list,r=(s.length,e.downcountArr||[]),c=0;c<n.length;c++){var l=n[c];l.description="",l.original_price="0.00"==l.virtual_price?l.original_price:l.virtual_price}var d=t.data;o[i+".goods_list"]=s.concat(d),o[i+".is_more"]=t.is_more,o[i+".curpage"]=1,o[i+".loading"]=!1,o[i+".loadingFail"]=!1,e.downcountArr=r,e.setData(o),e.page++,e.isMore=t.is_more}})},a.gotoDetail=function(e){var t=e.currentTarget.dataset,n="/group/pages/gpgoodsDetail/gpgoodsDetail?goods_id="+t.goodsid+"&activity_id="+t.activityid+(a.data.franchiseeId?"&franchisee="+a.data.franchiseeId:"");a.saveUserFormId(function(){m.appMethod.turnToPage(n)})},a.copyOrderId=function(){var e=a;m.appMethod.setClipboardData({data:e.data.team_token,success:function(e){m.appMethod.showToast({title:"复制成功",icon:"success"})}})},a.openNewGroup=function(){var e=a.data.myTeams;if("0"==e.enable_status)return void m.appMethod.turnToPage("/pages/goodsDetail/goodsDetail?detail="+e.goods_id+(a.data.franchiseeId?"&franchisee="+a.data.franchiseeId:""));var t="/group/pages/gpgoodsDetail/gpgoodsDetail?goods_id="+a.data.myTeams.goods_id+"&activity_id="+a.data.myTeams.activity_id+(a.data.franchiseeId?"&franchisee="+a.data.franchiseeId:"");a.saveUserFormId(function(){m.appMethod.turnToPage(t)})},a.showMyTeamList=function(){a.saveUserFormId(function(){m.appMethod.turnToPage("/group/pages/gpmyOrder/gpmyOrder"+(this.data.franchiseeId?"&franchisee="+this.data.franchiseeId:""))})},a.inviteFriends=function(){var e=a,t=a.data.myTeams,n=m.appMethod.createAnimation({timingFunction:"ease",duration:400});m.appMethod.sendRequest({url:"/index.php?r=appGroupBuy/getShareQRCode",data:{goods_id:t.goods_id,activity_id:t.activity_id,type:6,text:t.goods_title,price:t.group_buy_price,virtual_price:e.data.originPrice,goods_img:t.img_urls?t.img_urls[0]:t.goods_cover,app_id:e.data.appId||"",sub_shop_app_id:e.data.franchiseeId||"",user_token:m.appMethod.globalData.PromotionUserToken||"",team_token:t.order_info.team_token,order_id:t.order_info.order_id},success:function(t){n.bottom("0").step(),e.setData({"pageQRCodeData.shareDialogShow":0,"pageQRCodeData.shareMenuShow":!0,"pageQRCodeData.goodsInfo":t.data,"pageQRCodeData.animation":n.export()})}})},a.saveUserFormId=function(e){m.appMethod.showLoading({title:"加载中"});var t=a;m.appMethod.sendRequest({url:"/index.php?r=api/AppMsgTpl/saveUserFormId",method:"post",data:{form_id:t.data.formid||[],app_id:t.data.appId||"",sub_shop_app_id:t.data.franchiseeId||""},complete:function(){m.appMethod.hideLoading(),e&&e(),t.setData({formid:[]})}})},a.gotoOrderDetail=function(){var e="/eCommerce/pages/goodsOrderDetail/goodsOrderDetail?detail="+a.data.orderId+(a.data.franchiseeId?"&franchisee="+a.data.franchiseeId:"");m.appMethod.turnToPage(e)},a.goDeliveryNavigation=function(){m.appMethod.openLocation({latitude:Number(a.data.myTeams.order_info.self_delivery_info.latitude),longitude:Number(a.data.myTeams.order_info.self_delivery_info.longitude),name:a.data.myTeams.order_info.self_delivery_info.address})},a.onPullDownRefresh=function(){},a.onReachBottom=function(){a.isMore&&a.loadList()},a.onShareAppMessage=function(){var e=a,t=a.data.team_token,n=a.data.myTeams,o=(n.activity_type,a.data.modelId,m.appMethod.globalData.PromotionUserToken&&m.appMethod.globalData.PromotionUserToken,a.data.franchiseeId?"&franchisee="+a.data.franchiseeId:""),i="/group/pages/gpgroupDetail/gpgroupDetail?teamtoken="+t+"&orderId="+e.data.orderId+o,s=m.appMethod.getUserInfo("nickname"),r=n.share_cover?n.share_cover:"https://www.zhichiwangluo.com/zhichi_frontend/static/webapp/images/group_goods_share.jpeg",c=n.share_title?n.share_title:(s?s+" 喊你":"")+"拼单啦~ "+e.data.myTeams.group_buy_price+"元拼"+e.data.myTeams.goods_title+"，火爆抢购中......";return m.appMethod.shareAppMessage({title:c,path:i,imageUrl:r,success:function(t){m.appMethod.showToast({title:"转发成功",duration:500}),m.appMethod.sendRequest({hideLoading:!0,url:"/index.php?r=appShop/getIntegralLog",data:{add_time:t,app_id:e.data.appId||"",sub_shop_app_id:e.data.franchiseeId||""},success:function(t){0==t.status&&t.data&&e.setData({rewardPointObj:{showModal:!0,count:t.data,callback:""}})}})}})},document.title="拼团订单详情",a}return(0,u.default)(t,e),(0,r.default)(t,[{key:"componentWillMount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,p.getCurrentPageQueryParams)();this.setData({team_token:e.teamtoken,franchiseeId:e.franchisee||""}),this.pageInit()}},{key:"componentDidMount",value:function(){}},{key:"componentDidShow",value:function(){}},{key:"componentDidHide",value:function(){}},{key:"componentWillUnmount",value:function(){this.downcount&&this.downcount.clear()}},{key:"render",value:function(){var e=this,t=this.state,a=(t.showGetUserInfo,t.pageQRCodeData,t.myTeams),n=t.goodsDetail,o=t.originPrice,i=t.needNum,s=t.member,r=t.goodsInfo,c=t.progress,l=t.appLogo,d=t.appName,u=t.storeStyle,m=t.hasAdditionalInfo,f=t.team_token,g=t.goodsData;return React.createElement("div",{className:"official-page gp-order-detail"},React.createElement(React.Fragment,null,React.createElement("div",{className:"collage-orderInfo"},React.createElement("div",{className:"collage-section goods-infor"},React.createElement("div",{className:"goods-detail"},React.createElement("div",{className:"image-wrap"},React.createElement("img",{src:a.goods_cover})),React.createElement("div",{className:"content-wrap"},React.createElement("div",{className:"title"},React.createElement("div",{className:"classify-type"},React.createElement("div",null,React.createElement("span",{className:"ico-moon icon-number-people"})),React.createElement("span",null,0==a.activity_type?a.max_user_num+"人团":1==a.activity_type?"新人团":2==a.activity_type?"阶梯团":3==a.activity_type?"帮帮团":"抽奖团")),n&&n.goods_name),React.createElement("div",{className:"price"},React.createElement("span",{className:"min-price"},"¥",React.createElement("span",null,a.group_buy_price)),React.createElement("span",{className:"origin-price"},"¥"+o)),React.createElement("div",{className:"num"},"已团"+a.goods_count+"件")))),React.createElement("div",{className:"collage-section collage-infor"},4!=a.activity_type?React.createElement(React.Fragment,null,2==a.current_status&&React.createElement("div",{className:"loading-stand"},React.createElement("div",{className:"tip"},React.createElement("div",null,"2"!=a.activity_type?React.createElement(React.Fragment,null,"还差",React.createElement("span",{className:"needNum"},i+"人"),"拼购成功, 剩余"):React.createElement(React.Fragment,null,"人数越多, 价格越低, 剩余")),React.createElement("div",{className:"countDown"},("00"!=a.downCount.days||"0"!=a.downCount.days)&&React.createElement(React.Fragment,null,React.createElement("span",null,a.downCount.days),React.createElement("span",null,"天")),React.createElement("span",null,a.downCount.hours),React.createElement("span",null,":"),React.createElement("span",{style:(0,p.convertLineStyleData)("width:48rpx;")},a.downCount.minutes),React.createElement("span",null,":"),React.createElement("span",{style:(0,p.convertLineStyleData)("width:48rpx;")},a.downCount.seconds))),React.createElement("div",{className:"member-cover"},s.map(function(e,t){return React.createElement("div",{key:t},React.createElement("img",{src:e.image,style:(0,p.convertLineStyleData)("border: "+(1==e.isNum?"2rpx solid #ff7100":""))}),0==t&&React.createElement("div",{className:"leader-logo"},"团长"))})),React.createElement("div",{className:"btn-wrap"},React.createElement("div",{className:"open-new  isRelative",onClick:this.inviteFriends},"邀请好友参团",React.createElement("form",{className:"getFormId"},React.createElement("button",{type:"button","data-id":r&&r.id,"data-orderid":r&&r.order_id,"data-bargainid":r&&r.bargain_id,onClick:this.formSubmit_collect,className:"invisibleclass"}))))),3==a.current_status&&React.createElement("div",{className:"success-stand"},React.createElement("div",{className:"tip"},3==a.activity_type?React.createElement(React.Fragment,null,React.createElement("span",{style:(0,p.convertLineStyleData)("color:#ff7100;")},"拼团成功，"),"商家将给团长发货"):React.createElement(React.Fragment,null,React.createElement("span",{style:(0,p.convertLineStyleData)("color:#ff7100;")},"拼团成功，"),"请耐心等待商家发货")),React.createElement("div",{className:"member-cover"},s.map(function(e,t){return React.createElement("div",{key:t},React.createElement("img",{src:e.image,style:(0,p.convertLineStyleData)("border: "+(1==e.isNum?"2rpx solid #ff7100":""))}),0==t&&React.createElement("div",{className:"leader-logo"},"团长"))})),React.createElement("div",{className:"btn-wrap"},React.createElement("div",{className:"open-new isRelative",onClick:this.openNewGroup},"开启新团",React.createElement("form",{className:"getFormId"},React.createElement("button",{type:"button","data-id":r&&r.id,"data-orderid":r&&r.order_id,"data-bargainid":r&&r.bargain_id,onClick:this.formSubmit_collect,className:"invisibleclass"}))))),(4==a.current_status||5==a.current_status)&&React.createElement("div",{className:"fail-stand"},React.createElement("div",{className:"tip"},"来迟一步，这个团已经拼完啦～"),React.createElement("div",{className:"member-cover"},s.map(function(e,t){return React.createElement("div",{key:t},React.createElement("img",{src:e.image,style:(0,p.convertLineStyleData)("border: "+(1==e.isNum?"2rpx solid #ff7100":""))}),0==t&&React.createElement("div",{className:"leader-logo"},"团长"))})),React.createElement("div",{className:"btn-wrap"},React.createElement("div",{className:"open-new isRelative",onClick:this.openNewGroup},"开启新团",React.createElement("form",{className:"getFormId"},React.createElement("button",{type:"button","data-id":r&&r.id,"data-orderid":r&&r.order_id,"data-bargainid":r&&r.bargain_id,onClick:this.formSubmit_collect,className:"invisibleclass"})))))):React.createElement(React.Fragment,null,2==a.current_status&&React.createElement("div",{className:"loading-draw"},React.createElement("div",{className:"progress"},React.createElement("div",{className:"success",style:(0,p.convertLineStyleData)("width:"+c+"%;")},React.createElement("div",{className:"inner"},"已抢"+a.current_user_count+"件")),React.createElement("div",{className:"percent"},c+"%")),React.createElement("div",{className:"tip"},React.createElement("div",null,"已有",React.createElement("span",{className:"needNum"},a.current_user_count),"人参与，满"+a.max_user_num+"人开奖，快去邀请小伙伴吧～"),React.createElement("div",null,"剩余",React.createElement("div",{className:"countDown"},("00"!=a.downCount.days||"0"!=a.downCount.days)&&React.createElement(React.Fragment,null,React.createElement("span",null,a.downCount.days),React.createElement("span",null,"天")),React.createElement("span",null,a.downCount.hours),React.createElement("span",null,":"),React.createElement("span",{style:(0,p.convertLineStyleData)("width:48rpx;")},a.downCount.minutes),React.createElement("span",null,":"),React.createElement("span",{style:(0,p.convertLineStyleData)("width:48rpx;")},a.downCount.seconds)))),React.createElement("div",{className:"btn-wrap"},React.createElement("div",{className:"open-new isRelative",onClick:this.inviteFriends},"邀请好友",React.createElement("form",{className:"getFormId"},React.createElement("button",{type:"button",onClick:this.formSubmit_collect,"data-id":r&&r.id,"data-orderid":r&&r.order_id,"data-bargainid":r&&r.bargain_id,className:"invisibleclass"}))))),3==a.current_status&&1==a.is_winner&&React.createElement("div",{className:"success-draw"},React.createElement("div",{className:"tip"},React.createElement("div",null,"运气爆棚！",React.createElement("span",null,"中奖啦"),"～")),React.createElement("div",{className:"member-cover"},React.createElement("div",null,React.createElement("img",{src:a.winner,style:(0,p.convertLineStyleData)("border: 2rpx solid #ff7100")}))),React.createElement("div",{className:"btn-wrap",onClick:this.gotoOrderDetail},React.createElement("div",{className:"open-new"},"查看订单"))),(4==a.current_status||5==a.current_status||0==a.is_winner)&&React.createElement("div",{className:"loading-draw"},React.createElement("div",{className:"tip"},0==a.is_winner?React.createElement(React.Fragment,null,"很遗憾，您未中奖"):React.createElement(React.Fragment,null,"很遗憾，本次活动未达到开奖门槛")),React.createElement("div",{className:"member-cover",style:(0,p.convertLineStyleData)("padding:40rpx 0 50rpx;margin:0 auto;width:165rpx;height:165rpx;")},React.createElement("img",{src:"http://cdn.jisuapp.cn//zhichi_frontend/static/webapp/images/group/draw-fail.png"}))))),(4!=a.activity_type||4==a.activity_type&&3==a.current_status&&1==a.is_winner)&&React.createElement("div",{className:"collage-section detail-infor"},React.createElement("div",{className:"mutual-infor"},React.createElement("div",{className:"custom"},React.createElement("div",{className:"app-box"},React.createElement("img",{className:"app-logo",src:l}),React.createElement("span",{className:"app-name"},d)),React.createElement("div",{className:"goods-opt-item"},React.createElement("div",null,"联系客服"))),React.createElement("div",{className:"buyer-information"},React.createElement("span",{className:"ico-moon icon-goods-location"}),a.order_info&&1==a.order_info.pick_up_type&&React.createElement(React.Fragment,null,React.createElement("div",{className:"buyer-box"},React.createElement("div",{className:"buyer-name-box"},React.createElement("span",{className:"cash-delivery shipping-type",style:(0,p.convertLineStyleData)("background:"+u.theme)},"快递"),1==a.order_info.is_pay_on_delivery&&React.createElement("span",{className:"cash-delivery",style:(0,p.convertLineStyleData)("background:"+u.theme)},"到付"),React.createElement("span",{className:"buyer-name"},a.order_info.address_info.name),React.createElement("span",null,a.order_info.address_info.contact)),React.createElement("div",{className:"buyer-address"},a.order_info.address_info.province.text+a.order_info.address_info.city.text+a.order_info.address_info.district.text+a.order_info.address_info.detailAddress))),a.order_info&&2==a.order_info.pick_up_type?React.createElement(React.Fragment,null,React.createElement("div",{className:"buyer-box"},React.createElement("div",{className:"buyer-name-box"},React.createElement("span",{className:"cash-delivery shipping-type",style:(0,p.convertLineStyleData)("background:"+u.theme)},"同城"),1==a.order_info.is_pay_on_delivery&&React.createElement("span",{className:"cash-delivery",style:(0,p.convertLineStyleData)("background:"+u.theme)},"到付"),React.createElement("span",{className:"buyer-name"},a.order_info.address_info.name),React.createElement("span",null,a.order_info.address_info.contact)),React.createElement("div",{className:"buyer-address"},a.order_info.address_info.province.text+a.order_info.address_info.city.text+a.order_info.address_info.district.text+a.order_info.address_info.detailAddress))):a.order_info&&3==a.order_info.pick_up_type&&React.createElement(React.Fragment,null,React.createElement("div",{className:"buyer-box"},React.createElement("div",{className:"buyer-name-box"},React.createElement("span",{className:"cash-delivery shipping-type",style:(0,p.convertLineStyleData)("background:"+u.theme)},"自提"),1==a.order_info.is_pay_on_delivery&&React.createElement("span",{className:"cash-delivery",style:(0,p.convertLineStyleData)("background:"+u.theme)},"到付"),React.createElement("span",{className:"buyer-name"},a.order_info.self_delivery_info.contact_name),React.createElement("span",null,a.order_info.self_delivery_info.contact_phone)),React.createElement("div",{className:"buyer-address"},a.order_info.self_delivery_info.address)),React.createElement("div",{className:"delivery-navigation",style:(0,p.convertLineStyleData)("color:"+u.theme),onClick:this.goDeliveryNavigation},"导航")))),React.createElement("div",{className:"price-statis"},React.createElement("div",{className:"incidental-pay"},React.createElement("div",null,React.createElement("span",{className:"name"},"商品拼团价"),React.createElement("span",{className:"price"},"¥"+(a.order_info?a.order_info.original_price:""))),React.createElement("div",null,React.createElement("span",{className:"name"},"优惠抵扣"),React.createElement("div",{className:"price"},React.createElement("div",null,a.order_info&&a.order_info.selected_benefit_info.discount_title),React.createElement("div",null,"¥"+(a.order_info?a.order_info.discount_cut_price:"")))),a.order_info&&0!=a.order_info.box_fee&&React.createElement("div",null,React.createElement("span",{className:"name"},"餐盒费"),React.createElement("span",{className:"price"},"¥"+a.order_info.box_fee)),React.createElement("div",null,React.createElement("span",{className:"name"},"运费"),React.createElement("span",{className:"price"},"¥"+(a.order_info?a.order_info.express_fee:""))),React.createElement("div",null,React.createElement("span",{className:"name"},"订单总价"),React.createElement("span",{className:"price"},"¥"+(a.order_info?a.order_info.order_total_price:""))),a.order_info&&a.order_info.settlement_activity&&a.order_info.settlement_activity.discount_cut_price&&React.createElement("div",null,React.createElement("span",{className:"name"},"支付有礼"),React.createElement("span",{className:"price"},"-¥"+a.order_info.settlement_activity.discount_cut_price)),React.createElement("div",null,React.createElement("span",{className:"name"},"储值抵扣"),React.createElement("span",{className:"price"},"-¥"+(a.order_info?a.order_info.use_balance:"")))),React.createElement("div",{className:"actual-pay"},React.createElement("span",null,"实际付款"),React.createElement("span",{className:"price"},"¥"+(a.order_info?a.order_info.total_price:"")))),React.createElement("div",{className:"custom-remark"},React.createElement("span",{className:"name"},"买家留言"),React.createElement("span",{className:"remark"},a.order_info&&a.order_info.remark)),m&&React.createElement("div",{className:"addition-info",onClick:this.seeAdditionalInfo},React.createElement("div",null,React.createElement("span",null,"补充信息"),React.createElement("span",{className:"pull-right colord2d2 ico-moon icon-rightarrow"}))),React.createElement("div",{className:"list-infor"},4!=a.activity_type?React.createElement(React.Fragment,null,React.createElement("div",{className:"hasBtn"},React.createElement("div",null,React.createElement("div",{className:"name"},"团号"),React.createElement("div",{className:"msg"},f)),React.createElement("div",{className:"copy-btn isRelative",onClick:this.copyOrderId},"复制",React.createElement("form",{className:"getFormId"},React.createElement("button",{type:"button","data-id":r&&r.id,"data-orderid":r&&r.order_id,"data-bargainid":r&&r.bargain_id,onClick:this.formSubmit_collect,className:"invisibleclass"})))),React.createElement("div",null,React.createElement("div",{className:"name"},"下单时间"),React.createElement("div",{className:"msg"},a.order_info&&a.order_info.add_time)),3==a.current_status&&React.createElement("div",null,React.createElement("div",{className:"name"},"成团时间"),React.createElement("div",{className:"msg"},a.success_time))):React.createElement(React.Fragment,null,React.createElement("div",{className:"hasBtn"},React.createElement("div",null,React.createElement("div",{className:"name"},"下单时间"),React.createElement("div",{className:"msg"},a.order_info.add_time))),React.createElement("div",null,React.createElement("div",{className:"name"},"开奖时间"),React.createElement("div",{className:"msg"},a.seckill_end_time))),a.order_info&&2==a.order_info.ecommerce_info.dispatch_use_pick_up_type?React.createElement(React.Fragment,null,React.createElement("div",null,React.createElement("div",{className:"name"},"到达时间"),React.createElement("div",{className:"price"},a.order_info.ecommerce_info.intra_city_data.intra_city_appointment_arrive_time))):a.order_info&&3==a.order_info.ecommerce_info.dispatch_use_pick_up_type&&React.createElement(React.Fragment,null,React.createElement("div",null,React.createElement("div",{className:"name"},"取货时间"),React.createElement("div",{className:"price"},a.order_info.ecommerce_info.ec_tostore_data.ec_tostore_appointment_time)),React.createElement("div",null,React.createElement("div",{className:"name"},"手机号码"),React.createElement("div",{className:"price"},a.order_info.ecommerce_info.ec_tostore_data.ec_tostore_buyer_phone)),a.order_info.ecommerce_info.ec_tostore_data.ec_tostore_location_name&&React.createElement("div",null,React.createElement("div",{className:"name"},"店内位置"),React.createElement("div",{className:"price"},a.order_info.ecommerce_info.ec_tostore_data.ec_tostore_location_name))))),g.goods_list.length>0&&React.createElement("div",{className:"collage-section collage-more"},React.createElement("div",{className:"title"},"更多精彩拼团"),React.createElement("div",null,React.createElement("div",{className:"goods-list opposite"},g.goods_list.map(function(t,a){return React.createElement("div",{className:"goods-item  isRelative",key:a,"data-goodsid":t.goods_id,"data-activityid":t.activity_id,onClick:e.gotoDetail},React.createElement("div",{className:"image-wrap"},React.createElement("img",{src:t.cover})),React.createElement("div",{className:"content-wrap"},React.createElement("div",{className:"title"},React.createElement("div",{className:"classify-type"},React.createElement("div",null,React.createElement("span",{className:"ico-moon icon-number-people"})),React.createElement("span",null,0==t.activity_type?t.num_of_people.length>1?"多人团":t.num_of_people[0]+"人团":1==t.activity_type?"新人团":2==t.activity_type?"阶梯团":3==t.activity_type?"帮帮团":"抽奖团")),t.title),t.salesnum?React.createElement("div",{className:"hava-sales"},React.createElement("div",{className:"price"},React.createElement("span",{className:"min-price"},"¥",React.createElement("span",null,t.group_buy_price)),React.createElement("span",{className:"origin-price"},"¥"+t.original_price)),React.createElement("div",{className:"status"},React.createElement("div",{className:"sales"},"已团"+t.salesnum+"件"),React.createElement("div",{className:"to-join"},0==t.status?React.createElement(React.Fragment,null,React.createElement("button",{className:"ready"},"即将开团")):1==t.status?React.createElement(React.Fragment,null,React.createElement("button",{className:"remain"},"提醒我")):2==t.status?React.createElement(React.Fragment,null,React.createElement("button",{className:"reminded"},"已提醒")):3==t.status?React.createElement(React.Fragment,null,React.createElement("button",{className:"go"},"去拼团")):4==t.status&&React.createElement(React.Fragment,null,React.createElement("button",{className:"over"},"已结束"))))):React.createElement("div",{className:"no-sales"},React.createElement("div",{className:"price"},React.createElement("div",{className:"min-price"},"¥",React.createElement("span",null,t.group_buy_price)),React.createElement("div",{className:"origin-price"},"¥"+t.original_price)),React.createElement("div",{className:"to-join"},0==t.status?React.createElement(React.Fragment,null,React.createElement("button",{className:"ready"},"即将开团")):1==t.status?React.createElement(React.Fragment,null,React.createElement("button",{className:"remain"},"提醒我")):2==t.status?React.createElement(React.Fragment,null,React.createElement("button",{className:"reminded"},"已提醒")):3==t.status?React.createElement(React.Fragment,null,React.createElement("button",{className:"go"},"去拼团")):4==t.status&&React.createElement(React.Fragment,null,React.createElement("button",{className:"over"},"已结束"))))),React.createElement("form",{className:"getFormId"},React.createElement("button",{type:"button",onClick:e.formSubmit_collect,"data-id":r&&r.id,"data-orderid":r&&r.order_id,"data-bargainid":r&&r.bargain_id,className:"invisibleclass"})))})))))))}}]),t}(v.default);t.default=_},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(31),i=n(o),s=a(0),r=n(s),c=a(3),l=n(c),d=a(1),u=n(d),m=a(2),p=n(m);a(32);var f=a(5),g=a(12),h=n(g),v=a(6),_=a(7),y=n(_);a(527);var E=function(e){function t(e){(0,r.default)(this,t);var a=(0,u.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={selectmodel:"",storeConfig:"",limit_buy:"",presell_status:"",description:"",goodsPrice:"",selectAddress:"",selectDelivery:"",pickUpType:"",presell_price:"",total_bargain:"",total_final_payment:"",final_payment_start_time:"",orderRemark:"",is_self_delivery:0,totalPrice:0,useBalance:!0,cashOnDelivery:!1,agreePayment:!1,noAdditionalInfo:!0,expressAddressNull:!1,nums:0,express_fee:0,formid:[],cart_id_arr:[],goodsInfo:{},selectDiscountInfo:{},additional_info:{},shop:{id:"0"},exchangeCouponData:{dialogHidden:!0,goodsInfo:{},selectModelInfo:{},hasSelectGoods:!1,voucher_coupon_goods_info:{}},storeStyle:{}},a.loadInit=function(){var e=a;f.appMethod.isLogin()?a.getCalculationInfo():f.appMethod.goLogin({success:function(){e.getCalculationInfo()}})},a.getCalculationInfo=function(){var e=a;f.appMethod.sendRequest({url:"/index.php?r=AppPreSell/Calculate",method:"POST",data:{sub_shop_app_id:e.franchisee_id,selected_benefit:e.data.selectDiscountInfo,is_balance:e.data.useBalance?1:0,address_id:1==e.data.pickUpType?e.data.selectAddressId:e.data.selectSameJourneyId,pick_up_type:e.data.pickUpType,bargain_order_id:e.data.bargain_order_id||"",presell_shopping_cart:[{goods_id:e.data.goods_id,model_id:e.data.model_id,num:e.data.nums}]},success:function(t){var a=t.data,n=a.can_use_benefit,o=a.goods_info,i=[],s=a.selected_benefit_info,r=[],c=[],l=[],d=o[0].server_time>1*a.final_payment_start_time?h.default.formatTimeYMD(new Date(1e3*a.final_payment_end_time),"M月DD日 hh:mm")+" 结束支付尾款":h.default.formatTimeYMD(new Date(1e3*a.final_payment_start_time),"M月DD日 hh:mm")+" 开始支付尾款";n.coupon_benefit&&n.coupon_benefit.length&&l.push({label:"coupon",value:n.coupon_benefit}),n.all_vip_benefit&&n.all_vip_benefit.length&&l.push({label:"vip",value:n.all_vip_benefit}),Array.isArray(n.integral_benefit)||n.integral_benefit&&l.push({label:"integral",value:[n.integral_benefit]}),"coupon"==s.discount_type&&3==s.type&&0==e.data.exchangeCouponData.hasSelectGoods&&e.exchangeCouponInit(parseInt(s.value));for(var u=0;u<=o.length-1;u++)o[u].delivery_id&&0!=o[u].delivery_id&&-1==c.indexOf(o[u].id)&&(r.push(o[u].delivery_id),c.push(o[u].id),i.push(o[u]));r.length&&!e.data.deliverydWrite&&e.getSuppInfo(r),e.setData({goodsInfo:a.goods_info[0],total_price:a.price,presell_price:a.goods_info[0].price||"",total_bargain:a.total_bargain||"",total_final_payment:a.total_final_payment||"",expressAddressNull:!a.address&&e.data.expressAddressNull,selectAddress:1==e.data.pickUpType&&a.address,selectSameJourney:2==e.data.pickUpType&&a.address,discountList:l,selectDiscountInfo:s,express_fee:a.express_fee,discount_cut_price:a.discount_cut_price,balance:a.balance,deduction:a.use_balance,original_price:a.original_price,totalPayment:a.price,canCashDelivery:a.is_pay_on_delivery||"",cashOnDelivery:a.price>0&&e.data.cashOnDelivery,selfPayOnDelivery:a.self_pay_on_delivery||"",additional_goodsid_arr:c,final_payment_name:d,sameJourneyImmediatlyTime:a.intra_city_status_data&&a.intra_city_status_data.deliver_time}),f.appMethod.setPreviewGoodsInfo(i)},successShowModalConfirm:function(e){return f.appMethod.turnBack(),!1}})},a.exchangeCouponInit=function(e){var t=a;f.appMethod.sendRequest({url:"/index.php?r=AppShop/getGoods",data:{data_id:e},success:function(e){var a=e.data[0].form_data,n=[],o={models:[],price:0,modelId:"",models_text:"",imgurl:""};a.model_items.length?(o.price=Number(a.model_items[0].price),o.imgurl=a.model_items[0].img_url,o.modelId=a.model_items[0].id):(o.price=Number(a.price),o.imgurl=a.cover);for(var i in a.model)i&&(n.push(a.model[i]),o.models.push(a.model[i].subModelId[0]),o.models_text+="“"+a.model[i].subModelName[0]+"” ");a.model=n,t.setData({"exchangeCouponData.dialogHidden":!1,"exchangeCouponData.goodsInfo":a,"exchangeCouponData.selectModelInfo":o})},successStatusAbnormal:function(){f.appMethod.showModal({content:"兑换的商品已下架"})}})},a.clickMinusButton=function(e){a.data.goodsInfo;+ +a.data.nums<=0||a.changeGoodsNum("minus")},a.clickPlusButton=function(e){a.data.goodsInfo,a.data.nums;a.changeGoodsNum("plus")},a.inputGoodsCount=function(e){var t=+e.target.value,n=a.data.limit_buy,o={};if(""!==n&&0!=n&&t>n)return f.appMethod.showModal({content:"已超过该商品的限购件数（每人限购"+a.data.limit_buy+"件）"}),o.nums=n,void a.setData(o);clearTimeout(a.inputTimer),isNaN(t)||t<=0||(a.inputTimer=setTimeout(function(){a.changeGoodsNum(t)},500))},a.verifyName=function(e){var t=+e.target.value;if(isNaN(t)||t<=0)return f.appMethod.showToast({title:"最少购买一件哦！",icon:"none"}),a.setData({nums:1}),void(a.inputTimer=setTimeout(function(){a.changeGoodsNum(1)},500))},a.changeGoodsNum=function(e){var t=a,n=+t.data.models_stock,o=+t.data.limit_buy,i=+a.data.nums,s="plus"==e?i+1:"minus"==e?i-1:Number(e),r={};return 3==a.data.presell_status?void f.appMethod.showModal({content:"不支持修改数量",confirm:function(){t.setData({nums:i})}}):"plus"==e&&o&&+s>o?(f.appMethod.showModal({content:"已超过该商品的限购件数（每人限购"+o+"件）"}),r.nums=o,void a.setData(r)):0==+s&&"minus"==e?(r.nums=1,void a.setData(r)):+s>n?(f.appMethod.showModal({content:"购买数量不能大于库存"}),r.nums=n,void a.setData(r)):(r.nums=+s,a.setData(r),void a.getCalculationInfo())},a.payOrder=function(e){function t(){var t="/presell/pages/presellPaySuccess/presellPaySuccess?detail="+(o.data.bargain_order_id||e)+"&presell_status="+o.data.presell_status+(o.franchisee_id?"&franchisee="+o.franchisee_id:"");o.franchisee_id?o.saveUserFormId(t,1):f.appMethod.sendRequest({url:"/index.php?r=AppMarketing/CheckAppCollectmeStatus",data:{order_id:e,sub_app_id:o.franchisee_id},success:function(e){0==e.valid&&(t+="&collectBenefit=1"),o.saveUserFormId(t,1)}})}function n(){var t="/presell/pages/presellOrderDetail/presellOrderDetail?detail="+(o.data.bargain_order_id||e)+(o.franchisee_id?"&franchisee="+o.franchisee_id:"");o.saveUserFormId(t,1)}var o=a;if(0==a.data.totalPayment)return void f.appMethod.sendRequest({url:"/index.php?r=AppShop/paygoods",data:{order_id:e,total_price:0},success:function(e){t()},fail:function(){n()},successStatusAbnormal:function(){n()}});f.appMethod.sendRequest({url:"/index.php?r=AppShop/GetWxWebappPaymentCode",data:{order_id:e},success:function(a){var i=a.data;i.orderId=e,i.success=t,i.goodsType=0,i.fail=n,o.wxPay(i)},fail:function(){n()},successStatusAbnormal:function(){n()}})},a.wxPay=function(e){f.appMethod.requestPayment({timeStamp:e.timeStamp,nonceStr:e.nonceStr,package:e.package,signType:e.signType,paySign:e.paySign,success:function(t){f.appMethod.wxPaySuccess(e),e.success()},fail:function(t){if("requestPayment:fail cancel"===t.errMsg)return void f.appMethod.showModal({content:"支付已取消",complete:e.fail});f.appMethod.showModal({content:"支付失败",complete:e.fail}),f.appMethod.wxPayFail(e,t.errMsg)}})},a.confirmPayment=function(e){var t=a,n=t.data.formid,o=a.data.selectDiscountInfo,i=a.data.tostoreOrderType;if(n.push(e.target.formId),t.setData({formid:n}),1==a.data.pickUpType&&!a.data.selectAddress)return void a.setData({expressAddressNull:!0});if(!a.data.agreePayment&&3!=a.data.presell_status)return void f.appMethod.showModal({content:"请先开启同意支付定金"});if(2==a.data.pickUpType&&!a.data.selectSameJourney)return void f.appMethod.showModal({content:"请选择同城地址",confirmText:"去填写",confirm:function(){t.goSameJourneyAddress()}});if(2==a.data.pickUpType&&!a.data.sameJourneyDateTime&&1!=a.data.sameJourneyTimeType)return void f.appMethod.showModal({content:"请选择取货时间"});if(3==a.data.pickUpType&&!a.data.selectDelivery)return void f.appMethod.showModal({content:"请选择上门自提地址",confirmText:"去填写",confirm:function(){t.toDeliveryList()}});if(3==a.data.pickUpType&&a.data.selfAppointmentSwitch&&!i)return void f.appMethod.showModal({content:"请选择取货时间"});var s=(new Date).getFullYear();a.data.tostoreDateTime,a.data.tostoreHourTime;if(3==a.data.pickUpType&&1==a.data.selfDeliveryPhone&&!h.default.isPhoneNumber(a.data.phone))return void f.appMethod.showModal({content:"请输入正确的手机号"});if(a.data.hasRequiredSuppInfo&&!a.data.deliverydWrite&&!a.data.aloneDeliveryShow&&3==a.data.presell_status)return void f.appMethod.showModal({content:"商品补充信息未填写，无法进行支付",confirmText:"去填写",confirm:function(){t.goToAdditionalInfo()}});if(a.data.aloneDeliveryShow&&3==a.data.presell_status){var r=a.data.additional_info,c=a.data.additional_goodsid_arr[0];if(0==r[c][0].is_required&&""==r[c][0].value)return void f.appMethod.showModal({content:"请填写"+r[c][0].title,confirmText:"确认"})}a.requesting||(a.requesting=!0,f.appMethod.sendRequest({url:"/index.php?r=AppPreSell/AddOrder",method:"post",data:{sub_shop_app_id:t.franchisee_id,selected_benefit:o,is_balance:t.data.useBalance?1:0,address_id:1==t.data.pickUpType?t.data.selectAddress.id:t.data.selectSameJourney.id,pick_up_type:t.data.pickUpType,self_delivery_app_store_id:3==t.data.pickUpType?t.data.selectDelivery.id:"",bargain_order_id:t.data.bargain_order_id||"",form_id:t.data.form_id||[],remark:a.data.orderRemark,presell_shopping_cart:[{goods_id:t.data.goods_id,model_id:t.data.model_id,num:t.data.nums}],additional_info:a.data.additional_info},success:function(e){if(t.data.cashOnDelivery){var a="/presell/pages/presellPaySuccess/presellPaySuccess?detail="+(t.data.bargain_order_id||e.data)+"&presell_status="+t.data.presell_status+(t.franchisee_id?"&franchisee="+t.franchisee_id:"");t.saveUserFormId(a,1)}else t.setData({totalPayment:e.total_price}),t.payOrder(e.data)},complete:function(){f.appMethod.hideLoading()},successShowModalConfirm:function(e){return f.appMethod.turnBack(),!1},fail:function(){t.requesting=!1},successStatusAbnormal:function(){t.requesting=!1}}))},a.useBalanceChange=function(e){a.setData({useBalance:e}),a.getCalculationInfo()},a.agreePayment=function(e){var t=!a.data.agreePayment;a.setData({agreePayment:t})},a.goToMyAddress=function(){var e=a.data.selectAddress&&a.data.selectAddress.id,t="/eCommerce/pages/myAddress/myAddress?id="+e;a.isFromSelectAddress=!0,a.saveUserFormId(t,0)},a.formSubmit_collect=function(e){a.data.formid.push(e.target.formId)},a.saveUserFormId=function(e,t){f.appMethod.showLoading({title:"加载中"});var n=a;f.appMethod.sendRequest({url:"/index.php?r=api/AppMsgTpl/saveUserFormId",method:"post",data:{sub_shop_app_id:n.data.franchiseeId||"",form_id:n.data.formid||[]},complete:function(){f.appMethod.hideLoading(),f.appMethod.turnToPage(e,t),n.setData({formid:[]})}})},a.remarkInput=function(e){var t=e.target.value;a.setData({orderRemark:t})},a.manuallyAddAddress=function(){a.isFromSelectAddress=!0,f.appMethod.turnToPage("/eCommerce/pages/addAddress/addAddress")},a.importWeChatAddress=function(){var e=a;f.appMethod.chooseAddress({success:function(t){f.appMethod.sendRequest({method:"post",url:"/index.php?r=AppShop/AddWxAddress",data:{detailInfo:t.detailInfo||"",cityName:t.cityName||"",provinceName:t.provinceName||"",UserName:t.userName||"",telNumber:t.telNumber||"",district:t.district||"",countyName:t.countyName||""},success:function(){e.getCalculationInfo()}})}})},a.showMemberDiscount=function(){a.selectComponent("#component-memberDiscount").showDialog(a.data.selectDiscountInfo)},a.afterSelectedBenefit=function(e){a.setData({selectDiscountInfo:e.detail.selectedDiscount,"exchangeCouponData.hasSelectGoods":!1,"exchangeCouponData.voucher_coupon_goods_info":{}}),a.getCalculationInfo()},a.getSuppInfo=function(e){var t=a;f.appMethod.sendRequest({hideLoading:!0,url:"/index.php?r=pc/AppShop/GetDelivery",method:"post",data:{delivery_ids:e},success:function(e){for(var a=0;a<e.data.length;a++)for(var n=e.data[a].delivery_info,o=0;o<n.length;o++)0==n[o].is_required&&1==n[o].is_hidden&&t.setData({hasRequiredSuppInfo:!0}),1==n[o].is_hidden&&t.setData({noAdditionalInfo:!1});if(1==e.data.length&&1==t.data.additional_goodsid_arr.length){for(var i=0,s=0,r=0;r<e.data[0].delivery_info.length;r++)1==e.data[0].delivery_info[r].is_hidden&&(i++,s=r);if(1==i){var c={};c[t.data.additional_goodsid_arr[0]]=[],c[t.data.additional_goodsid_arr[0]].push({title:e.data[0].delivery_info[s].name,type:e.data[0].delivery_info[s].type,is_required:e.data[0].delivery_info[s].is_required,value:""}),t.setData({additional_info:c,aloneDeliveryShow:!0})}}}})},a.goToAdditionalInfo=function(){f.appMethod.setGoodsAdditionalInfo(a.data.additional_info),f.appMethod.turnToPage("/eCommerce/pages/goodsAdditionalInfo/goodsAdditionalInfo")},a.inputFormControl=function(e){var t=a.data.additional_info;t[a.data.additional_goodsid_arr[0]][0].value=e.target.value,a.setData({additional_info:t})},a.addDeliveryImg=function(){var e=a,t=a.data.additional_info,n=a.data.additional_goodsid_arr[0],o=t[n][0].value||[];f.appMethod.chooseImage(function(a){t[n][0].value=o.concat(a),e.setData({additional_info:t})},9-t[n][0].value.length)},a.deleteImage=function(e){var t=a,n=a.data.additional_info,o=a.data.additional_goodsid_arr[0],i=e.currentTarget.dataset.imageIndex,s=n[o][0].value;s.splice(i,1),n[o][0].value=s,t.setData({additional_info:n})},document.title="确认订单",a}return(0,p.default)(t,e),(0,l.default)(t,[{key:"componentWillMount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,v.getCurrentPageQueryParams)(),t=this,a=JSON.parse(decodeURIComponent(e.param)),n=a.type||1,o=a.address_id;t.setData({goods_id:a.goods_id||"",activity_id:a.activity_id||"",model_id:a.model_id||"",nums:a.nums||"",franchiseeId:a.sub_shop_app_id||"",address_id:a.address_id||"",pickUpType:n,models_text:a.models_text,models_stock:a.models_stock,final_payment_start_time:a.final_payment_start_time,bargain_order_id:a.bargain_order_id||"",presell_status:a.presell_status,limit_buy:a.limit_buy,sameJourneyTimeType:2==n?1:"",selectSameJourneyId:2==n?o:"",selectAddressId:1==n?o:""}),this.loadInit()}},{key:"componentDidShow",value:function(){this.isFromSelectAddress&&(this.getCalculationInfo(),this.isFromSelectAddress=!1)}},{key:"render",value:function(){var e=this,t=this.state,a=(t.showGetUserInfo,t.discountList),n=t.presell_status,o=t.selectAddress,s=t.storeStyle,r=t.goodsInfo,c=t.models_text,l=t.presell_price,d=t.is_group,u=t.goodsIndex,m=t.goods,p=t.nums,f=t.exchangeCouponData,g=t.total_bargain,h=t.total_final_payment,_=t.final_payment_name,y=t.selectDiscountInfo,E=t.selectDiscountIndex,b=t.discount_cut_price,N=t.express_fee,R=t.useBalance,k=t.deduction,w=t.balance,x=t.agreePayment,C=t.orderRemark,D=t.noAdditionalInfo,S=t.aloneDeliveryShow,I=t.hasRequiredSuppInfo,M=t.deliverydWrite,T=t.additional_info,P=t.additional_goodsid_arr,L=t.total_price,A=t.expressAddressNull;return React.createElement("div",{className:"official-page preview-presell-order"},React.createElement(React.Fragment,null,React.createElement("div",{className:"preview-goods-wrap"},React.createElement("div",{className:"preview-section"},o.id?React.createElement(React.Fragment,null,React.createElement("div",{className:"address-box isRelative",onClick:3==n?null:this.goToMyAddress,"data-address-id":o.id},React.createElement("span",{className:"ico-moon icon-goods-location"}),React.createElement("div",{className:"address-detail"},React.createElement("div",{className:"buyer-name-box"},React.createElement("span",{className:"store-config-label",style:(0,v.convertLineStyleData)("background:"+s.theme)},"快递"),React.createElement("span",{className:"buyer-name"},o.address_info.name),React.createElement("span",null,o.address_info.contact)),React.createElement("div",{className:"buyer-address"},o.address_info.province.text+o.address_info.city.text+o.address_info.district.text+o.address_info.detailAddress)),3!=n&&React.createElement("div",{className:"ico-moon icon-rightarrow"}))):React.createElement(React.Fragment,null,React.createElement("div",{className:"address-null-box isRelative",onClick:3==n?null:this.goToMyAddress},3!=n&&React.createElement("div",{className:"pull-right ico-moon icon-rightarrow"}),React.createElement("div",null,React.createElement("span",{className:"ico-moon icon-goods-location"}),React.createElement("span",{className:"add-new-address"},"新增地址"))))),React.createElement("div",{className:"address-bg"},React.createElement("img",{src:"http://cdn.jisuapp.cn/static/webapp/images/xcx-goods/goods-address-bg.png"})),React.createElement("div",{className:"preview-goods-order-list"},React.createElement("div",{className:"preview-goods-order-item"},React.createElement("img",{className:"preview-goods-cover",src:r.cover,mode:"aspectFill"}),React.createElement("div",{className:"preview-goods-content"},React.createElement("div",{className:"preview-goods-title"},React.createElement("span",{className:"exchange-tip"},"预售"),r.title),c&&React.createElement("div",{className:"preview-goods-model"},c),React.createElement("div",{className:"goods-price-box"},"2"!=r.integral?React.createElement(React.Fragment,null,React.createElement("span",{className:"preview-goods-price",style:(0,v.convertLineStyleData)("color:"+s.theme)},"¥ "+l)):React.createElement(React.Fragment,null,"0.00"!=r.price&&React.createElement("span",{className:"preview-goods-price",style:(0,v.convertLineStyleData)(d?"":"color:"+s.theme)},"¥ "+l),"0.00"!=r.price&&0!=r.use_integral&&React.createElement("span",{className:"preview-goods-price",style:(0,v.convertLineStyleData)(d?"":"color:"+s.theme)},"+"),0!=r.use_integral&&React.createElement("span",{className:"preview-goods-price",style:(0,v.convertLineStyleData)(d?"":"color:"+s.theme)},r.max_can_use_integral+"积分")),3==n?React.createElement("div",{className:"good-number-box  pull-right"},"x "+r.num):React.createElement("div",{className:"good-number-box pull-right"},React.createElement("div",{className:"goods-minus isRelative","data-index":u,onClick:this.clickMinusButton},"-",React.createElement("form",{className:"getFormId"},React.createElement("button",{type:"button",onClick:this.formSubmit_collect,"data-id":m&&m.id,"data-orderid":m&&m.order_id,"data-bargainid":m&&m.bargain_id,className:"invisibleclass"}))),React.createElement("input",{className:"goods-count","data-index":u,type:"number",value:p,onChange:this.inputGoodsCount,onBlur:this.verifyName}),React.createElement("div",{className:"goods-plus isRelative",style:(0,v.convertLineStyleData)("color:"+s.theme),"data-index":u,onClick:this.clickPlusButton},"+",React.createElement("form",{className:"getFormId"},React.createElement("button",{type:"button","data-id":m&&m.id,"data-orderid":m&&m.order_id,"data-bargainid":m&&m.bargain_id,onClick:m&&this.formSubmit_collect,className:"invisibleclass"})))))))),f.hasSelectGoods&&React.createElement("div",{className:"preview-goods-order-list"},React.createElement("div",{className:"preview-goods-order-item"},React.createElement("img",{className:"preview-goods-cover",src:f.goodsInfo.cover}),React.createElement("div",{className:"preview-goods-content"},React.createElement("div",{className:"preview-goods-title"},React.createElement("span",{className:"exchange-tip"},"预售"),f.goodsInfo.title),f.goodsInfo.model_value_str&&React.createElement("div",{className:"preview-goods-model"},f.goodsInfo.model_value_str),React.createElement("div",{className:"goods-number-contain"},React.createElement("div",{className:"exchange-num pull-right"},"x1"))))),React.createElement("div",{className:"presell-price-item"},React.createElement("div",{className:"presell-tips"},React.createElement("div",{className:"role "+(3!=n?"active":"")}),React.createElement("div",{className:"line"}),React.createElement("div",{className:"role "+(3==n?"active":"")})),React.createElement("div",{className:"presell-price"},React.createElement("div",{className:"presell-section",style:(0,v.convertLineStyleData)("color: "+(3!=n?"#FF4D4F":""))},"阶段1 ：定金 ¥ "+g),React.createElement("div",{className:"presell-section"},React.createElement("div",{style:(0,v.convertLineStyleData)("color: "+(3==n?"#FF4D4F":""))},"阶段2 ：尾款 ¥ "+h),React.createElement("div",null,_)))),a&&!!a.length&&React.createElement("div",{onClick:this.showMemberDiscount,className:"isRelative showMemberDiscount"},React.createElement("div",{className:"balance-switch"},React.createElement("span",null,"优惠方式"),React.createElement("div",{className:"ico-moon icon-rightarrow pull-right"}),React.createElement("span",{className:"pull-right select-discount"},y.name)),React.createElement("div",{hidden:0==E,className:"balance-price"},React.createElement("span",{className:"pull-right",style:(0,v.convertLineStyleData)("color:"+s.theme)},"- ¥ "+b)),React.createElement("form",{className:"getFormId"},React.createElement("button",{type:"button","data-id":m.id,"data-orderid":m.order_id,"data-bargainid":m.bargain_id,onClick:this.formSubmit_collect,className:"invisibleclass"}))),React.createElement("div",{className:"preview-goods-express-fee"},React.createElement("span",null,"运费"),React.createElement("span",{className:"pull-right"},"0"==N?"包邮":"¥"+N)),0!=w&&React.createElement("div",{className:"payment-balance"},React.createElement("div",{className:"balance-switch"},React.createElement("span",null,"使用储值金"),React.createElement(i.default,{style:(0,v.convertLineStyleData)("transform: scale(.8)"),className:"pull-right",checked:R,onChange:this.useBalanceChange})),React.createElement("div",{hidden:!R,className:"balance-price"},React.createElement("span",{className:"pull-right"},"- ¥ "+k))),3!=n&&React.createElement("div",{className:"payment-deposit"},React.createElement("div",null,React.createElement("div",null,"同意支付定金"),React.createElement("div",{className:"tips"},"预售商品，定金不退哦～")),React.createElement(i.default,{color:s.theme,style:(0,v.convertLineStyleData)("transform: scale(.8)"),className:"pull-right",checked:x,onChange:this.agreePayment})),3==n&&React.createElement("div",{className:"preview-box"},React.createElement("div",{className:"buyer-message single-box"},"买家留言",React.createElement("div",{className:"pull-right"},React.createElement("input",{className:"remark",maxlength:"30",value:C,onChange:this.remarkInput,placeholder:"买家留言"}))),!D&&!S&&React.createElement("div",{className:"border-top1 single-box",onClick:this.goToAdditionalInfo},"补充信息",React.createElement("div",{className:"ico-moon icon-rightarrow pull-right"}),React.createElement("span",{style:(0,v.convertLineStyleData)("color:"+(I&&!M?s.theme:"#666")),className:"additional-tip pull-right"},M?"已填写":"未填写"))),S&&3==n&&React.createElement(React.Fragment,null,T[P[0]].map(function(t,a){return React.createElement("div",{className:"additional-list",key:!0},"text"==t.type&&React.createElement("div",{className:"additional-text"},React.createElement("span",{className:"additional-name "+(0==t.is_required?"is-required":"")},t.title),React.createElement("div",{className:"additional-info"},React.createElement("input",{type:"text",onChange:e.inputFormControl,value:t.value}))),"mul-text"==t.type&&React.createElement("div",{className:"additional-textarea"},React.createElement("span",{className:"additional-name "+(0==t.is_required?"is-required":"")},t.title),React.createElement("div",{className:"additional-info"},React.createElement("textarea",{maxlength:"-1",onInput:e.inputFormControl,value:t.value}))),"picture"==t.type&&React.createElement("div",{className:"additional-picture"},React.createElement("span",{className:"additional-name "+(0==t.is_required?"is-required":"")},t.title),React.createElement("div",{className:"additional-info"},t.value.map(function(t,a){return React.createElement("div",{className:"image-list",key:!0},React.createElement("img",{src:t}),React.createElement("label",{className:"delete-image ico-moon icon-closes isRelative",onClick:e.deleteImage,"data-image-index":a},"-",React.createElement("form",{className:"getFormId"},React.createElement("button",{type:"button","data-id":m.id,"data-orderid":m.order_id,"data-bargainid":m.bargain_id,onClick:e.formSubmit_collect,className:"invisibleclass"}))))}),t.value.length<9&&React.createElement("div",{className:"add-images isRelative",onClick:e.addDeliveryImg},React.createElement("span",{className:"ico-moon icon-goods-add-image"}),React.createElement("div",null,"添加图片"),React.createElement("form",{className:"getFormId"},React.createElement("button",{type:"button","data-id":m.id,"data-orderid":m.order_id,"data-bargainid":m.bargain_id,onClick:e.formSubmit_collect,className:"invisibleclass"}))))))})),React.createElement("div",{className:"bottom-nav"},React.createElement("form",null,3==n?React.createElement("button",{type:"button",onClick:this.confirmPayment,style:(0,v.convertLineStyleData)("background:"+s.theme),className:"paymentDeposit"},"支付尾款 ¥ "+L):React.createElement("button",{type:"button",onClick:this.confirmPayment,style:(0,v.convertLineStyleData)("background:"+s.theme),className:"paymentDeposit"},"支付定金 ¥ "+L))),A&&React.createElement("div",{className:"perfect-address-mask",onClick:this.hidePerfectAddress},React.createElement("div",{className:"perfect-address-box",onClick:this.stopPropagation},React.createElement("div",{className:"perfect-address-title"},"提示"),React.createElement("div",{className:"perfect-address-tips"},"请完善地址信息~"),React.createElement("div",{className:"perfect-address-bottom"},React.createElement("span",{onClick:this.manuallyAddAddress},"手动新增地址"),React.createElement("span",{onClick:this.importWeChatAddress,className:"import-weChat-address"},"导入微信地址")))))))}}]),t}(y.default);t.default=E},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(0),i=n(o),s=a(3),r=n(s),c=a(1),l=n(c),d=a(2),u=n(d),m=a(4),p=n(m),f=a(5),g=a(6),h=a(12),v=n(h),_=a(529),y=a(7),E=n(y);a(531);var b=function(e){function t(e){(0,i.default)(this,t);var a=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={status:0,orderId:"",franchiseeId:"",final_payment_start_time:"",presell_status:"",collectBenefitData:{},starData:[],isFail:!0,isWinning:!0,isComfort:!0,isWhole:!0,scratchId:"",isShowteam:!1,winingTitle:"",isScroll:!0,ifWxCoupon:!1,presell_bargain:"",timestamp:"",signature:"",ifGetComfort:!1,formid:[]},a.recommendRef=p.default.createRef(),a.touchStart=function(e){if(a.isStart){var t=a.drawRect(e.touches[0].x,e.touches[0].y);a.ctx.clearRect(t[0],t[1],t[2],t[2]),a.ctx.draw(!0)}},a.touchMove=function(e){if(a.isStart){var t=a.drawRect(e.touches[0].x,e.touches[0].y);a.ctx.clearRect(t[0],t[1],t[2],t[2]),a.ctx.draw(!0)}},a.touchEnd=function(e){if(a.isStart){var t=a.canvasWidth,n=a.canvasHeight,o=a.minX,i=a.minY,s=a.maxX,r=a.maxY;s-o>.5*t&&r-i>.5*n&&(a.ctx.draw(),a.endCallBack&&a.endCallBack(),a.isStart=!1,a.page.setData({isScroll:!0}))}},a.getGoldenData=function(e){var t=a;f.appMethod.sendRequest({url:"/index.php?r=appLotteryActivity/getTimeAfterConsume",method:"post",data:{order_id:e,sub_app_id:t.data.franchiseeId},success:function(e){e.data?t.data.code?t.setData({isWhole:!0}):t.setData({isWhole:!1,scratchId:e.data}):t.setData({isWhole:!0}),e.integral&&t.setData({rewardPointObj:{showModal:!0,count:e.integral,callback:""}})}})},a.showAreaClick=function(){var e=a;e.setData({isShowteam:!1}),f.appMethod.sendRequest({url:"/index.php?r=appLotteryActivity/lottery",hideLoading:!0,data:{activity_id:e.data.scratchId,sub_app_id:e.data.franchiseeId},success:function(t){var a=t.data;if(e.scratch.start(),"谢谢参与"==a.title)e.setData({isFail:!1});else{var n={ifWxCoupon:a.card_id||!1,timestamp:a.timestamp||"",signature:a.signature||""};a.is_comfort?n.isComfort=!1:(n.isWinning=!1,n.winingTitle=a.title),e.setData(n)}}})},a.onShareAppMessage=function(e){var t=a,n=a.data.franchiseeId?"&franchisee="+a.data.franchiseeId:"";return{path:"/awardManagement/pages/scratch/scratch?id="+t.data.scratchId+n,success:function(e){f.appMethod.sendRequest({url:"/index.php?r=appLotteryActivity/getTime",data:{activity_id:t.data.scratchId,type:"share",sub_app_id:t.data.franchiseeId},success:function(e){}})},fail:function(e){}}},a.getCollectBenefitData=function(e){var t=a;f.appMethod.sendRequest({url:"/index.php?r=AppMarketing/CollectmeSendCoupon",data:{order_id:e,sub_app_id:t.data.franchiseeId},hideLoading:!0,success:function(e){for(var a=[],n=0;n<e.data.star_num;n++)a.push("light");for(var n=0;n<e.data.collect_num-e.data.star_num;n++)a.push("dark");t.setData({collectBenefitData:e.data,starData:a})}})},a.goToHomepage=function(){var e=f.appMethod.getHomepageRouter();f.appMethod.reLaunch({url:"/pages/"+e+"/"+e})},a.goToOrderDetail=function(){var e=a,t="/presell/pages/presellOrderDetail/presellOrderDetail?detail="+e.data.orderId+(e.data.franchiseeId?"&franchisee="+e.data.franchiseeId:"");e.saveUserFormId(t,1)},a.getOrderDetail=function(){var e=a;f.appMethod.getOrderDetail({data:{order_id:e.data.orderId,sub_shop_app_id:e.data.franchiseeId},success:function(t){var a=t.data[0].form_data,n=1*a.presell_shopping_cart[0].final_payment_start_time,o=a.total_bargain;n=v.default.formatTimeYMD(new Date(1e3*n),"MM月DD日 hh:mm"),e.setData({orderInfo:a,presell_bargain:o,final_payment_start_time:n})}})},a.toAddCard=function(){var e=a.data,t=e.ifWxCoupon,n=a;f.appMethod.addCard({cardList:[{cardId:t,cardExt:'{"nonce_str":"'+e.timestamp+'","timestamp":"'+e.timestamp+'", "signature":"'+e.signature+'"}'}],success:function(t){n.setData({ifWxCoupon:!1,ifGetComfort:!0}),f.appMethod.sendRequest({url:"/index.php?r=appLotteryActivity/recvWeChatCoupon",data:{card_id:t.cardList[0].cardId,sub_app_id:e.franchisee,activity_id:e.scratchId},success:function(e){f.appMethod.showModal({title:"提示",content:"领取卡券成功",showCancel:!1})}})}})},a.getAppECStoreConfig=function(){f.appMethod.getAppECStoreConfig(function(e){a.setData({storeStyle:e.color_config,hasRecommendConfig:!e.recommend_config})},a.data.franchiseeId)},a.formSubmit_collect=function(e){a.data.formid.push(e.detail.formId)},a.saveUserFormId=function(e,t){f.appMethod.showLoading({title:"加载中"});var n=a;f.appMethod.sendRequest({url:"/index.php?r=api/AppMsgTpl/saveUserFormId",method:"post",data:{sub_shop_app_id:n.data.franchiseeId||"",form_id:n.data.formid||[]},complete:function(){f.appMethod.hideLoading(),f.appMethod.turnToPage(e,t),n.setData({formid:[]})}})},document.title="支付成功",a}return(0,u.default)(t,e),(0,r.default)(t,[{key:"componentWillMount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,g.getCurrentPageQueryParams)(),t=this;1==e.collectBenefit&&(t.getCollectBenefitData(e.detail),t.setData({status:1})),t.setData({orderId:e.detail,franchiseeId:e.franchisee||"",is_group:e.is_group||"",code:e.code||"",is_newAppointment:e.is_newAppointment||"",presell_status:e.presell_status||""}),t.getOrderDetail(),this.getAppECStoreConfig(),t.getGoldenData(e.detail);window.innerWidth,window.innerWidth}},{key:"render",value:function(){var e=this.state,t=(e.rewardPointObj,e.showGetUserInfo,e.storeStyle),a=e.hasRecommendConfig,n=e.orderInfo,o=e.goods,i=e.presell_status,s=e.final_payment_start_time,r=e.franchiseeId;return p.default.createElement("div",{className:"official-page presell-pay-success"},p.default.createElement(p.default.Fragment,null,p.default.createElement("div",null,a&&p.default.createElement("div",{className:"normal-area",style:(0,g.convertLineStyleData)("background:"+t.theme)},p.default.createElement("div",{className:"order-price-box",style:(0,g.convertLineStyleData)("background:"+t.theme)},p.default.createElement("div",{className:"order-success"},p.default.createElement("img",{className:"goods-complete-succes",src:"http://cdn.jisuapp.cn/static/webapp/images/xcx-goods/goods-complete-success.png"}))),p.default.createElement("div",{style:(0,g.convertLineStyleData)("background:#fff;")},p.default.createElement("img",{className:"goods-complete-bg",src:"http://cdn.jisuapp.cn/static/webapp/images/xcx-goods/goods-complete-bg.png"}))),p.default.createElement("div",{className:"normal-area-status"},3==i?p.default.createElement(p.default.Fragment,null,p.default.createElement("div",{className:"order-price"},"¥"+n.final_order_total_price),p.default.createElement("div",{className:"pay-tips"},"尾款支付成功"),p.default.createElement("div",{style:(0,g.convertLineStyleData)("padding-bottom:60rpx;")},p.default.createElement("div",{className:"btn-area"},p.default.createElement("div",{onClick:this.goToHomepage,className:"isRelative"},"继续购物",p.default.createElement("form",{className:"getFormId"},p.default.createElement("button",{type:"button",className:"invisibleclass","data-id":o&&o.id,"data-orderid":o&&o.order_id,"data-bargainid":o&&o.bargain_id,onClick:this.formSubmit_collect}))),p.default.createElement("div",{onClick:this.goToOrderDetail,className:"isRelative"},"查看订单",p.default.createElement("form",{className:"getFormId"},p.default.createElement("button",{type:"button",className:"invisibleclass","data-id":o&&o.id,"data-orderid":o&&o.order_id,"data-bargainid":o&&o.bargain_id,onClick:this.formSubmit_collect})))))):p.default.createElement(p.default.Fragment,null,p.default.createElement("div",{className:"order-price"},"¥"+(n?n.bargain_order_total_price:"")),p.default.createElement("div",{className:"pay-tips"},"定金支付成功"),p.default.createElement("div",{className:"icons"},p.default.createElement("div",null),p.default.createElement("div",null)),p.default.createElement("div",{style:(0,g.convertLineStyleData)("height:296rpx;")},p.default.createElement("div",{className:"order-tips"},p.default.createElement("div",null,"请在我的预售中支付尾款"),p.default.createElement("div",null,p.default.createElement("span",null,s),"开始支付尾款")),p.default.createElement("div",{className:"btn-area"},p.default.createElement("div",{onClick:this.goToHomepage,className:"isRelative"},"继续购物",p.default.createElement("form",{className:"getFormId"},p.default.createElement("button",{type:"button",className:"invisibleclass","data-id":o&&o.id,"data-orderid":o&&o.order_id,"data-bargainid":o&&o.bargain_id,onClick:this.formSubmit_collect}))),p.default.createElement("div",{onClick:this.goToOrderDetail,className:"isRelative"},"查看订单",p.default.createElement("form",{className:"getFormId"},p.default.createElement("button",{type:"button",className:"invisibleclass","data-id":o&&o.id,"data-orderid":o&&o.order_id,"data-bargainid":o&&o.bargain_id,onClick:this.formSubmit_collect})))))))),p.default.createElement(_.Recommend,{id:"component-recommend",franchiseeId:r,ref:this.recommendRef})))}}]),t}(E.default);t.default=b},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.item;return f.default.createElement("div",{className:"recommend-item"},f.default.createElement("div",{className:"recommend-article",style:{width:1!=t.style||t.form_data.url.video?"70%":"100%"}},f.default.createElement("div",{className:"recommend-content"},t.title),3==t.article_type?f.default.createElement("div",{className:"recommend-adver-footer"},f.default.createElement("span",{className:"recommend-adver-tag"},"推荐"),f.default.createElement("span",{className:"recommend-publish-time"},t.publish_time)):f.default.createElement("div",{className:"recommend-key-words"},f.default.createElement("span",{className:"recommend-comment-text"},t.comment_count,"评论"),f.default.createElement("span",{className:"recommend-comment-text"},t.publish_time))),(1!=t.style||t.form_data.url.video||t.form_data.video[0])&&f.default.createElement("div",{className:"img-wrap"},f.default.createElement("img",{src:t.imgs||t.form_data&&t.form_data.video&&t.form_data.video[0]&&t.form_data.video[0].video_url||t.form_data&&t.form_data.video&&t.form_data.url.video.cover}),(t.form_data&&t.form_data.url&&t.form_data.url.video&&t.form_data.url.video.cover||t.form_data&&t.form_data.video&&t.form_data.video[0]&&t.form_data.video[0].video_url)&&f.default.createElement("div",{className:"icon-wrap"},f.default.createElement("label",{className:"ico-moon icon-news-video-play"}))))}Object.defineProperty(t,"__esModule",{value:!0}),t.Recommend=void 0;var i=a(0),s=n(i),r=a(3),c=n(r),l=a(1),d=n(l),u=a(2),m=n(u),p=a(4),f=n(p),g=a(28),h=n(g),v=a(5),_=a(15);a(530);var y=[{action:"get-coupon",name:"优惠券详情",local_icon:"icon-news-coupon"},{action:"goods-trade",name:"商品详情",local_icon:"icon-news-goodsdetail"},{action:"community",name:"社区详情",local_icon:"icon-news-community"},{action:"to-franchisee",name:"商家详情",local_icon:"icon-news-business"},{action:"coupon-receive-list",name:"优惠券列表",local_icon:"icon-news-coupon"},{action:"recharge",name:"储值",local_icon:"icon-news-storage"},{action:"transfer",name:"付款",local_icon:"icon-news-payment"},{action:"to-promotion",name:"代言人中心",local_icon:"icon-news-extension"},{action:"scratch-card",name:"刮刮乐",local_icon:"icon-news-scratch"},{action:"lucky-wheel",name:"大转盘",local_icon:"icon-news-turntable"},{action:"golden-eggs",name:"砸金蛋",local_icon:"icon-news-goldegg"},{action:"call",name:"拨打电话",local_icon:"icon-news-callphone"},{action:"turn-to-xcx",name:"跳转action小程序",local_icon:"icon-news-jump"},{action:"share",name:"分享好友",local_icon:"icon-news-sharefriends"},{action:"page-share",name:"分享朋友圈",local_icon:"icon-news-sharecircle"},{action:"refresh-list",name:"刷新列表",local_icon:"icon-news-refreshlist"},{action:"refresh-page",name:"刷新页面",local_icon:"icon-news-refreshpage"},{action:"contact",name:"联系客服",local_icon:"icon-news-custom"},{action:"preview-picture",name:"预览大图",local_icon:"icon-news-coupon"},{action:"to-seckill",name:"秒杀",local_icon:"icon-news-kill"},{action:"video-detail",name:"视频详情",local_icon:"icon-news-videodetail"},{action:"topic",name:"话题详情",local_icon:"icon-news-topic"},{action:"news",name:"资讯详情",local_icon:"icon-news-news"},{action:"goods-scan-code",name:"扫码购",local_icon:"icon-shopping-scan"},{action:"vcard",name:"名片详情",local_icon:"icon-vcard"},{action:"vcard-msg-list",name:"名片消息列表",local_icon:"icon-vcard-msg-list"}];t.Recommend=function(e){function t(e){(0,s.default)(this,t);var a=(0,d.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.show=function(e){e.franchiseeId&&a.setState({franchiseeId:e.franchiseeId})},a.getAppECStoreConfig=function(){v.appMethod.getAppECStoreConfig(function(e){e.recommend_config&&e.recommend_config.map(function(e){e.recommend_info=e.recommend_info.map(function(t){if(3==e.recommend_type){if(t.name||(t.name=t.pageRouterName?t.pageRouterName.split("/").pop():""),t.iconImg=t.iconImg?t.iconImg:t.icon,!t.name||!t.iconImg||/click_event.*svg$/.test(t.iconImg)){var a=y.find(function(e){return e.action==t.action});a&&(t.name||(t.name=a.name),t.iconImg&&!/click_event.*svg$/.test(t.iconImg)||(t.local_icon=a.local_icon))}return t}if(0==e.recommend_type){if(3==t.article_type&&t.form_data.event.action){var n=t.form_data.event,o={};Object.keys(n).forEach(function(e){/\-/.test(e)?o[e.replace(/\-/g,"_")]=n[e]:o[e]=n[e]}),t.event_params=o}else t.event_params="";return t.form_data&&t.form_data.recommend&&delete t.form_data.recommend,t}return t})}),a.setData({storeStyle:e.color_config,recommendInfo:e.recommend_config||[]})},a.data.franchiseeId)},a.gotoCouponDetail=function(e){var t=e.currentTarget.dataset.couponId,n=a.data.franchiseeId?"&franchisee="+a.data.franchiseeId:"";v.appMethod.turnToPage("/pages/couponDetail/couponDetail?couponStatus=recieve&detail="+t+n)},a.turnToArticle=function(e){if(3==e.currentTarget.dataset.articleType)return void a.bindEventTapHandler(e);var t=e.currentTarget.dataset.id,n=a.data.franchiseeId?"&franchisee="+a.data.franchiseeId:"";v.appMethod.turnToPage("/informationManagement/pages/newsDetail/newsDetail?detail="+t+n)},a.turnToGoodsDetail=function(e){var t=e.currentTarget.dataset.id,n=e.currentTarget.dataset.style,o=a.data.franchiseeId?"&franchisee="+a.data.franchiseeId:"";3==n?v.appMethod.turnToPage("/pages/toStoreDetail/toStoreDetail?detail="+t+o):v.appMethod.turnToPage("/pages/goodsDetail/goodsDetail?detail="+t+o)},a.bindEventTapHandler=function(e){var t=JSON.parse(e.currentTarget.dataset.eventParams);(0,_.customEvent)({customFeature:t,franchisee:a.data.franchiseeId,event:e})},a.state={recommendInfo:[],storeStyle:{},appLogo:v.appMethod.globalData.appLogo,franchiseeId:""},a}return(0,m.default)(t,e),(0,c.default)(t,[{key:"componentDidMount",value:function(){this.getAppECStoreConfig()}},{key:"render",value:function(){var e=this,t=this.state,a=t.recommendInfo,n=t.appLogo,i=t.storeStyle;return f.default.createElement("div",{className:"common-component recommend-wrap"},a&&a.map(function(t,a){return f.default.createElement("div",{className:"recommend-box",key:a},3==t.recommend_type&&0!=t.recommend_info.length&&f.default.createElement("div",{className:"more-operations"},f.default.createElement("div",{className:"recommend-title"},"更多操作"),f.default.createElement("div",{className:"operations-wrap operations"+(t.recommend_info.length<3?t.recommend_info.length:"3")},t.recommend_info.map(function(t,a){return f.default.createElement("div",{className:"operations-inner",key:a},f.default.createElement("div",{onClick:e.bindEventTapHandler,"data-event-params":JSON.stringify(t)},f.default.createElement("div",{className:"icon-wrap"},t.local_icon?f.default.createElement("label",{className:"ico-moon "+t.local_icon}):f.default.createElement("img",{className:"recommend-image-icon",src:t.iconImg})),f.default.createElement("div",{className:"name"},t.name)))}))),0==t.recommend_type&&t.recommend_info.length>0&&f.default.createElement("div",null,f.default.createElement("div",{className:"recommend-title"},"推荐文章"),t.recommend_info.map(function(t){return f.default.createElement(f.default.Fragment,{key:t.id},1==t.is_publish&&f.default.createElement("div",{className:"recommmend-list"},f.default.createElement("div",{"data-id":t.id,onClick:e.turnToArticle,"data-article-type":t.article_type,"data-event-params":JSON.stringify(t.event_params)},f.default.createElement(o,{item:t}))))})),1==t.recommend_type&&t.recommend_info.length>0&&f.default.createElement("div",{className:"goods-list"},f.default.createElement("div",{className:"recommend-title"},"推荐商品"),t.recommend_info.map(function(t,a){return f.default.createElement("div",{className:"recommmend-list recommend-item","data-id":t.id,onClick:e.turnToGoodsDetail,"data-style":t.goods_type,key:a},f.default.createElement("div",{className:"recommend-item-inner"},f.default.createElement("div",{className:"img-wrap"},f.default.createElement("img",{src:t.cover})),f.default.createElement("div",{className:"recommend-article"},f.default.createElement("div",{className:"recommend-goods-title"},t.title),f.default.createElement("div",{className:"recommend-goods-price",style:{color:i.theme}},"¥",t.price),f.default.createElement("div",{className:"recommend-goods-sales"},"月销",t.sales,"件"))))})),2==t.recommend_type&&t.recommend_info.length>0&&f.default.createElement("div",{className:"ticket"},f.default.createElement("div",{className:"recommend-title"},"福利领取"),t.recommend_info.map(function(t,a){return f.default.createElement("div",{className:"recommmend-list",key:a,onClick:e.gotoCouponDetail,"data-coupon-id":t.id},f.default.createElement("div",{className:"top-section"},f.default.createElement("img",{className:"ticket-image",src:n}),f.default.createElement("div",{className:"detail-info"},f.default.createElement("div",{className:"name"},t.title),f.default.createElement("div",{className:"use-condition"},"使用条件：",t.discount)),f.default.createElement("div",{className:"receive-btn",onClick:e.gotoCouponDetail,"data-coupon-id":t.id},"领取")))})))}))}}]),t}(h.default)},function(e,t){},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(0),i=n(o),s=a(3),r=n(s),c=a(1),l=n(c),d=a(2),u=n(d),m=a(5),p=a(6),f=a(12),g=n(f),h=a(7),v=n(h);a(533);var _=function(e){function t(e){(0,i.default)(this,t);var a=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={orderInfo:{},orderStatus:{0:"订单待付款",1:"商家待发货",2:"买家待收货",3:"订单待评价",4:"退款审核中",5:"退款中",6:"订单已完成",7:"已退款",8:"卖家待接单"},presellStatus:{0:"定金待付款",1:"定金待付款",2:"定金支付成功",3:"尾款待付款",4:"商家待发货",5:"订单已取消",6:"退款审核中",7:"商家已退定金",8:"定金退款失败",9:"已关闭",10:"尾款超时未支付",11:"尾款支付成功，请到电商订单查看订单状态",12:"定金超时未支付",13:"退款失败"},presellIcon:{0:"goods-undone-payment",1:"goods-undone-payment",2:"bargain-pay-success",3:"goods-undone-payment",4:"goods-undone-ship",5:"goods-order-close",6:"goods-refund",7:"goods-order-close",8:"bargain-refund-fail",9:"goods-order-close",10:"presell-payment-overtime",11:"presell-completed",12:"presell-payment-overtime"},orderIcon:{0:"goods-undone-payment",1:"goods-undone-ship",2:"goods-undone-receipt",3:"goods-undone-evaluation",4:"goods-refund",5:"goods-refund-doing",6:"goods-order-complete",7:"goods-order-close"},refundStatus:["退款审核中","","","等待买家退货","商家待收货","","已退款"],refundIcon:["goods-refund-review","","","goods-refund","goods-undone-receipt","","goods-already-refund"],refundReason:["多拍/拍错/不想要","快递延期","未按约定时间发货","快递记录出错","内容与描述不符","其它"],formid:[],goodsAdditionalInfo:{},hasAdditionalInfo:!1,customFields:[],orderId:"",isFromTemplateMsg:!1,originalPrice:"",useBalance:"",freightAdress:{},express_fee:"",discount_cut_price:"",status:1,isFromBack:!1,showWriteOffCodeBox:!1,showEventDialog:!1,eventType:"",hasAlreadyGoods:!1,final_payment_start_time:"",storeStyle:{}},a.verifiTimeInterval="",a.downcountArr=[],a.dataInitial=function(){a.getOrderDetail(a.data.orderId),a.getLogistics(),a.getAppECStoreConfig(),a.setData({appName:m.appMethod.globalData.appTitle,appLogo:m.appMethod.globalData.appLogo})},a.getOrderDetail=function(e){var t=a;m.appMethod.getOrderDetail({data:{order_id:e,sub_shop_app_id:a.franchiseeId},success:function(e){var a,n,o=e.data[0],i=o.form_data,s=!1,r=[],c=[],l=i.presell_shopping_cart[0],d=i.is_presell_order,u=1*l.final_payment_start_time,p=1*l.final_payment_end_time,f=i.goods_info[0].server_time,h=p<f,v=i.status;o.final_payment_name=f>1*u?g.default.formatTimeYMD(new Date(1e3*p),"M月DD日 hh:mm")+" 结束支付尾款":g.default.formatTimeYMD(new Date(1e3*u),"M月DD日 hh:mm")+" 开始支付尾款";var _=i.ecommerce_info.dispatch_use_pick_up_type,y="";switch(2==_&&(y=i.ecommerce_info.ecommerce_transport_order&&i.ecommerce_info.ecommerce_transport_order.status),d){case"1":switch(v){case"0":a=u<=f?0:1,n=!0;break;case"11":a=u<=f?3:2,n=!0;break;case"4":a=6,n=!1;break;case"7":a="0"!=i.refund_time?7:5,n=!1;break;case"14":a=5,n=!1;break;case"15":a=8,n=!1;break;case"12":a=12,n=!0}break;case"2":switch(v){case"0":a=h?"10":"3",n=!0;break;default:a=4,n=!0}break;default:switch(v){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":a=11;break;case"15":a=13;break;default:a=4}n=!0}if((11==v||7==v&&1==d)&&f>1*p&&(n=!0,a="0"!=i.refund_time?7:10),i.additional_info&&3==d)for(var E=0;E<i.goods_info.length;E++){var b=i.goods_info[E].delivery_id,N=i.goods_info[E].goods_id;b&&"0"!=b&&-1==c.indexOf(N)&&(r.push(i.goods_info[E]),c.push(N),s=!0)}var R=i.remark;i.remark=R?R.replace(/\n|\\n/g,"\n"):R;for(var k=0;k<i.goods_info.length;k++)1==i.goods_info[k].is_seckill&&(i.goods_info[k].downCount={hours:"00",minutes:"00",seconds:"00"},0==i.goods_info[k].seckill_start_state?i.goods_info[k].downcount=m.appMethod.beforeSeckillDownCount(i.goods_info[k],t,"orderInfo.goods_info["+k+"]"):1==i.goods_info[k].seckill_start_state&&(i.goods_info[k].downcount=m.appMethod.duringSeckillDownCount(i.goods_info[k],t,"orderInfo.goods_info["+k+"]")),i.goods_info[k]&&t.downcountArr.push(i.goods_info[k].downcount));if(i.refunded_price&&3==d&&t.setData({hasAlreadyGoods:!0}),2==i.pick_up_type){var w=void 0,x=(new Date).getTime(),C=i.add_time.replace(/\-/g,"/"),D=9e5-(x-new Date(C+"").getTime());w=D<=0?"0":parseInt(D%36e5/6e4),i.cacelOrderCountDownTime=w}u=g.default.formatTimeYMD(new Date(1e3*u),"MM月DD日 hh:mm"),p=g.default.formatTimeYMD(new Date(1e3*p),"MM月DD日 hh:mm"),t.setData({orderInfo:i,order_total_price:t.formatMoney(1*i.goods_info[0].price+1*i.use_balance),hasAdditionalInfo:s,discount_cut_price:i.discount_cut_price,useBalance:i.use_balance,express_fee:e.data[0].express_fee,intraCityStatus:y||"",usePickType:_,presell_status:a,under_sales:n,is_presell_order:d,final_payment_start_time:u,final_payment_end_time:p}),m.appMethod.setPreviewGoodsInfo(r),m.appMethod.setGoodsAdditionalInfo(i.additional_info||{}),t.getRefundConfigByPickUpType(i.pick_up_type)}})},a.orderDelete=function(e){var t=a.data.orderId,n=a.franchiseeId,o=a;m.appMethod.sendRequest({url:"/index.php?r=AppShop/HideOrder",data:{order_id:t,sub_shop_app_id:n},success:function(e){m.appMethod.turnBack()},complete:function(){o.setData({showEventDialog:!1})}})},a.formatMoney=function(e,t,a,n,o){e=e||0,t=isNaN(t=Math.abs(t))?2:t,a=void 0!==a?a:"",n=n||",",o=o||".";var i=e<0?"-":"",s=parseInt(e=Math.abs(+e||0).toFixed(t),10)+"",r=(r=s.length)>3?r%3:0;return a+i+(r?s.substr(0,r)+n:"")+s.substr(r).replace(/(\d{3})(?=\d)/g,"¥1"+n)+(t?o+Math.abs(e-s).toFixed(t).slice(2):"")},a.cancelOrder=function(e){var t=a.data.orderInfo.order_id,n=a;m.appMethod.sendRequest({url:"/index.php?r=AppShop/cancelOrder",data:{order_id:t,sub_shop_app_id:n.franchiseeId||""},success:function(e){var t={};t.presell_status=5,n.setData(t)},complete:function(){n.setData({showEventDialog:!1})}})},a.payOrder=function(e){var t=(a.data.orderInfo.address_info,a),n=a.data.orderInfo,o=n.goods_info[0],i=n._presell_final_payment_order,s=n.presell_shopping_cart[0],r=n.order_id;if(3==a.data.presell_status&&1==s.is_presell_order&&!i){var t=a,c=t.data.franchiseeId,l={goods_id:o.goods_id,activity_id:o.presell_activity_id||"",model_id:o.modelId||"",nums:o.num,sub_shop_app_id:c||"",final_payment_start_time:t.data.final_payment_start_time||"",address_id:"",type:"1",models_text:null==o.model_value?"":o.model_value,models_stock:s.presell_stock_left,bargain_order_id:n.order_id,presell_status:t.data.presell_status,limit_buy:s.buy_limit_num},d="/presell/pages/previewPresellOrder/previewPresellOrder?param="+encodeURIComponent(JSON.stringify(l));return void t.saveUserFormId(function(){m.appMethod.turnToPage(d,0)})}if(t.saveUserFormId(),0==a.data.orderInfo.total_price&&!i)return void m.appMethod.sendRequest({url:"/index.php?r=AppPreSell/AddOrder",method:"Post",data:{sub_shop_app_id:t.data.franchiseeId,is_balance:t.data.useBalance?1:0,address_id:n.address_id,pick_up_type:1,presell_shopping_cart:[{goods_id:o.goods_id,num:o.num,model_id:o.model_id}],bargain_order_id:r},success:function(e){setTimeout(function(){m.appMethod.showToast({title:"支付成功",icon:"success",success:function(){t.paySuccessCallback()}})})}});r=i?i.order_id:n.order_id,m.appMethod.sendRequest({url:"/index.php?r=AppShop/GetWxWebappPaymentCode",data:{order_id:r},success:function(e){var a=e.data;a.orderId=r,a.goodsType=t.data.orderInfo.goods_type,a.success=function(){t.paySuccessCallback()},m.appMethod.wxPay(a)}})},a.wxPay=function(e){Taro.requestPayment({timeStamp:e.timeStamp,nonceStr:e.nonceStr,package:e.package,signType:e.signType,paySign:e.paySign,success:function(t){m.appMethod.wxPaySuccess(e),e.success()},fail:function(t){if("requestPayment:fail cancel"===t.errMsg)return void m.appMethod.showModal({content:"支付已取消",complete:e.fail});m.appMethod.showModal({content:"支付失败",complete:e.fail}),m.appMethod.wxPayFail(e,t.errMsg)}})},a.applyDrawback=function(){var e=a,t=a.data.orderId,n=a.franchiseeId,o="/eCommerce/pages/previewGoodsRefund/previewGoodsRefund?orderId="+t+(n?"&franchisee="+n:"");e.saveUserFormId(function(){m.appMethod.turnToPage(o,0)})},a.remindCustomer=function(){var e=a;m.appMethod.sendRequest({url:"/index.php?r=AppPreSell/RemindCustomer",data:{order_id:e.data.orderInfo.order_id},success:function(){var t={};t["orderInfo.status"]=7,t.presell_status=8,e.setData(t)}})},a.editorRefund=function(){var e=a,t=a.data.orderId,n=a.franchiseeId,o="/eCommerce/pages/goodsRefundPage/goodsRefundPage?type=editor&orderId="+t+(n?"&franchisee="+n:"");e.saveUserFormId(function(){m.appMethod.turnToPage(o,0)})},a.receiveDrawback=function(){var e=a.data.orderInfo.order_id,t=a;m.appMethod.sendRequest({url:"/index.php?r=AppShop/comfirmRefund",data:{order_id:e,sub_shop_app_id:t.franchiseeId},success:function(e){var a={};a["orderInfo.status"]=7,t.setData(a)},complete:function(){t.setData({showEventDialog:!1})}})},a.checkLogistics=function(){var e=a.data.orderId,t=a.data.orderInfo.ecommerce_info;if(2==a.data.usePickType){var n=t.intra_city_data,o=n&&n.deliver_type||"",i=n&&n.intra_city_appointment_arrive_time||"";a.saveUserFormId(function(){m.appMethod.turnToPage("/eCommerce/pages/sameJourneyLogistic/sameJourneyLogistic?orderId="+e+"&type="+o+"&arriveTime="+i+"&franchiseeId="+this.franchiseeId,0)})}else a.saveUserFormId(function(){m.appMethod.turnToPage("/eCommerce/pages/logisticsPage/logisticsPage?detail="+e+"&franchiseeId="+this.franchiseeId,0)})},a.sureReceipt=function(){var e=a.data.orderId,t=a,n=Date.now();m.appMethod.sendRequest({url:"/index.php?r=AppShop/comfirmOrder",data:{order_id:e,sub_shop_app_id:t.franchiseeId},success:function(a){t.saveUserFormId(function(){m.appMethod.turnToPage("/eCommerce/pages/transactionSuccess/transactionSuccess?pageFrom=transation&orderId="+e+"&franchiseeId="+t.franchiseeId,0)}),m.appMethod.sendRequest({hideLoading:!0,url:"/index.php?r=appShop/getIntegralLog",data:{add_time:n},success:function(e){0==e.status&&e.data&&t.setData({rewardPointObj:{showModal:!0,count:e.data,callback:""}})}})},complete:function(){t.setData({showEventDialog:!1})}})},a.makeComment=function(){var e=a.franchiseeId,t="/eCommerce/pages/makeComment/makeComment?detail="+a.data.orderInfo.order_id+(e?"&franchisee="+e:"");a.saveUserFormId(function(){m.appMethod.turnToPage(t,0)})},a.goToHomepage=function(){var e=m.appMethod.getHomepageRouter();a.saveUserFormId(function(){m.appMethod.turnToPage("/pages/"+e+"/"+e,1)})},a.getFreigtAdress=function(){var e=a;m.appMethod.sendRequest({url:"/index.php?r=AppShop/getAppShopLocationInfo",data:{app_id:m.appMethod.getAppId(),sub_app_id:e.franchiseeId},success:function(t){e.setData({freightAdress:t.data})}})},a.seeAdditionalInfo=function(){a.saveUserFormId(function(){m.appMethod.turnToPage("/eCommerce/pages/goodsAdditionalInfo/goodsAdditionalInfo?from=goodsOrderDetail",0)})},a.paySuccessCallback=function(){var e=a,t=a.data.orderId,n=a.franchiseeId,o="/presell/pages/presellPaySuccess/presellPaySuccess?detail="+t+(n?"&franchisee="+n:"");n?e.saveUserFormId(function(){m.appMethod.turnToPage(o,0)}):m.appMethod.sendRequest({url:"/index.php?r=AppMarketing/CheckAppCollectmeStatus",data:{order_id:t,sub_app_id:n},success:function(t){0==t.valid&&(o+="&collectBenefit=1"),e.saveUserFormId(function(){m.appMethod.turnToPage(o,0)})}})},a.copyOrderId=function(){var e=a;Taro.setClipboardData({data:e.data.orderId,success:function(e){m.appMethod.showToast({title:"复制成功",icon:"success"})}})},a.showGoodsDetail=function(e){e.currentTarget.dataset.orderid;m.appMethod.turnToPage("/eCommerce/pages/goodsOrderDetail/goodsOrderDetail?detail="+a.data.orderInfo.order_id)},a.getWriteOffCodeBox=function(){var e=a,t=a.data.orderId,n=a.franchiseeId;m.appMethod.sendRequest({url:"/index.php?r=AppShop/GetOrderVerifyCode",data:{sub_shop_app_id:n,order_id:t},success:e.setVerificationCodeData})},a.setVerificationCodeData=function(e){var t=a;t.setData({codeImgUrl:e.data.qrcode_url,codeNum:e.data.code,codeStatus:e.data.status,showWriteOffCodeBox:!0}),t.connectSocket()},a.connectSocket=function(){var e=a;Taro.connectSocket({url:"wss://ceshi.zhichiwangluo.com",header:{"content-type":"application/json"},method:"GET"}),Taro.onSocketOpen(function(t){var a={action:"mark_client",user_token:m.appMethod.globalData.userInfo.user_token,scenario_name:"app_order_verify",session_key:m.appMethod.globalData.sessionKey};Taro.sendSocketMessage({data:JSON.stringify(a)}),e.verifiTimeInterval=setInterval(function(){var e={action:"heartbeat",user_token:m.appMethod.globalData.userInfo.user_token,scenario_name:"app_order_verify",session_key:m.appMethod.globalData.sessionKey};Taro.sendSocketMessage({data:JSON.stringify(e)})},3e4)}),Taro.onSocketMessage(function(t){var a=JSON.parse(t.data);if("push_to_client"==a.action){var n=JSON.parse(a.msg);"app_order_verify"==n.type&&0==n.status&&(e.setData({codeStatus:1}),clearInterval(e.verifiTimeInterval),Taro.closeSocket())}})},a.hideWriteOffCodeBox=function(){var e=a;a.setData({showWriteOffCodeBox:!1}),clearInterval(e.verifiTimeInterval),Taro.closeSocket()},a.hideEventDialog=function(){a.setData({showEventDialog:!1})},a.showEventDialog=function(e){a.setData({eventType:e.currentTarget.dataset.type,showEventDialog:!0})},a.goOrderProgress=function(){var e=a,t=a.data.orderId,n=a.franchiseeId,o="/eCommerce/pages/goodsOrderProgress/goodsOrderProgress?orderId="+t+(n?"&franchisee="+n:"");e.saveUserFormId(function(){m.appMethod.turnToPage(o,0)})},a.returnInfor=function(){var e=a,t=a.data.orderId,n=a.franchiseeId,o="/eCommerce/pages/goodsReturnInfor/goodsReturnInfor?orderId="+t+(n?"&franchisee="+n:"");e.saveUserFormId(function(){m.appMethod.turnToPage(o,0)})},a.cancelRefund=function(){var e=a,t=a.data.orderId,n=a.franchiseeId;m.appMethod.showModal({content:"确认取消退款吗？",showCancel:!0,confirm:function(){m.appMethod.sendRequest({url:"/index.php?r=appShop/cancelRefund",data:{order_id:t,sub_shop_app_id:n,_app_id:"GumaC311tx"},success:function(){e.getOrderDetail(t)}})}})},a.getAppECStoreConfig=function(){m.appMethod.getAppECStoreConfig(function(e){a.setData({storeStyle:e.color_config})},a.franchiseeId)},a.deliveryDrawback=function(){var e=a,t=a.data.orderId,n=a.franchiseeId;m.appMethod.sendRequest({url:"/index.php?r=AppShop/applyRefund",data:{order_id:t,sub_shop_app_id:n},success:function(a){e.getOrderDetail(t)},complete:function(){e.setData({showEventDialog:!1})}})},a.goAlreadyGoodsPage=function(){a.saveUserFormId(function(){m.appMethod.turnToPage("/eCommerce/pages/goodsAlreadyRefunded/goodsAlreadyRefunded",0)})},a.getLogistics=function(){var e=a;m.appMethod.sendRequest({url:"/index.php?r=AppShop/expressFlow",data:{order_id:e.data.orderId},success:function(t){t.data&&(t.data.is_custom?e.setData({logisticsCustom:t.data.is_custom}):e.setData({info:t.data,logistics:t.data.Traces}))}})},a.formSubmit_collect=function(e){a.data.formid.push(e.target.formId)},a.saveUserFormId=function(e){m.appMethod.showLoading({title:"加载中"});var t=a;m.appMethod.sendRequest({url:"/index.php?r=api/AppMsgTpl/saveUserFormId",method:"post",data:{sub_shop_app_id:t.data.franchiseeId||"",form_id:t.data.formid||[]},complete:function(){m.appMethod.hideLoading(),e&&e(),t.setData({formid:[]})}})},a.toGoodsAfterSaleDetail=function(e){var t=a,n=a.data.orderId,o=a.franchiseeId,i=a.data.orderInfo.refund_apply.id,s="/eCommerce/pages/goodsAfterSaleDetail/goodsAfterSaleDetail?applyId="+i+"&detail="+n+"&franchisee="+o;t.saveUserFormId(function(){m.appMethod.turnToPage(s)})},a.goDeliveryNavigation=function(){Taro.openLocation({latitude:Number(a.data.orderInfo.self_delivery_info.latitude),longitude:Number(a.data.orderInfo.self_delivery_info.longitude),name:a.data.orderInfo.self_delivery_info.address})},a.sameJournyLogistic=function(){var e=a,t=a.data.orderId;e.saveUserFormId(function(){m.appMethod.turnToPage("/eCommerce/pages/sameJournyLogistic/sameJournyLogistic?detail="+t,0)})},a.getRefundConfigByPickUpType=function(e){var t=a;m.appMethod.sendRequest({url:"/index.php?r=AppEcommerce/getRefundConfigByPickUpType",data:{pick_up_type:e},success:function(e){if(e.data&&e.data.config_data){var a=e.data.config_data;t.setData({refundAdress:a.address||"",isFullRefund:a.is_full_refund})}}})},document.title="订单详情",a}return(0,u.default)(t,e),(0,r.default)(t,[{key:"componentWillMount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,p.getCurrentPageQueryParams)();this.setData({orderId:e.detail,isFromTemplateMsg:"template_msg"===e.from}),this.franchiseeId=e.franchisee||"",this.dataInitial()}},{key:"componentDidMount",value:function(){this.data.isFromBack?this.data.orderInfo.order_id&&this.getOrderDetail(this.data.orderInfo.order_id):this.setData({isFromBack:!0})}},{key:"componentWillUnmount",value:function(){if(this.downcountArr&&this.downcountArr.length){this.downcountArr=this.downcountArr.concat().reverse();for(var e=0;e<this.downcountArr.length;e++)this.downcountArr[e]&&this.downcountArr[e].clear()}}},{key:"render",value:function(){var e=this.state,t=(e.showGetUserInfo,e.rewardPointObj,e.presell_status),a=e.isFromTemplateMsg,n=e.storeStyle,o=e.presellIcon,i=e.presellStatus,s=e.is_presell_order,r=e.orderInfo,c=e.orderIcon,l=e.orderStatus,d=e.refundIcon,u=e.refundStatus,m=e.refundAdress,f=e.logistics,g=e.logisticsCustom,h=e.usePickType,v=e.appLogo,_=e.appName,y=e.useBalance,E=e.final_payment_start_time,b=e.final_payment_end_time,N=e.discount_cut_price,R=e.express_fee,k=e.under_sales,w=e.hasAdditionalInfo,x=e.hasAlreadyGoods,C=e.prsell_status,D=e.intraCityStatus,S=e.isFullRefund,I=e.codeImgUrl,M=e.codeStatus,T=e.codeNum,P=e.showWriteOffCodeBox,L=e.eventType,A=e.showEventDialog;return React.createElement("div",{className:"official-page presell-order-detail"},React.createElement(React.Fragment,null,React.createElement("div",{className:"order-contain",style:(0,p.convertLineStyleData)("height:"+(2==t||10==t||12==t?"100%":"calc(100% - 88rpx)")+";")},a&&React.createElement("div",{className:"orderDetail-goto-homepage",onClick:this.goToHomepage},"返回首页",React.createElement("form",{className:"getFormId"},React.createElement("button",{type:"button",className:"invisibleclass",onClick:this.formSubmit_collect}))),React.createElement("div",{className:"seller-shipped",style:(0,p.convertLineStyleData)("background:"+n.theme)},1==s||3==s?React.createElement("div",null,React.createElement("span",{className:"order-icon ico-moon icon-"+o[t]}),React.createElement("span",null,i[t])):4!=r.status?React.createElement("div",null,React.createElement("span",{className:"order-icon ico-moon icon-"+c[r.status]}),React.createElement("span",null,1!=r.pick_up_type&&8==r.status?"商家待接单":l[r.status])):React.createElement("div",null,React.createElement("span",{className:"order-icon ico-moon icon-"+d[r.refund_apply.status]}),React.createElement("span",null,1==r.is_pay_on_delivery?"审核中":u[r.refund_apply.status]))),0==r.status&&r.expire&&5!=t&&3!=s&&React.createElement("div",{className:"order-prompt"},"请尽快完成付款，还剩",React.createElement("span",{style:(0,p.convertLineStyleData)("color:"+n.theme)},1==r.has_seckill?r.close_order_time+"分":r.expire),"(超时按",React.createElement("span",{style:(0,p.convertLineStyleData)("color:"+n.theme)},"取消订单"),"处理)"),1==r.status&&r.expire&&React.createElement("div",{className:"order-prompt"},"付款成功，请耐心等待商家发货"),2==r.status&&React.createElement("div",{className:"order-prompt"},"商家已发货，距自动收货还剩",React.createElement("span",{style:(0,p.convertLineStyleData)("color:"+n.theme)},1==r.has_seckill?r.close_order_time+"分":r.expire)),4==r.status&&0==r.refund_apply.status&&React.createElement("div",{className:"order-prompt"},"你已成功发起退款申请，请耐心等待商家处理，还剩",React.createElement("span",{style:(0,p.convertLineStyleData)("color:"+n.theme)},r.refund_apply.expire),"（超时按",React.createElement("span",{style:(0,p.convertLineStyleData)("color:"+n.theme)},1==r.is_pay_on_delivery?"拒绝取消订单":"拒绝退款"),"处理）"),4==r.status&&3==r.refund_apply.status&&React.createElement("div",{className:"order-prompt"},"商家已同意退货退款申请，请及时退货，还剩",React.createElement("span",{style:(0,p.convertLineStyleData)("color:"+n.theme)},r.refund_apply.expire),"（超时按",React.createElement("span",{style:(0,p.convertLineStyleData)("color:"+n.theme)},"买家撤销退货"),"处理）"),4==r.status&&4==r.refund_apply.status&&React.createElement("div",{className:"order-prompt"},"请耐心等待商家收货，收货完成后将会进行退款"),(7==t||8==t||9==t||6==t)&&r.refund_apply.refund_remark&&React.createElement("div",{className:"order-prompt"},"退款备注："+(r.refund_apply.refund_remark||"")),2==r.pick_up_type&&8==r.status&&React.createElement("div",{className:"order-prompt"},r.cacelOrderCountDownTime+"分钟未接单，订单将自动取消"),4==r.status&&2==r.refund_apply.refund_type&&1!=r.is_pay_on_delivery&&React.createElement(React.Fragment,null,React.createElement("div",{className:"refund-address-box"},React.createElement("div",{className:"refund-address-title"},React.createElement("span",null,"退货地址"),React.createElement("span",{className:"pull-right"},m.brand_name+" "+m.phone)),React.createElement("div",{className:"pull-right refund-address"},m.region_info[2].name+m.region_info[1].name+m.region_info[0].name+m.detail_address))),(2==r.status||3==r.status||5==r.status)&&1==h&&React.createElement("div",{onClick:this.checkLogistics},React.createElement("div",{className:"goods-logistics"},React.createElement("span",{className:"ico-moon icon-goods-logistics"}),f.length?React.createElement("div",{className:"goods-logistics-info"},React.createElement("div",{className:"goods-logistics-title",style:(0,p.convertLineStyleData)("color:"+n.theme)},f[0].AcceptStation),React.createElement("div",{className:"goods-logistics-time"},f[0].AcceptTime)):React.createElement("div",{className:"goods-logistics-info"},1==g?"商家自主发货":"暂无物流信息"),React.createElement("span",{style:(0,p.convertLineStyleData)("display: inline-block;vertical-align: middle;"),className:"colord2d2 ico-moon icon-rightarrow"}))),1==s||3==s?React.createElement(React.Fragment,null,7!=t&&React.createElement("div",{className:"buyer-information self-delivery-info"},React.createElement("span",{className:"ico-moon icon-goods-location"}),1==r.pick_up_type&&React.createElement(React.Fragment,null,React.createElement("div",{className:"buyer-box"},React.createElement("div",{className:"buyer-name-box"},React.createElement("span",{className:"cash-delivery shipping-type",style:(0,p.convertLineStyleData)("background:"+n.theme)},"快递"),1==r.is_pay_on_delivery&&React.createElement("span",{className:"cash-delivery",style:(0,p.convertLineStyleData)("background:"+n.theme)},"到付"),React.createElement("span",{className:"buyer-name"},r.address_info.name),React.createElement("span",null,r.address_info.contact)),React.createElement("div",{className:"buyer-address"},r.address_info.province.text+r.address_info.city.text+r.address_info.district.text+r.address_info.detailAddress))),2==r.pick_up_type?React.createElement(React.Fragment,null,React.createElement("div",{className:"buyer-box"},React.createElement("div",{className:"buyer-name-box"},React.createElement("span",{className:"cash-delivery shipping-type",style:(0,p.convertLineStyleData)("background:"+n.theme)},"同城"),1==r.is_pay_on_delivery&&React.createElement("span",{className:"cash-delivery",style:(0,p.convertLineStyleData)("background:"+n.theme)},"到付"),React.createElement("span",{className:"buyer-name"},r.address_info.name),React.createElement("span",null,r.address_info.contact)),React.createElement("div",{className:"buyer-address"},r.address_info.province.text+r.address_info.city.text+r.address_info.district.text+r.address_info.detailAddress))):3==r.pick_up_type&&React.createElement(React.Fragment,null,React.createElement("div",{className:"buyer-box"},React.createElement("div",{className:"buyer-name-box"},React.createElement("span",{className:"cash-delivery shipping-type",style:(0,p.convertLineStyleData)("background:"+n.theme)},"自提"),1==r.is_pay_on_delivery&&React.createElement("span",{className:"cash-delivery",style:(0,p.convertLineStyleData)("background:"+n.theme)},"到付"),React.createElement("span",{className:"buyer-name"},r.self_delivery_info.contact_name),React.createElement("span",null,r.self_delivery_info.contact_phone)),React.createElement("div",{className:"buyer-address"},r.self_delivery_info.address)),React.createElement("div",{className:"delivery-navigation",style:(0,p.convertLineStyleData)("color:"+n.theme),onClick:this.goDeliveryNavigation},"导航"))),7!=t&&6!=t?React.createElement("div",{className:"app-box"},React.createElement("div",null,React.createElement("img",{className:"app-logo",src:v}),React.createElement("span",{className:"app-name"},_),React.createElement("div",{className:"contact-service pull-right"},React.createElement("span",null,"联系客服"),React.createElement("span",{className:"ico-moon icon-goods-customer-service"}),React.createElement("button",null)))):React.createElement("div",{className:"refund-msg"},"退货信息"),r.goods_info.map(function(e,t){return React.createElement(React.Fragment,{key:!0},React.createElement("div",{className:"goods-detail-box"},React.createElement("img",{src:e.cover}),React.createElement("div",null,React.createElement("div",{className:"goods-name"},React.createElement("span",{className:"is-seckill"},"预售"),e.goods_name),React.createElement("div",{className:"goods-rules"},null==e.model_value?"":e.model_value),React.createElement("div",{className:"goods-price"},e.use_integral&&0!=e.use_integral?React.createElement(React.Fragment,null,"0.00"!=e.price&&React.createElement("span",{className:"colorff7",style:(0,p.convertLineStyleData)("color:"+n.theme)},"¥"+e.price),e.max_can_use_integral&&"0"!=e.max_can_use_integral&&0!=e.max_can_use_integral&&"0.00"!=e.price&&React.createElement("span",{className:"colorff7",style:(0,p.convertLineStyleData)("color:"+n.theme)},"+"),e.max_can_use_integral&&"0"!=e.max_can_use_integral&&0!=e.max_can_use_integral&&React.createElement("span",{className:"colorff7",style:(0,p.convertLineStyleData)("color:"+n.theme)},e.max_can_use_integral+"积分")):React.createElement(React.Fragment,null,React.createElement("span",{className:"colorff7",style:(0,p.convertLineStyleData)("color:"+n.theme)},"¥"+e.price)),React.createElement("span",{className:"pull-right"},"x "+e.num)))))}),4==r.status&&6!=t&&r.refund_apply.id&&React.createElement("div",{className:"refunding-btn-box"},React.createElement("span",{className:"refunding-btn",onClick:this.toGoodsAfterSaleDetail},"退款中")),React.createElement("div",{style:(0,p.convertLineStyleData)("padding:0 30rpx;")},k?React.createElement(React.Fragment,null,React.createElement("div",{className:"section-presell section-one"},0==t||1==t?React.createElement(React.Fragment,null,React.createElement("div",null,React.createElement("div",{className:"section-tips"},React.createElement("div",null,React.createElement("span",null),React.createElement("span",null)),React.createElement("div",null,"阶段1：等待买家付款")),React.createElement("div",{className:"detail-msg"},React.createElement("div",{className:"presell-amount"},React.createElement("span",null,"商品定金"),React.createElement("span",{className:"pull-right"},"¥"+r.total_bargain)),0!=t&&1!=t&&React.createElement(React.Fragment,null,r.bargain_use_balance&&r.bargain_use_balance>0?React.createElement("div",{className:"stored-value-deduction"},React.createElement("span",null,"储值抵扣"),React.createElement("span",{className:"pull-right"},"- ¥ "+r.bargain_use_balance)):1==s&&y&&React.createElement("div",{className:"stored-value-deduction"},React.createElement("span",null,"储值抵扣"),React.createElement("span",{className:"pull-right"},"- ¥ "+y))))),React.createElement("div",{className:"actual-presell-amount"},React.createElement("span",null,"定金需付款"),React.createElement("span",{className:"pull-right"},"¥"+r.total_bargain))):0!=t&&1!=t&&React.createElement(React.Fragment,null,React.createElement("div",null,React.createElement("div",{className:"section-tips"},React.createElement("div",null,React.createElement("span",null),React.createElement("span",null)),React.createElement("div",null,5==t?"阶段1：已取消":12==t?"阶段1：未完成":"阶段1：已完成")),React.createElement("div",{className:"detail-msg"},React.createElement("div",{className:"presell-amount"},React.createElement("span",null,"商品定金"),React.createElement("span",{className:"pull-right"},"¥"+r.total_bargain)),r.bargain_use_balance&&r.bargain_use_balance>0?React.createElement("div",{className:"stored-value-deduction"},React.createElement("span",null,"储值抵扣"),React.createElement("span",{className:"pull-right"},"- ¥ "+r.bargain_use_balance)):1==s&&y&&React.createElement("div",{className:"stored-value-deduction"},React.createElement("span",null,"储值抵扣"),React.createElement("span",{className:"pull-right"},"- ¥ "+y)))),5!=t&&React.createElement("div",{className:"actual-presell-amount"},React.createElement("span",null,5==t?"定金未支付":12==t?"定金未支付":"定金实付款"),React.createElement("span",{className:"pull-right"},"¥"+r.total_bargain)))),React.createElement("div",{className:"section-presell section-two"},React.createElement("div",null,2==t?React.createElement(React.Fragment,null,React.createElement("div",{className:"section-tips"},React.createElement("div",null,React.createElement("span",null),React.createElement("span",null)),React.createElement("div",null,"阶段2：未开始")),React.createElement("div",{className:"detail-msg"},React.createElement("div",{className:"surplus-tips"},React.createElement("span",null,E+" 开始支付尾款"),React.createElement("span",{className:"pull-right"},"¥ "+r.total_final_payment)))):1==t||3==t||0==t?React.createElement(React.Fragment,null,React.createElement("div",{className:"section-tips"},React.createElement("div",null,React.createElement("span",null),React.createElement("span",null)),React.createElement("div",null,"阶段2：等待买家付款")),React.createElement("div",{className:"detail-msg"},React.createElement("div",{className:"final_payment_end_time"},React.createElement("span",null,b+" 结束支付尾款")),React.createElement("div",{className:"goods-amount"},React.createElement("span",null,"商品尾款"),React.createElement("span",{className:"pull-right"},"¥ "+r.total_final_payment)))):4==t||3==s?React.createElement(React.Fragment,null,React.createElement("div",{className:"section-tips"},React.createElement("div",null,React.createElement("span",null),React.createElement("span",null)),React.createElement("div",null,"阶段2：已完成")),React.createElement("div",{className:"detail-msg"},React.createElement("div",{className:"goods-amount"},React.createElement("span",null,"商品尾款"),React.createElement("span",{className:"pull-right"},"¥ "+r.total_final_payment)),1==r.has_seckill&&React.createElement("div",{className:"spike-offer"},React.createElement("span",null,"活动优惠"),React.createElement("span",{className:"pull-right"},"秒杀  - ¥ "+r.seckill_cut_price)),r.selected_benefit_info&&React.createElement("div",{className:"promotion-method"},React.createElement("div",{style:(0,p.convertLineStyleData)("overflow:hidden;")},React.createElement("span",null,"优惠抵扣"),React.createElement("span",{className:"pull-right promotion-method-title",style:(0,p.convertLineStyleData)("color:#999;")},r.selected_benefit_info.title||"无")),React.createElement("div",{className:"pull-right",style:(0,p.convertLineStyleData)("margin-top:20rpx;")},"- ¥ "+N)),y>0&&React.createElement("div",{className:"stored-value-deduction"},React.createElement("span",null,"储值抵扣"),React.createElement("span",{className:"pull-right"},"- ¥ "+r.final_use_balance)))):5==t?React.createElement(React.Fragment,null,React.createElement("div",{className:"section-tips"},React.createElement("div",null,React.createElement("span",null),React.createElement("span",null)),React.createElement("div",null,"阶段2：已取消")),React.createElement("div",{className:"detail-msg"},React.createElement("div",{className:"goods-amount"},React.createElement("span",null,"商品尾款"),React.createElement("span",{className:"pull-right"},"¥ "+r.total_final_payment)))):(10==t||12==t)&&React.createElement(React.Fragment,null,React.createElement("div",{className:"section-tips"},React.createElement("div",null,React.createElement("span",null),React.createElement("span",null)),React.createElement("div",null,"阶段2：未完成")),React.createElement("div",{className:"detail-msg"},React.createElement("div",{className:"surplus-tips"},React.createElement("span",null,b+" 结束支付尾款"),React.createElement("span",{className:"pull-right"},"¥ "+r.presell_shopping_cart[0].final_payment))))),!(7==r.status&&3!=s||0==t||1==t||5==t)&&React.createElement("div",{className:"actual-payment"},3==t||2==t?React.createElement(React.Fragment,null,React.createElement("span",null,"尾款待付款"),React.createElement("span",{className:"pull-right",style:(0,p.convertLineStyleData)("color:#333;")},"¥ "+r.total_final_payment)):10==t||12==t?React.createElement(React.Fragment,null,React.createElement("span",null,"尾款未支付"),React.createElement("span",{className:"pull-right",style:(0,p.convertLineStyleData)("color:#333;")},"¥ "+r.total_final_payment)):React.createElement(React.Fragment,null,React.createElement("span",null,"尾款实付款"),React.createElement("span",{className:"pull-right",style:(0,p.convertLineStyleData)("color:#333;")},"¥ "+r.final_payment_total_price)))),10!=t&&12!=t&&React.createElement("div",{className:"freight"},React.createElement("span",null,"运费"),React.createElement("span",{className:"pull-right"},"¥ "+R))):React.createElement(React.Fragment,null,React.createElement("div",{className:"detail-msg"},5==t?React.createElement(React.Fragment,null,React.createElement("div",{className:"presell-amount"},React.createElement("span",null,"商品定金"),React.createElement("span",{className:"pull-right"},"¥"+r.total_bargain)),React.createElement("div",{className:"goods-amount"},React.createElement("span",null,"商品尾款"),React.createElement("span",{className:"pull-right"},"¥ "+r.presell_shopping_cart[0].final_payment)),React.createElement("div",{className:"freight"},React.createElement("span",null,"运费"),React.createElement("span",{className:"pull-right"},"¥ "+R)),React.createElement("div",{className:"actual-payment"},React.createElement("span",null,"实际付款"),React.createElement("span",{className:"pull-right"},"¥ "+(5==t?"0.00":r.total_price)))):React.createElement(React.Fragment,null,React.createElement("div",{className:"refund-amount"},React.createElement("span",null,"退款金额"),React.createElement("span",{className:"pull-right"},"¥"+r.refund_apply.refund_price)),(7==t||9==t||6==t)&&React.createElement("div",{className:"refund-time",style:(0,p.convertLineStyleData)("padding-bottom:30rpx;")},React.createElement("span",null,"退款时间"),React.createElement("span",{className:"pull-right"},r.refund_apply.add_time)))))),3==s&&React.createElement("div",{className:"total-payment"},React.createElement("span",null,"合计"),React.createElement("span",{className:"pull-right"},"¥ "+r.actual_amount_of_order))):React.createElement(React.Fragment,null,4==r.status&&React.createElement("div",{className:"refund-msg"},"退货信息"),r.goods_info&&r.goods_info.map(function(e,t){return React.createElement(React.Fragment,{key:!0},React.createElement("div",{className:"goods-detail-box"},React.createElement("img",{src:e.cover}),React.createElement("div",null,React.createElement("div",{className:"goods-name"},React.createElement("span",{className:"is-seckill"},"预售"),e.goods_name),React.createElement("div",{className:"goods-rules"},null==e.model_value?"":e.model_value),React.createElement("div",{className:"goods-price"},e.use_integral&&0!=e.use_integral?React.createElement(React.Fragment,null,"0.00"!=e.price&&React.createElement("span",{className:"colorff7",style:(0,p.convertLineStyleData)("color:"+n.theme)},"¥"+e.price),e.max_can_use_integral&&"0"!=e.max_can_use_integral&&0!=e.max_can_use_integral&&"0.00"!=e.price&&React.createElement("span",{className:"colorff7",style:(0,p.convertLineStyleData)("color:"+n.theme)},"+"),e.max_can_use_integral&&"0"!=e.max_can_use_integral&&0!=e.max_can_use_integral&&React.createElement("span",{className:"colorff7",style:(0,p.convertLineStyleData)("color:"+n.theme)},e.max_can_use_integral+"积分")):React.createElement(React.Fragment,null,React.createElement("span",{className:"colorff7",style:(0,p.convertLineStyleData)("color:"+n.theme)},"¥"+e.price)),React.createElement("span",{className:"pull-right"},"x "+e.num)))))}),React.createElement("div",{className:"detail-msg"},React.createElement("div",{className:"goods-amount"},React.createElement("span",null,"商品金额"),React.createElement("span",{className:"pull-right"},"¥ "+r.original_price)),1==r.has_seckill&&React.createElement("div",{className:"spike-offer"},React.createElement("span",null,"活动优惠"),React.createElement("span",{className:"pull-right"},"秒杀  - ¥ "+r.seckill_cut_price)),r.selected_benefit_info&&React.createElement("div",{className:"promotion-method"},React.createElement("div",null,React.createElement("span",null,"优惠方式"),React.createElement("span",{className:"pull-right promotion-method-title"},r.selected_benefit_info.title||"无")),React.createElement("div",{className:"pull-right",style:(0,p.convertLineStyleData)("margin-top:20rpx;")},"- ¥ "+N)),y>0&&React.createElement("div",{className:"stored-value-deduction"},React.createElement("span",null,"储值抵扣"),React.createElement("span",{className:"pull-right"},"- ¥ "+y)),r.coupon_fee&&React.createElement("div",null,"社交立减金",React.createElement("span",{className:"pull-right"},"- ¥ "+r.coupon_fee)),w&&React.createElement("div",{className:"addition-info",onClick:this.seeAdditionalInfo},React.createElement("div",null,React.createElement("span",null,"补充信息"),React.createElement("span",{className:"pull-right colord2d2 ico-moon icon-rightarrow"})))),React.createElement("div",{className:"freight"},React.createElement("span",null,"运费"),React.createElement("span",{className:"pull-right"},"¥ "+R)),React.createElement("div",{className:"actual-payment"},React.createElement("span",null,"实际付款"),React.createElement("span",{className:"pull-right"},"¥"+r.total_price))),React.createElement("div",{style:(0,p.convertLineStyleData)("margin-top:16rpx;")},w&&React.createElement("div",{className:"addition-info isRelative",onClick:this.seeAdditionalInfo},React.createElement("div",null,React.createElement("span",null,"补充信息"),React.createElement("span",{className:"pull-right colord2d2 ico-moon icon-rightarrow"})),React.createElement("form",{className:"getFormId"},React.createElement("button",{type:"button",className:"invisibleclass",onClick:this.formSubmit_collect}))),r.remark&&React.createElement("div",{className:"buyer-message"},React.createElement("span",null,"买家留言"),React.createElement("span",{className:"pull-right"},r.remark)),React.createElement("div",{className:"addition-info no-border isRelative",onClick:this.goOrderProgress,style:(0,p.convertLineStyleData)("margin-top:0;")},React.createElement("div",null,React.createElement("span",null,"订单进度"),React.createElement("span",{className:"pull-right colord2d2 ico-moon icon-rightarrow"})),React.createElement("form",{className:"getFormId"},React.createElement("button",{type:"buton",className:"invisibleclass",onClick:this.formSubmit_collect})))),x&&React.createElement("div",{className:"addition-info no-border already-refund-goods",onClick:this.goAlreadyGoodsPage},React.createElement("div",null,React.createElement("span",null,"已退商品"),React.createElement("span",{className:"pull-right colord2d2 ico-moon icon-rightarrow"}))),React.createElement("div",{className:"order-number"},React.createElement("div",null,React.createElement("span",null,"订单编号"),React.createElement("span",null,r.order_id),React.createElement("span",{className:"pull-right copy-btn",onClick:this.copyOrderId},"复制")),React.createElement("div",null,React.createElement("span",null,"下单时间"),React.createElement("span",null,r.add_time)),2==r.pick_up_type&&React.createElement("div",null,React.createElement("span",null,"送达时间"),React.createElement("span",null,r.ecommerce_info.intra_city_data.intra_city_appointment_arrive_time)),3==r.pick_up_type&&React.createElement(React.Fragment,null,r.ecommerce_info.ec_tostore_data.ec_tostore_appointment_time&&React.createElement("div",null,React.createElement("span",null,"预约时间"),React.createElement("span",null,r.ecommerce_info.ec_tostore_data.ec_tostore_appointment_time)),r.ecommerce_info.ec_tostore_data.ec_tostore_location_name&&React.createElement("div",null,React.createElement("span",null,"店内位置"),React.createElement("span",null,r.ecommerce_info.ec_tostore_data.ec_tostore_location_name)),r.ecommerce_info.ec_tostore_data.ec_tostore_buyer_phone&&React.createElement("div",null,React.createElement("span",null,"手机号码"),React.createElement("span",null,r.ecommerce_info.ec_tostore_data.ec_tostore_buyer_phone)))),2!=t&&10!=t&&12!=t&&React.createElement("div",{className:"order-bottom"},1==s||3==s?React.createElement(React.Fragment,null,(0==t||1==t||3==t)&&React.createElement(React.Fragment,null,3!=t&&React.createElement("span",{className:"apply-refund isRelative",onClick:this.showEventDialog,"data-type":"cancelOrder"},"取消订单",React.createElement("form",{className:"getFormId"},React.createElement("button",{type:"button",className:"invisibleclass",onClick:this.formSubmit_collect}))),React.createElement("span",{className:"btn btn-orange orderDetail-pay-directly isRelative",style:(0,p.convertLineStyleData)("color:"+n.theme+";border-color:"+n.theme),onClick:this.payOrder},"立即支付",React.createElement("form",{className:"getFormId"},React.createElement("button",{type:"button",className:"invisibleclass",onClick:this.formSubmit_collect})))),4==t&&React.createElement(React.Fragment,null,React.createElement("span",{className:"apply-refund isRelative",onClick:this.applyDrawback},"申请退款",React.createElement("form",{className:"getFormId"},React.createElement("button",{type:"button",className:"invisibleclass",onClick:this.formSubmit_collect}))),React.createElement("span",{className:"btn btn-orange isRelative",style:(0,p.convertLineStyleData)("color:"+n.theme+";border-color:"+n.theme),onClick:this.getWriteOffCodeBox},"核销码",React.createElement("form",{className:"getFormId"},React.createElement("button",{type:"button",className:"invisibleclass",onClick:this.formSubmit_collect})))),(5==t||7==t||9==t)&&React.createElement(React.Fragment,null,React.createElement("span",{className:"isRelative btn",onClick:this.showEventDialog,"data-type":"orderDelete"},"删除订单",React.createElement("form",{className:"getFormId"},React.createElement("button",{type:"button",className:"invisibleclass",onClick:this.formSubmit_collect})))),8==t&&React.createElement(React.Fragment,null,React.createElement("span",{className:"isRelative btn",onClick:this.remindCustomer,"data-type":"remindCustomer"},"提醒商家",React.createElement("form",{className:"getFormId"},React.createElement("button",{type:"button",className:"invisibleclass",onClick:this.formSubmit_collect})))),3==s&&React.createElement(React.Fragment,null,4!=t&&9!=t&&6!=C&&React.createElement("span",{className:"isRelative btn",onClick:this.showGoodsDetail,"data-type":"remindCustomer",style:(0,p.convertLineStyleData)("border:1px solid #ff7100;color:#ff7100;")},"去查看",React.createElement("form",{className:"getFormId"},React.createElement("button",{type:"button",className:"invisibleclass",onClick:this.formSubmit_collect}))))):React.createElement(React.Fragment,null,0==r.status&&React.createElement(React.Fragment,null,React.createElement("span",{className:"apply-refund isRelative",onClick:this.showEventDialog,"data-type":"cancelOrder"},"取消订单",React.createElement("form",{className:"getFormId"},React.createElement("button",{className:"invisibleclass",onClick:this.formSubmit_collect}))),React.createElement("span",{className:"btn btn-orange orderDetail-pay-directly isRelative",style:(0,p.convertLineStyleData)("color:"+n.theme+";border-color:"+n.theme),onClick:this.payOrder},"立即支付",React.createElement("form",{className:"getFormId"},React.createElement("button",{className:"invisibleclass",onClick:this.formSubmit_collect})))),1==r.status&&React.createElement(React.Fragment,null,React.createElement("span",{className:"btn btn-orange isRelative",style:(0,p.convertLineStyleData)("color:"+n.theme+";border-color:"+n.theme),onClick:this.getWriteOffCodeBox},"核销码",React.createElement("form",{className:"getFormId"},React.createElement("button",{type:"button",className:"invisibleclass",onClick:this.formSubmit_collect}))),D>1&&5!=D&&1e3!=D&&React.createElement("span",{className:"btn isRelative",onClick:this.checkLogistics},"配送信息",React.createElement("form",{className:"getFormId"},React.createElement("button",{className:"invisibleclass",onClick:this.formSubmit_collect}))),1==r.is_pay_on_delivery?React.createElement("span",{className:"apply-refund isRelative",onClick:this.showEventDialog,"data-type":"deliveryDrawback"},"取消订单",React.createElement("form",{className:"getFormId"},React.createElement("button",{className:"invisibleclass",onClick:this.formSubmit_collect}))):(0!=r.is_group_buy_order&&1==r.can_refund_order||0==r.is_group_buy_order)&&1==S&&React.createElement("span",{className:"apply-refund isRelative",onClick:this.applyDrawback},"申请退款",React.createElement("form",{className:"getFormId"},React.createElement("button",{type:"button",className:"invisibleclass",onClick:this.formSubmit_collect})))),2==r.status&&React.createElement(React.Fragment,null,3!=r.pick_up_type&&React.createElement("span",{className:"btn isRelative",onClick:this.checkLogistics},"配送信息",React.createElement("form",{className:"getFormId"},React.createElement("button",{type:"button",className:"invisibleclass",onClick:this.formSubmit_collect}))),1==r.is_pay_on_delivery?React.createElement("span",{className:"apply-refund isRelative",onClick:this.showEventDialog,"data-type":"deliveryDrawback"},"取消订单",React.createElement("form",{className:"getFormId"},React.createElement("button",{type:"button",className:"invisibleclass",onClick:this.formSubmit_collect}))):(0!=r.is_group_buy_order&&1==r.can_refund_order||0==r.is_group_buy_order)&&1==S&&React.createElement("span",{className:"apply-refund isRelative",onClick:this.applyDrawback},"申请退款",React.createElement("form",{className:"getFormId"},React.createElement("button",{type:"button",className:"invisibleclass",onClick:this.formSubmit_collect}))),React.createElement("span",{className:"btn btn-orange isRelative",style:(0,p.convertLineStyleData)("color:"+n.theme+";border-color:"+n.theme),onClick:this.getWriteOffCodeBox},"核销码",React.createElement("form",{className:"getFormId"},React.createElement("button",{type:"button",className:"invisibleclass",onClick:this.formSubmit_collect}))),React.createElement("span",{className:"btn btn-orange isRelative",style:(0,p.convertLineStyleData)("color:"+n.theme+";border-color:"+n.theme),onClick:this.showEventDialog,"data-type":"sureReceipt"},"确认收货",React.createElement("form",{className:"getFormId"},React.createElement("button",{type:"button",className:"invisibleclass",onClick:this.formSubmit_collect})))),3==r.status&&React.createElement(React.Fragment,null,React.createElement("span",{className:"apply-refund  isRelative",onClick:this.showEventDialog,"data-type":"orderDelete"},"删除订单",React.createElement("form",{className:"getFormId"},React.createElement("button",{type:"button",className:"invisibleclass",onClick:this.formSubmit_collect}))),React.createElement("span",{className:"btn btn-orange isRelative",style:(0,p.convertLineStyleData)("color:"+n.theme+";border-color:"+n.theme),onClick:this.getWriteOffCodeBox},"核销码",React.createElement("form",{className:"getFormId"},React.createElement("button",{type:"button",className:"invisibleclass",onClick:this.formSubmit_collect}))),React.createElement("span",{className:"btn btn-orange isRelative",style:(0,p.convertLineStyleData)("color:"+n.theme+";border-color:"+n.theme),onClick:this.makeComment},"去评价",React.createElement("form",{className:"getFormId"},React.createElement("button",{type:"button",className:"invisibleclass",onClick:this.formSubmit_collect})))),4==r.status&&React.createElement(React.Fragment,null,React.createElement("span",{className:"btn isRelative",onClick:this.cancelRefund},3==r.refund_apply.status||4==r.refund_apply.status?"撤销退货":"撤销申请",React.createElement("form",{className:"getFormId"},React.createElement("button",{type:"button",className:"invisibleclass",onClick:this.formSubmit_collect}))),1!=r.is_pay_on_delivery&&React.createElement("span",{className:"btn isRelative",onClick:this.editorRefund},"修改申请",React.createElement("form",{className:"getFormId"},React.createElement("button",{type:"button",className:"invisibleclass",onClick:this.formSubmit_collect}))),3==r.refund_apply.status&&React.createElement("span",{className:"btn btn-orange isRelative",style:(0,p.convertLineStyleData)("color:"+n.theme+";border-color:"+n.theme),onClick:this.returnInfor},"填写退货信息",React.createElement("form",{className:"getFormId"},React.createElement("button",{type:"button",className:"invisibleclass",onClick:this.formSubmit_collect})))),5==r.status&&React.createElement(React.Fragment,null,React.createElement("span",{className:"btn isRelative",onClick:this.showEventDialog,"data-type":"receiveDrawback"},"收到退款",React.createElement("form",{className:"getFormId"},React.createElement("button",{type:"button",className:"invisibleclass",onClick:this.formSubmit_collect})))),6==r.status&&React.createElement(React.Fragment,null,React.createElement("span",{className:"apply-refund isRelative",onClick:this.showEventDialog,"data-type":"orderDelete"},"删除订单",React.createElement("form",{className:"getFormId"},React.createElement("button",{type:"button",className:"invisibleclass",onClick:this.formSubmit_collect})))),7==r.status&&React.createElement(React.Fragment,null,React.createElement("span",{className:"apply-refund isRelative",onClick:this.showEventDialog,"data-type":"orderDelete"},"删除订单",React.createElement("form",{className:"getFormId"},React.createElement("button",{type:"button",className:"invisibleclass",onClick:this.formSubmit_collect})))),8==r.status&&React.createElement(React.Fragment,null,React.createElement("span",{className:"apply-refund isRelative",onClick:this.showEventDialog,"data-type":"cancelOrder"},"取消订单",React.createElement("form",{className:"getFormId"},React.createElement("button",{type:"buttonk",className:"invisibleclass",onClick:this.formSubmit_collect}))))))),P&&React.createElement("div",{className:"verification-code",onClick:this.hideWriteOffCodeBox},React.createElement("div",{className:"verification-code-tips"},"向商家出示二维码或核销码后即可消费"),React.createElement("div",{className:"verification-image-box"},React.createElement("img",{className:"verification-code-img",src:I}),1==M&&React.createElement("div",{className:"verification-code-finished"},React.createElement("div",null,"已核销"))),React.createElement("div",{className:"verification-code-text"},React.createElement("span",null,"核销码："),React.createElement("span",null,T))),A&&React.createElement("div",{className:"event-dialog-mask"},React.createElement("div",{className:"event-dialog"},"cancelOrder"==L&&React.createElement("div",{className:"event-dialog-title"},"确认取消订单？"),"orderDelete"==L&&React.createElement("div",{className:"event-dialog-title"},"订单删除后不可找回，确认删除？"),"receiveDrawback"==L&&React.createElement("div",{className:"event-dialog-title"},"确定已收到退款？"),"sureReceipt"==L&&React.createElement("div",{className:"event-dialog-title"},"确定已收到货物？"),"deliveryDrawback"==L&&React.createElement("div",{className:"event-dialog-title"},"确认取消订单？"),React.createElement("div",{className:"event-dialog-bottom"},React.createElement("span",{className:"event-cancel",onClick:this.hideEventDialog},"取消"),"cancelOrder"==L&&React.createElement("span",{style:(0,p.convertLineStyleData)("color:"+n.theme),className:"event-sure",onClick:this.cancelOrder},"确认"),"orderDelete"==L&&React.createElement("span",{style:(0,p.convertLineStyleData)("color:"+n.theme),className:"event-sure",onClick:this.orderDelete},"确认"),"receiveDrawback"==L&&React.createElement("span",{style:(0,p.convertLineStyleData)("color:"+n.theme),className:"event-sure",onClick:this.receiveDrawback},"确认"),"sureReceipt"==L&&React.createElement("span",{style:(0,p.convertLineStyleData)("color:"+n.theme),className:"event-sure",onClick:this.sureReceipt},"确认"),"deliveryDrawback"==L&&React.createElement("span",{style:(0,p.convertLineStyleData)("color:"+n.theme),className:"event-sure",onClick:this.deliveryDrawback},"确认"))))))}}]),t}(v.default);t.default=_},function(e,t){},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};for(var n in t)e+=(a[n]||n)+"="+(t[n]||"")+"&";return e},o={couponDetail:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n("router=couponDetail&",e,{franchisee:"sub_id"})},videoDetail:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n("router=videoDetail&",e)},toStoreDetail:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n("router=toStoreDetail&",e)},franchiseeDetail:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n("router=franchiseeDetail&",e)},groupCenter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n("router=groupCenter&",e)},communityPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n("router=communityPage&",e)},couponReceiveListPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n("router=couponReceiveListPage&",e)},recharge:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n("router=recharge&",e)},transferPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n("router=transferPay&",e)},luckyWheelDetail:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n("router=luckyWheelDetail&",e)},scratch:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n("router=scratch&",e)},goldenEggs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n("router=goldenEggs&",e)},franchiseeEnter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n("router=franchiseeEnter&",e)},userCenterComponentPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n("router=userCenterComponentPage&",e)},storeSinglePage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n("router=storeSinglePage&",e)},myMessage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n("router=myMessage&",e)},shoppingCart:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n("router=shoppingCart&",e)},myOrder:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n("router=myOrder&",e)},newsDetail:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n("router=newsDetail&",e)},communityDetail:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n("router=communityDetail&",e)}};t.default=o},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.PreviewImage=void 0;var o=a(26),i=n(o),s=a(0),r=n(s),c=a(3),l=n(c),d=a(1),u=n(d),m=a(2),p=n(m);a(27);var f=a(4),g=n(f);a(536);t.PreviewImage=function(e){function t(e){(0,r.default)(this,t);var a=(0,u.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.options=a.props.options;var n=a.options.current;a.urls=a.options.urls||(n?[n]:[]);var o=a.urls.indexOf(n);return a.selectedIndex=o>-1?o:0,a.state={selectedIndex:a.selectedIndex},a.carouselAfterChange=a.carouselAfterChange.bind(a),a}return(0,p.default)(t,e),(0,l.default)(t,[{key:"carouselAfterChange",value:function(e){this.setState({selectedIndex:e})}},{key:"imgClick",value:function(e){e.stopPropagation()}},{key:"close",value:function(e){ReactDOM.unmountComponentAtNode(document.getElementById("popup"))}},{key:"render",value:function(){var e=this;return g.default.createElement("div",{className:"common-api preview-image"},g.default.createElement("div",{className:"preivew-image-dots"},this.state.selectedIndex+1,"/",this.urls.length),g.default.createElement(i.default,{selectedIndex:this.selectedIndex,dots:!1,afterChange:this.carouselAfterChange},this.urls.map(function(t,a){return g.default.createElement("div",{className:"preview-image-item",key:a,onClick:e.close},g.default.createElement("img",{src:t,alt:"",onClick:e.imgClick}))})))}}]),t}(g.default.Component)},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ChooseLocation=void 0;var o=a(0),i=n(o),s=a(3),r=n(s),c=a(1),l=n(c),d=a(2),u=n(d),m=a(4),p=n(m),f=a(5);a(538);t.ChooseLocation=function(e){function t(e){(0,i.default)(this,t);var a=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.options=a.props.options,a.mapInstance=null,a.searchService=null,a.geocoder=null,a.marker=null,a.state={locationPoi:"",nearPois:[],chooseIndex:-1,showSearch:!1,searchValue:"",searchList:[]},a.textInput=p.default.createRef(),a}return(0,u.default)(t,e),(0,r.default)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.mapInstance=new qq.maps.Map(document.getElementById("choose-location-map"),{zoom:15,zoomControl:!1,panControl:!1,mapTypeControl:!1});this.getLocation(),this.locationIcon(),this.centerIcon(),qq.maps.event.addListener(t,"dragend",function(){e.mapLocationList(t.getCenter())})}},{key:"getLocation",value:function(){var e=this;f.appMethod.getLocation({success:function(t){var a=new qq.maps.LatLng(t.latitude,t.longitude);e.mapInstance.panTo(a),e.mapLocationList(a)},fail:function(t){new qq.maps.CityService({complete:function(t){e.mapInstance.panTo(t.detail.latLng),e.mapLocationList(t.detail.latLng)},error:function(){e.mapLocationList(mapInstance.getCenter())}}).searchLocalCity()}})}},{key:"locationIcon",value:function(){var e=this,t=document.createElement("div");t.style.cssText="width:35px;height:35px;border:1px solid #e9e9e9;border-radius: 20px;margin-right:10px;text-align: center;line-height: 35px;font-size: 20px;color: #07c160;background-color:#ffffff;",t.innerHTML='<span class="icon-moon icon-relocate" style="line-height: 35px;"><span>',t.index=3,this.mapInstance.controls[qq.maps.ControlPosition.RIGHT_BOTTOM].push(t),qq.maps.event.addListener(t,"click",function(){e.getLocation()})}},{key:"centerIcon",value:function(){var e=document.createElement("div");e.style.cssText="font-size: 20px;color: red;",e.innerHTML='<span class="icon-moon icon-fes_adress"><span>',e.index=3,this.mapInstance.controls[qq.maps.ControlPosition.CENTER].push(e)}},{key:"mapLocationList",value:function(e,t){var a=this;new qq.maps.Geocoder({complete:function(e){var n=e.detail.nearPois;t&&n[0].name!=t.name&&n.unshift(t),a.setState({locationPoi:t?"":e.detail,nearPois:n,chooseIndex:t?0:-1})}}).getAddress(e)}},{key:"chooseLocationPoi",value:function(){this.setState({chooseIndex:-1}),this.mapInstance.panTo(this.state.locationPoi.location)}},{key:"chooseNearPois",value:function(e){this.setState({chooseIndex:e}),this.mapInstance.panTo(this.state.nearPois[e].latLng)}},{key:"chooseConfirm",value:function(){var e={},t=this.state.chooseIndex;if(-1==t){var a=this.state.locationPoi;e={name:a.addressComponents.streetNumber,address:a.address,latitude:a.location.lat,longitude:a.location.lng}}else{var n=this.state.nearPois[t];e={name:n.name,address:n.address,latitude:n.latLng.lat,longitude:n.latLng.lng}}ReactDOM.unmountComponentAtNode(document.getElementById("popup")),"function"==typeof this.options.success&&this.options.success(e)}},{key:"chooseCancel",value:function(){ReactDOM.unmountComponentAtNode(document.getElementById("popup")),"function"==typeof this.options.fail&&this.options.fail()}},{key:"gotoSearch",value:function(){this.setState({showSearch:!0}),this.textInput.current.focus()}},{key:"cencelSearch",value:function(){this.setState({showSearch:!1,searchValue:"",searchList:[]})}},{key:"deleteSearchText",value:function(){this.setState({searchValue:"",searchList:[]}),this.textInput.current.focus()}},{key:"handleInputChange",value:function(e){var t=this,a=e.target.value;if(this.setState({searchValue:a}),this.searchService||(this.searchService=new qq.maps.SearchService({complete:function(e){var a=e.detail.pois;console.log(e),"POI_LIST"==e.type&&t.setState({searchList:a})}}),this.searchService.setPageCapacity(15)),this.searchService){var n=this.state.locationPoi?this.state.locationPoi.addressComponents.city:"深圳";this.searchService.setLocation(n),this.searchService.search(a)}}},{key:"chooseSearchPois",value:function(e){var t=this.state.searchList[e];this.mapInstance.panTo(t.latLng),this.mapLocationList(t.latLng,t),this.setState({showSearch:!1,searchValue:"",searchList:[]})}},{key:"render",value:function(){var e=this;return p.default.createElement("div",{className:"common-api choose-location"},p.default.createElement("div",{className:"choose-location-head"},p.default.createElement("button",{className:"choose-location-cancel",onClick:this.chooseCancel.bind(this)},"取消"),p.default.createElement("button",{className:"choose-location-confirm",onClick:this.chooseConfirm.bind(this)},"确定")),p.default.createElement("div",{className:"choose-location-search",onClick:this.gotoSearch.bind(this)},p.default.createElement("label",{className:"icon-moon icon-search"}),p.default.createElement("span",null,"搜索地点")),p.default.createElement("div",{className:"choose-location-map",id:"choose-location-map"}),p.default.createElement("div",{className:"choose-location-address"},this.state.locationPoi&&p.default.createElement("div",{className:"choose-address-current",onClick:this.chooseLocationPoi.bind(this)},p.default.createElement("div",{className:"choose-address-left"},p.default.createElement("div",{className:"choose-address-name"},this.state.locationPoi.address)),p.default.createElement("div",{className:"choose-address-right"},-1==this.state.chooseIndex?p.default.createElement("label",{className:"icon-moon icon-gou"}):"")),this.state.nearPois.map(function(t,a){return p.default.createElement("div",{className:"choose-address-list",key:a,onClick:e.chooseNearPois.bind(e,a)},p.default.createElement("div",{className:"choose-address-left"},p.default.createElement("div",{className:"choose-address-name"},t.name),p.default.createElement("div",{className:"choose-address-address"},t.address)),p.default.createElement("div",{className:"choose-address-right"},e.state.chooseIndex==a?p.default.createElement("label",{className:"icon-moon icon-gou"}):""))})),p.default.createElement("div",{className:"location-search-wrap",hidden:!this.state.showSearch},p.default.createElement("div",{className:"location-search-head"},p.default.createElement("div",{className:"location-search-input-wrap"},p.default.createElement("label",{className:"icon-moon icon-search",htmlFor:"location-search-input"}),p.default.createElement("input",{id:"location-search-input",ref:this.textInput,type:"text",placeholder:"搜索地点",value:this.state.searchValue,onInput:function(t){return e.handleInputChange(t)},onChange:function(t){return e.handleInputChange(t)}}),p.default.createElement("label",{className:"location-search-input-delete icon-moon icon-close-btn",onClick:this.deleteSearchText.bind(this)})),p.default.createElement("div",{className:"location-search-cancel",onClick:this.cencelSearch.bind(this)},"取消")),p.default.createElement("div",{className:"location-search-list"},this.state.searchList.map(function(t,a){return p.default.createElement("div",{className:"search-address-list",key:a,onClick:e.chooseSearchPois.bind(e,a)},p.default.createElement("div",{className:"search-address-name"},t.name),p.default.createElement("div",{className:"search-address-address"},t.address))}))))}}]),t}(p.default.Component)},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.OpenLocation=void 0;var o=a(0),i=n(o),s=a(3),r=n(s),c=a(1),l=n(c),d=a(2),u=n(d),m=a(4),p=n(m),f=a(5);a(540);t.OpenLocation=function(e){function t(e){(0,i.default)(this,t);var a=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.options=a.props.options,a.mapInstance=null,a.marker=null,a}return(0,u.default)(t,e),(0,r.default)(t,[{key:"componentDidMount",value:function(){if(!this.options||!this.options.latitude||!this.options.longitude)return f.appMethod.showToast({title:"经纬度是必填参数"}),void console.error("openLocation接口，经纬度是必填参数");this.mapInstance=new qq.maps.Map(document.getElementById("open-location-map"),{zoom:15,zoomControl:!1,panControl:!1,mapTypeControl:!1});var e=new qq.maps.LatLng(this.options.latitude,this.options.longitude);this.mapInstance.panTo(e),this.setMarker(e),this.locationIcon(),this.backIcon()}},{key:"locationIcon",value:function(){var e=this,t=document.createElement("div");t.style.cssText="width:35px;height:35px;border:1px solid #e9e9e9;border-radius: 20px;margin-right:10px;text-align: center;line-height: 35px;font-size: 20px;color: #07c160;background-color:#ffffff;",t.innerHTML='<span class="icon-moon icon-relocate" style="line-height: 35px;"><span>',t.index=3,this.mapInstance.controls[qq.maps.ControlPosition.RIGHT_BOTTOM].push(t),qq.maps.event.addListener(t,"click",function(){e.getLocation()})}},{key:"backIcon",value:function(){var e=document.createElement("div");e.style.cssText="width:30px;height:30px;border-radius: 2px;margin:10px;text-align: center;line-height: 30px;font-size: 18px;color: #ffffff;background-color:rgba(0,0,0,.5);",e.innerHTML='<span class="icon-moon icon-leftarrow" style="line-height: 30px;"><span>',e.index=3,this.mapInstance.controls[qq.maps.ControlPosition.LEFT_TOP].push(e),qq.maps.event.addListener(e,"click",function(){ReactDOM.unmountComponentAtNode(document.getElementById("popup"))})}},{key:"getLocation",value:function(){var e=this;f.appMethod.getLocation({success:function(t){var a=new qq.maps.LatLng(t.latitude,t.longitude);e.mapInstance.panTo(a),e.setMarker(a)},fail:function(t){new qq.maps.CityService({complete:function(t){e.mapInstance.panTo(t.detail.latLng),e.setMarker(t.detail.latLng)},error:function(){f.appMethod.showToast({title:"定位失败"})}}).searchLocalCity()}})}},{key:"setMarker",value:function(e){this.marker&&this.marker.setMap(null),this.marker=new qq.maps.Marker({map:this.mapInstance,position:e})}},{key:"render",value:function(){return p.default.createElement("div",{className:"common-api open-location"},p.default.createElement("div",{className:"open-location-map",id:"open-location-map"}))}}]),t}(p.default.Component)},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){console.log("【当前应用】"+x.appMethod.getAppId()+"\n【页面路由】"+e+" \n【可复现路径】"+window.location.href);var a=x.appMethod.globalData.tabBarPagePathArr.indexOf(e)>-1;return E.default.createElement("div",{className:"official-page "+e,style:{height:a?"calc(100vh - 48px)":null}},A.default[e](t),function(){if(a){var e=x.appInstance.state.appData,n=e.data["tab-bar"],o={type:"tab-nav",content:n.list,customFeature:{color:n.color||"#59607B",selectedColor:n.selectedColor||"inherit",backgroundColor:n.backgroundColor||"#fff",borderStyle:n.borderStyle||"black",position:"bottom"}};return E.default.createElement(P.default,(0,_.default)({},t,{data:o}))}}())}function i(e){var t=e.data["tab-bar"];if(t){var a={type:"tab-nav",content:t.list,customFeature:{color:t.color||"#59607B",selectedColor:t.selectedColor||"inherit",backgroundColor:t.backgroundColor||"#fff",borderStyle:t.borderStyle||"black",position:"bottom"}},n=[],o=!0,i=!1,s=void 0;try{for(var r,c=t.list[Symbol.iterator]();!(o=(r=c.next()).done);o=!0){var l=r.value,d=l.router;d.indexOf("tabbar")>-1&&(d=d.replace(/tabbar/gi,""),l.router=d=d.replace(d[0],d[0].toLowerCase())),d&&e[d]&&e[d].eles.push(a),n.push(d)}}catch(e){i=!0,s=e}finally{try{!o&&c.return&&c.return()}finally{if(i)throw s}}x.appMethod.globalData.tabBarPagePathArr=n}}function s(e,t){var a=e,n=t,o=!1,i=!0,s=!1,r=void 0;try{for(var c,l=Object.keys(a)[Symbol.iterator]();!(i=(c=l.next()).done);i=!0){var d=c.value;if(d.includes("page")||d.includes("Page")){var u=!0,m=!1,p=void 0;try{for(var f,g=a[d].eles[Symbol.iterator]();!(u=(f=g.next()).done);u=!0){var h=f.value;if(function e(t){if(!o&&t.type){if(t.type===n)return void(o=!0);if(Array.isArray(t.content)){var a=!0,i=!1,s=void 0;try{for(var r,c=t.content[Symbol.iterator]();!(a=(r=c.next()).done);a=!0){if(e(r.value),o)return}}catch(e){i=!0,s=e}finally{try{!a&&c.return&&c.return()}finally{if(i)throw s}}}else if("layout-vessel"===t.type){var l=!0,d=!1,u=void 0;try{for(var m,p=Object.keys(t.content)[Symbol.iterator]();!(l=(m=p.next()).done);l=!0){var f=m.value,g=!0,h=!1,v=void 0;try{for(var _,y=t.content[f][Symbol.iterator]();!(g=(_=y.next()).done);g=!0){var E=_.value;if(e(E),o)return}}catch(e){h=!0,v=e}finally{try{!g&&y.return&&y.return()}finally{if(h)throw v}}}}catch(e){d=!0,u=e}finally{try{!l&&p.return&&p.return()}finally{if(d)throw u}}}}}(h),o)break}}catch(e){m=!0,p=e}finally{try{!u&&g.return&&g.return()}finally{if(m)throw p}}if(o)break}}}catch(e){s=!0,r=e}finally{try{!i&&l.return&&l.return()}finally{if(s)throw r}}return o}Object.defineProperty(t,"__esModule",{value:!0});var r=a(22),c=n(r),l=a(0),d=n(l),u=a(3),m=n(u),p=a(1),f=n(p),g=a(2),h=n(g),v=a(8),_=n(v);a(23);var y=a(4),E=n(y),b=a(115),N=a(74),R=a(38),k=a(34),w=a(6),x=a(5),C=a(12),D=(n(C),a(542)),S=n(D),I=a(741),M=n(I),T=a(33),P=n(T),L=a(138),A=n(L),F=a(73),O=a(743),B=a(745),j=a(747),G=a(749),q=a(751),U=a(112),z=[],V=Object.keys(A.default),W=function(e){function t(e){(0,d.default)(this,t);var a=(0,f.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={allData:null,appData:null,loading:!0},a.goodsShoppingCartRef=E.default.createRef(),a.tostoreShoppingCartRef=E.default.createRef(),a.pageQrcodeRef=E.default.createRef(),a.payRef=E.default.createRef(),a.rewardPointModalRef=E.default.createRef(),a.showVipModalRef=E.default.createRef();var n=(0,w.getQueryString)("app_id")||x.appMethod.getAppId();return n?(x.appMethod.setAppId(n),(0,x.setApp)(a),x.appMethod.isWeixin()?x.appMethod.sendRequest({url:"/index.php?r=AppUser/LoginState",success:function(e){e.data&&(x.appMethod.setIsLogin(!0),x.appMethod.requestUserInfo())}}):1==(0,w.getQueryString)("is_preview")&&x.appMethod.autoTouristLogin(),x.appMethod.isLogin()&&(x.appMethod.globalData.isLogin=!0),(0,k.ajax)({url:"/index.php?r=AppData/detail",type:"post",data:{app_id:(0,R.getAppId)(),from:(0,w.getQueryString)("from"),history_id:(0,w.getQueryString)("history_id")},success:function(e){if(0!==e.status)return void c.default.info(e.data);var t=e.data;if(!t.app_data)return void c.default.info("您的应用没有内容哦");var n=JSON.parse(t.app_data);for(var o in n)n.hasOwnProperty(o)&&(/page\d{5}/g.test(o)||"storeSinglePage"===o||"userCenterComponentPage"===o)&&z.push(n[o].router);x.appMethod.globalData.homepageRouter=n.data["xcx-homepage-router"]||n.data["homepage-router"],x.appMethod.globalData.historyDataId=t.his_id,x.appMethod.globalData.appTitle=t.app_name,x.appMethod.globalData.appDescription=t.description,x.appMethod.globalData.appLogo=t.logo,x.appMethod.globalData.hasFranchiseeList=s(n,"franchisee-list"),x.appMethod.globalData.hasFranchiseeChain=s(n,"franchisee-chain"),i(n),x.appMethod.globalData.currentPages=[{route:N.location.pathname.split("/")[1]||x.appMethod.globalData.homepageRouter,callbackData:null,setData:function(e){this.callbackData?this.callbackData=(0,_.default)({},this.callbackData,e):this.callbackData=e},clearCallbackData:function(){this.callbackData=null}}],x.appMethod.onLaunch(),x.appMethod.onShow(),a.configSDK(),a.setState({allData:t,appData:n,loading:!1}),window.addEventListener("message",function(e){try{if(e&&e.data){if("string"!=typeof e.data)return;var t=JSON.parse(e.data);x.appMethod.turnToPage(t.router)}}catch(e){console.log(e)}},!1)},error:function(e){console.error(e),c.default.info(e,2)}}),a):(0,f.default)(a)}return(0,h.default)(t,e),(0,m.default)(t,[{key:"configSDK",value:function(){x.appMethod.isWeixin()&&(0,U.configWxSDK)()}},{key:"render",value:function(){var e=this.state,t=e.appData,a=e.loading,n=x.appMethod.globalData.homepageRouter;return a?E.default.createElement(M.default,null):E.default.createElement(E.default.Fragment,null,E.default.createElement(b.Switch,null,z.map(function(e){return E.default.createElement(b.Route,{key:e,path:"/"+e,render:function(a){return E.default.createElement(S.default,(0,_.default)({data:t[e]},a))}})}),V.map(function(e){return E.default.createElement(b.Route,{key:e,path:"/"+e,render:function(t){return o(e,t)}})}),E.default.createElement(b.Redirect,{exact:!0,from:"/",to:n})),E.default.createElement(F.GoodsShoppingCart,{ref:this.goodsShoppingCartRef}),E.default.createElement(O.TostoreShoppingCart,{ref:this.tostoreShoppingCartRef}),E.default.createElement(G.PageQrcode,{ref:this.pageQrcodeRef}),E.default.createElement(B.RewardPointModal,{ref:this.rewardPointModalRef}),E.default.createElement(j.ShowVipModal,{ref:this.showVipModalRef}),E.default.createElement(q.Pay,{ref:this.payRef}))}}]),t}(E.default.Component);t.default=W},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t,a){Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:function(){return"props"===a?e.props:(0,h.default)({},e.props,e.state)}})}Object.defineProperty(t,"__esModule",{value:!0});var i=a(36),s=n(i),r=a(0),c=n(r),l=a(3),d=n(l),u=a(1),m=n(u),p=a(2),f=n(p),g=a(8),h=n(g),v=a(4),_=n(v),y=a(33),E=n(y),b=a(111),N=a(5),R=a(30),k=a(6),w=a(731),x=a(732),C=a(734),D=a(157),S=a(736),I=a(738),M=a(112);a(740);var T=function(e,t,a){return null==e?e:(0,b.baseSet)(e,t,a)},P=function(e){var t=e.findIndex(function(e){return"user-center"===e.type});if(t>-1){var a=JSON.parse(JSON.stringify(e[t]));a=function(e){var t=JSON.parse(JSON.stringify(e));return t.customFeature=(0,h.default)({},e.customFeature,{member:e.customFeature.member||(3==e.customFeature["personal-mode"]?2:1),"personal-mode":e.customFeature["personal-mode"]||1,"senior-mode":e.customFeature["senior-mode"]||1}),t}(e[t]),a.type="user-center-head";var n=JSON.parse(JSON.stringify(e[t]));n=function(e){return JSON.parse(JSON.stringify(e))}(e[t]),n.type="user-center-content",e.splice(t,1,a,n)}},L=function(e){function t(e){(0,c.default)(this,t);var a=(0,m.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.id=(0,k.randomWord)(8),a.route=a.props.location.pathname.split("/")[1],a.shareData={},a.downcountObject={},a.requesting=!1,a.requestNum=1,a.page_router=a.props.data.router,a.filterRef=_.default.createRef(),a.formPayRef=_.default.createRef(),a.communityPublishRef=_.default.createRef(),a.communityPublishTypeRef=_.default.createRef(),a.setData=function(e,t){var n=Object.assign({},a.state);Object.keys(e).forEach(function(t){T(n,t,e[t])}),Object.assign(a.state,n),a.setState(n),setTimeout(function(){"function"==typeof t&&t()},0)},a.setComponentRef=function(e,t){R.pageComponentRefs[e]=t},a.callComponentMethod=function(e){var t=e.componentIndex,a=e.methodName,n=e.argvs;if(t>-1&&R.pageComponentRefs[t].current){var o;(o=R.pageComponentRefs[t].current)[a].apply(o,(0,s.default)(n))}},a.setShareData=function(){if(a.onShareAppMessage){a.shareData=a.onShareAppMessage();var e=a.shareData.path,t=e.split("/");e=window.location.origin+"/zc_webapp/"+t[t.length-1],/app_id/.test(e)||(e=e.indexOf("?")<0?e+"?app_id="+N.appMethod.getAppId():e+"&app_id="+N.appMethod.getAppId()),a.shareData.path=e,N.appMethod.isWeixin()&&(0,M.configWxShare)({title:a.shareData.title,link:a.shareData.path,imgUrl:a.shareData.imageUrl})}},a.shareClickEvent=function(){N.appMethod.shareClickEvent()},a.onShareAppMessage=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return N.appMethod.onPageShareAppMessage(e)},a.onPageScroll=function(e){var t=a.customPageRef.current;e=(0,h.default)({},e,{scrollTop:t.scrollTop,scrollLeft:t.scrollLeft,scrollWidth:t.scrollWidth,scrollHeight:t.scrollHeight}),N.appMethod.onPageScroll(e)},o(a,"data","state");var n=e.data;return n.customFeature.needLogin&&!N.appMethod.isLogin()?(N.appMethod.goLogin(),(0,m.default)(a)):(document.title=n.customFeature.name||n.customFeature.title,P(n.eles),a.state=Object.assign({detailData:null},n),a.customPageRef=_.default.createRef(),(0,R.setPage)(a),(N.appMethod.getCurrentPage().callbackData||N.appMethod.getCurrentPage().callbackFun)&&(a.currentPage=N.appMethod.getCurrentPage()),console.log("【当前应用】"+N.appMethod.getAppId()+"\n【当前页面】"+document.title+"\n【页面路由】"+n.router+" \n【可复现路径】"+window.location.href),a)}return(0,f.default)(t,e),(0,d.default)(t,[{key:"handleCurrentPage",value:function(){this.currentPage&&(this.currentPage.callbackData&&(this.setData(this.currentPage.callbackData),this.currentPage.clearCallbackData()),this.currentPage.callbackFun&&(this.currentPage.calllbackFun(),delete this.currentPage.calllbackFun))}},{key:"componentDidMount",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,k.getCurrentPageQueryParams)();this.state&&(N.appMethod.onPageLoad(t),N.appMethod.onPageShow(),N.appMethod.isNeedRewardModal(),this.handleCurrentPage(),setTimeout(function(){e.setShareData()},4e3))}},{key:"render",value:function(){var e=this;if(!this.state)return null;var t=this.state,a=t.eles,n=t.detailData,o=t.customFeature,i=t.techSupport,s={backgroundColor:o["background-color"],backgroundImage:o["background-image"],paddingBottom:N.appMethod.isTabBarPage()?"48px":null},r=N.appMethod.isTabBarPage();return _.default.createElement("div",{ref:this.customPageRef,className:"custom-page",style:s,onScroll:this.onPageScroll},a.map(function(t,a){var o=_.default.createRef();return e.setComponentRef(a,o),_.default.createElement(E.default,(0,h.default)({},e.props,{ref:o,key:a,index:a,data:t,detailData:n}))}),r&&"not_vip"==i&&_.default.createElement(w.TechSupport,null),_.default.createElement(x.Filter,{ref:this.filterRef}),_.default.createElement(C.FormPay,{ref:this.formPayRef}),_.default.createElement(D.SinkingModal,null),_.default.createElement(S.CommunityPublish,{ref:this.communityPublishRef}),_.default.createElement(I.CommunityPublishType,{ref:this.communityPublishTypeRef}))}}]),t}(_.default.Component);t.default=L},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(8),i=n(o),s=a(544),r=n(s),c=a(546),l=n(c),d=a(548),u=n(d),m=a(552),p=n(m),f=a(554),g=n(f),h=a(556),v=n(h),_=a(558),y=n(_),E=a(560),b=n(E),N=a(581),R=n(N),k=a(589),w=n(k),x=a(591),C=n(x),D=a(593),S=n(D),I=a(595),M=n(I),T=a(597),P=n(T),L=a(599),A=n(L),F=a(601),O=n(F),B=a(603),j=n(B),G=a(605),q=n(G),U=a(607),z=n(U),V=a(609),W=n(V),H=a(611),J=n(H),Y=a(613),Q=n(Y),K=a(615),X=n(K),$=a(617),Z=n($),ee=a(619),te=n(ee),ae=a(621),ne=n(ae),oe=a(623),ie=n(oe),se=a(625),re=n(se),ce=a(631),le=n(ce),de=a(633),ue=n(de),me=a(635),pe=n(me),fe=a(637),ge=n(fe),he=a(639),ve=n(he),_e=a(641),ye=n(_e),Ee=a(643),be=n(Ee),Ne=a(645),Re=n(Ne),ke=a(647),we=n(ke),xe=a(649),Ce=n(xe),De=a(651),Se=n(De),Ie=a(653),Me=n(Ie),Te=a(655),Pe=n(Te),Le=a(657),Ae=n(Le),Fe=a(659),Oe=n(Fe),Be=a(661),je=n(Be),Ge=a(663),qe=n(Ge),Ue=a(665),ze=n(Ue),Ve=a(667),We=n(Ve),He=a(671),Je=n(He),Ye=a(673),Qe=n(Ye),Ke=a(675),Xe=n(Ke),$e=a(677),Ze=n($e),et=a(679),tt=n(et),at=a(681),nt=n(at),ot=a(686),it=n(ot),st=a(688),rt=n(st),ct=a(690),lt=n(ct),dt=a(692),ut=n(dt),mt=a(694),pt=n(mt),ft=a(696),gt=n(ft),ht=a(698),vt=n(ht),_t=a(703),yt=n(_t),Et=a(705),bt=n(Et),Nt=a(707),Rt=n(Nt),kt=a(709),wt=n(kt),xt=a(711),Ct=n(xt),Dt=a(713),St=n(Dt),It=a(715),Mt=n(It),Tt=a(717),Pt=n(Tt),Lt=a(718),At=n(Lt),Ft=a(720),Ot=n(Ft),Bt=a(722),jt=n(Bt),Gt=a(724),qt=n(Gt),Ut=a(726),zt=n(Ut),Vt=a(728),Wt=n(Vt),Ht={text:function(e){return React.createElement(r.default,e)},picture:function(e){return React.createElement(l.default,e)},"list-vessel":function(e,t){return React.createElement(u.default,(0,i.default)({ref:t},e))},"dynamic-vessel":function(e,t){return React.createElement(p.default,(0,i.default)({ref:t},e))},"form-vessel":function(e,t){return React.createElement(g.default,(0,i.default)({ref:t},e))},"input-ele":function(e){return React.createElement(v.default,e)},"textarea-ele":function(e){return React.createElement(y.default,e)},"grade-ele":function(e){return React.createElement(b.default,e)},"select-ele":function(e){return React.createElement(R.default,e)},"upload-img":function(e){return React.createElement(w.default,e)},"time-ele":function(e){return React.createElement(C.default,e)},"drop-down":function(e){return React.createElement(S.default,e)},"pic-options":function(e){return React.createElement(M.default,e)},"address-ele":function(e){return React.createElement(P.default,e)},"form-button":function(e){return React.createElement(A.default,e)},"upload-video":function(e,t){return React.createElement(qt.default,(0,i.default)({ref:t},e))},"anonymous-ele":function(e){return React.createElement(zt.default,e)},"free-vessel":function(e){return React.createElement(O.default,e)},"tab-nav":function(e){return React.createElement(j.default,e)},"goods-list":function(e,t){return React.createElement(q.default,(0,i.default)({ref:t},e))},button:function(e){return React.createElement(z.default,e)},"layout-vessel":function(e){return React.createElement(W.default,e)},"title-ele":function(e){return React.createElement(J.default,e)},news:function(e,t){return React.createElement(Q.default,(0,i.default)({ref:t},e))},carousel:function(e){return React.createElement(X.default,e)},breakline:function(e){return React.createElement(Z.default,e)},"static-vessel":function(e){return React.createElement(te.default,e)},audio:function(e,t){return React.createElement(ne.default,(0,i.default)({ref:t},e))},album:function(e){return React.createElement(ie.default,e)},announce:function(e){return React.createElement(re.default,e)},list:function(e){return React.createElement(le.default,e)},suspension:function(e){return React.createElement(ue.default,e)},video:function(e,t){return React.createElement(pe.default,(0,i.default)({ref:t},e))},"new-suspension":function(e,t){return React.createElement(ge.default,(0,i.default)({ref:t},e))},"popup-window":function(e,t){return React.createElement(ve.default,(0,i.default)({ref:t},e))},"sliding-panel":function(e,t){return React.createElement(ye.default,(0,i.default)({ref:t},e))},"franchisee-list":function(e,t){return React.createElement(be.default,(0,i.default)({ref:t},e))},"franchisee-chain":function(e,t){return React.createElement(Re.default,(0,i.default)({ref:t},e))},sidebar:function(e,t){return React.createElement(we.default,(0,i.default)({ref:t},e))},advertising:function(e){return React.createElement(Ce.default,e)},plugin:function(e){return React.createElement(Se.default,e)},"official-account":function(e){return React.createElement(Me.default,e)},classify:function(e){return React.createElement(Pe.default,e)},count:function(e){return React.createElement(Ae.default,(0,i.default)({ref:ref},e))},"new-count":function(e){return React.createElement(Oe.default,e)},map:function(e,t){return React.createElement(je.default,(0,i.default)({ref:t},e))},search:function(e){return React.createElement(qe.default,e)},sort:function(e){return React.createElement(ze.default,e)},citylocation:function(e){return React.createElement(We.default,e)},"new-classify":function(e,t){return React.createElement(Je.default,(0,i.default)({ref:t},e))},filter:function(e,t){return React.createElement(Qe.default,(0,i.default)({ref:t},e))},"community-group":function(e,t){return React.createElement(Xe.default,(0,i.default)({ref:t},e))},"community-goods-list":function(e,t){return React.createElement(Wt.default,(0,i.default)({ref:t},e))},"exchange-coupon":function(e,t){return React.createElement(Ze.default,(0,i.default)({ref:t},e))},"row-num":function(e,t){return React.createElement(tt.default,(0,i.default)({ref:t},e))},waimai:function(e,t){return React.createElement(nt.default,(0,i.default)({ref:t},e))},tostore:function(e,t){return React.createElement(it.default,(0,i.default)({ref:t},e))},community:function(e,t){return React.createElement(rt.default,(0,i.default)({ref:t},e))},topic:function(e,t){return React.createElement(lt.default,(0,i.default)({ref:t},e))},"sign-in":function(e,t){return React.createElement(ut.default,(0,i.default)({ref:t},e))},"group-buy-list":function(e,t){return React.createElement(pt.default,(0,i.default)({ref:t},e))},"group-buy-status":function(e,t){return React.createElement(gt.default,(0,i.default)({ref:t},e))},seckill:function(e,t){return React.createElement(vt.default,(0,i.default)({ref:t},e))},timeline:function(e,t){return React.createElement(yt.default,(0,i.default)({ref:t},e))},bbs:function(e,t){return React.createElement(bt.default,(0,i.default)({ref:t},e))},"video-list":function(e,t){return React.createElement(Rt.default,(0,i.default)({ref:t},e))},"topic-classify":function(e,t){return React.createElement(wt.default,(0,i.default)({ref:t},e))},"topic-sort":function(e,t){return React.createElement(Ct.default,(0,i.default)({ref:t},e))},"user-center-head":function(e,t){return React.createElement(St.default,(0,i.default)({ref:t},e))},"user-center-content":function(e,t){return React.createElement(Mt.default,(0,i.default)({ref:t},e))},"custom-top-nav":function(e){return React.createElement(Pt.default,e)},presell:function(e,t){return React.createElement(At.default,(0,i.default)({ref:t},e))},"vertical-list":function(e,t){return React.createElement(Ot.default,(0,i.default)({ref:t},e))},"stored-value":function(e,t){return React.createElement(jt.default,(0,i.default)({ref:t},e))}};t.default=Ht},function(e,t,a){"use strict";function n(e){var t=e.data,a=e.detailData,n=e.dynamicData,s=t.customFeature,r=(0,o.convertStyleData)(t.style);r.height="auto",1==t.customFeature.isWordWrap&&(r.WebkitLineClamp=t.customFeature["word-wrap"]);var c=t.content,l=t.customFeature.segment;return l&&(a&&a[l]?c=a[l]:n&&n[l]&&(c=n[l])),React.createElement("div",{className:"custom-component text "+(1==t.customFeature.isWordWrap?"text-word-wrap":""),style:r,onClick:function(){return(0,i.customEvent)({customFeature:s})}},c)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var o=a(6),i=a(15);a(545)},function(e,t){},function(e,t,a){"use strict";function n(e){var t=e.data,a=e.detailData,n=e.dynamicData,s=t.customFeature,r=(0,o.convertStyleData)(t.style),c=t.content,l=t.customFeature.segment;return l&&(a&&a[l]?c=a[l]:n&&n[l]&&(c=n[l])),Array.isArray(c)||(c=[c]),c.map(function(e,t){return React.createElement("div",{className:"custom-component picture",key:t,style:r,onClick:function(){return(0,i.customEvent)({customFeature:s})}},!s.backgroundType&&React.createElement("img",{src:e}))})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var o=a(6),i=a(15);a(547)},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(22),i=n(o),s=a(9),r=n(s),c=a(0),l=n(c),d=a(3),u=n(d),m=a(1),p=n(m),f=a(2),g=n(f);a(23);var h=a(4),v=n(h),_=a(33),y=n(_),E=a(6),b=a(12),N=n(b),R=a(5),k=a(11),w=a(21),x=a(40);a(551);var C=function(e){var t=!1,a={"count-ele":!0,"new-count":!0};return function e(n){if(!t&&n.type){if(a[n.type])return void(t=!0);if(Array.isArray(n.content)){var o=!0,i=!1,s=void 0;try{for(var r,c=n.content[Symbol.iterator]();!(o=(r=c.next()).done);o=!0){e(r.value)}}catch(e){i=!0,s=e}finally{try{!o&&c.return&&c.return()}finally{if(i)throw s}}}else if("layout-vessel"===n.type){var l=!0,d=!1,u=void 0;try{for(var m,p=Object.keys(n.content)[Symbol.iterator]();!(l=(m=p.next()).done);l=!0){var f=m.value,g=!0,h=!1,v=void 0;try{for(var _,y=n.content[f][Symbol.iterator]();!(g=(_=y.next()).done);g=!0){var E=_.value;e(E)}}catch(e){h=!0,v=e}finally{try{!g&&y.return&&y.return()}finally{if(h)throw v}}}}catch(e){d=!0,u=e}finally{try{!l&&p.return&&p.return()}finally{if(d)throw u}}}}}(e),t?1:0},D=function(e){function t(e){(0,l.default)(this,t);var a=(0,p.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));S.call(a);var n=e.index,o=R.appMethod.getAppCurrentPage();return a.init(n,o),a}return(0,g.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e,t=this,a=this.props.data,n=a.customFeature,o=(0,E.convertStyleData)(a.style);0==n.vesselAutoheight&&(o.height=transformPx2Rem(n.height,320));var i=a.content,s=2==a.customFeature.mode&&a.curpage>0;return v.default.createElement(k.ScrollView,(e={className:"custom-component list-vessel "+(a.customFeature.mode?"mode-"+a.customFeature.mode:"")+" "+(s?"hor-request-status":""),style:o},(0,r.default)(e,"style",o),(0,r.default)(e,"data-type","list-vessel"),(0,r.default)(e,"data-compindex",this.props.index),(0,r.default)(e,"scroll-y",2!=a.customFeature.mode&&0==a.customFeature.vesselAutoheight),(0,r.default)(e,"scroll-x",2==a.customFeature.mode),(0,r.default)(e,"lower-threshold","100"),(0,r.default)(e,"bindscrolltolower",this.pageScrollFunc),e),a.list_data&&a.list_data.map(function(e,a){return v.default.createElement("div",{className:"list-vessel-item",key:a,onClick:t.listVesselTurnToPage,"data-compindex":t.props.index,"data-index":a,"data-dataid":"franchiseeDetail"==n.link?e.form_data.app_id:e.id||e.form_data.id,"data-router":n.link,"data-isseckill":e.form_data.is_seckill&&e.form_data.is_seckill||""},i.map(function(t,a){return v.default.createElement(y.default,{key:a,index:a,data:t,dynamicData:e.form_data})}))}),a.loading&&v.default.createElement(w.RequestStatus,{is:"requestLoading",hor:s}),0==a.is_more&&0==a.list_data.length&&v.default.createElement(w.RequestStatus,{is:"requestNone",data:{data:"暂无数据~"},hor:s}),a.loadingFail&&v.default.createElement(w.RequestStatus,{is:"requestFail",data:{refreshEvent:"pageScrollFunc",compindex:this.props.index},hor:s}),0==a.is_more&&a.list_data.length>0&&n.isShowFinishText&&v.default.createElement(w.RequestStatus,{is:"requestAll",hor:s}),!(1!=n.vesselAutoheight||1!=n.loadingMethod||2==n.mode||!a.is_more||0==a.is_more||a.loading||a.loadingFail)&&v.default.createElement(x.LoadingBtn,{customFeature:n,onClick:this.pageScrollFunc,"data-compindex":this.props.index}))}}]),t}(v.default.Component),S=function(){var e=this;this.state={listData:[],loading:!1,loadingFail:!1,page:1,isMore:0},this.init=function(t,a,n){var o=e,s=a.data.eles[t],c=s.customFeature,l="/index.php?r=AppData/getFormDataList",d={id:c.id,form:c.form,page:1,app_id:R.appMethod.getAppId(),is_count:C(s)};if(a.setData((0,r.default)({},"eles["+t+"].param",d)),!d.form)return void i.default.info("动态列表未绑定数据对象");"group_buy"==c.form&&(l="/index.php?r=AppGroupBuy/GetGroupBuyGoodsList",d.current_status=0),c.source&&"none"!==c.source&&(d.idx_arr={idx:"category",idx_value:c.source}),"goods"===c.form&&c.pickUpArr&&"list-vessel"==s.type&&(d.pick_up_type=[],c.pickUpArr.express&&d.pick_up_type.push(1),c.pickUpArr.sameJourney&&d.pick_up_type.push(2),c.pickUpArr.selfLifting&&d.pick_up_type.push(3),c.pickUpArr.dining&&d.pick_up_type.push(4)),d.page_size=c.loadingNum||10;var u=R.appMethod.getListVessel(s),m={};if(d.need_column_arr=u.concat("app_id","id","is_seckill","mode_id","goods_id","is_group_buy","seckill_activity_id","seckill_activity_time_id","is_seckill_activity"),m["eles["+t+"].listField"]=u,m["eles["+t+"].need_column_arr"]=d.need_column_arr,m["eles["+t+"].loading"]=!0,m["eles["+t+"].loadingFail"]=!1,m["eles["+t+"].list_data"]=[],m["eles["+t+"].param"]=d,m["eles["+t+"].is_more"]=1,m["eles["+t+"].curpage"]=0,a.setData(m),!R.appMethod.getInvolvedFromRefreshObject(c.id,"new-classify")){if("app_shop"==c.form&&u.indexOf("distance")>-1&&!n){var p=R.appMethod.globalData.locationInfo;if(!p.latitude)return void R.appMethod.getLatLng({success:function(e){var n={};n.latitude=e.latitude,n.longitude=e.longitude,a.setData((0,r.default)({},"eles["+t+"].param.extra_cond_arr",n)),o.init(t,a,!0)},fail:function(){R.appMethod.showToast({title:"定位失败，店铺距离将获取不到",icon:"none"}),o.init(t,a,!0)}});d.extra_cond_arr={},d.extra_cond_arr.latitude=p.latitude,d.extra_cond_arr.longitude=p.longitude}c.showSingleData&&"list-vessel"==s.type?e.requestSingleData(a,c,t,u,d):e.getReviewConfig(function(e){R.appMethod.sendRequest({hideLoading:!0,url:l,data:d,method:"post",chain:!0,subshop:a.franchiseeId||"",success:function(n){if(0==n.status){var o={};if("form"!==d.form)for(var i in n.data){"group_buy"==c.form&&(n.data[i]={form_data:Object.assign({},n.data[i])});for(var s in n.data[i].form_data)if("review_status"==s&&(n.data[i].form_data[s]=0==n.data[i].form_data[s]?e.applying_text||"待审核":1==n.data[i].form_data[s]?e.apply_passed_text||"审核通过":e.apply_unpassed_text||"审核不通过"),"review_result"==s&&(n.data[i].form_data[s]=n.data[i].form_data[s].replace(/\\n/,"")),"category"!=s&&!/region/.test(s)){"goods_model"==s&&(n.data[i].form_data.virtual_price=R.appMethod.formVirtualPrice(n.data[i].form_data)),"distance"==s&&(n.data[i].form_data[s]=N.default.formatDistance(n.data[i].form_data[s]));var r=n.data[i].form_data[s];u.indexOf(s)<0&&/<("[^"]*"|'[^']*'|[^'">])*>/.test(r)&&(n.data[i].form_data[s]="")}}o["eles["+t+"].list_data"]=n.data,o["eles["+t+"].is_more"]=n.is_more||0,o["eles["+t+"].curpage"]=1,o["eles["+t+"].loading"]=!1,o["eles["+t+"].loadingFail"]=!1,a.setData(o)}},fail:function(e){var n={};n["eles["+t+"].loadingFail"]=!0,n["eles["+t+"].loading"]=!1,a.setData(n)}})})}},this.getReviewConfig=function(e){R.appMethod.sendRequest({url:"/index.php?r=AppConfig/GetAppDataReviewTextConfig",method:"post",hideLoading:!0,success:function(t){e&&e(t.data)}})},this.requestSingleData=function(t,a,n,o,i){e.getReviewConfig(function(e){R.appMethod.sendRequest({url:"/index.php?r=AppData/GetDatasByUserToken",data:{form:i.form,page:i.page,page_size:a.loadingNum||10},method:"post",success:function(s){if(0==s.status){var r={};if("form"!==i.form)for(var c in s.data){"group_buy"==a.form&&(s.data[c]={form_data:Object.assign({},s.data[c])});for(var l in s.data[c].form_data)if("review_status"==l&&(s.data[c].form_data[l]=0==s.data[c].form_data[l]?e.applying_text||"待审核":1==s.data[c].form_data[l]?e.apply_passed_text||"审核通过":e.apply_unpassed_text||"审核不通过"),"review_result"==l&&(s.data[c].form_data[l]=s.data[c].form_data[l].replace(/\\n/,"")),"category"!=l&&!/region/.test(l)){"goods_model"==l&&(s.data[c].form_data.virtual_price=R.appMethod.formVirtualPrice(s.data[c].form_data)),"distance"==l&&(s.data[c].form_data[l]=N.default.formatDistance(s.data[c].form_data[l]));var d=s.data[c].form_data[l];o.indexOf(l)<0&&/<("[^"]*"|'[^']*'|[^'">])*>/.test(d)&&(s.data[c].form_data[l]="")}}r["eles["+n+"].list_data"]=s.data,r["eles["+n+"].is_more"]=s.is_more||0,r["eles["+n+"].curpage"]=1,r["eles["+n+"].loading"]=!1,r["eles["+n+"].loadingFail"]=!1,t.setData(r)}},fail:function(e){var a={};a["eles["+n+"].loadingFail"]=!0,a["eles["+n+"].loading"]=!1,t.setData(a)}})})},this._refreshListVessel=function(t,a,n,o){var i=e,s=n.data.eles[t],r=s.customFeature;a.page_size=r.loadingNum||10;var c=s.need_column_arr||[],l={};if(l["eles["+t+"].loading"]=!0,l["eles["+t+"].loadingFail"]=!1,l["eles["+t+"].list_data"]=[],l["eles["+t+"].is_more"]=1,n.setData(l),c.length?a.need_column_arr=c:1==a.page&&(c=R.appMethod.getListVessel(s),c=c.concat("app_id","id","is_seckill","mode_id","goods_id","is_group_buy","seckill_activity_id","seckill_activity_time_id","is_seckill_activity"),a.need_column_arr=c),a.form=r.form,"app_shop"==r.form&&c.indexOf("distance")>-1&&!o)return void R.appMethod.getLatLng({success:function(e){a.extra_cond_arr={},a.extra_cond_arr.latitude=e.latitude,a.extra_cond_arr.longitude=e.longitude,i._refreshListVessel(t,a,n,!0)},fail:function(){R.appMethod.showToast({title:"定位失败，店铺距离将获取不到",icon:"none"}),i._refreshListVessel(t,a,n,!0)}});R.appMethod.sendRequest({url:"/index.php?r=AppData/getFormDataList",method:"post",data:a,hideLoading:!0,chain:!0,subshop:n.franchiseeId||"",success:function(e){var a={},o=n.data.eles[t].listField;for(var i in e.data)for(var s in e.data[i].form_data)if("category"!=s&&!/region/.test(s)){"goods_model"==s&&(e.data[i].form_data.virtual_price=R.appMethod.formVirtualPrice(e.data[i].form_data)),"distance"==s&&(e.data[i].form_data[s]=N.default.formatDistance(e.data[i].form_data[s]));var r=e.data[i].form_data[s];o.indexOf(s)<0&&/<("[^"]*"|'[^']*'|[^'">])*>/.test(r)?e.data[i].form_data[s]="":R.appMethod.needParseRichText(r)&&(e.data[i].form_data[s]=R.appMethod.getWxParseResult(r))}a["eles["+t+"].list_data"]=e.data,a["eles["+t+"].is_more"]=e.is_more,a["eles["+t+"].curpage"]=1,a["eles["+t+"].scrollTop"]=0,a["eles["+t+"].loading"]=!1,a["eles["+t+"].loadingFail"]=!1,n.setData(a)},fail:function(e){var a={};a["eles["+t+"].loadingFail"]=!0,a["eles["+t+"].loading"]=!1,n.setData(a)}})},this.pageScrollFunc=function(e){R.appMethod.pageScrollFunc(e)},this.listVesselTurnToPage=function(e){R.appMethod.listVesselTurnToPage(e)}};t.default=D},function(e,t){},function(e,t){},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(9),i=n(o),s=a(0),r=n(s),c=a(3),l=n(c),d=a(1),u=n(d),m=a(2),p=n(m),f=a(4),g=n(f),h=a(33),v=n(h),_=a(6),y=a(5),E=a(21),b=a(40);a(553);var N=function(e){var t=!1,a={"count-ele":!0,"new-count":!0};return function e(n){if(!t&&n.type){if(a[n.type])return void(t=!0);if(Array.isArray(n.content)){var o=!0,i=!1,s=void 0;try{for(var r,c=n.content[Symbol.iterator]();!(o=(r=c.next()).done);o=!0){e(r.value)}}catch(e){i=!0,s=e}finally{try{!o&&c.return&&c.return()}finally{if(i)throw s}}}else if("layout-vessel"===n.type){var l=!0,d=!1,u=void 0;try{for(var m,p=Object.keys(n.content)[Symbol.iterator]();!(l=(m=p.next()).done);l=!0){var f=m.value,g=!0,h=!1,v=void 0;try{for(var _,y=n.content[f][Symbol.iterator]();!(g=(_=y.next()).done);g=!0){var E=_.value;e(E)}}catch(e){h=!0,v=e}finally{try{!g&&y.return&&y.return()}finally{if(h)throw v}}}}catch(e){d=!0,u=e}finally{try{!l&&p.return&&p.return()}finally{if(d)throw u}}}}}(e),t?1:0},R=function(e){function t(e){(0,r.default)(this,t);var a=(0,u.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));k.call(a);var n=e.index,o=y.appMethod.getAppCurrentPage();return a.init(n,o),a}return(0,p.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this,t=this.props.data,a=(0,_.convertStyleData)(t.style),n=t.content;return g.default.createElement("div",{className:"custom-component dynamic-vessel",style:a},t.list_data&&t.list_data.map(function(a,o){return g.default.createElement("div",{className:"dynamic-vessel-item",key:o,onClick:e.dynamicVesselTurnToPage,"data-compindex":e.props.index,"data-index":o,"data-dataid":a.id||a.form_data.id&&a.form_data.id[0]&&a.form_data.id[0].text,"data-router":t.customFeature.link,"data-is-group":a.form_data.is_group_buy,"data-is-seckill":a.form_data.is_seckill&&a.form_data.is_seckill[0]&&a.form_data.is_seckill[0].text},n.map(function(e,t){return g.default.createElement(v.default,{key:t,index:t,data:e,dynamicData:a.form_data})}))}),t.loading&&g.default.createElement(E.RequestStatus,{is:"requestLoading"}),0==t.is_more&&0==t.list_data.length&&g.default.createElement(E.RequestStatus,{is:"requestNone",data:{data:"暂无数据~"}}),t.loadingFail&&g.default.createElement(E.RequestStatus,{is:"requestFail",data:{refreshEvent:"dynamicVesselScrollFunc",compindex:this.props.index}}),0==t.is_more&&t.list_data.length>0&&t.customFeature.isShowFinishText&&g.default.createElement(E.RequestStatus,{is:"requestAll"}),!(!t.is_more||0==t.is_more||t.loading||t.loadingFail)&&g.default.createElement(b.LoadingBtn,{customFeature:t.customFeature,onClick:this.dynamicVesselScrollFunc,"data-compindex":this.props.index}))}}]),t}(g.default.Component),k=function(){this.init=function(e,t){var a=t.data.eles[e],n=a.customFeature,o={id:n.id,form:n.form,page:1,app_id:y.appMethod.getAppId(),is_count:N(a),param_segment:n.param_segment,search_segment:n.search_segment};t.setData((0,i.default)({},"eles["+e+"].param",o))},this.detailPageInit=function(e,t,a){var n=t.data.eles[e],o=n.customFeature,i=n.param||{},s={form:o.form,is_count:i.is_count,page:1,param_segment:o.param_segment,search_segment:o.search_segment};if("id"===s.param_segment)s.idx=s.search_segment,s.idx_value=t.dataId;else{if(!a[s.param_segment])return;s.idx=s.search_segment,s.idx_value=a[s.param_segment]}var r={};r["eles["+e+"].loading"]=!0,r["eles["+e+"].loadingFail"]=!1,r["eles["+e+"].list_data"]=[],r["eles["+e+"].is_more"]=1,t.setData(r),y.appMethod.sendRequest({hideLoading:!0,url:"/index.php?r=AppData/getFormDataList",data:{form:s.form,page:1,idx_arr:{idx:s.idx,idx_value:s.idx_value}},method:"post",chain:!0,success:function(a){var n={};if(!a.data.length)return n["eles["+e+"].is_more"]=0,n["eles["+e+"].loading"]=!1,n["eles["+e+"].loadingFail"]=!1,void t.setData(n);if("form"!==s.form)for(var o in a.data)for(var i in a.data[o].form_data)if("category"!=i&&!/region/.test(i)){"goods_model"==i&&(a.data[o].form_data.virtual_price=y.appMethod.formVirtualPrice(a.data[o].form_data));a.data[o].form_data[i]}n["eles["+e+"].list_data"]=a.data,n["eles["+e+"].is_more"]=a.is_more||0,n["eles["+e+"].curpage"]=a.current_page,n["eles["+e+"].loading"]=!1,n["eles["+e+"].loadingFail"]=!1,t.setData(n)},fail:function(){var a={};a["eles["+e+"].loadingFail"]=!0,a["eles["+e+"].loading"]=!1,t.setData(a)}})},this.dynamicVesselScrollFunc=function(e){var t=y.appMethod.getAppCurrentPage(),a=e.target.dataset.compindex,n=t.data.eles[a],o=n.customFeature,i=n.curpage+1,s={},r={};!n.loading&&n.is_more&&(s["eles["+a+"].loading"]=!0,s["eles["+a+"].loadingFail"]=!1,t.setData(s),"id"===o.param_segment?(r.idx=o.search_segment,r.idx_value=t.dataId):t.data.detailData[o.param_segment]&&(r.idx=o.search_segment,r.idx_value=t.data.detailData[o.param_segment]),y.appMethod.sendRequest({url:"/index.php?r=AppData/getFormDataList",data:{form:o.form,page:i,idx_arr:{idx:r.idx,idx_value:r.idx_value}},method:"post",chain:!0,subshop:t.franchiseeId||"",success:function(e){s={};for(var o in e.data)for(var i in e.data[o].form_data)if("category"!=i&&!/region/.test(i)){"goods_model"==i&&(e.data[o].form_data.virtual_price=y.appMethod.formVirtualPrice(e.data[o].form_data));e.data[o].form_data[i]}s["eles["+a+"].list_data"]=n.list_data.concat(e.data),s["eles["+a+"].is_more"]=e.is_more,s["eles["+a+"].curpage"]=e.current_page,s["eles["+a+"].loading"]=!1,s["eles["+a+"].loadingFail"]=!1,t.setData(s)},fail:function(){var e={};e["eles["+a+"].loadingFail"]=!0,e["eles["+a+"].loading"]=!1,t.setData(e)},complete:function(){}}))},this.dynamicVesselTurnToPage=function(e){var t=e.currentTarget.dataset,a=y.appMethod.getAppCurrentPage(),n=t.dataid,o=t.router,i=a.page_form,s=t.isGroup,r=t.isSeckill,c=t.compindex,l=t.index,d=a.data.eles[c].list_data[l],u=d.form_data||d;if(""!=o&&-1!=o&&"-1"!=o){var m=y.appMethod.getPageFranchiseeId(),p=m?"&franchisee="+m:"";if(s&&1==s)return void y.appMethod.turnToPage("groupGoodsDetail?detail="+n+p);if(r&&1==r)return void y.appMethod.turnToPage("goodsDetail?detail="+n+"&goodsType=seckill"+p);if(""!=i)if("tostoreDetail"==o)y.appMethod.turnToPage("toStoreDetail?detail="+n+p);else if("goodsDetail"==o)y.appMethod.turnToPage("goodsDetail?detail="+n+p);else if("videoDetail"==o)y.appMethod.turnToPage("videoDetail?detail="+n+p);else if("franchiseeDetail"==o){var f=u.mode_id[0].text;y.appMethod.goToFranchisee(f,{detail:n})}else y.appMethod.turnToPage(o+"?detail="+n)}}};t.default=R},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(9),i=n(o),s=a(0),r=n(s),c=a(3),l=n(c),d=a(1),u=n(d),m=a(2),p=n(m),f=a(4),g=n(f),h=a(6),v=a(5),_=a(33),y=n(_);a(555);var E=function(e){function t(e){(0,r.default)(this,t);var a=(0,u.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));b.call(a);var n=e.index,o=v.appMethod.getAppCurrentPage();return a.init(n,o),a}return(0,p.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this,t=this.props.data,a=(0,h.convertStyleData)(t.style),n=t.content;return g.default.createElement("div",{className:"custom-component form-vessel",style:a},n.map(function(a,n){return g.default.createElement(y.default,{key:n,index:n,data:a,onSubmit:e.submitForm,formCompindex:e.props.index,form_data:t.form_data})}))}}]),t}(g.default.Component),b=function(){var e=this;this.init=function(t,a){for(var n=e,o={},i=a.data.eles[t].customFeature,s=a.data.eles[t].content,r="",c="",l=0;l<s.length;l++)"form-button"==s[l].type&&(r=s[l],c=l);if(""!==c){o["eles["+t+"].content["+c+"].can_use"]=1,a.setData(o);var d={button_info:{type:r.customFeature.effect||1,times:r.customFeature.frequency||-1,button_id:i.id}};v.appMethod.sendRequest({hideLoading:!0,url:"/index.php?r=AppData/isFormSubmitButtonValid",data:d,method:"post",success:function(e){o={},o["eles["+t+"].content["+c+"].can_use"]=e.data.can_use,o["eles["+t+"].buttonContent"]=r,a.setData(o),0==e.data.can_use&&r.customFeature.showPreviousData&&n.requestLastForm(t,a)}})}},this.requestLastForm=function(e,t){var a=t.data.eles[e].content;v.appMethod.sendRequest({url:"/index.php?r=AppData/GetDatasByUserToken",data:{form:t.data.eles[e].customFeature.form},method:"post",success:function(n){var o,s=n.data[0].form_data,r="eles["+e+"].form_data",c="eles["+e+"].content";a.map(function(a){var n=a.customFeature.segment,o=a.type;for(var r in s)if(r==n)switch(o){case"select-ele":if(1==a.customFeature.type){for(var c=[],l=0;l<a.content.lists.length;l++)a.content.lists[l]==s[r]?c[l]=l:c[l]=null;a.selectedValue=c}if(a.customFeature.multiSelection){for(var d=[],u={checkLength:0},m=0;m<a.content.lists.length;m++)s[r].indexOf(a.content.lists[m])>=0?(d[m]=!0,u.checkLength++):d[m]=!1;a.content.selectArr=d,a.selectedData=u}break;case"time-ele":var p=s[r].split(" ");a.date=p[0],a.time=p[1];break;case"drop-down":var f="eles["+e+"].dropDown",g=s[r].split(","),h={};h[n]=g,t.setData((0,i.default)({},f,h))}}),t.setData((o={},(0,i.default)(o,r,s),(0,i.default)(o,c,a),o))}})},this.submitForm=function(){var t=v.appMethod.getAppCurrentPage(),a=e,n=e.props.index,o=e.props.data,i=e.props.data.customFeature.form,s=o.form_data,r=o.field_info,c=o.content,l=o.customFeature.id,d=o.buttonContent;if(!d)return void console.log("提交按钮信息有误");var u={type:d.customFeature.effect,times:d.customFeature.frequency,pay:d.customFeature.pay,price:d.customFeature.price,isDiscount:d.customFeature.discount,button_id:l,operation:""},m="",p="",f=["input-ele","textarea-ele","grade-ele","select-ele","upload-img","time-ele","drop-down","pic-options","address-ele","anonymous-ele","upload-video"];switch(d.customFeature.action){case"integral":u.operation=1,p="提交成功，增加"+(d.customFeature.interests||0)+"积分",u.num=d.customFeature.interests,m="myIntegral";break;case"scratch":u.operation=2,p="提交成功，增加"+(d.customFeature.scratch||0)+"刮刮乐次数",u.num=d.customFeature.scratch,m="scratch";break;case"break-egg":u.operation=3,p="提交成功，增加"+(d.customFeature["break-egg"]||0)+"砸金蛋次数",u.num=d.customFeature["break-egg"],m="goldenEggs";break;case"turntable":u.operation=4,p="提交成功，增加"+(d.customFeature.turntable||0)+"大转盘次数",u.num=d.customFeature.turntable,m="uckyWheelDetail";break;case"coupon":u.operation=5,u.obj_id=d.customFeature.couponId,u.num=d.customFeature["coupon-num"],p="提交成功，增加"+(d.customFeature["coupon-num"]||0)+"优惠券",m="couponList";break;case"vip-card":u.operation=6,u.obj_id=d.customFeature.vipId,p="提交成功，增加会员卡一张",m="vipCardList";break;case"inner-link":u.operation="inner-link";m=JSON.parse(d.eventParams).inner_page_link;break;case"plugin-link":u.operation="plugin-link";m=JSON.parse(d.eventParams).plugin_page}for(var g=0;g<c.length;g++)if(-1!=f.indexOf(c[g].type)){var h=c[g].customFeature,_=h.segment,y=c[g].segment_required;switch(c[g].type){case"drop-down":case"anonymous-ele":if((!s||!s[_]||s[_].length<c[g].customFeature.contents.length||s[_].split(",").includes(""))&&1==y)return void v.appMethod.showModal({content:r[_].title+" 没有填写"});break;case"pic-options":if(1==y){if(c[g].customFeature.multiSelection){if(!s||!s[_]||s[_].length<c[g].customFeature.minSelect)return void v.appMethod.showModal({content:c[g].customFeature.name+"是多选必选项"})}else if(!s||!s[_])return void v.appMethod.showModal({content:c[g].customFeature.name+"是必选项"})}else if(c[g].customFeature.multiSelection&&s&&s[_]&&s[_].length&&s[_].length<c[g].customFeature.minSelect)return void v.appMethod.showModal({content:c[g].customFeature.name+"至少选择"+c[g].customFeature.minSelect+"项"});break;case"input-ele":case"textarea-ele":if(1==y){if(!s||!s[_]||0==s[_].length)return void v.appMethod.showModal({content:r[_].title+" 没有填写"});if(a.formRegex(c[g].customFeature.dataType,s[_]))return}else if(s&&_&&s[_]&&s[_].length&&a.formRegex(c[g].customFeature.dataType,s[_]))return;break;case"select-ele":if(void 0===c[g].customFeature.type)break;if(0===c[g].customFeature.type){if(1==y){if(c[g].customFeature.multiSelection){if(!s||!s[_]||c[g].selectedData.itemLength<c[g].customFeature.minSelect)return void v.appMethod.showModal({content:c[g].content.title+"是多选必选项"})}else if(!s||!s[_])return void v.appMethod.showModal({content:c[g].content.title+"是必选项"})}else if(c[g].customFeature.multiSelection&&s&&s[_]&&c[g].selectedData.itemLength&&c[g].selectedData.itemLength<c[g].customFeature.minSelect)return void v.appMethod.showModal({content:c[g].content.title+"至少选择"+c[g].customFeature.minSelect+"项"})}else if(1===c[g].customFeature.type)if(c[g].selectedValue){for(var E=0,b=0;b<c[g].selectedValue.length;b++)null!=c[g].selectedValue[b]&&E++;if(1==y){if(c[g].customFeature.multiSelection){if(!s||!s[_]||E<c[g].customFeature.minSelect)return void v.appMethod.showModal({content:c[g].content.title+"是多选必选项"})}else if(!s||!s[_])return void v.appMethod.showModal({content:c[g].content.title+"是必选项"})}else if(c[g].customFeature.multiSelection&&s&&s[_]&&E&&E<c[g].customFeature.minSelect)return void v.appMethod.showModal({content:c[g].content.title+"至少选择"+c[g].customFeature.minSelect+"项"})}else if(1==y)return void v.appMethod.showModal({content:c[g].content.title+" 没有填写"});break;case"time-ele":if(!(s&&s[_]&&0!=s[_].length||1!=y))return void v.appMethod.showModal({content:r[_].title+" 没有填写"});if(!c[g].customFeature.ifAllDay&&(c[g].date&&!c[g].time||!c[g].date&&c[g].time))return void v.appMethod.showModal({content:"请选择具体时间"});break;default:if(!(1!=y||s&&s[_]&&0!=s[_].length))return void v.appMethod.showModal({content:r[_].title+" 没有填写"})}}if(!t.submitting){var N=0,R=0;if(!s)return void v.appMethod.showModal({content:"数据为空"});for(var k in s)N++,s[k]&&"number"==typeof s[k]||(!s[k]||s[k]instanceof Array&&0==s[k].length)&&R++;if(N==R)return void v.appMethod.showModal({content:"数据为空"});t.submitting=!0;var w={button_info:u,form:i,form_data:s,is_transfer_order:u.pay?1:0};a.submitFormRequest({url:m,data:w,compindex:n,contentTip:p})}},this.submitFormRequest=function(t){var a=e,n=v.appMethod.getAppCurrentPage();v.appMethod.sendRequest({url:"/index.php?r=AppData/addData",data:t.data,method:"POST",success:function(e){if(t.data.button_info.pay)return t.data.form_data_id=e.data,void a.submitFormByPay({compindex:t.compindex,price:t.data.button_info.price,isDiscount:t.data.button_info.isDiscount,submitData:t.data,url:t.url,contentTip:t.contentTip});a.addFormDataSuccess(t,e)},complete:function(){n.submitting=!1}})},this.submitFormByPay=function(e){var t=v.appMethod.getAppCurrentPage(),a={};a=e.isDiscount?{price:e.price,is_balance:0}:{price:e.price,is_balance:0,selected_benefit:{no_use_benefit:1}},t.setData({formInfo:{calculData:a,isDiscount:e.isDiscount,price:+e.price,submitData:e.submitData,show:!0,logo:v.appMethod.globalData.appLogo,name:v.appMethod.getAppTitle()}}),t.formPayRef.current.calculateTotalPrice({compindex:e.compindex,url:e.url,contentTip:e.contentTip,data:e.submitData})},this.addFormDataSuccess=function(t,a){var n=v.appMethod.getAppCurrentPage();if(e.init(t.compindex,n),"inner-link"===t.data.button_info.operation||"plugin-link"===t.data.button_info.operation)return void v.appMethod.showToast({title:"提交成功",icon:"success",duration:3e3,success:function(){t.url&&v.appMethod.turnToPage(t.url)}});a.msg?v.appMethod.showModal({content:a.msg}):v.appMethod.showModal({content:t.contentTip||"提交成功",confirmText:t.data.button_info.operation?"去查看":"确认",confirm:function(){t.url&&v.appMethod.turnToPage(t.url)}})},this.formRegex=function(e,t){switch(e){case"phone":if(!util.isPhoneNumber(t))return v.appMethod.showModal({content:"请输入正确的手机号"}),!0;break;case"IDcard":if(!/^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$/.test(t)&&!/^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}([0-9]|X)$/.test(t))return v.appMethod.showModal({content:"请输入正确的身份证"}),!0;break;case"email":if(!/^[a-zA-Z0-9_.-]+@[a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)*\.[a-zA-Z0-9]{2,6}$/.test(t))return v.appMethod.showModal({content:"请输入正确的邮箱"}),!0;break;case"chinese":if(!/^[\u4e00-\u9fa5]*$/.test(t))return v.appMethod.showModal({content:"请输入中文"}),!0;break;case"number":if(!/^[0-9]*$/.test(t))return v.appMethod.showModal({content:"请输入数字"}),!0;break;case"english":if(!/^[a-zA-Z]*$/.test(t))return v.appMethod.showModal({content:"请输入英文"}),!0;break;default:return!1}}};t.default=E},function(e,t){},function(e,t,a){"use strict";function n(e){var t=e.data,a=e.dynamicData,n=e.formCompindex,s=e.form_data||{},r=t.customFeature,c=(0,i.convertStyleData)(t.style);t.segment_required&&(c.maxWidth="7.00rem");var l=(t.content,r.segment);a&&l&&a[l];var d=function(e){var t=e.currentTarget.dataset,a=e.target.value,n=o.appMethod.getAppCurrentPage(),i=t.datakey;if(!t.segment)return void o.appMethod.showModal({content:"该组件【单行文本】未绑定字段 请在电脑编辑页绑定后使用"});var s={};s[i]=a,n.setData(s)};return React.createElement("div",{className:"custom-component input-ele "+(t.segment_required?"must":""),style:c},React.createElement("input",{type:"text",placeholder:r.placeholder?r.placeholder:"",onInput:d,"data-segment":t.customFeature.segment,"data-datakey":"eles["+n+"].form_data."+r.segment,"data-value":s[t.customFeature.segment]}))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var o=a(5),i=a(6);a(557)},function(e,t){},function(e,t,a){"use strict";function n(e){var t=e.data,a=e.dynamicData,n=e.formCompindex,s=e.form_data||{},r=t.customFeature,c=(0,i.convertStyleData)(t.style),l=(t.content,r.segment);a&&l&&a[l];var d=function(e){var t=e.currentTarget.dataset,a=e.target.value,n=o.appMethod.getAppCurrentPage(),i=t.datakey;if(!t.segment)return void o.appMethod.showModal({content:"该组件【多行文本】未绑定字段 请在电脑编辑页绑定后使用"});var s={};s[i]=a,n.setData(s)};return React.createElement("div",{className:"custom-component textarea-ele",style:c},React.createElement("textarea",{placeholder:r.placeholder?r.placeholder:"",maxLength:"-1",value:s[t.customFeature.segment],onInput:d,"data-segment":t.customFeature.segment,"data-datakey":"eles["+n+"].form_data."+r.segment}))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var o=a(5),i=a(6);a(559)},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){function t(e){var t=e.currentTarget.dataset,a=l.appMethod.getAppCurrentPage(),n=t.datakey,o=t.score,i=t.compindex,s=t.formcompindex;if(!t.segment)return void l.appMethod.showModal({content:"该组件未绑定字段 请在电脑编辑页绑定后使用"});var r={};r[n]=o,r["eles["+s+"].content["+i+"].editScore"]=o,a.setData(r)}function a(t){var a=t,n=l.appMethod.getAppCurrentPage(),o="eles["+i+"].form_data."+r.segment,s=e.index,c=i;if(!r.segment)return void l.appMethod.showModal({content:"该组件【评分】未绑定字段 请在电脑编辑页绑定后使用"});var d={};d[o]=a,d["eles["+c+"].content["+s+"].sliderScore"]=a,n.setData(d)}var n=e.data,o=e.dynamicData,i=e.formCompindex,r=(e.form_data,n.customFeature),u=(0,d.convertStyleData)(n.style),m=(n.content,r.segment);o&&m&&o[m];return c.default.createElement("div",{className:"custom-component grade-ele",style:u},function(){var o=r.type,l=r.icon,d=r.selectedBackgroundColor,u=void 0===d?"#3091f2":d,m=n.editScore,p=function(e){return{love:"heart",plum:"clubs"}[e]||e};return 0==o?c.default.createElement("div",{className:"grade-wrap"},[1,2,3,4,5].map(function(a,n){return c.default.createElement("div",{key:n,className:"ico-moon icon-"+p(l)+(m>=a?"":"-empty"),style:{color:m>=a?u:"#D3D3D3"},onClick:t,"data-compindex":e.index,"data-segment":r.segment,"data-formcompindex":i,"data-datakey":"eles["+i+"].form_data."+r.segment,"data-score":a})})):1==o?c.default.createElement(c.default.Fragment,null,c.default.createElement("div",{className:"slider"},c.default.createElement(s.default,{min:0,max:Number(r.numberNodes)||1,trackStyle:{backgroundColor:r.selectedBackgroundColor},railStyle:{backgroundColor:r.lineBackgroundColor},handleStyle:{borderColor:r.sliderColor,backgroundColor:r.sliderColor},onChange:a})),c.default.createElement("div",{className:"slider-score"},n.sliderScore||0)):void 0}())}Object.defineProperty(t,"__esModule",{value:!0});var i=a(561),s=n(i);t.default=o,a(578);var r=a(4),c=n(r),l=a(5),d=a(6);a(580)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(0),i=n(o),s=a(3),r=n(s),c=a(1),l=n(c),d=a(2),u=n(d),m=a(562),p=n(m),f=a(4),g=n(f),h=function(e){function t(){return(0,i.default)(this,t),(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,u.default)(t,e),(0,r.default)(t,[{key:"render",value:function(){return g.default.createElement("div",{className:this.props.prefixCls+"-wrapper"},g.default.createElement(p.default,this.props))}}]),t}(g.default.Component);t.default=h,h.defaultProps={prefixCls:"am-slider"},e.exports=t.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(8),i=n(o),s=a(0),r=n(s),c=a(3),l=n(c),d=a(1),u=n(d),m=a(2),p=n(m),f=a(4),g=n(f),h=a(14),v=n(h),_=a(18),y=(n(_),a(563)),E=n(y),b=a(564),N=n(b),R=a(161),k=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(R),w=function(e){function t(e){(0,r.default)(this,t);var a=(0,u.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onEnd=function(){a.setState({dragging:!1}),a.removeDocumentEvents(),a.props.onAfterChange(a.getValue())};var n=void 0!==e.defaultValue?e.defaultValue:e.min,o=void 0!==e.value?e.value:n;return a.state={value:a.trimAlignValue(o),dragging:!1},a}return(0,p.default)(t,e),(0,l.default)(t,[{key:"componentWillReceiveProps",value:function(e){if("value"in e||"min"in e||"max"in e){var t=this.state.value,a=void 0!==e.value?e.value:t,n=this.trimAlignValue(a,e);n!==t&&(this.setState({value:n}),k.isValueOutOfRange(a,e)&&this.props.onChange(n))}}},{key:"onChange",value:function(e){var t=this.props;!("value"in t)&&this.setState(e);var a=e.value;t.onChange(a)}},{key:"onStart",value:function(e){this.setState({dragging:!0});var t=this.props,a=this.getValue();t.onBeforeChange(a);var n=this.calcValueByPos(e);this.startValue=n,this.startPosition=e,n!==a&&this.onChange({value:n})}},{key:"onMove",value:function(e,t){k.pauseEvent(e);var a=this.state,n=this.calcValueByPos(t);n!==a.value&&this.onChange({value:n})}},{key:"getValue",value:function(){return this.state.value}},{key:"getLowerBound",value:function(){return this.props.min}},{key:"getUpperBound",value:function(){return this.state.value}},{key:"trimAlignValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=(0,i.default)({},this.props,t),n=k.ensureValueInRange(e,a);return k.ensureValuePrecision(n,a)}},{key:"render",value:function(){var e=this,t=this.props,a=t.prefixCls,n=t.vertical,o=t.included,s=t.disabled,r=t.minimumTrackStyle,c=t.trackStyle,l=t.handleStyle,d=t.min,u=t.max,m=t.handle,p=this.state,f=p.value,h=p.dragging,v=this.calcOffset(f),_=m({className:a+"-handle",vertical:n,offset:v,value:f,dragging:h,disabled:s,min:d,max:u,style:l[0]||l,ref:function(t){return e.saveHandle(0,t)}}),y=c[0]||c;return{tracks:g.default.createElement(E.default,{className:a+"-track",vertical:n,included:o,offset:0,length:v,style:(0,i.default)({},r,y)}),handles:_}}}]),t}(g.default.Component);w.propTypes={defaultValue:v.default.number,value:v.default.number,disabled:v.default.bool},t.default=(0,N.default)(w),e.exports=t.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(8),i=n(o),s=a(4),r=n(s),c=function(e){var t=e.className,a=e.included,n=e.vertical,o=e.offset,s=e.length,c=e.style,l=n?{bottom:o+"%",height:s+"%"}:{left:o+"%",width:s+"%"},d=(0,i.default)({visibility:a?"visible":"hidden"},c,l);return r.default.createElement("div",{className:t,style:d})};t.default=c,e.exports=t.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(){}function i(e){var t,a;return a=t=function(e){function t(e){(0,p.default)(this,t);var a=(0,v.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onMouseDown=function(e){if(0===e.button){var t=a.props.vertical,n=B.getMousePosition(t,e);if(B.isEventFromHandle(e,a.handlesRefs)){var o=B.getHandleCenterPosition(t,e.target);a.dragOffset=n-o,n=o}else a.dragOffset=0;a.onStart(n),a.addDocumentMouseEvents(),B.pauseEvent(e)}},a.onTouchStart=function(e){if(!B.isNotTouchEvent(e)){var t=a.props.vertical,n=B.getTouchPosition(t,e);if(B.isEventFromHandle(e,a.handlesRefs)){var o=B.getHandleCenterPosition(t,e.target);a.dragOffset=n-o,n=o}else a.dragOffset=0;a.onStart(n),a.addDocumentTouchEvents(),B.pauseEvent(e)}},a.onMouseMove=function(e){if(!a.sliderRef)return void a.onEnd();var t=B.getMousePosition(a.props.vertical,e);a.onMove(e,t-a.dragOffset)},a.onTouchMove=function(e){if(B.isNotTouchEvent(e)||!a.sliderRef)return void a.onEnd();var t=B.getTouchPosition(a.props.vertical,e);a.onMove(e,t-a.dragOffset)},a.saveSlider=function(e){a.sliderRef=e};return a.handlesRefs={},a}return(0,b.default)(t,e),(0,g.default)(t,[{key:"componentWillUnmount",value:function(){(0,y.default)(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillUnmount",this)&&(0,y.default)(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillUnmount",this).call(this),this.removeDocumentEvents()}},{key:"addDocumentTouchEvents",value:function(){this.onTouchMoveListener=(0,C.default)(document,"touchmove",this.onTouchMove),this.onTouchUpListener=(0,C.default)(document,"touchend",this.onEnd)}},{key:"addDocumentMouseEvents",value:function(){this.onMouseMoveListener=(0,C.default)(document,"mousemove",this.onMouseMove),this.onMouseUpListener=(0,C.default)(document,"mouseup",this.onEnd)}},{key:"removeDocumentEvents",value:function(){this.onTouchMoveListener&&this.onTouchMoveListener.remove(),this.onTouchUpListener&&this.onTouchUpListener.remove(),this.onMouseMoveListener&&this.onMouseMoveListener.remove(),this.onMouseUpListener&&this.onMouseUpListener.remove()}},{key:"getSliderStart",value:function(){var e=this.sliderRef,t=e.getBoundingClientRect();return this.props.vertical?t.top:t.left}},{key:"getSliderLength",value:function(){var e=this.sliderRef;if(!e)return 0;var t=e.getBoundingClientRect();return this.props.vertical?t.height:t.width}},{key:"calcValue",value:function(e){var t=this.props,a=t.vertical,n=t.min,o=t.max,i=Math.abs(Math.max(e,0)/this.getSliderLength());return a?(1-i)*(o-n)+n:i*(o-n)+n}},{key:"calcValueByPos",value:function(e){var t=e-this.getSliderStart();return this.trimAlignValue(this.calcValue(t))}},{key:"calcOffset",value:function(e){var t=this.props,a=t.min;return(e-a)/(t.max-a)*100}},{key:"saveHandle",value:function(e,t){this.handlesRefs[e]=t}},{key:"render",value:function(){var e,a=this.props,n=a.prefixCls,i=a.className,s=a.marks,r=a.dots,c=a.step,d=a.included,m=a.disabled,p=a.vertical,f=a.min,g=a.max,h=a.children,v=a.maximumTrackStyle,_=a.style,E=a.railStyle,b=a.dotStyle,N=a.activeDotStyle,k=(0,y.default)(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"render",this).call(this),w=k.tracks,x=k.handles,C=(0,S.default)(n,(e={},(0,u.default)(e,n+"-with-marks",Object.keys(s).length),(0,u.default)(e,n+"-disabled",m),(0,u.default)(e,n+"-vertical",p),(0,u.default)(e,i,i),e));return R.default.createElement("div",{ref:this.saveSlider,className:C,onTouchStart:m?o:this.onTouchStart,onMouseDown:m?o:this.onMouseDown,style:_},R.default.createElement("div",{className:n+"-rail",style:(0,l.default)({},v,E)}),w,R.default.createElement(T.default,{prefixCls:n,vertical:p,marks:s,dots:r,step:c,included:d,lowerBound:this.getLowerBound(),upperBound:this.getUpperBound(),max:g,min:f,dotStyle:b,activeDotStyle:N}),x,R.default.createElement(L.default,{className:n+"-mark",vertical:p,marks:s,included:d,lowerBound:this.getLowerBound(),upperBound:this.getUpperBound(),max:g,min:f}),h)}}]),t}(e),t.displayName="ComponentEnhancer("+e.displayName+")",t.propTypes=(0,l.default)({},e.propTypes,{min:w.default.number,max:w.default.number,step:w.default.number,marks:w.default.object,included:w.default.bool,className:w.default.string,prefixCls:w.default.string,disabled:w.default.bool,children:w.default.any,onBeforeChange:w.default.func,onChange:w.default.func,onAfterChange:w.default.func,handle:w.default.func,dots:w.default.bool,vertical:w.default.bool,style:w.default.object,minimumTrackStyle:w.default.object,maximumTrackStyle:w.default.object,handleStyle:w.default.oneOfType([w.default.object,w.default.arrayOf(w.default.object)]),trackStyle:w.default.oneOfType([w.default.object,w.default.arrayOf(w.default.object)]),railStyle:w.default.object,dotStyle:w.default.object,activeDotStyle:w.default.object}),t.defaultProps=(0,l.default)({},e.defaultProps,{prefixCls:"rc-slider",className:"",min:0,max:100,step:1,marks:{},handle:function(e){var t=e.index,a=(0,r.default)(e,["index"]);return delete a.dragging,R.default.createElement(F.default,(0,l.default)({},a,{key:t}))},onBeforeChange:o,onChange:o,onAfterChange:o,included:!0,disabled:!1,dots:!1,vertical:!1,trackStyle:[{}],handleStyle:[{}],railStyle:{},dotStyle:{},activeDotStyle:{}}),a}Object.defineProperty(t,"__esModule",{value:!0});var s=a(51),r=n(s),c=a(8),l=n(c),d=a(9),u=n(d),m=a(0),p=n(m),f=a(3),g=n(f),h=a(1),v=n(h),_=a(159),y=n(_),E=a(2),b=n(E);t.default=i;var N=a(4),R=n(N),k=a(14),w=n(k),x=a(571),C=n(x),D=a(10),S=n(D),I=a(18),M=(n(I),a(575)),T=n(M),P=a(576),L=n(P),A=a(577),F=n(A),O=a(161),B=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(O);e.exports=t.default},function(e,t,a){e.exports={default:a(566),__esModule:!0}},function(e,t,a){a(567),e.exports=a(20).Object.getPrototypeOf},function(e,t,a){var n=a(63),o=a(126);a(160)("getPrototypeOf",function(){return function(e){return o(n(e))}})},function(e,t,a){e.exports={default:a(569),__esModule:!0}},function(e,t,a){a(570);var n=a(20).Object;e.exports=function(e,t){return n.getOwnPropertyDescriptor(e,t)}},function(e,t,a){var n=a(50),o=a(91).f;a(160)("getOwnPropertyDescriptor",function(){return function(e,t){return o(n(e),t)}})},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t,a,n){var o=c.default.unstable_batchedUpdates?function(e){c.default.unstable_batchedUpdates(a,e)}:a;return(0,s.default)(e,t,o,n)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var i=a(572),s=n(i),r=a(24),c=n(r);e.exports=t.default},function(e,t,a){"use strict";function n(e,t,a,n){function o(t){var n=new i.default(t);a.call(e,n)}if(e.addEventListener){var s=function(){var a=!1;return"object"==typeof n?a=n.capture||!1:"boolean"==typeof n&&(a=n),e.addEventListener(t,o,n||!1),{v:{remove:function(){e.removeEventListener(t,o,a)}}}}();if("object"==typeof s)return s.v}else if(e.attachEvent)return e.attachEvent("on"+t,o),{remove:function(){e.detachEvent("on"+t,o)}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var o=a(573),i=function(e){return e&&e.__esModule?e:{default:e}}(o);e.exports=t.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return null===e||void 0===e}function i(){return m}function s(){return p}function r(e){var t=e.type,a="function"==typeof e.stopPropagation||"boolean"==typeof e.cancelBubble;l.default.call(this),this.nativeEvent=e;var n=s;"defaultPrevented"in e?n=e.defaultPrevented?i:s:"getPreventDefault"in e?n=e.getPreventDefault()?i:s:"returnValue"in e&&(n=e.returnValue===p?i:s),this.isDefaultPrevented=n;var o=[],r=void 0,c=void 0,d=f.concat();for(g.forEach(function(e){t.match(e.reg)&&(d=d.concat(e.props),e.fix&&o.push(e.fix))}),r=d.length;r;)c=d[--r],this[c]=e[c];for(!this.target&&a&&(this.target=e.srcElement||document),this.target&&3===this.target.nodeType&&(this.target=this.target.parentNode),r=o.length;r;)(0,o[--r])(this,e);this.timeStamp=e.timeStamp||Date.now()}Object.defineProperty(t,"__esModule",{value:!0});var c=a(574),l=n(c),d=a(149),u=n(d),m=!0,p=!1,f=["altKey","bubbles","cancelable","ctrlKey","currentTarget","eventPhase","metaKey","shiftKey","target","timeStamp","view","type"],g=[{reg:/^key/,props:["char","charCode","key","keyCode","which"],fix:function(e,t){o(e.which)&&(e.which=o(t.charCode)?t.keyCode:t.charCode),void 0===e.metaKey&&(e.metaKey=e.ctrlKey)}},{reg:/^touch/,props:["touches","changedTouches","targetTouches"]},{reg:/^hashchange$/,props:["newURL","oldURL"]},{reg:/^gesturechange$/i,props:["rotation","scale"]},{reg:/^(mousewheel|DOMMouseScroll)$/,props:[],fix:function(e,t){var a=void 0,n=void 0,o=void 0,i=t.wheelDelta,s=t.axis,r=t.wheelDeltaY,c=t.wheelDeltaX,l=t.detail;i&&(o=i/120),l&&(o=0-(l%3==0?l/3:l)),void 0!==s&&(s===e.HORIZONTAL_AXIS?(n=0,a=0-o):s===e.VERTICAL_AXIS&&(a=0,n=o)),void 0!==r&&(n=r/120),void 0!==c&&(a=-1*c/120),a||n||(n=o),void 0!==a&&(e.deltaX=a),void 0!==n&&(e.deltaY=n),void 0!==o&&(e.delta=o)}},{reg:/^mouse|contextmenu|click|mspointer|(^DOMMouseScroll$)/i,props:["buttons","clientX","clientY","button","offsetX","relatedTarget","which","fromElement","toElement","offsetY","pageX","pageY","screenX","screenY"],fix:function(e,t){var a=void 0,n=void 0,i=void 0,s=e.target,r=t.button;return s&&o(e.pageX)&&!o(t.clientX)&&(a=s.ownerDocument||document,n=a.documentElement,i=a.body,e.pageX=t.clientX+(n&&n.scrollLeft||i&&i.scrollLeft||0)-(n&&n.clientLeft||i&&i.clientLeft||0),e.pageY=t.clientY+(n&&n.scrollTop||i&&i.scrollTop||0)-(n&&n.clientTop||i&&i.clientTop||0)),e.which||void 0===r||(e.which=1&r?1:2&r?3:4&r?2:0),!e.relatedTarget&&e.fromElement&&(e.relatedTarget=e.fromElement===s?e.toElement:e.fromElement),e}}],h=l.default.prototype;(0,u.default)(r.prototype,h,{constructor:r,preventDefault:function(){var e=this.nativeEvent;e.preventDefault?e.preventDefault():e.returnValue=p,h.preventDefault.call(this)},stopPropagation:function(){var e=this.nativeEvent;e.stopPropagation?e.stopPropagation():e.cancelBubble=m,h.stopPropagation.call(this)}}),t.default=r,e.exports=t.default},function(e,t,a){"use strict";function n(){return!1}function o(){return!0}function i(){this.timeStamp=Date.now(),this.target=void 0,this.currentTarget=void 0}Object.defineProperty(t,"__esModule",{value:!0}),i.prototype={isEventObject:1,constructor:i,isDefaultPrevented:n,isPropagationStopped:n,isImmediatePropagationStopped:n,preventDefault:function(){this.isDefaultPrevented=o},stopPropagation:function(){this.isPropagationStopped=o},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=o,this.stopPropagation()},halt:function(e){e?this.stopImmediatePropagation():this.stopPropagation(),this.preventDefault()}},t.default=i,e.exports=t.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(9),i=n(o),s=a(8),r=n(s),c=a(4),l=n(c),d=a(10),u=n(d),m=a(18),p=n(m),f=function(e,t,a,n,o,i){(0,p.default)(!a||n>0,"`Slider[step]` should be a positive number in order to make Slider[dots] work.");var s=Object.keys(t).map(parseFloat);if(a)for(var r=o;r<=i;r+=n)s.indexOf(r)>=0||s.push(r);return s},g=function(e){var t=e.prefixCls,a=e.vertical,n=e.marks,o=e.dots,s=e.step,c=e.included,d=e.lowerBound,m=e.upperBound,p=e.max,g=e.min,h=e.dotStyle,v=e.activeDotStyle,_=p-g,y=f(0,n,o,s,g,p).map(function(e){var n,o=Math.abs(e-g)/_*100+"%",s=!c&&e===m||c&&e<=m&&e>=d,p=a?(0,r.default)({bottom:o},h):(0,r.default)({left:o},h);s&&(p=(0,r.default)({},p,v));var f=(0,u.default)((n={},(0,i.default)(n,t+"-dot",!0),(0,i.default)(n,t+"-dot-active",s),n));return l.default.createElement("span",{className:f,style:p,key:e})});return l.default.createElement("div",{className:t+"-step"},y)};t.default=g,e.exports=t.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(8),i=n(o),s=a(13),r=n(s),c=a(9),l=n(c),d=a(4),u=n(d),m=a(10),p=n(m),f=function(e){var t=e.className,a=e.vertical,n=e.marks,o=e.included,s=e.upperBound,c=e.lowerBound,d=e.max,m=e.min,f=Object.keys(n),g=f.length,h=g>1?100/(g-1):100,v=.9*h,_=d-m,y=f.map(parseFloat).sort(function(e,t){return e-t}).map(function(e){var d,f=!o&&e===s||o&&e<=s&&e>=c,g=(0,p.default)((d={},(0,l.default)(d,t+"-text",!0),(0,l.default)(d,t+"-text-active",f),d)),h={marginBottom:"-50%",bottom:(e-m)/_*100+"%"},y={width:v+"%",marginLeft:-v/2+"%",left:(e-m)/_*100+"%"},E=a?h:y,b=n[e],N="object"===(void 0===b?"undefined":(0,r.default)(b))&&!u.default.isValidElement(b),R=N?b.label:b,k=N?(0,i.default)({},E,b.style):E;return u.default.createElement("span",{className:g,style:k,key:e},R)});return u.default.createElement("div",{className:t},y)};t.default=f,e.exports=t.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(8),i=n(o),s=a(51),r=n(s),c=a(0),l=n(c),d=a(3),u=n(d),m=a(1),p=n(m),f=a(2),g=n(f),h=a(4),v=n(h),_=a(14),y=n(_),E=function(e){function t(){return(0,l.default)(this,t),(0,p.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,g.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this.props,t=e.className,a=e.vertical,n=e.offset,o=e.style,s=e.disabled,c=e.min,l=e.max,d=e.value,u=(0,r.default)(e,["className","vertical","offset","style","disabled","min","max","value"]),m=a?{bottom:n+"%"}:{left:n+"%"},p=(0,i.default)({},o,m),f={};return void 0!==d&&(f=(0,i.default)({},f,{"aria-valuemin":c,"aria-valuemax":l,"aria-valuenow":d,"aria-disabled":!!s})),v.default.createElement("div",(0,i.default)({role:"slider"},f,u,{className:t,style:p}))}}]),t}(v.default.Component);t.default=E,E.propTypes={className:y.default.string,vertical:y.default.bool,offset:y.default.number,style:y.default.object,disabled:y.default.bool,min:y.default.number,max:y.default.number,value:y.default.number},e.exports=t.default},function(e,t,a){"use strict";a(579)},function(e,t){},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){function t(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.stopPropagation();var a=u.appMethod.getAppCurrentPage(),n=t.value,o=t.datakey,i=t.segment,s=t.compindex,r=t.formcompindex;if(!i)return void u.appMethod.showModal({content:"该组件【选项】未绑定字段 请在电脑编辑页绑定后使用"});var c={},l={};if(c[o]=n,c[o].constructor===Array){c[o]=c[o].join();for(var d in n)l[n[d]]=1;l.itemLength=n.length}else l[n]=1,l.itemLength=1;c["eles["+r+"].content["+s+"].selectedData"]=l,a.setData(c)}function a(e){e.stopPropagation();var t=u.appMethod.getAppCurrentPage(),a=e.currentTarget.dataset,o=a.index,s=a.compindex,r=a.formcompindex,c=l.segment,d=l.multiSelection,m=(l.minSelect,l.maxSelect),p="eles["+i+"].form_data."+l.segment,f=n.selectedValue,g=n.content.lists,h={},v=[];if(!c)return void u.appMethod.showModal({content:"该组件【选项】未绑定字段 请在电脑编辑页绑定后使用"});var _="eles["+r+"].content["+s+"]";if(h[_+".selectedValue"]=f||[],d){var y=0;h[_+".selectedValue"][o]===o?h[_+".selectedValue"][o]=null:h[_+".selectedValue"][o]=o;for(var E=0;E<h[_+".selectedValue"].length;E++){var b=h[_+".selectedValue"][E];if(null!=b){if(++y>m)return void u.appMethod.showModal({content:"最多选择"+m+"项"});v.push(g[b])}h[p]=v.join(",")}}else h[p]="",h[_+".selectedValue"][o]===o?h[_+".selectedValue"][o]=null:(h[_+".selectedValue"]=[],h[_+".selectedValue"][o]=o,h[p]=g[o]);t.setData(h)}var n=e.data,o=e.dynamicData,i=e.formCompindex,r=e.form_data||{},l=n.customFeature,p=(0,m.convertStyleData)(n.style),f={backgroundColor:l.lineBackgroundColor,color:l.secColor,fontSize:(0,m.transformPx2Rem)(l.secFontSize,320),lineHeight:(0,m.transformPx2Rem)(l.secLineHeight,320),fontWeight:(0,m.transformPx2Rem)(l.secFontWeight,320),fontStyle:l.secFontStyle,textDecoration:l.secTextDecoration},g=n.content,h=l.segment;o&&h&&(g=o[h]);return React.createElement("div",{className:"custom-component select-ele type-"+l.type,style:p},React.createElement("div",{className:"select-container"},React.createElement("div",{className:"title-container",style:f},React.createElement("span",{className:"title"},n.content.title)),function(){var o=l.type,u=l.select_style,p=l.multiSelection;return void 0===o?React.createElement("div",null,"当前展示类型不存在，请重新设置"):0===o?p?React.createElement(c.default,null,g.lists.map(function(a,o){return React.createElement("div",{key:o,className:"select-item"},React.createElement(d.default.CheckboxItem,{disabled:n.customFeature.maxSelect==n.selectedData.itemLength&&1!=n.selectedData[a],checked:n.content.selectArr[o],onChange:function(o){return t(o,{value:a,segment:n.customFeature.segment,datakey:"eles["+i+"].form_data."+l.segment,compindex:e.index,formcompindex:i})},"data-value":a,"data-segment":n.customFeature.segment,"data-datakey":"eles["+i+"].form_data."+l.segment,"data-compindex":e.index,"data-formcompindex":i},React.createElement("div",{className:"select-text"},a)))})):React.createElement(c.default,null,g.lists.map(function(e,a){return React.createElement("div",{key:a,className:"select-item"},React.createElement(s.default.RadioItem,{checked:e==r[n.customFeature.segment],onChange:t,"data-value":e,"data-segment":n.customFeature.segment,"data-formcompindex":i,"data-datakey":"eles["+i+"].form_data."+l.segment},React.createElement("div",{className:"select-text"},e)))})):1===o?g.lists.map(function(t,o){return React.createElement("div",{className:"select-list",style:{borderWidth:(0,m.transformPx2Rem)(u["border-width"],320),borderStyle:u["border-style"],borderColor:n.selectedValue[o]===o?u["border-active-color"]:u["border-color"]}},n.selectedValue[o]===o&&React.createElement("div",{className:"icoo-moon icon-gou",style:{background:"-webkit-gradient(linear, right top, left bottom, from("+n.customFeature.select_style["border-active-color"]+"), color-stop(0.5, "+n.customFeature.select_style["border-active-color"]+"), color-stop(0.5, rgba(255, 0, 0,0)), to(rgba(255, 0, 0,0)))"},onClick:a,"data-segment":n.customFeature.segment,"data-index":o,"data-compindex":e.index,"data-formcompindex":i}),t)}):void 0}()))}Object.defineProperty(t,"__esModule",{value:!0});var i=a(108),s=n(i),r=a(39),c=n(r),l=a(582),d=n(l);t.default=o,a(110),a(35),a(586);var u=a(5),m=a(6);a(588)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(583),i=n(o),s=a(114),r=n(s),c=a(585),l=n(c);r.default.CheckboxItem=l.default,r.default.AgreeItem=i.default,t.default=r.default,e.exports=t.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(8),i=n(o),s=a(0),r=n(s),c=a(3),l=n(c),d=a(1),u=n(d),m=a(2),p=n(m),f=a(10),g=n(f),h=a(4),v=n(h),_=a(584),y=n(_),E=a(114),b=n(E),N=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&(a[n[o]]=e[n[o]]);return a},R=function(e){function t(){return(0,r.default)(this,t),(0,u.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,p.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this.props,t=e.style,a=N(e,["style"]),n=a.prefixCls,o=a.className,s=(0,g.default)(n+"-agree",o);return v.default.createElement("div",(0,i.default)({},(0,y.default)(a),{className:s,style:t}),v.default.createElement(b.default,(0,i.default)({},a,{className:n+"-agree-label"})))}}]),t}(v.default.Component);t.default=R,R.defaultProps={prefixCls:"am-checkbox"},e.exports=t.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return Object.keys(e).reduce(function(t,a){return"aria-"!==a.substr(0,5)&&"data-"!==a.substr(0,5)&&"role"!==a||(t[a]=e[a]),t},{})},e.exports=t.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(){}Object.defineProperty(t,"__esModule",{value:!0});var i=a(8),s=n(i),r=a(9),c=n(r),l=a(0),d=n(l),u=a(3),m=n(u),p=a(1),f=n(p),g=a(2),h=n(g),v=a(10),_=n(v),y=a(4),E=n(y),b=a(39),N=n(b),R=a(114),k=n(R),w=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&(a[n[o]]=e[n[o]]);return a},x=N.default.Item,C=function(e){function t(){return(0,d.default)(this,t),(0,f.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,h.default)(t,e),(0,m.default)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.listPrefixCls,n=(t.onChange,t.disabled),i=t.checkboxProps,r=t.onClick,l=w(t,["listPrefixCls","onChange","disabled","checkboxProps","onClick"]),d=l.prefixCls,u=l.className,m=l.children,p=(0,_.default)(d+"-item",u,(0,c.default)({},d+"-item-disabled",!0===n));n||(l.onClick=r||o);var f={};return["name","defaultChecked","checked","onChange","disabled"].forEach(function(t){t in e.props&&(f[t]=e.props[t])}),E.default.createElement(x,(0,s.default)({},l,{prefixCls:a,className:p,thumb:E.default.createElement(k.default,(0,s.default)({},i,f))}),m)}}]),t}(E.default.Component);t.default=C,C.defaultProps={prefixCls:"am-checkbox",listPrefixCls:"am-list",checkboxProps:{}},e.exports=t.default},function(e,t,a){"use strict";a(19),a(35),a(587)},function(e,t){},function(e,t){},function(e,t,a){"use strict";function n(e){var t=e.data,a=(e.dynamicData,e.formCompindex),n=e.form_data||{},o=t.customFeature,l=o.segment,d=(0,s.convertStyleData)(t.style);d.padding=(0,s.transformPx2Rem)("15px",320);var u=function(t){var s=r.appMethod.getAppCurrentPage(),c=(e.index,a),l=o.segment,d="eles["+c+"].form_data."+o.segment,u=n[l]||[],m={};m[d]=[].concat((0,i.default)(u),[t]),s.setData(m)},m=function(){r.appMethod.showModal({content:"该组件【添加图片】未绑定字段 请在电脑编辑页绑定后使用"})},p=function(e){var t=r.appMethod.getAppCurrentPage(),i=a,s="eles["+i+"].form_data."+o.segment;r.appMethod.showModal({content:"确定删除该图片？",showCancel:!0,confirm:function(){var a={};n[l].splice(e,1),a[s]=n[l],t.setData(a)}})},f=function(e){r.appMethod.tapPrevewPictureHandler(e)};return React.createElement("div",{className:"custom-component upload-img "+(t.segment_required?"must":""),style:d},n[l]&&n[l].map(function(e,t){return React.createElement("div",{key:e,className:"has-upload-img"},React.createElement("div",{className:"ico-moon icon-closes delete-img",onClick:function(){return p(t)}}),React.createElement("img",{src:e,onClick:f,"data-img":e.pic,"data-imgarr":JSON.stringify(n[l])}))}),(!n[l]||n[l].length<(o.upImageCount||9))&&React.createElement("div",{className:"plus-div"},React.createElement("span",null,"+"),React.createElement("div",null,"添加图片"),l&&React.createElement(c.ImgUpload,{complete:function(e){return u(e)}}),!l&&React.createElement("div",{className:"no-bind",onClick:m})))}Object.defineProperty(t,"__esModule",{value:!0});var o=a(36),i=function(e){return e&&e.__esModule?e:{default:e}}(o);t.default=n;var s=a(6),r=a(5),c=a(72);a(590)},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=function(e){return e<10?"0"+e:e};return e.getFullYear()+"-"+t(e.getMonth()+1)+"-"+t(e.getDate())}function i(e){var t=function(e){return e<10?"0"+e:e};return t(e.getHours())+":"+t(e.getMinutes())}function s(e){function t(t){var a=o(t),n=d.appMethod.getAppCurrentPage(),i="eles["+r+"].form_data."+u.segment,s=e.index,c=r,l=u.segment,p={};if(!l)return void d.appMethod.showModal({content:"该组件【时间】未绑定字段 请在电脑编辑页绑定后使用"});var f=n.data.eles[c].form_data;if(m.default.isPlainObject(f)&&(f=n.data.eles[c].form_data={}),f=f[l]){var g=(f.substr(0,10),f.substr(11));16==f.length?p[i]=a+" "+g:10==f.length?p[i]=a:5==f.length?p[i]=a+" "+f:0==f.length&&(p[i]=a)}else p[i]=a;p["eles["+c+"].content["+s+"].date"]=a,n.setData(p)}function a(t){var a=i(t),n=d.appMethod.getAppCurrentPage(),o="eles["+r+"].form_data."+u.segment,s=e.index,c=r,l=u.segment,p={};if(!l)return void d.appMethod.showModal({content:"该组件【时间】未绑定字段 请在电脑编辑页绑定后使用"});var f=n.data.eles[c].form_data;if(m.default.isPlainObject(f)&&(f=n.data.eles[c].form_data={}),f=f[l]){var g=f.substr(0,10);f.substr(11);16==f.length?p[o]=g+" "+a:10==f.length?p[o]=f+" "+a:5==f.length?p[o]=a:0==f.length&&(p[o]=a)}else p[o]=a;p["eles["+c+"].content["+s+"].time"]=a,n.setData(p)}var n=e.data,s=e.dynamicData,r=e.formCompindex,u=(e.form_data,n.customFeature),p=(0,l.convertStyleData)(n.style);u.ifAllDay&&(p.width="100%");var f=(n.content,u.segment);s&&f&&s[f];var g=function(e){var t=e.extra,a=e.onClick,n=e.children;return React.createElement("div",{className:"time-btn",onClick:a},n,t)};return React.createElement("div",{className:"custom-component time-ele",style:p},React.createElement(c.default,{mode:"date",format:"YYYY-MM-DD",extra:n.date||"请选择日期",onChange:function(e){return t(e)}},React.createElement(g,null)),React.createElement(c.default,{mode:"time",format:"HH:mm",extra:n.time||"请选择时间",onChange:function(e){return a(e)}},React.createElement(g,null)))}Object.defineProperty(t,"__esModule",{value:!0});var r=a(107),c=n(r);t.default=s,a(109);var l=a(6),d=a(5),u=a(12),m=n(u);a(592)},function(e,t){},function(e,t,a){"use strict";function n(e){function t(t,i){var s=t,c=i,l=r.appMethod.getAppCurrentPage(),d=e.index,u=n,m=o.segment,p="eles["+u+"].content["+d+"]",f="eles["+n+"].form_data."+o.segment;if(!m)return void r.appMethod.showModal({content:"该组件【下拉选项】未绑定字段 请在电脑编辑页绑定后使用"});var g={};g[p+".dropDown"]=a.dropDown||[],g[p+".dropDown"][c]=s,g[f]=g[p+".dropDown"].join(","),l.setData(g)}var a=e.data,n=e.formCompindex,o=(e.form_data,a.customFeature),c=(0,s.convertStyleData)(a.style),l={height:(0,s.transformPx2Rem)(o.titleStyle["line-height"],320),color:o.titleStyle.color,backgroundColor:o.titleStyle["background-color"],fontSize:(0,s.transformPx2Rem)(o.titleStyle["font-size"],320),lineHeight:(0,s.transformPx2Rem)(o.titleStyle["line-height"],320),fontWeight:o.titleStyle["font-weight"],fontStyle:o.titleStyle["font-style"],textDecoration:o.titleStyle["text-decoration"]},d={height:(0,s.transformPx2Rem)(o.contentStyle["line-height"],320),color:o.contentStyle.color,backgroundColor:o.contentStyle["background-color"],fontSize:(0,s.transformPx2Rem)(o.contentStyle["font-size"],320),lineHeight:(0,s.transformPx2Rem)(o.contentStyle["line-height"],320),fontWeight:o.contentStyle["font-weight"],fontStyle:o.contentStyle["font-style"],textDecoration:o.contentStyle["text-decoration"]};o.contents.forEach(function(e){e.optionsData=e.options.map(function(e,t){return{label:e,value:e}})});var u=function(e){var t=e.extra,a=e.onClick,n=e.children;return React.createElement("div",{className:"picker-title",style:d,onClick:a},n,t)};return React.createElement("div",{className:"custom-component drop-down",style:c},React.createElement("div",{className:"title",style:l},o.name),o.contents.map(function(e,n){return React.createElement(i.default,{key:n,cols:1,extra:a.dropDown&&a.dropDown[n]||e.name,data:e.optionsData,onChange:function(e){return t(e,n)}},React.createElement(u,null))}))}Object.defineProperty(t,"__esModule",{value:!0});var o=a(17),i=function(e){return e&&e.__esModule?e:{default:e}}(o);t.default=n,a(16);var s=a(6),r=a(5);a(594)},function(e,t){},function(e,t,a){"use strict";function n(e){function t(t,a){var o=r.appMethod.getAppCurrentPage(),i=e.index,s=c,l=d.segment,u="eles["+s+"].content["+i+"]",m="eles["+c+"].form_data."+d.segment,p=d.name,f=d.maxSelect,g=d.multiSelection,h={};if(!l)return void r.appMethod.showModal({content:"该组件【图片选项】未绑定字段 请在电脑编辑页绑定后使用"});if(g){var v=n.picOptions||[];v[a]?v[a]=null:v[a]=t,h[u+".picOptions"]=v;var _=v.filter(Boolean);if(h[m]=_,_>f)return void r.appMethod.showModal({content:p+"最多选择"+f+"项"})}else{var y=n.picOptions||[];y[a]?y=[]:(y=[],y[a]=t),h[u+".picOptions"]=y,h[m]=y}o.setData(h)}function a(e){r.appMethod.tapPrevewPictureHandler(e)}var n=e.data,o=e.dynamicData,c=e.formCompindex,l=(e.form_data,n.picOptions||[]),d=n.customFeature,u=(0,s.convertStyleData)(n.style),m={textAlign:d.title_style["text-align"],color:d.title_style.color,backgroundColor:d.title_style["background-color"],fontSize:(0,s.transformPx2Rem)(d.title_style["font-size"],320),lineHeight:(0,s.transformPx2Rem)(d.title_style["line-height"],320),fontWeight:d.title_style["font-weight"],fontStyle:d.title_style["font-style"],textDecoration:d.title_style["text-decoration"]},p={width:(0,s.transformPx2Rem)(d.pic_style.width,320),height:(0,s.transformPx2Rem)(d.pic_style.height,320)},f={background:"-webkit-gradient(linear, right top, left bottom, from("+d.pic_style["border-active-color"]+"), color-stop(0.5, "+d.pic_style["border-active-color"]+"),color-stop(0.5, rgba(255, 0, 0,0)), to(rgba(255, 0, 0,0)))"},g={width:(0,s.transformPx2Rem)(d.pic_style.width,320),height:(0,s.transformPx2Rem)(d.pic_style.height,320),borderColor:d.pic_style["border-color"],borderRadius:d.pic_style["border-radius"],borderStyle:d.pic_style["border-style"],borderWidth:d.pic_style["border-width"]},h=(0,i.default)({},g,{borderColor:d.pic_style["border-active-color"]}),v=(n.content,d.segment);return o&&v&&o[v],React.createElement("div",{className:"custom-component pic-options mode-"+d.mode,style:u},React.createElement("div",{className:"title",style:m},d.name),d.picOptions.map(function(e,n){return React.createElement("div",{className:"pic-options-list",key:n,onClick:function(){return t(e.pic,n)}},React.createElement("div",{className:"pic-options-item",style:p},l[n]&&React.createElement("div",{className:"icon-moon icon-gou",style:f}),React.createElement("img",{src:e.pic,style:l[n]?h:g}),React.createElement("span",{className:"icon-moon icon-big-pic"})),React.createElement("div",{className:"pic-options-name",onClick:a,"data-img":e.pic,"data-imgarr":JSON.stringify(e.pic)},e.name))}))}Object.defineProperty(t,"__esModule",{value:!0});var o=a(8),i=function(e){return e&&e.__esModule?e:{default:e}}(o);t.default=n;var s=a(6),r=a(5);a(596)},function(e,t){},function(e,t,a){"use strict";function n(e){function t(){var t=i.appMethod.getAppCurrentPage(),a=s,n=e.index,o=r.syncUserAddress,c=r.segment;i.appMethod.turnToPage("myAddress?from=form&syncUserAddress="+o),t.selectAddressCallback=function(e){var o={},i=e.address_info.province.text+e.address_info.city.text+e.address_info.district.text+e.address_info.detailAddress;o["eles["+n+"].content["+a+"]."+c]=i,t.setData(o)}}var a=e.data,n=e.dynamicData,s=e.formCompindex,r=a.customFeature,c=(0,o.convertStyleData)(a.style),l={height:(0,o.transformPx2Rem)(r.titleStyle["line-height"],320),color:r.titleStyle.color,backgroundColor:r.titleStyle["background-color"],fontSize:(0,o.transformPx2Rem)(r.titleStyle["font-size"],320),lineHeight:(0,o.transformPx2Rem)(r.titleStyle["line-height"],320),fontWeight:r.titleStyle["font-weight"],fontStyle:r.titleStyle["font-style"],textDecoration:r.titleStyle["text-decoration"],textAlign:r.titleStyle["text-align"]},d={height:(0,o.transformPx2Rem)(r.contentStyle["line-height"],320),color:r.contentStyle.color,backgroundColor:r.contentStyle["background-color"],fontSize:(0,o.transformPx2Rem)(r.contentStyle["font-size"],320),lineHeight:(0,o.transformPx2Rem)(r.contentStyle["line-height"],320),fontWeight:r.contentStyle["font-weight"],fontStyle:r.contentStyle["font-style"],textDecoration:r.contentStyle["text-decoration"],textAlign:r.contentStyle["text-align"]},u=(a.content,r.segment);return n&&u&&n[u],React.createElement("div",{className:"custom-component address-ele",style:c},React.createElement("div",{className:"title",style:l},r.name),React.createElement("div",{className:"select-address",style:d,onClick:t},"请选择地区",React.createElement("span",{className:"ico-moon icon-rightarrow"})))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var o=a(6),i=a(5);a(598)},function(e,t){},function(e,t,a){"use strict";function n(e){var t=e.data,a=t.customFeature,n=e.dynamicData,i=t.can_use||1,s=(0,o.convertStyleData)(t.style);1!=i&&(s.backgroundImage=a.lineBackgroundImage,s.backgroundColor=a.lineBackgroundColor);var r=(t.content,a.segment);return n&&r&&n[r],React.createElement("div",{className:"custom-component form-button",style:s,disabled:1!=i,onClick:e.onSubmit},1==i?t.content:a.disabledContent||"已提交")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var o=a(6);a(600)},function(e,t){},function(e,t,a){"use strict";function n(e){var t=e.data,a=e.dynamicData,n=t.customFeature,o=(0,s.convertStyleData)(t.style),c=t.content;return React.createElement("div",{className:"custom-component free-vessel",style:o,onClick:function(){return(0,r.customEvent)({customFeature:n})}},c.map(function(e,t){return React.createElement(i.default,{key:t,index:t,data:e,dynamicData:a})}))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var o=a(33),i=function(e){return e&&e.__esModule?e:{default:e}}(o),s=a(6),r=a(15);a(602)},function(e,t){},function(e,t,a){"use strict";function n(e){var t=e.data,a=t.customFeature,n={backgroundColor:a.backgroundColor,borderColor:"black"===a.borderStyle?"#d5d5d5":a.borderStyle},o=e.match.url.substr(1),s=t.content.map(function(e){return e.router===o?(e.imgUrl=e.selectedIconPath,e.textColor=a.selectedColor):(e.imgUrl=e.iconPath,e.textColor=a.color),e}),r=100/s.length+"%";return React.createElement("div",{className:"custom-component tab-nav",style:n},s.map(function(e,t){return React.createElement("div",{className:"item",key:t,style:{width:r},onClick:function(){return i(e,o)}},React.createElement("div",{className:"item-img"},React.createElement("img",{src:e.imgUrl})),React.createElement("div",{className:"item-text",style:{color:e.textColor}},e.text))}))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var o=a(5);a(604);var i=function(e,t){e.router!==t&&o.appMethod.turnToPage(e.router)}},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(13),i=n(o),s=a(9),r=n(s),c=a(8),l=n(c),d=a(0),u=n(d),m=a(3),p=n(m),f=a(1),g=n(f),h=a(2),v=n(h),_=a(4),y=n(_),E=a(6),b=a(5),N=a(11),R=a(21),k=a(40);a(606);var w=function(e){var e=new Date(e)||new Date,t=new Date((new Date).setDate(e.getDate()+1)),a=["周日","周一","周二","周三","周四","周五","周六"];return{start_day:a[e.getDay()],end_day:a[t.getDay()],start_date:e.getMonth()+1+"月"+e.getDate()+"日",end_date:t.getMonth()+1+"月"+t.getDate()+"日"}},x=function(e){function t(e){(0,u.default)(this,t);var a=(0,g.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));C.call(a);var n=e.index,o=b.appMethod.getAppCurrentPage();return a.init(n,o),a}return(0,v.default)(t,e),(0,p.default)(t,[{key:"render",value:function(){var e=this,t=this.props.data,a=t.customFeature;t.storeStyle||(t.storeStyle={});var n=(0,E.convertStyleData)(t.style);n.fontSize=(0,E.transformPx2Rem)(t.style["font-size"],320),0==a.vesselAutoheight&&(n.height=(0,E.transformPx2Rem)(a.height,320));var o={margin:(0,E.transformPx2Rem)(a.margin,320),backgroundColor:a.lineBackgroundColor,backgroundImage:a.lineBackgroundImage,height:(0,E.transformPx2Rem)(a.lineHeight,320)},i={width:(0,E.transformPx2Rem)(a.imgWidth,320),height:(0,E.transformPx2Rem)(a.imgHeight,320)};3==a.mode&&(i.width="100%");var s=null;switch(a.mode){case 0:s="calc(100% - "+i.width+")";break;case 1:case 3:s="100%";break;case 2:s=""+i.width;break;default:s="calc(100% - "+i.width+")"}var r=function(e){return(e||"addshoppingcart1").indexOf("addshoppingcart")},c=function(e){var t=e.form_data.goods_express_data.express_fee_sort;return 1==t.length&&0==t[0]},d=function(){var n=2==a.mode&&t.curpage>0;return y.default.createElement(y.default.Fragment,null,t.loading&&y.default.createElement(R.RequestStatus,{is:"requestLoading",hor:n}),0==t.is_more&&0==t.goods_data.length&&y.default.createElement(R.RequestStatus,{is:"requestNone",data:{data:"暂无商品数据~"},hor:n}),t.loadingFail&&y.default.createElement(R.RequestStatus,{is:"requestFail",data:{refreshEvent:"goodsScrollFunc",compindex:e.props.index},hor:n}),0==t.is_more&&t.goods_data.length>0&&t.customFeature.isShowFinishText&&y.default.createElement(R.RequestStatus,{is:"requestAll",hor:n}),1==t.customFeature.vesselAutoheight&&1==t.customFeature.loadingMethod&&2!=t.customFeature.mode&&!!t.is_more&&0!=t.is_more&&!t.loading&&!t.loadingFail&&y.default.createElement(k.LoadingBtn,{customFeature:a,onClick:e.goodsScrollFunc,"data-compindex":e.props.index}))},u=function(){return y.default.createElement(N.ScrollView,{className:"goods-list goods-list-mode-"+a.mode+" "+(2==t.customFeature.mode&&t.curpage>0?"hor-request-status":""),style:n,"scroll-x":2==t.customFeature.mode,"scroll-y":2!=t.customFeature.mode&&0==t.customFeature.vesselAutoheight,"scroll-top":t.scrollTop,bindscrolltolower:e.goodsScrollFunc,"data-compindex":e.props.index},3!==t.customFeature.mode&&y.default.createElement("div",{className:"js-list-container"},t.goods_data&&t.goods_data.map(function(a,n){return y.default.createElement("div",{className:"goods-list-item background-ele",key:n,"data-id":a.form_data.id,style:(0,l.default)({},o,{height:0!==t.customFeature.mode?1===t.customFeature.mode?"300px ":"280px":o.height,marginBottom:0!==t.customFeature.mode?"0px":""}),"data-contact":t.customFeature.ifUseContact,"data-goods-type":a.form_data.goods_type,"data-group":a.form_data.is_group_buy,"data-presell":a.form_data.is_presell_goods,"data-groupid":a.form_data.group_buy_activity_id,"data-hidestock":t.customFeature.isHideStock||"","data-isshowvirtualprice":t.customFeature.isShowVirtualPrice,"data-app-id":a.form_data.app_id,onClick:e.turnToGoodsDetail},y.default.createElement("div",{className:"inner-content",style:{verticalAlign:"top"}},y.default.createElement("img",{className:"list-img",src:a.form_data.cover,style:(0,l.default)({},i,{position:"relative"})}),a.form_data.corner_mark>0&&y.default.createElement("img",{className:"goods-subscript",src:a.form_data.corner_url}),y.default.createElement("div",{className:"title-container",style:{width:s}},y.default.createElement("div",{className:"title"},a.form_data.isSubShopGoods?"【"+a.form_data.app_shop_name+"】":"",a.form_data.title),t.customFeature.isShowVirtualPrice&&"goods"==t.customFeature.form?0==t.customFeature.mode?y.default.createElement(y.default.Fragment,null,!t.customFeature.isHideSales&&y.default.createElement("div",{style:{width:s,position:"absolute",bottom:0,paddingLeft:".20rem",height:"60%"}},y.default.createElement("div",{className:"price",style:{marginBottom:".10rem",color:t.storeStyle.theme}},1!=a.form_data.goods_type&&"0.00"!=a.form_data.price&&y.default.createElement("span",{style:{fontSize:".28125rem",marginRight:".10rem"}},"¥"),1!=a.form_data.goods_type&&"0.00"!=a.form_data.price&&y.default.createElement("span",null,"1"!=a.form_data.goods_type?a.form_data.price:"0.00"!=a.form_data.price?a.form_data.price:"免费"),0!=a.form_data.max_can_use_integral&&1!=a.form_data.goods_type&&"0.00"!=a.form_data.price&&y.default.createElement("span",null,"+"),0!=a.form_data.max_can_use_integral&&y.default.createElement("span",null,a.form_data.max_can_use_integral,"积分")),y.default.createElement("div",{style:{bottom:0}},y.default.createElement("span",{className:"sales"},"销量：",a.form_data.sales),1!=a.form_data.is_group_buy&&t.customFeature.isShoppingCart&&r(t.customFeature.addShoppingCartImageSrc)>=0&&("goods"==t.customFeature.form||"tostore"==t.customFeature.form)&&y.default.createElement("label",{className:"addShoppingcart ico-moon icon-"+(t.customFeature.addShoppingCartImageSrc||"addshoppingcart1"),"data-id":a.form_data.id,"data-buynow":t.customFeature.isBuyNow||"","data-isshowvirtualprice":t.customFeature.isShowVirtualPrice,"data-app-id":a.form_data.app_id,onClick:0==a.form_data.goods_type?e.showGoodsShoppingcart:e.showAddShoppingcart}),1!=a.form_data.is_group_buy&&t.customFeature.isShoppingCart&&r(t.customFeature.addShoppingCartImageSrc)<0&&("goods"==t.customFeature.form||"tostore"==t.customFeature.form)&&y.default.createElement("label",{className:"addShoppingcart shoppingImage","data-id":a.form_data.id,"data-buynow":t.customFeature.isBuyNow||"","data-isshowvirtualprice":t.customFeature.isShowVirtualPrice,"data-app-id":a.form_data.app_id,onClick:0==a.form_data.goods_type?e.showGoodsShoppingcart:e.showAddShoppingcart},y.default.createElement("img",{src:t.customFeature.addShoppingCartImageSrc})))),t.customFeature.isHideSales&&y.default.createElement("div",{style:{width:s,paddingLeft:".20rem"}},y.default.createElement("div",{className:"price",style:{color:t.storeStyle.theme}},1!=a.form_data.goods_type&&"0.00"!=a.form_data.price&&y.default.createElement("span",{style:{fontSize:".28125rem",marginRight:".1rem",color:t.storeStyle.theme}},"¥"),1!=a.form_data.goods_type&&"0.00"!=a.form_data.price&&y.default.createElement("span",{style:{color:t.storeStyle.theme}},"1"!=a.form_data.goods_type?a.form_data.price:"0.00"!=a.form_data.price?a.form_data.price:"免费"),0!=a.form_data.max_can_use_integral&&1!=a.form_data.goods_type&&"0.00"!=a.form_data.price&&y.default.createElement("span",{style:{color:t.storeStyle.theme}},"+"),0!=a.form_data.max_can_use_integral&&y.default.createElement("span",{style:{color:t.storeStyle.theme}},a.form_data.max_can_use_integral,"积分")))):y.default.createElement("div",{style:{width:s}},y.default.createElement("div",{style:{paddingLeft:0}},y.default.createElement("div",{className:"integral-flex-wrap"},"0.00"!=a.form_data.price&&y.default.createElement("span",{className:"price",style:{color:t.storeStyle.theme}},"¥",a.form_data.price),y.default.createElement("span",null,0!=a.form_data.max_can_use_integral&&"0.00"!=a.form_data.price&&y.default.createElement("span",{className:"price",style:{color:t.storeStyle.theme}},"+"),0!=a.form_data.max_can_use_integral&&y.default.createElement("span",{className:"price",style:{color:t.storeStyle.theme}},a.form_data.max_can_use_integral,"积分")))),!t.customFeature.isHideSales&&y.default.createElement("div",{className:"sales"},"销量：",a.form_data.sales)):y.default.createElement("div",{style:{width:s}},y.default.createElement("div",{className:"integral-flex-wrap"},"0.00"!=a.form_data.price&&y.default.createElement("span",{className:"price",style:{color:t.storeStyle.theme}},"¥",a.form_data.price),y.default.createElement("span",null,0!=a.form_data.max_can_use_integral&&"0.00"!=a.form_data.price&&y.default.createElement("span",{className:"price",style:{color:t.storeStyle.theme}},"+"),0!=a.form_data.max_can_use_integral&&y.default.createElement("span",{className:"price",style:{color:t.storeStyle.theme}},a.form_data.max_can_use_integral,"积分"))),!t.customFeature.isHideSales&&y.default.createElement("span",{className:"sales"},"销量：",a.form_data.sales)))))})),3===t.customFeature.mode&&y.default.createElement("div",{className:"js-list-container four-goods-list","data-list-index":"0"},t.goods_data&&t.goods_data.map(function(a,n){return y.default.createElement("div",{className:"goods-list-item background-ele",key:n,style:o,"data-id":a.form_data.id,"data-contact":t.customFeature.ifUseContact,"data-goods-type":a.form_data.goods_type,"data-group":a.form_data.is_group_buy,"data-presell":a.form_data.is_presell_goods,"data-groupid":a.form_data.group_buy_activity_id,"data-hidestock":t.customFeature.isHideStock||"","data-isshowvirtualprice":t.customFeature.isShowVirtualPrice||"","data-app-id":a.form_data.app_id,onClick:e.turnToGoodsDetail},y.default.createElement("div",{style:{position:"relative"}},a.form_data.corner_mark>0&&y.default.createElement("img",{className:"goods-subscript",src:a.form_data.corner_url}),y.default.createElement("img",{className:"list-img",src:a.form_data.cover,style:i,mode:"scaleToFill"})),y.default.createElement("div",{className:"four-goods-content"},y.default.createElement("div",{className:"title"},a.form_data.isSubShopGoods?"【"+a.form_data.app_shop_name+"】":"",a.form_data.title),y.default.createElement("div",{className:"price-box"},"0.00"!=a.form_data.price&&y.default.createElement("span",{className:"integral-price price",style:{color:t.storeStyle.theme}},"¥",a.form_data.price),0!=a.form_data.max_can_use_integral&&y.default.createElement("span",{className:"integral-price price",style:{color:t.storeStyle.theme}},a.form_data.max_can_use_integral,"积分"),0!=a.form_data.virtual_price&&t.customFeature.isShowVirtualPrice&&y.default.createElement("span",{className:"virtual_price"},"¥",a.form_data.virtual_price),t.customFeature.isHideSales&&t.customFeature.isShoppingCart&&r(t.customFeature.addShoppingCartImageSrc)>=0&&y.default.createElement("label",{className:"addShoppingcart ico-moon icon-"+(t.customFeature.addShoppingCartImageSrc||"addshoppingcart1"),"data-id":a.form_data.id,"data-buynow":t.customFeature.isBuyNow||"","data-isshowvirtualprice":t.customFeature.isShowVirtualPrice,"data-app-id":a.form_data.app_id,onClick:0==a.form_data.goods_type?e.showGoodsShoppingcart:e.showAddShoppingcart}),t.customFeature.isHideSales&&t.customFeature.isShoppingCart&&r(t.customFeature.addShoppingCartImageSrc)<0&&y.default.createElement("label",{className:"addShoppingcart shoppingImage","data-id":a.form_data.id,"data-buynow":t.customFeature.isBuyNow||"","data-isshowvirtualprice":t.customFeature.isShowVirtualPrice,"data-app-id":a.form_data.app_id,onClick:0==a.form_data.goods_type?e.showGoodsShoppingcart:e.showAddShoppingcart},y.default.createElement("img",{src:t.customFeature.addShoppingCartImageSrc}))),!t.customFeature.isHideSales&&y.default.createElement("div",{className:"sales-box"},y.default.createElement("span",{className:"sales"},"销量：",a.form_data.sales))))})),y.default.createElement(d,null))},m=function(){return y.default.createElement(N.ScrollView,{className:"goods-list goods-list-mode-"+a.mode+" "+(2==t.customFeature.mode&&t.curpage>0?"hor-request-status":""),style:n,"scroll-x":2==t.customFeature.mode,"scroll-y":2!=t.customFeature.mode&&0==t.customFeature.vesselAutoheight,"scroll-top":t.scrollTop,bindscrolltolower:e.goodsScrollFunc,"data-compindex":e.props.index},"new_appointment"==t.customFeature.form&&3==t.customFeature.unit?y.default.createElement("div",{className:"js-list-container hotel_appointment","data-goods-type":"10","data-unit":"1","data-tplid":t.customFeature.tpl_id,onClick:e.turnToGoodsDetail},y.default.createElement("div",{className:"hotel-section hotel-area"},y.default.createElement("div",{className:"hotel-box"},y.default.createElement("div",{className:"hotel-h"},"目的地")),y.default.createElement("div",{className:"ico-moon icon-rightarrow"})),y.default.createElement("div",{className:"hotel-section hotel-time"},y.default.createElement("div",{className:"enter-time"},y.default.createElement("div",{className:"hotel-h"},w(t.customFeature.now_date).start_day," 入住"),y.default.createElement("div",{className:"hotel-p"},w(t.customFeature.now_date).start_date)),y.default.createElement("div",{className:"dis-time"},"共1晚"),y.default.createElement("div",{className:"leave-time"},y.default.createElement("div",{className:"hotel-h"},w(t.customFeature.now_date).end_day," 离店"),y.default.createElement("div",{className:"hotel-p"},w(t.customFeature.now_date).end_date)))):3!=+t.customFeature.mode&&3!=t.customFeature.unit?y.default.createElement("div",{className:"js-list-container"},t.goods_data&&t.goods_data.map(function(a,n){return y.default.createElement("div",{className:"goods-list-item background-ele",key:n,style:o,"data-id":a.form_data.id,"data-goods-type":a.form_data.goods_type,"data-group":a.form_data.is_group_buy,"data-presell":a.form_data.is_presell_goods,"data-groupid":a.form_data.group_buy_activity_id,"data-app-id":a.form_data.app_id,onClick:e.turnToGoodsDetail},y.default.createElement("div",{className:"inner-content"},y.default.createElement("img",{className:"list-img",src:a.form_data.cover,style:(0,l.default)({},i,{position:"relative"}),mode:"scaleToFill"}),a.form_data.corner_mark>0&&0==a.form_data.corner_position&&y.default.createElement("img",{className:"goods-subscript",src:a.form_data.corner_url}),y.default.createElement("div",{className:"title-container",style:{width:s}},y.default.createElement("div",{className:"title"},a.form_data.corner_mark>0&&1==a.form_data.corner_position&&y.default.createElement("img",{className:"title-subscript",src:a.form_data.corner_url}),a.form_data.isSubShopGoods?"【"+a.form_data.app_shop_name+"】":"",a.form_data.title),!t.customFeature.isShowVirtualPrice||"goods"!=t.customFeature.form&&"new_appointment"!=t.customFeature.form?y.default.createElement("div",{style:{width:s}},y.default.createElement("span",{className:"price",style:{color:t.storeStyle.theme}},"¥",a.form_data.price),!+t.customFeature.isHideSales&&y.default.createElement("span",{className:"sales"},"销量：",a.form_data.sales),1!=a.form_data.is_group_buy&&"new_appointment"!=t.customFeature.form&&"appointment"!=t.customFeature.form&&t.customFeature.isShoppingCart&&r(t.customFeature.addShoppingCartImageSrc)>=0&&y.default.createElement("label",{className:"addShoppingcart ico-moon icon-"+(t.customFeature.addShoppingCartImageSrc||"addshoppingcart1"),"data-id":a.form_data.id,"data-buynow":t.customFeature.isBuyNow||"","data-isshowvirtualprice":t.customFeature.isShowVirtualPrice,"data-app-id":a.form_data.app_id,onClick:0==a.form_data.goods_type?e.showGoodsShoppingcart:e.showAddShoppingcart}),1!=a.form_data.is_group_buy&&"new_appointment"!=t.customFeature.form&&"appointment"!=t.customFeature.form&&t.customFeature.isShoppingCart&&r(t.customFeature.addShoppingCartImageSrc)<0&&y.default.createElement("label",{className:"addShoppingcart shoppingImage","data-id":a.form_data.id,"data-buynow":t.customFeature.isBuyNow||"","data-isshowvirtualprice":t.customFeature.isShowVirtualPrice,"data-app-id":a.form_data.app_id,onClick:0==a.form_data.goods_type?"showGoodsShoppingcart":"showAddShoppingcart"},y.default.createElement("img",{src:t.customFeature.addShoppingCartImageSrc}))):0==t.customFeature.mode?y.default.createElement(y.default.Fragment,null,!t.customFeature.isHideSales&&y.default.createElement("div",{style:{width:s,position:"absolute",bottom:0,paddingLeft:".20rem",height:"60%"}},1!=a.form_data.is_vip_goods?y.default.createElement("div",{className:"price",style:{marginBottom:".10rem",color:t.storeStyle.theme}},1!=a.form_data.goods_type&&"0.00"!=a.form_data.price&&y.default.createElement("span",{style:{fontSize:".28125rem",marginRight:".10rem"}},"¥"),y.default.createElement("span",null,"1"!=a.form_data.goods_type?a.form_data.price:"0.00"!=a.form_data.price?a.form_data.price:"免费"),0!=a.form_data.virtual_price&&y.default.createElement("span",{className:"virtual_price"},"¥",a.form_data.virtual_price)):y.default.createElement("div",{className:"price member-price"},y.default.createElement("span",{className:"member-vip-price"},y.default.createElement("span",{style:{fontSize:".26rem"}},"¥"),a.form_data.vip_min_price),y.default.createElement("span",{className:"vip-logo",style:{margin:"0 .10rem 0 .20rem"}},"会员价"),1!=a.form_data.goods_type&&"0.00"!=a.form_data.price&&y.default.createElement("span",{style:{fontSize:".24rem",color:"#999"}},"¥","1"!=a.form_data.goods_type?a.form_data.price:"0.00"!=a.form_data.price?a.form_data.price:"免费")),y.default.createElement("div",{style:{bottom:0}},y.default.createElement("span",{className:"sales"},"销量：",a.form_data.sales),1!=a.form_data.is_group_buy&&"new_appointment"!=t.customFeature.form&&"appointment"!=t.customFeature.form&&t.customFeature.isShoppingCart&&r(t.customFeature.addShoppingCartImageSrc)>=0&&("goods"==t.customFeature.form||"tostore"==t.customFeature.form)&&y.default.createElement("label",{className:"addShoppingcart ico-moon icon-"+(t.customFeature.addShoppingCartImageSrc||"addshoppingcart1"),"data-id":a.form_data.id,"data-buynow":t.customFeature.isBuyNow||"","data-isshowvirtualprice":t.customFeature.isShowVirtualPrice,"data-app-id":a.form_data.app_id,onClick:0==a.form_data.goods_type?e.showGoodsShoppingcart:e.showAddShoppingcart}),1!=a.form_data.is_group_buy&&t.customFeature.isShoppingCart&&r(t.customFeature.addShoppingCartImageSrc)<0&&("goods"==t.customFeature.form||"tostore"==t.customFeature.form)&&y.default.createElement("label",{className:"addShoppingcart shoppingImage","data-id":a.form_data.id,"data-buynow":t.customFeature.isBuyNow||"","data-isshowvirtualprice":t.customFeature.isShowVirtualPrice,onClick:0==a.form_data.goods_type?e.showGoodsShoppingcart:e.showAddShoppingcart},y.default.createElement("img",{src:t.customFeature.addShoppingCartImageSrc})))),t.customFeature.isHideSales&&y.default.createElement("div",{style:{width:s,paddingLeft:".20rem"}},1!=a.form_data.is_vip_goods?y.default.createElement("div",{className:"price",style:{color:t.storeStyle.theme}},1!=a.form_data.goods_type&&"0.00"!=a.form_data.price&&y.default.createElement("span",{style:{fontSize:".28125rem",marginRight:".10rem"}},"¥"),y.default.createElement("span",null,"1"!=a.form_data.goods_type?a.form_data.price:"0.00"!=a.form_data.price?a.form_data.price:"免费"),0!=a.form_data.virtual_price&&y.default.createElement("span",{className:"virtual_price"},"¥",a.form_data.virtual_price),1!=a.form_data.is_group_buy&&"new_appointment"!=t.customFeature.form&&"appointment"!=t.customFeature.form&&t.customFeature.isShoppingCart&&r(t.customFeature.addShoppingCartImageSrc)>=0&&y.default.createElement("label",{className:"addShoppingcart ico-moon icon-"+(t.customFeature.addShoppingCartImageSrc||"addshoppingcart1"),"data-id":a.form_data.id,"data-buynow":t.customFeature.isBuyNow||"","data-app-id":a.form_data.app_id,onClick:0==a.form_data.goods_type?e.showGoodsShoppingcart:e.showAddShoppingcart}),1!=a.form_data.is_group_buy&&"new_appointment"!=t.customFeature.form&&"appointment"!=t.customFeature.form&&t.customFeature.isShoppingCart&&r(t.customFeature.addShoppingCartImageSrc)<0&&y.default.createElement("label",{className:"addShoppingcart shoppingImage","data-id":a.form_data.id,"data-buynow":t.customFeature.isBuyNow||"",onClick:0==a.form_data.goods_type?e.showGoodsShoppingcart:e.showAddShoppingcart},y.default.createElement("img",{src:t.customFeature.addShoppingCartImageSrc}))):y.default.createElement("div",{className:"price member-price"},y.default.createElement("span",{className:"member-vip-price"},y.default.createElement("span",{style:{fontSize:".26rem"}},"¥"),a.form_data.vip_min_price),y.default.createElement("span",{className:"vip-logo",style:{margin:"0 .20rem 0 .10rem"}},"会员价"),1!=a.form_data.goods_type&&"0.00"!=a.form_data.price&&y.default.createElement("span",{style:{fontSize:".24rem",color:"#999"}},"¥","1"!=a.form_data.goods_type?a.form_data.price:"0.00"!=a.form_data.price?a.form_data.price:"免费")))):y.default.createElement("div",{style:{width:s}},1!=a.form_data.is_vip_goods?y.default.createElement("div",{style:{paddingLeft:0}},y.default.createElement("span",{className:"price",style:{color:t.storeStyle.theme}},"¥",a.form_data.price),0!=a.form_data.virtual_price&&y.default.createElement("span",{className:"virtual_price",style:{marginLeft:0}},"¥",a.form_data.virtual_price)):y.default.createElement("div",{className:"price member-price"},y.default.createElement("span",{className:"member-vip-price"},y.default.createElement("span",{style:{fontSize:".26rem"}},"¥"),a.form_data.vip_min_price),y.default.createElement("span",{className:"vip-logo vip-logo-mode-1"},"会员价"),1!=a.form_data.goods_type&&"0.00"!=a.form_data.price&&y.default.createElement("span",{style:{fontSize:".24rem",color:"#999",marginLeft:".10rem"}},"¥","1"!=a.form_data.goods_type?a.form_data.price:"0.00"!=a.form_data.price?a.form_data.price:"免费")),t.customFeature.isHideSales&&y.default.createElement("span",{className:"sales"},"销量：",a.form_data.sales),1!=a.form_data.is_group_buy&&"new_appointment"!=t.customFeature.form&&"appointment"!=t.customFeature.form&&t.customFeature.isShoppingCart&&r(t.customFeature.addShoppingCartImageSrc)>=0&&y.default.createElement("label",{"data-id":a.form_data.id,"data-buynow":t.customFeature.isBuyNow||"","data-isshowvirtualprice":t.customFeature.isShowVirtualPrice,"data-app-id":a.form_data.app_id,onClick:0==a.form_data.goods_type?e.showGoodsShoppingcart:e.showAddShoppingcart}),1!=a.form_data.is_group_buy&&"new_appointment"!=t.customFeature.form&&"appointment"!=t.customFeature.form&&t.customFeature.isShoppingCart&&r(t.customFeature.addShoppingCartImageSrc)<0&&y.default.createElement("label",{className:"addShoppingcart shoppingImage","data-id":a.form_data.id,"data-buynow":t.customFeature.isBuyNow||"","data-isshowvirtualprice":t.customFeature.isShowVirtualPrice,onClick:0==a.form_data.goods_type?e.showGoodsShoppingcart:e.showAddShoppingcart},y.default.createElement("img",{src:t.customFeature.addShoppingCartImageSrc}))))))})):null,3===t.customFeature.mode&&3!=t.customFeature.unit&&y.default.createElement("div",{className:"js-list-container four-goods-list"},t.goods_data&&t.goods_data.map(function(a,n){return y.default.createElement("div",{className:"goods-list-item background-ele",key:n,style:o,"data-id":a.form_data.id,"data-goods-type":a.form_data.goods_type,"data-group":a.form_data.is_group_buy,"data-presell":a.form_data.is_presell_goods,"data-groupid":a.form_data.group_buy_activity_id,"data-app-id":a.form_data.app_id,onClick:e.turnToGoodsDetail},y.default.createElement("div",{style:{position:"relative"}},a.form_data.corner_mark>0&&0==a.form_data.corner_position&&y.default.createElement("img",{className:"goods-subscript",src:a.form_data.corner_url}),y.default.createElement("img",{className:"list-img",src:a.form_data.cover,style:i,mode:"scaleToFill"})),y.default.createElement("div",{className:"four-goods-content"},y.default.createElement("div",{className:"title"},a.form_data.corner_mark>0&&1==a.form_data.corner_position&&y.default.createElement("img",{className:"title-subscript",src:a.form_data.corner_url}),a.form_data.isSubShopGoods?"【"+a.form_data.app_shop_name+"】":"",a.form_data.title,"}"),y.default.createElement("div",{className:"price-box"}),!+t.customFeature.isHideSales&&y.default.createElement("div",{className:"sales-box"},y.default.createElement("span",{className:"sales"},"销量：",a.form_data.sales),1!=a.form_data.is_group_buy&&1!=a.form_data.goods_type&&"new_appointment"!=t.customFeature.form&&t.customFeature.isShoppingCart&&r(t.customFeature.addShoppingCartImageSrc)>=0&&y.default.createElement("label",{className:"addShoppingcart ico-moon icon-"+(t.customFeature.addShoppingCartImageSrc||"addshoppingcart1"),"data-id":a.form_data.id,"data-buynow":t.customFeature.isBuyNow||"","data-isshowvirtualprice":t.customFeature.isShowVirtualPrice,"data-app-id":a.form_data.app_id,onClick:0==a.form_data.goods_type?e.showGoodsShoppingcart:e.showAddShoppingcart}),1!=a.form_data.is_group_buy&&"new_appointment"!=t.customFeature.form&&t.customFeature.isShoppingCart&&r(t.customFeature.addShoppingCartImageSrc)<0&&y.default.createElement("label",{className:"addShoppingcart shoppingImage","data-id":a.form_data.id,"data-buynow":t.customFeature.isBuyNow||"","data-isshowvirtualprice":t.customFeature.isShowVirtualPrice,"data-app-id":a.form_data.app_id,onClick:0==a.form_data.goods_type?e.showGoodsShoppingcart:e.showAddShoppingcart},y.default.createElement("img",{src:t.customFeature.addShoppingCartImageSrc})))))})),y.default.createElement(d,null))},p=function(){return y.default.createElement(N.ScrollView,{className:"new-goods-list "+(2==t.customFeature.mode&&t.curpage>0?"hor-request-status":""),style:(0,l.default)({},n,{background:0!=t.customFeature.mode?"#f3f3f3":""}),"scroll-x":2==t.customFeature.mode,"scroll-y":2!=t.customFeature.mode,"scroll-top":t.scrollTop,bindscrolltolower:e.goodsScrollFunc,"data-compindex":e.props.index},0==t.customFeature.mode&&y.default.createElement("div",{className:"new-goods-list-one"},t.goods_data&&t.goods_data.map(function(a,n){return y.default.createElement("div",{className:"goods-content",key:n,"data-id":a.form_data.id,"data-goods-type":a.form_data.goods_type,"data-app-id":a.form_data.app_id,"data-group":a.form_data.is_group_buy,"data-presell":a.form_data.is_presell_goods,"data-groupid":a.form_data.group_buy_activity_id,style:o,onClick:e.turnToGoodsDetail},y.default.createElement("img",{className:"goods-image",src:a.form_data.cover,style:i,mode:"scaleToFill"}),a.form_data.corner_mark>0&&0==a.form_data.corner_position&&y.default.createElement("img",{className:"goods-subscript",src:a.form_data.corner_url}),"0-1"==t.customFeature.styleMode&&y.default.createElement("div",{className:"goods-detail"},y.default.createElement("div",{className:"title"},a.form_data.corner_mark>0&&1==a.form_data.corner_position&&y.default.createElement("img",{className:"title-subscript",src:a.form_data.corner_url}),a.form_data.isSubShopGoods?"【"+a.form_data.app_shop_name+"】":"",a.form_data.title),y.default.createElement("div",{className:"discount-box"},1==a.form_data.is_vip_goods&&y.default.createElement("span",{className:"vip-logo",style:{marginRight:".10rem"}},"会员价"),0!=a.form_data.virtual_price&&y.default.createElement("span",{className:"discount",style:{color:t.storeStyle.theme,background:t.storeStyle.theme+"33"}},1!=a.form_data.is_vip_goods?a.form_data.discount+"折优惠":a.form_data.vip_discount+"折优惠"),c(a)&&y.default.createElement("span",{className:"express",style:{color:t.storeStyle.theme,background:t.storeStyle.theme+"33"}},"包邮")),y.default.createElement("div",{className:"price-box"},1!=a.form_data.is_vip_goods?y.default.createElement(y.default.Fragment,null,y.default.createElement("span",{style:{color:t.storeStyle.theme},className:"real-price"},"¥",a.form_data.price),0!=a.form_data.virtual_price&&y.default.createElement("span",{className:"virtual-price"},"¥",a.form_data.virtual_price)):y.default.createElement(y.default.Fragment,null,y.default.createElement("span",{style:{color:t.storeStyle.theme},className:"real-price"},"¥",a.form_data.vip_min_price),0!=a.form_data.price&&y.default.createElement("span",{className:"virtual-price",style:{textDecoration:"inherit",position:"relative",top:".02rem"}},"¥",a.form_data.price))),y.default.createElement("div",{className:"sales-box"},y.default.createElement("span",{className:"sales"},a.form_data.sales,"人付款")),1!=a.form_data.is_group_buy&&y.default.createElement("label",{style:{color:t.storeStyle.theme},className:"shopping-icon ico-moon icon-addshoppingcart5","data-id":a.form_data.id,"data-app-id":a.form_data.app_id,onClick:e.showGoodsShoppingcart})),"0-2"==t.customFeature.styleMode&&y.default.createElement("div",{className:"goods-detail one-two-mode"},y.default.createElement("div",{className:"title"},a.form_data.corner_mark>0&&1==a.form_data.corner_position&&y.default.createElement("img",{className:"title-subscript",src:a.form_data.corner_url}),a.form_data.isSubShopGoods?"【"+a.form_data.app_shop_name+"】":"",a.form_data.title),1==a.form_data.is_vip_goods?y.default.createElement("div",{className:"price-box"},y.default.createElement("span",{style:{fontSize:"24rpx",color:"#999",position:"relative",top:".06rem"},className:"real-price"},"¥",a.form_data.price),0!=a.form_data.virtual_price&&y.default.createElement("span",{style:{color:t.storeStyle.theme,background:t.storeStyle.theme+"33",position:"relative",top:".05rem"},className:"discount two-style-discount vip-trangel"},y.default.createElement("span",{style:{borderRightColor:t.storeStyle.theme+"33",marginTop:".10rem"},className:"trangel"}),a.form_data.discount,"折"),y.default.createElement("div",null,y.default.createElement("span",{style:{color:t.storeStyle.theme},className:"real-price"},"¥",a.form_data.vip_min_price),y.default.createElement("span",{style:{color:t.storeStyle.theme,background:t.storeStyle.theme+"33"},className:"discount two-style-discount"},y.default.createElement("span",{style:{borderRightColor:t.storeStyle.theme+"33"},className:"trangel"}),0!=a.form_data.virtual_price?"会员"+a.form_data.vip_discount+"折":"会员价"))):y.default.createElement(y.default.Fragment,null,1!=a.form_data.is_vip_goods&&y.default.createElement("span",{className:"virtual-price"},0!=a.form_data.virtual_price?"¥"+a.form_data.virtual_price:""),y.default.createElement("div",{className:"price-box"},y.default.createElement("span",{style:{color:t.storeStyle.theme},className:"real-price"},"¥",a.form_data.price),0!=a.form_data.virtual_price&&y.default.createElement("span",{style:{color:t.storeStyle.theme,background:t.storeStyle.theme+"33"},className:"discount two-style-discount"},y.default.createElement("span",{style:{borderRightColor:t.storeStyle.theme+"33"},className:"trangel"}),a.form_data.discount,"折"))),y.default.createElement("div",{className:"sales-box"},c(a)&&y.default.createElement("span",{className:"express",style:{color:t.storeStyle.theme,borderColor:t.storeStyle.theme+"33"}},"包邮"),y.default.createElement("span",{className:"sales"},a.form_data.sales,"人付款")),1!=a.form_data.is_group_buy&&y.default.createElement("label",{style:{color:t.storeStyle.theme},className:"shopping-icon ico-moon icon-addshoppingcart5","data-id":a.form_data.id,"data-app-id":a.form_data.app_id,onClick:e.showGoodsShoppingcart})))})),1==t.customFeature.mode&&y.default.createElement("div",{className:"new-goods-list-two clearfix"},t.goods_data&&t.goods_data.map(function(a,n){return y.default.createElement("div",{className:"goods-content",key:n,"data-id":a.form_data.id,"data-goods-type":a.form_data.goods_type,"data-app-id":a.form_data.app_id,"data-group":a.form_data.is_group_buy,"data-presell":a.form_data.is_presell_goods,"data-groupid":a.form_data.group_buy_activity_id,style:o,onClick:e.turnToGoodsDetail},y.default.createElement("img",{className:"list-img",src:a.form_data.cover,style:i,mode:"scaleToFill"}),a.form_data.corner_mark>0&&0==a.form_data.corner_position&&y.default.createElement("img",{className:"goods-subscript",src:a.form_data.corner_url}),y.default.createElement("div",{className:"title"},a.form_data.corner_mark>0&&1==a.form_data.corner_position&&y.default.createElement("img",{className:"title-subscript",src:a.form_data.corner_url}),a.form_data.isSubShopGoods?"【"+a.form_data.app_shop_name+"】":"",a.form_data.title),"1-1"==t.customFeature.styleMode&&y.default.createElement("div",{className:"goods-detail"},y.default.createElement("div",{className:"discount-box"},1==a.form_data.is_vip_goods&&y.default.createElement("span",{className:"vip-logo",style:{marginRight:".10rem"}},"会员价"),0!=a.form_data.virtual_price&&y.default.createElement("span",{className:"discount",style:{color:t.storeStyle.theme,background:t.storeStyle.theme+"33"}},1!=a.form_data.is_vip_goods?a.form_data.discount+"折优惠":a.form_data.vip_discount+"折优惠"),c(a)&&y.default.createElement("span",{className:"express",style:{color:t.storeStyle.theme,background:t.storeStyle.theme+"33"}},"包邮")),y.default.createElement("div",{className:"price-box"},1!=a.form_data.is_vip_goods?y.default.createElement(y.default.Fragment,null,y.default.createElement("span",{style:{color:t.storeStyle.theme},className:"real-price"},"¥",a.form_data.price),0!=a.form_data.virtual_price&&y.default.createElement("span",{className:"virtual-price"},"¥",a.form_data.virtual_price)):y.default.createElement(y.default.Fragment,null,y.default.createElement("span",{style:{color:t.storeStyle.theme},className:"real-price"},"¥",a.form_data.vip_min_price),0!=a.form_data.price&&y.default.createElement("span",{className:"virtual-price",style:{textDecoration:"inherit",position:"relative",top:".02rem"}},"¥",a.form_data.price))),y.default.createElement("div",{className:"sales-box"},y.default.createElement("span",{className:"sales"},a.form_data.sales,"人付款"),1!=a.form_data.is_group_buy&&y.default.createElement("label",{style:{color:t.storeStyle.theme},className:"shopping-icon ico-moon icon-addshoppingcart5","data-id":a.form_data.id,"data-app-id":a.form_data.app_id,onClick:e.showGoodsShoppingcart}))),"1-2"==t.customFeature.styleMode&&y.default.createElement("div",{className:"goods-detail two-two-mode"},1==a.form_data.is_vip_goods?y.default.createElement("div",{className:"price-box"},y.default.createElement("span",{style:{fontSize:"24rpx",color:"#999",position:"relative",top:".06rem"},className:"real-price"},"¥",a.form_data.price),0!=a.form_data.virtual_price&&y.default.createElement("span",{style:{color:t.storeStyle.theme,background:t.storeStyle.theme+"33",position:"relative",top:".05rem"},className:"discount two-style-discount vip-trangel"},y.default.createElement("span",{style:{borderRightColor:t.storeStyle.theme+"33",marginTop:".10rem"},className:"trangel"}),a.form_data.discount,"折"),y.default.createElement("div",null,y.default.createElement("span",{style:{color:t.storeStyle.theme},className:"real-price"},"¥",a.form_data.vip_min_price),y.default.createElement("span",{style:{color:t.storeStyle.theme,background:t.storeStyle.theme+"33"},className:"discount two-style-discount"},y.default.createElement("span",{style:{borderRightColor:t.storeStyle.theme+"33"},className:"trangel"}),0!=a.form_data.virtual_price?"会员"+a.form_data.vip_discount+"折":"会员价"))):y.default.createElement(y.default.Fragment,null,1!=a.form_data.is_vip_goods&&y.default.createElement("span",{className:"virtual-price"},0!=a.form_data.virtual_price?"¥"+a.form_data.virtual_price:""),y.default.createElement("div",{className:"price-box"},y.default.createElement("span",{style:{color:t.storeStyle.theme},className:"real-price"},"¥",a.form_data.price),0!=a.form_data.virtual_price&&y.default.createElement("span",{style:{color:t.storeStyle.theme,background:t.storeStyle.theme+"33"},className:"discount two-style-discount"},y.default.createElement("span",{style:{borderRightColor:t.storeStyle.theme+"33"},className:"trangel"}),a.form_data.discount,"折"))),y.default.createElement("div",{className:"sales-box"},c(a)&&y.default.createElement("span",{className:"express",style:{color:t.storeStyle.theme,borderColor:t.storeStyle.theme+"33"}},"包邮"),y.default.createElement("span",{className:"sales"},a.form_data.sales,"人付款"),1!=a.form_data.is_group_buy&&y.default.createElement("label",{style:{color:t.storeStyle.theme},className:"shopping-icon ico-moon icon-addshoppingcart5","data-id":a.form_data.id,"data-app-id":a.form_data.app_id,onClick:e.showGoodsShoppingcart}))))})),2==t.customFeature.mode&&y.default.createElement("div",{className:"new-goods-list-three"},t.goods_data&&t.goods_data.map(function(a,n){return y.default.createElement("div",{className:"goods-content",key:n,"data-id":a.form_data.id,"data-goods-type":a.form_data.goods_type,"data-app-id":a.form_data.app_id,"data-group":a.form_data.is_group_buy,"data-presell":a.form_data.is_presell_goods,"data-groupid":a.form_data.group_buy_activity_id,style:o,onClick:e.turnToGoodsDetail},y.default.createElement("img",{className:"list-img",src:a.form_data.cover,style:i,mode:"scaleToFill"}),a.form_data.corner_mark>0&&0==a.form_data.corner_position&&y.default.createElement("img",{className:"goods-subscript",src:a.form_data.corner_url}),y.default.createElement("div",{className:"title"},a.form_data.corner_mark>0&&1==a.form_data.corner_position&&y.default.createElement("img",{className:"title-subscript",src:a.form_data.corner_url}),a.form_data.isSubShopGoods?"【"+a.form_data.app_shop_name+"】":"",a.form_data.title),"2-1"==t.customFeature.styleMode&&y.default.createElement("div",{className:"goods-detail"},y.default.createElement("div",{className:"discount-box"},1==a.form_data.is_vip_goods&&y.default.createElement("span",{className:"vip-logo",style:{marginRight:".10rem"}},"会员价"),0!=a.form_data.virtual_price&&y.default.createElement("span",{className:"discount",style:{color:t.storeStyle.theme,background:t.storeStyle.theme+"33"}},1!=a.form_data.is_vip_goods?a.form_data.discount+"折优惠":a.form_data.vip_discount+"折优惠"),c(a)&&y.default.createElement("span",{className:"express",style:{color:t.storeStyle.theme,background:t.storeStyle.theme+"33"}},"包邮")),y.default.createElement("div",{className:"price-box"},1!=a.form_data.is_vip_goods?y.default.createElement(y.default.Fragment,null,y.default.createElement("span",{style:{color:t.storeStyle.theme},className:"real-price"},"¥",a.form_data.price),0!=a.form_data.virtual_price&&y.default.createElement("span",{className:"virtual-price"},"¥",a.form_data.virtual_price)):y.default.createElement(y.default.Fragment,null,y.default.createElement("span",{style:{color:t.storeStyle.theme},className:"real-price"},"¥",a.form_data.vip_min_price),0!=a.form_data.price&&y.default.createElement("span",{className:"virtual-price",style:{textDecoration:"inherit",position:"relative",top:".02rem"}},"¥",a.form_data.price))),y.default.createElement("div",{className:"sales-box"},y.default.createElement("span",{className:"sales"},a.form_data.sales,"人付款"),1!=a.form_data.is_group_buy&&y.default.createElement("label",{style:{color:t.storeStyle.theme},className:"shopping-icon ico-moon icon-addshoppingcart5","data-id":a.form_data.id,"data-app-id":a.form_data.app_id,onClick:e.showGoodsShoppingcart}))),"2-2"==t.customFeature.styleMode&&y.default.createElement("div",{className:"goods-detail three-two-mode"},1==a.form_data.is_vip_goods?y.default.createElement("div",{className:"price-box"},y.default.createElement("span",{style:{fontSize:"24rpx",color:"#999",position:"relative",top:".06rem"},className:"real-price"},"¥",a.form_data.price),0!=a.form_data.virtual_price&&y.default.createElement("span",{style:{color:t.storeStyle.theme,background:t.storeStyle.theme+"33",position:"relative",top:".05rem"},className:"discount two-style-discount vip-trangel"},y.default.createElement("span",{style:{borderRightColor:t.storeStyle.theme+"33",marginTop:".10rem"},className:"trangel"}),a.form_data.discount,"折"),y.default.createElement("div",null,y.default.createElement("span",{style:{color:t.storeStyle.theme},className:"real-price"},"¥",a.form_data.vip_min_price),y.default.createElement("span",{style:{color:t.storeStyle.theme,background:t.storeStyle.theme+"33"},className:"discount two-style-discount"},y.default.createElement("span",{style:{borderRightColor:t.storeStyle.theme+"33"},className:"trangel"}),0!=a.form_data.virtual_price?"会员"+a.form_data.vip_discount+"折":"会员价"))):y.default.createElement(y.default.Fragment,null,1!=a.form_data.is_vip_goods&&y.default.createElement("span",{className:"virtual-price"},0!=a.form_data.virtual_price?"¥"+a.form_data.virtual_price:""),y.default.createElement("div",{className:"price-box"},y.default.createElement("span",{style:{color:t.storeStyle.theme},className:"real-price"},"¥",a.form_data.price),0!=a.form_data.virtual_price&&y.default.createElement("span",{style:{color:t.storeStyle.theme,background:t.storeStyle.theme+"33"},className:"discount two-style-discount"},y.default.createElement("span",{style:{borderRightColor:t.storeStyle.theme+"33"},className:"trangel"}),a.form_data.discount,"折"))),y.default.createElement("div",{className:"sales-box"},c(a)&&y.default.createElement("span",{className:"express",style:{color:t.storeStyle.theme,borderColor:t.storeStyle.theme+"33"}},"包邮"),y.default.createElement("span",{className:"sales"},a.form_data.sales,"人付款"),1!=a.form_data.is_group_buy&&y.default.createElement("label",{style:{color:t.storeStyle.theme},className:"shopping-icon ico-moon icon-addshoppingcart5","data-id":a.form_data.id,"data-app-id":a.form_data.app_id,onClick:e.showGoodsShoppingcart}))))})),3==t.customFeature.mode&&y.default.createElement("div",{className:"new-goods-list-four"},t.goods_data&&t.goods_data.map(function(a,n){return y.default.createElement("div",{className:"goods-content",key:n,"data-id":a.form_data.id,"data-goods-type":a.form_data.goods_type,"data-app-id":a.form_data.app_id,"data-group":a.form_data.is_group_buy,"data-presell":a.form_data.is_presell_goods,"data-groupid":a.form_data.group_buy_activity_id,style:o,onClick:e.turnToGoodsDetail},y.default.createElement("img",{className:"goods-image",src:a.form_data.cover,style:i,mode:"scaleToFill"}),a.form_data.corner_mark>0&&0==a.form_data.corner_position&&y.default.createElement("img",{className:"goods-subscript",src:a.form_data.corner_url}),"3-1"==t.customFeature.styleMode&&y.default.createElement("div",{className:"goods-detail"},y.default.createElement("div",{className:"title"},a.form_data.corner_mark>0&&1==a.form_data.corner_position&&y.default.createElement("img",{className:"title-subscript",src:a.form_data.corner_url}),a.form_data.isSubShopGoods?"【"+a.form_data.app_shop_name+"】":"",a.form_data.title),y.default.createElement("div",{className:"discount-box"},1==a.form_data.is_vip_goods&&y.default.createElement("span",{className:"vip-logo",style:{marginRight:".10rem"}},"会员价"),0!=a.form_data.virtual_price&&y.default.createElement("span",{className:"discount",style:{color:t.storeStyle.theme,background:t.storeStyle.theme+"33"}},1!=a.form_data.is_vip_goods?a.form_data.discount+"折优惠":a.form_data.vip_discount+"折优惠"),c(a)&&y.default.createElement("span",{className:"express",style:{color:t.storeStyle.theme,background:t.storeStyle.theme+"33"}},"包邮"),y.default.createElement("span",{className:"sales"},a.form_data.sales,"人付款")),y.default.createElement("div",{className:"price-box"},1!=a.form_data.is_vip_goods?y.default.createElement(y.default.Fragment,null,y.default.createElement("span",{style:{color:t.storeStyle.theme},className:"real-price"},"¥",a.form_data.price),0!=a.form_data.virtual_price&&y.default.createElement("span",{className:"virtual-price"},"¥",a.form_data.virtual_price)):y.default.createElement(y.default.Fragment,null,y.default.createElement("span",{style:{color:t.storeStyle.theme},className:"real-price"},"¥",a.form_data.vip_min_price),0!=a.form_data.price&&y.default.createElement("span",{className:"virtual-price",style:{textDecoration:"inherit",position:"relative",top:".02rem"}},"¥",a.form_data.price)),1!=a.form_data.is_group_buy&&y.default.createElement("label",{style:{color:t.storeStyle.theme},className:"shopping-icon ico-moon icon-addshoppingcart5","data-id":a.form_data.id,"data-app-id":a.form_data.app_id,onClick:e.showGoodsShoppingcart}))),"3-2"==t.customFeature.styleMode&&y.default.createElement("div",{className:"goods-detail four-two-mode"},y.default.createElement("div",{className:"title"},a.form_data.corner_mark>0&&1==a.form_data.corner_position&&y.default.createElement("img",{className:"title-subscript",src:a.form_data.corner_url}),a.form_data.isSubShopGoods?"【"+a.form_data.app_shop_name+"】":"",a.form_data.title),1==a.form_data.is_vip_goods?y.default.createElement("div",{className:"price-box"},y.default.createElement("span",{style:{color:t.storeStyle.theme},className:"real-price"},"¥",a.form_data.vip_min_price),y.default.createElement("span",{style:{color:t.storeStyle.theme,background:t.storeStyle.theme+"33"},className:"discount two-style-discount"},y.default.createElement("span",{style:{borderRightColor:t.storeStyle.theme+"33"},className:"trangel"}),0!=a.form_data.virtual_price?"会员"+a.form_data.vip_discount+"折":"会员价")):y.default.createElement(y.default.Fragment,null,y.default.createElement("div",{className:"price-box"},y.default.createElement("span",{style:{color:t.storeStyle.theme},className:"real-price"},"¥",a.form_data.price),0!=a.form_data.virtual_price&&y.default.createElement("span",{className:"virtual-price"},"¥",a.form_data.virtual_price),0!=a.form_data.virtual_price&&y.default.createElement("span",{style:{color:t.storeStyle.theme,background:t.storeStyle.theme+"33"},className:"discount two-style-discount"},y.default.createElement("span",{style:{borderRightColor:t.storeStyle.theme+"33"},className:"trangel"}),a.form_data.discount,"折"))),y.default.createElement("div",{className:"discount-box"},c(a)&&y.default.createElement("span",{className:"express",style:{color:t.storeStyle.theme,borderColor:t.storeStyle.theme+"33"}},"包邮"),y.default.createElement("span",{className:"sales"},a.form_data.sales,"人付款"),1!=a.form_data.is_group_buy&&y.default.createElement("label",{style:{color:t.storeStyle.theme},className:"shopping-icon ico-moon icon-addshoppingcart5","data-id":a.form_data.id,"data-app-id":a.form_data.app_id,onClick:e.showGoodsShoppingcart}))))})),y.default.createElement(d,null))};return y.default.createElement("div",{className:"custom-component goods-list"},a.controlCheck?y.default.createElement(u,null):a.styleMode?y.default.createElement(p,null):y.default.createElement(m,null))}}]),t}(y.default.Component),C=function(){var e=this;this.init=function(t,a){var n=a.data.eles[t],o=n.customFeature,i={id:o.id,form:o.form,goods_type:(0,E.getGoodsTypeByForm)(o.form),tpl_id:o.tplId,page:1,is_count:0};a.setData((0,r.default)({},"eles["+t+"].param",i));var s={};s["eles["+t+"].goods_data"]=[],s["eles["+t+"].is_more"]=1,s["eles["+t+"].loadingFail"]=!1,s["eles["+t+"].loading"]=!0,s["eles["+t+"].curpage"]=0,a.setData(s),i.page=1,o.controlCheck?i.is_integral=3:o.isIntegral?i.is_integral=1:i.is_integral=5,o.isShowGroupBuyGoods&&(i.is_group_buy=1),i.is_count=0,i.page_size=o.loadingNum||10,o.source&&"none"!=o.source&&(i.idx_arr={idx:"category",idx_value:o.source}),"goods"===i.form&&o.pickUpArr&&(i.pick_up_type=[],o.pickUpArr.express&&i.pick_up_type.push(1),o.pickUpArr.sameJourney&&i.pick_up_type.push(2),o.pickUpArr.selfLifting&&i.pick_up_type.push(3),o.pickUpArr.dining&&("goods"===o.form&&o.isShowFranchiseeGoods||i.pick_up_type.push(4))),"goods"===o.form&&o.isShowFranchiseeGoods&&!a.franchiseeId&&(i.is_app_shop_cate_goods=1,i.is_app_shop=1),a.setData((0,r.default)({},"eles["+t+"].param",i)),"tostore"===i.form?e.tostoreInit(t,a,i):"new_appointment"==i.form?e.newAppointmentInit(t,a,i):e.goodsListInit(t,a,i)},this.tostoreInit=function(e,t,a){b.appMethod.isLogin()&&b.appMethod.getTostoreCartList(),b.appMethod.sendRequest({hideLoading:!0,url:"/index.php?r=AppShop/GetGoodsList",data:a,method:"post",chain:!0,subshop:t.franchiseeId||"",success:function(a){var n={},o=a.data;if(b.appMethod.getHomepageRouter()==t.state.router){var i=(new Date).getMinutes().toString();i.length<=1&&(i="0"+i);var s=(new Date).getHours().toString()+i,r=!0,c="";b.appMethod.sendRequest({hideLoading:!0,url:"/index.php?r=AppShop/getBusinessTime",method:"post",data:{},chain:!0,subshop:t.franchiseeId||"",success:function(e){var t=e.data.business_time;if(t&&t.length)for(var a=0;a<t.length;a++)c+=t[a].start_time.substring(0,2)+":"+t[a].start_time.substring(2,4)+"-"+t[a].end_time.substring(0,2)+":"+t[a].end_time.substring(2,4)+(1==t.length?"":a<=t.length-1?" / ":""),+s>+t[a].start_time&&+s<+t[a].end_time&&(r=!1);r&&b.appMethod.showModal({content:"店铺休息中,暂时无法接单。营业时间为："+c})}})}o.map(function(e){e.form_data.goods_model&&delete e.form_data.goods_model}),n["eles["+e+"].goods_data"]=o,n["eles["+e+"].is_more"]=a.is_more,n["eles["+e+"].curpage"]=1,n["eles["+e+"].loadingFail"]=!1,n["eles["+e+"].loading"]=!1,t.setData(n)},fail:function(a){var n={};n["eles["+e+"].loadingFail"]=!0,n["eles["+e+"].loading"]=!1,t.setData(n)}})},this.getAptGoodsList=function(e,t,a,n){var o={};if(o["eles["+e+"].param"]=a,o["eles["+e+"].customFeature.tpl_id"]=a.tpl_id,o["eles["+e+"].customFeature.unit"]=a.unit,o["eles["+e+"].customFeature.now_date"]=(new Date).getTime(),!a.tpl_id)return o["eles["+e+"].goods_data"]=[],o["eles["+e+"].is_more"]=0,o["eles["+e+"].loadingFail"]=!1,o["eles["+e+"].loading"]=!1,void t.setData(o);t.setData(o);var i=!1;if(t.newClassifyGroupidsParams&&t.newClassifyGroupidsParams.length)for(var s=t.newClassifyGroupidsParams,r=0;r<s.length;r++){var c=s[r].compindex;t.data[c].hidden||t.data[c].customFeature.refresh_object!=n.id||(i=!0)}i||b.appMethod.sendRequest({hideLoading:!0,url:"/index.php?r=AppShop/GetGoodsList",data:a,method:"post",chain:!0,subshop:t.franchiseeId||"",success:function(a){if(0==a.status){for(var n in a.data)a.data[n].form_data.price=a.data[n].form_data.min_price,delete a.data[n].form_data.description;var o={};o["eles["+e+"].goods_data"]=a.data,o["eles["+e+"].is_more"]=a.is_more,o["eles["+e+"].curpage"]=1,o["eles["+e+"].loadingFail"]=!1,o["eles["+e+"].loading"]=!1,t.setData(o)}},fail:function(a){var n={};n["eles["+e+"].loadingFail"]=!0,n["eles["+e+"].loading"]=!1,t.setData(n)}})},this.newAppointmentInit=function(t,a,n){var o=e,i=a.data.eles[t].customFeature;i.trade_apt_id?(n.tpl_id=i.trade_apt_id,n.unit=i.unitType,o.getAptGoodsList(t,a,n,i)):b.appMethod.sendRequest({url:"/index.php?r=AppAppointment/GetUsedTpl",method:"POST",hideLoading:!0,chain:!0,subshop:a.franchiseeId||"",success:function(e){n.tpl_id=e.data.length?e.data[0].id:"",n.unit=e.data.length?e.data[0].unit:"",o.getAptGoodsList(t,a,n)},fail:function(e){var n={};n["eles["+t+"].loadingFail"]=!0,n["eles["+t+"].loading"]=!1,a.setData(n)}})},this.goodsListInit=function(e,t,a){var n=t.data.eles[e].customFeature,o=!1;b.appMethod.getInvolvedFromRefreshObject(n.id,"new-classify")&&(o=!0),o||b.appMethod.sendRequest({hideLoading:!0,url:"/index.php?r=AppShop/GetGoodsList",data:a,method:"post",chain:!0,subshop:t.franchiseeId||"",success:function(n){var o=b.appMethod.getAppId();if(0==n.status){for(var i in n.data){n.data[i].form_data.goods_model&&function(){var e=n.data[i].form_data.goods_model[0].price,t=void 0;n.data[i].form_data.goods_model.map(function(a){+e>=+a.price&&(e=a.price,t=a.virtual_price)}),n.data[i].form_data.virtual_price=t,n.data[i].form_data.price=e}(),n.data[i].form_data.discount=(10*n.data[i].form_data.price/n.data[i].form_data.virtual_price).toFixed(2);var s=(10*n.data[i].form_data.vip_min_price/n.data[i].form_data.virtual_price).toFixed(2);n.data[i].form_data.vip_discount=s<.01?.01:s,delete n.data[i].form_data.description,1!=+a.is_app_shop_cate_goods||n.data[i].form_data.app_id===o||t.franchiseeId?n.data[i].form_data.isSubShopGoods=!1:n.data[i].form_data.isSubShopGoods=!0}var r={};r["eles["+e+"].goods_data"]=n.data,r["eles["+e+"].is_more"]=n.is_more,r["eles["+e+"].curpage"]=1,r["eles["+e+"].loadingFail"]=!1,r["eles["+e+"].loading"]=!1,t.setData(r)}},fail:function(a){var n={};n["eles["+e+"].loadingFail"]=!0,n["eles["+e+"].loading"]=!1,t.setData(n)}}),"goods"===a.form&&b.appMethod.getAppECStoreConfig(function(a){var n={};n["eles["+e+"].storeStyle"]=a.color_config,t.setData(n)})},this._goodsScrollFunc=function(e){var t=b.appMethod.getAppCurrentPage(),a="object"==(void 0===e?"undefined":(0,i.default)(e))?e.currentTarget.dataset.compindex:e,n=t.data.eles[a],o=n.curpage+1,s=(n.customFeature,{}),r=n.param;if(n.is_more||"object"!=(void 0===e?"undefined":(0,i.default)(e))||"tap"!=e.type||b.appMethod.showModal({content:"已经加载到最后了"}),!n.loading&&n.is_more){if(s["eles["+a+"].loading"]=!0,s["eles["+a+"].loadingFail"]=!1,t.setData(s),"new_appointment"==r.form&&!r.tpl_id){var c={};return c["eles["+a+"].goods_data"]=[],c["eles["+a+"].is_more"]=0,void t.setData(c)}r.page=o,b.appMethod.sendRequest({url:"/index.php?r=AppShop/GetGoodsList",hideLoading:!0,data:r,method:"post",chain:!0,subshop:t.franchiseeId||"",success:function(e){var o={},i=b.appMethod.getAppId();for(var s in e.data){e.data[s].form_data.goods_model&&function(){var t=e.data[s].form_data.goods_model[0].price,a=void 0;e.data[s].form_data.goods_model.map(function(e){+t>=+e.price&&(t=e.price,a=e.virtual_price)}),e.data[s].form_data.virtual_price=a,e.data[s].form_data.price=t}(),e.data[s].form_data.discount=(10*e.data[s].form_data.price/e.data[s].form_data.virtual_price).toFixed(2);var c=(10*e.data[s].form_data.vip_min_price/e.data[s].form_data.virtual_price).toFixed(2);e.data[s].form_data.vip_discount=c<.01?.01:c,delete e.data[s].form_data.description,e.data[s].form_data.goods_model&&delete e.data[s].form_data.goods_model,1!=+r.is_app_shop_cate_goods||e.data[s].form_data.app_id===i||t.franchiseeId?e.data[s].form_data.isSubShopGoods=!1:e.data[s].form_data.isSubShopGoods=!0}1==e.current_page&&(n.goods_data=[]),o["eles["+a+"].goods_data"]=n.goods_data.concat(e.data),o["eles["+a+"].is_more"]=e.is_more,o["eles["+a+"].curpage"]=e.current_page,o["eles["+a+"].loading"]=!1,t.setData(o)},fail:function(){var e={};e["eles["+a+"].loadingFail"]=!0,e["eles["+a+"].loading"]=!1,t.setData(e)},complete:function(){}})}},this._refreshGoodsList=function(e,t,a){var n=a.data.eles[e].customFeature,o={};o["eles["+e+"].loading"]=!0,o["eles["+e+"].loadingFail"]=!1,o["eles["+e+"].is_more"]=1,o["eles["+e+"].goods_data"]=[],o["eles["+e+"].param"]=t,a.setData(o),t.page_size=n.loadingNum||10,"goods"===n.form&&n.isShowFranchiseeGoods&&!a.franchiseeId&&(t.is_app_shop_cate_goods=1,t.is_app_shop=1),b.appMethod.sendRequest({url:"/index.php?r=AppShop/GetGoodsList",method:"post",hideLoading:!0,data:t,chain:!0,subshop:a.franchiseeId||"",success:function(n){var o={},i=b.appMethod.getAppId();for(var s in n.data){n.data[s].form_data.goods_model&&function(){var e=n.data[s].form_data.goods_model[0].price,t=void 0;n.data[s].form_data.goods_model.map(function(a){+e>=+a.price&&(e=a.price,t=a.virtual_price)}),n.data[s].form_data.virtual_price=t,n.data[s].form_data.price=e}(),n.data[s].form_data.discount=(10*n.data[s].form_data.price/n.data[s].form_data.virtual_price).toFixed(2);var r=(10*n.data[s].form_data.vip_min_price/n.data[s].form_data.virtual_price).toFixed(2);n.data[s].form_data.vip_discount=r<.01?.01:r,n.data[s].form_data.goods_model&&delete n.data[s].form_data.goods_model,1==+t.is_app_shop_cate_goods&&n.data[s].form_data.app_id!==i?n.data[s].form_data.isSubShopGoods=!0:n.data[s].form_data.isSubShopGoods=!1}o["eles["+e+"].goods_data"]=n.data,o["eles["+e+"].is_more"]=n.is_more,o["eles["+e+"].curpage"]=1,o["eles["+e+"].scrollTop"]=0,o["eles["+e+"].loading"]=!1,o["eles["+e+"].loadingFail"]=!1,a.setData(o)},fail:function(t){var n={};n["eles["+e+"].loadingFail"]=!0,n["eles["+e+"].loading"]=!1,a.setData(n)}})},this.goodsScrollFunc=function(t){var a=b.appMethod.getAppCurrentPage(),n="object"==(void 0===t?"undefined":(0,i.default)(t))?t.currentTarget.dataset.compindex:t,o=a.data.eles[n];if(o.is_search){var s=o.searchEle;a.callComponentMethod({componentIndex:s,methodName:"searchList",argvs:[s,t]})}else e._goodsScrollFunc(t)},this.turnToGoodsDetail=function(e){var t=e.currentTarget.dataset,a=t.id,n=t.contact,o=t.goodsType,i=t.group,s=t.hidestock,r=t.isshowvirtualprice,c=t.unit,l=b.appMethod.getPageFranchiseeId(),d=l?"&franchisee="+l:"";if(t.appId&&t.appId!==b.appMethod.getAppId()&&""===d&&(d+="&franchisee="+t.appId),i&&1==i)return void b.appMethod.turnToPage("gpgoodsDetail?goods_id="+a+"&activity_id="+t.groupid+"&contact="+n+d);switch(+o){case 0:b.appMethod.turnToPage("goodsDetail?detail="+a+"&contact="+n+"&hidestock="+s+"&isShowVirtualPrice="+r+d);break;case 1:b.appMethod.turnToPage("goodsDetail?detail="+a+"&contact="+n+"&hidestock="+s+d);break;case 3:b.appMethod.turnToPage("toStoreDetail?detail="+a+d);break;case 10:c?b.appMethod.turnToPage("hotel?contact="+n+"&hidestock="+s+d):b.appMethod.turnToPage("newAppointmentDetail?detail="+a+"&contact="+n+"&hidestock="+s+d)}},this.showGoodsShoppingcart=function(e){e.stopPropagation(),e.currentTarget.dataset.appId&&e.currentTarget.dataset.appId!==b.appMethod.getAppId()?b.appMethod.showModal({content:"子店商品添加到购物车需要在商品详情页购物车购买",confirm:function(){b.appMethod.showGoodsShoppingcart(e)}}):b.appMethod.showGoodsShoppingcart(e)},this.showAddShoppingcart=function(e){e.stopPropagation(),e.currentTarget.dataset.appId&&e.currentTarget.dataset.appId!==b.appMethod.getAppId()?b.appMethod.showModal({content:"子店商品添加到购物车需要在商品详情页购物车购买",confirm:function(){b.appMethod.showAddShoppingcart(e)}}):b.appMethod.showAddShoppingcart(e)}};t.default=x},function(e,t){},function(e,t,a){"use strict";function n(e){var t=e.data,a=e.dynamicData,n=t.customFeature,s=(0,o.convertStyleData)(t.style),r=t.content,c=t.customFeature.segment;return a&&c&&(r=a[c]),React.createElement("div",{className:"custom-component button",style:s,onClick:function(){return(0,i.customEvent)({customFeature:n})}},r)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var o=a(6),i=a(15);a(608)},function(e,t){},function(e,t,a){"use strict";function n(e){var t=e.data,a=e.dynamicData,n=(0,s.convertStyleData)(e.data.style),o=(0,s.cssObj2DomObj)(e.data.customFeature),r={width:o.cellWidth+"%"},c={width:100-o.cellWidth+"%",borderLeftStyle:o.CellBorderStyle,borderLeftWidth:(0,s.transformPx2Rem)(o.CellBorderWidth,320),borderLeftColor:o.CellBorderColor},l=t.content;return React.createElement("div",{className:"custom-component layout-vessel",style:n},React.createElement("div",{className:"left-eles",style:r},l.leftEles.map(function(e,t){return React.createElement(i.default,{key:t,index:t,data:e,dynamicData:a})})),React.createElement("div",{className:"left-eles",style:c},l.rightEles.map(function(e,t){return React.createElement(i.default,{key:t,index:t,data:e,dynamicData:a})})))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var o=a(33),i=function(e){return e&&e.__esModule?e:{default:e}}(o),s=a(6);a(610)},function(e,t){},function(e,t,a){"use strict";function n(e){var t=e.data,a=e.dynamicData,n=t.customFeature,s=(0,o.convertStyleData)(t.style),r=t.content,c=t.customFeature.segment;a&&c&&(r=a[c]);var l={backgroundColor:n.markColor};return 0===n.mode?l.display="none":1===n.mode||3===n.mode?l.left="-"+(0,o.transformPx2Rem)(n["markMargin-right"],320):2===n.mode&&(l.marginTop=""+(0,o.transformPx2Rem)(n["markMargin-top"],320)),React.createElement("div",{className:"custom-component title-ele mode-"+n.mode,style:s,onClick:function(){return(0,i.customEvent)({customFeature:n})}},React.createElement("div",{className:"title-content"},React.createElement("div",{className:"title-text"},React.createElement("div",{className:"mark",style:l}),r)))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var o=a(6),i=a(15);a(612)},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(9),i=n(o),s=a(0),r=n(s),c=a(3),l=n(c),d=a(1),u=n(d),m=a(2),p=n(m),f=a(4),g=n(f),h=a(5),v=a(30),_=a(6),y=a(15),E=a(21);a(614);var b=function(e){function t(e){(0,r.default)(this,t);var a=(0,u.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));N.call(a);var n=e.index,o=h.appMethod.getAppCurrentPage();return a.init(n,o),a}return(0,p.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this,t=this.props.data,a=v.pageInstance.state.userInfo||{},n=t.customFeature,o={backgroundColor:n.backgroundColor,color:n.tabTextColor},i={backgroundColor:n.backgroundSelectColor,color:n.tabTextSelectColor,fontWeight:"bold",opacity:1},s=(0,_.convertStyleData)(t.style),r=function(e){return g.default.createElement(g.default.Fragment,null,e.imgs[0]&&4==e.style&&2!=e.article_type&&g.default.createElement("div",{className:"news-img-groups"},e.imgs&&e.imgs.map(function(t,n){return g.default.createElement("div",{className:"news-img",key:n},g.default.createElement("img",{src:a.cover_thumb||t,alt:""}),(e.form_data.url.video&&e.form_data.url.video.cover||e.form_data.video[0]&&e.form_data.video[0].video_url)&&g.default.createElement("div",{className:"icon-wrap"},g.default.createElement("label",{className:"ico-moon icon-news-video-play"})))})),e.media_id&&g.default.createElement("div",{className:"news-img-groups"},g.default.createElement("div",{className:"news-img "+(3==e.form_data.url.article.type?"audio-icon":"")},g.default.createElement("img",{src:e.form_data.url.article.cover||"",alt:""}),4==e.form_data.url.article.type&&g.default.createElement("div",{className:"icon-wrap"},g.default.createElement("label",{className:"ico-moon icon-news-video-play"})))),g.default.createElement("div",{className:"news-text"},g.default.createElement("div",{className:"news-title"},e.title),(0==e.style||4==e.style||5==e.style)&&g.default.createElement("div",{className:"news-text-bottom"},e.form_data.red_package.command&&g.default.createElement("img",{className:"red-pocket-icon",src:t.cdnUrl+"/zhichi_frontend/static/webapp/images/pocket/little_pocket.png",alt:""}),3==e.article_type?g.default.createElement("span",{className:"news-adver-tag"},"推荐"):g.default.createElement("span",null,e.comment_count,"评论"),g.default.createElement("span",null,e.publish_time))),e.imgs[0]&&4!=e.style&&2!=e.article_type?g.default.createElement("div",{className:"news-img-groups"},e.imgs&&e.imgs.map(function(t,a){return g.default.createElement("div",{className:"news-img",key:a},g.default.createElement("img",{src:t,mode:"aspectFill",alt:""}),(e.form_data.url.video&&e.form_data.url.video.cover||e.form_data.video[0]&&e.form_data.video[0].video_url)&&g.default.createElement("label",{className:"ico-moon icon-news-video-play"}))})):e.media_id||2!=e.article_type?null:g.default.createElement("div",{className:"news-link-groups"},e.form_data.url.article&&g.default.createElement("div",{className:"news-article-groups"},g.default.createElement("div",{className:"img-wrap"},g.default.createElement("img",{src:e.form_data.url.article.cover,mode:"aspectFill"}),e.form_data.url.article&&4==e.form_data.url.article.type&&g.default.createElement("div",{className:"icon-wrap"},g.default.createElement("label",{className:"ico-moon icon-news-video-play"}))),g.default.createElement("div",{className:"title-wrap"},e.form_data.url.article.title)),e.form_data.url.video&&g.default.createElement("div",{className:"news-video-groups"},g.default.createElement("img",{src:e.form_data.url.video.cover,mode:"aspectFill"}),(e.form_data.url.video&&e.form_data.url.video.cover||e.form_data.video[0]&&e.form_data.video[0].video_url)&&g.default.createElement("div",{className:"icon-wrap"},g.default.createElement("label",{className:"ico-moon icon-news-video-play"})))),0!=e.style&&4!=e.style&&5!=e.style&&g.default.createElement("div",{className:"news-text-bottom"},e.form_data.red_package.command&&g.default.createElement("img",{className:"red-pocket-icon",src:t.cdnUrl+"/zhichi_frontend/static/webapp/images/pocket/little_pocket.png"}),3==e.article_type?g.default.createElement("span",{className:"news-adver-tag"},"推荐"):g.default.createElement("span",null,e.comment_count,"评论"),g.default.createElement("span",null,e.publish_time)))};return g.default.createElement("div",{className:"custom-component news",style:s},n.isPartClassify&&g.default.createElement("div",{className:"news-tab",style:o},t.cateData&&t.cateData.map(function(a){return g.default.createElement("span",{key:a.id,style:t.selectedCateId===a.id?i:{},onClick:e.getNewsCateList,"data-compindex":e.props.index,"data-id":a.id},a.name)})),g.default.createElement("div",{className:"news-list"},t.newslist&&t.newslist.map(function(t,a){return g.default.createElement("div",{className:"news-item mode-"+t.style,key:a,onClick:e.turnToNewsDetail,"data-router":"newsDetail","data-id":t.id,"data-cateid":t.category_id,"data-isliked":t.is_liked,"data-recommend":t.is_recommend,"data-reward":t.is_reward,"data-article-type":t.article_type,"data-event-params":JSON.stringify(t.event_params||{})},r(t))}),t.pageObj&&t.pageObj.isLoading&&g.default.createElement(E.RequestStatus,{is:"requestLoading"}),t.pageObj&&t.pageObj.noMore&&0==t.newslist.length&&g.default.createElement(E.RequestStatus,{is:"requestNone",data:{data:"暂无资讯文章~"}}),t.pageObj&&t.pageObj.loadingFail&&g.default.createElement(E.RequestStatus,{is:"requestFail",data:{refreshEvent:"getNewsList",compindex:this.props.index}}),t.pageObj&&t.pageObj.noMore&&t.newslist.length>0&&t.customFeature.isShowFinishText&&g.default.createElement(E.RequestStatus,{is:"requestAll"})))}}]),t}(g.default.Component),N=function(){var e=this;this.init=function(t,a){var n=e,o=a.data.eles[t].customFeature,s=+o.newsClassifyId||"",r={};r["eles["+t+"].pageObj"]={isLoading:!1,noMore:!1,page:1},r["eles["+t+"].cdnUrl"]=h.appMethod.globalData.cdnUrl,a.setData(r),o.isPartClassify?s||o.isManualClassify?n.createNewsCateData(a,t,a.data.eles[t].content):h.appMethod.sendRequest({hideLoading:!0,url:"/index.php?r=AppNews/GetCategoryByPage",data:{page:-1},chain:!0,subshop:a.franchiseeId||"",success:function(e){n.createNewsCateData(a,t,e.data)},fail:function(){n.createNewsCateData(a,t,[])}}):(a.setData((0,i.default)({},"eles["+t+"].selectedCateId",s)),n.getNewsList({compindex:t,category_id:s,pageInstance:a,page:1}))},this.createNewsCateData=function(t,a,n,o){if(a){var i=n||[],s=t||h.appMethod.getAppCurrentPage(),r=o,c=[],l={};c=i.map(function(e){return{compindex:a,id:e.id||e.classifyId,name:e.name||e.classifyName}}),l["eles["+a+"].cateData"]=c,r||(r=c.length?c[0].id:""),l["eles["+a+"].selectedCateId"]=r,s.setData(l),e.getNewsList({compindex:a,category_id:r,pageInstance:s,page:1})}},this.getNewsList=function(e,t){e||(e={});var a=e.pageInstance||h.appMethod.getAppCurrentPage(),n=e.compindex,o=a.data.eles[n],i=e.category_id,s=e.search_value||"",r=o.pageObj,c=e.page||r.page||1,l=e.page_size||o.customFeature.loadingNum||10,d=o.newslist||[];void 0===i&&(i=o.selectedCateId);var u={};1==c&&(u["eles["+n+"].newslist"]=[],u["eles["+n+"].pageObj.noMore"]=!1),r.isLoading||r.noMore||(u["eles["+n+"].pageObj.isLoading"]=!0,u["eles["+n+"].pageObj.loadingFail"]=!1,a.setData(u),h.appMethod.sendRequest({url:"/index.php?r=AppNews/GetArticleByPage",data:{category_id:i,orderby:"add_time",page:c,search_value:s,page_size:l},method:"post",chain:!0,subshop:a.franchiseeId||"",hideLoading:!0,success:function(e){if(0==e.status){var t=e.data,o={};t=t.map(function(e){return e.wechat_id?e:(e.form_data.url.article&&3==e.form_data.url.article.type&&(e.form_data.url.article.cover=h.appMethod.globalData.cdnUrl+"/zhichi_frontend/static/webapp/images/audio_default.png"),e.form_data.event.action?e.event_params=e.form_data.event:e.event_params="",2==e.article_type&&e.form_data.url.article&&delete e.form_data.url.article.body,e.content&&delete e.content,e.form_data.recommend&&delete e.form_data.recommend,e.media_id&&(e.style=4),e)}),d=1==r.page?t:d.concat(t),o["eles["+n+"].newslist"]=d,a.setData(o),0==e.is_more&&(r.noMore=!0),r.isLoading=!1,r.loadingFail=!1,r.page++}},fail:function(){r.loadingFail=!0},complete:function(e){r.isLoading=!1;var o={};o["eles["+n+"].pageObj"]=r,a.setData(o),"function"==typeof t&&t(e)}}))},this.getNewsCateList=function(t){var a=h.appMethod.getAppCurrentPage(),n=t.currentTarget.dataset,o=n.compindex,i=n.id,s={isLoading:!1,noMore:!1,page:1},r={};r["eles["+o+"].pageObj"]=s,r["eles["+o+"].selectedCateId"]=i,r["eles["+o+"].newslist"]=[],a.setData(r),e.getNewsList({compindex:o,category_id:i,pageInstance:a})},this.turnToNewsDetail=function(e){if(3==e.currentTarget.dataset.articleType){var t=JSON.parse(e.currentTarget.dataset.eventParams);return void(0,y.customEvent)({customFeature:t})}var a=e.currentTarget.dataset.id,n=h.appMethod.getPageFranchiseeId(),o=n?"&franchisee="+n:"";h.appMethod.turnToPage("/informationManagement/pages/newsDetail/newsDetail?detail="+a+o)},this._refreshNewsList=function(e,t,a){var n;a.setData((n={},(0,i.default)(n,"eles["+e+"].pageObj",{isLoading:!1,noMore:!1,page:1}),(0,i.default)(n,"eles["+e+"].selectedCateId",t.idx_arr.idx_value),n)),customComponent.news.getNewsList({page:1,compid:e,category_id:t.idx_arr.idx_value})}};t.default=b},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.data,a=e.dynamicData,n=t.customFeature,o=(0,u.convertStyleData)(t.style),i={borderRadius:(0,u.transformPx2Rem)(n.picBorderRadius,320)},r=(0,u.transformPx2Rem)(t.style.height,320),l=t.content,g=t.customFeature.segment;a&&g&&(l=a[g]);var h=function(e){var t=m.appMethod.getAppCurrentPage(),a=e.currentTarget.dataset.compindex;t.setData((0,d.default)({},"eles["+a+"].videoUrl",""))};return React.createElement("div",{className:"custom-component carousel",style:o},React.createElement(s.default,{autoplay:n.autoplay,autoplayInterval:1e3*n.interval,vertical:n.vertical,infinite:!0,dotStyle:{background:n.indicatorColor},dotActiveStyle:{background:n.indicatorActiveColor}},l.map(function(t,a){return React.createElement("div",{className:"carousel-item",key:a,href:"",style:i,onClick:function(){return(0,p.customEvent)({customFeature:(0,c.default)({},t.customFeature,{compindex:e.index})})}},React.createElement("img",{src:t.pic,alt:t.name,style:{height:r}}),"video-play"==t.customFeature.action&&React.createElement("div",{className:"ico-moon icon-play video-play"}))})),0==t.content.length&&React.createElement(f.RequestStatus,{is:"requestNone",data:{data:"你还未添加轮播项~"}}),!!t.videoUrl&&React.createElement("div",{className:"carousel-video-play"},React.createElement("div",{className:"inner",style:{marginTop:(0,u.transformPx2Rem)(t.carouselVideoTop,320)}},React.createElement("div",{className:"icon-moon icon-closes close",onClick:h,"data-compindex":e.index}),React.createElement("video",{src:t.videoUrl,controls:!0,preload:"meta"}))))}Object.defineProperty(t,"__esModule",{value:!0});var i=a(26),s=n(i),r=a(8),c=n(r),l=a(9),d=n(l);t.default=o,a(27);var u=a(6),m=a(5),p=a(15),f=a(21);a(616)},function(e,t){},function(e,t,a){"use strict";function n(e){var t=e.data,a=(0,o.convertStyleData)(t.style);return React.createElement("div",{className:"custom-component breakline",style:a})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var o=a(6);a(618)},function(e,t){},function(e,t,a){"use strict";function n(e){var t=e.data,a=(0,s.convertStyleData)(e.data.style),n=t.content;return React.createElement("div",{className:"custom-component static-vessel",style:a},n.map(function(e,t){return React.createElement(i.default,{key:t,index:t,data:e})}))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var o=a(33),i=function(e){return e&&e.__esModule?e:{default:e}}(o),s=a(6);a(620)},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(0),i=n(o),s=a(3),r=n(s),c=a(1),l=n(c),d=a(2),u=n(d),m=a(4),p=n(m),f=a(6);a(622);var g=function(e){function t(e){(0,i.default)(this,t);var a=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={isPlay:!1,duration:0,currentTime:0},a.changeIsPlay=function(){var e=a.audioRef.current,t=a.state.isPlay;a.setState({isPlay:!t}),t?e.pause():e.play()},a.setAudioDuration=function(){a.setState({duration:a.audioRef.current.duration})},a.setCurrentTime=function(){var e=a.audioRef.current;a.setState({currentTime:e.currentTime}),e.currentTime==e.duration&&a.setState({isPlay:!1})},a.audioRef=p.default.createRef(),a}return(0,u.default)(t,e),(0,r.default)(t,[{key:"millisecondToDate",value:function(e){var t=Math.floor(e%60),a=Math.floor(e/60);return(a>=10?a:"0"+a)+":"+(t>=10?t:"0"+t)}},{key:"render",value:function(){var e=this.props.data,t=this.props.dynamicData,a=e.customFeature,n=(0,f.convertStyleData)(e.style),o=(e.content,e.customFeature.segment);return t&&o&&t[o],p.default.createElement("div",{className:"custom-component audio",style:n,onClick:this.changeIsPlay},p.default.createElement("div",{className:"poster"},p.default.createElement("img",{src:a["background-thumb"]}),p.default.createElement("div",{className:"control"},p.default.createElement("span",{className:this.state.isPlay?"pause":"play"}))),p.default.createElement("div",{className:"content"},p.default.createElement("div",{className:"name"},a["file-name"]),p.default.createElement("div",{className:"author"},a.audioAuthor),p.default.createElement("div",{className:"time"},0===this.state.currentTime?this.millisecondToDate(this.state.duration):this.millisecondToDate(this.state.currentTime))),p.default.createElement("audio",{ref:this.audioRef,src:a["file-src"],preload:"metadata",onCanPlay:this.setAudioDuration,onError:this.setAudioDuration,onTimeUpdate:this.setCurrentTime}))}}]),t}(p.default.Component);t.default=g},function(e,t){},function(e,t,a){"use strict";function n(e){var t=e.data,a=e.dynamicData,n=t.customFeature,s=(0,o.convertStyleData)(t.style);if(n.isSideslip){s.paddingRight=(0,o.transformPx2Rem)(t.customFeature["padding-left"],320);var r=null;0===n.mode?r=parseInt(t.customFeature.imgHeight)+2*parseInt(t.customFeature["padding-top"]):1===n.mode&&(r=parseInt(t.customFeature.imgHeight)+1.6*(parseInt(n.textHeight)||14)+2*parseInt(t.customFeature["padding-top"])),s.height=(0,o.transformPx2Rem)(r,320)}else s.paddingBottom=(0,o.transformPx2Rem)(t.customFeature["padding-top"],320);var c=null;if(n.isSideslip)c=(0,o.transformPx2Rem)(t.customFeature.width,320);else{var l=(320-parseInt(t.customFeature["padding-left"])*(parseInt(t.customFeature.col)+1))/parseInt(t.customFeature.col);c=(0,o.transformPx2Rem)(l,320)}var d={width:c,marginTop:(0,o.transformPx2Rem)(t.customFeature["padding-top"],320),marginLeft:(0,o.transformPx2Rem)(t.customFeature["padding-left"],320)},u={height:(0,o.transformPx2Rem)(t.customFeature.imgHeight,320),borderRadius:(0,o.transformPx2Rem)(t.customFeature.picBorderRadius,320)},m=t.content,p=t.customFeature.segment;return a&&p&&(m=a[p]),React.createElement("div",{className:"custom-component album mode-"+n.mode+" "+(n.isSideslip&&"sideslip"),style:s},m.map(function(e,t){return React.createElement("div",{className:"album-item",key:t,style:d,onClick:function(){return(0,i.customEvent)({customFeature:e.customFeature})}},React.createElement("img",{style:u,src:e.pic,alt:e.title}),React.createElement("div",{className:"title"},e.title))}))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var o=a(6),i=a(15);a(624)},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.data,a=(0,l.convertStyleData)(t.style),n=t.customFeature;a.height=(0,l.transformPx2Rem)(n.height,320),a.width=(0,l.transformPx2Rem)(n.width,320);var o=-1!==n.selectImg.indexOf("announce")?"icon-"+n.selectImg:"",i={color:n.lineBackgroundColor,backgroundImage:""===o?"url("+n.selectImg+")":""},r=t.content;return React.createElement("div",{className:"custom-component announce",style:a},0===n.mode&&React.createElement(c.default,{marqueeProps:{loop:!0,fps:10/n.interval*20,leading:500,trailing:500},icon:React.createElement("span",{className:o+" announce-icon",style:i})},r.map(function(e,t){return React.createElement("span",{className:"announce-text",key:t,onClick:function(){return(0,d.customEvent)({customFeature:n})}},e.secContent)})),1===n.mode&&React.createElement("div",{className:"announce-vertical"},React.createElement("span",{className:o+" announce-icon",style:i}),React.createElement(s.default,{vertical:!0,dots:!1,dragging:!1,swiping:!1,autoplay:!0,infinite:!0,autoplayInterval:n.interval+"000"},r.map(function(e,t){return React.createElement("span",{className:"announce-text",key:t,onClick:function(){return(0,d.customEvent)({customFeature:n})}},e.secContent)}))))}Object.defineProperty(t,"__esModule",{value:!0});var i=a(26),s=n(i),r=a(626),c=n(r);t.default=o,a(27),a(628);var l=a(6),d=a(15);a(630)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(8),i=n(o),s=a(0),r=n(s),c=a(3),l=n(c),d=a(1),u=n(d),m=a(2),p=n(m),f=a(10),g=n(f),h=a(4),v=n(h),_=a(44),y=n(_),E=a(627),b=n(E),N=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&(a[n[o]]=e[n[o]]);return a},R=function(e){function t(e){(0,r.default)(this,t);var a=(0,u.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.onClick=function(){var e=a.props,t=e.mode,n=e.onClick;n&&n(),"closable"===t&&a.setState({show:!1})},a.state={show:!0},a}return(0,p.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this.props,t=e.mode,a=e.icon,n=e.onClick,o=e.children,s=e.className,r=e.prefixCls,c=e.action,l=e.marqueeProps,d=N(e,["mode","icon","onClick","children","className","prefixCls","action","marqueeProps"]),u={},m=null;"closable"===t?m=v.default.createElement("div",{className:r+"-operation",onClick:this.onClick,role:"button","aria-label":"close"},c||v.default.createElement(y.default,{type:"cross",size:"md"})):("link"===t&&(m=v.default.createElement("div",{className:r+"-operation",role:"button","aria-label":"go to detail"},c||v.default.createElement(y.default,{type:"right",size:"md"}))),u.onClick=n);var p=(0,g.default)(r,s);return this.state.show?v.default.createElement("div",(0,i.default)({className:p},d,u,{role:"alert"}),a&&v.default.createElement("div",{className:r+"-icon","aria-hidden":"true"},a),v.default.createElement("div",{className:r+"-content"},v.default.createElement(b.default,(0,i.default)({prefixCls:r,text:o},l))),m):null}}]),t}(v.default.Component);t.default=R,R.defaultProps={prefixCls:"am-notice-bar",mode:"",icon:v.default.createElement(y.default,{type:"voice",size:"xxs"}),onClick:function(){}},e.exports=t.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(8),i=n(o),s=a(0),r=n(s),c=a(3),l=n(c),d=a(1),u=n(d),m=a(2),p=n(m),f=a(4),g=n(f),h=a(24),v=n(h),_=function(e){function t(){(0,r.default)(this,t);var e=(0,u.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.state={animatedWidth:0,overflowWidth:0},e}return(0,p.default)(t,e),(0,l.default)(t,[{key:"componentDidMount",value:function(){this._measureText(),this._startAnimation()}},{key:"componentDidUpdate",value:function(){this._measureText(),this._marqueeTimer||this._startAnimation()}},{key:"componentWillUnmount",value:function(){clearTimeout(this._marqueeTimer)}},{key:"render",value:function(){var e=this,t=this.props,a=t.prefixCls,n=t.className,o=t.text,s=(0,i.default)({position:"relative",right:this.state.animatedWidth,whiteSpace:"nowrap",display:"inline-block"},this.props.style);return g.default.createElement("div",{className:a+"-marquee-wrap "+n,style:{overflow:"hidden"},role:"marquee"},g.default.createElement("div",{ref:function(t){return e.textRef=t},className:a+"-marquee",style:s},o))}},{key:"_startAnimation",value:function(){var e=this;this._marqueeTimer&&window.clearTimeout(this._marqueeTimer);var t=this.props.fps,a=1/t*1e3,n=0===this.state.animatedWidth,o=n?this.props.leading:a,i=function t(){var n=e.state.overflowWidth,o=e.state.animatedWidth+1,i=o>n;if(i){if(!e.props.loop)return;o=0}i&&e.props.trailing?e._marqueeTimer=window.setTimeout(function(){e.setState({animatedWidth:o}),e._marqueeTimer=window.setTimeout(t,a)},e.props.trailing):(e.setState({animatedWidth:o}),e._marqueeTimer=window.setTimeout(t,a))};0!==this.state.overflowWidth&&(this._marqueeTimer=window.setTimeout(i,o))}},{key:"_measureText",value:function(){var e=v.default.findDOMNode(this),t=this.textRef;if(e&&t){var a=e.offsetWidth,n=t.offsetWidth,o=n-a;o!==this.state.overflowWidth&&this.setState({overflowWidth:o})}}}]),t}(g.default.Component);t.default=_,_.defaultProps={text:"",loop:!1,leading:500,trailing:800,fps:40,className:""},e.exports=t.default},function(e,t,a){"use strict";a(19),a(45),a(629)},function(e,t){},function(e,t){},function(e,t,a){"use strict";function n(e){var t=e.data,a=e.dynamicData,n=t.customFeature,s=(0,o.convertStyleData)(t.style),r={marginBottom:(0,o.transformPx2Rem)(t.customFeature.margin,320),backgroundColor:t.customFeature.lineBackgroundColor,backgroundImage:t.customFeature.lineBackgroundImage,height:(0,o.transformPx2Rem)(t.customFeature.lineHeight,320)},c={width:(0,o.transformPx2Rem)(t.customFeature.imgWidth,320),height:(0,o.transformPx2Rem)(t.customFeature.imgHeight,320)},l={};0===t.customFeature.mode&&(l.width="calc(100% - "+c.width+")");var d={color:t.customFeature.secColor,fontSize:(0,o.transformPx2Rem)(t.customFeature.secFontSize,320),fontStyle:t.customFeature.secFontStyle,fontWeight:t.customFeature.secFontWeight,textAlign:t.customFeature.secTextAlign,textDecoration:t.customFeature.secTextDecoration},u=t.content,m=t.customFeature.segment;return a&&m&&(u=a[m]),React.createElement("div",{className:"custom-component list mode-"+n.mode,style:s},u.map(function(e,t){return React.createElement("div",{className:"list-item",key:t,style:r,onClick:function(){return(0,i.customEvent)({customFeature:e.customFeature})}},React.createElement("img",{style:c,src:e.pic,alt:e.title}),React.createElement("div",{className:"title-container",style:l},React.createElement("div",{className:"title"},e.title),React.createElement("div",{className:"sec-title",style:d},e.secTitle)))}))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var o=a(6),i=a(15);a(632)},function(e,t){},function(e,t,a){"use strict";function n(e){var t=e.data,a=(0,o.convertStyleData)(t.style),n={backgroundImage:a.backgroundImage,backgroundColor:a.backgroundColor,bottom:a.bottom,right:a.right,opacity:a.opacity},s={fontSize:a.fontSize,fontStyle:a.fontStyle,fontWeight:a.fontWeight,color:a.color,textDecoration:a.textDecoration},r=t.customFeature,c={margin:(0,o.transformPx2Rem)(r.margin/2,320)},l={borderRadius:t.style["border-radius"]?t.style["border-radius"].replace("px","")+"%":t.style["border-radius"],width:(0,o.transformPx2Rem)(r["img-size"],320),height:(0,o.transformPx2Rem)(r["img-size"],320)},d=t.content;return React.createElement("div",{className:"custom-component suspension mode-"+r.mode,style:n},d.map(function(e,t){return React.createElement("div",{className:"suspension-btn",key:t,style:c,onClick:function(){return(0,i.customEvent)({customFeature:e.customFeature})}},r.openIcon&&React.createElement("img",{className:"btn-icon",style:l,src:e.pic,alt:""}),r.openText&&React.createElement("span",{style:s},e.title))}))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var o=a(6),i=a(15);a(634)},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(0),i=n(o),s=a(3),r=n(s),c=a(1),l=n(c),d=a(2),u=n(d),m=a(4),p=n(m),f=a(6),g=a(38),h=a(34);a(636);var v=function(e){function t(e){(0,i.default)(this,t);var a=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={hidden:!1,videoUrl:null,videoPic:null,playing:!1},a.getVideoLibrary=function(){var e=a.props.data.customFeature,t={app_id:(0,g.getAppId)(),id:e["video-id"]};(0,h.ajax)({url:"/index.php?r=AppVideo/GetVideoLibUrl",data:t,success:function(t){0===t.status&&(1==t.data.is_deleted?a.setState({hidden:!0}):a.setState({videoUrl:t.data,videoPic:e["video-pic"]}))}})},a.getVideoProject=function(){var e=a.props.data.customFeature,t={app_id:(0,g.getAppId)(),id:e.videoProjectId};(0,h.ajax)({url:"/index.php?r=AppVideo/GetProjectInfo",data:t,success:function(t){0===t.status&&(1==t.data.is_deleted?a.setState({hidden:!0}):a.setState({videoUrl:t.data.video_url,videoPic:e.preview_img}))}})},a.getTencentVideo=function(){var e=a.props.data.customFeature,t={app_id:(0,g.getAppId)(),argv:e.vid};(0,h.ajax)({url:"/index.php?r=AppNews/GetVideoUrl",data:t,success:function(e){0===e.status&&a.setState({videoUrl:e.data})}})},a.videoPlay=function(){a.videoRef.current.play(),a.setState({playing:!0})},a.videoRef=p.default.createRef(),a}return(0,u.default)(t,e),(0,r.default)(t,[{key:"componentDidMount",value:function(){var e=this.props.data.customFeature;switch(e.usage){case"xcx":this.setState({videoUrl:e.videoSourceUrl});break;case"videoLibrary":this.getVideoLibrary();break;case"videoProject":this.getVideoProject();break;case"tencentVideo":this.getTencentVideo();break;case"webapp":default:this.setState({videoUrl:this.props.data.content})}}},{key:"render",value:function(){var e=this,t=this.props.data,a=this.props.dynamicData,n=t.customFeature,o=(0,f.convertStyleData)(t.style),i=(t.content,t.customFeature.segment);a&&i&&a[i];return!this.state.hidden&&p.default.createElement("div",{className:"custom-component video",style:o},function(t){var a=p.default.createElement("video",{ref:e.videoRef,src:e.state.videoUrl,controls:!0,preload:"meta"}),n=!e.state.playing&&p.default.createElement("div",{className:"cover-wrap",onClick:e.videoPlay},p.default.createElement("img",{className:"cover",src:e.state.videoPic}),p.default.createElement("span",{className:"icon-play"}));switch(t){case"xcx":case"tencentVideo":return a;case"videoLibrary":case"videoProject":return p.default.createElement(p.default.Fragment,null,a,n);case"webapp":default:return e.state.videoUrl}}(n.usage))}}]),t}(p.default.Component);t.default=v},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(8),i=n(o),s=a(9),r=n(s),c=a(0),l=n(c),d=a(3),u=n(d),m=a(1),p=n(m),f=a(2),g=n(f),h=a(4),v=n(h),_=a(5),y=a(6),E=a(15);a(638);var b=function(e){function t(e){(0,l.default)(this,t);var a=(0,p.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.unfoldSus=function(e){var t=_.appMethod.getAppCurrentPage(),a=e.currentTarget.dataset.compindex,n=e.currentTarget.dataset.taptype;t.setData((0,r.default)({},"eles["+a+"].customFeature.buttonHidden","heightSus"===n))},a}return(0,g.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this.props.data,t=e.customFeature,a=(0,i.default)({},(0,y.convertStyleData)(e.style),{bottom:(0,y.transformPx2Rem)(_.appMethod.isTabBarPage()?parseInt(e.style.bottom)+48:e.style.bottom,320)}),n={borderRadius:(0,y.transformPx2Rem)(t["border-radius"],320)};t.backgroundType?n.background=t.lineBackgroundImage:n.backgroundColor=t.lineBackgroundColor,t.pickUpType,t.suspensionShowList.length>2&&t.pickUpType;var o={marginTop:t["margin-bottom"],marginBottom:t["margin-bottom"]};t.suspensionShowList.length==e.content.length&&(o.marginLeft=t["margin-right"],o.marginRight=t["margin-right"]),o=(0,y.convertStyleData)(o);var s={width:(0,y.transformPx2Rem)(t["icon-size"],320),height:(0,y.transformPx2Rem)(t["icon-size"],320),borderRadius:(0,y.transformPx2Rem)(t["icon-radius"],320),opacity:t["icon-opacity"]},r={background:t.pickUpIcon||"",backgroundSize:"contain"},c={width:(0,y.transformPx2Rem)(t.navigationWidth,320),height:(0,y.transformPx2Rem)(t.navigationHeight,320),right:(0,y.transformPx2Rem)(t.navigationRight,320),bottom:(0,y.transformPx2Rem)(_.appMethod.isTabBarPage()?parseInt(t.navigationBottom)+48:t.navigationBottom,320),opacity:t.opacity},l={background:e.customFeature.spreadIcon||"",backgroundSize:"contain",width:"100%",height:"100%",borderRadius:(0,y.transformPx2Rem)(t.navigationRadius,320)};e.content;return v.default.createElement("div",{className:"custom-component new-suspension"},v.default.createElement("div",{className:"newSuspension",style:a},v.default.createElement("div",{className:"newSuspension-wrap "+("left"==e.customFeature.pickUpLocation?"":"newSuspension-right")+" "+(1==e.customFeature.pickUpType?"":"newSuspension-round")+" "+(1==e.customFeature.structure?"":"newSuspension-structure"),style:n},v.default.createElement("div",{className:"newSuspension-box "+(t.buttonHidden?"":"newSuspension-hiddenBtn"),style:{padding:t.suspensionShowList.length==e.content.length?".20rem 0":""}},t.suspensionShowList&&t.suspensionShowList.map(function(e,t){return v.default.createElement("div",{key:t,className:"newSuspension-item-box"},e.map(function(e,t){return v.default.createElement("div",{key:t,className:"newSuspension-item",style:o,onClick:function(){return(0,E.customEvent)({customFeature:e.customFeature})}},v.default.createElement("img",{src:e.pic,style:s}),v.default.createElement("span",{className:"item-name"},e.title))}))}),1==t.pickUpType&&1==t.structure&&v.default.createElement("div",{className:"newSuspension-btmBar "+(t.suspensionShowList.length==e.content.length?"marginAuto":"float"),onClick:this.unfoldSus,"data-compindex":this.props.index,"data-taptype":"foldSus"},v.default.createElement("div",{className:"unfoldBtn",style:r})),1==t.pickUpType&&2==t.structure&&v.default.createElement("div",{className:"newSuspension-close",onClick:this.unfoldSus,"data-compindex":this.props.index,"data-taptype":"foldSus",style:{background:t.pickUpIcon,backgroundSize:"contain"}},v.default.createElement("div",{className:"unfoldBtn",style:r})),2==t.pickUpType&&"left"==t.pickUpLocation&&v.default.createElement("div",{className:"newSuspension-sideBar",onClick:this.unfoldSus,"data-compindex":this.props.index,"data-taptype":"foldSus",style:{background:t.pickUpIcon,backgroundSize:"contain"}},v.default.createElement("div",{className:"unfoldBtn",style:r})),2==t.pickUpType&&"right"==t.pickUpLocation&&v.default.createElement("div",{className:"sideBarRight",onClick:this.unfoldSus,"data-compindex":this.props.index,"data-taptype":"foldSus",style:{background:t.pickUpIcon,backgroundSize:"contain"}},v.default.createElement("div",{className:"unfoldBtn",style:r}))))),!t.buttonHidden&&v.default.createElement("div",{className:"sideBarRightOut "+(1==t.pickUpType?"roundBar":"")+" "+(1==t.pickUpType?"":"newSuspension-round")+" "+(1==t.structure?"":"newSuspension-structure"),"data-compindex":this.props.index,style:c,onClick:this.unfoldSus,"data-taptype":"heightSus"},v.default.createElement("div",{className:"unfoldBtn",style:l})))}}]),t}(v.default.Component);t.default=b},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(0),i=n(o),s=a(3),r=n(s),c=a(1),l=n(c),d=a(2),u=n(d),m=a(4),p=n(m),f=a(33),g=n(f),h=a(6),v=a(5);a(640);var _=function(e){function t(e){(0,i.default)(this,t);var a=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));y.call(a);var n=e.index,o=v.appMethod.getAppCurrentPage();return a.init(n,o),a}return(0,u.default)(t,e),(0,r.default)(t,[{key:"render",value:function(){var e=this.props.data,t=this.props.dynamicData,a=e.customFeature,n=(0,h.convertStyleData)(e.style),o={backgroundColor:a.maskBackgroundColor,opacity:a.maskOpacity},i=e.content,s=e.customFeature.segment;return t&&s&&(i=t[s]),e.showPopupWindow?p.default.createElement("div",{className:"custom-component popup-window"},p.default.createElement("div",{className:"popup-window-mask",style:o,onClick:this.tapMaskClosePopupWindow,"data-compindex":this.props.index}),p.default.createElement("div",{className:"popup-window-content",style:n},i.map(function(e,a){return p.default.createElement(g.default,{key:a,index:a,data:e,dynamicData:t})}))):null}}]),t}(p.default.Component),y=function(){var e=this;this.init=function(t,a,n){n||e.controlAutoPopupWindow(t,a)},this.controlAutoPopupWindow=function(t,a){var n=e,o={},i=a.data.eles[t],s=i.customFeature;if(!0===s.autoPopup){if("everyDay"===s.popupScene||"firstAuthorize"===s.popupScene){if(!v.appMethod.globalData.firstLoginAppChecked)return void v.appMethod.sendRequest({hideLoading:!0,url:"/index.php?r=AppData/CheckFirstLoginApp",success:function(e){v.appMethod.globalData.firstAuthorize=e.data.isAppFirstLogin,v.appMethod.globalData.dailyFirstLogin=e.data.isDailyFirstLogin,v.appMethod.globalData.firstLoginAppChecked=!0,n.controlAutoPopupWindow(t,a)}});(v.appMethod.globalData.firstAuthorize&&"firstAuthorize"===s.popupScene||v.appMethod.globalData.dailyFirstLogin&&"everyDay"===s.popupScene)&&(a.data.eles[t].alreadyShown||(o["eles["+t+"].showPopupWindow"]=!0,o["eles["+t+"].alreadyShown"]=!0,a.setData(o)))}else"everyTime"===s.popupScene&&(o["eles["+t+"].showPopupWindow"]=!0,a.setData(o));!0===s.autoClose&&setTimeout(function(){o["eles["+t+"].showPopupWindow"]=!1,a.setData(o)},1e3*+s.closeDelay)}},this.tapMaskClosePopupWindow=function(e){var t=v.appMethod.getAppCurrentPage(),a=e.currentTarget.dataset.compindex,n=t.data.eles[a],o={};!0===n.customFeature.tapMaskClose&&(o["eles["+a+"].showPopupWindow"]=!1,t.setData(o))}};t.default=_},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(9),i=n(o),s=a(26),r=n(s),c=a(8),l=n(c),d=a(0),u=n(d),m=a(3),p=n(m),f=a(1),g=n(f),h=a(2),v=n(h);a(27);var _=a(4),y=n(_),E=a(5),b=a(6),N=a(11),R=a(33),k=n(R);a(642);var w=function(e){function t(e){(0,u.default)(this,t);var a=(0,g.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));x.call(a);var n=e.index,o=E.appMethod.getAppCurrentPage();return a.init(n,o),a}return(0,v.default)(t,e),(0,p.default)(t,[{key:"render",value:function(){var e=this,t=this.props.data,a=this.props.dynamicData,n=t.customFeature,o=(0,b.convertStyleData)(t.style),i=(0,l.default)({},o,{height:"auto",width:"auto",marginRight:(0,b.transformPx2Rem)(t.style["margin-left"],320)}),s=(0,l.default)({marginLeft:t.customFeature.style["margin-left"],marginRight:t.customFeature.style["margin-right"]},(0,b.convertStyleData)({"font-size":n.secFontSize,"font-weight":n.secFontWeight||"normal","font-style":n.secFontStyle||"normal","text-decoration":n.secTextDecoration||"none",color:n.secColor,"text-align":n.secTextAlign})),c=(0,l.default)({},(0,b.convertStyleData)(n.style),{marginTop:(0,b.transformPx2Rem)(n.style["margin-bt"]),marginBottem:(0,b.transformPx2Rem)(n.style["margin-bt"])}),d=t.content||[];return y.default.createElement("div",{className:"custom-component sliding-panel vessel-mode-"+(n.vesselMode||1)},1===n.vesselMode&&y.default.createElement("div",{className:"slide mode-"+n.mode+" dots-"+n.navigateMode,style:o},y.default.createElement(r.default,{autoplay:n.autoplay,autoplayInterval:1e3*n.interval,infinite:!0,dots:-1!==n.mode,dotStyle:{background:n.navigateDefaultColor},dotActiveStyle:{background:n.navigateActiveColor}},d.map(function(e,t){return y.default.createElement("div",{className:"panel",key:t,style:{height:o.height}},e.content.map(function(e,t){return y.default.createElement(k.default,{key:t,data:e,dynamicData:a})}))}))),2===n.vesselMode&&y.default.createElement(N.ScrollView,{"scroll-x":!0,className:"slide-panel silde-panel-mode2",id:"sliding-panel-"+this.props.index,style:i,bindscroll:this.slidePanelScrollEvent,"data-compindex":this.props.index,"data-offset-left-arr":JSON.stringify(t.offsetLeftArr||[]),"data-active-index":JSON.stringify(t.activeIndex||0),"data-container-offset-width":JSON.stringify(t.containerOffsetWidth)},t.content.map(function(n,o){return y.default.createElement("div",{className:"sildeItem",key:o,style:{transform:"scale("+(o==t.activeIndex?1:t.scaleDegree)+")"},"data-compindex":e.props.index},!!t.customFeature.isShowTitle&&y.default.createElement("div",{className:"sildeItem-title",style:s},n.title||n.name),y.default.createElement("div",{className:"sildeItem-main",style:c},n.content.map(function(e,t){return y.default.createElement(k.default,{key:t,data:e,dynamicData:a})})),!!t.customFeature.isShowNum&&y.default.createElement("div",{className:"sildeItem-pagination"},o+1+"/"+t.content.length))})))}}]),t}(y.default.Component),x=function(){var e=this;this.init=function(t,a){var n=e.props.data;if(clearInterval(n.slideInterval),a.setData((0,i.default)({},"eles["+t+"].customFeature.slideIndex",0)),n.customFeature.autoplay&&n.customFeature.interval&&e.slideSwiper({pageInstance:a,compindex:t}),2===n.customFeature.vesselMode){var o,s=n.customFeature,r=1;s.proportion>1&&(r=Math.round(100/s.proportion)/100),a.setData((o={},(0,i.default)(o,"eles["+t+"].activeIndex",0),(0,i.default)(o,"eles["+t+"].scaleDegree",r),(0,i.default)(o,"eles["+t+"].reference",s.reference||.618),o)),e.slidePanelSetBoundingClientRectInfo(a,t)}},this.slideSwiper=function(t){var a=t.pageInstance.data[t.compindex];t.pageInstance.data[t.compindex].slideInterval=setInterval(function(){var n=a.customFeature.slideIndex;n>=a.content.length?n=0:n+=1,e.slideAnimation({compindex:t.compindex,num:n,pageInstance:t.pageInstance,direction:"_interval"})},1e3*a.customFeature.interval)},this.slidePanelSetBoundingClientRectInfo=function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=arguments[2];if(-1!==a){var o=e,i=t||E.appMethod.getAppCurrentPage(),s={},r="#sliding-panel-"+a,c=r+" .sildeItem";E.appMethod.getBoundingClientRect(r,function(e){if(!e.length)return isNaN(n)&&(n=0),void(n<10&&setTimeout(function(){o.slidePanelSetBoundingClientRectInfo(i,a,++n)},300));var t=e.shift().width;s["eles["+a+"].containerOffsetWidth"]=t,E.appMethod.getBoundingClientRect(c,function(e){var r=[],c=e.length&&e[0].width||0;if((0==t||0==c)&&(isNaN(n)||n<10))return isNaN(n)&&(n=0),void setTimeout(function(){o.slidePanelSetBoundingClientRectInfo(i,a,++n)},300);r=e.map(function(e,t){return c*(t+1)}),s["eles["+a+"].offsetLeftArr"]=r,i.setData(s)})})}},this.slidePanelStart=function(e){var t=E.appMethod.getAppCurrentPage(),a=e.currentTarget.dataset.compindex,n=e.changedTouches[0].clientX;clearInterval(t.data.eles[a].slideInterval);var o={};o["eles["+a+"].startX"]=n,t.setData(o)},this.slidePanelEnd=function(t){var a=E.appMethod.getAppCurrentPage(),n=t.currentTarget.dataset.compindex,o=a.data.eles[n],i=t.changedTouches[0].clientX,s=o.startX,r=o.customFeature.slideIndex;if(Math.abs(s-i)>50){if(s-i>0?r++:r--,o.customFeature.autoplay?o.slideInterval=setInterval(function(){var t=o.customFeature.slideIndex;t>=o.content.length?t=0:t+=1;e.slideAnimation({compindex:n,num:t,pageInstance:a,direction:"_interval"})},1e3*o.customFeature.interval):clearInterval(o.slideInterval),r>=o.content.length||r<0)return;e.slideAnimation({compindex:n,num:r,pageInstance:a,direction:void 0})}},this.slideAnimation=function(e){var t=(e.num,{});t["eles["+e.compindex+"].customFeature.slideIndex"]=e.num,e.pageInstance.setData(t)},this.slidePanelScrollEvent=function(t,a){var n=e,o=E.appMethod.getAppCurrentPage(),i=t.currentTarget.dataset,s=i.compindex,r=JSON.parse(i.activeIndex),c=JSON.parse(i.offsetLeftArr),l=JSON.parse(i.containerOffsetWidth),d=t.detail,u=d.scrollLeft,m=d.scrollWidth,p=o.data.eles[s],f=+p.reference,g=null,h={},v=0,_=r,y=c.length,b=l*f+u;v=u<20?0:m-u-l<20?y-1:b<c[_]?b<c[_-1]?_-1:_:_+1,r!=v&&(h["eles["+s+"].activeIndex"]=v),a||(p.timeoutId&&clearTimeout(p.timeoutId),g=setTimeout(function(){n.slidePanelScrollEvent(t,!0)},140)),h["eles["+s+"].timeoutId"]=g,o.setData(h)}};t.default=w},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(9),i=n(o),s=a(0),r=n(s),c=a(3),l=n(c),d=a(1),u=n(d),m=a(2),p=n(m),f=a(4),g=n(f),h=a(5),v=a(12),_=n(v),y=a(6),E=a(21),b=a(40);a(644);var N=function(e){function t(e){(0,r.default)(this,t);var a=(0,u.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));R.call(a);var n=e.index,o=h.appMethod.getAppCurrentPage();return a.init(n,o),a}return(0,p.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this,t=this.props.data,a=t.customFeature,n=(0,y.convertStyleData)(t.style);0==a.vesselAutoheight&&(n.height=(0,y.transformPx2Rem)(a.height,320));var o={width:(0,y.transformPx2Rem)(a.imgWidth,320),height:(0,y.transformPx2Rem)(a.imgHeight,320)},i={backgroundColor:a.lineBackgroundColor,backgroundImage:a.lineBackgroundImage,marginBottom:(0,y.transformPx2Rem)(a.margin)};return g.default.createElement("div",{className:"custom-component franchisee-list",style:n},g.default.createElement("div",{className:"franchisee-title",onClick:this.tapFranchiseeLocation,"data-compindex":this.props.index},g.default.createElement("div",{className:"location",onClick:this.tapFranchiseeLocation,"data-compindex":this.props.index},g.default.createElement("span",{className:"ico-moon icon-fre_adress"},t.location_address||"定位中...")),"附近商家"),g.default.createElement("div",{className:"list-wrap",onScroll:this.franchiseeScrollFunc},t.franchisee_data&&t.franchisee_data.map(function(t,a){return g.default.createElement("div",{className:"list-item",key:a,style:i,onClick:e.turnToFranchiseeDetail,"data-appid":t.app_id,"data-mode":t.mode_id,"data-audit":t.is_audit,"data-id":t.id,"data-newpage":t.sub_app_bar["homepage-router"]||"","data-newmode":t.sub_app_bar.mode_id||""},g.default.createElement("div",{className:"img-wrap",style:o},g.default.createElement("img",{src:t.picture,alt:""}),0==t.open_staus&&g.default.createElement("div",{className:"not-open-mask"},g.default.createElement("div",{className:"list-status not-open-tip"},"休息中")),2==t.is_audit&&g.default.createElement("div",{className:"list-status list-audit"},"待审核")),g.default.createElement("div",{className:"info-wrap"},g.default.createElement("div",{className:"title-wrap"},g.default.createElement("div",{className:"title"},t.name),t.distance&&g.default.createElement("div",{className:"distance"},t.distance)),!!t.per_capita&&g.default.createElement("div",{className:"defaul"},g.default.createElement("div",{className:"average-price"},"¥",t.per_capita,"/人")),t.industry_type_name&&g.default.createElement("div",{className:"list-bottom"},g.default.createElement("div",{className:"list-industry"},t.industry_type_name)),t.coupon_list.best_subtract_value||t.coupon_list.best_discount&&g.default.createElement("div",{className:"discount-coupons"},""!=t.coupon_list.best_subtract_value&&g.default.createElement("div",{className:"coupons-cash"},g.default.createElement("span",null,"减"),"进店领取",t.coupon_list.best_subtract_value),""!=t.coupon_list.best_discount&&g.default.createElement("div",{className:"coupons-rebate"},g.default.createElement("span",null,"折"),"进店领取",t.coupon_list.best_discount,"折优惠"))))}),t.loading&&g.default.createElement(E.RequestStatus,{is:"requestLoading"}),0==t.is_more&&t.franchisee_data&&0==t.franchisee_data.length&&g.default.createElement(E.RequestStatus,{is:"requestNone",data:{data:"暂无商家~"}}),t.loadingFail&&g.default.createElement(E.RequestStatus,{is:"requestFail",data:{refreshEvent:"franchiseeScrollFunc",compindex:this.props.index}}),0==t.is_more&&t.franchisee_data&&t.franchisee_data.length>0&&t.customFeature.isShowFinishText&&g.default.createElement(E.RequestStatus,{is:"requestAll"}),1==t.customFeature.vesselAutoheight&&1==t.customFeature.loadingMethod&&2!=t.customFeature.mode&&!!t.is_more&&0!=t.is_more&&!t.loading&&!t.loadingFail&&g.default.createElement(b.LoadingBtn,{customFeature:a,onClick:this.franchiseeScrollFunc,"data-compindex":this.props.index})),t.showNationList&&g.default.createElement("div",{className:"nation-select-container"},g.default.createElement("div",{className:"nation-list-wrap"},g.default.createElement("div",{className:"nation-closed",onClick:this.hideNationList,"data-compindex":this.props.index},g.default.createElement("span",{className:"ico-moon icon-closed"})),g.default.createElement("div",{className:"tip"},"选择服务所在国家"),g.default.createElement("div",{className:"list"},t.nationList&&t.nationList.map(function(a,n){return g.default.createElement("div",{key:n,onClick:e.reLocalAddress,"data-nationname":a.nation_name,"data-nationid":a.oversea_region_id,"data-compindex":e.props.index,"data-address":t.location_address,"data-latlng":t.addressInfo},g.default.createElement("div",{className:"nation-name"},a.nation_name),g.default.createElement("div",{className:"ico-moon icon-rightarrow"}))})))))}}]),t}(g.default.Component),R=function(){var e=this;this.init=function(t,a){var n=e,o=a.data.eles[t].customFeature,s=h.appMethod.globalData.locationInfo;a.setData((0,i.default)({},"eles["+t+"].param",{id:o.id,form:o.form,page:1,app_id:h.appMethod.getAppId(),sort_key:"distance",sort_direction:1}));var r={},c=!1;if(h.appMethod.getInvolvedFromRefreshObject(o.id,"new-classify")&&(c=!0),!c){if(r.form="app_shop",e.withSortCompFlag(t,a)?(r.sort_key="weight",r.sort_direction=0):(r.sort_key="distance",r.sort_direction=1),r.page_size=o.loadingNum||10,r.page=1,"industry"==o.sourceType&&o.source&&"none"!=o.source?r.industry_type=o.source:"shop"==o.sourceType&&o.source&&"none"!=o.source&&(r.idx_arr={idx:"category",idx_value:o.source}),s.latitude){var l={};l["eles["+t+"].location_address"]=s.address,a.setData(l),r.latitude=s.latitude,r.longitude=s.longitude,n.getFranchiseeList(t,r,a)}else h.appMethod.getLocation({type:"gcj02",success:function(e){var o=e.latitude,i=e.longitude;if(e.latitude)a.requestNum++,h.appMethod.sendRequest({hideLoading:!0,url:"/index.php?r=Map/GetAreaInfoByLatAndLng",data:{latitude:o,longitude:i},success:function(e){var n={};n["eles["+t+"].location_address"]=e.data.formatted_addresses.recommend,a.setData(n),h.appMethod.setLocationInfo({latitude:o,longitude:i,address:e.data.formatted_addresses.recommend,info:e.data})}}),r.latitude=o,r.longitude=i,n.getFranchiseeList(t,r,a);else{var s={};s["eles["+t+"].location_address"]="定位失败",a.setData(s)}},fail:function(e){var o={};"getLocation:fail auth deny"===e.errMsg||"getLocation:fail:auth denied"===e.errMsg?o["eles["+t+"].location_address"]="已拒绝定位":o["eles["+t+"].location_address"]="定位失败",r.sort_key="weight",n.getFranchiseeList(t,r,a),a.setData(o)}});h.appMethod.getNationList(t)}},this.getFranchiseeList=function(t,a,n){var o=e,i={};i["eles["+t+"].loading"]=!0,i["eles["+t+"].loadingFail"]=!1,i["eles["+t+"].franchisee_data"]=[],i["eles["+t+"].is_more"]=1,i["eles["+t+"].curpage"]=0,"distance"!==a.sort_key||a.latitude||(a.sort_key="weight",a.sort_direction=0),i["eles["+t+"].param"]=a,n.setData(i),h.appMethod.sendRequest({hideLoading:!0,url:"/index.php?r=AppShop/GetAppShopByPage",data:a,method:"post",success:function(e){for(var a in e.data){var i=e.data[a].distance;e.data[a].distance=_.default.formatDistance(i)}o.getMyAppShopList(t,n);var s={};s["eles["+t+"].franchisee_data"]=e.data,s["eles["+t+"].is_more"]=e.is_more||0,s["eles["+t+"].curpage"]=1,s["eles["+t+"].loading"]=!1,s["eles["+t+"].loadingFail"]=!1,n.setData(s)},fail:function(){var e={};e["eles["+t+"].loading"]=!1,e["eles["+t+"].loadingFail"]=!0,n.setData(e)}})},this.getMyAppShopList=function(e,t,a){h.appMethod.sendRequest({url:"/index.php?r=AppShop/GetMyAppShopList",data:{parent_app_id:h.appMethod.getAppId()},hideLoading:!0,success:function(n){var o={},i=t.data.eles[e].franchisee_data||[],s=n.data,r=[];if(a){for(var c=0,l=0;l<i.length&&2==i[l].is_audit;l++)c++;i.splice(0,c)}for(var d=0;d<s.length;d++)2==s[d].is_audit&&(i.unshift(s[d]),r.push(s[d].id));if(a)for(var u=0;u<i.length;u++)1==i[u].is_audit&&r.indexOf(i[u].id)>-1&&i.splice(u,1);o["eles["+e+"].franchisee_data"]=i,t.setData(o)}})},this.tapFranchiseeLocation=function(e){var t=e.currentTarget.dataset.compindex,a=h.appMethod.getAppCurrentPage();a.setData((0,i.default)({},"eles["+t+"].showNationList",!0))},this.turnToFranchiseeDetail=function(t){var a=t.currentTarget.dataset,n=a.appid,o=a.mode,i=a.newpage,s={};if(s.detail=n,2==a.audit&&(s.shop_id=a.id),i)return o=a.newmode,void e.turnToFranchiseePage(o,i,n,s);h.appMethod.goToFranchisee(o,s)},this.turnToFranchiseePage=function(e,t,a,n){switch(t.trim()){case"franchiseeWaimai":return void h.appMethod.goToFranchisee(1,n);case"franchiseeTostore":return void h.appMethod.goToFranchisee(3,n);case"franchiseeDetail4":return void h.appMethod.goToFranchisee(2,n);case"franchiseeDetail":return void h.appMethod.goToFranchisee(0,n)}var o=a?"?franchisee="+a+"&fmode="+e:"";h.appMethod.turnToPage(t+o)},this.hideNationList=function(e){var t=e.currentTarget.dataset.compindex;h.appMethod.getAppCurrentPage().setData((0,i.default)({},"eles["+t+"].showNationList",!1))},this.reLocalAddress=function(e){var t=e.currentTarget.dataset,a=h.appMethod.getAppCurrentPage(),n=t.compindex,o=a.data.eles[n].param,i={};i["eles["+n+"].showNationList"]=!1,a.setData(i),t.nationid&&h.appMethod.turnToPage("searchAddress?from=franchisee&locateAddress="+t.address+"&compindex="+t.compindex+"&nationId="+t.nationid+"&nationname="+t.nationname+"&latitude="+o.latitude+"&longitude="+o.longitude)},this.franchiseeListRefresh=function(t){var a=t.currentTarget.dataset.compindex,n=h.appMethod.getAppCurrentPage(),o=n.data.eles[a].param,i={};i={id:a,form:"app_shop",page:1,sort_key:o.sort_key,sort_direction:o.sort_direction,latitude:o.latitude,longitude:o.longitude,idx_arr:o.idx_arr},e._refreshFranchiseeList(a,i,n)},this.withSortCompFlag=function(e,t){var a=t.data,n=a.eles[e].customFeature.id;return a.eles.some(function(e){return!e.hidden&&e.customFeature.sort_object===n})},this._refreshFranchiseeList=function(e,t,a){var n={};n["eles["+e+"].loading"]=!0,n["eles["+e+"].loadingFail"]=!1,n["eles["+e+"].franchisee_data"]=[],n["eles["+e+"].is_more"]=1,n["eles["+e+"].curpage"]=0,n["eles["+e+"].param"]=t,a.setData(n),t.latitude=h.appMethod.globalData.locationInfo.latitude,t.longitude=h.appMethod.globalData.locationInfo.longitude,h.appMethod.sendRequest({url:"/index.php?r=AppShop/GetAppShopByPage",method:"post",data:t,success:function(t){var n={};for(var o in t.data){var i=t.data[o].distance;t.data[o].distance=_.default.formatDistance(i)}n["eles["+e+"].franchisee_data"]=t.data,n["eles["+e+"].is_more"]=t.is_more,n["eles["+e+"].curpage"]=1,n["eles["+e+"].scrollTop"]=0,n["eles["+e+"].loadingFail"]=!1,n["eles["+e+"].loading"]=!1,a.setData(n)},fail:function(t){var n={};n["eles["+e+"].loadingFail"]=!0,n["eles["+e+"].loading"]=!1,a.setData(n)}})},this.franchiseeScrollFunc=function(e){console.log("TODO: 未处理滚动加载")}};t.default=N},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(0),i=n(o),s=a(3),r=n(s),c=a(1),l=n(c),d=a(2),u=n(d),m=a(4),p=n(m),f=a(5),g=a(30),h=a(12),v=(n(h),a(6));a(646);var _=function(e){for(var t=0,a=0;a<e.length;a++){var n=e.charCodeAt(a);t+=n>=0&&n<=128?1:2}return t},y=function(e,t){return _(e)>t},E=function(e){function t(e){(0,i.default)(this,t);var a=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));b.call(a);var n=e.index,o=f.appMethod.getAppCurrentPage();return a.init(n,o),a}return(0,u.default)(t,e),(0,r.default)(t,[{key:"render",value:function(){var e=this.props.data,t=g.pageInstance.data.currentChainStore||{},a=e.customFeature,n=(0,v.convertStyleData)(e.style);a.buttonColor,a.titleColor,a.instructionsColor;return p.default.createElement("div",{className:"custom-component franchisee-chain mode-"+a.mode,style:n,"data-compindex":this.props.index,onClick:this.turnToChainStoreList},0==a.mode&&p.default.createElement(p.default.Fragment,null,p.default.createElement("div",{className:"store-current"},p.default.createElement("div",{className:"store-change",style:{color:a.buttonColor}},p.default.createElement("span",null,a.prefixTitle||"换门店"),p.default.createElement("span",{className:"ico-moon icon-filter-down"})),p.default.createElement("div",{className:"store-name",style:{color:e.customFeature.titleColor}},t.name||""),t.not_business||0==t.is_open&&p.default.createElement("div",{className:"store-business",style:{marginLeft:y(t.name,24)?"0":".20rem"}},"歇业中")),p.default.createElement("div",{className:"store-info",style:{color:a.instructionsColor}},p.default.createElement("div",{className:"store-phone"},p.default.createElement("span",{className:"ico-moon icon-takeout-cellphone"}),p.default.createElement("span",null,t.phone||"")),p.default.createElement("div",{className:"store-address"},p.default.createElement("span",{className:"ico-moon icon-community-location"}),p.default.createElement("span",null,t.address||"")))),1==a.mode&&p.default.createElement(p.default.Fragment,null,p.default.createElement("div",{className:"store-current"},p.default.createElement("div",{className:"store-change",style:{color:a.buttonColor}},p.default.createElement("span",null,a.prefixTitle||"换门店"),p.default.createElement("span",{className:"ico-moon icon-filter-down"})),p.default.createElement("div",{className:"store-name",style:{color:e.customFeature.titleColor}},t.name||""),t.not_business||0==t.is_open&&p.default.createElement("div",{className:"store-business",style:{marginLeft:y(t.name,24)?"0":".20rem"}},"歇业中"))),2==a.mode&&p.default.createElement(p.default.Fragment,null,p.default.createElement("div",{className:"store-current"},p.default.createElement("div",{className:"store-name",style:{color:e.customFeature.titleColor}},p.default.createElement("span",{className:"ico-moon icon-community-location",style:{color:a.buttonColor}}),t.name||""),t.not_business||0==t.is_open&&p.default.createElement("div",{className:"store-business",style:{marginLeft:y(t.name,24)?"0":".20rem"}},"歇业中")),p.default.createElement("div",{className:"store-search"},p.default.createElement("span",{className:"icon-moon icon-search"}),p.default.createElement("span",null,"搜索其他店铺"))),3==a.mode&&p.default.createElement(p.default.Fragment,null,p.default.createElement("div",{className:"store-current"},p.default.createElement("div",{className:"store-name",style:{color:e.customFeature.titleColor}},t.name||""),t.not_business||0==t.is_open&&p.default.createElement("div",{className:"store-business",style:{marginLeft:y(t.name,24)?"0":".20rem"}},"歇业中"),p.default.createElement("div",{className:"store-info",style:{color:a.instructionsColor}},p.default.createElement("div",{className:"store-phone"},p.default.createElement("span",{className:"ico-moon icon-takeout-cellphone"}),p.default.createElement("span",null,t.phone||"")),p.default.createElement("div",{className:"store-address"},p.default.createElement("span",{className:"ico-moon icon-community-location"}),p.default.createElement("span",null,t.address||""))))))}}]),t}(p.default.Component),b=function(){var e=this;this.init=function(t,a,n){if(!n){a.data;if(!a.hasChain){a.hasChain=!0;f.appMethod.globalData.chainAppId?e.getChainStoreInfo():e.getMainStoreInfo()}}},this.getMainStoreInfo=function(){f.appMethod.sendRequest({url:"/index.php?r=AppShop/GetAppShopInfo",data:{},success:function(e){var t=e.data;if(t.app_id){var a=f.appMethod.getAppCurrentPage(),n=f.appMethod.businessTimeCompare(t.business_time||[]);a.setData({currentChainStore:{name:t.name,phone:t.phone,address:t.province_name+t.city_name+t.county_name+t.address_detail,not_business:!n,is_open:t.is_open}})}}})},this.getChainStoreInfo=function(){var t=e;f.appMethod.sendRequest({url:"/index.php?r=AppShop/GetAppShopByPage",data:{is_show_chain:1,sub_shop_app_id:f.appMethod.globalData.chainAppId,page:1,page_size:1},success:function(e){t.setChainInfo(e)},fail:function(){var e=f.appMethod.getAppCurrentPage();f.appMethod.globalData.chainAppId="",f.appMethod.globalData.chainHistoryDataId="",e&&e.page_router&&f.appMethod.globalData.chainNotLoading&&e.dataInitial&&e.dataInitial(),f.appMethod.globalData.chainNotLoading=!1}})},this.getNearbyChainInfo=function(t,a){var n=e,o=a||f.appMethod.getAppCurrentPage();f.appMethod.sendRequest({url:"/index.php?r=AppShop/GetAppShopByPage",data:{is_show_chain:1,sort_key:"distance",sort_direction:1,online_his_id:f.appMethod.globalData.historyDataId,latitude:t.latitude,longitude:t.longitude,page:1,page_size:1},success:function(e){n.setChainInfo(e)},fail:function(){f.appMethod.globalData.chainAppId="",f.appMethod.globalData.chainHistoryDataId="",o&&o.page_router&&f.appMethod.globalData.chainNotLoading&&o.dataInitial&&o.dataInitial(),f.appMethod.globalData.chainNotLoading=!1},complete:function(){wx.hideLoading()}})},this.setChainInfo=function(e,t){var a=e.data[0],n=f.appMethod.getAppCurrentPage();if(!a||f.appMethod.globalData.historyDataId!=a.s_his_data.online_his_id)return"fromWxCode"===t&&f.appMethod.showModal({title:"提示",content:"连锁子店版本与线上版本不一致，将回到总店"}),f.appMethod.globalData.chainAppId="",f.appMethod.globalData.chainHistoryDataId="",n&&n.page_router&&f.appMethod.globalData.chainNotLoading&&n.dataInitial&&n.dataInitial(),void(f.appMethod.globalData.chainNotLoading=!1);var o=f.appMethod.businessTimeCompare(a.business_time||[]);f.appMethod.globalData.chainHistoryDataId=a.s_his_data.his_id,f.appMethod.globalData.chainNotLoading&&(f.appMethod.globalData.chainAppId=a.app_id),n&&n.page_router&&(n.setData({currentChainStore:{name:a.name,phone:a.phone,address:a.province_name+a.city_name+a.county_name+a.address_detail,not_business:!o,is_open:a.is_open}}),f.appMethod.globalData.chainNotLoading&&n.dataInitial&&n.dataInitial()),f.appMethod.globalData.chainNotLoading=!1},this.turnToChainStoreList=function(e){var t=e.currentTarget.dataset.compindex,a=f.appMethod.getAppCurrentPage(),n=a.data.eles[t].customFeature,o="";n.sourceType&&n.source&&(o="?sourceType="+n.sourceType+"&source="+n.source),f.appMethod.turnToPage("chainStoreList"+o)}};t.default=E},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(8),i=n(o),s=a(0),r=n(s),c=a(3),l=n(c),d=a(1),u=n(d),m=a(2),p=n(m),f=a(4),g=n(f),h=a(33),v=n(h),_=a(6),y=a(30);a(648);var E=function(e){function t(e){(0,r.default)(this,t);var a=(0,u.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return b.call(a),a}return(0,p.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this,t=this.props.data,a=this.props.dynamicData,n=t.customFeature,o=(0,_.convertStyleData)(t.style);o.animation=(t.hideSidebar?"hide":"show")+("left"===n.direction?"Left":"Right")+"Sidebar .3s forwards";var i={backgroundColor:n.maskBackgroundColor,opacity:n.maskOpacity},s=t.content,r=t.customFeature.segment;return a&&r&&(s=a[r]),t.showSidebar?g.default.createElement("div",{className:"custom-component sidebar"},g.default.createElement("div",{className:"sidebar-mask",style:i,onClick:function(){return e.tapMaskCloseSidebar()}}),g.default.createElement("div",{className:"sidebar-content",style:o},s.map(function(e,t){return g.default.createElement(v.default,{key:t,index:t,data:e,dynamicData:a})}))):null}}]),t}(g.default.Component),b=function(){var e=this;this.tapMaskCloseSidebar=function(){var t=e.props,a=t.index;y.pageMethod.setCustomComponentData(a,(0,i.default)({},t.data,{hideSidebar:!0})),setTimeout(function(){y.pageMethod.setCustomComponentData(a,(0,i.default)({},t.data,{showSidebar:!1}))},300)}};t.default=E},function(e,t){},function(e,t,a){"use strict";function n(e){var t=e.data,a=(0,o.convertStyleData)(t.style);return a.height="unset",React.createElement("div",{className:"custom-component advertising",style:a},React.createElement("p",null,"广告组件（仅支持微信小程序）"),!t.customFeature.advertisingId&&React.createElement("p",null,"未填写广告ID"))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var o=a(6);a(650)},function(e,t){},function(e,t,a){"use strict";function n(e){return React.createElement("div",{className:"custom-component plugin"},React.createElement("p",null,"插件组件（仅支持微信小程序）"))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n,a(652)},function(e,t){},function(e,t,a){"use strict";function n(e){return React.createElement("div",{className:"custom-component official-account"},React.createElement("p",null,"公众号关注组件（仅支持微信小程序）"))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n,a(654)},function(e,t){},function(e,t,a){"use strict";function n(e){return React.createElement("div",{className:"custom-component classify"},React.createElement("p",null,"旧版分类组件（暂不支持）"),React.createElement("p",null,"建议使用新版分类组件"))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n,a(656)},function(e,t){},function(e,t,a){"use strict";function n(e){return React.createElement("div",{className:"custom-component count"},React.createElement("p",null,"旧版计数器组件（暂不支持）"),React.createElement("p",null,"建议使用新版计数器组件"))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n,a(658)},function(e,t){},function(e,t,a){"use strict";function n(e){var t=e.data,a=(e.dynamicData,t.customFeature),n=(0,o.convertStyleData)(t.style),i=(0,o.convertStyleData)({width:a.size,height:a.size}),s=null,r=!1;0===a.type&&(r=(0==a.va&&a.effect,!1)),s=r?a.voteChangePicture:a.voteInitPicture;return React.createElement("div",{className:"custom-component new-count",style:n},React.createElement("div",{className:"new-count-ele"},a.isShowImage&&React.createElement("img",{className:"new-count-image",src:s,style:i}),React.createElement("span",{className:"new-count-content"},t.content,"")))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var o=a(6);a(660)},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(9),i=n(o),s=a(8),r=n(s),c=a(0),l=n(c),d=a(3),u=n(d),m=a(1),p=n(m),f=a(2),g=n(f),h=a(4),v=n(h),_=a(6),y=a(5);a(662);var E=function(e){function t(e){(0,l.default)(this,t);var a=(0,p.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));b.call(a),a.qmap=v.default.createRef();var n=e.index,o=y.appMethod.getAppCurrentPage();return a.init(n,o),a}return(0,g.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){var e=this.props.data.customFeature;if("withmap"===e.type){var t=new qq.maps.Map(this.qmap.current,{zoom:13,zoomControl:!1,panControl:!1,mapTypeControl:!1});if(e.lat&&e.lng){var a=new qq.maps.LatLng(e.lat,e.lng);this.qqMapMarker=new qq.maps.Marker({map:t,position:a}),t.setCenter(a)}else t.map&&t.setCenter(t.map.center);t.zoomTo(13)}}},{key:"render",value:function(){var e=this.props.data,t=e.customFeature,a=(0,_.convertStyleData)(e.style);return v.default.createElement("div",{className:"custom-component map",style:a,onClick:this.tapMapDetail,"data-event-params":e.customFeature.markers_json_str},"withmap"===t.type&&v.default.createElement("div",{ref:this.qmap,className:"map-module"}),v.default.createElement("div",{className:"map-text"},v.default.createElement("span",{className:"ico-moon icon-location"}),v.default.createElement("span",{className:"map-link"},e.content)))}}]),t}(v.default.Component),b=function(){var e=this;this.init=function(t,a){var n=e.props.data.customFeature,o=[{latitude:n.lat,longitude:n.lng,name:n.address,desc:n.text}];a.setData((0,i.default)({},"eles["+t+"].customFeature",(0,r.default)({},n,{markers:o,markers_json_str:JSON.stringify(o)})))},this.tapMapDetail=function(e){e.stopPropagation(),y.appMethod.tapMapDetail(e)}};t.default=E},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(13),i=n(o),s=a(9),r=n(s),c=a(0),l=n(c),d=a(3),u=n(d),m=a(1),p=n(m),f=a(2),g=n(f),h=a(4),v=n(h),_=a(5),y=a(30),E=a(6);a(664);var b=function(e){function t(e){(0,l.default)(this,t);var a=(0,p.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));N.call(a);var n=e.index,o=_.appMethod.getAppCurrentPage();return a.init(n,o),a}return(0,g.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this,t=this.props.data,a=y.pageInstance.data.userInfo||{},n=t.customFeature,o={},i=t.content,s="topic"===n.searchObject.type?"0":"1",r=!1;if("0"===s){var c=t.style;o=(0,E.convertStyleData)({width:c.width,height:c.height,background:c.background,backgroundColor:c["background-color"]||c.backgroundColor,marginTop:c["margin-top"]||c.marginTop})}else o=(0,E.convertStyleData)(t.style);return"1"===s&&n.ifLocation&&(r=!0),v.default.createElement("div",{className:"custom-component search type-"+s+" "+(r?"has-location":""),style:o},"0"===s&&v.default.createElement(v.default.Fragment,null,v.default.createElement("div",{className:"search-input-label"},v.default.createElement("span",{className:"ico-moon icon-search"}),v.default.createElement("input",{className:"search-input",type:"text",onBlur:function(t){return e.searchForTopicAct(t)},"data-compindex":this.props.index,"data-topic-id":t.customFeature.searchObject.id,"data-topic-compindex":t.relateTopicCompIndex,placeholder:i.placeholder})),!!t.showCenter&&v.default.createElement(v.default.Fragment,null,v.default.createElement("div",{className:"search-usercenter",onClick:this.turnToTopicUserCenter},v.default.createElement("img",{src:a.cover_thumb})),v.default.createElement("div",{className:"ico-moon icon-community_notify search-notify",onClick:this.turnToTopicNotify}))),"1"===s&&v.default.createElement(v.default.Fragment,null,r&&v.default.createElement("div",{className:"ico-moon icon-location location",onClick:this.turnToSearchPage,"data-param":n.ifLocation,"data-listid":n.searchObject.customFeature.id},"全国"),v.default.createElement("div",{className:"search-input"},v.default.createElement("span",{className:"ico-moon icon-search"}),"goods-list"==n.searchObject.type&&v.default.createElement("div",{className:"fake-search",onClick:this.turnToSearchPage,"data-form":n.searchObject.customFeature.form,"data-listid":n.searchObject.customFeature.id}),"franchisee-list"==n.searchObject.type&&v.default.createElement("div",{className:"fake-search",onClick:this.turnToFranchiseeSearchPage}),v.default.createElement("input",{type:"text",value:this.state.keyword,onChange:this.handleChange,placeholder:i.placeholder}),n.searchObject&&v.default.createElement("div",{className:"search-btn",onClick:this.searchList,"data-compindex":this.props.index,"data-listid":n.searchObject.customFeature.id,"data-listtype":n.searchObject.type,"data-form":n.searchObject.customFeature.form},"搜索"))))}}]),t}(v.default.Component),N=function(){var e=this;this.state={keyword:""},this.init=function(e,t){var a=t.data.eles[e],n=a.customFeature.searchObject;if(n&&"topic"==n.type){var o=_.appMethod.findComponentIndexById(n.customFeature.id);if(o>-1){var i,s=t.data.eles[o].customFeature.isShowList;t.setData((i={},(0,r.default)(i,"eles["+e+"].searchValue",""),(0,r.default)(i,"eles["+e+"].showCenter",!1!==s||s),(0,r.default)(i,"eles["+e+"].relateTopicCompIndex",o),(0,r.default)(i,"eles["+o+"].relateSearchCompIndex",e),i))}else _.appMethod.showModal({content:"搜索未找到绑定的话题列表"}),t.setData((0,r.default)({},"eles["+e+"].searchValue",""))}},this.searchList=function(t,a){var n=_.appMethod.getAppCurrentPage(),o=a?t:t.currentTarget.dataset.compindex,s=n.data.eles[o],c=s.customFeature,l=c.searchObject.customFeature.id,d=c.searchObject.type,u=c.searchObject.customFeature.form,m=e.state.keyword||"",p="",f=_.appMethod.findComponentIndexById(l);if(-1!==f){var g=n.data.eles[f];if("group-buy-list"==d)return void n.callComponentMethod({componentIndex:f,methodName:"getGroupBuyList",argvs:[f,{param:{page:1,status:g.selectNum,search_value:m}}]});if("news"==d){var h;return u=g.param.form,n.setData((h={},(0,r.default)(h,"eles["+f+"].pageObj",{isLoading:!1,noMore:!1,page:1}),(0,r.default)(h,"eles["+f+"].selectedCateId",""),(0,r.default)(h,"eles["+f+"].newslist",[]),h)),void n.callComponentMethod({componentIndex:f,methodName:"getNewsList",argvs:[{compindex:f,page:m?-1:1,search_value:m},function(e){m&&setTimeout(function(){_.appMethod.showModal({content:"搜索到"+e.data.length+"条资讯"})},0)}]})}var v={};if(a){if(g=n.data.eles[f],p=g.curpage+1,g.is_more||"object"!=(void 0===a?"undefined":(0,i.default)(a))||"tap"!=a.type||_.appMethod.showModal({content:"已经加载到最后了"}),n.requesting||!g.is_more)return;n.requesting=!0}else p=1,"list-vessel"===d?(u=g.customFeature.form,v["eles["+f+"].list_data"]=[]):"goods-list"===d?(u=g.customFeature.form,v["eles["+f+"].goods_data"]=[]):"franchisee-list"===d?(u=g.param.form,v["eles["+f+"].franchisee_data"]=[]):"video-list"===d?(u=g.param.form,v["eles["+f+"].video_data"]=[]):"dynamic-classify"===d&&(u=g.customFeature.form,v["eles["+f+"].list_data"]=[]);v["eles["+f+"].loading"]=!0,v["eles["+f+"].loadingFail"]=!1,n.setData(v);var y={search:{data:[{_allkey:m,form:u}],app_id:_.appMethod.getAppId()},no_wrap:"video-list"===d||"franchisee-list"===d?1:"",page_size:g.customFeature.loadingNum||20,page:p};if("franchisee-list"===d){var E=_.appMethod.getLocationInfo();y.search.longitude=E.longitude,y.search.latitude=E.latitude}_.appMethod.sendRequest({url:"/index.php?r=appData/search",data:y,hideLoading:!0,chain:"franchisee-list"!==d||"",success:function(e){var t={};if(0==e.data.length&&setTimeout(function(){_.appMethod.showModal({content:"没有找到与“"+m+"”相关的内容"})},0),"goods-list"===d)t["eles["+f+"].goods_data"]=1==p?e.data:g.goods_data.concat(e.data);else if("list-vessel"===d||"dynamic-classify"==d){"level1-vertical-withpic"!=g.classifyType&&"level2-vertical-withpic"!=g.classifyType||_.appMethod.turnToPage("classifyGoodsListPage?form="+u+"&isShoppingCart=true& isBuyNow=false&search="+m);var a=g.listField;for(var i in e.data)for(var s in e.data[i].form_data)if("category"!=s&&!/region/.test(s)){"goods_model"==s&&(e.data[i].form_data.virtual_price=_.appMethod.formVirtualPrice(e.data[i].form_data));var r=e.data[i].form_data[s];a&&a.indexOf(s)<0&&/<("[^"]*"|'[^']*'|[^'">])*>/.test(r)?e.data[i].form_data[s]="":_.appMethod.needParseRichText(r)&&(e.data[i].form_data[s]=_.appMethod.getWxParseResult(r))}t["eles["+f+"].list_data"]=1==p?e.data:g.list_data.concat(e.data)}else if("franchisee-list"===d){for(var c in e.data){var l=e.data[c].distance;e.data[c].distance=util.formatDistance(l)}t["eles["+f+"].franchisee_data"]=1==p?e.data:g.franchisee_data.concat(e.data)}else if("video-list"==d){for(var h=e.data,v=0;v<h.length;v++)h[v].video_view=_.appMethod.handlingNumber(h[v].video_view);t["eles["+f+"].video_data"]=1==p?h:g.video_data.concat(h)}t["eles["+f+"].is_search"]=!0,t["eles["+f+"].searchEle"]=o,t["eles["+f+"].is_more"]=e.is_more,t["eles["+f+"].curpage"]=e.current_page,t["eles["+f+"].loading"]=!1,t["eles["+f+"].loadingFail"]=!1,n.setData(t)},fail:function(e){var t={};t["eles["+f+"].loadingFail"]=!0,t["eles["+f+"].loading"]=!1,n.setData(t)},complete:function(){setTimeout(function(){n.requesting=!1},300)}})}},this.searchForTopicAct=function(e){var t=e.currentTarget,a=t.dataset,n=a.compindex,o=a.topicCompindex,i=e.target.value,s=_.appMethod.getAppCurrentPage(),r={};if(o>-1){var c=s.data.eles[o].relateClassifyCompIndex;r["eles["+n+"].searchValue"]=i,r["eles["+o+"].listStatus.loading"]=!1,r["eles["+o+"].listStatus.isMore"]=!0,r["eles["+o+"].listParam.section_id"]="",r["eles["+o+"].listParam.category_id"]="",c>-1&&(r["eles["+c+"].selectedSectionId"]="",r["eles["+c+"].selectedCategoryId"]=""),r["eles["+o+"].listParam.search_value"]=i,r["eles["+o+"].listParam.page"]=-1,s.setData(r),s.callComponentMethod({componentIndex:o,methodName:"getTopListData",argvs:[s,o,function(e){_.appMethod.showModal({content:"搜索到"+e.length+"条话题"})}]})}else _.appMethod.showModal({content:"搜索未找到绑定的话题列表"})},this.turnToTopicUserCenter=function(e){_.appMethod.turnToPage("communityUsercenter?detail=")},this.turnToTopicNotify=function(e){_.appMethod.turnToPage("communityNotify?detail=")},this.turnToFranchiseeSearchPage=function(e){_.appMethod.turnToPage("franchiseeSearch")},this.turnToSearchPage=function(e){_.appMethod.turnToSearchPage(e)},this.handleChange=function(t){e.setState({value:t.target.value})}};t.default=b},function(e,t){},function(e,t,a){"use strict";function n(e){var t=e.data,a=t.customFeature,n=(0,o.convertStyleData)(t.style),s=t.content,r=function(e){var t=e.currentTarget.dataset,a=i.appMethod.getAppCurrentPage(),n=t.listid,o=t.idx,s=i.appMethod.findComponentIndexById(n);if(-1!==s){var r=a.data.eles[s],l=r.type,d=null;d="dynamic-classify"==l?{param:{form:r.customFeature.form,id:r.customFeature.id,idx_arr:{idx:"category",idx_value:r.currentCategory.slice(-1).pop()||""},page:1,page_size:10,is_count:0},compindex:s}:"group-buy-list"==l?{param:{form:r.customFeature.form,page:1,status:r.selectNum||0},compindex:s}:{param:r.param},d.compindex=s,d.param.page=1,0!=o?(d.param.sort_key=t.sortkey,d.param.sort_direction=t.sortdirection):(d.param.sort_key="weight",d.param.sort_direction=0);var u=r.customFeature;switch("goods-list"==l&&(u.controlCheck?d.param.is_integral=3:u.isIntegral?d.param.is_integral=1:d.param.is_integral=5),u.source&&"none"!==u.source&&(d.param.idx_arr={idx:"category",idx_value:u.source}),u.isShowGroupBuyGoods&&(d.param.is_group_buy=1),"goods"==u.form&&u.isShowFranchiseeGoods&&!a.franchiseeId&&(d.param.is_app_shop_cate_goods=1,d.param.is_app_shop=1),c(t),l){case"dynamic-classify":case"list-vessel":i.appMethod._sortListVessel(d);break;case"group-buy-list":a.callComponentMethod({componentIndex:d.compindex,methodName:"getGroupBuyList",argvs:[d.compindex,d]});break;case"goods-list":i.appMethod._sortGoodsList(d);break;case"franchisee-list":i.appMethod._sortFranchiseeList(d);break;case"video-list":i.appMethod._sortVideoList(d)}}},c=function(e){var t=i.appMethod.getAppCurrentPage(),a=e.compindex,n=e.idx,o={};o["eles["+a+"].customFeature.selected"]=n,0!=n&&1==e.sortdirection?o["eles["+a+"].content["+n+"].customFeature.sort_direction"]=0:0!=n?o["eles["+a+"].content["+n+"].customFeature.sort_direction"]=1:0==n&&(o["eles["+a+"].content["+n+"].customFeature.sort_direction"]=0),t.setData(o)};return React.createElement("div",{className:"custom-component sort",style:n},React.createElement("div",{className:"container"},s.map(function(n,o){return React.createElement("div",{key:o,className:"item "+(a.selected==o?"selected":""),style:a.selected==o?{color:a.selectedColor}:null,onClick:r,"data-compindex":e.index,"data-listid":t.customFeature.sort_object,"data-sortkey":n.customFeature.sort_key,"data-sortdirection":n.customFeature.sort_direction,"data-idx":o},React.createElement("span",null,n.text),0!==o&&a.selected==o&&React.createElement("div",{className:"arr-wrap"},React.createElement("span",{className:"sort-arr arr-up",style:{color:0==n.customFeature.sort_direction?t.customFeature.selectedColor:"#ddd"}},"▲"),React.createElement("span",{className:"sort-arr arr-down",style:{color:1==n.customFeature.sort_direction?t.customFeature.selectedColor:"#ddd"}},"▼")))})))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var o=a(6),i=a(5);a(666)},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(9),i=n(o),s=a(13),r=n(s),c=a(668),l=n(c),d=a(0),u=n(d),m=a(3),p=n(m),f=a(1),g=n(f),h=a(2),v=n(h);a(144);var _=a(4),y=n(_),E=a(6),b=a(5),N=a(12),R=n(N);a(670);var k=function(e){function t(e){(0,u.default)(this,t);var a=(0,g.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));w.call(a);var n=e.index,o=b.appMethod.getAppCurrentPage();return a.init(n,o),a}return(0,v.default)(t,e),(0,p.default)(t,[{key:"render",value:function(){var e=this.props.data,t=e.customFeature,a=(0,E.convertStyleData)(e.style);a.padding="unset",a.lineHeight=a.height;e.content;return y.default.createElement("div",{className:"custom-component citylocation"},y.default.createElement("div",{className:"citylocation-input",style:a,onClick:this.selectLocal,"data-compindex":this.props.index},e.content,": ",e.newlocal||e.local||"未选择"),e.citylocationHidden&&y.default.createElement("div",{className:"citylocation-choose"},y.default.createElement("div",{className:"picker-btn"},y.default.createElement("span",{onClick:this.cancelCity,"data-compindex":this.props.index},"取消"),y.default.createElement("span",{onClick:this.submitCity,"data-compindex":this.props.index,"data-listid":t.citylocation.customFeature.id,"data-listtype":t.citylocation.type,"data-form":t.citylocation.customFeature.form},"确定")),y.default.createElement("div",{className:"picker-view"},y.default.createElement(l.default,{cols:3,data:e.afterAreaList,value:e.value||["","",""],onChange:this.bindCityChange,cascade:!0}))))}}]),t}(y.default.Component),w=function(){var e=this;this.init=function(e,t){var a=t.requestNum,n=t.data.eles[e].customFeature,o=n.citylocation?n.citylocation.customFeature.form:"";t.data.eles[e].citylocationHidden=!1;var i={};if(i["eles["+e+"].value"]=["","",""],b.appMethod.globalData.locationInfo.latitude){var s=b.appMethod.globalData.locationInfo.info;i["eles["+e+"].local"]=s.address_component.province+" "+s.address_component.city+" "+s.address_component.district+" >",t.setData(i)}else b.appMethod.getLocation({success:function(n){var o=n.latitude,s=n.longitude;if(!o)return i={},i["eles["+e+"].local"]="定位失败",void t.setData(i);t.requestNum=a+1,b.appMethod.sendRequest({hideLoading:1!=a++,url:"/index.php?r=Map/GetAreaInfoByLatAndLng",data:{latitude:o,longitude:s},success:function(a){i["eles["+e+"].local"]=a.data.address_component.province+" "+a.data.address_component.city+" "+a.data.address_component.district+" >",t.setData(i),b.appMethod.setLocationInfo({latitude:o,longitude:s,address:a.data.formatted_addresses.recommend,info:a.data})}})}});t.requestNum=a+1,b.appMethod.sendRequest({hideLoading:1!=a++,url:"/index.php?r=AppRegion/getAllExistedDataRegionList&is_xcx=1&form="+o,chain:!0,subshop:t.franchiseeId||"",success:function(a){var n={};n["eles["+e+"].areaList"]=a.data,t.setData(n)}})},this.selectLocal=function(e){var t=e.currentTarget.dataset.compindex,a=b.appMethod.getAppCurrentPage(),n=a.data.eles[t],o={};if(o["eles["+t+"].citylocationHidden"]=void 0!=(0,r.default)(n.citylocationHidden)&&!n.citylocationHidden,!n.hasIntial){var i=[{label:"请选择",value:"",children:[{label:"请选择",value:"",children:[{label:"请选择",value:""}]}]}],s=!0,c=!1,l=void 0;try{for(var d,u=n.areaList[Symbol.iterator]();!(s=(d=u.next()).done);s=!0){var m=d.value,p={};p.label=m.name,p.value=m.region_id,p.children=[];var f=!0,g=!1,h=void 0;try{for(var v,_=m.cities[Symbol.iterator]();!(f=(v=_.next()).done);f=!0){var y=v.value,E={};E.label=y.name,E.value=y.region_id,E.children=[];var N=!0,R=!1,k=void 0;try{for(var w,x=y.towns[Symbol.iterator]();!(N=(w=x.next()).done);N=!0){var C=w.value,D={};D.label=C.name,D.value=C.region_id,E.children.push(D)}}catch(e){R=!0,k=e}finally{try{!N&&x.return&&x.return()}finally{if(R)throw k}}p.children.push(E)}}catch(e){g=!0,h=e}finally{try{!f&&_.return&&_.return()}finally{if(g)throw h}}i.push(p)}}catch(e){c=!0,l=e}finally{try{!s&&u.return&&u.return()}finally{if(c)throw l}}o["eles["+t+"].afterAreaList"]=i,o["eles["+t+"].hasIntial"]=!0}a.setData(o)},this.cancelCity=function(e){var t=b.appMethod.getAppCurrentPage(),a=e.currentTarget.dataset.compindex,n=t.data.eles[a];t.setData((0,i.default)({},"eles["+a+"].citylocationHidden",!n.citylocationHidden))},this.submitCity=function(t){var a=t.currentTarget.dataset.compindex,n=b.appMethod.getAppCurrentPage(),o=n.data.eles[a],i=o.afterAreaList,s=o.value,r={};if(!s||s.length<3||!s[2])b.appMethod.showModal({content:"您未选择城市!"});else{r["eles["+a+"].citylocationHidden"]=!o.citylocationHidden;var c=i.find(function(e){return e.value===s[0]}),l=c.children.find(function(e){return e.value===s[1]}),d=l.children.find(function(e){return e.value===s[2]});r["eles["+a+"].newlocal"]=c.label+l.label+d.label,n.setData(r);var u=s[2];e._citylocationList(t.currentTarget.dataset,u)}},this.bindCityChange=function(t){var a=e.props.index;b.appMethod.getAppCurrentPage().setData((0,i.default)({},"eles["+a+"].value",t))},this._citylocationList=function(e,t){var a=e.listid,n=e.listtype,o=e.form,i=b.appMethod.getAppCurrentPage(),s={},r=[],c=b.appMethod.findComponentIndexById(a);if(-1!==c){var l=i.data.eles[c];if("group-buy-list"==n)return void i.callComponentMethod({componentIndex:c,methodName:"getGroupBuyList",argvs:[c,{param:{page:1,status:l.selectNum,region_id:t}}]});"list-vessel"===n||"dynamic-classify"===n?(s["eles["+c+"].list_data"]=[],r=l.need_column_arr||[]):"goods-list"===n?s["eles["+c+"].goods_data"]=[]:"franchisee-list"===n&&(s["eles["+c+"].franchisee_data"]=[]),s["eles["+c+"].param.page"]=1,s["eles["+c+"].loading"]=!0,s["eles["+c+"].loadingFail"]=!1,s["eles["+c+"].is_more"]=1,i.setData(s);var d="/index.php?r=AppData/GetFormDataList&idx_arr[idx]=region_id&idx_arr[idx_value]="+t+"&extra_cond_arr[latitude]="+b.appMethod.globalData.locationInfo.latitude+"&extra_cond_arr[longitude]="+b.appMethod.globalData.locationInfo.longitude+"&extra_cond_arr[county_id]="+t,u={form:o};r.length&&(u.need_column_arr=r),b.appMethod.sendRequest({url:d,data:u,method:"post",hideLoading:!0,chain:"franchisee-list"===n||"",success:function(e){if(0==e.data.length&&setTimeout(function(){b.appMethod.showModal({content:"没有找到与所选区域的相关的内容"})},0),0==e.status){var t={};if("goods-list"===n)t["eles["+c+"].goods_data"]=e.data;else if("list-vessel"===n){if("form"!==u.form){var a=i.data.eles[c].listField;for(var o in e.data)for(var s in e.data[o].form_data)if("category"!=s&&!/region/.test(s)){"goods_model"==s&&(e.data[o].form_data.virtual_price=b.appMethod.formVirtualPrice(e.data[o].form_data)),"distance"==s&&(e.data[o].form_data[s]=R.default.formatDistance(e.data[o].form_data[s]));var r=e.data[o].form_data[s];a.indexOf(s)<0&&/<("[^"]*"|'[^']*'|[^'">])*>/.test(r)?e.data[o].form_data[s]="":b.appMethod.needParseRichText(r)&&(e.data[o].form_data[s]=b.appMethod.getWxParseResult(r))}}t["eles["+c+"].list_data"]=e.data}else if("franchisee-list"===n){for(var l in e.data){var d=e.data[l].distance;e.data[l].distance=R.default.formatDistance(d)}t["eles["+c+"].franchisee_data"]=e.data}else"dynamic-classify"===n&&(t["eles["+c+"].list_data"]=e.data);t["eles["+c+"].is_more"]=e.is_more,t["eles["+c+"].curpage"]=1,t["eles["+c+"].loading"]=!1,t["eles["+c+"].loadingFail"]=!1,i.setData(t)}},fail:function(e){var t={};t["eles["+c+"].loadingFail"]=!0,t["eles["+c+"].loading"]=!1,i.setData(t)}})}}};t.default=k},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(669),o=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=o.default,e.exports=t.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(0),i=n(o),s=a(3),r=n(s),c=a(1),l=n(c),d=a(2),u=n(d),m=a(4),p=n(m),f=a(140),g=n(f),h=a(66),v=n(h),_=a(67),y=n(_),E=function(e){function t(){(0,i.default)(this,t);var e=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.isMultiPicker=function(){return!!e.props.data&&Array.isArray(e.props.data[0])},e.getCol=function(){var t=e.props,a=t.data,n=t.pickerPrefixCls,o=t.indicatorStyle,i=t.itemStyle;return(e.isMultiPicker()?a:[a]).map(function(e,t){return p.default.createElement(y.default,{key:t,prefixCls:n,style:{flex:1},indicatorStyle:o,itemStyle:i},e.map(function(e){return p.default.createElement(y.default.Item,{key:e.value,value:e.value},e.label)}))})},e}return(0,u.default)(t,e),(0,r.default)(t,[{key:"render",value:function(){var e=this.props;return e.cascade?p.default.createElement(g.default,{prefixCls:e.prefixCls,pickerPrefixCls:e.pickerPrefixCls,data:e.data,value:e.value,onChange:e.onChange,onScrollChange:e.onScrollChange,cols:e.cols,indicatorStyle:e.indicatorStyle,pickerItemStyle:e.itemStyle}):p.default.createElement(v.default,{prefixCls:e.prefixCls,selectedValue:e.value,onValueChange:e.onChange,onScrollChange:e.onScrollChange,style:{flexDirection:"row"}},this.getCol())}}]),t}(p.default.Component);t.default=E,E.defaultProps=function(){return{prefixCls:"am-picker",pickerPrefixCls:"am-picker-col",cols:3,cascade:!0,value:[],onChange:function(){}}}(),e.exports=t.default},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(9),i=n(o),s=a(0),r=n(s),c=a(3),l=n(c),d=a(1),u=n(d),m=a(2),p=n(m),f=a(4),g=n(f),h=a(6),v=a(5);a(672);var _=function(e){function t(e){(0,r.default)(this,t);var a=(0,u.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));y.call(a);var n=e.index,o=v.appMethod.getAppCurrentPage();return a.init(n,o),a}return(0,p.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this,t=this.props.data,a=t.customFeature,n=(0,h.convertStyleData)(t.style),o={},i={backgroundImage:a["background-image"],backgroundColor:a["background-color"],opacity:a.opacity,fontSize:(0,h.transformPx2Rem)(a["font-size"]),fontWeight:a["font-weight"],fontStyle:a["font-style"],textDecoration:a["text-decoration"],color:a.color};2==a.mode&&(o.width="80%");var s=(t.content,t.classifyLevel),r=(t.selectedIndex,function(){return t.classifyData.map(function(n,o){return n.category_id==t.selectedCateId?g.default.createElement("div",{key:o,className:"new-classify-item selected",style:{color:a.selectedColor},onClick:e.tapNewClassifyRefreshHandler,"data-category-id":n.category_id,"data-index":o,"data-compindex":e.props.index},g.default.createElement("span",{className:"text",style:0==a.mode?{backgroundColor:a.selectedColor}:null},n.name),1==a.mode&&g.default.createElement("span",{className:"underline"})):g.default.createElement("div",{key:o,className:"new-classify-item",onClick:e.tapNewClassifyRefreshHandler,"data-category-id":n.category_id,"data-index":o,"data-compindex":e.props.index},g.default.createElement("span",{className:"text"},n.name))})});return g.default.createElement("div",{className:"custom-component new-classify mode-"+a.mode+" level-"+s,style:n},1===s&&g.default.createElement(g.default.Fragment,null,g.default.createElement("div",{className:"container",style:o},r()),2==a.mode&&g.default.createElement("div",{className:"newclassify-select-btn",onClick:this.tapShowNewClassifySelect,"data-compindex":this.props.index},g.default.createElement("span",{className:"ico-moon icon-downarrow"}))),2===s&&g.default.createElement(g.default.Fragment,null,g.default.createElement("div",{className:"container"},t.classifyData.map(function(n,o){return g.default.createElement("div",{key:o,className:"new-classify-item "+(o==t.selectedIndex?"selected":""),style:o==t.selectedIndex?{color:a.selectedColor}:null,onClick:function(t){n.subclass[0]?e.tapNewClassifyShowSubClassify(t):e.tapNewClassifyRefreshHandler(t)},"data-category-id":n.category_id,"data-index":o,"data-compindex":e.props.index},""==n.category_id?g.default.createElement("span",{className:"text"},"全部"):g.default.createElement("span",{className:"text"},n.name),""!=n.category_id&&n.subclass[0]&&g.default.createElement("span",{className:"triangle",style:o==t.selectedIndex?{borderTopColor:a.selectedColor}:null}),o!=t.classifyData.length-1&&g.default.createElement("span",{className:"divide-line"}))})),t.showSubClassify&&g.default.createElement("div",{className:"new-classify-subclassify",style:i},t.classifyData.map(function(e,n){if(n!==t.selectedIndex)return e.subclass.map(function(e,n){return g.default.createElement("div",{className:"sub-classify-item "+(e.category_id==t.selectedCateId?"selected":""),style:{color:e.category_id==t.selectedCateId?a.selectedColor:"",borderColor:e.category_id===t.selectedCateId&&1==t.customFeature.mode?t.customFeature.selectedColor:""}},g.default.createElement("span",{className:"text",style:{backgroundColor:e.category_id===t.selectedCateId&&0==t.customFeature.mode?t.customFeature.selectedColor:""}},e.name))})}))),2==a.mode&&t.showNewClassifySelect&&g.default.createElement("div",{className:"newclassify-select-wrap"},g.default.createElement("div",{className:"newclassify-select-main"},g.default.createElement("div",{className:"newclassify-select-btn",onClick:this.tapShowNewClassifySelect,"data-compindex":this.props.index},g.default.createElement("span",{className:"ico-moon icon-uparrow"})),g.default.createElement("div",{className:"newclassify-list-wrap"},r()))))}}]),t}(g.default.Component),y=function(){var e=this;this.init=function(t,a){var n=e,o=a.data.eles[t],i=o.customFeature,s="/index.php?r=appData/getCategoryByGroup",r={group_id:i.classifyGroupId},c=v.appMethod.findComponentIndexById(i.refresh_object);if(c<0)return void console.log("该分类组件没有绑定列表");var l=a.data.eles[c],d=l.customFeature.form;if(2==i.selectClassifyType){var u=i.classifyList||[];e.initNewClassifyGroup(a,t,u,i,d)}else""===r.group_id?v.appMethod.showToast({title:"分类组件未绑定分类组",icon:"none"}):(-1==r.group_id&&(s="/index.php?r=AppData/ListCategory",r=["goods","appointment","waimai","tostore","group_buy"].indexOf(i.refresh_form)>-1?{form:"goods",goods_type:(0,h.getGoodsTypeByForm)(d)}:{form:d}),v.appMethod.sendRequest({hideLoading:!0,url:s,data:r,chain:!0,subshop:a.franchiseeId||"",success:function(e){var s=[],c="";if(r.form)s=e.data,c=d;else if(s=e.data.item,c=e.data.form,!0===i.isManualAddClassify){var l=o.content,u=[];l.forEach(function(e){var t={},a=s.find(function(t){return t.category_id==e.firstClassifyId});a?(Object.keys(a).forEach(function(e){t[e]=a[e]}),e.secondClassifyId>0&&t.subclass.length?t.subclass=t.subclass.filter(function(t){return t.category_id==e.secondClassifyId}):t.subclass.unshift({category_id:e.firstClassifyId,group_id:t.group_id,name:"全部",cover:"",pid:0,weight:1})):t={},u.push(t)}),s=u}n.initNewClassifyGroup(a,t,s,i,c)}}));var m={};a.data.page_hasNavBar&&(m["eles["+t+"].top"]=v.appMethod.globalData.topNavBarPaddingTop+80,a.setData(m))},this.initNewClassifyGroup=function(t,a,n,o,i){var s=t||v.appMethod.getAppCurrentPage(),r=n,c=+o.classifyType||1,l=o.selected||0,d="",u={};(2==o.selectClassifyType||1==o.selectClassifyType&&-1==o.classifyGroupId)&&(r=o.classifyType>1?r.map(function(e){return{category_id:e.id,group_id:"",name:e.name,pid:0,subclass:e.subclass&&e.subclass.map(function(t){return{category_id:t.id,group_id:"",name:t.name,pid:e.id}})||[]}}):r.map(function(e){return{category_id:e.id,group_id:"",name:e.name,pid:0,subclass:[]}})),1==o.selectClassifyType&&(o.showAllClassify?(r=r.filter(function(e){return e.category_id}),2===c&&r.forEach(function(e){e.subclass[0]&&e.subclass[0].category_id==e.category_id&&(e.subclass=e.subclass.slice(1))})):(r[0]&&r[0].category_id&&r.unshift({category_id:"",group_id:"",name:"全部",pid:0,weight:"",subclass:[]}),2===c&&r.forEach(function(e){e.category_id&&(e.subclass[0]&&e.subclass[0].category_id==e.category_id||e.subclass.unshift({category_id:e.category_id,group_id:"",name:"全部",pid:0,weight:"",subclass:[]}))}))),r[l]&&(d=c>1&&r[l].subclass&&r[l].subclass[0]?r[l].subclass[0].category_id:r[l].category_id),u["eles["+a+"].classifyData"]=r,u["eles["+a+"].classifyGroupForm"]=i||o.refresh_form,u["eles["+a+"].selectedIndex"]=l,u["eles["+a+"].selectedCateId"]=d,u["eles["+a+"].classifyLevel"]=c,u["eles["+a+"].showSubClassify"]=!1,s.setData(u),e.tapNewClassifyRefreshHandler(null,a,d,s)},this.tapNewClassifyRefreshHandler=function(t,a,n,o){var i=o||v.appMethod.getAppCurrentPage(),s=a>-1?a:t.currentTarget.dataset.compindex,r=i.data.eles[s],c={},l={refresh_object:r.customFeature.refresh_object,index_segment:"category",index_value:void 0===n?t.currentTarget.dataset.categoryId:n};if(t&&t.currentTarget&&void 0!==t.currentTarget.dataset.index&&(c["eles["+s+"].selectedIndex"]=t.currentTarget.dataset.index),r.showNewClassifySelect){var d=t.currentTarget.dataset.index,u=0;d>3&&(u=150*(d-3)+"rpx"),c["eles["+s+"].newClassifyScrollLeft"]=u,e.tapShowNewClassifySelect({currentTarget:{dataset:{compindex:s}}})}c["eles["+s+"].selectedCateId"]=l.index_value,c["eles["+s+"].showSubClassify"]=!1,i.setData(c),v.appMethod.tapRefreshListHandler(null,l)},this.tapShowNewClassifySelect=function(e){var t=e.currentTarget.dataset,a=t.compindex,n=v.appMethod.getAppCurrentPage(),o=n.data.eles[a],s=o.showNewClassifySelect;n.setData((0,i.default)({},"eles["+a+"].showNewClassifySelect",!s))},this.tapNewClassifyShowSubClassify=function(e){var t=v.appMethod.getAppCurrentPage(),a=e.currentTarget.dataset.compindex,n=t.data.eles[a],o=e.currentTarget.dataset.index,i={};i["eles["+a+"].selectedIndex"]=o,n.selectedIndex===o?i["eles["+a+"].showSubClassify"]=!n.showSubClassify:i["eles["+a+"].showSubClassify"]=!0,t.setData(i)}};t.default=_},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(0),i=n(o),s=a(3),r=n(s),c=a(1),l=n(c),d=a(2),u=n(d),m=a(4),p=n(m),f=a(6),g=a(5);a(674);var h=function(e){function t(e){(0,i.default)(this,t);var a=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.sortByDefault=function(e){var t=g.appMethod.getAppCurrentPage(),a=e.currentTarget.dataset.compindex,n={},o=t.data.eles[a].customFeature.addGroup_object,i=g.appMethod.findComponentIndexById(o);if(-1===i)return void g.appMethod.showModal({content:"找不到关联的列表"});var s=t.data.eles[i].param;s.sort_key="",s.sort_direction="",n["eles["+a+"].tab"]=0,n["eles["+a+"].sortKey"]="",n["eles["+a+"].sortDirection"]="",n["eles["+i+"].curpage"]=0,n["eles["+i+"].is_more"]=1,n["eles["+i+"].goods_data"]=[],n["eles["+i+"].param"]=s,t.setData(n),t.callComponentMethod({componentIndex:i,methodName:"_goodsScrollFunc",argvs:[i]})},a.sortBySales=function(e){var t=g.appMethod.getAppCurrentPage(),a=e.currentTarget.dataset.compindex,n={},o=t.data.eles[a].customFeature.addGroup_object,i=g.appMethod.findComponentIndexById(o);if(-1===i)return void g.appMethod.showModal({content:"找不到关联的列表"});var s=t.data.eles[i].param;s.sort_key="sales",s.sort_direction=0,n["eles["+a+"].tab"]=1,n["eles["+a+"].sortKey"]="sales",n["eles["+a+"].sortDirection"]=0,n["eles["+i+"].curpage"]=0,n["eles["+i+"].is_more"]=1,n["eles["+i+"].goods_data"]=[],n["eles["+i+"].param"]=s,t.setData(n),t.callComponentMethod({componentIndex:i,methodName:"_goodsScrollFunc",argvs:[i]})},a.pickUpStyle=function(e){var t=g.appMethod.getAppCurrentPage(),a=e.currentTarget.dataset.compindex,n={},o=t.data.eles[a];if(o.showPickUpBox)return n["eles["+a+"].pickUpObj"]=o.initPickUpObj,n["eles["+a+"].showPickUpBox"]=!1,void t.setData(n);var i=o.pickUpObj||{1:1,2:2,3:3,4:4},s=JSON.parse(JSON.stringify(i)),r=g.appMethod.findComponentIndexById(o.customFeature.addGroup_object),c=r>-1?t.data.eles[r].customFeature:{};g.appMethod.getAppECStoreConfig(function(e){n["eles["+a+"].tabExpress"]=e.express,n["eles["+a+"].tabIntraCity"]=e.intra_city,n["eles["+a+"].tabDelivery"]=e.is_self_delivery,n["eles["+a+"].tabDining"]=e.dining,"goods"===c.form&&c.isShowFranchiseeGoods&&(n["eles["+a+"].tabDining"]=!1,i=o.pickUpObj||{1:1,2:2,3:3},s=JSON.parse(JSON.stringify(i))),n["eles["+a+"].initPickUpObj"]=s,n["eles["+a+"].pickUpObj"]=i,n["eles["+a+"].tab"]=3,n["eles["+a+"].showPickUpBox"]=!0,t.setData(n)})},a.sortByPrice=function(e){var t=g.appMethod.getAppCurrentPage(),a=e.currentTarget.dataset.compindex,n={},o=t.data.eles[a],i=o.sortDirection,s=o.customFeature.addGroup_object,r=g.appMethod.findComponentIndexById(s);if(-1===r)return void g.appMethod.showModal({content:"找不到关联的列表"});i=i&&0!=i?0:1;var c=t.data.eles[r].param;c.sort_key="price",c.sort_direction=i,n["eles["+a+"].tab"]=2,n["eles["+a+"].sortKey"]="price",n["eles["+a+"].sortDirection"]=i,n["eles["+r+"].curpage"]=0,n["eles["+r+"].is_more"]=1,n["eles["+r+"].goods_data"]=[],n["eles["+r+"].param"]=c,t.setData(n),t.callComponentMethod({componentIndex:r,methodName:"_goodsScrollFunc",argvs:[r]})},a.filterList=function(e){var t=g.appMethod.getAppCurrentPage(),n=e.currentTarget.dataset.compindex;t.setData({filterShow:!0,filterCompindex:n}),t.filterRef.current.show({filterShow:!0,chooseCateId:t.data.categoryId,form:t.data.classifyGroupForm,confirm:function(e){a.filterConfirm(e)}})},a.selectPickUp=function(e){var t=g.appMethod.getAppCurrentPage(),a=e.currentTarget.dataset.compindex,n={},o=e.currentTarget.dataset.type,i=t.data.eles[a].pickUpObj;i[o]=i[o]?"":o,n["eles["+a+"].pickUpObj"]=i,t.setData(n)},a.resetPickBtn=function(e){var t=g.appMethod.getAppCurrentPage(),a=e.currentTarget.dataset.compindex,n={},o={1:1,2:2,3:3,4:4},i=t.data.eles[a],s=g.appMethod.findComponentIndexById(i.customFeature.addGroup_object),r=s>-1?t.data.eles[s].customFeature:{};"goods"===r.form&&r.isShowFranchiseeGoods&&(o={1:1,2:2,3:3}),n["eles["+a+"].pickUpObj"]=o,t.setData(n)},a.surePickBtn=function(e){var t=g.appMethod.getAppCurrentPage(),a=e.currentTarget.dataset.compindex,n={},o=t.data.eles[a],i=o.customFeature.addGroup_object,s=g.appMethod.findComponentIndexById(i);if(-1===s)return void g.appMethod.showModal({content:"找不到关联的列表"});var r=o.pickUpObj,c=[];for(var l in r)r[l]&&c.push(r[l]);var d=t.data.eles[s].param;d.pick_up_type=c,n["eles["+a+"].showPickUpBox"]=!1,n["eles["+s+"].curpage"]=0,n["eles["+s+"].is_more"]=1,n["eles["+s+"].goods_data"]=[],n["eles["+s+"].param"]=d,t.setData(n),t.callComponentMethod({componentIndex:s,methodName:"_goodsScrollFunc",argvs:[s]})},a.filterConfirm=function(e){var t=e.detail,a=!!(t.leastPrice||t.mostPrice||t.chooseCateId||t.currentRegionId),n=g.appMethod.getAppCurrentPage(),o=n.data.filterCompindex,i={},s=n.data.eles[o].customFeature.addGroup_object,r=g.appMethod.findComponentIndexById(s);if(-1===r)return void g.appMethod.showModal({content:"找不到关联的列表"});var c=t.chooseCateId?{idx:"category",idx_value:t.chooseCateId}:"",l=n.data.eles[r].param;l.least_price=t.leastPrice||"",l.most_price=t.mostPrice||"",l.region_id=t.currentRegionId||"",l.idx_arr=c,i["eles["+o+"].hasFilter"]=a,i["eles["+r+"].curpage"]=0,i["eles["+r+"].is_more"]=1,i["eles["+r+"].goods_data"]=[],i["eles["+r+"].param"]=l,n.setData(i),n.callComponentMethod({componentIndex:r,methodName:"_goodsScrollFunc",argvs:[r]})},a.hideFilterPickUpBox=function(e){var t=g.appMethod.getAppCurrentPage(),a=e.currentTarget.dataset.compindex,n={};n["eles["+a+"].pickUpObj"]=t.data.eles[a].initPickUpObj,n["eles["+a+"].showPickUpBox"]=!1,t.setData(n)},a.turnToSearchPage=function(e){g.appMethod.turnToSearchPage(e)},a}return(0,u.default)(t,e),(0,r.default)(t,[{key:"render",value:function(){var e=this.props.data,t=e.customFeature,a=(0,f.convertStyleData)(e.style),n=(0,f.convertStyleData)(t.searchStyle.style),o=(0,f.convertStyleData)(t.sortStyle.style),i={color:t.selectedColor},s={color:t.sortStyle.style.color},r={background:t.selectedColor};e.content;return p.default.createElement(p.default.Fragment,null,p.default.createElement("div",{className:"custom-component filter",style:a},p.default.createElement("div",{className:"search-wrap"},p.default.createElement("div",{className:"search-inner",style:n,onClick:this.turnToSearchPage,"data-form":"goods","data-compindex":this.props.index,"data-listid":t.addGroup_object},p.default.createElement("span",{className:"ico-moon icon-search"}),t.placeholder)),p.default.createElement("div",{className:"tab-wrap",style:o},p.default.createElement("div",{className:"tab-item",style:0==e.tab?i:null,onClick:this.sortByDefault,"data-compindex":this.props.index},"综合"),p.default.createElement("div",{className:"tab-item",style:1==e.tab?i:null,onClick:this.sortBySales,"data-compindex":this.props.index},"销量"),p.default.createElement("div",{className:"tab-item pick-up",style:3==e.tab?i:null,onClick:this.pickUpStyle,"data-compindex":this.props.index},"取货",p.default.createElement("span",{className:"filter-down"})),p.default.createElement("div",{className:"tab-item tab-price",style:2==e.tab?i:null,onClick:this.sortByPrice,"data-compindex":this.props.index},"价格",p.default.createElement("div",{className:"label"},p.default.createElement("span",{className:"filter-up",style:2==e.tab&&1==e.sortDirection?i:s}),p.default.createElement("span",{className:"filter-down",style:2==e.tab&&0==e.sortDirection?i:s}))),p.default.createElement("div",{className:"tab-item",style:e.hasFilter?i:null,onClick:this.filterList,"data-compindex":this.props.index},"筛选",p.default.createElement("span",{className:"ico-moon icon-filter-f"}))),e.showPickUpBox&&p.default.createElement("div",{className:"pick-up-box"},p.default.createElement("div",{className:"pick-style-content"},1==e.tabExpress&&p.default.createElement("div",{style:e.pickUpObj[1]?i:null,onClick:this.selectPickUp,"data-type":"1","data-compindex":this.props.index},"快递",p.default.createElement("span",{className:"pick-bottom-line",style:e.pickUpObj[1]?r:null}),e.pickUpObj[1]&&p.default.createElement("span",{className:"ico-moon icon-gou"})),1==e.tabDelivery&&p.default.createElement("div",{style:e.pickUpObj[3]?i:null,onClick:this.selectPickUp,"data-type":"3","data-compindex":this.props.index},"上门自提",p.default.createElement("span",{className:"pick-bottom-line",style:e.pickUpObj[3]?r:null}),e.pickUpObj[3]&&p.default.createElement("span",{className:"ico-moon icon-gou"})),1==e.tabIntraCity&&p.default.createElement("div",{style:e.pickUpObj[2]?i:null,onClick:this.selectPickUp,"data-type":"2","data-compindex":this.props.index},"同城配送",p.default.createElement("span",{className:"pick-bottom-line",style:e.pickUpObj[2]?r:null}),e.pickUpObj[2]&&p.default.createElement("span",{className:"ico-moon icon-gou"})),1==e.tabDining&&p.default.createElement("div",{style:e.pickUpObj[4]?i:null,onClick:this.selectPickUp,"data-type":"4","data-compindex":this.props.index},"堂食点餐",p.default.createElement("span",{className:"pick-bottom-line",style:e.pickUpObj[4]?r:null}),e.pickUpObj[4]&&p.default.createElement("span",{className:"ico-moon icon-gou"}))),p.default.createElement("div",{className:"pick-btn-content"},p.default.createElement("span",{onClick:this.resetPickBtn,"data-compindex":this.props.index},"重置"),p.default.createElement("span",{className:"sure-pick-btn",style:{background:t.selectedColor},onClick:this.surePickBtn,"data-compindex":this.props.index},"确定")))),e.showPickUpBox&&p.default.createElement("div",{className:"custom-component filter pick-up-mask",onClick:this.hideFilterPickUpBox}))}}]),t}(p.default.Component);t.default=h},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(9),i=n(o),s=a(36),r=n(s),c=a(13),l=n(c),d=a(44),u=n(d),m=a(0),p=n(m),f=a(3),g=n(f),h=a(1),v=n(h),_=a(2),y=n(_);a(45);var E=a(4),b=n(E),N=a(5),R=a(6),k=a(11),w=a(21),x=a(40);a(676);var C=function(e){function t(e){(0,p.default)(this,t);var a=(0,v.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));D.call(a);var n=e.index,o=N.appMethod.getAppCurrentPage();return a.init(n,o),a}return(0,y.default)(t,e),(0,g.default)(t,[{key:"render",value:function(){var e=this,t=this.props.data,a=(0,R.convertStyleData)(t.style);return b.default.createElement("div",{className:"custom-component community-group-wrap"},b.default.createElement("div",{className:"element community-group",style:a},t.customFeature.showSearch&&b.default.createElement("div",{className:"search-box",style:{height:t.customFeature.searchSetting.height,marginTop:t.customFeature.searchSetting["margin-top"]}},b.default.createElement("div",{className:"search-input"},b.default.createElement(u.default,{size:"xxs",type:"search",className:"icon-search"}),b.default.createElement("input",{type:"text",placeholder:"请输入搜索内容",onBlur:this.searchGroupList,"data-compindex":this.props.index}))),t.customFeature.showGroup&&b.default.createElement("div",{className:"community-head",style:{height:t.customFeature.groupSetting.height,marginTop:t.customFeature.groupSetting["margin-top"],background:t.customFeature.groupSetting.background}},b.default.createElement("img",{className:"colone-avatar",src:t.leaderInfo&&t.leaderInfo.logo||"https://cdn.jisuapp.cn/static/jisuapp_editor/images/new-zhichi-default.png"}),b.default.createElement("div",{className:"colone-detail-box"},b.default.createElement("div",{className:"colone-name",style:{color:t.customFeature.groupSetting["group-color"],fontSize:t.customFeature.groupSetting["group-font-size"]}},t.leaderInfo&&t.leaderInfo.nick_name?t.leaderInfo.nick_name+"-":"暂无团长",t.leaderInfo&&t.leaderInfo.housing_estate),b.default.createElement("div",{className:"colone-address",style:{color:t.customFeature.groupSetting["address-color"],fontSize:t.customFeature.groupSetting["address-font-size"]}},"自提地址：",t.leaderInfo&&t.leaderInfo.address_detail||"暂未设置")),t.customFeature.groupSetting.changeCaptain&&b.default.createElement("div",{className:"change-captain","data-compindex":this.props.index,onClick:t.leaderInfo?this.chengeCommunityGroup:this.isOpenCommunityGroup,style:{color:t.customFeature.groupSetting["btn-color"],background:t.customFeature.groupSetting["btn-background"]}},b.default.createElement("span",{className:"ico-moon icon-change"}),t.leaderInfo?"切换团长":"申请团长"),t.buyerInfoList&&!!t.buyerInfoList.length&&b.default.createElement("div",{className:"scroll-avatar-box"},b.default.createElement("div",{className:"community-buyer-scrollling"},b.default.createElement("div",{className:"scroll-avatar"},b.default.createElement("img",{src:t.buyerInfoList[t.buyerIndex].buyer_info.logo}),b.default.createElement("span",{className:"scroll-name"},t.buyerInfoList[t.buyerIndex].buyer_info.nickname),"下单成功了")))),1==t.customFeature.timeLineSetting.timeLineStyle&&t.customFeature.showTimeline&&function(){return b.default.createElement("div",{className:"time-line-box",onClick:e.searchTimeLineActive,"data-compindex":e.props.index,style:{background:t.customFeature.timeLineSetting.background,marginTop:t.customFeature.timeLineSetting["margin-top"]}},t.customFeature.timeLineSetting.content.map(function(e,a){return b.default.createElement(b.default.Fragment,{key:a},e.show&&b.default.createElement("div",{"data-type":a,style:{fontWeight:t.param&&t.param.status==a?600:"",color:t.param&&t.param.status==a?t.customFeature.timeLineSetting["underline-color"]:""}},e.name,t.param&&t.param.status==a&&b.default.createElement("span",{className:"under-line",style:{background:t.customFeature.timeLineSetting["underline-color"],height:t.customFeature.timeLineSetting["underline-height"]}})))}))}(),2==t.customFeature.timeLineSetting.timeLineStyle&&t.customFeature.showTimeline&&function(){return b.default.createElement("div",{className:"time-line-box",onClick:e.searchTimeLineActive,"data-compindex":e.props.index,style:{background:t.customFeature.timeLineSetting.background,marginTop:t.customFeature.timeLineSetting["margin-top"]}},t.customFeature.timeLineSetting.content.map(function(e,a){return b.default.createElement(b.default.Fragment,{key:a},e.show&&b.default.createElement("div",{"data-type":a,className:t.param.status==a?"selected":""},b.default.createElement("span",{"data-type":a,style:{background:t.param.status==a?t.customFeature.timeLineSetting["slected-color"]:""}},e.name)))}))}(),function(){return b.default.createElement(k.ScrollView,{"scroll-y":"true",className:"scroll-ele "+t.type,style:{height:t.customFeature.height},bindanimationend:"animationEnd","data-compindex":e.props.index,"data-type":t.type,bindscrolltolower:e.communityGroupScrollFunc},t.communityGroup_data&&t.communityGroup_data[0]&&t.communityGroup_data[0].group_info&&b.default.createElement(b.default.Fragment,null,t.communityGroup_data.map(function(a,n){return b.default.createElement("div",{className:"community-group-item",key:a.group_id,"data-id":a.group_id,"data-leader-token":a.user_token,"data-longitude":a.leader_info.longitude,"data-latitude":a.leader_info.latitude,"data-status":2==a.group_info.status,onClick:e.toCommunityGroup},b.default.createElement("div",{className:"community-group-title"},b.default.createElement("div",{className:"group-active-name"},1==a.group_info.status&&b.default.createElement("label",null,"进行中"),2==a.group_info.status&&b.default.createElement("label",null,"已结束"),3==a.group_info.status&&b.default.createElement("label",null,"即将开始"),4==a.group_info.status&&b.default.createElement("label",null,"明日开始"),5==a.group_info.status&&b.default.createElement("label",null,"更多预告"),b.default.createElement("span",{className:"ellipsis"},a.group_info.title)),b.default.createElement("div",{className:"column-time"},b.default.createElement("span",{className:"icon-comTime ico-moon",style:{marginRight:".09rem",color:2==a.group_info.status?"#d2d2d2":"#ff7100"}}),b.default.createElement("span",null,a.group_info.start_date," - ",a.group_info.end_date)),b.default.createElement("span",{className:"group-title-illustration"},a.group_info.illustration)),b.default.createElement("div",{style:{whiteSpace:"nowrap"}},t.communityGroup_data[n].goods_info&&t.communityGroup_data[n].goods_info.map(function(e){return b.default.createElement("div",{className:"img-content",key:e.id},b.default.createElement("img",{src:e.cover}),b.default.createElement("div",{className:"community-good-price"},"¥",e.price))})),b.default.createElement("div",{className:"community-group-describe"},b.default.createElement("div",{className:"describe-tag"},"浏览：",a.group_info.view_count),b.default.createElement("div",{className:"describe-tag"},"销量：",a.group_info.sold_count)))})),t.loading&&b.default.createElement(w.RequestStatus,{is:"requestLoading"}),0==t.is_more&&!(t.communityGroup_data&&t.communityGroup_data[0]&&t.communityGroup_data[0].group_info)&&b.default.createElement(w.RequestStatus,{is:"requestNone",data:{data:"暂无社区团购活动~"}}),t.loadingFail&&b.default.createElement(w.RequestStatus,{is:"requestFail",data:{refreshEvent:"communityGroupScrollFunc",compindex:t.compindex}}),0==t.is_more&&!(t.communityGroup_data&&t.communityGroup_data[0]&&t.communityGroup_data[0].group_info)&&t.customFeature.isShowFinishText&&b.default.createElement(w.RequestStatus,{is:"requestAll"}),1==t.customFeature.vesselAutoheight&&1==t.customFeature.loadingMethod&&!!+t.is_more&&0!=t.is_more&&!t.loading&&!t.loadingFail&&b.default.createElement(x.LoadingBtn,{customFeature:t.customFeature,"data-compindex":e.props.index,onClick:e.communityGroupScrollFunc}))}()))}}]),t}(b.default.Component),D=function(){var e=this;this.isOpenCommunityGroup=function(){N.appMethod._isOpenCommunityGroup()},this.init=function(t,a){e.getGoodsIdxList(t);var n=e,o=a.data.eles[t].customFeature,i=N.appMethod.globalData.locationInfo,s={};if(o.groupSetting.height.indexOf("rem")<0){o.groupSetting.height=parseInt(o.groupSetting.height)/100*2.34+"rem",o.groupSetting["margin-top"]=parseInt(o.groupSetting["margin-top"])/100*2.34+"rem",o.groupSetting["address-font-size"]=parseInt(o.groupSetting["address-font-size"])/100*2.34+"rem",o.groupSetting["group-font-size"]=parseInt(o.groupSetting["group-font-size"])/100*2.34+"rem",o.timeLineSetting.height=parseInt(o.timeLineSetting.height)/100*2.34+"rem",o.timeLineSetting["margin-top"]=parseInt(o.timeLineSetting["margin-top"])/100*2.34+"rem",o.timeLineSetting["underline-height"]=parseInt(o.timeLineSetting["underline-height"])/100*2.34+"rem",o.timeLineSetting["font-size"]=parseInt(o.timeLineSetting["font-size"])/100*2.34+"rem",o.searchSetting.height=parseInt(o.searchSetting.height)/100*2.34+"rem",o.searchSetting["margin-top"]=parseInt(o.searchSetting["margin-top"])/100*2.34+"rem";var r={};r["eles["+t+"].customFeature"]=o,a.setData(r)}if(o.showTimeline){for(var c=o.timeLineSetting.content,l=0;l<c.length;l++)if(c[l].show){s.status=l;break}}else o.startActive&&!o.finishActive?s.status=5:!o.startActive&&o.finishActive?s.status=6:o.startActive&&o.finishActive?s.status=7:o.startActive||o.finishActive||(s.status=0);return a.data.eles[t].leaderInfo?void n.getCommunityActiveList(t,s):N.appMethod.globalData.communityUserToken?void e.checkGroupLeader(t,s,N.appMethod.globalData.communityUserToken):void N.appMethod.getStorage({key:"groupToken",complete:function(e){e&&e.data?n.checkGroupLeader(t,s,e.data):i.latitude?(n.latitude=i.latitude,n.longitude=i.longitude,n.getGroupList(t,s)):N.appMethod.getLocation({type:"gcj02",success:function(e){var o=e.latitude,i=e.longitude;a.requestNum++,N.appMethod.sendRequest({hideLoading:!0,url:"/index.php?r=Map/GetAreaInfoByLatAndLng",data:{latitude:o,longitude:i},success:function(e){N.appMethod.setLocationInfo({latitude:o,longitude:i,address:e.data.formatted_addresses.recommend,info:e.data})}}),n.latitude=o,n.longitude=i,n.getGroupList(t,s)},fail:function(e){var n={};"getLocation:fail auth deny"===e.errMsg||"getLocation:fail:auth denied"===e.errMsg?n["eles["+t+"].location_address"]="已拒绝定位":n["eles["+t+"].location_address"]="定位失败",a.setData(n)}})}})},this.getGroupList=function(t,a){var n=e,o=N.appMethod.getAppCurrentPage();N.appMethod.sendRequest({url:"/index.php?r=AppDistributionExt/GetDistributorExtList",method:"post",data:{latitude:e.latitude,longitude:e.longitude,is_audit:1,filter_deleted:1},success:function(e){if(e.data.length){var i={};i["eles["+t+"].leaderInfo"]=e.data[0],N.appMethod.setStorage({key:"groupToken",data:e.data[0].user_token}),o.setData(i)}n.getCommunityActiveList(t,a)}})},this.getCommunityActiveList=function(e,t){var a=N.appMethod.getAppCurrentPage(),n=a.data.eles[e].customFeature,o={};1==n.vesselAutoheight||2==n.vesselAutoheight?o["eles["+e+"].customFeature.height"]="auto":n.height.indexOf("rpx")<0&&(o["eles["+e+"].customFeature.height"]=2.34*parseInt(n.height)+"rpx"),t.page_size=n.loadingNum||10,o["eles["+e+"].param"]=t,o["eles["+e+"].loading"]=!0,o["eles["+e+"].loadingFail"]=!1,o["eles["+e+"].communityGroup_data"]=[],o["eles["+e+"].is_more"]=1,o["eles["+e+"].curpage"]=1,a.setData(o);var i=a.data.eles[e].leaderInfo?a.data.eles[e].leaderInfo.user_token:"";N.appMethod.sendRequest({hideLoading:!0,url:"/index.php?r=AppDistributionExt/GetGroupsByDistance",method:"post",data:{idx_arr:{idx:"title",idx_value:t.idx_value||""},is_stock_gte_zero:n.soldOut?1:"",status:t.status>=0?t.status+1:"",page_size:t.page_size,page:1,leader_token:i},success:function(t){var n={};if(!t.data.length)return n["eles["+e+"].loading"]=!1,n["eles["+e+"].communityGroup_data"]=[],n["eles["+e+"].is_more"]=0,void a.setData(n);n["eles["+e+"].communityGroup_data"]=t.data,n["eles["+e+"].is_more"]=t.is_more,n["eles["+e+"].curpage"]=t.current_page,n["eles["+e+"].loading"]=!1,n["eles["+e+"].loadingFail"]=!1,a.setData(n)},fail:function(){var t={};t["eles["+e+"].loadingFail"]=!0,t["eles["+e+"].loading"]=!1,a.setData(t)}})},this.communityGroupScrollFunc=function(e){var t=N.appMethod.getAppCurrentPage(),a="object"==(void 0===e?"undefined":(0,l.default)(e))?e.currentTarget.dataset.compindex:e,n=t.data.eles[a],o=n.curpage+1,i={},s={idx_arr:{idx:"title",idx_value:n.param.idx_value||""},status:n.param.status>=0?n.param.status+1:"",page_size:n.param.page_size,page:o,leader_token:t.data.eles[a].leaderInfo.user_token};!n.loading&&n.is_more&&(i["eles["+a+"].loading"]=!0,i["eles["+a+"].loadingFail"]=!1,t.setData(i),N.appMethod.sendRequest({url:"/index.php?r=AppDistributionExt/GetGroupsByDistance",data:s,method:"post",hideLoading:!0,success:function(e){i={},i["eles["+a+"].communityGroup_data"]=[].concat((0,r.default)(n.communityGroup_data),(0,r.default)(e.data)),i["eles["+a+"].is_more"]=e.is_more,i["eles["+a+"].curpage"]=e.current_page,i["eles["+a+"].loadingFail"]=!1,i["eles["+a+"].loading"]=!1,t.setData(i)},fail:function(){i={},i["eles["+a+"].loadingFail"]=!0,i["eles["+a+"].loading"]=!1,t.setData(i)}}))},this.chengeCommunityGroup=function(e){var t=N.appMethod.getAppCurrentPage(),a=e.currentTarget.dataset.compindex,n=t.data.eles[a].leaderInfo.user_token,o=N.appMethod.returnSubPackageRouter("communityGroupSearchVillage");N.appMethod.turnToPage(o+"?token="+n+"&compindex="+a)},this.toCommunityGroup=function(e){var t=e.currentTarget.dataset.id,a=e.currentTarget.dataset.leaderToken||"",n=e.currentTarget.dataset.status,o=e.currentTarget.dataset.latitude,i=e.currentTarget.dataset.longitude,s=N.appMethod.returnSubPackageRouter("communityGroupGoodDetail")+"?id="+t+"&leader_token="+a+"&latitude="+o+"&longitude="+i;n?N.appMethod.showModal({content:"活动已结束"}):N.appMethod.turnToPage(s)},this.searchTimeLineActive=function(t){var a=t.currentTarget.dataset,n=a.compindex,o=N.appMethod.getAppCurrentPage(),i={status:t.target.dataset.type};if(!o.data.eles[n].leaderInfo)return void N.appMethod.showModal({content:"暂无团长，无法搜索"});e.getCommunityActiveList(n,i)},this.searchGroupList=function(t){var a=t.currentTarget.dataset.compindex,n=N.appMethod.getAppCurrentPage(),o=t.target.value,i=n.data.eles[a].param;if(i.idx_value=o,!n.data.eles[a].leaderInfo)return void N.appMethod.showModal({content:"暂无团长，无法搜索"});e.getCommunityActiveList(a,i,n)},this.getGoodsIdxList=function(t){var a=e,n=N.appMethod.getAppCurrentPage();N.appMethod.sendRequest({hideLoading:!0,url:"/index.php?r=AppDistributionExt/GetAppDistributionGroupGoodsIdxList",success:function(e){var o;n.setData((o={},(0,i.default)(o,"eles["+t+"].buyerIndex",0),(0,i.default)(o,"eles["+t+"].buyerInfoList",e.data||[]),o)),e.data.length&&a.cycleGroupBuyerList(t)}})},this.cycleGroupBuyerList=function(e){var t=N.appMethod.getAppCurrentPage(),a=t.data.eles[e];a.buyerIndex<0||setInterval(function(){var n=a.buyerIndex,o=a.buyerInfoList;n++,n==o.length-1&&(n=0),t.setData((0,i.default)({},"eles["+e+"].buyerIndex",n))},8e3)},this.checkGroupLeader=function(t,a,n){var o=e,i=N.appMethod.getAppCurrentPage();N.appMethod.sendRequest({hideLoading:!0,url:"/index.php?r=AppDistributionExt/CheckIsDistributorGroupLeaderInfo",data:{leader_token:n},success:function(e){var n={};if(!e.data.learder_info)return N.appMethod.globalData.communityUserToken="",void N.appMethod.removeStorage({key:"groupToken",complete:function(){o.init(t,i)}});n["eles["+t+"].leaderInfo"]=e.data.learder_info,i.setData(n),o.getCommunityActiveList(t,a)}})}};t.default=C},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(13),i=n(o),s=a(0),r=n(s),c=a(3),l=n(c),d=a(1),u=n(d),m=a(2),p=n(m),f=a(4),g=n(f),h=a(5);a(678);var v=function(e){function t(e){(0,r.default)(this,t);var a=(0,u.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));_.call(a);var n=e.index,o=h.appMethod.getAppCurrentPage();return a.init(n,o),a}return(0,p.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this,t=this.props.data,a=t.customFeature,n=t.list_data,o=a.margin,i=a.lineBackgroundColor,s=a.secColor;s=s.replace(/;+/g,"");var r=function(t,a){return g.default.createElement("div",{className:"exchange-coupon-wrapper",style:{backgroundColor:i}},0!=t.stock&&g.default.createElement("div",{className:"exchange-coupon-linetop",style:{backgroundColor:0!=t.stock?s:"#cccccc"}}),g.default.createElement("div",{className:"exchange-coupon-top"},g.default.createElement("div",{className:"exchange-coupon-left"},g.default.createElement("div",{className:"exchange-coupon-left-first"},t.title),g.default.createElement("div",{className:"exchange-coupon-left-second",style:{color:0==t.stock?"#333":""}},t.exchange_condition.price>0&&g.default.createElement("span",null,"¥",t.exchange_condition.price),t.exchange_condition.price>0&&t.exchange_condition.integral>0&&g.default.createElement("span",null,"+"),t.exchange_condition.integral>0&&g.default.createElement("span",null,t.exchange_condition.integral,"积分"))),g.default.createElement("button",{className:"exchange-coupon-right",style:{backgroundColor:s},"data-coinid":t.id,"data-limitnum":t.limit_num,"data-userrecvnum":t.user_recv_num,"data-index":a,"data-status":t.recv_status,"data-money":t.exchange_condition.price,"data-compindex":e.props.index,onClick:e.getexchangeCoupon},0!=t.stock&&0==t.user_recv_num?"立即兑换":"再次兑换"),0==t.stock&&g.default.createElement("div",{className:"exchange-coupon-right-used"},"已抢完"),c(t),g.default.createElement("div",{className:"exchange-coupon-icon-wrapper",style:{borderColor:0!=t.stock?s:"#ccc"}})),g.default.createElement("div",{className:"exchange-coupon-bottom"},"-1"==t.expire&&g.default.createElement("span",{className:"exchange-coupon-expire-time"},"有效期 ",t.start_use_date,"至",t.end_use_date," ",0==t.exclude_holiday?"":"除去法定节假日"," ",0==t.exclude_weekend?"":"周一至周五"," ",t.start_use_time,"-",t.end_use_time),"-1"!=t.expire&&g.default.createElement("span",{className:"exchange-coupon-expire-time"},"有效期 ","0"==t.expire?"领取当天生效,有效期1天":"领取"+(t.react>0?t.react+"天后":"当天")+"生效，有效期"+t.expire+"天",0==t.exclude_holiday?"":"除去法定节假日"," ",0==t.exclude_weekend?"":"周一至周五"," ",t.start_use_time,"-",t.end_use_time)))},c=function(e){var t={0:"减",1:"折",2:"代",3:"兑",4:"储",5:"通",6:"次"};return g.default.createElement("div",{className:"exchange-coupon-icon "+(0==e.stock?"exchange-coupon-icon-used":""),style:{backgroundColor:s}},g.default.createElement("div",null,t[e.type]))};return g.default.createElement("div",{className:"custom-component exchange-coupon"},n.map(function(t,a){return g.default.createElement("div",{className:"exchange-coupon-item background-ele",key:t.id,style:{marginBottom:o+"px"},"data-compindex":e.props.index,"data-id":t.id,"data-status":t.recv_status,onClick:e.turnToexchangeCouponDetail},r(t,a))}),!n.length&&g.default.createElement("div",{className:"no-data"},g.default.createElement("img",{src:"http://cdn.jisuapp.cn/static/webapp/images/request-none.png"}),g.default.createElement("p",null,"你还未添加可兑换优惠券~")))}}]),t}(g.default.Component),_=function(){var e=this;this.init=function(e,t){var a=t.data.eles[e],n=a.customFeature,o={},i={};o.in_show_list=1,o.enable_status=1,o.stock=1,o.exchangeable=1,o.page_size=n.loadingNum||10,o.page=1,o.is_integral=n.isIntegral?1:0,i["eles["+e+"].param"]=o,i["eles["+e+"].loading"]=!0,i["eles["+e+"].loadingFail"]=!1,i["eles["+e+"].list_data"]=[],i["eles["+e+"].is_more"]=1,i["eles["+e+"].curpage"]=0,t.setData(i),h.appMethod.sendRequest({hideLoading:!0,url:"/index.php?r=AppShop/getCoupons",data:o,method:"post",success:function(a){if(0==a.status){var n={};n["eles["+e+"].list_data"]=a.data,n["eles["+e+"].is_more"]=a.is_more,n["eles["+e+"].curpage"]=1,n["eles["+e+"].loading"]=!1,n["eles["+e+"].loadingFail"]=!1,t.setData(n)}},fail:function(a){var n={};n["eles["+e+"].loadingFail"]=!0,n["eles["+e+"].loading"]=!1,t.setData(n)}})},this.exchangeCouponScrollFunc=function(e){var t=h.appMethod.getAppCurrentPage(),a="object"==(void 0===e?"undefined":(0,i.default)(e))?e.currentTarget.dataset.compindex:e,n=t.data.eles[a],o=n.curpage+1,s=n.customFeature,r={},c={};n.is_more||"object"!=(void 0===e?"undefined":(0,i.default)(e))||"tap"!=e.type||h.appMethod.showModal({content:"已经加载到最后了"}),!n.loading&&n.is_more&&(r["eles["+a+"].loading"]=!0,r["eles["+a+"].loadingFail"]=!1,t.setData(r),c=n.param,c.page_size=+s.loadingNum||10,c.page=o,h.appMethod.sendRequest({url:"/index.php?r=AppShop/getCoupons",data:c,method:"post",hideLoading:!0,success:function(e){r={};for(var i=e.data,s=t.downcountArr||[],l=0;l<i.length;l++){var d=i[l],u=void 0,m=(o-1)*c.page_size+l;d.downCount={hours:"00",minutes:"00",seconds:"00"},0==d.seckill_start_state?u=h.appMethod.beforeSeckillDownCount(d,t,a+".list_data["+m+"]"):1==d.seckill_start_state&&(u=h.appMethod.duringSeckillDownCount(d,t,a+".list_data["+m+"]")),u&&s.push(u)}r["eles["+a+"].list_data"]=n.list_data.concat(e.data),r["eles["+a+"].is_more"]=e.is_more,r["eles["+a+"].curpage"]=e.current_page,r["eles["+a+"].loading"]=!1,r["eles["+a+"].loadingFail"]=!1,t.downcountArr=s,t.setData(r)},fail:function(){var e={};e["eles["+a+"].loadingFail"]=!0,e["eles["+a+"].loading"]=!1,t.setData(e)},complete:function(){}}))},this.turnToexchangeCouponDetail=function(e){var t=h.appMethod.getAppCurrentPage(),a=e.currentTarget.dataset.compindex,n=t.data.eles[a];h.appMethod.globalData.exchangeCouponStyle=n;var o=e.currentTarget.dataset,i=o.id;o.status;h.appMethod.turnToPage("/exchangeCoupon/pages/exchangeCouponDetail/exchangeCouponDetail?id="+i)},this.getexchangeCoupon=function(t){var a=h.appMethod.getAppCurrentPage(),n=t.currentTarget.dataset,o=n.compindex,i=a.data.eles[o];h.appMethod.globalData.exchangeCouponStyle=i;var s=n.coinid,r=n.index,c=n.status,l=n.money?+n.money:0,d=n.limitnum?+n.limitnum:0,u=n.userrecvnum?+n.userrecvnum:0;return 0==c?void h.appMethod.showModal({content:"超过可兑换次数"}):l&&l>0?void h.appMethod.turnToPage("/exchangeCoupon/pages/exchangeCouponDetailOrder/exchangeCouponDetailOrder?id="+s):void h.appMethod.showModal({title:"是否确认兑换？",content:"注：兑换成功后不支持退换",showCancel:!0,cancelText:"否",confirmText:"是",confirm:function(){e.checkexchangeCoupon(s,o,r,d,u)}})},this.checkexchangeCoupon=function(e,t,a,n,o){var i=h.appMethod.getAppCurrentPage();h.appMethod.sendRequest({url:"/index.php?r=appCoupon/addCouponOrder",data:{id:e},method:"post",hideLoading:!0,success:function(e){if(h.appMethod.showToast({title:"兑换成功",icon:"none",duration:1e3}),n>=o+1){var s={};s["eles["+t+"].list_data["+a+"].user_recv_num"]=o+1,i.setData(s)}else{var r={};r["eles["+t+"].list_data["+a+"].recv_status"]=0,i.setData(r)}},complete:function(e){}})}};t.default=v},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(22),i=n(o),s=a(0),r=n(s),c=a(3),l=n(c),d=a(1),u=n(d),m=a(2),p=n(m);a(23);var f=a(4),g=n(f),h=a(5);a(680);var v=function(e){function t(e){(0,r.default)(this,t);var a=(0,u.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));_.call(a);var n=e.index,o=h.appMethod.getAppCurrentPage();return a.init(n,o),a}return(0,p.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this,t=this.props.data,a=t.customFeature,n=t.currentRowNumberData,o=t.numberTypeData,i=t.isShowTakeNumberWindow,s=t.isShowCancelWindow,r=t.selectRowNumberTypeId,c=a.lineBackgroundColor,l=a.picBorderRadius,d=a.secColor;n=n||{count_info:[]},o=o||{additional_info:{}},i=!!i,s=!!s;return g.default.createElement("div",{className:"custom-component row-num"},g.default.createElement("div",{id:"row-number"},function(){return g.default.createElement("div",{className:"row-number-top",style:{backgroundColor:n.id||1==o.status?c:"#838383"}},!n.id&&g.default.createElement("div",{className:"number-top-title"},"尚未取号"),n.id&&g.default.createElement("div",null,g.default.createElement("div",{className:"number-top-title"},n.line_up_type_data.name,n.queue_num_name),g.default.createElement("div",{className:"wait-content"},g.default.createElement("span",null,g.default.createElement("span",{className:"color-round",style:{backgroundColor:d}}),4==n.status?"已过号":"还要等待: "+n.head_wait_num+"个号"),g.default.createElement("span",null,g.default.createElement("span",{className:"color-round",style:{backgroundColor:d}}),"预计等待: ",4==n.status?"--":(n.prepare_wait_time>o.max_display_time?">"+o.max_display_time:n.prepare_wait_time)+"分钟"))))}(),function(){return g.default.createElement("div",{className:"row-number-bottom"},g.default.createElement("div",{className:"number-bottom-content"},g.default.createElement("div",{className:"number-refresh",onClick:function(t){return e.rowNumberRefresh(t)},style:{backgroundColor:d}},g.default.createElement("span",{className:"ico-moon icon-row-number-refresh"})),g.default.createElement("div",{className:"bottom-content-title"},g.default.createElement("div",null,"类型"),g.default.createElement("div",null,"前方排队"),g.default.createElement("div",null,n.id?"当前进度":"预计时间")),n.count_info.map(function(e,t){return g.default.createElement("div",{key:t},g.default.createElement("div",{className:"content-type"},g.default.createElement("span",null,e.line_up_type_name),1==e.accept_range.enable&&g.default.createElement("span",null,e.accept_range.from,"-",e.accept_range.to,"人")),g.default.createElement("div",null,e.head_wait_num),(n.id||0!=o.status)&&g.default.createElement("div",{className:"estimated-time"},n.id?e.earliest_queue_num_name||"--":e.prepare_wait_time>0?(e.prepare_wait_time>o.max_display_time?">"+o.max_display_time:e.prepare_wait_time)+"分钟":"无需等待",e.prepare_wait_time<=0&&!n.id&&g.default.createElement("div",{className:"row-number-round",style:{backgroundColor:c}})),!n.id&&0==o.status&&g.default.createElement("div",null,"- -"))})),!o.status&&g.default.createElement("div",{className:"no-open-row-number"},"商家暂未开启取号功能"),g.default.createElement("div",{className:"number-bottom-bottom"},g.default.createElement("div",{className:"number-tips"},o.additional_info.info),n.id?g.default.createElement("div",{className:"take-number-box"},g.default.createElement("span",{style:{color:c,borderColor:c,borderRadius:l},"data-compindex":e.props.index,onClick:e.showCancelWindow},"取消排号"),g.default.createElement("span",{style:{backgroundColor:c,borderRadius:l},"data-order-id":n.order_id,onClick:e.goToCheckRowNumberDetail},"查看号单")):g.default.createElement("div",{className:"take-number",style:{backgroundColor:1==o.status?c:"#838383",borderRadius:l},"data-compindex":e.props.index,onClick:1==o.status?e.showTakeNumberWindow:null},1==o.status?"取号"+(o.line_up_price>0?" ¥"+o.line_up_price:""):"暂停取号")))}()),i&&g.default.createElement("div",{className:"take-number-window"},function(){return g.default.createElement("div",{className:"take-number-contain"},g.default.createElement("div",{className:"take-number-head",style:{backgroundColor:c}},g.default.createElement("span",{className:"color-round",style:{backgroundColor:d}}),"请选择排号类型",g.default.createElement("span",{className:"color-round",style:{backgroundColor:d}})),g.default.createElement("div",{className:"take-number-content"},o.line_up_type_info.map(function(t){return g.default.createElement("div",{key:t.id,className:"take-number-type "+(r==t.id?"active":""),style:{background:r==t.id?c:""},"data-id":t.id,"data-compindex":e.props.index,onClick:e.selectRowNumberType},g.default.createElement("span",null,t.name),1==t.accept_range.enable&&g.default.createElement("span",null,"(",t.accept_range.from,"-",t.accept_range.to,"人)"))})),g.default.createElement("div",{className:"take-number-bottom"},g.default.createElement("div",{"data-compindex":e.props.index,onClick:e.hideTakeNumberWindow},"取消"),g.default.createElement("form",null,g.default.createElement("button",{type:"button",style:{color:c},"data-compindex":e.props.index,onClick:o.line_up_price>0?e.goToPreviewRowNumberOrder:e.sureTakeNumber},"确认",o.line_up_price>0?"¥"+o.line_up_price:""))))}()),s&&g.default.createElement("div",{className:"take-num-cancel-window"},function(){return g.default.createElement("div",{className:"cancel-window-box"},g.default.createElement("div",{className:"cancel-window-content"},"取消后您的排号信息无法恢复排号费将退款。确定取消？"),g.default.createElement("div",{className:"cancel-window-btn"},g.default.createElement("span",{"data-order-id":n.order_id,"data-compindex":e.props.index,onClick:e.cancelCheckRowNumber},"取消排号"),g.default.createElement("span",{style:{color:c},"data-compindex":e.props.index,onClick:e.hideCancelWindow},"继续排号")))}()))}}]),t}(g.default.Component),_=function(){var e=this;this.init=function(t,a){e.isOpenRowNumber(t,a)},this.isOpenRowNumber=function(t,a){var n={};h.appMethod.sendRequest({url:"/index.php?r=AppTostore/getTostoreLineUpSetting",data:{sub_app_id:h.appMethod.getPageFranchiseeId()},success:function(o){n["eles["+t+"].numberTypeData"]=o.data,a.setData(n),i.default.hide(),e.rowNumber(a,t)}})},this.rowNumber=function(e,t){var a={};h.appMethod.sendRequest({url:"/index.php?r=AppTostore/getLiningUpQueueByUserToken",data:{sub_app_id:h.appMethod.getPageFranchiseeId()},method:"post",success:function(n){a["eles["+t+"].currentRowNumberData"]=n.data,e.setData(a)}})},this.rowNumberRefresh=function(t){var a=h.appMethod.getAppCurrentPage(),n=t.currentTarget.dataset.compindex;i.default.loading("加载中",0),e.isOpenRowNumber(n,a)},this.showCancelWindow=function(e){var t=h.appMethod.getAppCurrentPage(),a=e.currentTarget.dataset.compindex,n={};n["eles["+a+"].isShowCancelWindow"]=!0,t.setData(n)},this.goToCheckRowNumberDetail=function(e){var t=e.currentTarget.dataset.orderId,a=h.appMethod.getPageFranchiseeId();h.appMethod.turnToPage("/orderMeal/pages/checkRowNumberDetail/checkRowNumberDetail?orderId="+t+(a?"&franchisee="+a:""))},this.showTakeNumberWindow=function(e){var t=h.appMethod.getAppCurrentPage(),a=e.currentTarget.dataset.compindex,n={};n["eles["+a+"].selectRowNumberTypeId"]="",n["eles["+a+"].isShowTakeNumberWindow"]=!0,t.setData(n)},this.selectRowNumberType=function(e){var t=h.appMethod.getAppCurrentPage(),a=e.currentTarget.dataset.compindex,n={};n["eles["+a+"].selectRowNumberTypeId"]=e.currentTarget.dataset.id,t.setData(n)},this.hideTakeNumberWindow=function(e){var t=h.appMethod.getAppCurrentPage(),a=e.currentTarget.dataset.compindex,n={};n["eles["+a+"].isShowTakeNumberWindow"]=!1,t.setData(n)},this.goToPreviewRowNumberOrder=function(e){var t=h.appMethod.getAppCurrentPage(),a=e.currentTarget.dataset.compindex,n=t.data.eles[a].selectRowNumberTypeId,o=h.appMethod.getPageFranchiseeId(),i={};if(!n)return void h.appMethod.showToast({title:"请选择排号类型",icon:"none"});i["eles["+a+"].isShowTakeNumberWindow"]=!1,t.setData(i),h.appMethod.turnToPage("/orderMeal/pages/previewRowNumberOrder/previewRowNumberOrder?detail="+n+(o?"&franchisee="+o:""))},this.sureTakeNumber=function(t){var a=h.appMethod.getAppCurrentPage(),n=t.currentTarget.dataset.compindex,o={},i=a.data.eles[n],s=i.selectRowNumberTypeId;if(!s)return void h.appMethod.showToast({title:"请选择排号类型",icon:"none"});i.isClick||(o["eles["+n+"].isClick"]=!0,a.setData(o),h.appMethod.sendRequest({url:"/index.php?r=AppTostore/addLineUpOrder",data:{line_up_type_id:s,formId:t.detail.formId,total_price:0,sub_app_id:h.appMethod.getPageFranchiseeId()},method:"post",success:function(t){h.appMethod.sendRequest({url:"/index.php?r=AppShop/paygoods",data:{order_id:t.data,total_price:0},success:function(t){o={},o["eles["+n+"].isClick"]=!1,o["eles["+n+"].isShowTakeNumberWindow"]=!1,a.setData(o),e.isOpenRowNumber(n,a),h.appMethod.showToast({title:"取号成功，请耐心等待",icon:"none"})}})}}))},this.cancelCheckRowNumber=function(t){var a=t.currentTarget.dataset.orderId,n=h.appMethod.getAppCurrentPage(),o=t.currentTarget.dataset.compindex,i={};h.appMethod.sendRequest({url:"/index.php?r=AppTostore/lineUpOrderRefund",method:"post",data:{order_id:a,sub_app_id:h.appMethod.getPageFranchiseeId()},success:function(t){e.isOpenRowNumber(o,n),i["eles["+o+"].isShowCancelWindow"]=!1,n.setData(i)}})},this.hideCancelWindow=function(e){var t=h.appMethod.getAppCurrentPage(),a=e.currentTarget.dataset.compindex,n={};n["eles["+a+"].isShowCancelWindow"]=!1,t.setData(n)}};t.default=v},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(162),i=n(o),s=a(163),r=n(s),c=a(44),l=n(c),d=a(8),u=n(d),m=a(22),p=n(m),f=a(0),g=n(f),h=a(3),v=n(h),_=a(1),y=n(_),E=a(2),b=n(E);a(164),a(165),a(45),a(23);var N=a(4),R=n(N),k=a(38),w=a(34),x=a(6);a(685);var C=function(e){function t(e){(0,g.default)(this,t);var a=(0,y.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={takeOutInfo:{},category:[],goodsList:[],AssessList:[],categoryName:"",loading:!1,selectId:"",selectIndex:0},a.getTakeOutInfo=function(){var e={app_id:(0,k.getAppId)()};return new Promise(function(t){(0,w.ajax)({url:"/index.php?r=AppShop/getTakeOutInfo",data:e,success:function(e){if(0!==e.status)return void p.default.info(e.data);a.setState({takeOutInfo:e.data}),t()}})})},a.getCategory=function(){var e={app_id:(0,k.getAppId)(),goods_type:2,filter_null:1};return new Promise(function(t){(0,w.ajax)({url:"/index.php?r=AppShop/getGoodsCategory",data:e,success:function(e){if(0!==e.status)return void p.default.info(e.data);0!==e.data.length&&(a.setState({category:e.data}),t())}})})},a.getGoodsList=function(){a.setState({loading:!0});var e={idx_arr:{idx:"category",idx_value:"all"===a.state.selectId?"":a.state.selectId}},t=(0,u.default)({app_id:(0,k.getAppId)(),goods_type:2,form:"takeout",page:1,page_size:10,is_integral:5,sort_key:"",sort_direction:0},e);return new Promise(function(e){(0,w.ajax)({url:"/index.php?r=AppShop/GetGoodsList",data:t,success:function(t){if(0!==t.status)return void p.default.info(t.data);a.setState({goodsList:t.data,loading:!1}),e()}})})},a.getAssessList=function(){var e={app_id:(0,k.getAppId)(),goods_type:2,page:1,page_size:10};return new Promise(function(t){(0,w.ajax)({url:"/index.php?r=AppShop/getAssessList",data:e,success:function(e){if(0!==e.status)return void p.default.info(e.data);a.setState({AssessList:e.data}),t()}})})},a.switchCategory=function(e,t,n){a.state.selectId===e&&a.state.selectIndex===n||a.setState({selectId:e,selectIndex:n,categoryName:t,goodsList:[]},function(){a.getGoodsList()})},a}return(0,b.default)(t,e),(0,v.default)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.data;console.log(t);var a=t.customFeature,n=t.content;this.getTakeOutInfo().then(function(){"1"===a.databind?e.getCategory().then(function(){e.setState({selectId:e.state.category[0].id,categoryName:e.state.category[0].name}),e.getGoodsList()}):(e.setState({selectId:n[0].source,categoryName:n[0].text}),e.getGoodsList())})}},{key:"render",value:function(){var e=this,t=this.props.data,a=t.customFeature,n=t.content,o=[{title:"商品"},{title:"评价"},{title:"店铺"}],s=(0,x.cssObj2DomObj)(a.style),c=(0,x.transformPx2Rem)(a.logoRadius),d=(0,x.convertStyleData)(a.leftSpan);d.paddingLeft=(0,x.transformPx2Rem)(a.typeLeft,320);var u={backgroundColor:a.selectedBackgroundColor,color:a.selectedColor,borderLeft:"4px solid #ff7100",paddingLeft:(0,x.transformPx2Rem)(a.typeLeft,320)},m={border:"1px solid #ff7100",transform:"scale(0.5, 1)"};return R.default.createElement("div",{className:"custom-component takeout"},a.showShopInfo&&R.default.createElement("div",{className:"header"},"0"==a.mode&&R.default.createElement("div",{className:"shop-desc-mode-0"},R.default.createElement("div",{className:"info-wrap"},R.default.createElement("div",{className:"logo",style:{borderRadius:c}},R.default.createElement("img",{src:this.state.takeOutInfo.logo,alt:""})),R.default.createElement("div",{className:"shop-info"},R.default.createElement("div",{className:"msg",style:{color:a.storeSecColor}},"起送价¥",this.state.takeOutInfo.min_deliver_price,R.default.createElement("span",null,"|"),"配送费¥",this.state.takeOutInfo.deliver_fee,R.default.createElement("span",null,"|"),this.state.takeOutInfo.deliver_time,"分钟送达"),R.default.createElement("div",{className:"activity",style:{color:a.storeSecColor}},R.default.createElement("span",null,"暂无商家活动"),R.default.createElement(l.default,{type:"right",size:"xxs"})))),R.default.createElement("div",{className:"line"})),"1"==a.mode&&R.default.createElement("div",{className:"shop-desc-mode-1"},R.default.createElement("div",{className:"top",style:s},R.default.createElement("div",{className:"logo",style:{borderRadius:c}},R.default.createElement("img",{src:this.state.takeOutInfo.logo,alt:""}))),R.default.createElement("div",{className:"info-wrap"},R.default.createElement("div",{className:"msg",style:{color:a.storeSecColor}},"起送价¥",this.state.takeOutInfo.min_deliver_price,R.default.createElement("span",null,"|"),"配送费¥",this.state.takeOutInfo.deliver_fee,R.default.createElement("span",null,"|"),this.state.takeOutInfo.deliver_time,"分钟送达"),R.default.createElement("div",{className:"activity",style:{color:a.storeSecColor}},R.default.createElement("span",null,"暂无商家活动"),R.default.createElement(l.default,{type:"right",size:"xxs"}))),R.default.createElement("div",{className:"line"})),"2"==a.mode&&R.default.createElement("div",{className:"shop-desc-mode-2"},R.default.createElement("div",{className:"top",style:s}),R.default.createElement("div",{className:"info"},R.default.createElement("div",{className:"msg",style:{color:a.storeSecColor}},"起送价¥",this.state.takeOutInfo.min_deliver_price,R.default.createElement("span",null,"|"),"配送费¥",this.state.takeOutInfo.deliver_fee,R.default.createElement("span",null,"|"),this.state.takeOutInfo.deliver_time,"分钟送达"),R.default.createElement("div",{className:"activity",style:{color:a.storeSecColor}},R.default.createElement("span",null,"暂无商家活动"),R.default.createElement(l.default,{type:"right",size:"xxs"}))),R.default.createElement("div",{className:"logo",style:{borderRadius:c}},R.default.createElement("img",{src:this.state.takeOutInfo.logo,alt:""})))),R.default.createElement("div",{className:"tab"},R.default.createElement(i.default,{tabs:o,tabBarActiveTextColor:"#ff7100",tabBarUnderlineStyle:m},R.default.createElement("div",{className:"goods-wrap",style:{height:"100%"}},R.default.createElement("div",{className:"sort-list"},"0"===a.databind&&n.map(function(t,a){return R.default.createElement("div",{className:"sort-item",key:a,onClick:function(){return e.switchCategory(t.source,t.text,a)},style:e.state.selectIndex===a?u:d},t.text)}),"1"===a.databind&&this.state.category.map(function(t,a){return R.default.createElement("div",{className:"sort-item",key:a,onClick:function(){return e.switchCategory(t.id,t.name)},style:e.state.selectId===t.id?u:d},t.name)})),R.default.createElement("div",{className:"goods-list"},R.default.createElement("div",{className:"goods-sort"},this.state.categoryName),R.default.createElement(r.default,{animating:this.state.loading,size:"large"}),this.state.goodsList.map(function(e){return R.default.createElement("div",{className:"goods-type",key:e.form_data.id},R.default.createElement("div",{className:"goods-item"},R.default.createElement("img",{src:e.form_data.cover,alt:""}),R.default.createElement("div",{className:"goods-info"},R.default.createElement("div",{className:"goods-top"},R.default.createElement("div",{className:"title"},e.form_data.title),R.default.createElement("div",{className:"sales"},"销量：",e.form_data.sales)),R.default.createElement("div",{className:"goods-bottom"},R.default.createElement("div",{className:"price"},R.default.createElement("span",{className:"real-price"},"￥",e.form_data.goods_price),a.isShowVirtualPrice&&R.default.createElement("span",{className:"virtual-price"},"￥",e.form_data.virtual_price)),R.default.createElement("div",{className:"buy-btn"},"+")))))}))),R.default.createElement("div",{className:"assess-wrap",style:{height:"500px"}},0===this.state.AssessList.length&&R.default.createElement("div",{className:"no-assess"},R.default.createElement("img",{src:"https://www.zhichiwangluo.com/zhichi_frontend/static/webapp/images/moreAssess.png",alt:""}),R.default.createElement("div",null,"暂无任何评价")),0!==this.state.AssessList.length&&R.default.createElement("div",{className:"assess-list"})),R.default.createElement("div",{className:"shop-wrap",style:{height:"500px"}},R.default.createElement("div",{className:"merchant-info"},R.default.createElement("div",{className:"info-title"},"商家信息"),R.default.createElement("div",{className:"info-content"},R.default.createElement("div",{className:"info-item"},R.default.createElement("i",{className:"icon-fesadress"}),this.state.takeOutInfo.address_detail),R.default.createElement("div",{className:"info-item"},R.default.createElement("i",{className:"icon-tokeout-info"}),this.state.takeOutInfo.description),R.default.createElement("div",{className:"info-item"},R.default.createElement("i",{className:"icon-sales-num"}),"月售",this.state.takeOutInfo.total_sales,"份"),R.default.createElement("div",{className:"info-item"},R.default.createElement("i",{className:"icon-business-time"}),"营业时间为：00:00-23:59"))),R.default.createElement("div",{className:"delivery-info"},R.default.createElement("div",{className:"info-title"},"配送信息"),R.default.createElement("div",{className:"info-content"},R.default.createElement("div",{className:"delivery-item"},R.default.createElement("div",{className:"info-item"},R.default.createElement("i",{className:"icon-distribution"}),"商家配送"),R.default.createElement("div",{className:"item-desc"}))))))),R.default.createElement("div",{className:"bottom"},R.default.createElement("div",{className:"money-count"},R.default.createElement("div",{className:"cart-wrap"},R.default.createElement("i",{className:"icon icon-fn-cart"})),R.default.createElement("div",null,"请选择商品")),R.default.createElement("div",{className:"order-btn"},"还差25元起送")))}}]),t}(R.default.Component);t.default=C},function(e,t,a){"use strict";function n(e,t){return Math.sqrt(e*e+t*t)}function o(e,t){var a=Math.atan2(t,e);return 180/(Math.PI/a)}function i(){return Date.now()}function s(e){if(!(e.length<2)){var t=e[0],a=t.x,i=t.y,s=e[1],r=s.x,c=s.y,l=r-a,d=c-i;return{x:l,y:d,z:n(l,d),angle:o(l,d)}}}function r(e,t,a){var i=e[0],s=i.x,r=i.y,c=t[0],l=c.x,d=c.y,u=l-s,m=d-r,p=n(u,m);return{x:u,y:m,z:p,time:a,velocity:p/a,angle:o(u,m)}}function c(e,t){var a=e.angle;return t.angle-a}function l(e,t){return e+t[0].toUpperCase()+t.slice(1)}function d(e,t){return Math.abs(e)>=q.threshold&&Math.abs(t)>q.velocity}function u(e,t){return!!(t&e)}function m(e,t){var a=e.x,n=e.y,o=t.x,i=t.y,s=o-a,r=i-n;return 0===s&&0===r?T:Math.abs(s)>=Math.abs(r)?s<0?P:L:r<0?A:F}function p(e){var t=void 0;switch(e){case T:break;case P:t="left";break;case L:t="right";break;case A:t="up";break;case F:t="down"}return t}function f(e){return{transform:e,WebkitTransform:e,MozTransform:e}}function g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"px";return"translate3d("+(e=arguments.length>2&&void 0!==arguments[2]&&arguments[2]?"0px, "+e+t+", 0px":""+e+t+", 0px, 0px")+")"}function h(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"px",n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];arguments.length>4&&void 0!==arguments[4]&&arguments[4]?n?e.style.top=""+t+a:e.style.left=""+t+a:v(e.style,g(t,a,n))}function v(e,t){e.transform=t,e.webkitTransform=t,e.mozTransform=t}Object.defineProperty(t,"__esModule",{value:!0});var _=a(8),y=a.n(_),E=a(3),b=a.n(E),N=a(159),R=a.n(N),k=a(0),w=a.n(k),x=a(1),C=a.n(x),D=a(2),S=a.n(D),I=a(4),M=a.n(I),T=1,P=2,L=4,A=8,F=16,O=P|L,B=A|F,j=O|B,G={time:251},q={threshold:10,velocity:.3},U={all:j,vertical:B,horizontal:O},z=function(e){function t(e){w()(this,t);var a=C()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={},a.triggerEvent=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];var i=a.props[e];"function"==typeof i&&i.apply(void 0,[a.getGestureState()].concat(n))},a.triggerCombineEvent=function(e,t){for(var n=arguments.length,o=Array(n>2?n-2:0),i=2;i<n;i++)o[i-2]=arguments[i];a.triggerEvent.apply(a,[e].concat(o)),a.triggerSubEvent.apply(a,[e,t].concat(o))},a.triggerSubEvent=function(e,t){for(var n=arguments.length,o=Array(n>2?n-2:0),i=2;i<n;i++)o[i-2]=arguments[i];if(t){var s=l(e,t);a.triggerEvent.apply(a,[s].concat(o))}},a.triggerPinchEvent=function(e,t){for(var n=arguments.length,o=Array(n>2?n-2:0),i=2;i<n;i++)o[i-2]=arguments[i];var s=a.gesture.scale;"move"===t&&"number"==typeof s&&(s>1&&a.triggerEvent("onPinchOut"),s<1&&a.triggerEvent("onPinchIn")),a.triggerCombineEvent.apply(a,[e,t].concat(o))},a.initPressTimer=function(){a.cleanPressTimer(),a.pressTimer=setTimeout(function(){a.setGestureState({press:!0}),a.triggerEvent("onPress")},G.time)},a.cleanPressTimer=function(){a.pressTimer&&clearTimeout(a.pressTimer)},a.setGestureState=function(e){a.gesture||(a.gesture={}),a.gesture.touches&&(a.gesture.preTouches=a.gesture.touches),a.gesture=y()({},a.gesture,e)},a.getGestureState=function(){return a.gesture?y()({},a.gesture):a.gesture},a.cleanGestureState=function(){delete a.gesture},a.getTouches=function(e){return Array.prototype.slice.call(e.touches).map(function(e){return{x:e.screenX,y:e.screenY}})},a.triggerUserCb=function(e,t){var n=l("onTouch",e);n in a.props&&a.props[n](t)},a._handleTouchStart=function(e){a.triggerUserCb("start",e),a.event=e,e.touches.length>1&&e.preventDefault(),a.initGestureStatus(e),a.initPressTimer(),a.checkIfMultiTouchStart()},a.initGestureStatus=function(e){a.cleanGestureState();var t=a.getTouches(e),n=i(),o=s(t);a.setGestureState({startTime:n,startTouches:t,startMutliFingerStatus:o,time:n,touches:t,mutliFingerStatus:o,srcEvent:a.event})},a.checkIfMultiTouchStart=function(){var e=a.props,t=e.enablePinch,n=e.enableRotate,o=a.gesture.touches;if(o.length>1&&(t||n)){if(t){var i=s(o);a.setGestureState({startMutliFingerStatus:i,pinch:!0,scale:1}),a.triggerCombineEvent("onPinch","start")}n&&(a.setGestureState({rotate:!0,rotation:0}),a.triggerCombineEvent("onRotate","start"))}},a._handleTouchMove=function(e){a.triggerUserCb("move",e),a.event=e,a.gesture&&(a.cleanPressTimer(),a.updateGestureStatus(e),a.checkIfSingleTouchMove(),a.checkIfMultiTouchMove())},a.checkIfMultiTouchMove=function(){var e=a.gesture,t=e.pinch,n=e.rotate,o=e.touches,i=e.startMutliFingerStatus,s=e.mutliFingerStatus;if(t||n){if(o.length<2)return a.setGestureState({pinch:!1,rotate:!1}),t&&a.triggerCombineEvent("onPinch","cancel"),void(n&&a.triggerCombineEvent("onRotate","cancel"));if(t){var r=s.z/i.z;a.setGestureState({scale:r}),a.triggerPinchEvent("onPinch","move")}if(n){var l=c(i,s);a.setGestureState({rotation:l}),a.triggerCombineEvent("onRotate","move")}}},a.allowGesture=function(){return u(a.gesture.direction,a.directionSetting)},a.checkIfSingleTouchMove=function(){var e=a.gesture,t=e.pan,n=e.touches,o=e.moveStatus,i=e.preTouches,s=e.availablePan,r=void 0===s||s;if(n.length>1)return a.setGestureState({pan:!1}),void(t&&a.triggerCombineEvent("onPan","cancel"));if(o&&r){var c=m(i[0],n[0]);a.setGestureState({direction:c});var l=p(c);if(!a.allowGesture())return void(t||a.setGestureState({availablePan:!1}));t?(a.triggerCombineEvent("onPan",l),a.triggerSubEvent("onPan","move")):(a.triggerCombineEvent("onPan","start"),a.setGestureState({pan:!0,availablePan:!0}))}},a.checkIfMultiTouchEnd=function(e){var t=a.gesture,n=t.pinch,o=t.rotate;n&&a.triggerCombineEvent("onPinch",e),o&&a.triggerCombineEvent("onRotate",e)},a.updateGestureStatus=function(e){var t=i();if(a.setGestureState({time:t}),e.touches&&e.touches.length){var n=a.gesture,o=n.startTime,c=n.startTouches,l=n.pinch,d=n.rotate,u=a.getTouches(e),m=r(c,u,t-o),p=void 0;(l||d)&&(p=s(u)),a.setGestureState({touches:u,mutliFingerStatus:p,moveStatus:m})}},a._handleTouchEnd=function(e){a.triggerUserCb("end",e),a.event=e,a.gesture&&(a.cleanPressTimer(),a.updateGestureStatus(e),a.doSingleTouchEnd("end"),a.checkIfMultiTouchEnd("end"))},a._handleTouchCancel=function(e){a.triggerUserCb("cancel",e),a.event=e,a.gesture&&(a.cleanPressTimer(),a.updateGestureStatus(e),a.doSingleTouchEnd("cancel"),a.checkIfMultiTouchEnd("cancel"))},a.triggerAllowEvent=function(e,t){a.allowGesture()?a.triggerCombineEvent(e,t):a.triggerSubEvent(e,t)},a.doSingleTouchEnd=function(e){var t=a.gesture,n=t.moveStatus,o=t.pinch,i=t.rotate,s=t.press,r=t.pan,c=t.direction;if(!o&&!i){if(n){var l=n.z,u=n.velocity,m=d(l,u);if(a.setGestureState({swipe:m}),r&&a.triggerAllowEvent("onPan",e),m){var f=p(c);return void a.triggerAllowEvent("onSwipe",f)}}if(s)return void a.triggerEvent("onPressUp");a.triggerEvent("onTap")}},a.getTouchAction=function(){var e=a.props,t=e.enablePinch,n=e.enableRotate,o=a.directionSetting;return t||n||o===j?"pan-x pan-y":o===B?"pan-x":o===O?"pan-y":"auto"},a.directionSetting=U[e.direction],a}return S()(t,e),b()(t,[{key:"componentWillUnmount",value:function(){this.cleanPressTimer()}},{key:"render",value:function(){var e=this.props.children,t=M.a.Children.only(e),a=this.getTouchAction(),n={onTouchStart:this._handleTouchStart,onTouchMove:this._handleTouchMove,onTouchCancel:this._handleTouchCancel,onTouchEnd:this._handleTouchEnd};return M.a.cloneElement(t,y()({},n,{style:y()({touchAction:a},t.props.style||{})}))}}]),t}(I.Component),V=z;z.defaultProps={enableRotate:!1,enablePinch:!1,direction:"all"};var W=this&&this.__rest||function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&(a[n[o]]=e[n[o]]);return a},H=function(e){function t(){w()(this,t);var e=C()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.offsetX=0,e.offsetY=0,e.setLayout=function(t){e.layout=t},e}return S()(t,e),b()(t,[{key:"componentWillReceiveProps",value:function(e){this.props.active!==e.active&&(e.active?(this.offsetX=0,this.offsetY=0):(this.offsetX=this.layout.scrollLeft,this.offsetY=this.layout.scrollTop))}},{key:"render",value:function(){var e=this.props,t=(e.active,e.fixX),a=e.fixY,n=W(e,["active","fixX","fixY"]),o=y()({},t&&this.offsetX?f(g(-this.offsetX,"px",!1)):{},a&&this.offsetY?f(g(-this.offsetY,"px",!0)):{});return M.a.createElement("div",y()({},n,{style:o,ref:this.setLayout}),n.children)}}]),t}(M.a.PureComponent);H.defaultProps={fixX:!0,fixY:!0};var J=this&&this.__rest||function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&(a[n[o]]=e[n[o]]);return a},Y=function e(){w()(this,e),this.transform="",this.isMoving=!1,this.showPrev=!1,this.showNext=!1},Q=function(e){function t(e){w()(this,t);var a=C()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.onPan=function(){var e=0,t=0,n=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.isTabBarVertical(),n=+(""+e).replace("%","");return(""+e).indexOf("%")>=0&&(n/=100,n*=t?a.layout.clientHeight:a.layout.clientWidth),n};return{onPanStart:function(){a.setState({isMoving:!0})},onPanMove:function(e){if(e.moveStatus&&a.layout){var o=a.isTabBarVertical(),i=n()+(o?e.moveStatus.y:e.moveStatus.x),s=o?-a.layout.scrollHeight+a.layout.clientHeight:-a.layout.scrollWidth+a.layout.clientWidth;i=Math.min(i,0),i=Math.max(i,s),h(a.layout,i,"px",o),t=i,a.setState({showPrev:-i>0,showNext:i>s})}},onPanEnd:function(){var n=a.isTabBarVertical();e=t,a.setState({isMoving:!1,transform:g(t,"px",n)})},setCurrentOffset:function(t){return e=t}}}(),a.getTransformByIndex=function(e){var t=e.activeTab,n=e.tabs,o=e.page,i=void 0===o?0:o,s=a.isTabBarVertical(),r=a.getTabSize(i,n.length),c=i/2,l=Math.min(t,n.length-c-.5),d=Math.min(-(l-c+.5)*r,0);return a.onPan.setCurrentOffset(d+"%"),{transform:g(d,"%",s),showPrev:t>c-.5&&n.length>i,showNext:t<n.length-c-.5&&n.length>i}},a.onPress=function(e){var t=a.props,n=t.goToTab,o=t.onTabClick,i=t.tabs;o&&o(i[e],e),n&&n(e)},a.isTabBarVertical=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.props.tabBarPosition;return"left"===e||"right"===e},a.renderTab=function(e,t,n,o){var i=a.props,s=i.prefixCls,r=i.renderTab,c=i.activeTab,l=i.tabBarTextStyle,d=i.tabBarActiveTextColor,u=i.tabBarInactiveTextColor,m=i.instanceId,p=y()({},l),f=s+"-tab",g=!1;return c===t?(f+=" "+f+"-active",g=!0,d&&(p.color=d)):u&&(p.color=u),M.a.createElement("div",{key:"t_"+t,style:y()({},p,o?{height:n+"%"}:{width:n+"%"}),id:"m-tabs-"+m+"-"+t,role:"tab","aria-selected":g,className:f,onClick:function(){return a.onPress(t)}},r?r(e):e.title)},a.setContentLayout=function(e){a.layout=e},a.getTabSize=function(e,t){return 100/Math.min(e,t)},a.state=y()({},new Y,a.getTransformByIndex(e)),a}return S()(t,e),b()(t,[{key:"componentWillReceiveProps",value:function(e){this.props.activeTab===e.activeTab&&this.props.tabs===e.tabs&&this.props.tabs.length===e.tabs.length||this.setState(y()({},this.getTransformByIndex(e)))}},{key:"render",value:function(){var e=this,t=this.props,a=t.prefixCls,n=t.animated,o=t.tabs,i=void 0===o?[]:o,s=t.page,r=void 0===s?0:s,c=t.activeTab,l=void 0===c?0:c,d=t.tabBarBackgroundColor,u=t.tabBarUnderlineStyle,m=t.tabBarPosition,p=t.renderUnderline,g=this.state,h=g.isMoving,v=g.transform,_=g.showNext,E=g.showPrev,b=this.isTabBarVertical(),N=i.length>r,R=this.getTabSize(r,i.length),k=i.map(function(t,a){return e.renderTab(t,a,R,b)}),w=a;n&&!h&&(w+=" "+a+"-animated");var x={backgroundColor:d||""},C=N?y()({},f(v)):{},D=this.onPan,S=(D.setCurrentOffset,J(D,["setCurrentOffset"])),I={style:y()({},b?{height:R+"%"}:{width:R+"%"},b?{top:R*l+"%"}:{left:R*l+"%"},u),className:a+"-underline"};return M.a.createElement("div",{className:w+" "+a+"-"+m,style:x},E&&M.a.createElement("div",{className:a+"-prevpage"}),M.a.createElement(V,y()({},S,{direction:b?"vertical":"horizontal"}),M.a.createElement("div",{role:"tablist",className:a+"-content",style:C,ref:this.setContentLayout},k,p?p(I):M.a.createElement("div",I))),_&&M.a.createElement("div",{className:a+"-nextpage"}))}}]),t}(M.a.PureComponent);Q.defaultProps={prefixCls:"rmc-tabs-tab-bar",animated:!0,tabs:[],goToTab:function(){},activeTab:0,page:5,tabBarUnderlineStyle:{},tabBarBackgroundColor:"#fff",tabBarActiveTextColor:"",tabBarInactiveTextColor:"",tabBarTextStyle:{}};var K=function e(){w()(this,e)},X=0,$=function(e){function t(e){w()(this,t);var a=C()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.tabCache={},a.isTabVertical=function(){return"vertical"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.props.tabDirection)},a.shouldRenderTab=function(e){var t=a.props.prerenderingSiblingsNumber,n=void 0===t?0:t,o=a.state.currentTab,i=void 0===o?0:o;return i-n<=e&&e<=i+n},a.getOffsetIndex=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.props.distanceToChangeTab||0,o=Math.abs(e/t),i=o>a.state.currentTab?"<":">",s=Math.floor(o);switch(i){case"<":return o-s>n?s+1:s;case">":return 1-o+s>n?s:s+1;default:return Math.round(o)}},a.getSubElements=function(){var e=a.props.children,t={};return function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"$i$-",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"$ALL$";return Array.isArray(e)?e.forEach(function(e,n){e.key&&(t[e.key]=e),t[""+a+n]=e}):e&&(t[n]=e),t}},a.state={currentTab:a.getTabIndex(e)},a.nextCurrentTab=a.state.currentTab,a.instanceId=X++,a}return S()(t,e),b()(t,[{key:"getTabIndex",value:function(e){var t=e.page,a=e.initialPage,n=e.tabs,o=(void 0!==t?t:a)||0,i=0;return"string"==typeof o?n.forEach(function(e,t){e.key===o&&(i=t)}):i=o||0,i<0?0:i}},{key:"componentWillReceiveProps",value:function(e){this.props.page!==e.page&&void 0!==e.page&&this.goToTab(this.getTabIndex(e),!0,{},e)}},{key:"componentDidMount",value:function(){this.prevCurrentTab=this.state.currentTab}},{key:"componentDidUpdate",value:function(){this.prevCurrentTab=this.state.currentTab}},{key:"goToTab",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.props;if(!t&&this.nextCurrentTab===e)return!1;this.nextCurrentTab=e;var o=n.tabs,i=n.onChange;if(e>=0&&e<o.length){if(!t&&(i&&i(o[e],e),void 0!==n.page))return!1;this.setState(y()({currentTab:e},a))}return!0}},{key:"tabClickGoToTab",value:function(e){this.goToTab(e)}},{key:"getTabBarBaseProps",value:function(){var e=this.state.currentTab,t=this.props,a=t.animated,n=t.onTabClick,o=t.tabBarActiveTextColor,i=t.tabBarBackgroundColor,s=t.tabBarInactiveTextColor,r=t.tabBarPosition,c=t.tabBarTextStyle,l=t.tabBarUnderlineStyle,d=t.tabs;return{activeTab:e,animated:!!a,goToTab:this.tabClickGoToTab.bind(this),onTabClick:n,tabBarActiveTextColor:o,tabBarBackgroundColor:i,tabBarInactiveTextColor:s,tabBarPosition:r,tabBarTextStyle:c,tabBarUnderlineStyle:l,tabs:d,instanceId:this.instanceId}}},{key:"renderTabBar",value:function(e,t){var a=this.props.renderTabBar;return!1===a?null:a?a(e):M.a.createElement(t,e)}},{key:"getSubElement",value:function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"$i$-",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"$ALL$",i=e.key||""+n+t,s=a(n,o),r=s[i]||s[o];return r instanceof Function&&(r=r(e,t)),r||null}}]),t}(M.a.PureComponent);$.defaultProps={tabBarPosition:"top",initialPage:0,swipeable:!0,animated:!0,prerenderingSiblingsNumber:1,tabs:[],destroyInactiveTab:!1,usePaged:!0,tabDirection:"horizontal",distanceToChangeTab:.3};var Z=function(e){switch(e){case 2:case 4:return"horizontal";case 8:case 16:return"vertical";default:return"none"}},ee=function(e){function t(){w()(this,t);var e=C()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.contentPos="",e.isMoving=!1,e}return S()(t,e),t}(K),te=function(e){function t(e){w()(this,t);var a=C()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.onPan=function(){var e=0,t=0,n=void 0,o=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.isTabVertical(),n=+(""+e).replace("%","");return(""+e).indexOf("%")>=0&&(n/=100,n*=t?a.layout.clientHeight:a.layout.clientWidth),n};return{onPanStart:function(e){a.props.swipeable&&a.props.animated&&(n=Z(e.direction),a.setState({isMoving:!0}))},onPanMove:function(e){var i=a.props,s=i.swipeable,r=i.animated,c=i.useLeftInsteadTransform;if(e.moveStatus&&a.layout&&s&&r){var l=a.isTabVertical(),d=o();d+=l?"horizontal"===n?0:e.moveStatus.y:"vertical"===n?0:e.moveStatus.x;var u=l?-a.layout.scrollHeight+a.layout.clientHeight:-a.layout.scrollWidth+a.layout.clientWidth;d=Math.min(d,0),d=Math.max(d,u),h(a.layout,d,"px",l,c),t=d}},onPanEnd:function(){if(a.props.swipeable&&a.props.animated){e=t;var n=a.isTabVertical(),o=a.getOffsetIndex(t,n?a.layout.clientHeight:a.layout.clientWidth);a.setState({isMoving:!1}),o===a.state.currentTab?a.props.usePaged&&v(a.layout.style,a.getContentPosByIndex(o,a.isTabVertical(),a.props.useLeftInsteadTransform)):a.goToTab(o)}},setCurrentOffset:function(t){return e=t}}}(),a.onSwipe=function(e){var t=a.props,n=t.tabBarPosition,o=t.swipeable,i=t.usePaged;if(o&&i&&!a.isTabVertical())switch(n){case"top":case"bottom":switch(e.direction){case 2:a.isTabVertical()||a.goToTab(a.prevCurrentTab+1);case 8:a.isTabVertical()&&a.goToTab(a.prevCurrentTab+1);break;case 4:a.isTabVertical()||a.goToTab(a.prevCurrentTab-1);case 16:a.isTabVertical()&&a.goToTab(a.prevCurrentTab-1)}}},a.setContentLayout=function(e){a.layout=e},a.state=y()({},a.state,new ee,{contentPos:a.getContentPosByIndex(a.getTabIndex(e),a.isTabVertical(e.tabDirection),e.useLeftInsteadTransform)}),a}return S()(t,e),b()(t,[{key:"goToTab",value:function(e){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.props.usePaged,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.props,i=o.tabDirection,s=o.useLeftInsteadTransform,r={};return n&&(r={contentPos:this.getContentPosByIndex(e,this.isTabVertical(i),s)}),R()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"goToTab",this).call(this,e,a,r,o)}},{key:"tabClickGoToTab",value:function(e){this.goToTab(e,!1,!0)}},{key:"getContentPosByIndex",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=100*-e+"%";return this.onPan.setCurrentOffset(n),a?""+n:"translate3d("+(t?"0px, "+n:n+", 0px")+", 1px)"}},{key:"renderContent",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getSubElements(),a=this.props,n=a.prefixCls,o=a.tabs,i=a.animated,s=a.destroyInactiveTab,r=a.useLeftInsteadTransform,c=this.state,l=c.currentTab,d=c.isMoving,u=c.contentPos,m=this.isTabVertical(),p=n+"-content-wrap";i&&!d&&(p+=" "+p+"-animated");var g=i?r?y()({position:"relative"},this.isTabVertical()?{top:u}:{left:u}):f(u):y()({position:"relative"},this.isTabVertical()?{top:100*-l+"%"}:{left:100*-l+"%"}),h=this.getTabBarBaseProps(),v=h.instanceId;return M.a.createElement("div",{className:p,style:g,ref:this.setContentLayout},o.map(function(a,o){var i=n+"-pane-wrap";e.state.currentTab===o?i+=" "+i+"-active":i+=" "+i+"-inactive";var r=a.key||"tab_"+o;return e.shouldRenderTab(o)?e.tabCache[o]=e.getSubElement(a,o,t):s&&(e.tabCache[o]=void 0),M.a.createElement(H,{key:r,className:i,active:l===o,role:"tabpanel","aria-hidden":l!==o,"aria-labelledby":"m-tabs-"+v+"-"+o,fixX:m,fixY:!m},e.tabCache[o])}))}},{key:"render",value:function(){var e=this.props,t=e.prefixCls,a=e.tabBarPosition,n=e.tabDirection,o=e.useOnPan,i=e.noRenderContent,s=this.isTabVertical(n),r=y()({},this.getTabBarBaseProps()),c=!s&&o?this.onPan:{},l=[M.a.createElement("div",{key:"tabBar",className:t+"-tab-bar-wrap"},this.renderTabBar(r,Q)),!i&&M.a.createElement(V,y()({key:"$content",onSwipe:this.onSwipe},c),this.renderContent())];return M.a.createElement("div",{className:t+" "+t+"-"+n+" "+t+"-"+a},"top"===a||"left"===a?l:l.reverse())}}]),t}($);te.DefaultTabBar=Q,te.defaultProps=y()({},$.defaultProps,{prefixCls:"rmc-tabs",useOnPan:!0}),a.d(t,"Tabs",function(){return te}),a.d(t,"DefaultTabBar",function(){return Q})},function(e,t){},function(e,t){},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(162),i=n(o),s=a(163),r=n(s),c=a(8),l=n(c),d=a(22),u=n(d),m=a(0),p=n(m),f=a(3),g=n(f),h=a(1),v=n(h),_=a(2),y=n(_);a(164),a(165),a(23);var E=a(4),b=n(E),N=a(38),R=a(34),k=a(6);a(687);var w=function(e){function t(e){(0,p.default)(this,t);var a=(0,v.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={storeInfo:{},category:[],goodsList:[],AssessList:[],categoryName:"",loading:!1,selectId:"",selectIndex:0},a.getStoreInfo=function(){var e={app_id:(0,N.getAppId)()};return new Promise(function(t){(0,R.ajax)({url:"/index.php?r=AppShop/GetTostoreWaitingRule",data:e,success:function(e){if(0!==e.status)return void u.default.info(e.data);a.setState({storeInfo:e.data}),t()}})})},a.getCategory=function(){var e={app_id:(0,N.getAppId)(),goods_type:3,filter_null:1};return new Promise(function(t){(0,R.ajax)({url:"/index.php?r=AppShop/getGoodsCategory",data:e,success:function(e){if(0!==e.status)return void u.default.info(e.data);0!==e.data.length&&(a.setState({category:e.data}),t())}})})},a.getGoodsList=function(){a.setState({loading:!0});var e={idx_arr:{idx:"category",idx_value:"all"===a.state.selectId?"":a.state.selectId}},t=(0,l.default)({app_id:(0,N.getAppId)(),goods_type:2,form:"tostore",page:1,page_size:10,is_integral:5,sort_key:"",sort_direction:0},e);return new Promise(function(e){(0,R.ajax)({url:"/index.php?r=AppShop/GetGoodsList",data:t,success:function(t){if(0!==t.status)return void u.default.info(t.data);a.setState({goodsList:t.data,loading:!1}),e()}})})},a.getAssessList=function(){var e={app_id:(0,N.getAppId)(),goods_type:2,page:1,page_size:10};return new Promise(function(t){(0,R.ajax)({url:"/index.php?r=AppShop/getAssessList",data:e,success:function(e){if(0!==e.status)return void u.default.info(e.data);console.log(e.datta),a.setState({AssessList:e.data}),t()}})})},a.switchCategory=function(e,t,n){a.state.selectId===e&&a.state.selectIndex===n||a.setState({selectId:e,selectIndex:n,categoryName:t,goodsList:[]},function(){a.getGoodsList()})},a}return(0,y.default)(t,e),(0,g.default)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.data;console.log(t);var a=t.customFeature,n=t.content;this.getStoreInfo().then(function(){"1"===a.databind?e.getCategory().then(function(){e.setState({selectId:e.state.category[0].id,categoryName:e.state.category[0].name}),e.getGoodsList()}):(e.setState({selectId:n[0].source,categoryName:n[0].text}),e.getGoodsList())})}},{key:"render",value:function(){var e=this,t=this.props.data,a=t.customFeature,n=t.content,o=[{title:"商品"},{title:"评价"},{title:"店铺"}],s=(0,k.cssObj2DomObj)(a.style),c=(0,k.transformPx2Rem)(a.logoRadius),l=(0,k.convertStyleData)(a.leftSpan);l.paddingLeft=(0,k.transformPx2Rem)(a.typeLeft,320);var d={backgroundColor:a.selectedBackgroundColor,color:a.selectedColor,borderLeft:"4px solid #ff7100",paddingLeft:(0,k.transformPx2Rem)(a.typeLeft,320)},u={border:"1px solid #ff7100",transform:"scale(0.5, 1)"};return b.default.createElement("div",{className:"custom-component tostore"},a.showShopInfo&&b.default.createElement("div",{className:"header"},"0"==a.mode&&b.default.createElement("div",{className:"shop-desc-mode-0"},b.default.createElement("div",{className:"info-wrap"},b.default.createElement("div",{className:"logo",style:{borderRadius:c}},b.default.createElement("img",{src:this.state.storeInfo.logo,alt:""})),b.default.createElement("div",{className:"shop-info"},b.default.createElement("div",{className:"msg",style:{color:a.storeSecColor}},"营业时间为："),b.default.createElement("div",{className:"address",style:{color:a.storeSecColor}},b.default.createElement("span",null,"店铺地址：",this.state.storeInfo.address_detail)))),b.default.createElement("div",{className:"line"})),"1"==a.mode&&b.default.createElement("div",{className:"shop-desc-mode-1"},b.default.createElement("div",{className:"top",style:s},b.default.createElement("div",{className:"logo",style:{borderRadius:c}},b.default.createElement("img",{src:this.state.storeInfo.logo,alt:""}))),b.default.createElement("div",{className:"info-wrap"},b.default.createElement("div",{className:"msg",style:{color:a.storeSecColor}},"营业时间为："),b.default.createElement("div",{className:"address",style:{color:a.storeSecColor}},b.default.createElement("span",null,"店铺地址：",this.state.storeInfo.address_detail))),b.default.createElement("div",{className:"line"})),"2"==a.mode&&b.default.createElement("div",{className:"shop-desc-mode-2"},b.default.createElement("div",{className:"top",style:s}),b.default.createElement("div",{className:"info"},b.default.createElement("div",{className:"msg",style:{color:a.storeSecColor}},"营业时间为："),b.default.createElement("div",{className:"address",style:{color:a.storeSecColor}},b.default.createElement("span",null,"店铺地址：",this.state.storeInfo.address_detail))),b.default.createElement("div",{className:"logo",style:{borderRadius:c}},b.default.createElement("img",{src:this.state.storeInfo.logo,alt:""})))),b.default.createElement("div",{className:"tab"},b.default.createElement(i.default,{tabs:o,tabBarActiveTextColor:"#ff7100",tabBarUnderlineStyle:u},b.default.createElement("div",{className:"goods-wrap",style:{height:"100%"}},b.default.createElement("div",{className:"sort-list"},"0"===a.databind&&n.map(function(t,a){return b.default.createElement("div",{className:"sort-item",key:a,onClick:function(){return e.switchCategory(t.source,t.text,a)},style:e.state.selectIndex===a?d:l},t.text)}),"1"===a.databind&&this.state.category.map(function(t,a){return b.default.createElement("div",{className:"sort-item",key:a,onClick:function(){return e.switchCategory(t.id,t.name)},style:e.state.selectId===t.id?d:l},t.name)})),b.default.createElement("div",{className:"goods-list"},b.default.createElement("div",{className:"goods-sort"},this.state.categoryName),b.default.createElement(r.default,{animating:this.state.loading,size:"large"}),this.state.goodsList.map(function(e){return b.default.createElement("div",{className:"goods-type",key:e.form_data.id},b.default.createElement("div",{className:"goods-item"},b.default.createElement("img",{src:e.form_data.cover,alt:""}),b.default.createElement("div",{className:"goods-info"},b.default.createElement("div",{className:"goods-top"},b.default.createElement("div",{className:"title"},e.form_data.title),b.default.createElement("div",{className:"sales"},"销量：",e.form_data.sales)),b.default.createElement("div",{className:"goods-bottom"},b.default.createElement("div",{className:"price"},b.default.createElement("span",{className:"real-price"},"￥",e.form_data.goods_price),a.isShowVirtualPrice&&b.default.createElement("span",{className:"virtual-price"},"￥",e.form_data.virtual_price)),b.default.createElement("div",{className:"buy-btn"},"+")))))}))),b.default.createElement("div",{className:"assess-wrap",style:{height:"500px"}},0===this.state.AssessList.length&&b.default.createElement("div",{className:"no-assess"},b.default.createElement("img",{src:"https://www.zhichiwangluo.com/zhichi_frontend/static/webapp/images/moreAssess.png",alt:""}),b.default.createElement("div",null,"暂无任何评价")),0!==this.state.AssessList.length&&b.default.createElement("div",{className:"assess-list"})),b.default.createElement("div",{className:"shop-wrap",style:{height:"500px"}},b.default.createElement("div",{className:"merchant-info"},b.default.createElement("div",{className:"info-title"},"商家信息"),b.default.createElement("div",{className:"info-content"},b.default.createElement("div",{className:"info-item"},b.default.createElement("i",{className:"icon-fesadress"}),this.state.storeInfo.address_detail),b.default.createElement("div",{className:"info-item"},b.default.createElement("i",{className:"icon-tokeout-info"}),this.state.storeInfo.description),b.default.createElement("div",{className:"info-item"},b.default.createElement("i",{className:"icon-sales-num"}),"月售",this.state.storeInfo.total_sales,"份"),b.default.createElement("div",{className:"info-item"},b.default.createElement("i",{className:"icon-business-time"}),"营业时间为：00:00-23:59")))))),b.default.createElement("div",{className:"bottom"},b.default.createElement("div",{className:"money-count"},b.default.createElement("div",{className:"cart-wrap"},b.default.createElement("i",{className:"icon icon-fn-cart"})),b.default.createElement("div",null,"请选择商品")),b.default.createElement("div",{className:"order-btn"},"去下单")))}}]),t}(b.default.Component);t.default=w},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(0),i=n(o),s=a(3),r=n(s),c=a(1),l=n(c),d=a(2),u=n(d),m=a(4),p=n(m),f=a(5),g=a(6),h=a(21);a(689);var v=function(e){function t(e){(0,i.default)(this,t);var a=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));_.call(a);var n=e.index,o=f.appMethod.getAppCurrentPage();return a.init(n,o),a}return(0,u.default)(t,e),(0,r.default)(t,[{key:"render",value:function(){var e=this,t=this.props.data,a=t.customFeature,n=(0,g.convertStyleData)(t.style),o={height:(0,g.transformPx2Rem)(a.lineHeight,320),marginBottom:(0,g.transformPx2Rem)(a.margin,320),backgroundColor:a.lineBackgroundColor,backgroundImage:a.lineBackgroundImage};0!=a.mode&&(o.width=(0,g.transformPx2Rem)(a.imgWidth,320)),2==a.mode&&(o.marginRight=(0,g.transformPx2Rem)(a.maskMarginSpace,320));var i={width:(0,g.transformPx2Rem)(a.imgWidth,320),height:(0,g.transformPx2Rem)(a.imgHeight,320)},s={color:a.secColor,fontSize:(0,g.transformPx2Rem)(a.secFontSize,375),fontStyle:a.secFontStyle,fontWeight:a.secFontWeight?a.secFontWeight:"normal",textAlign:a.secTextAlign,textDecoration:a.secTextDecoration},r={backgroundColor:a.maskBackgroundColor,opacity:a.opacity};return p.default.createElement("div",{className:"custom-component community mode-"+a.mode+" style-"+a.style,style:n},0==a.mode&&t.community_data&&t.community_data.map(function(t,a){return p.default.createElement("div",{className:"item",key:a,style:o,onClick:e.turnToCommunityPage,"data-id":t.id},p.default.createElement("div",{className:"content"},p.default.createElement("img",{className:"img",style:i,src:t.img,alt:""}),p.default.createElement("div",{className:"container"},p.default.createElement("div",{className:"info"},p.default.createElement("div",{className:"title"},t.name),t.show_article_comment&&p.default.createElement("div",{className:"num",style:s},"话题 ",t.xcx_article_count)),p.default.createElement("div",{className:"desc",style:s},t.description))))}),(1==a.mode||2==a.mode)&&t.community_data&&t.community_data.map(function(t,n){return p.default.createElement("div",{className:"item",key:n,style:o,onClick:e.turnToCommunityPage,"data-id":t.id},p.default.createElement("div",{className:"img-container"},p.default.createElement("img",{className:"img",style:i,src:t.img,alt:""}),0==a.style&&p.default.createElement("div",{className:"mask",style:r})),p.default.createElement("div",{className:"info"},p.default.createElement("div",{className:"title"},t.name),t.show_article_comment&&p.default.createElement("div",{className:"num",style:s},t.xcx_article_count,"话题")))}),t.loading&&p.default.createElement(h.RequestStatus,{is:"requestLoading"}),t.loadingFail&&p.default.createElement(h.RequestStatus,{is:"requestFail",data:{refreshEvent:"getCommunityList",compindex:this.props.index}}))}}]),t}(p.default.Component),_=function(){var e=this;this.init=function(t,a){var n=a.data.eles[t].customFeature,o={};void 0==n.mode&&(o["eles["+t+"].customFeature.mode"]=0,o["eles["+t+"].customFeature.style"]=1),a.setData(o),e.initialCommunityList(t,a)},this.initialCommunityList=function(e,t){var a=t||f.appMethod.getAppCurrentPage(),n=a.data.eles[e],o=[],i=n.content,s={};for(var r in i)o.push(i[r]["community-id"]);s["eles["+e+"].loading"]=!0,s["eles["+e+"].loadingFail"]=!1,a.setData(s),f.appMethod.sendRequest({hideLoading:!0,url:"/index.php?r=AppSNS/GetSectionByPage",data:{section_ids:o,page:1,page_size:100},method:"post",chain:!0,subshop:a.franchiseeId||"",success:function(t){for(var n={},i=[],s={},r=0;r<t.data.length;r++){var c=t.data[r];n[c.id]=c}for(var l=0;l<o.length;l++){var d=n[o[l]];d&&i.push(d)}s["eles["+e+"].community_data"]=i,s["eles["+e+"].loading"]=!1,s["eles["+e+"].loadingFail"]=!1,a.setData(s)},fail:function(){var t={};t["eles["+e+"].loading"]=!1,t["eles["+e+"].loadingFail"]=!0,a.setData(t)}})},this.turnToCommunityPage=function(e){var t=e.currentTarget.dataset.id,a=f.appMethod.getPageFranchiseeId(),n=a?"&franchisee="+a:"";f.appMethod.turnToPage("communityPage?detail="+t+n)}};t.default=v},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(9),i=n(o),s=a(8),r=n(s),c=a(0),l=n(c),d=a(3),u=n(d),m=a(1),p=n(m),f=a(2),g=n(f),h=a(4),v=n(h),_=a(6),y=a(5),E=a(15),b=a(21);a(691);var N=function(e){function t(e){(0,l.default)(this,t);var a=(0,p.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));R.call(a);var n=e.index,o=y.appMethod.getAppCurrentPage();return a.init(n,o),a}return(0,g.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this,t=this.props.data,a=t.customFeature,n=(t.content,(0,_.convertStyleData)(t.style));n.backgroundColor="#F2F2F2",0==a.vesselAutoheight&&(n.height=(0,_.transformPx2Rem)(height,320));var o={};return o=t.topicSuspension.style?(0,r.default)({},(0,_.convertStyleData)(t.topicSuspension.style),{bottom:(0,_.transformPx2Rem)(y.appMethod.isTabBarPage()?parseInt(t.style.bottom)+48:t.style.bottom,320)}):{bottom:y.appMethod.isTabBarPage()?"calc(.40rem + 48px)":".40rem",right:".30rem"},v.default.createElement("div",{className:"custom-component topic mode-"+a.mode,style:n},t.topicList&&t.topicList.map(function(t,n){return v.default.createElement("div",{className:"topic-item",key:n,onClick:e.turnToTopicDetail,"data-index":n,"data-compindex":e.props.index,"data-articlestyle":e.mode2articlestyle(a.mode)},0==a.mode&&v.default.createElement(v.default.Fragment,null,v.default.createElement("div",{className:"user"},v.default.createElement("div",{className:"user-img",onClick:e.topicTurnToUsercenter,"data-usertoken":t.user_token,"data-sourcetype":t.source_type},v.default.createElement("img",{src:t.headimgurl,alt:""})),v.default.createElement("div",{className:"user-info"},v.default.createElement("span",{className:"author"},t.nickname),v.default.createElement("div",{className:"time"},t.add_time))),v.default.createElement("div",{className:"title"},t.title),v.default.createElement("div",{className:"content-text"},t.content.text),t.content.imgs&&t.content.imgs[0]&&v.default.createElement("div",{className:"content-img"},v.default.createElement("img",{src:t.content.imgs[0],alt:""})),t.form_data.list_recommend.recommend_goods&&v.default.createElement("div",{className:"goods",onClick:e.topicTurnToGoodsDetail,"data-id":t.form_data.list_recommend.recommend_goods[0].id,"data-goods-type":t.form_data.list_recommend.recommend_goods[0].goods_type},v.default.createElement("div",{className:"goods-img"},v.default.createElement("img",{src:t.form_data.list_recommend.recommend_goods[0].image})),v.default.createElement("div",{className:"goods-dec"},v.default.createElement("div",{className:"goods-title"},t.form_data.list_recommend.recommend_goods[0].name),v.default.createElement("div",{className:"goods-price"},"¥",t.form_data.list_recommend.recommend_goods[0].price),v.default.createElement("span",{className:"ico-moon icon-community-group-arrow"}))),v.default.createElement("div",{className:"bottom"},v.default.createElement("div",{className:"reading"},t.read_count,"阅读量"),v.default.createElement("div",{className:"utils"},v.default.createElement("div",{className:"thumbs",onClick:e.topicPerformLikeAct,"data-compindex":e.props.index,"data-index":n,"data-isliked":t.is_liked},v.default.createElement("span",{className:"ico-moon icon-community-group-thumb"}),v.default.createElement("span",{className:"num"},t.like_count)),v.default.createElement("div",{className:"reply",onClick:e.showTopicReplyComment,"data-compindex":e.props.index,"data-index":n},v.default.createElement("span",{className:"ico-moon icon-goods-customer-service"}),v.default.createElement("span",{className:"num"},t.comment_count))))),1==a.mode&&v.default.createElement(v.default.Fragment,null,v.default.createElement("div",{className:"topic-top"},v.default.createElement("div",{className:"author-logo",onClick:e.topicTurnToUsercenter,"data-usertoken":t.user_token,"data-sourcetype":t.source_type},v.default.createElement("img",{src:t.headimgurl,alt:""})),v.default.createElement("div",{className:"author-name"},t.nickname),1==t.top_flag&&v.default.createElement("span",{className:"topic-stick"}),t.phone&&v.default.createElement("span",{className:"contact-ta","data-compindex":e.props.index,"data-phone":t.phone,onClick:e.showTopicPhoneModal}),v.default.createElement("div",{className:"topic-title"},t.title)),v.default.createElement("div",{className:"topic-des"},t.content.text||""),2==t.content.type&&t.content.url.article&&v.default.createElement("div",{className:"topic-link"},v.default.createElement("div",{className:"link-logo-wrap"},v.default.createElement("img",{className:"link-logo",src:t.content.url.article.cover||t.content.url.article.logo,mode:"aspectFill",alt:""}),4==t.content.url.article.type&&v.default.createElement("label",{className:"ico-moon icon-news-video-play"})),v.default.createElement("span",{className:"link-text"},t.content.url.article.title)),2==t.content.type&&t.content.url.video&&v.default.createElement("div",{className:"topic-video"},v.default.createElement("img",{className:"video-cover",src:t.content.url.video.cover||"",mode:"aspectFill",alt:""}),v.default.createElement("label",{className:"ico-moon icon-news-video-play"})),t.content.imgs&&t.content.imgs.length>0&&v.default.createElement("div",{className:"imgs-list"},t.content.imgs.map(function(a,n){if(n<9)return v.default.createElement("div",{key:n,className:"img-item"},v.default.createElement("img",{src:a,mode:"aspectFill",alt:"","data-img":a,"data-imgarr":JSON.stringify(t.content.imgs),onClick:e.tapPrevewPictureHandler}))})),t.form_data.list_recommend.recommend_goods&&v.default.createElement("div",{className:"topic-goods",onClick:e.topicTurnToGoodsDetail,"data-id":t.form_data.list_recommend.recommend_goods[0].id,"data-goods-type":t.form_data.list_recommend.recommend_goods[0].goods_type},v.default.createElement("div",{className:"goods-left"},v.default.createElement("img",{src:t.form_data.list_recommend.recommend_goods[0].image})),v.default.createElement("div",{className:"goods-center"},v.default.createElement("div",{className:"goods-name"},v.default.createElement("span",null,t.form_data.list_recommend.recommend_goods[0].name)),v.default.createElement("div",{className:"goods-price"},"¥",v.default.createElement("span",null,t.form_data.list_recommend.recommend_goods[0].price))),v.default.createElement("div",{className:"goods-right"},v.default.createElement("button",null,"去购买"))),v.default.createElement("div",{className:"topic-publish-info"},v.default.createElement("span",{className:"topic-publish-date"},t.add_time),v.default.createElement("span",{className:"topic-publish-address"},t.address&&v.default.createElement("i",{className:"ico-moon icon-community-location"}),t.address),v.default.createElement("span",{className:"publish-where",onClick:e.goToCommunityPage,"data-id":t.section_id},"来自",t.section_name)),v.default.createElement("div",{className:"topic-bottom"},t.comment_count>0&&v.default.createElement("div",{className:"topic-disscuss"},t.comment.map(function(e,t){return v.default.createElement("div",{key:t,className:"topic-diss-li"},v.default.createElement("span",{className:"topic-diss-name"},e.nickname),e.content.reply_to&&v.default.createElement("span",null,"回复"),e.content.reply_to&&v.default.createElement("span",null,e.content.reply_to.nickname),"：",v.default.createElement("span",null,e.content.text))}),v.default.createElement("div",{className:"topic-diss-all"},"查看全部",v.default.createElement("span",{className:"topic-diss-count"},t.comment_count),"条评论"))),v.default.createElement("div",{className:"topic-footer"},v.default.createElement("span",{className:"topic-share"},v.default.createElement("i",{className:"ico-moon icon-community_share"}),v.default.createElement("span",null,t.spread_count>0?t.spread_count:"分享")),v.default.createElement("span",{className:"topic-viewcount"},v.default.createElement("i",{className:"ico-moon icon-community_view"}),v.default.createElement("span",null,t.read_count>0?t.read_count:"浏览")),v.default.createElement("span",{className:"topic-rating","data-compindex":e.props.index,"data-index":n,onClick:e.showTopicReplyComment},v.default.createElement("i",{className:"ico-moon icon-community_message"}),v.default.createElement("span",null,t.comment_count>0?t.comment_count:"评论")),v.default.createElement("span",{className:"topic-voteup","data-isliked":t.is_liked,"data-compindex":e.props.index,"data-index":n,onClick:e.topicPerformLikeAct,style:1==t.is_liked?{color:"#FF4141"}:{}},v.default.createElement("i",{className:"ico-moon "+(1==t.is_liked?"icon-community_praise_fill":"icon-community_praise")}),v.default.createElement("span",null,t.like_count>0?t.like_count:"点赞")))),2==a.mode&&v.default.createElement(v.default.Fragment,null,v.default.createElement("div",{className:"topic-top"},v.default.createElement("div",{className:"author-logo",onClick:e.topicTurnToUsercenter,"data-usertoken":t.user_token,"data-sourcetype":t.source_type},v.default.createElement("img",{src:t.headimgurl,alt:""})),v.default.createElement("div",{className:"top-right"},v.default.createElement("div",{className:"author-name"},t.nickname),1==t.top_flag&&v.default.createElement("span",{className:"topic-stick"}),1==t.hot_flag&&v.default.createElement("span",{className:"topic-favorite"}),v.default.createElement("div",{className:"topic-title"},v.default.createElement("span",{onClick:e.goToCommunityPage,"data-id":t.section_id,className:"publish-where"},"#",t.section_name,"#"),t.title))),v.default.createElement("div",{className:"topic-des"},t.content.text||""),2==t.content.type&&t.content.url.article&&v.default.createElement("div",{className:"topic-link"},v.default.createElement("div",{className:"link-logo-wrap"},v.default.createElement("img",{className:"link-logo",src:t.content.url.article.cover||t.content.url.article.logo,mode:"aspectFill",alt:""}),4==t.content.url.article.type&&v.default.createElement("label",{className:"ico-moon icon-news-video-play"})),v.default.createElement("span",{className:"link-text"},t.content.url.article.title)),2==t.content.type&&t.content.url.video&&v.default.createElement("div",{className:"topic-video"},v.default.createElement("img",{className:"video-cover",src:t.content.url.video.cover||"",mode:"aspectFill",alt:""}),v.default.createElement("label",{className:"ico-moon icon-news-video-play"})),t.content.imgs&&t.content.imgs.length>0&&v.default.createElement("div",{className:"imgs-list"},t.content.imgs.map(function(a,n){return v.default.createElement("div",{key:n,className:"img-item"},v.default.createElement("img",{src:a,mode:"aspectFill",alt:"","data-img":a,"data-imgarr":JSON.stringify(t.content.imgs),onClick:e.tapPrevewPictureHandler}))})),t.form_data.list_recommend.recommend_goods&&v.default.createElement("div",{className:"topic-goods-friend",onClick:e.topicTurnToGoodsDetail,"data-id":t.form_data.list_recommend.recommend_goods[0].id,"data-goods-type":t.form_data.list_recommend.recommend_goods[0].goods_type},v.default.createElement("div",{className:"goods-left-friend"},v.default.createElement("img",{src:t.form_data.list_recommend.recommend_goods[0].image})),v.default.createElement("div",{className:"goods-center-friend"},v.default.createElement("div",{className:"goods-name-friend"},v.default.createElement("span",null,t.form_data.list_recommend.recommend_goods[0].name)),v.default.createElement("div",{className:"goods-price-friend"},v.default.createElement("span",null,"¥ ",t.form_data.list_recommend.recommend_goods[0].price),v.default.createElement("button",null,"购买")))),v.default.createElement("div",{className:"topic-publish-info"},v.default.createElement("span",{className:"topic-publish-date"},t.add_time),v.default.createElement("span",{className:"topic-publish-address"},t.address&&v.default.createElement("i",{className:"ico-moon icon-community-location"}),t.address),v.default.createElement("span",null,v.default.createElement("span",null,t.read_count,"阅读量")),v.default.createElement("div",{className:"topic-comment","data-compindex":e.props.index,"data-index":n,onClick:e.showTopicCommentBox},v.default.createElement("div",{className:"li-comments"},v.default.createElement("img",{src:"http://cdn.jisuapp.cn/static/webapp/images/comments.png"})),t.comment_box_show&&v.default.createElement("div",{className:"topic-comment-box"},v.default.createElement("span",{className:"topic-comment-like","data-isliked":t.is_liked,"data-compindex":e.props.index,"data-index":n,onClick:e.topicPerformLikeAct},v.default.createElement("i",{className:"ico-moon "+(1==t.is_liked?"icon-community_praise_fill":"icon-community_praise")}),v.default.createElement("span",null,t.like_count>0?t.like_count:"点赞")),v.default.createElement("span",{className:"topic-comment-rating","data-compindex":e.props.index,"data-index":n,onClick:e.showTopicReplyComment},v.default.createElement("i",{className:"ico-moon icon-community_message"}),v.default.createElement("span",null,t.comment_count>0?t.comment_count:"评论"))))),v.default.createElement("div",{className:"topic-bottom"},t.like_count>0&&v.default.createElement("div",{className:"topic-like-list"},v.default.createElement("i",{className:"ico-moon icon-community_praise"}),t.like.map(function(e,a){return v.default.createElement("span",{key:a,className:"topic-like-text"},a>0&&v.default.createElement("span",null,","),v.default.createElement("span",null,t.nickname))})),t.comment_count>0&&v.default.createElement("div",{className:"topic-disscuss"},t.comment.map(function(e,t){v.default.createElement("div",{key:t,className:"topic-diss-li"},v.default.createElement("span",{className:"topic-diss-name"},e.nickname),e.content.reply_to&&v.default.createElement("span",{style:{color:"#333"}},"回复"),e.content.reply_to&&v.default.createElement("span",null,e.content.reply_to.nickname),": ",v.default.createElement("span",null,e.content.text))}),v.default.createElement("div",{className:"topic-diss-all-friend"},"查看全部回复",v.default.createElement("span",{className:"ico-moon icon-downarrow"}))))))}),t.listStatus&&t.listStatus.loading&&v.default.createElement(b.RequestStatus,{is:"requestLoading"}),t.listStatus&&!t.listStatus.isMore&&0==t.topicList.length&&v.default.createElement(b.RequestStatus,{is:"requestNone",data:{data:"暂无话题~"}}),t.listStatus&&t.listStatus.loadingFail&&v.default.createElement(b.RequestStatus,{is:"requestFail",data:{refreshEvent:"topicEleScrollFunc",compindex:this.props.index}}),0==t.is_more&&t.goods_data.length>0&&t.customFeature.isShowFinishText&&v.default.createElement(b.RequestStatus,{is:"requestAll"}),1==t.customFeature.vesselAutoheight&&1==t.customFeature.loadingMethod&&!!t.listStatus.isMore&&!t.listStatus.loading&&!t.listStatus.loadingFail&&v.default.createElement(LoadingBtn,{customFeature:a,onClick:this.topicEleScrollFunc,"data-compindex":this.props.index}),t.topicSuspension&&t.topicSuspension.isShow&&v.default.createElement("div",{className:"topic-btns-group",style:o,"data-compindex":this.props.index},t.topicSuspension.topBtnShow&&v.default.createElement("div",{className:"topic-backtop-btn","data-compindex":this.props.index,onClick:this.pageBackTopAct},v.default.createElement("label",{className:"ico-moon icon-community-go-top"})),v.default.createElement("div",{className:"topic-publish-btn","data-compindex":this.props.index,onClick:this.turnToTopicPublish},v.default.createElement("label",{className:"ico-moon icon-community-edit"})),v.default.createElement("div",{className:"topic-service-btn"},v.default.createElement("label",{className:"ico-moon icon-community-ai"}),v.default.createElement("button",{onClick:function(){return(0,E.customEvent)({customFeature:{action:"contact"}})}}))),t.topicPhoneModal&&t.topicPhoneModal.isShow&&v.default.createElement("div",{className:"actionSheet-wrap"},v.default.createElement("div",{className:"actionSheet-buttons"},v.default.createElement("button",{className:"phoneNum-btn"},t.topicPhoneModal.phone),v.default.createElement("button",{className:"call-btn",onClick:this.topicMakePhoneCall,"data-compindex":this.props.index},"呼叫"),v.default.createElement("button",{className:"cancel-btn","data-phone":"",onClick:this.showTopicPhoneModal,"data-compindex":this.props.index},"取消"))),t.topicReplyComment&&t.topicReplyComment.isShow&&v.default.createElement("div",{className:"comment-mask","data-compindex":this.props.index,onClick:this.topicCancelReply}),t.topicReplyComment&&t.topicReplyComment.isShow&&v.default.createElement("div",{className:"comment-box",id:this.props.index+"-comment-box",style:{bottom:t.topicReplyComment.focus?t.topicReplyComment.keyboardHeight:0}},v.default.createElement("div",{className:"comment-top"},v.default.createElement("textarea",{type:"textarea",className:"comment-input",id:"",placeholder:t.topicReplyComment.replyPlaceholder,maxLength:"-1",value:t.topicReplyParam.text,"data-compindex":this.props.index,onChange:this.topicReplyInput,onFocus:this.topicReplyFocus,onBlur:this.topicReplyBlur,style:{height:(t.topicReplyComment.commentContentHeight+20)/100+"rem"}}),(t.topicReplyParam.comment_img_url||t.topicReplyParam.address)&&v.default.createElement("div",{className:"comment-others"},t.topicReplyParam.comment_img_url&&v.default.createElement("div",{className:"others-image",style:{marginBottom:(t.topicReplyParam.address?"0.36":"0")+"rem"}},v.default.createElement("img",{src:t.topicReplyParam.comment_img_url,mode:"aspectFill","data-compindex":this.props.index,onClick:this.topicReplyImagePreview}),v.default.createElement("div",{className:"image-close-icon-box","data-compindex":this.props.index,onClick:this.topicReplyImageDelete},v.default.createElement("span",{className:"image-close-icon ico-moon icon-closes"}))),t.topicReplyParam.address&&v.default.createElement("div",{className:"]others-location","data-compindex":this.props.index,onClick:this.topicReplyLocationDelete},v.default.createElement("span",null,t.topicReplyParam.address),v.default.createElement("span",{className:"location-close-icon ico-moon icon-closes"})))),v.default.createElement("div",{className:"comment-bottom"},v.default.createElement("div",{className:"comment-bottom-left"},v.default.createElement("span",{className:"comment-bottom-icon ico-moon icon-picture","data-compindex":this.props.index,onClick:this.topicReplyImageChoose}),v.default.createElement("span",{className:"comment-bottom-icon ico-moon icon-community-location","data-compindex":this.props.index,onClick:this.topicReplyLocationChoose})),v.default.createElement("div",{className:"comment-bottom-right"},v.default.createElement("div",{className:"comment-bottom-right-cancel","data-compindex":this.props.index,onClick:this.topicCancelReply},v.default.createElement("span",null,"取消")),v.default.createElement("div",{className:"comment-bottom-right-send","data-compindex":this.props.index,onClick:this.topicSubmitReply},v.default.createElement("span",null,"发布"))))))}}]),t}(v.default.Component),R=function(){var e=this;this.state={articleList:[]},this.init=function(t,a){var n=e,o=a.data.eles[t],s=o.customFeature,r=s.id,c=(o.style,{page:1,page_size:s.loadingNum||10,orderby:"comment_count",article_style:1,section_id:s.bindPlate||"",category_id:s.bindTopic||"",search_value:""}),l={loading:!1,isMore:!0},d={isShow:s.isShowSuspension,topBtnShow:!1},u={isShow:!1,phone:""},m={index:"",isShow:!1,focus:!1,keyboardHeight:"50%",hasTabBar:y.appMethod.isTabBarPage(y.appMethod.getPageRouter()),commentContentMaxHeight:0,commentContentHeight:40},p={text:"",agent_user_token:"",address:"",latitude:"",longitude:"",comment_img_url:"",comment_id:0,parent_comment_id:0,article_id:"",sub_app_id:""},f={},g=s;a.setData((0,i.default)({},"eles["+t+"].param",g));var h=a.data.eles.findIndex(function(e){return"topic-sort"===e.type&&e.param.topic_sort_object==r});if(h>-1){var v=a.data.eles[h].content[0];c.orderby=v.orderby,c.order=v.order}var _=y.appMethod.getPageRouter(),E=y.appMethod.globalData.susTopicsMap[_];E||(E=y.appMethod.globalData.susTopicsMap[_]=[]),d.isShow&&(-1===E.indexOf(t)&&E.push(t),E.length>1&&t!==E[0]&&(d.isShow=!1)),f["eles["+t+"].listParam"]=c,f["eles["+t+"].listStatus"]=l,f["eles["+t+"].topicSuspension"]=d,f["eles["+t+"].topicPhoneModal"]=u,f["eles["+t+"].topicReplyComment"]=m,f["eles["+t+"].topicReplyParam"]=p,a.setData(f),"distance"!==c.orderby||c.latitude?e.getTopListData(a,t):y.appMethod.getLocation({success:function(e){var o;a.setData((o={},(0,i.default)(o,"eles["+t+"].listParam.longitude",e.longitude),(0,i.default)(o,"eles["+t+"].listParam.latitude",e.latitude),o)),n.getTopListData(a,t)}}),y.appMethod.globalData.hasTopicCom=!0,e.systemInfo=y.appMethod.getSystemInfo(),e.getSysnInfoTimer=setTimeout(function(){var t=y.appMethod.getSystemInfo();t.windowHeight!==e.systemInfo.windowHeight&&(e.systemInfo=t)},500)},this.getTopListData=function(e,t,a){var n=e||y.appMethod.getAppCurrentPage(),o=n.data.eles[t],s=o.listParam,r=o.listStatus,c=o.topicList||[];if(!1===o.customFeature.isShowList)return void n.setData((0,i.default)({},"eles["+t+"].topicList",[]));if(!r.loading&&r.isMore){var l={};l["eles["+t+"].listStatus.loading"]=!0,l["eles["+t+"].listStatus.loadingFail"]=!1,1==s.page&&(l["eles["+t+"].topicList"]=[],l["eles["+t+"].listStatus.isMore"]=!0),n.setData(l),"distance"===s.orderby?s.order="asc":"order"in s&&delete s.order,y.appMethod.sendRequest({url:"/index.php?r=AppSNS/GetArticleByPage",data:s,method:"post",hideLoading:!0,chain:!0,subshop:n.franchiseeId||"",success:function(e){var o={};r.loading=!1,r.isMore=1==e.is_more,r.loadingFail=!1,e.data.forEach(function(e){if(e.comment_box_show=!1,2==e.content.type&&e.content.url.article&&(1==e.content.url.article.type&&delete e.content.url.article.body,3==e.content.url.article.type&&(e.content.url.article.cover=y.appMethod.globalData.cdnUrl+"/zhichi_frontend/static/webapp/images/audio_default.png")),e.form_data.list_recommend&&e.form_data.list_recommend.recommend_goods&&e.form_data.list_recommend.recommend_goods[0]){var t=e.form_data.list_recommend.recommend_goods[0],a=t.title,n=t.price,o=t.cover,i=t.id;e.form_data.list_recommend.recommend_goods[0]={name:a,price:n,image:o,id:i}}}),c=e.current_page>1?c.concat(e.data):e.data,o["eles["+t+"].topicList"]=c,o["eles["+t+"].listParam.page"]=e.current_page+1,o["eles["+t+"].listStatus"]=r,n.setData(o),"function"==typeof a&&a(e.data)},fail:function(){var e={};e["eles["+t+"].listStatus.loading"]=!1,e["eles["+t+"].listStatus.loadingFail"]=!0,n.setData(e)}})}},this.topicEleScrollFunc=function(t){var a=t.currentTarget,n=a.dataset,o=n.compindex;e.getTopListData(null,o)},this.turnToTopicDetail=function(e){if(e.stopPropagation(),!y.appMethod.globalData.topicTurnToDetail){y.appMethod.globalData.topicTurnToDetail=!0;var t=e.currentTarget,a=t.dataset,n=a.articlestyle,o=a.compindex,i=a.index,s=y.appMethod.getAppCurrentPage(),r=s.data.eles[o].topicList[i],c={};c["eles["+o+"].topicList["+i+"].read_count"]=+r.read_count+1,s.setData(c);var l=y.appMethod.getPageFranchiseeId(),d=l?"&franchisee="+l:"";y.appMethod.turnToPage("/informationManagement/pages/communityDetail/communityDetail?detail="+r.id+"&articleStyle="+n+"&dataLiked="+r.is_liked+"&phoneNumber="+r.phone+"&sectionid="+r.section_id+d)}},this.showTopicPhoneModal=function(e){e.stopPropagation();var t=e.currentTarget,a=t.dataset,n=a.phone,o=a.compindex,s=y.appMethod.getAppCurrentPage(),r=s.data.eles[o].topicPhoneModal;r.phone=n.replace(/^(\d{3})(\d{4})(\d{4})$/,"$1-$2-$3"),r.isShow=!r.isShow,s.setData((0,i.default)({},"eles["+o+"].topicPhoneModal",r))},this.topicImgLoad=function(e){var t=y.appMethod.getAppCurrentPage(),a=e.target.width,n=e.target.height,o=e.currentTarget.dataset.path,s=e.currentTarget.dataset.style,r=a/n,c=290,l=void 0,d=void 0;1==s&&(c=240),r>c/120?(l=c,d=c/r):(l=120*r,d=120),t.setData((0,i.default)({},o,"width:"+l+"px;height:"+d+"px;"))},this.showTopicCommentBox=function(e){e.stopPropagation();var t=e.currentTarget,a=t.dataset,n=a.compindex,o=a.index,s=y.appMethod.getAppCurrentPage(),r=s.data[n].topicList[o],c=r.comment_box_show;s.setData((0,i.default)({},"eles["+n+"].topicList["+o+"].comment_box_show",!c))},this.topicPerformLikeAct=function(t){t.stopPropagation();var a=e,n=t.currentTarget,o=n.dataset,s=o.compindex,r=o.index,c=o.isliked,l=y.appMethod.getAppCurrentPage(),d=l.data.eles[s].topicList[r];y.appMethod.sendRequest({hideLoading:!0,url:"/index.php?r=AppSNS/PerformLike",data:{obj_type:1,obj_id:d.id},method:"post",chain:!0,subshop:l.franchiseeId||"",success:function(e){0==e.status&&y.appMethod.showToast({title:1==c?"点赞取消":"点赞成功",icon:"success",success:function(){l.setData((0,i.default)({},"eles["+s+"].topicList["+r+"].comment_box_show",!1)),a.refreshOneTopicData({articleId:d.id,index:r,compindex:s})}})}})},this.refreshOneTopicData=function(e){if(e.articleId&&e.compindex){var t=y.appMethod.getAppCurrentPage();y.appMethod.sendRequest({hideLoading:!0,url:"/index.php?r=AppSNS/GetArticleByPage",data:{article_id:e.articleId,page:1,page_size:10},method:"post",chain:!0,subshop:t.franchiseeId||"",success:function(a){if(a.data.length){var n=a.data[0];if(n.form_data.list_recommend&&n.form_data.list_recommend.recommend_goods&&n.form_data.list_recommend.recommend_goods[0]){var o=n.form_data.list_recommend.recommend_goods[0],s=o.title,r=o.price,c=o.cover,l=o.id;n.form_data.list_recommend.recommend_goods[0]={name:s,price:r,image:c,id:l}}t.setData((0,i.default)({},"eles["+e.compindex+"].topicList["+e.index+"]",n))}},fail:function(){}})}},this.showTopicReplyComment=function(e){e.stopPropagation();var t=y.appMethod.getAppCurrentPage(),a=e.currentTarget.dataset,n=a.compindex,o=a.index,i=t.data.eles[n].topicList[o];if(i){var s=i.section_id,r=i.id,c=i.agent_user_token,l={};l["eles["+n+"].topicReplyParam.section_id"]=s,l["eles["+n+"].topicReplyParam.article_id"]=r,l["eles["+n+"].topicReplyParam.agent_user_token"]=c,l["eles["+n+"].topicReplyComment.index"]=o,l["eles["+n+"].topicReplyComment.isShow"]=!0,l["eles["+n+"].topicReplyComment.focus"]=!0,l["eles["+n+"].topicList["+o+"].comment_box_show"]=!1,t.setData(l)}},this.pageBackTopAct=function(e){e.stopPropagation(),y.appMethod.pageScrollTo(0)},this.turnToTopicPublish=function(e){e.stopPropagation(),y.appMethod.getAppCurrentPage().communityPublishTypeRef.current.show({communityPublishType:{show:!0}})},this.topicMakePhoneCall=function(e){e.stopPropagation();var t=y.appMethod.getAppCurrentPage(),a=e.currentTarget.dataset.compindex,n=t.data.eles[a].topicPhoneModal.phone;t.setData((0,i.default)({},"eles["+a+"].topicPhoneModal.isShow",!1)),y.appMethod.makePhoneCall(n)},this.goToCommunityPage=function(e){e.stopPropagation();var t=e.currentTarget.dataset.id,a=y.appMethod.getPageFranchiseeId(),n=a?"&franchisee="+a:"";y.appMethod.turnToPage("/informationManagement/pages/communityPage/communityPage?detail="+t+n)},this.topicTurnToGoodsDetail=function(e){e.stopPropagation();var t=e.currentTarget.dataset.id,a=y.appMethod.getPageFranchiseeId(),n=a?"&franchisee="+a:"";y.appMethod.turnToPage("/pages/goodsDetail/goodsDetail?detail="+t+n)},this.topicReplyInput=function(e){var t=y.appMethod.getAppCurrentPage(),a=e.currentTarget.dataset.compindex;t.setData((0,i.default)({},"eles["+a+"].topicReplyParam.text",e.target.value))},this.topicReplyFocus=function(e){var t=y.appMethod.getAppCurrentPage(),a=e.currentTarget.dataset.compindex,n={};if(e.target.height){var o=e.target.height;/iPhone\s?X/i.test(y.appMethod.globalData.systemInfo.model)&&(o=365);t.data.eles[a].topicReplyComment.hasTabBar&&(o-=54),n["eles["+a+"].topicReplyComment.keyboardHeight"]=o+"px"}n["eles["+a+"].topicReplyComment.focus"]=!0,t.setData(n)},this.topicReplyBlur=function(e){var t=y.appMethod.getAppCurrentPage(),a=e.currentTarget.dataset.compindex;t.setData((0,i.default)({},"eles["+a+"].topicReplyComment.focus",!1))},this.topicReplyLineChange=function(e){var t=y.appMethod.getAppCurrentPage(),a=e.currentTarget.dataset.compindex,n=40,o=t.data.eles[a].topicReplyComment.commentContentMaxHeight;y.appMethod.getBoundingClientRect("#"+a+"-comment-box",function(s){Array.isArray(s)&&s[0]&&(n=40*e.target.lineCount,s[0].top>45&&e.target.lineCount>=1&&(s[0].top-45<=40&&(o=n+40,t.setData((0,i.default)({},"eles["+a+"].topicReplyComment.commentContentMaxHeight",o))),t.setData((0,i.default)({},"eles["+a+"].topicReplyComment.commentContentHeight",n))),s[0].top<=45&&n<=o&&t.setData((0,i.default)({},"eles["+a+"].topicReplyComment.commentContentHeight",n)))})},this.topicReplyImagePreview=function(e){e.stopPropagation();var t=y.appMethod.getAppCurrentPage(),a=e.currentTarget.dataset.compindex,n=t.data.eles[a].topicReplyParam.comment_img_url;y.appMethod.previewImage({current:n})},this.topicReplyImageDelete=function(e){e.stopPropagation();var t=y.appMethod.getAppCurrentPage(),a=e.currentTarget.dataset.compindex;t.setData((0,i.default)({},"eles["+a+"].topicReplyParam.comment_img_url",""))},this.topicReplyLocationDelete=function(e){var t,a=y.appMethod.getAppCurrentPage(),n=e.currentTarget.dataset.compindex;a.setData((t={},(0,i.default)(t,"eles["+n+"].topicReplyParam.address",""),(0,i.default)(t,"eles["+n+"].topicReplyParam.latitude",""),(0,i.default)(t,"eles["+n+"].topicReplyParam.longitude",""),t))},this.topicReplyImageChoose=function(e){e.stopPropagation();var t=y.appMethod.getAppCurrentPage(),a=e.currentTarget.dataset.compindex;y.appMethod.chooseImage(function(e){t.setData((0,i.default)({},"eles["+a+"].topicReplyParam.comment_img_url",e))},1)},this.topicReplyLocationChoose=function(e){e.stopPropagation();var t=y.appMethod.getAppCurrentPage(),a=e.currentTarget.dataset.compindex;y.appMethod.chooseLocation({success:function(e){var n=e.name,o=e.address,s=e.latitude,r=e.longitude,c={};c["eles["+a+"].topicReplyParam.latitude"]=s,c["eles["+a+"].topicReplyParam.longitude"]=r,n||o?c["eles["+a+"].topicReplyParam.address"]=n||o:y.appMethod.sendRequest({hideLoading:!0,url:"/index.php?r=Map/getAreaInfoByLatAndLng",data:{latitude:s,longitude:r,country_region_id:1},success:function(e){o=e.data.address||"",t.setData((0,i.default)({},"eles["+a+"].topicReplyParam.address",o))}}),t.setData(c)}})},this.clearCommentInput=function(e){var t;y.appMethod.getAppCurrentPage().setData((t={},(0,i.default)(t,"eles["+e+"].topicReplyParam.text",""),(0,i.default)(t,"eles["+e+"].topicReplyParam.agent_user_token",""),(0,i.default)(t,"eles["+e+"].topicReplyParam.address",""),(0,i.default)(t,"eles["+e+"].topicReplyParam.latitude",""),(0,i.default)(t,"eles["+e+"].topicReplyParam.longitude",""),(0,i.default)(t,"eles["+e+"].topicReplyParam.comment_img_url",""),(0,i.default)(t,"eles["+e+"].topicReplyParam.articleId",""),t))},this.topicCancelReply=function(t){var a;t.stopPropagation();var n=y.appMethod.getAppCurrentPage(),o=t.currentTarget.dataset.compindex;n.setData((a={},(0,i.default)(a,"eles["+o+"].topicReplyComment.isShow",!1),(0,i.default)(a,"eles["+o+"].topicReplyComment.focus",!1),a)),e.clearCommentInput(o)},this.topicSubmitReply=function(t){t.stopPropagation();var a=y.appMethod.getAppCurrentPage(),n=t.currentTarget.dataset.compindex,o=e,s=a.data.eles[n],r=s.topicReplyParam,c=s.topicReplyComment.index;if(r.text=r.text.trim(),!r.text)return void y.appMethod.showModal({content:"请填写回复内容"});y.appMethod.globalData.isTopicCommentSubmiting||(y.appMethod.globalData.isTopicCommentSubmiting=!0,y.appMethod.sendRequest({url:"/index.php?r=AppSNS/AddComment",data:r,method:"post",success:function(e){y.appMethod.showToast({title:"回复成功",success:function(){var e;a.setData((e={},(0,i.default)(e,"eles["+n+"].topicReplyComment.isShow",!1),(0,i.default)(e,"eles["+n+"].topicReplyComment.focus",!1),e))}}),o.refreshOneTopicData({articleId:r.article_id,compindex:n,index:c}),o.clearCommentInput()},complete:function(e){y.appMethod.globalData.isTopicCommentSubmiting=!1}}))},this.topicTurnToUsercenter=function(e){var t=e.currentTarget.dataset,a=t.usertoken,n=t.sourcetype;void 0!==n&&y.appMethod.turnToPage("/informationManagement/pages/communityUsercenter/communityUsercenter?detail=&usertoken="+a+"&sourcetype="+n)},this.tapPrevewPictureHandler=function(e){e.stopPropagation(),y.appMethod.tapPrevewPictureHandler(e)},this.topicSuspensionTouchEvent=function(t){var a=y.appMethod.getAppCurrentPage(),n=t.currentTarget.dataset.compindex,o=a.data.eles[n].topicSuspension,s=e.systemInfo,r=s.windowWidth,c=s.windowHeight,l=t.touches[0],d=l.clientX,u=l.clientY;if("touchstart"===t.type){var m=t.currentTarget,p=m.offsetLeft,f=m.offsetTop,g=r/750*80,h=r/750*100,v=o.topBtnShow?3:2;return void(e.suspensionStyle={width:g,height:h*v,deltX:d-p,deltY:u-f})}var E=e.suspensionStyle,b=E.width,N=E.height,R=E.deltX,k=E.deltY,w=d-R,x=u-k,C=r-b,D=c-N;w<0&&(rightVal=0),w>C&&(w=C),x<0&&(x=0),x>D&&(x=D),a.setData((0,i.default)({},"eles["+n+"].topicSuspension.style",{top:(0,_.transformPx2Rem)(x),left:(0,_.transformPx2Rem)(w),bottom:".40rem",right:".30rem"}))},this._refreshTopicList=function(t,a,n){var o,s=a.idx_arr.idx_value||"";n.setData((o={},(0,i.default)(o,targetCompId+".listParam.page",1),(0,i.default)(o,targetCompId+".listParam.category_id",s),(0,i.default)(o,targetCompId+".listStatus",{loading:!1,isMore:!0}),o)),e.getTopListData(n,t)},this.mode2articlestyle=function(e){return{0:2,1:1,2:1}[e]}};t.default=N},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(36),i=n(o),s=a(39),r=n(s),c=a(31),l=n(c),d=a(0),u=n(d),m=a(3),p=n(m),f=a(1),g=n(f),h=a(2),v=n(h);a(35),a(32);var _=a(4),y=n(_),E=a(12),b=n(E),N=a(5);a(693);var R=function(e){function t(e){(0,u.default)(this,t);var a=(0,g.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));k.call(a);var n=e.index,o=N.appMethod.getAppCurrentPage();return a.init(n,o),a}return(0,v.default)(t,e),(0,p.default)(t,[{key:"render",value:function(){var e=this,t=this.props.data,a=t.customFeature,n=t.activityData,o=t.nodata,i=t.showSignMask,s=t.default_style,c=t.style_settings,d=t.advance,u=t.can_use_integral,m=t.continuous_sign,p=t.showDateArr,f=t.hasSign,g=t.giftTips_con,h=t.giftTips_acc,v=t.continuous_notice,_=t.continuous_notice_user,E=t.continuous_array,b=t.accumulate_array,N=t.showSignSus,R=t.successTips,k=t.signInProgressWidth,w=t.cur_date;n=n||{},c=c||{};var x=a.nodataType,C=function(){return y.default.createElement("div",{className:"signIn-sign-success",onTouchMove:e.signInNotMove,style:{display:N?"block":"none"}},y.default.createElement("div",{className:"signIn-sign-success-bg"}),y.default.createElement("div",{className:"signIn-sign-success-box"},y.default.createElement("div",{className:"signIn-sign-success-tip"},R),y.default.createElement("div",{className:"signIn-sign-success-btn signIn-index","data-compindex":e.props.index,onClick:e.signInSusClose},"确定")))};return y.default.createElement("div",{className:"custom-component sign-in"},function(){var e=null;return x||n.id||!o||(e=y.default.createElement("div",{className:"signIn-notActive"},y.default.createElement("div",{className:"signIn-showImage"},y.default.createElement("img",{src:"https://cdn.jisuapp.cn/static/webapp/images/retroactive/notActive.png"}),y.default.createElement("div",{className:"signIn-notActive-exp"},"活动未开始，敬请期待")))),e}(),function(){return y.default.createElement("div",null,n.id&&y.default.createElement("div",{className:"qiandao-sign"},y.default.createElement("div",{className:"signIn-sign-mask",style:{display:i?"block":"none"},onTouchMove:e.signInNotMove}),(1==s||2==s)&&y.default.createElement("div",{className:"signIn-sign-bg",style:{background:c.background_image?"url("+c.background_image+") no-repeat center /100% 100%;":c.background_color}},y.default.createElement("div",{className:"signIn-sign-rule","data-type":7,onClick:e.signInNavigatorTo,style:{color:d.color_style?d.color_style.rule:"#FFFFFF",background:d.color_style?d.color_style.background:"linear-gradient(180deg, rgba(255, 195, 29, 1) 0%, rgba(255, 181, 64, 1) 100%)"}},"规则"),y.default.createElement("div",{className:"signIn-cur-integral",style:{color:d.color_style?d.color_style.main:""}},"当前积分"),y.default.createElement("div",{className:"signIn-cur-integral-num",style:{color:d.color_style?d.color_style.main:""}},u||0),y.default.createElement("div",{className:"signIn-integral-record",style:{color:d.color_style?d.color_style.main:"",border:".01rem solid "+(d.color_style?d.color_style.main:"#fff")},"data-type":1,onClick:e.signInNavigatorTo},"积分记录")),3==s&&y.default.createElement("div",{style:{paddingBottom:"1.8rem"}},y.default.createElement("div",{className:"sign-bg3",style:{background:c.background_image?'url("'+c.background_image+'") no-repeat center /100% 100%;':c.background_color}},y.default.createElement("form",{bindsubmit:"signInSendFormId"},y.default.createElement("div",{className:"sign-calendar3",style:{backgroundColor:d.color_style?d.color_style.sign_calendar:""},"data-compindex":e.props.index,"data-type":5,"data-start":e.props.start_time,"data-end":e.props.end_time,onClick:e.signInNavigatorTo},"签到日历")),y.default.createElement("div",{className:"sign-accumulateDays",style:{color:d.color_style.sign_day}},"累计签到",y.default.createElement("span",{style:{fontSize:".48rem"}},signedDays),"天"),y.default.createElement("div",{className:"sign-signIn3"},y.default.createElement("form",{style:{margin:"0 auto"}},y.default.createElement("button",{type:"button",className:"signIn-signactive",style:{background:d.color_style?d.color_style.main:"linear-gradient(144deg,rgba(251,240,216,1) 0%,rgba(244,225,185,1) 100%)",color:"#4D4338",display:f?"none":"hidden"},"data-compindex":e.props.index,onClick:e.signInSubmit},"签到"),y.default.createElement("div",{className:"signIn-signed",style:{background:d.color_style?d.color_style.main:"linear-gradient(144deg,rgba(251,240,216,1) 0%,rgba(244,225,185,1) 100%)",color:"#4D4338",display:f?"flex":"none"}},"已签到"))))),y.default.createElement("div",{className:"signIn-sign-box"},y.default.createElement("div",{className:"signIn-sign-wrapper"},y.default.createElement("div",{className:"signIn-sign-info"},y.default.createElement("span",{className:"signIn-sign-sum"},"已连续签到",y.default.createElement("span",{style:{color:d.color_style?d.color_style.rule_span:"#F00",margin:"0 .05rem",fontWeight:"bold"}},m),"天"),y.default.createElement("form",null,y.default.createElement("button",{type:"button",className:"signIn-sign-calendar","data-compindex":e.props.compindex,"data-type":5,"data-start":e.props.start_time,"data-end":e.props.end_time,onClick:e.signInNavigatorTo,style:{background:"none",border:"none",padding:0}},y.default.createElement("span",{className:"signIn-sign-calendarIcon"}),"签到日历"))),p.length>1&&y.default.createElement(y.default.Fragment,null,y.default.createElement("div",{className:"signIn-sign-progress-box",style:{background:d.color_style?e.getRgbColor(d.color_style.background,.2):"#fff0b8"}},y.default.createElement("div",{className:"signIn-sign-progress",style:{width:.01*+k+"rem",backgroundColor:d.color_style?d.color_style.rule_span:1===s?"#FF7235":"#930bd4"}})),y.default.createElement("div",{className:"signIn-sign-date"},p.map(function(e){return y.default.createElement(y.default.Fragment,{key:e.date},y.default.createElement("div",{className:"signIn-date-item"},e.date===w?"今天":e.date,y.default.createElement("div",{className:"signIn-date-dot",style:{backgroundColor:d.color_style?d.color_style.background:1===s?"#ffaf52":"#FFC568"}}),y.default.createElement("div",{className:"signIn-date-integral",style:{background:d.color_style?d.color_style.background:"linear-gradient(180deg, rgba(255, 223, 32, 1) 0%, rgba(255, 189, 31, 1) 100%)",color:d.color_style?d.color_style.rule:"#674444",display:e.isSign?"none":"block"}},"+",e.integral,y.default.createElement("div",{className:"signIn-date-triangle",style:{borderTopColor:d.color_style?d.color_style.background:"#ffc61f",display:e.isSign?"none":"block"}})),e.isSign&&y.default.createElement("div",{className:"signIn-date-signIn",style:{background:"url("+(d?d.signed_icons:1===s?"https://cdn.jisuapp.cn/static/webapp/images/retroactive/signIn.png) no-repeat center/contain":"https://cdn.jisuapp.cn/static/webapp/images/retroactive/signIn2.png) no-repeat center/contain")}}),(e.accumulatedReward||e.continuousReward)&&y.default.createElement("div",{className:"signIn-date-gift",style:{background:"url("+(d?d.gift_icons:1===s?"https://cdn.jisuapp.cn/static/webapp/images/retroactive/gift.png) no-repeat center/contain":"https://cdn.jisuapp.cn/static/webapp/images/retroactive/gift2.png) no-repeat center/contain"),display:e.date===w&&f?"none":"block"}})))}))),1===p.length&&y.default.createElement("div",{className:"signIn-last-date-box"},y.default.createElement("img",{className:"signIn-lastIcon",src:"https://cdn.jisuapp.cn/static/webapp/images/retroactive/"+(f?"signIn.png":"lastCoin.png")}),y.default.createElement("span",{className:"signIn-lastTxt",style:{color:f?"#999":"#674444"}},f?"成功完成签到，你真棒":"+"+p[p.length-1].integral),y.default.createElement("span",{className:"signIn-lastTxt"})),y.default.createElement("div",{className:"signIn-sign-button"},y.default.createElement("form",{style:{margin:"0 auto"}},y.default.createElement("button",{type:"button",className:"signIn-signactive",style:{background:d.color_style?d.color_style.rule_span:1===s?"linear-gradient(90deg, rgba(255, 135, 0, 1) 0%, rgba(255, 67, 62, 1) 100%)":"linear-gradient(90deg, rgba(197, 48, 249, 1) 0%, rgba(116, 59, 255, 1) 100%)",display:f?"none":"block"},"data-compindex":e.props.index,onClick:e.signInSubmit},"签到"),y.default.createElement("div",{className:"signIn-signed",style:{background:d.color_style?d.color_style.rule_span:1===s?"#ff6c19":"linear-gradient(90deg, rgba(197, 48, 249, 1) 0%, rgba(116, 59, 255, 1) 100%)",display:f?"flex":"none"}},"已签到"))),y.default.createElement("div",{className:"signIn-gift-tips"},g,g&&h?"，":"",h)),1==v&&y.default.createElement("div",{className:"signIn-sign-remind"},y.default.createElement(r.default,null,y.default.createElement(r.default.Item,{extra:y.default.createElement(l.default,{className:"switch",color:d.color_style?d.color_style.rule_text:1===s?"#fe4739":"#801dfe",checked:_,onChange:function(t){return e.signInChangeSwitch(t,e.props.index)}})},y.default.createElement("div",{className:"signIn-remind-box"},y.default.createElement("div",{className:"signIn-icon-shalou"}),y.default.createElement("div",{className:"signIn-remind-info"},y.default.createElement("div",{className:"signIn-remind-info-t"},"连续签到提醒"),y.default.createElement("div",{className:"signIn-remind-info-b"},"开启开关，每天12:00将会以模板消息方式提醒")))))),E&&E.rewards&&E.rewards.length>0&&y.default.createElement("div",{className:"signIn-reward-box"},y.default.createElement("div",{className:"signIn-reward-title"},"连续签到额外奖励"),y.default.createElement("div",{className:"signIn-reward-chooseNum",style:{color:d.color_style?d.color_style.rule_text:1===s?"#FE4739":"#6240FE",display:99999==E.kind_limit?"none":"block"}},"以下奖励选",E.kind_limit||1,"个"),y.default.createElement("div",{className:"signIn-reward-type"},E.rewards.map(function(t,a){return y.default.createElement(y.default.Fragment,{key:a},(t.received||E.received_times!=E.kind_limit)&&y.default.createElement("div",{className:"signIn-reward-item"},y.default.createElement("div",null,1===t.type&&y.default.createElement("div",{className:"signIn-award-top"},"积分"),2===t.type&&y.default.createElement("div",{className:"signIn-award-top"},"储值"),3===t.type&&y.default.createElement("div",{className:"signIn-award-top"},"优惠券"),4===t.type&&y.default.createElement("div",{className:"signIn-award-top"},"会员卡"),E.kind_limit!=E.received_times&&y.default.createElement(y.default.Fragment,null,4===E.rewards.length&&y.default.createElement("div",{className:"signIn-award-bottom",style:{maxWidth:"1.3rem"}},t.title?t.title:t.value),3===E.rewards.length&&y.default.createElement("div",{className:"signIn-award-bottom",style:{maxWidth:"1.56rem"}},t.title?t.title:t.value),4!==E.rewards.length&&3!==E.rewards.length&&y.default.createElement("div",{className:"signIn-award-bottom",style:{maxWidth:"2.6rem"}},t.title?t.title:t.value)),E.kind_limit==E.received_times&&y.default.createElement(y.default.Fragment,null,4==E.kind_limit&&y.default.createElement("div",{className:"signIn-award-bottom",style:{maxWidth:"1.3rem"}},t.title?t.title:t.value),3==E.kind_limit&&y.default.createElement("div",{className:"signIn-award-bottom",style:{maxWidth:"1.56rem"}},t.title?t.title:t.value),4!=E.kind_limit&&3!=E.kind_limit&&y.default.createElement("div",{className:"signIn-award-bottom",style:{maxWidth:"2.6rem"}},t.title?t.title:t.value))),y.default.createElement("form",null,!t.received&&E.received_times<E.kind_limit&&y.default.createElement("button",{type:"button",className:"signIn-getRewardBtn signIn-get-reward",style:{background:d.color_style?d.color_style.rule_text:1===s?"linear-gradient(90deg, rgba(255, 135, 0, 1) 0%, rgba(255, 67, 62, 1) 100%)":"linear-gradient(90deg, rgba(197, 48, 249, 1) 0%, rgba(116, 59, 255, 1) 100%)",padding:0},"data-type":t.type,"data-method":2,"data-compindex":e.props.index,onClick:e.signInReceiveExtReward},"领取"),t.received&&y.default.createElement("div",{className:"signIn-getRewardBtn signIn-see_get-reward",style:{background:d.color_style?e.getRgbColor(d.color_style.rule_text,.1):1===s?"rgba(255, 240, 219, 1)":"rgba(128, 29, 254, 0.1)",color:d.color_style?d.color_style.rule_text:1===s?"#ff7e0f":"#6240FE"},"data-detail":t.value,"data-type":t.type,onClick:e.signInNavigatorTo},"查看"),!t.received&&E.received_times==E.kind_limit&&y.default.createElement("div",{className:"signIn-getRewardBtn signIn-cant_get-reward"},"不可领取"))))}))),b&&b.rewards&&b.rewards.length>0&&y.default.createElement("div",{className:"signIn-reward-box"},2==b.accumulate_type&&y.default.createElement("div",{className:"signIn-reward-title"},"当月累计签到满",b.hit_day,"天额外奖励"),1==b.accumulate_type&&y.default.createElement("div",{className:"signIn-reward-title"},"累计签到额外奖励"),y.default.createElement("div",{className:"signIn-reward-chooseNum",style:{color:d.color_style?d.color_style.rule_text:1===s?"#FE4739":"#6240FE",display:9999==b.kind_limit?"none":"block"}},"以下奖励选",b.kind_limit||1,"个"),y.default.createElement("div",{className:"signIn-reward-type"},b.rewards.map(function(t,a){return y.default.createElement(y.default.Fragment,{key:a},(t.received||b.received_times!=b.kind_limit)&&y.default.createElement("div",{className:"signIn-reward-item"},y.default.createElement("div",null,1===t.type&&y.default.createElement("div",{className:"signIn-award-top"},"积分"),2===t.type&&y.default.createElement("div",{className:"signIn-award-top"},"储值"),3===t.type&&y.default.createElement("div",{className:"signIn-award-top"},"优惠券"),4===t.type&&y.default.createElement("div",{className:"signIn-award-top"},"会员卡"),b.kind_limit!=b.received_times&&y.default.createElement(y.default.Fragment,null,4===b.rewards.length&&y.default.createElement("div",{className:"signIn-award-bottom",style:{maxWidth:"1.3rem"}},t.title?t.title:t.value),3===b.rewards.length&&y.default.createElement("div",{className:"signIn-award-bottom",style:{maxWidth:"1.56rem"}},t.title?t.title:t.value),4!==b.rewards.length&&3!==b.rewards.length&&y.default.createElement("div",{className:"signIn-award-bottom",style:{maxWidth:"2.6rem"}},t.title?t.title:t.value)),b.kind_limit==b.received_times&&y.default.createElement(y.default.Fragment,null,4==b.kind_limit&&y.default.createElement("div",{className:"signIn-award-bottom",style:{maxWidth:"1.3rem"}},t.title?t.title:t.value),3==b.kind_limit&&y.default.createElement("div",{className:"signIn-award-bottom",style:{maxWidth:"1.56rem"}},t.title?t.title:t.value),4!=b.kind_limit&&3!=b.kind_limit&&y.default.createElement("div",{className:"signIn-award-bottom",style:{maxWidth:"2.6rem"}},t.title?t.title:t.value))),y.default.createElement("form",null,!t.received&&b.received_times<b.kind_limit&&y.default.createElement("button",{type:"button",className:"signIn-getRewardBtn signIn-get-reward",style:{background:d.color_style?d.color_style.rule_text:1===s?"linear-gradient(90deg, rgba(255, 135, 0, 1) 0%, rgba(255, 67, 62, 1) 100%)":"linear-gradient(90deg, rgba(197, 48, 249, 1) 0%, rgba(116, 59, 255, 1) 100%)",padding:0},"data-type":t.type,"data-method":2,"data-compindex":e.props.index,onClick:e.signInReceiveExtReward},"领取"),t.received&&y.default.createElement("div",{className:"signIn-getRewardBtn signIn-see_get-reward",style:{background:d.color_style?e.getRgbColor(d.color_style.rule_text,.1):1===s?"rgba(255, 240, 219, 1)":"rgba(128, 29, 254, 0.1)",color:d.color_style?d.color_style.rule_text:1===s?"#ff7e0f":"#6240FE"},"data-detail":t.value,"data-type":t.type,onClick:e.signInNavigatorTo},"查看"),!t.received&&b.received_times>=b.kind_limit&&y.default.createElement("div",{className:"signIn-getRewardBtn signIn-cant_get-reward"},"不可领取"))))})))),3==s&&y.default.createElement("div",{className:"signIn-sign-box",style:{paddingBottom:E.rewards.length||b.rewards.length?"1.5rem":""}},E.rewards.length&&y.default.createElement("div",{className:"signIn-reward-box"},y.default.createElement("div",{className:"signIn-reward-title"},"连续签到额外奖励"),y.default.createElement("div",{className:"signIn-reward-chooseNum",style:{color:d.color_style?d.color_style.main:"",display:99999==E.kind_limit?"none":"block"}},"以下奖励选",E.kind_limit||1,"个"),y.default.createElement("div",{className:"signIn-reward-type"},E.rewards.map(function(t){return y.default.createElement(y.default.Fragment,{key:t.id},(t.received||E.received_times!=E.kind_limit)&&y.default.createElement("div",{className:"signIn-reward-item"},y.default.createElement("div",null,1===t.type&&y.default.createElement("div",{className:"signIn-award-top"},"积分"),2===t.type&&y.default.createElement("div",{className:"signIn-award-top"},"储值"),3===t.type&&y.default.createElement("div",{className:"signIn-award-top"},"优惠券"),4===t.type&&y.default.createElement("div",{className:"signIn-award-top"},"会员卡"),E.kind_limit!=E.received_times&&y.default.createElement(y.default.Fragment,null,4===E.rewards.length&&y.default.createElement("div",{className:"signIn-award-bottom",style:{maxWidth:"1.3rem"}},t.title?t.title:t.value),3===E.rewards.length&&y.default.createElement("div",{className:"signIn-award-bottom",style:{maxWidth:"1.56rem"}},t.title?t.title:t.value),4!==E.rewards.length&&3!==E.rewards.length&&y.default.createElement("div",{className:"signIn-award-bottom",style:{maxWidth:"2.6rem"}},t.title?t.title:t.value)),E.kind_limit==e.continuous_array.received_times&&y.default.createElement(y.default.Fragment,null,4==E.kind_limit&&y.default.createElement("div",{className:"signIn-award-bottom",style:{maxWidth:"1.3rem"}},t.title?t.title:t.value),3==E.kind_limit&&y.default.createElement("div",{className:"signIn-award-bottom",style:{maxWidth:"1.56rem"}},t.title?t.title:t.value),4!=E.kind_limit&&3!=E.kind_limit&&y.default.createElement("div",{className:"signIn-award-bottom",style:{maxWidth:"2.6rem"}},t.title?t.title:t.value))),y.default.createElement("form",null,!t.received&&E.received_times<E.kind_limit&&y.default.createElement("button",{type:"button",className:"signIn-getRewardBtn signIn-get-reward",style:{background:d.color_style?d.color_style.main:"",padding:0},"data-type":t.type,"data-method":2,"data-compindex":e.props.index,onClick:e.signInReceiveExtReward},"领取"),t.received&&y.default.createElement("div",{className:"signIn-getRewardBtn signIn-see_get-reward",style:{background:d.color_style?e.getRgbColor(d.color_style.main,.1):"",color:d.color_style?d.color_style.main:""},"data-detail":t.value,"data-type":t.type,onClick:function(t){return e.signInNavigatorTo(t)}},"查看"),!t.received&&E.received_times==E.kind_limit&&y.default.createElement("div",{className:"signIn-getRewardBtn signIn-cant_get-reward"},"不可领取"))))}))),b.rewards.length&&y.default.createElement("div",{className:"signIn-reward-box"},2==b.accumulate_type&&y.default.createElement("div",{className:"signIn-reward-title"},"当月累计签到满",b.hit_day,"天额外奖励"),1==b.accumulate_type&&y.default.createElement("div",{className:"signIn-reward-title"},"累计签到额外奖励"),y.default.createElement("div",{className:"signIn-reward-chooseNum",style:{color:d.color_style?d.color_style.main:"",display:9999==b.kind_limit?"none":"block"}},"以下奖励选",b.kind_limit||1,"个"),y.default.createElement("div",{className:"signIn-reward-type"},b.rewards.map(function(t){return y.default.createElement(y.default.Fragment,{key:t.id},(t.received||b.received_times!=b.kind_limit)&&y.default.createElement("div",{className:"signIn-reward-item"},y.default.createElement("div",null,1===t.type&&y.default.createElement("div",{className:"signIn-award-top"},"积分"),2===t.type&&y.default.createElement("div",{className:"signIn-award-top"},"储值"),3===t.type&&y.default.createElement("div",{className:"signIn-award-top"},"优惠券"),4===t.type&&y.default.createElement("div",{className:"signIn-award-top"},"会员卡"),b.kind_limit!=b.received_times&&y.default.createElement(y.default.Fragment,null,4===b.rewards.length&&y.default.createElement("div",{className:"signIn-award-bottom",style:{maxWidth:"1.3rem"}},t.title?t.title:t.value),3===b.rewards.length&&y.default.createElement("div",{className:"signIn-award-bottom",style:{maxWidth:"1.56rem"}},t.title?t.title:t.value),4!==b.rewards.length&&3!==b.rewards.length&&y.default.createElement("div",{className:"signIn-award-bottom",style:{maxWidth:"2.6rem"}},t.title?t.title:t.value)),b.kind_limit==b.received_times&&y.default.createElement(y.default.Fragment,null,4==b.kind_limit&&y.default.createElement("div",{className:"signIn-award-bottom",style:{maxWidth:"1.3rem"}},t.title?t.title:t.value),3==b.kind_limit&&y.default.createElement("div",{className:"signIn-award-bottom",style:{maxWidth:"1.56rem"}},t.title?t.title:t.value),4!=b.kind_limit&&3!=b.kind_limit&&y.default.createElement("div",{className:"signIn-award-bottom",style:{maxWidth:"2.6rem"}},t.title?t.title:t.value))),y.default.createElement("form",null,!t.received&&b.received_times<b.kind_limit&&y.default.createElement("button",{type:"button",className:"signIn-getRewardBtn signIn-get-reward",style:{background:d.color_style?d.color_style.main:"",padding:0},"data-type":t.type,"data-method":3,"data-compindex":e.props.index,onClick:e.signInReceiveExtReward},"领取"),t.received&&y.default.createElement("div",{className:"signIn-getRewardBtn signIn-see_get-reward",style:{background:d.color_style?e.getRgbColor(d.color_style.main,.1):"",color:d.color_style?d.color_style.main:""},"data-detail":t.value,"data-type":t.type,onClick:e.signInNavigatorTo},"查看"),!t.received&&b.received_times>=b.kind_limit&&y.default.createElement("div",{className:"signIn-getRewardBtn signIn-cant_get-reward"},"不可领取"))))})))),C()))}())}}]),t}(y.default.Component),k=function(){var e=this;this.init=function(t,a){N.appMethod.getStorage({key:"activityData",success:function(n){e.signInExtraRewards(t,a,Number(n&&n.data&&n.data.id))}}),e.signInGetActivity(t,a)},this.signInGetActivity=function(t,a){var n={};N.appMethod.sendRequest({url:"/index.php?r=appSignActivity/GetEffectActivity",data:{},success:function(o){N.appMethod.setStorage({key:"activityData",data:o.data});var i=new Date(1e3*o.data.start_time).toLocaleDateString(),s=new Date(1e3*o.data.end_time).toLocaleDateString(),r=o.data,c=o.data.style_settings,l=o.data.style_settings.advance||"",d=b.default.formatTimeYMD("","MM.DD");n["eles["+t+"].start_time"]=i,n["eles["+t+"].end_time"]=s,n["eles["+t+"].cur_date"]=d,n["eles["+t+"].sign_type"]=o.data.sign_type,n["eles["+t+"].continuous_notice"]=o.data.continuous_notice,n["eles["+t+"].activity_id"]=Number(o.data.id),n["eles["+t+"].activityData"]=r,n["eles["+t+"].style_settings"]=c,n["eles["+t+"].default_style"]=c.default_style,n["eles["+t+"].advance"]=l,n["eles["+t+"].isLoading"]=!1,n["eles["+t+"].showDateArr"]=[],n["eles["+t+"].sendFormIdTimes"]=0,n["eles["+t+"].showGetRetroModal"]=!1,n["eles["+t+"].showSignMask"]=!1,n["eles["+t+"].showSignSus"]=!1,n["eles["+t+"].showExchangeModal"]=!1,n["eles["+t+"].timer"]=null,a.setData(n),e.signInGetContinuousDay(t,a),e.signInExtraRewards(t,a),"1"===o.data.continuous_notice&&e.signInGetUserNotice(t,a)},successStatusAbnormal:function(){return n["eles["+t+"].nodata"]=!0,a.setData(n),!1}})},this.signInGetContinuousDay=function(t,a){var n={},o=a.data.eles[t].activity_id;N.appMethod.sendRequest({url:"/index.php?r=appSignActivity/GetContinuousDay",data:{activity_id:o},success:function(o){n["eles["+t+"].continuous_sign"]=o.data.continuous_sign,a.setData(n),e.signInDateIsSign(t,a)}})},this.signInExtraRewards=function(e,t,a){var n={},o=a||t.data.eles[e].activity_id;N.appMethod.sendRequest({url:"/index.php?r=appSignActivity/GetExtraRewards",data:{activity_id:o},success:function(a){n["eles["+e+"].continuous_array"]=a.data.continuous,n["eles["+e+"].accumulate_array"]=a.data.accumulate,t.setData(n)},successStatusAbnormal:function(){return!1}})},this.signInGetUserNotice=function(e,t){var a=t.data.eles[e].activity_id,n={};N.appMethod.sendRequest({url:"/index.php?r=appSignActivity/GetUserNoticeSwitch",data:{activity_id:a},success:function(a){n["eles["+e+"].continuous_notice_user"]=0!=a.data,t.setData(n)},successStatusAbnormal:function(){return!1}})},this.signInDateIsSign=function(t,a){var n=a.data.eles[t].activity_id;N.appMethod.sendRequest({url:"/index.php?r=appSignActivity/DateIsSign",data:{activity_id:n,sign_date:(new Date).toDateString()},success:function(n){var o={};n.data.is_sign?(o["eles["+t+"].hasSign"]=!0,a.setData(o)):2==a.data.eles[t].sign_type&&e.signIn(t,a,""),e.getTimeLength(t,a)}})},this.signIn=function(t,a,n){var o=0,s={},r=a.data.eles[t].sign_type,c=a.data.eles[t].cur_date,l=a.data.eles[t].activity_id,d=a.data.eles[t].hasSign,u=[].concat((0,i.default)(a.data.eles[t].showDateArr));a.data.eles[t].isLoading||(s["eles["+t+"].isLoading"]=!0,a.setData(s),N.appMethod.sendRequest({url:"/index.php?r=appSignActivity/SignIn",method:"post",data:{activity_id:l,homepageRouter:"pages/"+N.appMethod.globalData.homepageRouter+"/"+N.appMethod.globalData.homepageRouter,form_id:n},success:function(n){for(var i=0;i<u.length;i++)u[i].date===c&&(u[i].isSign=!0,o=d||0!==i?i/(u.length-1)*540+60:20,s["eles["+t+"].signInProgressWidth"]=o);s["eles["+t+"].hasSign"]=!0,s["eles["+t+"].showDateArr"]=u,s["eles["+t+"].showSignSus"]=!0,s["eles["+t+"].showSignMask"]=!0,s["eles["+t+"].successTips"]=2==r?"极速签到成功":"签到成功",a.setData(s,function(){e.signInRewardCheck(t,a),e.signInExtraRewards(t,a),e.signInGetSignedDates(t,a),e.signInGetContinuousDay(t,a),e.signInCloseSignModal(t,a),e.signInGetIntegralInfo(t,a)})},complete:function(e){}}))},this.getTimeLength=function(t,a){var n=new Date,o=new Date,i=(a.data.eles[t].start_time,a.data.eles[t].end_time),s=a.data.eles[t].continuous_sign,r=a.data.eles[t].hasSign;(s%7!=0||r)&&(s=r?s-1:s,n=new Date(n.getTime()-s%7*24*60*60*1e3));var c=Math.floor((new Date(i).getTime()-n.getTime())/864e5)+1;o=c>=7?b.default.formatTimeYMD(new Date(n.getTime()+5184e5),"YYYY/MM/DD"):b.default.formatTimeYMD(new Date(n.getTime()+864e5*c),"YYYY/MM/DD"),n=b.default.formatTimeYMD(n,"YYYY/MM/DD");var l=e.signInGetDays(n,o),d={};d["eles["+t+"].dateArr"]=l,a.setData(d),e.signInRewardCheck(t,a)},this.signInGetDays=function(e,t){for(var a=new Date(e),n=new Date(t),o=[],i=a.getFullYear(),s=a.getMonth(),r=a.getDate();a.getTime()<=n.getTime();)o.push(b.default.formatNumber(a.getMonth()+1)+"."+b.default.formatNumber(a.getDate())),a=new Date(i,s,++r);return o.map(function(e,t){return{isSign:!1,date:e}})},this.signInRewardCheck=function(t,a){var n=a.data.eles[t].activity_id,o=a.data.eles[t].dateArr,s={};N.appMethod.sendRequest({url:"/index.php?r=appSignActivity/DaysRewards",data:{activity_id:n,days:o.length},success:function(n){for(var r=0;r<o.length;r++)for(var c=0;c<n.data.length;c++)b.default.formatTimeYMD(n.data[c].timestamps,"MM.DD")==o[r].date&&(o[r].accumulatedReward=n.data[c].accumulatedReward,o[r].continuousReward=n.data[c].continuousReward,o[r].integral=n.data[c].integral);s["eles["+t+"].giftTips_con"]=n.continuous_str,s["eles["+t+"].giftTips_acc"]=n.accumulated_str,s["eles["+t+"].dateArr"]=[].concat((0,i.default)(o)),a.setData(s),e.signInGetSignedDates(t,a,e.signInFn)}})},this.signInGetSignedDates=function(e,t,a){var n=t.data.eles[e].activity_id;N.appMethod.sendRequest({url:"/index.php?r=appSignActivity/GetSignedDates",data:{activity_id:n,include_today:1},success:function(n){"function"==typeof a&&a(e,t,n.data)}})},this.signInCloseSignModal=function(t,a){clearTimeout(a.data.eles[t].timer),a.data.eles[t].timer=setTimeout(function(){e.signInGetIntegral(t,a)},3e3)},this.signInGetIntegral=function(e,t){var a={};a["eles["+e+"].showSignMask"]=!1,a["eles["+e+"].showSignSus"]=!1,t.setData(a)},this.signInGetIntegralInfo=function(e,t){alert("积分");var a={};N.appMethod.sendRequest({url:"/index.php?r=AppShop/GetIntegralInfo",data:{},success:function(n){a["eles["+e+"].can_use_integral"]=n.data.can_use_integral,t.setData(a)}})},this.signInFn=function(e,t,a){for(var n=t.data.eles[e].dateArr,o=t.data.eles[e].cur_date,i=t.data.eles[e].hasSign,s=a.map(function(e){return b.default.formatTimeYMD(e,"MM.DD")}),r=0;r<n.length;r++)for(var c=0;c<s.length;c++)n[r].date===s[c]&&(n[r].isSign=!0);for(var l=n,d={},u=0,m=0;m<l.length;m++)l[m].date===o&&(u=i||0!==m?m/(l.length-1)*540+60:20,d["eles["+e+"].signInProgressWidth"]=u);d["eles["+e+"].dateArr"]=n,d["eles["+e+"].showDateArr"]=l,d["eles["+e+"].signedDays"]=a.length,t.setData(d)},this.signInNotMove=function(e){},this.signInNavigatorTo=function(e){var t=e.currentTarget.dataset.type.toString(),a="";switch(t){case"1":a="/userCenter/pages/myIntegral/myIntegral";break;case"2":a="/eCommerce/pages/balance/balance";break;case"3":a="/eCommerce/pages/couponList/couponList";break;case"4":a="/eCommerce/pages/vipCard/vipCard?is_paid_vip=1&detail="+e.target.dataset.detail;break;case"5":a="/signIn/pages/calendar/calendar?start_time="+e.target.dataset.start+"&end_time="+e.target.dataset.end;break;case"6":a="/signIn/pages/retroactive/retroactive";break;case"7":a="/signIn/pages/rule/rule"}N.appMethod.turnToPage(a,!1)},this.signInSubmit=function(t){var a=t.currentTarget.dataset.compindex,n=N.appMethod.getAppCurrentPage();e.signIn(a,n,""),e.signInSendForm(a,n,"")},this.signInSendForm=function(e,t,a){var n=t.data.eles[e].sendFormIdTimes,o={};0===n&&N.appMethod.sendRequest({url:"/index.php?r=api/AppMsgTpl/SaveUserFormId",data:{form_id:a},method:"post",success:function(a){o["eles["+e+"].sendFormIdTimes"]=2,t.setData(o)}})},this.signInChangeSwitch=function(e,t){var a=N.appMethod.getAppCurrentPage(),n=a.data.eles[t].activity_id,o={};o["eles["+t+"].continuous_notice_user"]=e,a.setData(o),N.appMethod.sendRequest({url:"/index.php?r=appSignActivity/SignNoticeSwitch",data:{activity_id:n,switch:e?1:0},success:function(n){0!==n.status&&(o["eles["+t+"].continuous_notice_user"]=!e,a.setData(o))}})},this.signInReceiveExtReward=function(t){var a=t.currentTarget.dataset.type,n=N.appMethod.getAppCurrentPage(),o=t.currentTarget.dataset.compindex,i=t.currentTarget.dataset.method;e.signInGetReward(o,n,"",a,i)},this.signInSusClose=function(e){var t=N.appMethod.getAppCurrentPage(),a=e.target.dataset.compindex,n={};n["eles["+a+"].showSignMask"]=!1,n["eles["+a+"].showSignSus"]=!1,t.setData(n)},this.signInGetReward=function(t,a,n,o,i){var s={},r=a.data.eles[t].activity_id;N.appMethod.sendRequest({url:"/index.php?r=appSignActivity/ReceiveExtraReward",data:{activity_id:r,reward_type:o,received_method:i,form_id:n},success:function(n){switch(o){case 1:o="积分";break;case 2:o="储值";break;case 3:o="优惠券";break;case 4:o="会员卡"}s["eles["+t+"].showSignMask"]=!0,s["eles["+t+"].showSignSus"]=!0,s["eles["+t+"].successTips"]=o+"领取成功",a.setData(s),e.signInExtraRewards(t,a),"积分"==o&&e.signInGetIntegralInfo(t,a)},successStatusAbnormal:function(){return N.appMethod.showToast({title:"库存不足",icon:"none",duration:1500}),!1}}),e.signInCloseSignModal(t,a)},this.getRgbColor=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return arr=[e.substring(1,3),e.substring(3,5),e.substring(5)],brr=arr.map(function(e,t){return parseInt(e,16)}),"rgba("+brr.join(",")+","+t+")"}};t.default=R},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(13),i=n(o),s=a(0),r=n(s),c=a(3),l=n(c),d=a(1),u=n(d),m=a(2),p=n(m),f=a(4),g=n(f),h=a(5),v=a(6),_=a(11),y=a(21),E=a(40);a(695);var b=function(e){function t(e){(0,r.default)(this,t);var a=(0,u.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));N.call(a);var n=e.index,o=h.appMethod.getAppCurrentPage();return a.init(n,o),a}return(0,p.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this,t=this.props.data,a=t.customFeature,n=t.goods_data,o=a.mode,i=a.lineHeight,s=a.margin,r=a.lineBackgroundColor,c=a.imgHeight,l=a.imgWidth,d=a.isShowGroupBuyStatus,u=a.isShowCountdown,m=a.isShowVirtualPrice,p=a.isShowSales;i=(0,v.transformPx2Rem)(i,320),s=(0,v.transformPx2Rem)(s,320),c=(0,v.transformPx2Rem)(c,320),l=(0,v.transformPx2Rem)(l,320);var f=function(t,a){return g.default.createElement("div",{className:"to-join"},0==t.status&&g.default.createElement("button",{className:"ready"},"即将开团"),1==t.status&&g.default.createElement("button",{className:"remain","data-goodsid":t.goods_id,"data-activityid":t.activity_id,"data-index":a,"data-compindex":e.props.index,onClick:e.remainMe},"提醒我"),2==t.status&&g.default.createElement("button",{className:"reminded"},"已提醒"),3==t.status&&g.default.createElement("button",{className:"go"},4==t.activity_type?"参与抽奖":"去拼团"),4==t.status&&g.default.createElement("button",{className:"over"},"已结束"))},h=function(e,t){var a=null;return 1!=o&&2!=o||!p?1!=o&&2!=o||p?3==o&&(a=g.default.createElement("div",{className:"sales-status"},g.default.createElement("div",{className:"price"},g.default.createElement("span",{className:"min-price"},"¥",g.default.createElement("span",{style:{fontSize:".36rem"}},e.group_buy_price)),m&&g.default.createElement("span",{className:"origin-price"},"¥",e.original_price),p&&g.default.createElement("div",{className:"sales"},"已团",e.goods_count,"件")),g.default.createElement("div",{className:"status"},f(e,t)))):a=g.default.createElement("div",{className:"no-sales"},g.default.createElement("div",{className:"price"},g.default.createElement("div",{className:"min-price"},"¥",g.default.createElement("span",{style:{fontSize:".36rem"}},e.group_buy_price)),m&&g.default.createElement("div",{className:"origin-price"},"¥",e.original_price)),f(e,t)):a=g.default.createElement("div",{className:"hava-sales"},g.default.createElement("div",{className:"price"},g.default.createElement("span",{className:"min-price"},"¥",g.default.createElement("span",{style:{fontSize:".36rem"}},e.group_buy_price)),m&&g.default.createElement("span",{className:"origin-price"},"¥",e.original_price)),g.default.createElement("div",{className:"status"},g.default.createElement("div",{className:"sales"},"已团",e.goods_count,"件"),f(e,t))),a};return g.default.createElement("div",{className:"custom-component group-buy-list"},g.default.createElement(_.ScrollView,{className:"element group scroll-ele group-list-mode-"+o+" "+(2==t.customFeature.mode&&t.curpage>0?"hor-request-status":"")},0==o&&function(){return g.default.createElement("div",{className:"js-list-container group-list list"},n.map(function(t,a){return g.default.createElement("div",{className:"background-ele goods-item",key:a,style:{height:i,marginBottom:s,background:r},"data-goodsid":t.goods_id,"data-activityid":t.activity_id,"data-status":t.status,"data-app-id":t.app_id,onClick:e.gotoGroupDetail},g.default.createElement("div",{className:"image-wrap",style:{width:l,height:c}},g.default.createElement("img",{src:t.cover})),g.default.createElement("div",{className:"content-wrap",style:{width:"calc(100% - "+l+" - .2rem)"}},g.default.createElement("div",{className:"title"},d&&g.default.createElement("div",{className:"type",style:{background:r}},g.default.createElement("div",null,g.default.createElement("i",{className:"icon-moon icon-number-people"})),g.default.createElement("span",null,0==t.activity_type?t.num_of_people.length>1?"多人团":t.num_of_people[0]+"人团":1==t.activity_type?"新人团":2==t.activity_type?"阶梯团":3==t.activity_type?"帮帮团":"抽奖团")),t.isSubShopGoods?"【"+t.app_sub_shop_name+"】":"",t.title),4==t.status||!u||3==t.status&&"-1"==t.end_date?g.default.createElement("div",{className:"differ-line"},g.default.createElement("div",{className:"first-line"},g.default.createElement("div",{className:"price-detail"},g.default.createElement("span",{className:"min-price"},"¥",g.default.createElement("span",{style:{fontSize:".36rem"}},t.group_buy_price)),m&&g.default.createElement("span",{className:"origin-price"},"¥",t.original_price)),g.default.createElement("div",{className:"sales-num"},p&&g.default.createElement(g.default.Fragment,null,"已团",t.goods_count,"件"))),g.default.createElement("div",{className:"second-line"},f(t,a))):g.default.createElement("div",{className:"same-line"},g.default.createElement("div",{className:"first-line"},g.default.createElement("div",{className:"price-detail"},g.default.createElement("span",{className:"min-price"},"¥",g.default.createElement("span",{style:{fontSize:".37rem"}},t.group_buy_price)),m&&g.default.createElement("span",{className:"origin-price"},"¥",t.original_price)),f(t,a)),g.default.createElement("div",{className:"second-line"},g.default.createElement("div",{className:"sales-num"},p&&g.default.createElement(g.default.Fragment,null,"已团",t.goods_count,"件")),!(3==t.status&&"-1"==t.end_date)&&g.default.createElement("div",{className:"count-big-down"},3!=t.status?"距开始":"距结束",t.downCount.hours," : ",t.downCount.minutes," : ",t.downCount.seconds)))))}))}(),0!=o&&function(){var t={1:"opposite",3:"bigPicture"}[o]||"";return g.default.createElement("div",{className:"js-list-container group-list "+t},n.map(function(t,a){return g.default.createElement("div",{className:"background-ele goods-item",key:a,style:{height:i,marginBottom:s,background:r},"data-goodsid":t.goods_id,"data-activityid":t.activity_id,"data-status":t.status,"data-app-id":t.app_id,onClick:e.gotoGroupDetail},g.default.createElement("div",{className:"image-wrap",style:{width:l,height:c}},g.default.createElement("img",{src:t.cover}),4!=t.status&&u&&g.default.createElement(g.default.Fragment,null,!(3==t.status&&"-1"==t.end_date)&&4!=t.status&&g.default.createElement("div",{className:"count-down "+(0==t.status||1==t.status?"ready":"going")},g.default.createElement("div",null,3!=t.status&&g.default.createElement(g.default.Fragment,null,"距开始"),3==t.status&&"-1"!=t.end_date&&g.default.createElement(g.default.Fragment,null,"距结束")),g.default.createElement("div",null,g.default.createElement("div",null,t.downCount.hours),g.default.createElement("span",null," : "),g.default.createElement("div",{style:{width:".48rem"}},t.downCount.minutes),g.default.createElement("span",null," : "),g.default.createElement("div",{style:{width:".48rem"}},t.downCount.seconds))))),g.default.createElement("div",{className:"content-wrap"},g.default.createElement("div",{className:"title"},d&&g.default.createElement("div",{className:"type",style:{background:r}},g.default.createElement("div",null,g.default.createElement("i",{className:"icon-moon icon-number-people"})),g.default.createElement("span",null,0==t.activity_type?t.num_of_people.length>1?"多人团":t.num_of_people[0]+"人团":1==t.activity_type?"新人团":2==t.activity_type?"阶梯团":3==t.activity_type?"帮帮团":"抽奖团")),t.isSubShopGoods?"【"+t.app_sub_shop_name+"】":"",t.title),h(t)))}))}(),t.loading&&g.default.createElement(y.RequestStatus,{is:"requestLoading"}),0==t.is_more&&0==t.goods_data.length&&g.default.createElement(y.RequestStatus,{is:"requestNone",data:{data:"暂无商品"}}),t.loadingFail&&g.default.createElement(y.RequestStatus,{is:"requestFail",data:{refreshEvent:this.catchMoreGroupList,compindex:this.props.index}}),0==t.is_more&&t.goods_data.length>0&&t.customFeature.isShowFinishText&&g.default.createElement(y.RequestStatus,{is:"requestAll"}),1==t.customFeature.vesselAutoheight&&1==t.customFeature.loadingMethod&&2!=t.customFeature.mode&&!!t.is_more&&0!=t.is_more&&!t.loading&&!t.loadingFail&&g.default.createElement(E.LoadingBtn,{customFeature:t.customFeature,"data-compindex":this.props.index,onClick:this.catchMoreGroupList})))}}]),t}(g.default.Component),N=function(){var e=this;this.init=function(t,a){var n=e,o=a.data.eles[t].customFeature,i={param:{page:1,status:0}};if(a.groupBuyStatusComps&&a.groupBuyStatusComps.length)for(var s in a.groupBuyStatusComps){var r=a.groupBuyStatusComps[s].compindex,c=a.data.eles[r].customFeature;if(c.status_refresh_object==o.id){var l=c.checkOptionsOne;for(var d in l)if(l[d].checked){i={param:{page:1,status:d}};var u={};u[r+".customFeature.selectNum"]=d,u["eles["+t+"].selectNum"]=d,a.setData(u);break}}}var m=!1;if(a.newClassifyGroupidsParams&&a.newClassifyGroupidsParams.length)for(var p=a.newClassifyGroupidsParams,f=0;f<p.length;f++){var g=p[f].compindex;a.data.eles[g].customFeature.status_refresh_object==o.id&&(m=!0)}m||n.getGroupBuyList(t,i,o)},this.getGroupBuyList=function(e,t,a){var n=h.appMethod.getAppCurrentPage(),o={},i=n.data.eles[e],s=a||i.customFeature,r=s.loadingNum||10;if(o["eles["+e+"].loading"]=!0,o["eles["+e+"].loadingFail"]=!1,o["eles["+e+"].goods_data"]=[],o["eles["+e+"].is_more"]=1,o["eles["+e+"].curpage"]=0,n.downcountObject&&n.downcountObject[e]){var c=n.downcountObject[e];if(c&&c.length)for(var l=0;l<c.length;l++)c[l]&&c[l].clear()}n.setData(o),t.param.page_size=r,s.source&&"none"!=s.source&&(t.param.idx_arr={idx:"category",idx_value:s.source}),s.isShowFranchiseeGoods&&!n.franchiseeId&&(t.param.parent_app_id=h.appMethod.getAppId()),h.appMethod.sendRequest({hideLoading:!0,url:"/index.php?r=appGroupBuy/goodsList",data:t.param,method:"post",chain:!0,subshop:n.franchiseeId||"",success:function(t){if(t.data){for(var a=t.data,o=h.appMethod.getAppId(),i={},r=[],c=0;c<a.length;c++){var l=a[c],d=void 0;l.description="",l.downCount={hours:"00",minutes:"00",seconds:"00"},l.original_price="0.00"==l.virtual_price?l.original_price:l.virtual_price,l.server_time=t.current_time||Date.parse(new Date)/1e3,l.seckill_end_time=l.end_date,l.seckill_start_time=l.start_date,0==l.status||1==l.status||2==l.status?d=h.appMethod.beforeGroupDownCount(l,n,"eles["+e+"]goods_data["+c+"]"):3==l.status&&"-1"!=l.end_date&&(d=h.appMethod.duringGroupDownCount(l,n,"eles["+e+"]goods_data["+c+"]")),d&&r.push(d),s.isShowFranchiseeGoods&&l.app_id!==o?l.isSubShopGoods=!0:l.isSubShopGoods=!1}i["eles["+e+"].goods_data"]=t.data,i["eles["+e+"].is_more"]=t.is_more,i["eles["+e+"].curpage"]=t.current_page,i["eles["+e+"].loading"]=!1,i["eles["+e+"].loadingFail"]=!1,n.downcountObject[e]=r,n.setData(i)}},fail:function(t){var a={};a["eles["+e+"].loadingFail"]=!0,a["eles["+e+"].loading"]=!1,n.setData(a)}})},this.remainMe=function(t){var a=h.appMethod.getAppCurrentPage(),n=t.currentTarget.dataset,o=n.compindex,i=n.index;h.appMethod.sendRequest({url:"/index.php?r=appShop/careActivity",data:{data_id:n.goodsid,activity_id:n.activityid,activity_type:0},success:function(e){h.appMethod.showToast({title:"提醒成功！",duration:2e3});var t={};t["eles["+o+"].goods_data["+i+"].status"]=2,a.setData(t)}}),e.groupSaveUserFormId(t.detail.formId)},this.catchMoreGroupList=function(e){var t=h.appMethod.getAppCurrentPage(),a="object"==(void 0===e?"undefined":(0,i.default)(e))?e.currentTarget.dataset.compindex:e,n=t.data.eles[a],o=n.customFeature,s=n.curpage+1,r={},c={};!n.loading&&n.is_more&&(c["eles["+a+"].loading"]=!0,c["eles["+a+"].loadingFail"]=!1,t.setData(c),r.page_size=o.loadingNum||10,r.page=s,r.status=0,r.is_count=0,r.status=n.selectNum,o.source&&"none"!=o.source&&(r.idx_arr={idx:"category",idx_value:o.source}),o.isShowFranchiseeGoods&&!t.franchiseeId&&(r.parent_app_id=h.appMethod.getAppId()),h.appMethod.sendRequest({hideLoading:!0,url:"/index.php?r=appGroupBuy/goodsList",data:r,method:"post",chain:!0,subshop:t.franchiseeId||"",success:function(e){if(e.data){for(var i=e.data,s=h.appMethod.getAppId(),r={},c=n.goods_data.length,l=t.downcountObject[a]||[],d=0;d<i.length;d++){var u=i[d],m=void 0;u.description="",u.downCount={hours:"00",minutes:"00",seconds:"00"},u.server_time=e.current_time||Date.parse(new Date)/1e3,u.seckill_end_time=u.end_date,u.seckill_start_time=u.start_date,0==u.status||1==u.status||2==u.status?m=h.appMethod.beforeGroupDownCount(u,t,"eles["+a+"]goods_data["+(d+c)+"]"):3==u.status&&"-1"!=u.end_date&&(m=h.appMethod.duringGroupDownCount(u,t,"eles["+a+"]goods_data["+(d+c)+"]")),m&&l.push(m),o.isShowFranchiseeGoods&&u.app_id!==s?u.isSubShopGoods=!0:u.isSubShopGoods=!1}var p=e.data;r["eles["+a+"].goods_data"]=n.goods_data.concat(p),r["eles["+a+"].is_more"]=e.is_more,r["eles["+a+"].curpage"]=e.current_page,r["eles["+a+"].loading"]=!1,r["eles["+a+"].loadingFail"]=!1,t.downcountObject[a]=l,t.setData(r)}},fail:function(e){var n={};n["eles["+a+"].loadingFail"]=!0,n["eles["+a+"].loading"]=!1,t.setData(n)}}))},this.gotoGroupDetail=function(e){var t=e.currentTarget.dataset,a=t.appId,n=h.appMethod.getPageFranchiseeId(),o=n?"&franchisee="+n:"";a&&a!==h.appMethod.getAppId()&&""===o&&(o="&franchisee="+a);var i=4==t.status?"/pages/goodsDetail/goodsDetail?detail="+t.goodsid+o:"/group/pages/gpgoodsDetail/gpgoodsDetail?goods_id="+t.goodsid+"&activity_id="+t.activityid+o;h.appMethod.turnToPage(i)},this.groupSaveUserFormId=function(e){var t=h.appMethod.getAppCurrentPage();h.appMethod.sendRequest({hideLoading:!0,url:"/index.php?r=api/AppMsgTpl/saveUserFormId",data:{form_id:[e]},chain:!0,subshop:t.franchiseeId||"",method:"post"})},this._refreshGroupBuyList=function(e,t,a){var n=a.data.eles[e],o=n.customFeature,i={};if(i["eles["+e+"].loading"]=!0,i["eles["+e+"].loadingFail"]=!1,i["eles["+e+"].is_more"]=1,i["eles["+e+"].goods_data"]=[],a.setData(i),t.page_size=o.loadingNum||10,t.status=n.selectNum||0,o.source&&"none"!=o.source&&(t.idx_arr={idx:"category",idx_value:o.source}),a.downcountObject&&a.downcountObject[e]){var s=a.downcountObject[e];if(s&&s.length)for(var r=0;r<s.length;r++)s[r]&&s[r].clear()}o.isShowFranchiseeGoods&&!a.franchiseeId&&(t.parent_app_id=h.appMethod.getAppId()),h.appMethod.sendRequest({url:"/index.php?r=appGroupBuy/goodsList",method:"post",hideLoading:!0,data:t,chain:!0,success:function(t){for(var n=t.data,o={},i=[],s=0;s<n.length;s++){var r=n[s],c=void 0;r.description="",r.downCount={hours:"00",minutes:"00",seconds:"00",days:"00"},r.original_price="0.00"==r.virtual_price?r.original_price:r.virtual_price,r.server_time=t.current_time||Date.parse(new Date)/1e3,r.seckill_end_time=r.end_date,r.seckill_start_time=r.start_date,0==r.status||1==r.status||2==r.status?c=h.appMethod.beforeGroupDownCount(r,a,"eles["+e+"].goods_data["+s+"]"):3==r.status&&"-1"!=r.end_date&&(c=h.appMethod.duringGroupDownCount(r,a,"eles["+e+"].goods_data["+s+"]")),c&&i.push(c)}o["eles["+e+"].goods_data"]=n,o["eles["+e+"].is_more"]=t.is_more,o["eles["+e+"].curpage"]=t.current_page,o["eles["+e+"].loading"]=!1,o["eles["+e+"].loadingFail"]=!1,a.downcountObject[e]=i,a.setData(o)},fail:function(t){var n={};n["eles["+e+"].loadingFail"]=!0,n["eles["+e+"].loading"]=!1,a.setData(n)}})}};t.default=b},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(8),i=n(o),s=a(0),r=n(s),c=a(3),l=n(c),d=a(1),u=n(d),m=a(2),p=n(m),f=a(4),g=n(f),h=a(5),v=a(6);a(697);var _=function(e){function t(e){(0,r.default)(this,t);var a=(0,u.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));y.call(a);var n=e.index,o=h.appMethod.getAppCurrentPage();return a.init(n,o),a}return(0,p.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this,t=this.props.data,a=t.customFeature,n=t.style,o=a.fontSize,s=a.fontColor,r=a.fontWeight,c=a.fontStyle,l=a.textDecoration,d=a.mode,u=a.background,m=a.checkOptionsOne,p=a.checkedNum,f=a.selectColor,h=a.selectFontStyle,_=a.selectTextDecoration,y=a.defalutColor,E=a.selectNum||0;(m||[]).some(function(e,t){if(e.checked)return E=t,!0});var b={fontSize:o,color:s,fontWeight:r,fontStyle:c,textDecoration:l},N=(0,i.default)({},b,(0,v.convertStyleData)(n)),R={color:f,borderBottom:".04rem solid "+f,fontStyle:h,textDecoration:_},k={background:f,color:"#fff",fontStyle:h,textDecoration:_};return g.default.createElement("div",{className:"custom-component group-buy-status"},g.default.createElement("div",{style:b,className:"group-status-list"},g.default.createElement("div",{className:"list-status"},g.default.createElement("div",{className:"s-view",style:{background:u}},function(){var t={1:{name:"tabbar-list1",style:R},2:{name:"tabbar-list2",style:k}}[d];return g.default.createElement("div",{className:"tabbar-list "+t.name,style:N},m.map(function(a,n){return a.checked&&g.default.createElement("div",{className:"item",key:a.value,style:{minWidth:2==p?"3.75rem":3==p?"2.5rem":"1.87rem"},"data-index":n,"data-compindex":e.props.index,"data-status":"0",onClick:e.catchGroupList},g.default.createElement("div",{style:E==n?(0,i.default)({},t.style):{color:y}},a.label))}))}()))))}}]),t}(g.default.Component),y=function(){this.init=function(e,t){},this.catchGroupList=function(e){var t=e.currentTarget.dataset.index,a=e.currentTarget.dataset.compindex,n=h.appMethod.getAppCurrentPage(),o={param:{page:1,status:e.currentTarget.dataset.index||0}},i="",s=n.data.eles[a].customFeature.status_refresh_object;for(var r in n.groupBuyListComps){var c=n.groupBuyListComps[r];s==c.param.id&&(i=c.compindex)}if(!i)return void h.appMethod.showModal({content:"找不到绑定的拼团列表"});if(n.newClassifyGroupidsParams.length)for(var l=n.newClassifyGroupidsParams,d=0;d<l.length;d++){var u=l[d].compindex,m=n.data.eles[u];m.customFeature.refresh_object==n.data.eles[i].customFeature.id&&(o.param.idx_arr={idx:"category",idx_value:m.selectedCateId})}var p={};p["eles["+a+"].customFeature.selectNum"]=t,p[i+".selectNum"]=t,n.setData(p),GroupBuyList.getGroupBuyList(i,o)}};t.default=_},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(13),i=n(o),s=a(699),r=n(s),c=a(8),l=n(c),d=a(0),u=n(d),m=a(3),p=n(m),f=a(1),g=n(f),h=a(2),v=n(h);a(700);var _=a(4),y=n(_),E=a(5),b=a(6),N=a(11),R=a(21),k=a(40);a(702);var w=function(e){function t(e){(0,u.default)(this,t);var a=(0,g.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));x.call(a);var n=e.index,o=E.appMethod.getAppCurrentPage();return a.init(n,o),a}return(0,v.default)(t,e),(0,p.default)(t,[{key:"render",value:function(){var e=this,t=this.props.data,a=t.customFeature,n=t.style,o=t.goods_data,i=t.curpage,s=t.ifUseContact,c=t.seckillType,d=a.mode,u=a.margin,m=a.everyoneLimited,p=a.limited,f=a.peopleCounting,g=a.imgWidth,h=a.imgHeight,v=a.lineHeight,_=a.style,E=a.lineBackgroundColor,w=a.vesselAutoheight,x=(0,b.convertStyleData)(n);0==a.vesselAutoheight&&(x.height=(0,b.transformPx2Rem)(a.height,320));var C={width:(0,b.transformPx2Rem)(g,320),height:(0,b.transformPx2Rem)(h,320)},D=null;switch(d){case 0:D={width:"calc(100% - "+C.width+")"};break;case 2:D={width:""+C.width};break;default:D={width:"calc(100% - "+C.width+")"}}var S=(n["background-color"],n["bacground-image"],n.color,(0,b.transformPx2Rem)(n["font-size"]),n["margin-top"],n.opacity,{marginBottom:(0,b.transformPx2Rem)(u,320),height:(0,b.transformPx2Rem)(v,320),backgroundColor:E});return y.default.createElement("div",{className:"custom-component seckill"},2==_?y.default.createElement(N.ScrollView,{className:"element seckill scroll-ele sec-style-mode-"+d,"data-param":t.param,"data-compindex":this.props.index,"data-type":"seckill-list",style:x,"scroll-y":2!=d&&0==w,"scroll-x":2==d,"lower-threshold":"10",bindscrolltolower:this.seckillScrollFunc},0===d&&function(){return y.default.createElement("div",null,o.map(function(t,a){return y.default.createElement("div",{className:"zero-mode-div seckill-style",key:t.form_data.id,style:(0,l.default)({marginTop:u},S),"data-contact":s,"data-formdata":JSON.stringify(t.form_data),"data-goods-type":t.form_data.goods_type,"data-seckilltype":"activeSeckill"==c?1:0,"data-app-id":t.form_data.app_id,onClick:function(t){e.goSeckillDetail(t),t.stopPropagation()}},y.default.createElement("img",{className:"list-img",src:t.form_data.cover,style:C}),y.default.createElement("div",{className:"seckill-content"},y.default.createElement("div",{className:"seckill-title"},t.form_data.isSubShopGoods?"【"+t.form_data.app_shop_name+"】":"",t.form_data.title),y.default.createElement("div",{className:"seckill-content-bottom"},y.default.createElement("div",{className:"seckill-content-left"},y.default.createElement("div",{className:"seckill-now-price seckill-start-color-"+t.form_data.seckill_start_state},y.default.createElement("span",{className:"font24"},"¥"),y.default.createElement("span",null,t.form_data.seckill_price),y.default.createElement("span",{className:"seckill-original-price font24"},"¥",t.form_data.price,y.default.createElement("span",{className:"original-price-line"}))),0!==t.form_data.seckill_start_state&&y.default.createElement("div",{className:"seckill-progress-new seckill-progress-new-"+t.form_data.seckill_progress},100!=t.form_data.seckill_progress&&y.default.createElement("img",{className:"seckill-progress-image",src:"http://cdn.jisuapp.cn/static/jisuapp_editor/images/seckill-progress-red.png",style:{width:t.form_data.seckill_progress+"%"}}),100==t.form_data.seckill_progress&&y.default.createElement("img",{className:"seckill-progress-image",src:"http://cdn.jisuapp.cn/static/jisuapp_editor/images/seckill-progress-gray.png"}),y.default.createElement("div",{className:"seckill-progress-font"},y.default.createElement("div",null,"已抢",t.form_data.seckill_activity_sales,"件"),y.default.createElement("div",{className:t.form_data.seckill_progress<60?"seckill-progress-percent":""},t.form_data.seckill_progress,"%"))),0==t.form_data.seckill_start_state&&y.default.createElement("div",{className:"seckill-describe"},m&&y.default.createElement("div",{className:"seckill-buy-limit"},"每人限抢",t.form_data.seckill_buy_limit,"份"),m&&p&&y.default.createElement("div",{className:"vertical-bar"}),p&&y.default.createElement("div",{className:"seckill-stock"},"限量",t.form_data.seckill_stock)),2!=t.form_data.seckill_start_state&&y.default.createElement("div",{className:"seckill-time seckill-start-color-"+t.form_data.seckill_start_state},0==t.form_data.seckill_start_state&&1==t.form_data.startDay&&y.default.createElement("label",null,"距开始"),0==t.form_data.seckill_start_state&&2==t.form_data.startDay&&y.default.createElement("label",null,"开抢时间"),1==t.form_data.seckill_start_state&&y.default.createElement("label",null,"距结束"),(1==t.form_data.seckill_start_state||0==t.form_data.seckill_start_state&&1==t.form_data.startDay)&&y.default.createElement("span",null,t.form_data.downCount.days&&y.default.createElement("span",{className:"days"},t.form_data.downCount.days,"天"),y.default.createElement("span",{className:"hours"},t.form_data.downCount.hours),":",y.default.createElement("span",{className:"minutes"},t.form_data.downCount.minutes),":",y.default.createElement("span",{className:"seconds"},t.form_data.downCount.seconds)),0==t.form_data.seckill_start_state&&2==t.form_data.startDay&&y.default.createElement("span",null,t.form_data.seckill_startTime))),y.default.createElement("div",{className:"seckill-content-right"},1==t.form_data.seckill_start_state&&100!=t.form_data.seckill_progress&&y.default.createElement("div",{className:"seckill-button seckill-background-F23031"},"马上抢",y.default.createElement("label",{className:"ico-moon icon-rightarrow icon-rightarrow-cover"})),1==t.form_data.seckill_start_state&&100==t.form_data.seckill_progress&&y.default.createElement("div",{className:"seckill-button seckill-background-D0D0D0"},"已抢光"),2==t.form_data.seckill_start_state&&y.default.createElement("div",{className:"seckill-button seckill-background-D0D0D0"},"已结束"),0==t.form_data.seckill_start_state&&0==t.form_data.is_seckill_activity_care&&y.default.createElement("form",null,y.default.createElement("button",{className:"form-button seckill-background-FF7100",type:"button","data-goods":JSON.stringify(t.form_data),"data-index":a,"data-is_deleted":"0","data-compindex":e.props.index,onClick:function(t){e.formSubmitRemind(t),t.stopPropagation()}},y.default.createElement("div",{className:"seckill-button"},"提醒我"))),0==t.form_data.seckill_start_state&&1==t.form_data.is_seckill_activity_care&&y.default.createElement("form",null,y.default.createElement("button",{className:"form-button seckill-background-FF7100",type:"button","data-goods":JSON.stringify(t.form_data),"data-index":a,"data-is_deleted":"1","data-compindex":e.props.index,onClick:function(t){e.formSubmitRemind(t),t.stopPropagation()}},y.default.createElement("div",{className:"seckill-button seckill-background-FF7100"},"取消提醒"))),(1==t.form_data.seckill_start_state||100==t.form_data.seckill_progress)&&m&&y.default.createElement("div",{className:"seckill-content-right-describe"},"每人限抢",t.form_data.seckill_buy_limit,"份"),0==t.form_data.seckill_start_state&&t.form_data.seckill_activity_care>0&&f&&y.default.createElement("div",{className:"seckill-content-right-describe"},t.form_data.seckill_activity_care,"人已设置")))),y.default.createElement("div",{className:"seckill-bottom-line"}))}))}(),(1===d||2===d)&&function(){return y.default.createElement("div",{className:1==d?"":"two-mode-div-block"},o.map(function(t,a){return y.default.createElement("div",{className:"seckill-style "+(1==d?"one-mode-div":"two-mode-div"),key:t.form_data.id,style:(0,l.default)({width:2===d?D.width:""},S),"data-formdata":JSON.stringify(t.form_data),"data-contact":s,"data-goods-type":t.form_data.goods_type,"data-seckilltype":"activeSeckill"==c?1:0,"data-app-id":t.form_data.app_id,onClick:function(t){e.goSeckillDetail(t),t.stopPropagation()}},y.default.createElement("div",{className:"seckill-image-content"},y.default.createElement("div",{className:"image-content",style:C},y.default.createElement("img",{className:"list-img",src:t.form_data.cover,style:C}),2!=t.form_data.seckill_start_state&&y.default.createElement("div",{className:"seckill-time "+(0!=t.form_data.seckill_start_state?"seckill-background-F23031":"")+" "+(0==t.form_data.seckill_start_state?"seckill-background-FF7100":"")},0==t.form_data.seckill_start_state&&y.default.createElement("label",null,"距开始"),1==t.form_data.seckill_start_state&&y.default.createElement("label",null,"距结束"),2!=t.form_data.seckill_start_state&&y.default.createElement("span",null,t.form_data.downCount.days&&y.default.createElement("span",{className:"days"},t.form_data.downCount.days,"天"),y.default.createElement("span",{className:"hours countdown-text"},t.form_data.downCount.hours),":",y.default.createElement("span",{className:"minutes countdown-text"},t.form_data.downCount.minutes),":",y.default.createElement("span",{className:"seconds countdown-text"},t.form_data.downCount.seconds))))),y.default.createElement("div",{className:"seckill-content"},y.default.createElement("div",{className:"seckill-title"},t.form_data.isSubShopGoods?"【"+t.form_data.app_shop_name+"】":"",t.form_data.title),0==t.form_data.seckill_start_state&&y.default.createElement("div",{className:"seckill-progress-new "+(1==d?"seckill-matop4":"seckill-matop2")+" seckill-progress-new-ready"},"未开始"),0!=t.form_data.seckill_start_state&&y.default.createElement("div",{className:"seckill-progress-new "+(1==d?"seckill-matop4":"seckill-matop2")+" seckill-progress-new-"+t.form_data.seckill_progress},100!=t.form_data.seckill_progress&&y.default.createElement("img",{className:"seckill-progress-image",src:"http://cdn.jisuapp.cn/static/jisuapp_editor/images/seckill-progress-red.png",style:{width:t.form_data.seckill_progress+"%"}}),100==t.form_data.seckill_progress&&y.default.createElement("img",{className:"seckill-progress-image",src:"http://cdn.jisuapp.cn/static/jisuapp_editor/images/seckill-progress-gray.png"}),y.default.createElement("div",{className:"seckill-progress-font"},y.default.createElement("div",null,"已抢",t.form_data.seckill_activity_sales,"件"),y.default.createElement("div",{className:t.form_data.seckill_progress<60?"seckill-progress-percent":""},t.form_data.seckill_progress,"%"))),y.default.createElement("div",{className:"seckill-describe seckill-matop8"},m&&y.default.createElement("div",{className:"seckill-buy-limit"},"每人限抢",t.form_data.seckill_buy_limit,"份"),m&&0==t.form_data.seckill_start_state&&p&&y.default.createElement("div",{className:"vertical-bar"}),0==t.form_data.seckill_start_state&&p&&y.default.createElement("div",{className:"seckill-stock"},"限量",t.form_data.seckill_stock)),y.default.createElement("div",{className:"seckill-now-price seckill-start-color-"+t.form_data.seckill_start_state+" seckill-matop4"},y.default.createElement("div",{style:{display:"inline-block"}},y.default.createElement("span",{className:"font24"},"¥"),y.default.createElement("span",null,t.form_data.seckill_price)),y.default.createElement("div",{className:"seckill-original-price font22"},"¥",t.form_data.price,y.default.createElement("span",{className:"original-price-line"}))),1==t.form_data.seckill_start_state&&100!=t.form_data.seckill_progress&&y.default.createElement("div",{className:"seckill-button seckill-background-F23031"},"马上抢"),1==t.form_data.seckill_start_state&&100==t.form_data.seckill_progress&&y.default.createElement("div",{className:"seckill-button seckill-background-D0D0D0"},"已抢光"),2==t.form_data.seckill_start_state&&y.default.createElement("div",{className:"seckill-button seckill-background-D0D0D0"},"已结束"),0==t.form_data.seckill_start_state&&y.default.createElement("div",{className:"seckill-button-box"},0==t.form_data.is_seckill_activity_care&&y.default.createElement("form",null,y.default.createElement("button",{type:"button",className:"form-button","data-goods":JSON.stringify(t.form_data),"data-index":a,"data-is_deleted":"0","data-compindex":e.props.index,onClick:function(t){e.formSubmitRemind(t),t.stopPropagation()}},y.default.createElement("span",{className:"seckill-button-new seckill-background-FF7100"},"提醒我"))),1==t.form_data.is_seckill_activity_care&&y.default.createElement("form",null,y.default.createElement("button",{type:"button",className:"form-button","data-goods":JSON.stringify(t.form_data),"data-index":a,"data-is_deleted":"1","data-compindex":e.props.index,onClick:function(t){e.formSubmitRemind(t),t.stopPropagation()}},y.default.createElement("span",{className:"seckill-button-new seckill-background-FF7100"},"取消提醒"))),t.form_data.seckill_activity_care>0&&f&&y.default.createElement("span",{className:"seckill-content-right-describe"},t.form_data.seckill_activity_care,"人已设置"))))}))}(),3===d&&function(){return y.default.createElement("div",null,o.map(function(t,a){return y.default.createElement("div",{className:"three-mode-div seckill-style",key:t.form_data.id,style:S,"data-formdata":JSON.stringify(t.form_data),"data-contact":s,"data-goods-type":t.form_data.goods_type,"data-seckilltype":"activeSeckill"==c?1:0,"data-app-id":t.form_data.app_id,onClick:function(t){e.goSeckillDetail(t),t.stopPropagation()}},y.default.createElement("div",{className:"seckill-image-content"},2!=t.form_data.seckill_start_state&&y.default.createElement("div",{className:"seckill-time "+(0!=t.form_data.seckill_start_state?"seckill-background-F23031":"")+" "+(0==t.form_data.seckill_start_state?"seckill-background-FF7100":"")},0==t.form_data.seckill_start_state&&y.default.createElement("label",null,"距开始"),1==t.form_data.seckill_start_state&&y.default.createElement("label",null,"距结束"),t.form_data.downCount.days&&y.default.createElement("span",{className:"days"},t.form_data.downCount.days,"天"),y.default.createElement("span",{className:"hours countdown-text "+(1==t.form_data.seckill_start_state?"seckill-background-CD0C0E":"")},t.form_data.downCount.hours),":",y.default.createElement("span",{className:"minutes countdown-text "+(1==t.form_data.seckill_start_state?"seckill-background-CD0C0E":"")},t.form_data.downCount.minutes),":",y.default.createElement("span",{className:"seconds countdown-text "+(1==t.form_data.seckill_start_state?"seckill-background-CD0C0E":"")},t.form_data.downCount.seconds)),y.default.createElement("div",{className:"image-content",style:C},y.default.createElement("img",{className:"list-img",src:t.form_data.cover,style:C}))),y.default.createElement("div",{className:"seckill-content"},y.default.createElement("div",{className:"seckill-title"},t.form_data.isSubShopGoods?"【"+t.form_data.app_shop_name+"】":"",t.form_data.title),y.default.createElement("div",{className:"seckill-content-bottom"},y.default.createElement("div",{className:"seckill-content-left"},y.default.createElement("div",{className:"seckill-now-price seckill-start-color-"+t.form_data.seckill_start_state},y.default.createElement("span",{className:"font24"},"¥"),y.default.createElement("span",null,t.form_data.seckill_price),y.default.createElement("span",{className:"seckill-original-price font24"},"¥",t.form_data.price,y.default.createElement("span",{className:"original-price-line"}))),y.default.createElement("div",{className:"seckill-items-center seckill-matop2"},1==t.form_data.seckill_start_state&&y.default.createElement("div",{className:"seckill-progress-new"},100!=t.form_data.seckill_progress&&y.default.createElement("img",{className:"seckill-progress-image",src:"http://cdn.jisuapp.cn/static/jisuapp_editor/images/seckill-progress-red.png",style:{width:t.form_data.seckill_progress+"%"}}),100==t.form_data.seckill_progress&&y.default.createElement("img",{className:"seckill-progress-image",src:"http://cdn.jisuapp.cn/static/jisuapp_editor/images/seckill-progress-gray.png"}),y.default.createElement("div",{className:"seckill-progress-font"},y.default.createElement("div",null,"已抢",t.form_data.seckill_activity_sales,"件"),y.default.createElement("div",{className:t.form_data.seckill_progress<60?"seckill-progress-percent":""},t.form_data.seckill_progress,"%"))),m&&y.default.createElement("div",{className:"seckill-buy-limit "+(1==t.form_data.seckill_start_state?"seckill-buy-limit-new":"")},"每人限抢",t.form_data.seckill_buy_limit,"份"),m&&0==t.form_data.seckill_start_state&&p&&y.default.createElement("div",{className:"vertical-bar"}),0==t.form_data.seckill_start_state&&p&&y.default.createElement("div",{className:"seckill-stock"},"限量",t.form_data.seckill_stock))),y.default.createElement("div",{className:"seckill-content-right"},0==t.form_data.seckill_start_state&&t.form_data.seckill_activity_care>0&&f&&y.default.createElement("div",{className:"seckill-content-right-describe"},t.form_data.seckill_activity_care,"人已设置"),1==t.form_data.seckill_start_state&&100!=t.form_data.seckill_progress&&y.default.createElement("div",{className:"seckill-button seckill-background-F23031"},"马上抢",y.default.createElement("label",{className:"ico-moon icon-rightarrow icon-rightarrow-cover"})),1==t.form_data.seckill_start_state&&100==t.form_data.seckill_progress&&y.default.createElement("div",{className:"seckill-button  seckill-background-D0D0D0"},"已抢光"),2==t.form_data.seckill_start_state&&y.default.createElement("div",{className:"seckill-button  seckill-background-D0D0D0"},"已结束"),0==t.form_data.seckill_start_state&&0==t.form_data.is_seckill_activity_care&&y.default.createElement("form",null,y.default.createElement("button",{type:"button",className:"form-button","data-goods":JSON.stringify(t.form_data),"data-index":a,"data-is_deleted":"0","data-compindex":e.props.index,onClick:function(t){e.formSubmitRemind(t),t.stopPropagation()}},y.default.createElement("div",{className:"seckill-button seckill-background-FF7100"},"提醒我"))),0==t.form_data.seckill_start_state&&1==t.form_data.is_seckill_activity_care&&y.default.createElement("form",null,y.default.createElement("button",{type:"button",className:"form-button","data-goods":JSON.stringify(t.form_data),"data-index":a,"data-is_deleted":"1","data-compindex":e.props.index,onClick:function(t){e.formSubmitRemind(t),t.stopPropagation()}},y.default.createElement("div",{className:"seckill-button seckill-background-FF7100"},"取消提醒")))))))}))}()):y.default.createElement(N.ScrollView,{className:"element seckill scroll-ele seckill-list-mode-"+d+" "+(2==d&&i>0?"hor-request-status":""),style:x},function(){return y.default.createElement("div",{className:"js-list-container"},o.map(function(t){return y.default.createElement("div",{className:"seckill-list-item background-ele",key:t.form_data.id,style:S,"data-formdata":JSON.stringify(t.form_data),"data-contact":s,"data-goods-type":t.form_data.goods_type,"data-seckilltype":"activeSeckill"==c?1:0,"data-app-id":t.form_data.app_id,onClick:function(t){e.goSeckillDetail(t),t.stopPropagation()}},y.default.createElement("div",{className:"inner-content"},y.default.createElement("img",{className:"list-img",src:t.form_data.cover,style:C}),y.default.createElement("div",{className:"title-container",style:{width:D.width}},y.default.createElement("div",{className:"title"},t.form_data.title),1==d||2==d?y.default.createElement("div",{className:"seckill-list-bottom "+(1==t.form_data.seckill_start_state?"seckill-during":"")+"\n                                                       "+(2==t.form_data.seckill_start_state?"seckill-end":"")},y.default.createElement("div",null,y.default.createElement("span",{className:"price"},"¥",t.form_data.seckill_price),y.default.createElement("span",{className:"oldprice"},"¥",t.form_data.price)),y.default.createElement("div",null,y.default.createElement("div",{className:"seckill-progress-wrap"},y.default.createElement("span",null,"已售",t.form_data.seckill_progress,"%"),y.default.createElement(r.default,{className:"seckill-progress",unfilled:!1,percent:t.form_data.seckill_progress,barStyle:{borderColor:"#fa6583"},position:"normal"})),y.default.createElement("div",{className:"countdown"},0==t.form_data.seckill_start_state&&y.default.createElement("label",null,"距开始"),1==t.form_data.seckill_start_state&&y.default.createElement("label",null,"距结束"),2==t.form_data.seckill_start_state&&y.default.createElement("label",null,"已结束"),t.form_data.downCount.days&&y.default.createElement("span",{className:"days"},t.form_data.downCount.days,"天"),2!=t.form_data.seckill_start_state&&y.default.createElement("span",{className:"hours countdown-text"},t.form_data.downCount.hours),":",y.default.createElement("span",{className:"minutes countdown-text"},t.form_data.downCount.minutes),":",y.default.createElement("span",{className:"seconds countdown-text"},t.form_data.downCount.seconds)))):y.default.createElement("div",{className:"seckill-list-bottom "+(1==t.form_data.seckill_start_state?"seckill-during":"")+"\n                                                       "+(2==t.form_data.seckill_start_state?"seckill-end":""),style:{width:D.width}},y.default.createElement("div",null,y.default.createElement("span",{className:"price"},"¥",t.form_data.seckill_price),y.default.createElement("div",{className:"countdown"},0==t.form_data.seckill_start_state&&y.default.createElement("label",null,"距开始"),1==t.form_data.seckill_start_state&&y.default.createElement("label",null,"距结束"),2==t.form_data.seckill_start_state&&y.default.createElement("label",null,"已结束"),t.form_data.downCount.days&&y.default.createElement("span",{className:"days"},t.form_data.downCount.days,"天"),2!=t.form_data.seckill_start_state&&y.default.createElement("span",{className:"hours countdown-text"},t.form_data.downCount.hours),":",y.default.createElement("span",{className:"minutes countdown-text"},t.form_data.downCount.minutes),":",y.default.createElement("span",{className:"seconds countdown-text"},t.form_data.downCount.seconds))),y.default.createElement("div",{className:"oldPrice-wrap"},y.default.createElement("span",{className:"oldprice"},"¥",t.form_data.price),y.default.createElement("div",{className:"seckill-progress-wrap flex-wrap"},y.default.createElement("span",null,"已售",t.form_data.seckill_progress,"%"),y.default.createElement(r.default,{className:"seckill-progress",position:"normal",unfilled:!1,percent:t.form_data.seckill_progress,barStyle:{borderColor:"#fa6583"}})))))))}))}()),t.loading&&y.default.createElement(R.RequestStatus,{is:"requestLoading"}),0==t.is_more&&0==t.goods_data.length&&y.default.createElement(R.RequestStatus,{is:"requestNone",data:{data:"暂无秒杀商品~"}}),t.loadingFail&&y.default.createElement(R.RequestStatus,{is:"requestFail",data:{refreshEvent:"seckillScrollFunc",compindex:this.props.index}}),0==t.is_more&&t.goods_data.length>0&&t.customFeature.isShowFinishText&&y.default.createElement(R.RequestStatus,{is:"requestAll"}),1==t.customFeature.vesselAutoheight&&1==t.customFeature.loadingMethod&&2!=t.customFeature.mode&&!!t.is_more&&0!=t.is_more&&!t.loading&&!t.loadingFail&&y.default.createElement(k.LoadingBtn,{customFeature:a,onClick:this.seckillScrollFunc,"data-compindex":this.props.index}))}}]),t}(y.default.Component),x=function(){var e=this;this.init=function(t,a){var n=!1,o=e,i=a.data.eles[t],s=i.customFeature;if(a.timelineComps&&a.timelineComps.length){var r=!0,c=!1,l=void 0;try{for(var d,u=a.timelineComps[Symbol.iterator]();!(r=(d=u.next()).done);r=!0){var m=d.value;s.id==a.data.eles[m.compindex].customFeature.timeline_object&&(n=!0)}}catch(e){c=!0,l=e}finally{try{!r&&u.return&&u.return()}finally{if(c)throw l}}}if(!n){var p={},f={};f["eles["+t+"].loading"]=!0,f["eles["+t+"].loadingFail"]=!1,f["eles["+t+"].goods_data"]=[],f["eles["+t+"].is_more"]=1,f["eles["+t+"].curpage"]=0,p.form="goods",p.goods_type=0,p.page_size=s.loadingNum||10,p.is_seckill=1,p.page=1,p.is_integral=s.isIntegral?1:0,p.is_count=0,p.seckill_activity_arr={seckill_activity_id:s.seckillActive,seckill_activity_time_type:6},p.is_seckill_activity="activeSeckill"==s.seckillType?1:0,s.source&&"none"!=s.source&&(p.idx_arr={idx:"category",idx_value:s.source}),f["eles["+t+"].seckill_activity_arr"]=p.seckill_activity_arr,"activeSeckill"===s.seckillType&&s.isShowFranchiseeGoods&&!a.franchiseeId?e.checkActivityIsFranchisee(s.seckillActive).then(function(e){e&&(p.is_app_shop_seckill=1),f["eles["+t+"].param"]=p,a.setData(f),o.initSeckillList(t,p,a)}).catch(function(e){console.log(e)}):(f["eles["+t+"].param"]=p,a.setData(f),e.initSeckillList(t,p,a))}},this.seckillScrollFunc=function(t){var a=E.appMethod.getAppCurrentPage(),n="object"==(void 0===t?"undefined":(0,i.default)(t))?t.currentTarget.dataset.compindex:t,o=a.data.eles[n],s=o.curpage+1,r=o.customFeature,c={},l=o.param,d=e;o.is_more||"object"!=(void 0===t?"undefined":(0,i.default)(t))||"tap"!=t.type||E.appMethod.showModal({content:"已经加载到最后了"}),!o.loading&&o.is_more&&(c["eles["+n+"].loading"]=!0,c["eles["+n+"].loadingFail"]=!1,a.setData(c),l.page_size=+r.loadingNum||10,l.page=s,l.seckill_activity_arr=o.seckill_activity_arr,l.is_seckill_activity="activeSeckill"==r.seckillType?1:0,E.appMethod.sendRequest({url:"/index.php?r=AppShop/GetGoodsList",data:l,method:"post",hideLoading:!0,chain:!0,subshop:a.franchiseeId||"",success:function(e){c={};var t=e.data,i=E.appMethod.getAppId(),u=a.downcountObject[n]||[];if(t){for(var m=0;m<t.length;m++){var p=t[m].form_data,f=void 0,g=(s-1)*l.page_size+m;p.description="",p.downCount={hours:"00",minutes:"00",seconds:"00"},0==p.seckill_start_state?f=E.appMethod.beforeSeckillDownCount(p,a,"eles["+n+"goods_data["+g+"].form_data"):1==p.seckill_start_state&&(f=E.appMethod.duringSeckillDownCount(p,a,"eles["+n+"]goods_data["+g+"].form_data")),f&&u.push(f),2==r.style&&0==r.mode&&(t[m].form_data=d.seckillStartTimeView(p)),1==+l.is_app_shop_seckill&&p.app_id!==i?p.isSubShopGoods=!0:p.isSubShopGoods=!1}c["eles["+n+"].goods_data"]=o.goods_data.concat(e.data),c["eles["+n+"].is_more"]=e.is_more?e.is_more:0,c["eles["+n+"].curpage"]=e.current_page,c["eles["+n+"].loading"]=!1,c["eles["+n+"].loadingFail"]=!1,a.downcountObject[n]=u,a.setData(c)}},fail:function(){var e={};e["eles["+n+"].loadingFail"]=!0,e["eles["+n+"].loading"]=!1,a.setData(e)},complete:function(){}}))},this.formSubmitRemind=function(e){var t="",a=e.currentTarget.dataset,n=JSON.parse(a.goods),o=E.appMethod.getAppCurrentPage(),i={},s=new Date((new Date).toLocaleDateString()).getTime()/1e3;if(n.seckill_start_timestamp>s+604800)return void E.appMethod.showModal({content:"请于开抢前7天来设置哦"});"the formId is a mock one"!=e.target.formId&&(t=e.target.formId),E.appMethod.sendRequest({url:"/index.php?r=AppShop/setActivityGoodsCare",method:"post",data:{data_id:n.id,activity_type:1,activity_id:n.seckill_activity_id,seckill_activity_arr:{seckill_activity_time_id:n.seckill_activity_time_id,form_id:t},is_deleted:a.is_deleted},success:function(e){e.status||(0==a.is_deleted?(E.appMethod.showModal({title:"提示",content:"开抢前3分钟提醒你哦",showCancel:!1}),i["eles["+a.compindex+"].goods_data["+a.index+"].form_data.is_seckill_activity_care"]=1,i["eles["+a.compindex+"].goods_data["+a.index+"].form_data.seckill_activity_care"]=o.data.eles[a.compindex].goods_data[a.index].form_data.seckill_activity_care+1):(E.appMethod.showToast({title:"提醒已取消"}),i["eles["+a.compindex+"].goods_data["+a.index+"].form_data.is_seckill_activity_care"]=0,i["eles["+a.compindex+"].goods_data["+a.index+"].form_data.seckill_activity_care"]=o.data.eles[a.compindex].goods_data[a.index].form_data.seckill_activity_care-1),o.setData(i))}})},this.goSeckillDetail=function(e){var t=JSON.parse(e.currentTarget.dataset.formdata),a=e.currentTarget.dataset.appId,n=E.appMethod.getPageFranchiseeId(),o=n?"&franchisee="+n:"";if(a&&a!==E.appMethod.getAppId()&&""===o&&(o="&franchisee="+a),2!=t.seckill_start_state){var i="/seckill/pages/seckillDetail/seckillDetail?id="+t.id+"&sec_act_id="+t.seckill_activity_id+"&sec_t_id="+t.seckill_activity_time_id+"&secType="+e.currentTarget.dataset.seckilltype+o;E.appMethod.turnToPage(i)}else E.appMethod.showModal({content:"该商品秒杀活动已结束"})},this.seckillStartTimeView=function(e){var t=new Date((new Date).toLocaleDateString()).getTime()/1e3,a=t+86400,n=a+86400,o=new Date(1e3*e.seckill_start_timestamp),i=o.getMonth()+1,s=o.getDate(),r=o.getHours(),c=o.getMinutes();return e.seckill_startTime="",e.seckill_start_timestamp<=a?e.startDay=1:e.seckill_start_timestamp>a&&e.seckill_start_timestamp<=n?(e.startDay=2,e.seckill_startTime="00"==c?"明日"+r+"点整开抢":"00"!=c&&c<10?"明日"+r+":0"+c+"开抢":"明日"+r+":"+c+"开抢"):e.seckill_start_timestamp>n&&(e.startDay=2,e.seckill_startTime="00"==c?i+"月"+s+"日"+r+"点整开抢":"00"!=c&&c<10?i+"月"+s+"日"+r+":0"+c+"开抢":i+"月"+s+"日"+r+":"+c+"开抢"),e},this.initSeckillList=function(t,a,n){var o=e;E.appMethod.sendRequest({hideLoading:!0,url:"/index.php?r=AppShop/GetGoodsList",data:a,method:"post",chain:!0,subshop:n.franchiseeId||"",success:function(e){var i=e.data,s=E.appMethod.getAppId(),r=n.data.eles[t].customFeature,c=n.downcountObject[t]||[],l={};if(i){for(var d=0;d<i.length;d++){var u=i[d].form_data,m=void 0;u.description="",u.downCount={hours:"00",minutes:"00",seconds:"00"},0==u.seckill_start_state?m=E.appMethod.beforeSeckillDownCount(u,n,"eles["+t+"]goods_data["+d+"].form_data"):1==u.seckill_start_state&&(m=E.appMethod.duringSeckillDownCount(u,n,"eles["+t+"]goods_data["+d+"].form_data")),m&&c.push(m),2==r.style&&0==r.mode&&2==r.style&&0==r.mode&&(i[d].form_data=o.seckillStartTimeView(u)),1==+a.is_app_shop_seckill&&u.app_id!==s?u.isSubShopGoods=!0:u.isSubShopGoods=!1}l["eles["+t+"].goods_data"]=e.data,l["eles["+t+"].is_more"]=e.is_more?e.is_more:0,l["eles["+t+"].curpage"]=1,l["eles["+t+"].loading"]=!1,l["eles["+t+"].loadingFail"]=!1,n.downcountObject[t]=c,n.setData(l)}},fail:function(e){var a={};a["eles["+t+"].loadingFail"]=!0,a["eles["+t+"].loading"]=!1,n.setData(a)}})},this.checkActivityIsFranchisee=function(e){return new Promise(function(t,a){e||a(!1);var n=E.appMethod.globalData.seckillActivityObjectMap;void 0===n&&(n=E.appMethod.globalData.seckillActivityObjectMap={}),void 0!==n[e]&&t(n[e]),E.appMethod.sendRequest({url:"/index.php?r=AppMarketing/GetSeckillActivityTitle",data:{activity_id:e},success:function(a){0===a.status?(Array.isArray(a.data)&&a.data[0]?n[e]=a.data[0].is_app_shop_seckill>0:n[e]=!1,t(n[e])):t(!1)},fail:a})})}};t.default=w},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(8),i=n(o),s=a(9),r=n(s),c=a(0),l=n(c),d=a(3),u=n(d),m=a(1),p=n(m),f=a(2),g=n(f),h=a(10),v=n(h),_=a(4),y=n(_),E=function(e){function t(){return(0,l.default)(this,t),(0,p.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,g.default)(t,e),(0,u.default)(t,[{key:"componentWillReceiveProps",value:function(){this.noAppearTransition=!0}},{key:"componentDidMount",value:function(){var e=this;this.props.appearTransition&&setTimeout(function(){e.barRef&&(e.barRef.style.width=e.props.percent+"%")},10)}},{key:"render",value:function(){var e,t=this,a=this.props,n=a.className,o=a.prefixCls,s=a.position,c=a.unfilled,l=a.style,d=void 0===l?{}:l,u=a.barStyle,m=void 0===u?{}:u,p={width:this.noAppearTransition||!this.props.appearTransition?this.props.percent+"%":0,height:0},f=(0,v.default)(o+"-outer",n,(e={},(0,r.default)(e,o+"-fixed-outer","fixed"===s),(0,r.default)(e,o+"-hide-outer",!c),e));return y.default.createElement("div",{style:d,className:f,role:"progressbar","aria-valuenow":this.props.percent,"aria-valuemin":0,"aria-valuemax":100},y.default.createElement("div",{ref:function(e){return t.barRef=e},className:o+"-bar",style:(0,i.default)({},m,p)}))}}]),t}(y.default.Component);t.default=E,E.defaultProps={prefixCls:"am-progress",percent:0,position:"fixed",unfilled:!0,appearTransition:!1},e.exports=t.default},function(e,t,a){"use strict";a(19),a(701)},function(e,t){},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(8),i=n(o),s=a(0),r=n(s),c=a(3),l=n(c),d=a(1),u=n(d),m=a(2),p=n(m),f=a(4),g=n(f),h=a(5),v=a(6);a(704);var _=function(e){function t(e){(0,r.default)(this,t);var a=(0,u.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));y.call(a);var n=e.index,o=h.appMethod.getAppCurrentPage();return a.init(n,o),a}return(0,p.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this,t=this.props.data,a=t.customFeature,n=t.content,o=t.timelineData,s=t.severTime;o||(o=[]);var r=a.background,c=a.fontSize,l=a.fontColor,d=a.fontWeight,u=a.fontStyle,m=a.textDecoration,p=a.maskMarginSpace,f=a.isFranchisee,h=a.mode,_=a.selectNum,y=a.selectFontSize,E=a.selectFontColor,b=a.selectFontWeight,N=a.selectFontStyle,R=a.selectTextDecoration,k=a.underlineHeight,w=a.underlineColor,x=a.selectFontBackground,C=a.fontRadius,D=a.singleBackground,S=a.selectTimeFontSize,I=a.selectTimeFontColor,M=a.selectTimeFontWeight,T=a.selectTimeFontStyle,P=a.selectTimeTextDecoration;p=(0,v.transformPx2Rem)(p);var L={height:this.props.data.style.height},A={fontSize:(0,v.transformPx2Rem)(c,320),color:l,fontWeight:d,fontStyle:u,textDecoration:m},F={fontSize:(0,v.transformPx2Rem)(y,320),color:E,fontWeight:b,fontStyle:N,textDecoration:R},O={fontSize:(0,v.transformPx2Rem)(S,320),color:I,fontWeight:M,fontStyle:T,textDecoration:P};return g.default.createElement("div",{className:"custom-component timeline",style:{background:r}},g.default.createElement("div",{style:(0,i.default)({},L,A),className:"time-line"},n.map(function(t,a){return 1==h&&t.isShowTheArea&&g.default.createElement("div",{className:"first-time-line",key:a,style:{marginRight:p},"data-index":a,"data-compindex":e.props.index,"data-is-franchisee":f||!1,onClick:e.screeningSeckillList},g.default.createElement("div",{className:"first-timeline-font timeline-padLTB",style:_==a?{selectStyleObj:F}:{}},t.name),_==a&&g.default.createElement("div",{className:"select-line",style:{height:k,background:w}}))}),n.map(function(t,a){return 2==h&&t.isShowTheArea&&g.default.createElement("div",{className:"first-time-line",key:a,style:{marginRight:p},"data-index":a,"data-compindex":e.props.index,"data-is-franchisee":f||!1,onClick:e.screeningSeckillList},g.default.createElement("div",{className:"first-timeline-font",style:_==a?(0,i.default)({background:x,borderRadius:C},F):{}},t.name))}),o.map(function(t,a){return t.isShowTheArea&&g.default.createElement("section",null,2!=h&&1!=h&&g.default.createElement("div",{className:"first-time-line",style:{marginRight:p,background:5==h&&(_==a?D:"")},"data-index":a,"data-compindex":e.props.index,"data-is-franchisee":f||!1,onClick:e.screeningSeckillList},g.default.createElement("div",null,"more"!=t.date_diff&&g.default.createElement("div",{className:"timeline-time",style:_==a?{selectTimeStyleObj:O}:{}},(3==h||5==h)&&g.default.createElement("span",null,t.start_time),4==h&&g.default.createElement("span",{style:_==a?{background:x,borderRadius:C}:{}},t.start_time)),g.default.createElement("div",{className:"first-timeline-font timeline-padLTB",style:_==a?{selectStyleObj:F}:{}},t.start_timestamp<=s&&n[0].isShowTheArea&&g.default.createElement("section",null,n[0].name),0==t.date_diff&&t.start_timestamp>s&&n[1].isShowTheArea&&g.default.createElement("section",null,n[1].name),1==t.date_diff&&n[2].isShowTheArea&&g.default.createElement("section",null,n[2].name),"more"==t.date_diff&&n[3].isShowTheArea&&g.default.createElement("section",null,n[3].name))),_==a&&g.default.createElement("div",{className:"select-line",style:{height:k,background:w}})))})))}}]),t}(g.default.Component),y=function(){var e=this;this.init=function(t,a){var n=e,o=a.data.eles[t],i=o.customFeature,s=null;if(a.seckillOnLoadCompidParam){var r=!0,c=!1,l=void 0;try{for(var d,u=a.seckillOnLoadCompidParam[Symbol.iterator]();!(r=(d=u.next()).done);r=!0){var m=d.value;m.param.id==i.timeline_object&&(i.compindex=m.compindex,s=m.compindex)}}catch(e){c=!0,l=e}finally{try{!r&&u.return&&u.return()}finally{if(c)throw l}}}if(s){var p=a.data.eles[s].customFeature;if("activeSeckill"===p.seckillType&&p.isShowFranchiseeGoods){var f=p.seckillActive;Seckill.checkActivityIsFranchisee(f).then(function(e){n.timelineInit(t,a,e,o,f)}).catch(function(e){console.log(e)})}else e.timelineInit(t,a)}},this.timelineInit=function(t,a,n,o,i){var s=e,r=o||a.data.eles[t];r.customFeature.selectNum=-1;for(var c=0;c<r.content.length;c++)r.content[c].isShowTheArea&&-1==r.customFeature.selectNum&&(r.customFeature.selectNum=c);if(void 0===r.customFeature.compindex){var l=!0,d=!1,u=void 0;try{for(var m,p=a.seckillOnLoadCompidParam[Symbol.iterator]();!(l=(m=p.next()).done);l=!0){var f=m.value;f.param.id==r.customFeature.timeline_object&&(r.customFeature.compindex=f.compindex)}}catch(e){d=!0,u=e}finally{try{!l&&p.return&&p.return()}finally{if(d)throw u}}}r.customFeature.compindex&&(r.activeId=i||a.data.eles[r.customFeature.compindex].customFeature.seckillActive);var g={};if(1==r.customFeature.mode||2==r.customFeature.mode){g["eles["+t+"].customFeature.selectNum"]=r.customFeature.selectNum,g["eles["+t+"].customFeature.isFranchisee"]=!!n;var v={currentTarget:{dataset:{compindex:r.compindex,index:r.customFeature.selectNum,isFranchisee:!!n}}};s.screeningSeckillList(v),a.setData(g)}else h.appMethod.sendRequest({url:"/index.php?r=AppMarketing/GetSeckillActivityTime",data:{activity_id:r.activeId},success:function(e){if(!e.status){for(var o=e.data,i=0,c=0,l=-1,d=0;d<o.length;d++)o[d].date_diff>1&&0==i&&(c=d),o[d].date_diff>1&&(i+=1),o[d].start_timestamp<e.time&&(o[d].isShowTheArea=r.content[0].isShowTheArea),0==o[d].date_diff&&o[d].start_timestamp>e.time&&(o[d].isShowTheArea=r.content[1].isShowTheArea),1==o[d].date_diff&&(o[d].isShowTheArea=r.content[2].isShowTheArea),o[d].isShowTheArea&&-1==l&&(l=d);i&&(o.splice(c,i),o.push({date_diff:"more",isShowTheArea:r.content[3].isShowTheArea})),g["eles["+t+"].timelineData"]=o,g["eles["+t+"].severTime"]=e.time,g["eles["+t+"].customFeature.selectNum"]=l,g["eles["+t+"].customFeature.isFranchisee"]=!!n}a.setData(g);var u={currentTarget:{dataset:{compindex:r.compindex,index:g["eles["+t+"].customFeature.selectNum"],isFranchisee:!!n}}};s.screeningSeckillList(u)}})},this.screeningSeckillList=function(e){var t=h.appMethod.getAppCurrentPage(),a=e.currentTarget.dataset,n=t.data.eles[a.compindex],o=n.customFeature.compindex,i=t.data.eles[o],s=i.customFeature,r={},c={},l="",d="";if(c[a.compindex+".customFeature.selectNum"]=a.index,1==n.customFeature.mode||2==n.customFeature.mode?d=a.index<2?a.index+1:a.index+2:n.timelineData[a.index]&&"more"!=n.timelineData[a.index].date_diff?l=n.timelineData[a.index].id:d=5,t.downcountObject&&t.downcountObject[o]){var u=t.downcountObject[o];if(u&&u.length)for(var m=0;m<u.length;m++)u[m]&&u[m].clear()}c["eles["+o+"].loading"]=!0,c["eles["+o+"].loadingFail"]=!1,c["eles["+o+"].goods_data"]=[],c["eles["+o+"].is_more"]=1,c["eles["+o+"].curpage"]=0,c["eles["+o+"].goods_data"]=[],r.form="goods",r.goods_type=0,r.page_size=s.loadingNum||10,r.is_seckill=1,r.page=1,r.is_integral=s.isIntegral?1:0,r.is_count=0,r.seckill_activity_arr={seckill_activity_id:n.activeId,seckill_activity_time_id:l,seckill_activity_time_type:d},r.is_seckill_activity=1,a.isFranchisee&&(r.is_app_shop_seckill=1),c["eles["+o+"].seckill_activity_arr"]=r.seckill_activity_arr,c["eles["+o+"].param"]=r,t.setData(c),h.appMethod.sendRequest({hideLoading:!0,url:"/index.php?r=AppShop/GetGoodsList",data:r,method:"post",chain:!0,success:function(e){var a=e.data,n=h.appMethod.getAppId(),i={},c=t.downcountObject[o]||[];if(a)for(var l=0;l<a.length;l++){var d=a[l].form_data,u=void 0;d.description="",d.downCount={hours:"00",minutes:"00",seconds:"00"},0==d.seckill_start_state?u=h.appMethod.beforeSeckillDownCount(d,t,o+".goods_data["+l+"].form_data"):1==d.seckill_start_state&&(u=h.appMethod.duringSeckillDownCount(d,t,o+".goods_data["+l+"].form_data")),u&&c.push(u),2==s.style&&0==s.mode&&(a[l].form_data=Seckill.seckillStartTimeView(d)),1==+r.is_app_shop_seckill&&d.app_id!==n?d.isSubShopGoods=!0:d.isSubShopGoods=!1}i["eles["+o+"].goods_data"]=e.data,i["eles["+o+"].is_more"]=e.is_more?e.is_more:0,i["eles["+o+"].curpage"]=1,i["eles["+o+"].loading"]=!1,i["eles["+o+"].loadingFail"]=!1,t.downcountObject[o]=c,t.setData(i)},fail:function(e){var a={};a["eles["+o+"].loadingFail"]=!0,a["eles["+o+"].loading"]=!1,t.setData(a)}})}};t.default=_},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(36),i=n(o),s=a(9),r=n(s),c=a(0),l=n(c),d=a(3),u=n(d),m=a(1),p=n(m),f=a(2),g=n(f),h=a(4),v=n(h),_=a(5),y=a(12),E=n(y),b=a(6),N=a(72),R=a(21);a(706);var k=function(e){function t(e){(0,l.default)(this,t);var a=(0,p.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));w.call(a);var n=e.index,o=_.appMethod.getAppCurrentPage();return a.init(n,o),a}return(0,g.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e,t=this,a=(_.appMethod.getAppCurrentPage(),this.props.data),n=this.props.data,o=n.customFeature,i=n.style,s=n.content,c=n.isShowReplyDialog,l=n.dialogTop,d=n.comment,u=n.replyIndex;d=d||{};var m=o.mode,p=o.themeColor,f=o.ifLike,g=(0,b.convertStyleData)(i);return v.default.createElement("div",{className:"custom-component element bbs "+(1===m?"bbs-mode1":""),style:g,onAnimationEnd:function(e){return t.animationEnd(e)}},1!==m&&v.default.createElement("div",{className:"comment-amount-p"},v.default.createElement("span",{className:"ca-span"},v.default.createElement("span",{style:{backgroundColor:p}}),"全部评论"),s.count||0),1===m&&v.default.createElement("div",{className:"comment-amount-p"},v.default.createElement("span",{className:"ca-span"},v.default.createElement("span",{style:{backgroundColor:p}}),"全部评论"),s.count||0),v.default.createElement("div",{className:"comment-container js-list-container"},s.data&&s.data.map(function(e,a){return v.default.createElement("div",{className:"comment",key:a},v.default.createElement("img",{className:"cover-img",src:e.form_data.cover_thumb}),v.default.createElement("div",{className:"comment-content"},v.default.createElement("div",{className:"nickname-wrap"},v.default.createElement("label",{className:"nickname"},e.form_data.nickname),v.default.createElement("label",null,e.form_data.content.reply&&v.default.createElement("span",{className:"comment-reference-text"},"@",e.form_data.content.reply.nickname),e.form_data.content.text)),Array.isArray(e.form_data.content.img||"")?v.default.createElement(v.default.Fragment,null,e.form_data.content.img.map(function(a,n){return v.default.createElement("img",{className:"comment-img",key:n,src:a,"data-src":a,onClick:function(n){return t.previewImage(n,{current:a,urls:e.form_data.content.img})}})})):v.default.createElement(v.default.Fragment,null,e.form_data.content.img&&v.default.createElement("img",{className:"comment-img",src:e.form_data.content.img,"data-src":el,onClick:function(a){return t.previewImage(a,{current:el,urls:e.form_data.content.img})}})),v.default.createElement("div",null,v.default.createElement("label",{className:"add-time"},e.form_data.content.addTime),f&&v.default.createElement("label",{className:"bbs-content-btn ico-moon "+(1==e.has_count?"icon-collect-solid":"icon-collect"),style:{color:1==e.has_count?"#f00":""},"data-objrel":"bbs_"+e.form_data.id,"data-counted":e.has_count,"data-compindex":t.props.index,"data-parentcompindex":t.props.index,"data-index":a,onClick:t.changeCount},e.count_num),v.default.createElement("label",{className:"bbs-content-btn ico-moon icon-reply comment-reply-btn","data-compindex":t.props.index,"data-index":a,onClick:t.clickBbsReplyBtn}))))}),a.loading&&v.default.createElement(R.RequestStatus,{is:"requestLoading"}),0==s.is_more&&0==s.data.length&&v.default.createElement(R.RequestStatus,{is:"requestNone",data:{data:"还没有评论呦~"}}),a.loadingFail&&v.default.createElement(R.RequestStatus,{is:"requestFail",data:{refreshEvent:"bbsScrollFuc",compindex:this.props.index}}),0==s.is_more&&s.data.length>0&&v.default.createElement(R.RequestStatus,{is:"requestAll"})),m?v.default.createElement("div",{className:"bbs-fix-btn",style:{bottom:_.appMethod.isTabBarPage()?"48px":""}},v.default.createElement("span",{style:(e={display:"inline-block",width:"5.3rem",border:"1px solid #ddd",borderRadius:".08rem",verticalAlign:"middle",margin:".18rem",height:"calc(.6rem - 2px)",textIndent:".1rem"},(0,r.default)(e,"height",".6rem"),(0,r.default)(e,"backgroundColor","#fff"),(0,r.default)(e,"lineHeight",".6rem"),(0,r.default)(e,"color","#666"),e),"data-compindex":this.props.index,onClick:this.showBbsReplyDialog},"写评论..."),v.default.createElement("button",{className:"ico-moon icon-bbs-share",style:{backgroundColor:p,color:"#fff",width:"1.38rem",fontSize:".28rem",padding:"0 .1rem",borderRadius:".08rem",margin:".18rem",height:".6rem",lineHeight:".6rem",float:"right"}},"分享")):v.default.createElement("div",{className:"bbs-fix-btn",style:{bottom:_.appMethod.isTabBarPage()?"48px":""}},v.default.createElement("button",{className:"ico-moon icon-bbs-comment","data-compindex":this.props.index,onClick:this.showBbsReplyDialog},"评论"),v.default.createElement("span",null),v.default.createElement("button",{className:"ico-moon icon-bbs-share"},"分享")),v.default.createElement("div",{className:"replyDialog",style:{display:c?"block":"none"},"data-compindex":this.props.index,onClick:this.hideBbsReplyDialog},v.default.createElement("div",{onClick:this.stopPropagation,style:l?{top:l+"px"}:{}},v.default.createElement("div",{className:"bbs-dialog-title"},"发评论",v.default.createElement("span",{style:{float:"right",fontSize:".36rem"},className:"ico-moon icon-downarrow","data-compindex":this.props.index,onClick:this.hideBbsReplyDialog}),"/"),v.default.createElement("div",{style:{backgroundColor:"#efefef",margin:".1rem 0"}},v.default.createElement("textarea",{ref:function(e){return t.input=e},value:d.text||"","data-compindex":this.props.index,onInput:this.bbsInputComment,onChange:function(){}}),d.img&&d.img.map(function(e,a){return v.default.createElement("div",{key:a,style:{position:"relative",width:"1.4rem",display:"inline-block",marginRight:".2rem"}},v.default.createElement("span",{className:"delete-comment-img","data-index":a,"data-compindex":t.props.index,onClick:t.deleteCommentImage}),v.default.createElement("img",{className:"bbs-comment-img",src:e}))})),v.default.createElement("div",null,v.default.createElement("span",{className:"ico-moon icon-pic selectBbsPic"},v.default.createElement(N.ImgUpload,{complete:function(e){return t.uploadBbsCommentImage(e)}})),v.default.createElement("span",{className:"bbs-publish-btn",style:{backgroundColor:d.text&&d.text.length||d.img?"#3091f2":"#ccc"},"data-compindex":this.props.index,onClick:void 0==u||"undefined"==u?this.bbsPublishComment:this.bbsPublishReply},"发送")))))}}]),t}(v.default.Component),w=function(){var e=this;this.init=function(e,t){var a=t.data.eles[e],n="",o=t.requestNum;n=a.customFeature.ifBindPage&&"false"!==a.customFeature.ifBindPage?t.page_form&&"none"!=t.page_form?t.page_form+"_"+t.dataId:t.page_router:_.appMethod.getAppId();var i={};i["eles["+e+"].loading"]=!0,i["eles["+e+"].loadingFail"]=!1,i["eles["+e+"].content.data"]=[],i["eles["+e+"].content.is_more"]=1,i["eles["+e+"].content.current_page"]=0,t.setData(i),t.requestNum=o+1,_.appMethod.sendRequest({hideLoading:!0,url:"/index.php?r=AppData/getFormDataList",method:"post",data:{form:"bbs",is_count:a.customFeature.ifLike?1:0,page:1,idx_arr:{idx:"rel_obj",idx_value:n}},chain:!0,subshop:t.franchiseeId||"",success:function(a){var n={};for(var o in a.data)a.data[o].form_data.content.addTime=a.data[o].form_data.content.addTime.slice(2,19);a.count>99?a.count="99+":a.count>999?a.count="999+":a.count>1e4&&(a.count="1w+"),n["eles["+e+"].content"]=a,n["eles["+e+"].comment"]={},n["eles["+e+"].loading"]=!1,n["eles["+e+"].loadingFail"]=!1,t.setData(n)},fail:function(a){var n={};n["eles["+e+"].loadingFail"]=!0,n["eles["+e+"].loading"]=!1,t.setData(n)}})},this.clickBbsReplyBtn=function(e){e.stopPropagation();var t=e.currentTarget.dataset,a=_.appMethod.getAppCurrentPage(),n=t.compindex,o=t.index,i={};i["eles["+n+"].replyIndex"]=o,i["eles["+n+"].bbsFocus"]=!0,i["eles["+n+"].isShowReplyDialog"]=!0,a.setData(i)},this.bbsScrollFuc=function(e){var t=_.appMethod.getAppCurrentPage(),a=t.data.eles[e],n="";if(!a.loading&&0!=a.content.is_more){var o={};o["eles["+e+"].loading"]=!0,t.setData(o),n=a.customFeature.ifBindPage&&"false"!==a.customFeature.ifBindPage?t.page_form&&"none"!=t.page_form?t.page_form+"_"+t.dataId:t.page_router:_.appMethod.getAppId(),_.appMethod.sendRequest({url:"/index.php?r=AppData/getFormDataList",method:"post",data:{form:"bbs",is_count:a.customFeature.ifLike?1:0,page:a.content.current_page+1,idx_arr:{idx:"rel_obj",idx_value:n}},hideLoading:!0,chain:!0,subshop:t.franchiseeId||"",success:function(n){var o={},i={};o=n,o.data=a.content.data.concat(n.data),o.isloading=!1,i["eles["+e+"].content"]=o,i["eles["+e+"].loading"]=!1,i["eles["+e+"].loadingFail"]=!1,t.setData(i)},fail:function(a){var n={};n["eles["+e+"].loadingFail"]=!0,n["eles["+e+"].loading"]=!1,t.setData(n)}})}},this.showBbsReplyDialog=function(t){e.input.focus();var a=t.currentTarget.dataset.compindex,n=_.appMethod.getAppCurrentPage(),o={};o["eles["+a+"].isShowReplyDialog"]=!0,o["eles["+a+"].bbsFocus"]=!0,n.data.eles.page_hasNavBar&&(o["eles["+a+"].dialogTop"]=_.appMethod.globalData.topNavBarHeight||0),n.setData(o)},this.hideBbsReplyDialog=function(e){var t=e.currentTarget.dataset.compindex,a=_.appMethod.getAppCurrentPage(),n={};n["eles["+t+"].isShowReplyDialog"]=!1,n["eles["+t+"].bbsFocus"]=!1,n["eles["+t+"].replyIndex"]="undefined",a.setData(n)},this.bbsInputComment=function(e){var t=e.target.dataset,a=e.target.value,n=_.appMethod.getAppCurrentPage(),o=t.compindex,i={};i["eles["+o+"].comment.text"]=a,n.setData(i)},this.deleteCommentImage=function(e){e.stopPropagation();var t=e.currentTarget.dataset,a=_.appMethod.getAppCurrentPage(),n=t.compindex,o=t.index,i=a.data.eles[n].comment.img,s={};i.splice(o,1),s["eles["+n+"].comment.img"]=i,a.setData(s)},this.uploadBbsCommentImage=function(t){var a=_.appMethod.getAppCurrentPage(),n=e.props.index,o={},s=a.data.eles[n].comment.img||[];o["eles["+n+"].comment.img"]=[].concat((0,i.default)(s),[t]),a.setData(o)},this.bbsPublishComment=function(e){var t=e.currentTarget.dataset,a=_.appMethod.getAppCurrentPage(),n=t.compindex,o=a.data.eles[n],i=o.comment,s=void 0;if(!i.text||!i.text.trim())return void _.appMethod.showModal({content:"请输入评论内容"});i.text=encodeURIComponent(i.text),delete i.showReply,i.addTime=E.default.formatTime(),s={},s.nickname=_.appMethod.globalData.userInfo.nickname,s.cover_thumb=_.appMethod.globalData.userInfo.cover_thumb,s.user_token=_.appMethod.globalData.userInfo.user_token,s.page_url=a.page_router,s.content=i,s.rel_obj="",o.customFeature.ifBindPage&&"false"!==o.customFeature.ifBindPage?a.page_form&&"none"!=a.page_form?s.rel_obj=a.page_form+"_"+a.dataId:s.rel_obj=a.page_router:s.rel_obj=_.appMethod.getAppId(),_.appMethod.sendRequest({url:"/index.php?r=AppData/addData",method:"post",data:{form:"bbs",form_data:s},chain:!0,subshop:a.franchiseeId||"",success:function(e){var t=o.content.data||[],i={};s.id=e.data,s.content.text=decodeURIComponent(s.content.text),i["eles["+n+"].content.data"]=[{form_data:s,count_num:0}].concat(t);var r="";+o.content.count+1<=99?r=+o.content.count+1:+o.content.count+1>99?r="99+":+o.content.count+1>999?r="999+":+o.content.count+1>1e4&&(r="1w+"),i["eles["+n+"].content.count"]=r,i["eles["+n+"].comment"]={},i["eles["+n+"].isShowReplyDialog"]=!1,i["eles["+n+"].bbsFocus"]=!1,i["eles["+n+"].replyIndex"]="undefined",a.setData(i)}})},this.bbsPublishReply=function(e){var t=e.currentTarget.dataset,a=_.appMethod.getAppCurrentPage(),n=t.compindex,o=a.data.eles[n],i=o.replyIndex,s=o.content.data[i].form_data,r=o.comment,c=void 0;if(!r.text||!r.text.trim())return void _.appMethod.showModal({content:"请输入回复内容"});r.text=encodeURIComponent(r.text),r.addTime=E.default.formatTime(),r.reply={nickname:s.nickname,text:s.content.text,img:s.content.img,user_token:s.user_token,reply:s.content.reply},c={},c.nickname=_.appMethod.globalData.userInfo.nickname,c.cover_thumb=_.appMethod.globalData.userInfo.cover_thumb,c.user_token=_.appMethod.globalData.userInfo.user_token,c.page_url=a.page_router,c.content=r,c.rel_obj="",o.customFeature.ifBindPage&&"false"!==o.customFeature.ifBindPage?a.page_form&&"none"!=a.page_form?c.rel_obj=a.page_form+"_"+a.dataId:c.rel_obj=a.page_router:c.rel_obj=_.appMethod.getAppId(),_.appMethod.sendRequest({url:"/index.php?r=AppData/addData",method:"post",data:{form:"bbs",form_data:c},chain:!0,subshop:a.franchiseeId||"",success:function(e){var t=o.content.data||[],s={};c.id=e.data,c.content.text=decodeURIComponent(c.content.text),t.length&&(delete t[i].replyText,delete t[i].showReply),s["eles["+n+"].content.data"]=[{form_data:c,count_num:0}].concat(t);var r="";+o.content.count+1<=99?r=+o.content.count+1:+o.content.count+1>99?r="99+":+o.content.count+1>999?r="999+":+o.content.count+1>1e4&&(r="1w+"),s["eles["+n+"].content.count"]=r,s["eles["+n+"].comment"]={},s["eles["+n+"].isShowReplyDialog"]=!1,s["eles["+n+"].bbsFocus"]=!1,s["eles["+n+"].replyIndex"]="undefined",a.setData(s)}})},this.previewImage=function(e,t){e.stopPropagation(),_.appMethod.previewImage(t)},this.changeCount=function(e){e.stopPropagation(),_.appMethod.changeCount(e)},this.stopPropagation=function(e){e.stopPropagation()}};t.default=k},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(13),i=n(o),s=a(26),r=n(s),c=a(0),l=n(c),d=a(3),u=n(d),m=a(1),p=n(m),f=a(2),g=n(f);a(27);var h=a(4),v=n(h),_=a(5),y=a(6),E=a(11),b=a(21),N=a(40);a(708);var R=function(e){function t(e){(0,l.default)(this,t);var a=(0,p.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));k.call(a);var n=e.index,o=_.appMethod.getAppCurrentPage();return a.init(n,o),a}return(0,g.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this,t=this.props.data,a=this.props.data,n=a.customFeature,o=a.style,i=a.video_data,s=a.title_width;s=s||{width:""};var c=n.mode,l=n.hideRate,d=n.hidePlayCount,u=n.imgWidth,m=n.imgHeight,p=n.lineHeight,f=n.margin,g=n.lineBackgroundColor,h=(0,y.convertStyleData)(o);0==n.vesselAutoheight&&(h.height=(0,y.transformPx2Rem)(n.height,320));var _={marginBottom:(0,y.transformPx2Rem)(f,320),backgroundColor:g,height:(0,y.transformPx2Rem)(p,320)},R={width:(0,y.transformPx2Rem)(u,320),height:(0,y.transformPx2Rem)(m,320)},k={marginBottom:(0,y.transformPx2Rem)(f,320),height:(0,y.transformPx2Rem)(p,320),backgroundColor:g};return v.default.createElement("div",{className:"custom-component video-list"},v.default.createElement(E.ScrollView,{className:"element video-list scroll-ele video-list-mode-"+c,style:h,"data-compindex":this.props.index,"scroll-y":"true","scroll-x":"false","lower-threshold":"100",bindscrolltolower:function(t){return e.videoScrollFunc(t)}},v.default.createElement("div",{className:"js-list-container video-list-ul clearfix"},1==c&&v.default.createElement(v.default.Fragment,null,i&&i.map(function(t){return v.default.createElement("div",{className:"video-list-item clearfix",key:t.id,style:_,"data-id":t.id,onClick:e.turnToVideoDetail},v.default.createElement("div",{className:"video-list-inner"},v.default.createElement("div",{className:"list-img-outer",style:R},v.default.createElement("img",{className:"list-img",src:t.preview_img}),v.default.createElement("div",{className:"video-list-play icon-play ico-moon"}),!l&&v.default.createElement("label",{className:"rate"},t.score)),v.default.createElement("div",{className:"title-container"},v.default.createElement("div",{className:"title"},t.title),!d&&v.default.createElement("div",{className:"play-count-outer"},v.default.createElement("label",{className:"video-eye ico-moon icon-eye"}),v.default.createElement("label",{className:"play-count"},t.video_view)),"0"==t.is_free&&v.default.createElement("div",{className:"price"},v.default.createElement("label",{className:"rmb"},"¥"),t.price),"0"!=t.is_free&&v.default.createElement("div",{className:"price"},"免费"))))})),3==c&&v.default.createElement(v.default.Fragment,null,v.default.createElement(r.default,{autoplay:!1,dots:!1,infinite:!0,style:k},i&&i.map(function(e){return v.default.createElement("div",{className:"video-list-item",key:e.id,style:_},v.default.createElement("div",{className:"video-list-inner"},v.default.createElement("div",{className:"list-img-outer",style:R},v.default.createElement("img",{className:"list-img",src:e.preview_img}),v.default.createElement("div",{className:"video-list-play icon-play ico-moon"}),!l&&v.default.createElement("label",{className:"rate"},e.score)),v.default.createElement("div",{className:"title-container",style:{width:0==c?s.width:"auto"}},v.default.createElement("div",{className:"title"},e.title),"0"==e.is_free&&v.default.createElement("div",{className:"price"},v.default.createElement("label",{className:"rmb"},"¥"),e.price),"0"!=e.is_free&&v.default.createElement("div",{className:"price"},"免费"),!d&&v.default.createElement("div",{className:"play-count-outer"},v.default.createElement("label",{className:"video-eye ico-moon icon-eye"}),v.default.createElement("label",{className:"play-count"},e.video_view)))))}))),1!=c&&3!=c&&v.default.createElement(v.default.Fragment,null,i&&i.map(function(t){return v.default.createElement("div",{className:"video-list-item clearfix",key:t.id,style:_,"data-id":t.id,onClick:e.turnToVideoDetail},v.default.createElement("div",{className:"video-list-inner"},v.default.createElement("div",{className:"list-img-outer"},v.default.createElement("img",{className:"list-img",src:t.preview_img,style:R}),v.default.createElement("div",{className:"video-list-play icon-play ico-moon"})),v.default.createElement("div",{className:"title-container",style:{width:0==c?s.width:"auto"}},v.default.createElement("div",{className:"title"},t.title),v.default.createElement("div",{className:"video-list-score"},!l&&v.default.createElement("div",{className:"video-score-wrap"},v.default.createElement("div",{className:"numeric"},v.default.createElement("label",{className:"star ico-moon icon-score"}),v.default.createElement("label",{className:"star ico-moon icon-score"}),v.default.createElement("label",{className:"star ico-moon icon-score"}),v.default.createElement("label",{className:"star ico-moon icon-score"}),v.default.createElement("label",{className:"star ico-moon icon-score"})),v.default.createElement("div",{className:"numeric numeric-top",style:{width:10*t.score+"%"}},v.default.createElement("label",{className:"star full-star ico-moon icon-score"}),v.default.createElement("label",{className:"star full-star ico-moon icon-score"}),v.default.createElement("label",{className:"star full-star ico-moon icon-score"}),v.default.createElement("label",{className:"star full-star ico-moon icon-score"}),v.default.createElement("label",{className:"star full-star ico-moon icon-score"}))),!l&&v.default.createElement("label",{className:"rate"},t.score),!d&&v.default.createElement("label",{className:"video-eye ico-moon icon-eye"}),!d&&v.default.createElement("label",{className:"play-count"},t.video_view)),"0"==t.is_free&&v.default.createElement("div",{className:"price"},v.default.createElement("label",{className:"rmb"},"¥"),t.price),"0"!=t.is_free&&v.default.createElement("div",{className:"price"},"免费"))))}))),3!=n.mode&&v.default.createElement(v.default.Fragment,null,t.loading&&v.default.createElement(b.RequestStatus,{is:"requestLoading"}),0==t.is_more&&0==t.video_data.length&&v.default.createElement(b.RequestStatus,{is:"requestNone",data:{data:"暂无视频~"}}),t.loadingFail&&v.default.createElement(b.RequestStatus,{is:"requestFail",data:{refreshEvent:"videoScrollFunc",compindex:this.props.index}}),0==t.is_more&&t.video_data.length>0&&t.customFeature.isShowFinishText&&v.default.createElement(b.RequestStatus,{is:"requestAll"}),1==t.customFeature.vesselAutoheight&&1==t.customFeature.loadingMethod&&2!=t.customFeature.mode&&!!t.is_more&&0!=t.is_more&&!t.loading&&!t.loadingFail&&v.default.createElement(N.LoadingBtn,{customFeature:n,onClick:this.videoScrollFunc,"data-compindex":this.props.index}))))}}]),t}(v.default.Component),k=function(){var e=this;this.init=function(e,t){var a={},n=t.data.eles[e],o=n.customFeature,i={},s=!1;_.appMethod.getInvolvedFromRefreshObject(o.id,"new-classify")&&(s=!0),s||(a.form="video",a.page_size=o.loadingNum||10,a.page=1,o.source&&"none"!=o.source&&(a.cate_id=o.source),i["eles["+e+"].loading"]=!0,i["eles["+e+"].loadingFail"]=!1,i["eles["+e+"].video_data"]=[],i["eles["+e+"].is_more"]=1,i["eles["+e+"].curpage"]=0,i["eles["+e+"].param"]=a,t.setData(i),_.appMethod.sendRequest({hideLoading:!0,url:"/index.php?r=AppVideo/GetVideoList",data:a,method:"post",chain:!0,subshop:t.franchiseeId||"",success:function(a){if(0==a.status){for(var n=a.data,o={},i=0;i<n.length;i++)n[i].video_view=_.appMethod.handlingNumber(n[i].video_view);o["eles["+e+"].video_data"]=n,o["eles["+e+"].is_more"]=a.is_more,o["eles["+e+"].curpage"]=1,o["eles["+e+"].loading"]=!1,o["eles["+e+"].loadingFail"]=!1,t.setData(o)}},fail:function(a){var n={};n["eles["+e+"].loadingFail"]=!0,n["eles["+e+"].loading"]=!1,t.setData(n)}}))},this.videoScrollFunc=function(t){var a=_.appMethod.getAppCurrentPage(),n="object"==(void 0===t?"undefined":(0,i.default)(t))?t.currentTarget.dataset.compindex:t,o=a.data.eles[n];if(o.is_search){var s=o.searchEle;a.callComponentMethod({componentIndex:s,methodName:"searchList",argvs:[s,t]})}else e._videoScrollFunc(t)},this._videoScrollFunc=function(e){var t=_.appMethod.getAppCurrentPage(),a="object"==(void 0===e?"undefined":(0,i.default)(e))?e.currentTarget.dataset.compindex:e,n=t.data.eles[a],o=n.curpage+1,s=n.customFeature,r={},c=n.param||{};n.is_more||"object"!=(void 0===e?"undefined":(0,i.default)(e))||"tap"!=e.type||_.appMethod.showModal({content:"已经加载到最后了"}),!n.loading&&n.is_more&&(r["eles["+a+"].loading"]=!0,r["eles["+a+"].loadingFail"]=!1,t.setData(r),c.page_size=s.loadingNum||20,c.page=o,_.appMethod.sendRequest({url:"/index.php?r=AppVideo/GetVideoList",data:c,method:"post",hideLoading:!0,chain:!0,subshop:t.franchiseeId||"",success:function(e){for(var o=e.data,i=0;i<o.length;i++)o[i].video_view=_.appMethod.handlingNumber(o[i].video_view);r={},r["eles["+a+"].video_data"]=n.video_data.concat(o),r["eles["+a+"].is_more"]=e.is_more,r["eles["+a+"].curpage"]=e.current_page,r["eles["+a+"].loading"]=!1,r["eles["+a+"].loadingFail"]=!1,t.setData(r)},fail:function(){var e={};e["eles["+a+"].loadingFail"]=!0,e["eles["+a+"].loading"]=!1,t.setData(e)},complete:function(){}}))},this.turnToVideoDetail=function(e){_.appMethod.turnToVideoDetail(e)},this._refreshVideoList=function(e,t,a){t.page_size=t.page_size||a.data.eles[e].customFeature.loadingNum||10,"category"===t.idx_arr.idx&&(t.cate_id=t.idx_arr.idx_value);var n={};n["eles["+e+"].loading"]=!0,n["eles["+e+"].loadingFail"]=!1,n["eles["+e+"].video_data"]=[],n["eles["+e+"].is_more"]=1,n["eles["+e+"].curpage"]=0,n["eles["+e+"].param"]=t,a.setData(n),_.appMethod.sendRequest({hideLoading:!0,url:"/index.php?r=AppVideo/GetVideoList",data:t,method:"post",chain:!0,subshop:a.franchiseeId||"",success:function(t){if(0==t.status){for(var n=t.data,o={},i=0;i<n.length;i++)n[i].video_view=_.appMethod.handlingNumber(n[i].video_view);o["eles["+e+"].video_data"]=n,o["eles["+e+"].is_more"]=t.is_more,o["eles["+e+"].curpage"]=1,o["eles["+e+"].loading"]=!1,o["eles["+e+"].loadingFail"]=!1,a.setData(o)}},fail:function(t){var n={};n["eles["+e+"].loadingFail"]=!0,n["eles["+e+"].loading"]=!1,a.setData(n)}})}};t.default=R},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(9),i=n(o),s=a(0),r=n(s),c=a(3),l=n(c),d=a(1),u=n(d),m=a(2),p=n(m),f=a(4),g=n(f),h=a(5),v=a(6);a(710);var _=function(e){function t(e){(0,r.default)(this,t);var a=(0,u.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));y.call(a);var n=e.index,o=h.appMethod.getAppCurrentPage();return a.init(n,o),a}return(0,p.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this,t=this.props.data,a=t.customFeature,n=t.content,o=(0,v.convertStyleData)(t.style),i={width:(0,v.transformPx2Rem)(a.width,320),height:(0,v.transformPx2Rem)(a.height,320),marginLeft:(0,v.transformPx2Rem)(a["margin-left"]),marginTop:(0,v.transformPx2Rem)(a["margin-top"]),borderRadius:(0,v.transformPx2Rem)(a.picBorderRadius)},s={color:a.selectedColor};return g.default.createElement("div",{className:"custom-component topic-classify",style:o},n.map(function(a,n){return g.default.createElement("div",{className:"classify-item",key:n,style:t.selectedSectionId==a.bindPlate&&t.selectedCategoryId==a.classifyId?s:{},onClick:e.switchTopicCategory,"data-compindex":e.props.index,"data-topic-compindex":t.relateTopicCompIndex,"data-sectionid":a.bindPlate,"data-categoryid":a.classifyId},g.default.createElement("div",{className:"img-wrap"},g.default.createElement("img",{className:"classify-logo",style:i,src:a.pic,alt:""})),g.default.createElement("div",null,a.name))}))}}]),t}(g.default.Component),y=function(){this.init=function(e,t){var a=t.data.eles[e].customFeature,n=a;t.setData((0,i.default)({},"eles["+e+"].param",n));var o={},s=h.appMethod.findComponentIndexById(a.topic_refresh_object,t);if(s>-1){var r=t.data.eles[s].customFeature;o["eles["+e+".relateTopicCompIndex"]=s,o["eles["+s+".relateClassifyCompIndex"]=e,o["eles["+e+".selectedSectionId"]=r.bindPlate,o["eles["+e+".selectedCategoryId"]=r.bindTopic,t.setData(o)}else h.appMethod.showModal({content:"话题分类未找到绑定的话题列表"})},this.switchTopicCategory=function(e){var t=e.currentTarget,a=t.dataset,n=a.compindex,o=a.sectionid||0,i=a.categoryid||0,s=a.topicCompindex,r=h.appMethod.getAppCurrentPage(),c={};if(s){var l=r.data.eles[s].relateSearchCompIndex;c["eles["+n+"].selectedSectionId"]=o,c["eles["+n+"].selectedCategoryId"]=i,c["eles["+s+"].listStatus.loading"]=!1,c["eles["+s+"].listStatus.isMore"]=!0,c["eles["+s+"].listParam.search_value"]="",c["eles["+s+"].topicList"]=[],l&&l>-1&&(c["eles["+l+"].searchValue"]=""),c["eles["+s+"].listParam.page"]=1,c["eles["+s+"].listParam.section_id"]=o,c["eles["+s+"].listParam.category_id"]=i,r.setData(c),r.callComponentMethod({componentIndex:s,methodName:"getTopListData",argvs:[r,s]})}else h.appMethod.showModal({content:"话题分类未找到绑定的话题列表"})}};t.default=_},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(9),i=n(o),s=a(0),r=n(s),c=a(3),l=n(c),d=a(1),u=n(d),m=a(2),p=n(m),f=a(4),g=n(f),h=a(5),v=a(6);a(712);var _=function(e){function t(e){(0,r.default)(this,t);var a=(0,u.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));y.call(a);var n=e.index,o=h.appMethod.getAppCurrentPage();return a.init(n,o),a}return(0,p.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this,t=this.props.data,a=t.customFeature,n=t.content,o=(0,v.convertStyleData)(t.style),i={color:a.selectedColor};return g.default.createElement("div",{className:"custom-component topic-sort",style:o},n.map(function(a,n){return g.default.createElement("div",{className:"sort-item",key:n,style:a.orderby==t.currentOrderby?i:{},onClick:e.switchTopiclistOrderBy,"data-orderby":a.orderby,"data-order":a.order,"data-compindex":e.props.index},a.text)}))}}]),t}(g.default.Component),y=function(){this.init=function(e,t){var a,n=t.data.eles[e],o=n.customFeature,s=n.content,r=o;t.setData((0,i.default)({},"eles["+e+"].param",r));var c=h.appMethod.findComponentIndexById(o.topic_sort_object);if(c<0)return h.appMethod.showModal({content:"话题排序未找到绑定的话题列表"}),void t.setData((0,i.default)({},"eles["+e+"].currentOrderby","comment_count"));t.setData((a={},(0,i.default)(a,"eles["+e+"].currentOrderby",s[0].orderby),(0,i.default)(a,"eles["+e+"].relateTopicCompIndex",c),(0,i.default)(a,"eles["+c+".relateSortCompIndex",e),a))},this.switchTopiclistOrderBy=function(e){var t=e.currentTarget.dataset,a=t.compindex,n=t.orderby,o=h.appMethod.getAppCurrentPage(),i={},s=o.data.eles[a];if(s.relateTopicCompIndex){var r=s.relateTopicCompIndex,c=o.data.eles[r].listParam;i["eles["+a+"].currentOrderby"]=n,i["eles["+r+"].listParam.orderby"]=n,i["eles["+r+"].listStatus.loading"]=!1,i["eles["+r+"].listStatus.isMore"]=!0,i["eles["+r+"].topicList"]=[],"distance"!==n||c.latitude?(i["eles["+r+"].listParam.page"]=1,o.setData(i),o.callComponentMethod({componentIndex:r,methodName:"getTopListData",argvs:[o,r]})):h.appMethod.getLocation({success:function(e){i["eles["+r+"].listParam.page"]=1,i["eles["+r+"].listParam.orderby"]=n,i["eles["+r+"].listParam.latitude"]=e.latitude,i["eles["+r+"].listParam.longitude"]=e.longitude,o.setData(i),o.callComponentMethod({componentIndex:r,methodName:"getTopListData",argvs:[o,r]})}})}else h.appMethod.showModal({content:"话题排序未找到绑定的话题列表"})}};t.default=_},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(26),i=n(o),s=a(0),r=n(s),c=a(3),l=n(c),d=a(1),u=n(d),m=a(2),p=n(m);a(27);var f=a(4),g=n(f),h=a(6),v=(a(38),a(5)),_=a(30);a(714);var y=function(e){function t(e){(0,r.default)(this,t);var a=(0,u.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));E.call(a);var n=e.index,o=v.appMethod.getAppCurrentPage();return a.init(n,o),a}return(0,p.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this,t=this.props.data,a=t.userData,n=_.pageInstance.state.userInfo||{},o=t.customFeature,s=(0,h.convertStyleData)(t.style);t.content;return g.default.createElement("div",{className:"custom-component user-center-head",style:s},1==o.member&&g.default.createElement(g.default.Fragment,null,1==o["personal-mode"]&&g.default.createElement("div",{className:"show-view",onClick:this.userCenterTurnToPage,"data-router":"userCenter",style:{height:(0,h.transformPx2Rem)(o.topSectionStyle.topHeight,320),backgroundColor:o.topSectionStyle["background-color"],backgroundImage:o.topSectionStyle["background-image"],opacity:o.topSectionStyle.opacity||1,backgroundSize:"100% 100%"}},g.default.createElement("label",{className:"empty-span"}),g.default.createElement("img",{className:"cover-thumb",style:{width:o.topSectionStyle.coverHeight,height:o.topSectionStyle.coverHeight},src:n.cover_thumb||"http://img.zhichiwangluo.com/zc_app_default_photo.png",alt:""}),g.default.createElement("label",{className:"nickname",style:{color:o.topSectionStyle.color,fontSize:o.topSectionStyle["font-size"],fontStyle:o.topSectionStyle["font-style"],textDecoration:o.topSectionStyle["text-decoration"],fontWeight:o.topSectionStyle["font-weight"],marginLeft:".40rem"}},n.nickname||"用户名"),g.default.createElement("label",{className:"ico-moon icon-rightarrow"})),2==o["personal-mode"]&&g.default.createElement("div",{className:"show-view",onClick:this.userCenterTurnToPage,"data-router":"userCenter",style:{textAlign:"center",height:(0,h.transformPx2Rem)(o.topSectionStyle.topHeight,320),backgroundColor:o.topSectionStyle["background-color"],backgroundImage:o.topSectionStyle["background-image"],opacity:o.topSectionStyle.opacity||1,backgroundSize:"100% 100%"}},g.default.createElement("label",{className:"empty-span"}),g.default.createElement("div",{style:{display:"inline-block",verticalAlign:"middle"}},g.default.createElement("img",{className:"cover-thumb",style:{width:o.topSectionStyle.coverHeight,height:o.topSectionStyle.coverHeight},src:n.cover_thumb||"http://img.zhichiwangluo.com/zc_app_default_photo.png",alt:""}),g.default.createElement("label",{className:"nickname",style:{color:o.topSectionStyle.color,fontSize:o.topSectionStyle["font-size"],fontStyle:o.topSectionStyle["font-style"],textDecoration:o.topSectionStyle["text-decoration"],fontWeight:o.topSectionStyle["font-weight"]}},n.nickname||"用户名")),g.default.createElement("div",{className:"empty-span"})),3==o["personal-mode"]&&g.default.createElement("div",{className:"personal-mode-0",onClick:this.userCenterTurnToPage,"data-router":"userCenter",style:{textAlign:"center",height:(0,h.transformPx2Rem)(o.topSectionStyle.topHeight,320),backgroundColor:o.topSectionStyle["background-color"],backgroundImage:o.topSectionStyle["background-image"],opacity:o.topSectionStyle.opacity||1,backgroundSize:"100% 100%"}},g.default.createElement("label",{className:"empty-span"}),g.default.createElement("label",{className:"nickname",style:{color:o.topSectionStyle.color,fontSize:o.topSectionStyle["font-size"],fontStyle:o.topSectionStyle["font-style"],textDecoration:o.topSectionStyle["text-decoration"],fontWeight:o.topSectionStyle["font-weight"]}},n.nickname||"用户名"),g.default.createElement("label",{className:"ico-moon icon-rightarrow"}),g.default.createElement("img",{className:"cover-thumb",style:{width:o.topSectionStyle.coverHeight,height:o.topSectionStyle.coverHeight},src:n.cover_thumb||"http://img.zhichiwangluo.com/zc_app_default_photo.png",alt:""}))),a&&2==o.member&&g.default.createElement(g.default.Fragment,null,1==o["senior-mode"]&&g.default.createElement("div",{style:{paddingBottom:a.user_vip_card&&a.user_paid_vip_card&&1!=a.need_collect_info?0:".30rem"}},g.default.createElement("div",{className:"show-view-all",style:{paddingBottom:a.user_vip_card&&a.user_paid_vip_card&&1!=a.need_collect_info?0:".30rem"}},g.default.createElement(i.default,{dots:!(!a.user_vip_card||!a.user_paid_vip_card||1==a.need_collect_info),style:{height:a.user_paid_vip_card&&1!=a.need_collect_info?"calc("+(0,h.transformPx2Rem)(o.topSectionStyle.topHeight,320)+" + 20px)":(0,h.transformPx2Rem)(o.topSectionStyle.topHeight,320),zIndex:2},dotStyle:{background:"#E1E1E1"},dotActiveStyle:{background:"#ADADAD"}},[!((a.user_vip_card||a.user_paid_vip_card)&&1!=a.need_collect_info)&&g.default.createElement("div",{className:"personal-mode-3 show-view",style:{textAlign:"center",height:(0,h.transformPx2Rem)(o.topSectionStyle.topHeight,320),backgroundColor:o.topSectionStyle["background-color"],backgroundImage:o.topSectionStyle["background-image"],opacity:o.topSectionStyle.opacity||1,backgroundSize:"100% 100%"},onClick:this.vipCardTurnToPage,"data-type":"average-user","data-needcollectinfo":a.need_collect_info,"data-isturnto":a.all_vip_card.length>0||1==a.is_vip_benefit_day?"true":"false"},(!t.customFeature.topSectionStyle["background-image"]&&!a.user_paid_vip_card&&!a.user_vip_card||!a.user_paid_vip_card&&a.user_vip_card&&1==a.user_vip_card.background_type||a.user_paid_vip_card&&1==a.user_paid_vip_card.background_type)&&g.default.createElement("img",{className:"user-center-mark",src:"https://cdn.jisuapp.cn/static/jisuapp_editor/images/userCenterHead.png"}),g.default.createElement("div",{className:"personal-main"},g.default.createElement("img",{className:"cover-thumb",style:{width:o.topSectionStyle.coverHeight,height:o.topSectionStyle.coverHeight},src:n.cover_thumb||"http://img.zhichiwangluo.com/zc_app_default_photo.png",onClick:this.userCenterTurnToPage,"data-router":"userCenter",alt:""}),g.default.createElement("div",{className:"personal-main-right"},g.default.createElement("div",{className:"nickname",style:{color:o.topSectionStyle.color,fontSize:o.topSectionStyle["font-size"],fontStyle:o.topSectionStyle["font-style"],textDecoration:o.topSectionStyle["text-decoration"],fontWeight:o.topSectionStyle["font-weight"]}},n.nickname||"用户名"),g.default.createElement("div",{className:"user-type",style:{color:o.topSectionStyle["vip-color"],fontSize:o.topSectionStyle["vip-font-size"],fontStyle:o.topSectionStyle["vip-font-style"],textDecoration:o.topSectionStyle["vip-text-decoration"],fontWeight:o.topSectionStyle["vip-font-weigh"]}},"普通用户"))),1==a.buyVip&&0==a.need_collect_info&&g.default.createElement("div",{className:"buy-vip-hot buy-vip-margin",onClick:this.vipCardTurnToPage,"data-type":"buy-vip","data-id":"''"},g.default.createElement("div",{className:"buy-vip",style:{color:o.topSectionStyle["button-color"],fontSize:o.topSectionStyle["button-font-size"],fontStyle:o.topSectionStyle["button-font-style"],textDecoration:o.topSectionStyle["button-text-decoration"],fontWeight:o.topSectionStyle["button-font-weight"],background:o["button-background"]}},"购买会员")),1==a.need_collect_info&&g.default.createElement("div",{className:"buy-vip-hot get-vip",onClick:this.vipCardTurnToPage,"data-type":"get-vip","data-id":a.user_vip_card&&a.user_vip_card.vip_id},g.default.createElement("div",{className:"buy-vip",style:{color:o.topSectionStyle["button-color"],fontSize:o.topSectionStyle["button-font-size"],fontStyle:o.topSectionStyle["button-font-style"],textDecoration:o.topSectionStyle["button-text-decoration"],fontWeight:o.topSectionStyle["button-font-weight"],background:o["button-background"]}},a.reminder_config.button)),1==a.need_collect_info&&g.default.createElement("div",{className:"vip-bottom-font",onClick:this.vipCardTurnToPage,"data-type":"get-vip"},g.default.createElement("span",{style:{color:o.topSectionStyle["other-color"],fontSize:o.topSectionStyle["other-font-size"],fontStyle:o.topSectionStyle["other-font-style"],textDecoration:o.topSectionStyle["other-text-decoration"],fontWeight:o.topSectionStyle["other-font-weight"]}},a.reminder_config.description))),!(!a.user_paid_vip_card||1==a.need_collect_info)&&g.default.createElement("div",{className:"personal-mode-3 show-view",style:{textAlign:"center",height:(0,h.transformPx2Rem)(o.topSectionStyle.topHeight,320),backgroundColor:o.topSectionStyle["background-color"],backgroundImage:o.topSectionStyle["background-image"],opacity:o.topSectionStyle.opacity||1,backgroundSize:"100% 100%"},onClick:this.vipCardTurnToPage,"data-type":"renewal-vip","data-id":a.user_paid_vip_card.vip_id},(!t.customFeature.topSectionStyle["background-image"]&&!a.user_paid_vip_card&&!a.user_vip_card||!a.user_paid_vip_card&&a.user_vip_card&&1==a.user_vip_card.background_type||a.user_paid_vip_card&&1==a.user_paid_vip_card.background_type)&&g.default.createElement("img",{className:"user-center-mark",src:"https://cdn.jisuapp.cn/static/jisuapp_editor/images/userCenterHead.png"}),g.default.createElement("div",{className:"personal-main"},g.default.createElement("img",{className:"cover-thumb",style:{width:o.topSectionStyle.coverHeight,height:o.topSectionStyle.coverHeight,zIndex:2},src:n.cover_thumb||"http://img.zhichiwangluo.com/zc_app_default_photo.png",onClick:this.userCenterTurnToPage,"data-router":"userCenter",alt:""}),g.default.createElement("div",{className:"personal-main-right"},g.default.createElement("div",{className:"nickname",style:{color:o.topSectionStyle.color,fontSize:o.topSectionStyle["font-size"],fontStyle:o.topSectionStyle["font-style"],textDecoration:o.topSectionStyle["text-decoration"],fontWeight:o.topSectionStyle["font-weight"]}},n.nickname||"用户名"),g.default.createElement("div",{className:"user-type pay-user-type",style:{color:o.topSectionStyle["vip-color"],fontSize:o.topSectionStyle["vip-font-size"],fontStyle:o.topSectionStyle["vip-font-style"],textDecoration:o.topSectionStyle["vip-text-decoration"],fontWeight:o.topSectionStyle["vip-font-weigh"]}},a.user_paid_vip_card.title))),g.default.createElement("div",{className:"ico-moon icon-qr-code qr-code",onClick:this.showQRRemark,"data-compindex":this.props.index,"data-id":a.user_paid_vip_card,"data-type":"1","data-isshow":"true"}),g.default.createElement("div",{className:"buy-vip-hot"},1==a.user_paid_vip_card.enable_status&&g.default.createElement("div",{className:"buy-vip renewal-vip",onClick:this.vipCardTurnToPage,"data-type":"renewal-vip","data-id":a.user_paid_vip_card&&a.user_paid_vip_card.vip_id,style:{color:o.topSectionStyle["button-color"],fontSize:o.topSectionStyle["button-font-size"],fontStyle:o.topSectionStyle["button-font-style"],textDecoration:o.topSectionStyle["button-text-decoration"],fontWeight:o.topSectionStyle["button-font-weight"],background:o["button-background"]}},"立即续费"),g.default.createElement("div",{className:"vip-bottom-date",style:{color:o.topSectionStyle["other-color"],fontSize:o.topSectionStyle["other-font-size"],fontStyle:o.topSectionStyle["other-font-style"],textDecoration:o.topSectionStyle["other-text-decoration"],fontWeight:o.topSectionStyle["other-font-weight"]}},1==a.user_paid_vip_card.is_show_vipid&&g.default.createElement("div",{className:"vip-id"},"N0.",a.user_paid_vip_card.id),g.default.createElement("div",{className:"vip-expired-time"},"永久"!=a.user_paid_vip_card.expired_time?g.default.createElement("span",null,a.user_paid_vip_card.expired_time,"到期"):g.default.createElement("span",null,a.user_paid_vip_card.expired_time,"有效"))))),!(!a.user_vip_card||1==a.need_collect_info)&&g.default.createElement("div",{className:"personal-mode-3 show-view",style:{textAlign:"center",height:(0,h.transformPx2Rem)(o.topSectionStyle.topHeight,320),backgroundColor:1==a.user_vip_card.background_type?a.user_vip_card.background:"",backgroundImage:0==a.user_vip_card.background_type?"url("+a.user_vip_card.background+")":"",opacity:o.topSectionStyle.opacity||1,backgroundSize:"100% 100%"},onClick:this.vipCardTurnToPage,"data-type":"ordinary-vip","data-id":a.user_vip_card.vip_id},(!t.customFeature.topSectionStyle["background-image"]&&!a.user_paid_vip_card&&!a.user_vip_card||!a.user_paid_vip_card&&a.user_vip_card&&1==a.user_vip_card.background_type||a.user_paid_vip_card&&1==a.user_paid_vip_card.background_type)&&g.default.createElement("img",{className:"user-center-mark",src:"https://cdn.jisuapp.cn/static/jisuapp_editor/images/userCenterHead.png"}),g.default.createElement("div",{className:"personal-main"},g.default.createElement("img",{className:"cover-thumb",style:{width:o.topSectionStyle.coverHeight,height:o.topSectionStyle.coverHeight,zIndex:2},src:n.cover_thumb||"http://img.zhichiwangluo.com/zc_app_default_photo.png",onClick:this.userCenterTurnToPage,"data-router":"userCenter"}),g.default.createElement("div",{className:"personal-main-right"},g.default.createElement("div",{className:"nickname",style:{color:o.topSectionStyle.color,fontSize:o.topSectionStyle["font-size"],fontStyle:o.topSectionStyle["font-style"],textDecoration:o.topSectionStyle["text-decoration"],fontWeight:o.topSectionStyle["font-weight"]}},n.nickname||"用户名"),g.default.createElement("div",{className:"user-type",style:{color:o.topSectionStyle["vip-color"],fontSize:o.topSectionStyle["vip-font-size"],fontStyle:o.topSectionStyle["vip-font-style"],textDecoration:o.topSectionStyle["vip-text-decoration"],fontWeight:o.topSectionStyle["vip-font-weigh"]}},a.user_vip_card.title))),g.default.createElement("div",{className:"ico-moon icon-qr-code qr-code",onClick:this.showQRRemark,"data-compindex":this.props.index,"data-id":a.user_vip_card.id,"data-type":"0","data-isshow":"true"}),1==a.buyVip&&g.default.createElement("div",{className:"buy-vip-hot",onClick:this.vipCardTurnToPage,"data-type":"buy-vip","data-id":"''"},g.default.createElement("div",{className:"buy-vip buy-vip-margin-2",style:{color:o.topSectionStyle["button-color"],fontSize:o.topSectionStyle["button-font-size"],fontStyle:o.topSectionStyle["button-font-style"],textDecoration:o.topSectionStyle["button-text-decoration"],fontWeight:o.topSectionStyle["button-font-weight"],background:o["button-background"]}},"购买会员")),g.default.createElement("div",{className:"vip-bottom-date",style:{color:o.topSectionStyle["other-color"],fontSize:o.topSectionStyle["other-font-size"],fontStyle:o.topSectionStyle["other-font-style"],textDecoration:o.topSectionStyle["other-text-decoration"],fontWeight:o.topSectionStyle["other-font-weight"]}},1==a.user_vip_card.is_show_vipid&&g.default.createElement("div",{className:"vip-id"},"N0.",a.user_vip_card.id),g.default.createElement("div",{className:"vip-expired-time"},"永久"!=a.user_vip_card.expired_time?g.default.createElement("span",null,a.user_vip_card.expired_time,"到期"):g.default.createElement("span",null,a.user_vip_card.expired_time,"有效"))))].filter(Boolean).map(function(e,t){return g.default.createElement("div",{key:t},e)})))),2==o["senior-mode"]&&g.default.createElement("div",{className:"senior-mode",style:{textAlign:"center",height:(0,h.transformPx2Rem)(o.topSectionStyle.topHeight,320),backgroundColor:o.topSectionStyle["background-color"],backgroundImage:o.topSectionStyle["background-image"],opacity:o.topSectionStyle.opacity||1,backgroundSize:"100% 100%"}},g.default.createElement("div",{className:"senior-mode-user",onClick:this.userCenterTurnToPage,"data-router":"userCenter"},g.default.createElement("img",{className:"cover-thumb",style:{width:o.topSectionStyle.coverHeight,height:o.topSectionStyle.coverHeight},src:n.cover_thumb||"http://img.zhichiwangluo.com/zc_app_default_photo.png",alt:""}),g.default.createElement("label",{className:"nickname",style:{color:o.topSectionStyle.color,fontSize:o.topSectionStyle["font-size"],fontStyle:o.topSectionStyle["font-style"],textDecoration:o.topSectionStyle["text-decoration"],fontWeight:o.topSectionStyle["font-weight"],marginLeft:".20rem"}},n.nickname||"用户名"),g.default.createElement("label",{className:"ico-moon icon-rightarrow"})),g.default.createElement("div",{className:"member-card-box",onClick:this.vipCardTurnToPage,"data-type":"average-user","data-needcollectinfo":a.need_collect_info,"data-isturnto":a.all_vip_card.length>0||1==a.is_vip_benefit_day?"true":"false"},g.default.createElement("div",{style:{height:t.customFeature.showInfo?"2.36rem":".86rem",transition:"all linear 0.25s",overflow:"hidden"}},g.default.createElement(i.default,{dots:!(!a.user_vip_card||!a.user_paid_vip_card||1==a.need_collect_info),dotStyle:{background:"#B2B2B2"},dotActiveStyle:{background:"#E5E5E5"}},[!((a.user_vip_card||a.user_paid_vip_card)&&1!=a.need_collect_info)&&g.default.createElement("div",{className:"senior-mode-card"},g.default.createElement("div",{className:"card-head none-card"},g.default.createElement("img",{src:"http://cdn.jisuapp.cn/zhichi_frontend/static/webapp/images/user-center/vip_close.png",mode:"aspectFill",className:"card-head-ico"}),0==a.need_collect_info&&g.default.createElement("span",null,"暂无会员卡"),1==a.need_collect_info&&g.default.createElement("span",{onClick:this.vipCardTurnToPage,"data-type":"get-vip"},a.reminder_config.description),g.default.createElement("div",{className:"card-head-btn"},a.buyVip&&0==a.need_collect_info&&g.default.createElement("div",{onClick:this.vipCardTurnToPage,"data-type":"buy-vip","data-id":"''"},"购买会员"),1==a.need_collect_info&&g.default.createElement("div",{onClick:vipCardTurnToPage,"data-type":"get-vip","data-id":a.user_vip_card&&a.user_vip_card.vip_id},a.reminder_config.button)))),!(!a.user_paid_vip_card||1==a.need_collect_info)&&g.default.createElement("div",{className:"senior-mode-card"},g.default.createElement("div",{className:"card-head"},g.default.createElement("img",{src:"http://cdn.jisuapp.cn/zhichi_frontend/static/webapp/images/user-center/vip_level.png",mode:"aspectFill",className:"card-head-ico"}),g.default.createElement("span",{className:"card-head-title",style:{color:"#4a3d34"}},a.user_paid_vip_card.title),g.default.createElement("div",{className:"card-head-btn",onClick:this.showVipCardInfo,"data-compindex":this.props.index,"data-show":t.customFeature.showInfo},t.customFeature.showInfo?g.default.createElement("span",null,"收起"):g.default.createElement("span",null,"展开"),g.default.createElement("label",{className:"ico-moon icon-"+(t.customFeature.showInfo?"up":"down")+"arrow"}))),g.default.createElement("div",{className:"card-main"},1==a.user_paid_vip_card.is_show_vipid&&g.default.createElement("span",{className:"card-number"},"N0.",a.user_paid_vip_card.id),1==a.user_paid_vip_card.enable_status&&g.default.createElement("div",{className:"card-buyVip",onClick:this.vipCardTurnToPage,"data-type":"renewal-vip","data-id":a.user_paid_vip_card&&a.user_paid_vip_card.vip_id,style:{color:o.topSectionStyle["button-color"],fontSize:o.topSectionStyle["button-font-size"],fontStyle:o.topSectionStyle["button-font-style"],textDecoration:o.topSectionStyle["button-text-decoration"],fontWeight:o.topSectionStyle["button-font-weight"],background:o["button-background"]}},"立即续费"),g.default.createElement("div",{className:"card-qrcode"},"永久"!=a.user_paid_vip_card.expired_time?g.default.createElement("span",null,a.user_paid_vip_card.expired_time,"到期"):g.default.createElement("span",null,a.user_paid_vip_card.expired_time,"有效"),g.default.createElement("span",{className:"ico-moon icon-qr-code",onClick:this.showQRRemark,"data-compindex":this.props.index,"data-id":a.user_paid_vip_card.id,"data-type":"1","data-isshow":"true"})))),!(!a.user_vip_card||1==a.need_collect_info)&&g.default.createElement("div",{className:"senior-mode-card"},g.default.createElement("div",{className:"card-head"},g.default.createElement("img",{src:"http://cdn.jisuapp.cn/zhichi_frontend/static/webapp/images/user-center/vip_level.png",mode:"aspectFill",className:"card-head-ico"}),g.default.createElement("span",{className:"card-head-title",style:{color:"#4a3d34"}},a.user_vip_card.title),g.default.createElement("div",{className:"card-head-btn",onClick:this.showVipCardInfo,"data-compindex":this.props.index,"data-show":t.customFeature.showInfo},t.customFeature.showInfo?g.default.createElement("span",null,"收起"):g.default.createElement("span",null,"展开"),g.default.createElement("label",{className:"ico-moon icon-"+(t.customFeature.showInfo?"up":"down")+"arrow"}))),g.default.createElement("div",{className:"card-main"},1==a.user_vip_card.is_show_vipid&&g.default.createElement("span",{className:"card-number"},"N0.",a.user_vip_card.id),1==a.buyVip&&g.default.createElement("div",{className:"card-buyVip",onClick:this.vipCardTurnToPage,"data-type":"buy-vip",style:{color:o.topSectionStyle["button-color"],fontSize:o.topSectionStyle["button-font-size"],fontStyle:o.topSectionStyle["button-font-style"],textDecoration:o.topSectionStyle["button-text-decoration"],fontWeight:o.topSectionStyle["button-font-weight"],background:o["button-background"]}},"立即购买"),g.default.createElement("div",{className:"card-qrcode"},"永久"!=a.user_vip_card.expired_time?g.default.createElement("span",null,a.user_vip_card.expired_time,"到期"):g.default.createElement("span",null,a.user_vip_card.expired_time,"有效"),g.default.createElement("span",{className:"ico-moon icon-qr-code",onClick:this.showQRRemark,"data-compindex":this.props.index,"data-id":t.userData.user_vip_card.id,"data-type":"0","data-isshow":"true"}))))].filter(Boolean).map(function(e,t){return g.default.createElement("div",{key:t},e)}))))),3==o["senior-mode"]&&g.default.createElement("div",{style:{backgroundColor:"#fff"}},g.default.createElement("div",{className:"senior-mode "+(o.showInfo?"":"bottom-radius")+" senior-mode-3",style:{textAlign:"center",height:(0,h.transformPx2Rem)(o.topSectionStyle.topHeight,320),backgroundColor:o.topSectionStyle["background-color"],backgroundImage:o.topSectionStyle["background-image"],opacity:o.topSectionStyle.opacity||1,backgroundSize:"100% 100%"}},g.default.createElement("div",{className:"senior-mode-user",onClick:this.userCenterTurnToPage,"data-router":"userCenter"},g.default.createElement("img",{className:"cover-thumb",style:{width:o.topSectionStyle.coverHeight,height:o.topSectionStyle.coverHeight},src:n.cover_thumb||"http://img.zhichiwangluo.com/zc_app_default_photo.png",alt:""}),g.default.createElement("div",{style:{textAlign:"left"}},g.default.createElement("label",{className:"nickname",style:{color:o.topSectionStyle.color,fontSize:o.topSectionStyle["font-size"],fontStyle:o.topSectionStyle["font-style"],textDecoration:o.topSectionStyle["text-decoration"],fontWeight:o.topSectionStyle["font-weight"],marginLeft:".20rem"}},n.nickname||"用户名"),g.default.createElement("div",{className:"default-user",style:{color:o.topSectionStyle["vip-color"],fontSize:o.topSectionStyle["vip-font-size"],fontStyle:o.topSectionStyle["vip-font-style"],textDecoration:o.topSectionStyle["vip-text-decoration"],fontWeight:o.topSectionStyle["vip-font-weight"]}},a.user_paid_vip_card?"恭喜您，您已经是我们的付费会员":a.user_vip_card?"恭喜您，您已经是我们的普通会员":"普通用户"))),g.default.createElement("div",{className:"member-card-box",onClick:this.vipCardTurnToPage,"data-type":"average-user","data-needcollectinfo":a.need_collect_info,"data-isturnto":a.all_vip_card.length>0||1==a.is_vip_benefit_day?"true":"false"},g.default.createElement("div",{className:t.customFeature.showInfo?"":"senior-mode-radius"},g.default.createElement(i.default,{dots:!(!a.user_vip_card||!a.user_paid_vip_card||1==a.need_collect_info),style:{height:t.customFeature.showInfo?"2.36rem":".86rem",transition:"all linear 0.25s"},dotStyle:{background:"#B2B2B2"},dotActiveStyle:{background:"#E5E5E5"}},[!((t.userData.user_vip_card||t.userData.user_paid_vip_card)&&1!=t.userData.need_collect_info)&&g.default.createElement("div",{className:"senior-mode-card senior-mode-card2"},g.default.createElement("div",{className:"card-head none-card"},g.default.createElement("img",{src:"http://cdn.jisuapp.cn/zhichi_frontend/static/webapp/images/user-center/vip_close.png",mode:"aspectFill",className:"card-head-ico"}),0==a.need_collect_info&&g.default.createElement("span",null,"暂无会员卡"),1==a.need_collect_info&&g.default.createElement("span",{onClick:this.vipCardTurnToPage,"data-type":"get-vip"},a.reminder_config.description),g.default.createElement("div",{className:"card-head-btn"},a.buyVip&&0==a.need_collect_info&&g.default.createElement("div",{onClick:this.vipCardTurnToPage,"data-type":"buy-vip","data-id":"''"},"购买会员"),1==a.need_collect_info&&g.default.createElement("div",{onClick:this.vipCardTurnToPage,"data-type":"get-vip","data-id":t.userData.user_vip_card&&t.userData.user_vip_card.vip_id},t.userData.reminder_config.button)))),!(!t.userData.user_paid_vip_card||1==t.userData.need_collect_info)&&g.default.createElement("div",{className:"senior-mode-card  senior-mode-card2"},g.default.createElement("div",{className:"card-head"},g.default.createElement("img",{src:"http://cdn.jisuapp.cn/zhichi_frontend/static/webapp/images/user-center/vip_level.png",mode:"aspectFill",className:"card-head-ico"}),g.default.createElement("span",{className:"card-head-title",style:"color:#DAAF87"},t.userData.user_paid_vip_card.title),g.default.createElement("div",{className:"card-head-btn",onClick:this.showVipCardInfo,"data-compindex":this.props.index,"data-show":t.customFeature.showInfo},t.customFeature.showInfo?g.default.createElement("span",null,"收起"):g.default.createElement("span",null,"展开"),g.default.createElement("label",{className:"ico-moon icon-"+(t.customFeature.showInfo?"up":"down")+"arrow"}))),g.default.createElement("div",{className:"card-main"},1==a.user_paid_vip_card.is_show_vipid&&g.default.createElement("span",{className:"card-number"},"N0.",a.user_paid_vip_card.id),1==a.user_paid_vip_card.enable_status&&g.default.createElement("div",{className:"card-buyVip",onClick:this.vipCardTurnToPage,"data-type":"renewal-vip","data-id":a.user_paid_vip_card&&a.user_paid_vip_card.vip_id,style:{color:o.topSectionStyle["button-color"],fontSize:o.topSectionStyle["button-font-size"],fontStyle:o.topSectionStyle["button-font-style"],textDecoration:o.topSectionStyle["button-text-decoration"],fontWeight:o.topSectionStyle["button-font-weight"],background:o["button-background"]}},"立即续费"),g.default.createElement("div",{className:"card-qrcode"},"永久"!=a.user_paid_vip_card.expired_time?g.default.createElement("span",null,a.user_paid_vip_card.expired_time,"到期"):g.default.createElement("span",null,a.user_paid_vip_card.expired_time,"有效"),g.default.createElement("span",{className:"ico-moon icon-qr-code",onClick:this.showQRRemark,"data-compindex":this.props.index,"data-id":a.user_paid_vip_card.id,"data-type":"1","data-isshow":"true"})))),!(!t.userData.user_vip_card||1==t.userData.need_collect_info)&&g.default.createElement("div",{className:"senior-mode-card senior-mode-card2"},g.default.createElement("div",{className:"card-head"},g.default.createElement("img",{src:"http://cdn.jisuapp.cn/zhichi_frontend/static/webapp/images/user-center/vip_level.png",mode:"aspectFill",className:"card-head-ico"}),g.default.createElement("span",{className:"card-head-title",style:{color:"#DAAF87"}},t.userData.user_vip_card.title),g.default.createElement("div",{className:"card-head-btn",onClick:this.showVipCardInfo,"data-compindex":this.props.index,"data-show":t.customFeature.showInfo},t.customFeature.showInfo?g.default.createElement("span",null,"收起"):g.default.createElement("span",null,"展开"),g.default.createElement("label",{className:"ico-moon icon-"+(t.customFeature.showInfo?"up":"down")+"arrow"}))),g.default.createElement("div",{className:"card-main"},1==a.user_vip_card.is_show_vipid&&g.default.createElement("span",{className:"card-number"},"N0.",a.user_vip_card.id),1==a.buyVip&&g.default.createElement("div",{className:"card-buyVip",onClick:this.vipCardTurnToPage,"data-type":"buy-vip",style:{color:o.topSectionStyle["button-color"],fontSize:o.topSectionStyle["button-font-size"],fontStyle:o.topSectionStyle["button-font-style"],textDecoration:o.topSectionStyle["button-text-decoration"],fontWeight:o.topSectionStyle["button-font-weight"],background:o["button-background"]}},"立即购买"),g.default.createElement("div",{className:"card-qrcode"},"永久"!=a.user_vip_card.expired_time?g.default.createElement("span",null,a.user_vip_card.expired_time,"到期"):g.default.createElement("span",null,a.user_vip_card.expired_time,"有效"),g.default.createElement("span",{className:"ico-moon icon-qr-code",onClick:this.showQRRemark,"data-compindex":this.props.index,"data-id":t.userData.user_vip_card.id,"data-type":"0","data-isshow":"true"}))))].filter(Boolean).map(function(e,t){return g.default.createElement("div",{key:t},e)}))))))),o.isHiddenComponent&&2==o.member&&1!=o["senior-mode"]&&g.default.createElement("div",{style:{height:".8rem",background:"#fff"}}),a&&!o.isHiddenComponent&&g.default.createElement(g.default.Fragment,null,g.default.createElement("div",{style:{height:(0,h.transformPx2Rem)(o["margin-top"],320),background:"#fff"}}),g.default.createElement("div",{className:"user-data-show",style:{height:(0,h.transformPx2Rem)(o.height,320)}},o.showDataBlock&&o.showDataBlock[0].blockArr.map(function(t,n){return g.default.createElement("div",{key:n,className:"user-data-show-item",style:{width:"calc(100% / "+o.colums+")"},onClick:e[t.bindtap],"data-router":t.router},g.default.createElement("div",{style:{width:"100%"}},g.default.createElement("div",{style:{color:"#686868",fontSize:".36rem",fontWeight:"bold"}},a[t.feild],a.cross_add_coupon_mark>0&&"coupon_count"==t.feild&&g.default.createElement("span",{className:"coupon-prompt"}),"coupon_count"==t.feild&&g.default.createElement("span",null,"张"),"balance"==t.feild&&g.default.createElement("span",null,"元")),g.default.createElement("div",{style:{color:"#999999",fontSize:".24rem"}},t.name)),n!=o.showDataBlock[0].blockArr.length-1&&g.default.createElement("div",{className:"user-data-divline"},g.default.createElement("div",{className:"divline-content"})))}))),a&&o.isShowIntegral&&!!a.xcx_differential_entry&&g.default.createElement("div",{className:"integral-platform",onClick:this.vipCardTurnToPage,"data-type":"differential-mall"},g.default.createElement("div",{className:"ico-moon icon-differential-tag icon-container-cover icon-differentail-color"}),g.default.createElement("span",{className:"integral-platform-title"},"微分商城"),g.default.createElement("span",{className:"integral-platform-content"},"海量商家优惠券等你去领！"),g.default.createElement("div",{className:"integral-platform-right"},a.cross_add_differential_mark>0&&g.default.createElement("span",{className:"integral-platform-prompt"}),g.default.createElement("div",{className:"ico-moon icon-rightarrow icon-container-cover"}))),a&&t.qrData&&a.qrRemarkShow&&g.default.createElement("div",{className:"qr-remark",onClick:this.showQRRemark,"data-compindex":this.props.index,"data-isshow":"false"},g.default.createElement("div",{className:"paid-vip-info",onClick:this.showQRRemark},g.default.createElement("div",{className:"paid-vip-title"},g.default.createElement("span",null,t.qrData.user_info)),g.default.createElement("div",{className:"paid-vip-content"},g.default.createElement("img",{src:t.qrData.pic_url,className:"paid-vip-card-qr"}),g.default.createElement("div",{className:"paid-vip-card-id"},t.qrData.id)))))}}]),t}(g.default.Component),E=function(){this.init=function(e,t){v.appMethod.sendRequest({url:"/index.php?r=appVipCard/getUserAccountSurvey",success:function(a){var n={};a.data.buyVip=!1,a.data.balance=parseInt(a.data.balance);var o=!0,i=!1,s=void 0;try{for(var r,c=a.data.all_vip_card[Symbol.iterator]();!(o=(r=c.next()).done);o=!0){2==r.value.condition_type&&(a.data.buyVip=!0)}}catch(e){i=!0,s=e}finally{try{!o&&c.return&&c.return()}finally{if(i)throw s}}n["eles["+e+"].userData"]=a.data,t.setData(n)}})},this.showVipCardInfo=function(e){var t={},a=v.appMethod.getAppCurrentPage(),n=e.currentTarget.dataset.compindex,o="true"==e.currentTarget.dataset.show,i=a.state.eles[n],s=parseInt(i.customFeature.topSectionStyle.topHeight);t["eles["+n+"].customFeature.topSectionStyle.topHeight"]=o?(100*s-150)/100+"rem":((s>=270?s:270)+150)/100+"rem",t["eles["+n+"].customFeature.showInfo"]=!o,a.setData(t),e.stopPropagation()},this.userCenterTurnToPage=function(e){v.appMethod.userCenterTurnToPage(e),e.stopPropagation()},this.vipCardTurnToPage=function(e){e.stopPropagation();var t=e.currentTarget.dataset,a=t.type,n=t.id,o=t.isturnto,i=t.needcollectinfo;"get-vip"==a?v.appMethod.turnToPage("userCenter",{is_member:1,franchisee:v.globalData.chainAppId||""}):"buy-vip"==a?v.appMethod.turnToPage("vipBenefits",{is_paid_card:1}):"renewal-vip"==a?v.appMethod.turnToPage("vipBenefits",{is_paid_card:1,id:n}):"ordinary-vip"==a?v.appMethod.turnToPage("vipBenefits",{id:n}):"average-user"==a?"true"==o&&(1==i?v.appMethod.turnToPage("userCenter",{is_member:1,franchisee:v.globalData.chainAppId||""}):v.appMethod.turnToPage("vipBenefits")):"differential-mall"==a&&v.appMethod.turnToPage("/dMWebView")},this.showQRRemark=function(e){v.appMethod.showQRRemark(e),e.stopPropagation()}};t.default=y},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(36),i=n(o),s=a(0),r=n(s),c=a(3),l=n(c),d=a(1),u=n(d),m=a(2),p=n(m),f=a(4),g=n(f),h=a(6),v=a(30),_=a(5);a(716);var y=function(e){function t(e){(0,r.default)(this,t);var a=(0,u.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));E.call(a);var n=e.index,o=_.appMethod.getAppCurrentPage();return a.init(n,o),a}return(0,p.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this,t=this.props.data,a=t.userData||{},n=v.pageInstance.data.storeStyle||{},o=t.customFeature;return g.default.createElement("div",{className:"custom-component user-center-content"},t.content.map(function(i,s){return g.default.createElement("div",{className:"usercenter-block",key:s,style:{color:i.color,marginTop:i["margin-top"]||".2rem",backgroundColor:i["background-color"]||"#fff",backgroundImage:i["background-image"],textDecoration:i["text-decoration"],fontWeight:i["font-weight"],opacity:o.blockStyle.opacity||1,borderRadius:3==i.mode?".2rem":(0,h.transformPx2Rem)(i["border-radius"],320),width:"calc(100% - "+(3==i.mode?".2rem":(0,h.transformPx2Rem)(2*i.margin))+")"}},i.showName&&g.default.createElement("div",{className:"block-name",style:{fontSize:i["font-size"]}},i.customTitleImg&&showAreaIcon&&g.default.createElement("img",{className:"block-name-image",src:i.customTitleImg,alt:""}),g.default.createElement("span",null,i.name)),g.default.createElement("div",{className:"block-detail",style:{color:i.color||"rgb(89, 96, 123)",lineHeight:(0,h.transformPx2Rem)(i["line-height"],320)}},i.blockArr.map(function(o,r){return g.default.createElement(g.default.Fragment,{key:r},(1==i.mode||3==i.mode||!i.mode)&&g.default.createElement("div",{className:"block-item mode-one",onClick:e[o.bindtap],"data-need-collect-info":a.need_collect_info,"data-router":o.router,"data-open-verify-phone":o.openVerifyPhone||!1,"data-event-params":JSON.stringify(o.param),style:{textAlign:"center",display:"inline-block",width:"calc(100% / "+i.col+")"}},g.default.createElement("div",{style:{lineHeight:"normal"}},g.default.createElement("div",{style:{position:"relative",width:(0,h.transformPx2Rem)(i.imgHeight,320),height:(0,h.transformPx2Rem)(i.imgHeight,320),margin:"0 auto"}},!o.custom&&g.default.createElement("div",{className:"ico-moon "+o.icon+" "+("2"==t.customFeature.iconType?"":(s+1)%5==1||(s+1)%5==4?"color-1-4":(s+1)%5==2||(s+1)%5==0?"color-2-5":(s+1)%5==3?"color-3":""),style:{fontSize:(0,h.transformPx2Rem)(i.imgHeight,320),fontStyle:"normal"}}),o.custom&&g.default.createElement("img",{src:o.custom,style:{width:(0,h.transformPx2Rem)(i.imgHeight,320),height:i.imgHeight}}),o.count&&g.default.createElement("span",{className:"orderCount",style:{left:"calc("+i.imgHeight+" - .14rem)",backgroundColor:n.theme}},o.count),"myMessage"==o.router&&a.msgUnreadCount&&0!=a.msgUnreadCount.totalCount&&g.default.createElement("span",{className:"message-unread-count",style:{left:"calc("+i.imgHeight+" - .14rem)",backgroundColor:n.theme}},a.msgUnreadCount.totalCount),o.action&&"myFormMessage"===o.action.inner_page_link&&a.msgUnreadCount&&0!=a.msgUnreadCount.msgCount[3].unread_count&&g.default.createElement("span",{className:"message-unread-count",style:{left:"calc("+i.imgHeight+" - .14rem)",backgroundColor:n.theme}},a.msgUnreadCount.msgCount[3].unread_count)),g.default.createElement("span",{style:{fontSize:(0,h.transformPx2Rem)(i["font-size"],320),textDecoration:i["text-decoration"]||""}},o.name))),2==i.mode&&g.default.createElement("div",{className:"mode-two",onClick:e[o.bindtap],"data-router":o.router,"data-open-verify-phone":o.openVerifyPhone,"data-event-params":JSON.stringify(o.param),style:{height:i.height,lineHeight:i.height}},g.default.createElement("div",{style:{position:"relative",width:(0,h.transformPx2Rem)(i.imgHeight,320),height:(0,h.transformPx2Rem)(i.imgHeight,320),margin:"0 auto",display:"inline-block",verticalAlign:"middle",marginLeft:".40rem",marginRight:".20rem"}},!o.custom&&g.default.createElement("div",{className:"ico-moon "+o.icon+" "+("2"==t.customFeature.iconType?"":(s+1)%5==1||(s+1)%5==4?"color-1-4":(s+1)%5==2||(s+1)%5==0?"color-2-5":(s+1)%5==3?"color-3":""),style:{fontStyle:"normal",lineHeight:(0,h.transformPx2Rem)(i.imgHeight,320),fontSize:(0,h.transformPx2Rem)(i.imgHeight,320),width:(0,h.transformPx2Rem)(i.imgHeight,320),height:(0,h.transformPx2Rem)(i.imgHeight,320),verticalSlign:"top"}}),o.custom&&g.default.createElement("img",{src:o.custom,style:{width:(0,h.transformPx2Rem)(i.imgHeight,320),height:(0,h.transformPx2Rem)(i.imgHeight,320),verticalAlign:"top"}}),o.count&&g.default.createElement("span",{className:"orderCount",style:{left:"calc("+i.imgHeight+" - .14rem)",backgroundColor:n.theme}},o.count),"myMessage"==o.router&&a.msgUnreadCount&&0!=a.msgUnreadCount.totalCount&&g.default.createElement("span",{className:"message-unread-count",style:{left:"calc("+i.imgHeight+" - .14rem)",backgroundColor:n.theme}},a.msgUnreadCount.totalCount),o.action&&"myFormMessage"===o.action.inner_page_link&&a.msgUnreadCount&&0!=a.msgUnreadCount.msgCount[3].unread_count&&g.default.createElement("span",{className:"message-unread-count",style:{left:"calc("+i.imgHeight+" - .14rem)",backgroundColor:n.theme}},a.msgUnreadCount.msgCount[3].unread_count)),g.default.createElement("span",{style:{verticalAlign:"middle",fontSize:(0,h.transformPx2Rem)(i["font-size"],320)}},o.name)))})))}))}}]),t}(g.default.Component),E=function(){var e=this;this.init=function(t,a){var n={},o=a.state.eles[t].content;_.appMethod.sendRequest({url:"/index.php?r=AppNotify/GetNotifyMsgUnreadCount",data:{types:"3,5,6,16"},success:function(e){var n={},o={totalCount:0,msgCount:e.data};Object.keys(e.data).forEach(function(t){o.totalCount+=3==t?0:+e.data[t].unread_count}),o.totalCount>99&&(o.totalCount="99+"),n["eles["+t+"].userData.msgUnreadCount"]=o,a.setData(n)}});for(var s=[],r=0;r<24;r++){var c={requested:!1,index:[]};s.push(c)}for(var l in o)for(var d in o[l].blockArr){var u=o[l].blockArr[d];if("custom"===u.actionType){var m=u.action;m.action=u.action.actionType,u.bindtap="tapEventCommonHandler",u.param=m}else!function(){var n=new RegExp("(^|&)goodsType=([^&]*)(&|$)"),o=new RegExp("(^|&)currentIndex=([^&]*)(&|$)"),r=u.param&&u.param.match(n)?+u.param.match(n)[2]:-1,c=u.param&&u.param.match(o)?+u.param.match(o)[2]:-1;r>=0&&r<4&&s[r].index.push([l,d,c]),"myOrder"!==u.router||-1==r||s[r].requested||(s[r].requested=!0,setTimeout(function(){e.userCenterOrderCount({goodsType:r},function(e){var n={};e=[0].concat((0,i.default)(e));for(var o in s[r].index){var c=s[r].index[o];n["eles["+t+"].content["+c[0]+"]blockArr["+c[1]+"]count"]=+e[c[2]]||""}a.setData(n)})},0))}()}n["eles["+t+"].content"]=o,a.setData(n)},this.userCenterOrderCount=function(e,t){_.appMethod.sendRequest({hideLoading:!0,url:"/index.php?r=AppShop/countStatusOrder",data:{parent_shop_app_id:_.appMethod.getAppId(),goods_type:e.goodsType},method:"post",success:function(e){0==e.status&&t(e.data)}})},this.userCenterTurnToPage=function(e){_.appMethod.userCenterTurnToPage(e)},this.tapEventCommonHandler=function(e){_.appMethod.tapEventCommonHandler(e)}};t.default=y},function(e,t){},function(e,t,a){"use strict";function n(e){var t=e.data;e.detailData,e.dynamicData,t.customFeature;return React.createElement("div",{className:"custom-component custom-top-nav"})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;a(6),a(15)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(13),i=n(o),s=a(0),r=n(s),c=a(3),l=n(c),d=a(1),u=n(d),m=a(2),p=n(m),f=a(4),g=n(f),h=a(5),v=a(12),_=n(v),y=a(6);a(719);var E=function(e){function t(e){(0,r.default)(this,t);var a=(0,u.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));b.call(a);var n=e.index,o=h.appMethod.getAppCurrentPage();return a.init(n,o),a}return(0,p.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this,t=this.props.data,a=t.customFeature,n=t.goods_data,o=a.mode,i=a.lineHeight,s=a.margin,r=a.lineBackgroundColor,c=a.imgWidth,l=a.imgHeight,d=a.isShowPresaleStatus,u=a.isShowVirtualPrice,m=a.isShowSales,p=a.isShowCountdown,f={height:(0,y.transformPx2Rem)(i,320),marginBottom:(0,y.transformPx2Rem)(s,320),background:r},h={width:(0,y.transformPx2Rem)(c,320),height:(0,y.transformPx2Rem)(l,320)};return g.default.createElement("div",{className:"custom-component presell"},function(){return g.default.createElement(g.default.Fragment,null,0==o&&g.default.createElement("div",{className:"presell-list list"},n.map(function(t){return g.default.createElement("div",{className:"presell-goods-item isRelative",key:t.form_data.id,style:f,"data-goodsid":t.form_data.goods_id,"data-activityid":t.form_data.group_buy_activity_id,"data-status":t.status,"data-presellstatus":t.status,onClick:4!=t.status?e.gotoPresellDetail:e.showOverTips},g.default.createElement("div",null,g.default.createElement("div",{className:"presell-image-wrap",style:h},g.default.createElement("img",{src:t.form_data.cover})),g.default.createElement("div",{className:"presell-content-wrap"},g.default.createElement("div",{className:"presell-title"},d&&g.default.createElement("div",{className:"presell-logo "+(0==t.status?"presell-not-begun":"pay-presell")},"预售"),t.form_data.title),g.default.createElement("div",{className:"presell-detail-msg"},g.default.createElement("div",{className:"first-line"},g.default.createElement("div",{className:"presell-price"},g.default.createElement("label",{className:"presell-price",style:{color:0==t.status?"#8262E8":"#FF4D4F"}},"¥",g.default.createElement("span",{className:"presell-price-int"},t.form_data._presell_goods.presell_current_price)),u&&g.default.createElement("span",{className:"presell-origin-price"},"¥",t.form_data.price)),g.default.createElement("div",{className:"presell-status-btn"},0==t.status&&g.default.createElement("label",{className:"presell-not-begun"},"未开售"),3==t.status&&g.default.createElement("label",{className:"pay-presell","data-paramstr":t.param_str,"data-goodsid":t.form_data.goods_id,"data-model":t.model_length,onClick:function(t){e.payPresell(t),t.stopPropagation()}},"付定金"),0!=t.status&&3!=t.status&&g.default.createElement("label",{className:"over-presell"},"已结束"))),g.default.createElement("div",{className:"second-line"},m&&g.default.createElement(g.default.Fragment,null,0!=t.status?g.default.createElement("span",{className:"presell-view-count"},"已售",t.form_data._presell_goods.bargain_payment_count,"件"):g.default.createElement("span",{className:"presell-view-count"},t.form_data._presell_goods.presell_goods_view_count,"人浏览")),p&&4!=t.status&&g.default.createElement(g.default.Fragment,null,0==t.status?g.default.createElement("span",{className:"pull-right",style:{color:"#8262E8"}},"距开始：",t.downCount.days,"天",t.downCount.hours,":",t.downCount.minutes,":",t.downCount.seconds):g.default.createElement("span",{className:"pull-right",style:{color:"#FF4D4F"}},"距结束：",t.downCount.days,"天",t.downCount.hours,":",t.downCount.minutes,":",t.downCount.seconds)))))))})))}(),function(){var t={1:"opposite",2:"swiper",3:"bigPicture"}[o],a="";return 1!=o&&2!=o||(a=m&&u?"row":"col"),g.default.createElement(g.default.Fragment,null,(1==o||2==o||3==o)&&g.default.createElement("div",{className:"presell-list "+t},n.map(function(t){return g.default.createElement("div",{className:"presell-goods-item isRelative",key:t.form_data.id,style:f,"data-goodsid":t.form_data.goods_id,"data-activityid":t.form_data.activity_id,"data-status":t.status,"data-presellstatus":t.status,onClick:4!=t.status?e.gotoPresellDetail:e.showOverTips},g.default.createElement("div",{className:"presell-image-wrap",style:h},g.default.createElement("img",{src:t.form_data.cover}),p&&4!=t.status&&g.default.createElement("div",{className:"count-down "+(0==t.status?"presell-not-begun":"pay-presell")},0==t.status?g.default.createElement(g.default.Fragment,null,"距开始",g.default.createElement("span",null,t.downCount.days,"天"),g.default.createElement("span",null,t.downCount.hours)," :",g.default.createElement("span",null,t.downCount.minutes)," :",g.default.createElement("span",null,t.downCount.seconds)):g.default.createElement(g.default.Fragment,null,"距结束",g.default.createElement("span",null,t.downCount.days,"天"),g.default.createElement("span",null,t.downCount.hours)," :",g.default.createElement("span",null,t.downCount.minutes)," :",g.default.createElement("span",null,t.downCount.seconds)))),g.default.createElement("div",{className:"presell-content-wrap"},g.default.createElement("div",{className:"presell-title"},d&&g.default.createElement("div",{className:"presell-logo "+(0==t.status?"presell-not-begun":"pay-presell")},"预售"),t.form_data.title),g.default.createElement("div",{className:"presell-detail-msg "+a},m&&u?g.default.createElement(g.default.Fragment,null,(1==o||2==o)&&g.default.createElement(g.default.Fragment,null,g.default.createElement("div",{className:"presell-first-line"},g.default.createElement("div",{className:"presell-price"},g.default.createElement("label",{className:"presell-price",style:{color:0==t.status?"#8262E8":"#FF4D4F"}},"¥",g.default.createElement("span",{className:"presell-price-int"},t.form_data._presell_goods.presell_current_price)),u&&g.default.createElement("span",{className:"presell-origin-price"},"¥",t.form_data.price))),g.default.createElement("div",{className:"presell-second-line"},0!=t.status?g.default.createElement("div",{className:"presell-view-count"},"已售",t.form_data._presell_goods.bargain_payment_count,"件"):g.default.createElement("div",{className:"presell-view-count"},t.form_data._presell_goods.presell_goods_view_count,"人浏览"),g.default.createElement("div",{className:"presell-status-btn"},0==t.status&&g.default.createElement("label",{className:"presell-not-begun"},"未开售"),3==t.status&&g.default.createElement("label",{className:"pay-presell","data-paramstr":t.param_str,"data-goodsid":t.form_data.goods_id,"data-model":t.model_length,onClick:function(t){e.payPresell(t),t.stopPropagation()}},"付定金"),0!=t.status&&3!=t.status&&g.default.createElement("label",{className:"over-presell"},"已结束")))),3==o&&g.default.createElement(g.default.Fragment,null,g.default.createElement("div",{className:"presell-left-line"},g.default.createElement("div",{className:"presell-price"},g.default.createElement("label",{className:"presell-price",style:{color:0==t.status?"#8262E8":"#FF4D4F"}},"¥",g.default.createElement("span",{className:"presell-price-int"},t.form_data._presell_goods.presell_current_price)),u&&g.default.createElement("span",{className:"presell-origin-price",style:{marginLeft:".1rem"}},"¥",t.form_data.price)),m&&g.default.createElement(g.default.Fragment,null,0!=t.status?g.default.createElement("div",{className:"presell-view-count"},"已售",t.form_data._presell_goods.bargain_payment_count,"件"):g.default.createElement("div",{className:"presell-view-count"},t.form_data._presell_goods.presell_goods_view_count,"人浏览"))),g.default.createElement("div",{className:"presell-right-line"},g.default.createElement("div",{className:"presell-status-btn"},0==t.status&&g.default.createElement("label",{className:"presell-not-begun"},"未开售"),3==t.status&&g.default.createElement("label",{className:"pay-presell","data-paramstr":t.param_str,"data-goodsid":t.form_data.goods_id,"data-model":t.model_length,onClick:function(t){e.payPresell(t),t.stopPropagation()}},"付定金"),0!=t.status&&3!=t.status&&g.default.createElement("label",{className:"over-presell"},"已结束"))))):g.default.createElement(g.default.Fragment,null,g.default.createElement("div",{className:"presell-left-line"},m&&0!=t.status?g.default.createElement(g.default.Fragment,null,g.default.createElement("div",{className:"presell-price",style:3==o?{display:"inline-block"}:{}},g.default.createElement("label",{className:"presell-price",style:{color:0==t.status?"#8262E8":"#FF4D4F"}},"¥",g.default.createElement("span",{className:"presell-price-int"},t.form_data._presell_goods.presell_current_price)),u&&g.default.createElement("span",{className:"presell-origin-price"},"¥",t.form_data.price)),m&&g.default.createElement(g.default.Fragment,null,0!=t.status?g.default.createElement("div",{className:"presell-view-count",style:3==o?{display:"inline-block",marginLeft:".1rem"}:{marginTop:".2rem"}},"已售",t.form_data._presell_goods.bargain_payment_count,"件"):g.default.createElement("div",{className:"presell-view-count",style:3==o?{display:"inline-block"}:{marginTop:".2rem"}},t.form_data._presell_goods.presell_goods_view_count,"人浏览"))):g.default.createElement(g.default.Fragment,null,g.default.createElement("div",{className:"presell-price",style:3==o?{display:"inline-block"}:{}},g.default.createElement("label",{className:"presell-price",style:{color:0==t.status?"#8262E8":"#FF4D4F"}},"¥",g.default.createElement("span",{className:"presell-price-int"},t.form_data._presell_goods.presell_current_price))),u&&g.default.createElement("div",{className:"presell-origin-price",style:3==o?{display:"inline-block",marginLeft:".1rem"}:{}},"¥",t.form_data.price))),g.default.createElement("div",{className:"presell-right-line"},g.default.createElement("div",{className:"presell-status-btn"},0==t.status&&g.default.createElement("label",{className:"presell-not-begun"},"未开售"),3==t.status&&g.default.createElement("label",{className:"pay-presell","data-paramstr":t.param_str,"data-goodsid":t.form_data.goods_id,"data-model":t.model_length,onClick:function(t){e.payPresell(t),t.stopPropagation()}},"付定金"),0!=t.status&&3!=t.status&&g.default.createElement("label",{className:"over-presell"},"已结束")))))))})))}())}}]),t}(g.default.Component),b=function(){var e=this;this.init=function(t,a){var n={page:1,page_size:10},o={};o["eles["+t+"].is_more"]=1,o["eles["+t+"].curpage"]=0,o["eles["+t+"].loading"]=!1,o["eles["+t+"].loadingFail"]=!1,a.setData(o),e.loadPresellList(t,n)},this.loadPresellList=function(e,t){var a=h.appMethod.getAppCurrentPage(),n={},o=a.data.eles[e],i=o.customFeature,s=i.loadingNum||10;if(0!=o.is_more&&!o.loading){if(n["eles["+e+"].loading"]=!0,n["eles["+e+"].loadingFail"]=!1,1==t.page&&(n["eles["+e+"].goods_data"]=[]),a.downcountObject&&a.downcountObject[e]&&1==t.page){var r=a.downcountObject[e];if(r&&r.length)for(var c=0;c<r.length;c++)r[c]&&r[c].clear()}a.setData(n),t.page_size=s,i.source&&"none"!=i.source&&(t.idx_arr={idx:"category",idx_value:i.source}),a.setData({loading:!0}),h.appMethod.sendRequest({url:"/index.php?r=AppPreSell/GetPreSellGoodsList",data:t,method:"post",success:function(t){if(t.data){for(var n=t.data,i=t._presell_activity,s=(i&&i.final_payment_start_time,{}),r=a.downcountObject&&a.downcountObject[e]||[],c=o.goods_data.length||0,l=0;l<n.length;l++){var d=n[l],u=void 0,m=d.form_data,p=m.server_time||Date.parse(new Date)/1e3,f=m.presell_activity_id,g=t._presell_activity[f],v=m._presell_goods,y=g&&1*g.bargain_start_time,E=null==m._presell_discount_info?[]:m._presell_discount_info[0],b=g&&1*g.bargain_end_time;d.description="",d.downCount={hours:"00",minutes:"00",seconds:"00",days:"00"},d.final_payment_start_time=_.default.formatTimeYMD(new Date(g&&1e3*g.final_payment_start_time),"MM月DD日 hh:mm");var N={goods_id:m.goods_id,activity_id:m.presell_activity_id||"",model_id:m.model_id||"",nums:1,address_id:d.address_id||"",models_text:d.model_value_str||"",models_stock:E.presell_stock,final_payment_start_time:d.final_payment_start_time||"",bargain_order_id:"",presell_status:d.presell_status||0,limit_buy:E.buy_limit_num};d.param_str=JSON.stringify(N),d.presellprice={integer:"string"==typeof v.presell_min_price&&v.presell_min_price.match(/(\S*)./)[1]?v.presell_min_price.match(/(\S*)./)[1]:v.presell_min_price,zero:"string"==typeof v.presell_min_price&&v.presell_min_price.match(/.(\S*)/)[1]?v.presell_min_price.match(/.(\S*)/)[1]:"00"},d.model_length=d.form_data.goods_model?d.form_data.goods_model.length:0,d.server_time=p,d.seckill_end_time=_.default.formatTime(new Date(1e3*b)),d.seckill_start_time=_.default.formatTime(new Date(1e3*y)),d.status=p>y?p>b?2:3:0,0==d.status?u=h.appMethod.beforeGroupDownCount(d,a,"eles["+e+"]goods_data["+(l+c)+"]"):3==d.status&&(u=h.appMethod.duringGroupDownCount(d,a,"eles["+e+"]goods_data["+(l+c)+"]")),u&&r.push(u),d.form_data.price="0.00"==m.virtual_price?E.origin_goods_price:m.virtual_price}s["eles["+e+"].goods_data"]=o.goods_data.concat(n),s["eles["+e+"].is_more"]=t.is_more,s["eles["+e+"].curpage"]=t.current_page,s["eles["+e+"].loading"]=!1,s["eles["+e+"].loadingFail"]=!1,a.downcountObject[e]=r,a.setData(s)}},fail:function(t){var n={};n["eles["+e+"].loadingFail"]=!0,n["eles["+e+"].loading"]=!1,a.setData(n)}})}},this.catchMorePresellList=function(t){var a=h.appMethod.getAppCurrentPage(),n="object"==(void 0===t?"undefined":(0,i.default)(t))?t.currentTarget.dataset.compindex:t,o=a.data.eles[n],s=o.customFeature,r=o.curpage+1;o.goods_data;if(!o.loading&&o.is_more){var c={page:r,page_size:s.loadingNum||10};e.loadPresellList(n,c)}},this.showOverTips=function(e){h.appMethod.showModal({content:"预售活动已结束"})},this.gotoPresellDetail=function(e){var t=e.currentTarget.dataset,a=h.appMethod.getAppCurrentPage(),n=a.franchiseeId,o=n?"&franchisee="+n:"";h.appMethod.turnToPage("/presell/pages/presellDetail/presellDetail?detail="+t.goodsid+o)},this.payPresell=function(e){var t=e.currentTarget.dataset,a=h.appMethod.getAppCurrentPage(),n=a.franchiseeId,o=n?"&franchisee="+n:"";if(t.model>0)h.appMethod.turnToPage("/presell/pages/presellDetail/presellDetail?detail="+t.goodsid+o);else{var i=t.paramstr,s="/presell/pages/previewPresellOrder/previewPresellOrder?param="+encodeURIComponent(i)+o;h.appMethod.turnToPage(s)}}};t.default=E},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(26),i=n(o),s=a(9),r=n(s),c=a(8),l=n(c),d=a(0),u=n(d),m=a(3),p=n(m),f=a(1),g=n(f),h=a(2),v=n(h);a(27);var _=a(4),y=n(_),E=a(6),b=a(5),N=a(11),R=a(21);a(721);var k={price:function(e,t){return(e-t).toFixed(2)},shopScore:function(e,t){return 100*(1-(t-e)/t).toFixed(2)},pxToRpx:function(e){return 2.34375*parseInt(e)/100+"rem"},parseStyle:function(e){for(var t=["width","font-size","margin-left"],a=["background-color","color","font-style","font-weight","text-decoration"],n="",o=0;o<t.length;o++){var i=t[o];e[i]&&(n+=i+":"+2.34375*parseInt(e[i])+"rpx;","height"==i&&(n+="line-height:"+2.34375*parseInt(e[i])+"rpx;"))}for(var o=0;o<a.length;o++){var i=a[o];e[i]&&(n+=i+":"+e[i]+";")}return n}},w=function(e){function t(e){(0,u.default)(this,t);var a=(0,g.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));x.call(a);var n=e.index,o=b.appMethod.getAppCurrentPage();return a.init(n,o),a}return(0,v.default)(t,e),(0,p.default)(t,[{key:"render",value:function(){var e,t=this,a=this.props.data,n=(a.customFeature,b.appMethod.isTabBarPage());return y.default.createElement("div",{className:"custom-component vertical-list"},y.default.createElement("div",{className:"verticalList-wrap",onTouchStart:this.verticalListTouchstart,onTouchMove:this.verticalListTouchmove,"data-compindex":this.props.index},!(!a.customFeature.pickUpArr.sameJourney||a.customFeature.is_together)&&y.default.createElement("div",{className:"goods-location-box",onClick:function(e){t.vlSelectGoodsSameJourney(e),e.stopPropagation()},"data-compindex":this.props.index},y.default.createElement("span",{className:"ico-moon icon-goods-location"}),y.default.createElement("span",{className:"address-box"},a.selectSameJourney?a.selectSameJourney.address_info.province.text+a.selectSameJourney.address_info.city.text+a.selectSameJourney.address_info.district.text+a.selectSameJourney.detail_address:a.currentLocationData&&a.currentLocationData.formatted_addresses&&a.currentLocationData.formatted_addresses.recommend||"暂无地址"),y.default.createElement("span",{className:"ico-moon icon-fesdown"})),!!a.customFeature.showShopInfo&&y.default.createElement("div",{className:"shopInfoHeight",hidden:a.infoHeight&&a.shopHeight,style:{overflow:"hidden"},"data-compindex":this.props.index},0==a.customFeature.mode&&y.default.createElement("div",{className:"takeout-shop-desc",style:{paddingBottom:a.customFeature.is_together?null:".16rem"}},y.default.createElement("div",{style:{display:"inline-block",verticalAlign:"top",position:"relative",overflow:"hidden"},"data-a":a.in_business_time},y.default.createElement("img",{src:a.shopInfo&&a.shopInfo.logo,style:{borderRadius:k.pxToRpx(a.customFeature.logoRadius)}}),0==a.in_business_time&&y.default.createElement("div",{className:"takeoutShopRest"},"商家休息")),y.default.createElement("div",{className:"shop-info"},y.default.createElement("div",{className:"shop-title",style:{color:a.customFeature.storeMainColor||"#000"}},y.default.createElement("span",{style:{color:a.customFeature.storeMainColor||"#000"}},a.shopInfo?a.shopInfo.title:"")),!(!a.customFeature.pickUpArr.sameJourney||a.customFeature.is_together)&&y.default.createElement("div",{className:"shop-send",style:{marginBottom:".08rem"}},"起送¥",a.config_data&&(1==a.config_data.set_deliver_area_type?a.config_data.deliver_rule_data.base_min_deliver_price:a.config_data.min_deliver_price),y.default.createElement("span",{style:{margin:"0 .1rem",color:"#E5E5E5"}},"|"),"配送费¥",a.config_data&&(1==a.config_data.set_deliver_area_type?a.config_data.deliver_rule_data.base_deliver_fee:a.config_data.deliver_fee),y.default.createElement("span",{style:{margin:"0 .1rem",color:"#E5E5E5"}},"|"),a.config_data&&(1==a.config_data.set_deliver_area_type?a.config_data.deliver_rule_data.base_deliver_time:a.config_data.deliver_time),"分钟送达"),y.default.createElement("div",{className:"shop-adress",style:{color:a.customFeature.storeMainColor||"#000"}},y.default.createElement("span",{style:{color:a.customFeature.storeMainColor||"#000"}},"店铺地址：",a.shopInfo?a.shopInfo.address_detail:"")))),1==a.customFeature.mode&&y.default.createElement("div",{className:"takeout-shop-desc1"},y.default.createElement("div",{className:"takeout-shop-bgPic",style:{opacity:a.customFeature.style.opacity,background:"0"==a.customFeature.backgroundType?a.customFeature.style["background-color"]:a.customFeature.style["background-image"],backgroundSize:"100%"}}),y.default.createElement("div",{className:"shop-info shopInfo1"},y.default.createElement("div",{className:"shop-title",style:{color:a.customFeature.storeMainColor||"#000"}},y.default.createElement("span",{style:{color:a.customFeature.storeMainColor||"#000"}},a.shopInfo?a.shopInfo.title:"")),!(!a.customFeature.pickUpArr.sameJourney||a.customFeature.is_together)&&y.default.createElement("div",{className:"shop-send",style:{marginBottom:".12rem"}},"起送¥",a.config_data&&1==a.config_data.set_deliver_area_type?a.config_data.deliver_rule_data.base_min_deliver_price:a.config_data?a.config_data.min_deliver_price:"",y.default.createElement("span",{style:{margin:"0 .1rem",color:"#E5E5E5"}},"|"),"配送费¥",a.config_data&&1==a.config_data.set_deliver_area_type?a.config_data.deliver_rule_data.base_deliver_fee:a.config_data?a.config_data.deliver_fee:"",y.default.createElement("span",{style:{margin:"0 .1rem",color:"#E5E5E5"}},"|"),a.config_data&&1==a.config_data.set_deliver_area_type?a.config_data.deliver_rule_data.base_deliver_time:a.config_data?a.config_data.deliver_time:"","分钟送达"),y.default.createElement("div",{className:"shop-adress",style:{color:a.customFeature.storeMainColor||"#000"}},y.default.createElement("span",{style:{color:a.customFeature.storeMainColor||"#000"}},"店铺地址：",a.shopInfo?a.shopInfo.address_detail:""))),y.default.createElement("div",{className:"shop-info-cover"},y.default.createElement("img",{src:a.shopInfo&&a.shopInfo.logo,style:{borderRadius:k.pxToRpx(a.customFeature.logoRadius)}}))),2==a.customFeature.mode&&y.default.createElement("div",{className:"takeout-shop-desc2"},y.default.createElement("div",{className:"takeout-shop-bgPic",style:{opacity:a.customFeature.style.opacity,backgroundColor:"0"==a.customFeature.backgroundType?a.customFeature.style["background-color"]:null,backgroundImage:"0"!=a.customFeature.backgroundType?a.customFeature.style["background-image"]:null,backgroundSize:"100%"}}),y.default.createElement("div",{className:"shop-info shopInfo"},y.default.createElement("div",{className:"shop-title",style:{color:a.customFeature.storeMainColor||"#000"}},y.default.createElement("span",{style:{color:a.customFeature.storeMainColor||"#000"}},a.shopInfo?a.shopInfo.title:"")),!(!a.customFeature.pickUpArr.sameJourney||a.customFeature.is_together)&&y.default.createElement("div",{className:"shop-send",style:{marginBottom:".12rem"}},"起送¥",a.config_data&&1==a.config_data.set_deliver_area_type?a.config_data.deliver_rule_data.base_min_deliver_price:a.config_data?a.config_data.min_deliver_price:"",y.default.createElement("span",{style:{margin:"0 .1rem",color:"#E5E5E5"}},"|"),"配送费¥",a.config_data&&1==a.config_data.set_deliver_area_type?a.config_data.deliver_rule_data.base_deliver_fee:a.config_data?a.config_data.deliver_fee:"",y.default.createElement("span",{style:{margin:"0 .1rem",color:"#E5E5E5"}},"|"),a.config_data&&1==a.config_data.set_deliver_area_type?a.config_data.deliver_rule_data.base_deliver_time:a.config_data?a.config_data.deliver_time:"","分钟送达"),y.default.createElement("div",{className:"shop-adress",style:{color:a.customFeature.storeMainColor||"#000"}},y.default.createElement("span",{style:{color:a.customFeature.storeMainColor||"#000"}},"店铺地址：",a.shopInfo?a.shopInfo.address_detail:""))),y.default.createElement("div",{className:"shop-info-cover1"},y.default.createElement("img",{src:a.shopInfo&&a.shopInfo.logo,style:{borderRadius:k.pxToRpx(a.customFeature.logoRadius)}}))),!(2==a.customFeature.mode||a.customFeature.is_together)&&y.default.createElement("div",{className:"cutoffLine",style:{height:".20rem"}})),!!a.customFeature.is_together&&y.default.createElement("div",{className:"user_list"},y.default.createElement("div",{className:"table_user_info"},a.user_list&&a.user_list.map(function(e,t){return y.default.createElement("div",{key:t,className:"cover_thumb",style:{zIndex:a.user_list.length-t,marginLeft:0===t?"0rem":"-.20rem"}},y.default.createElement("img",{src:e.cover_thumb}))}),y.default.createElement("div",null,y.default.createElement("span",null,a.user_list.length,"人正在选购中"))),2!=a.customFeature.mode&&y.default.createElement("div",{className:"cutoffLine",style:{height:".20rem"}})),!a.showSearch&&y.default.createElement("div",{className:"waimai-goods-evaluate-search"},y.default.createElement("div",{style:{width:a.customFeature.isShowSearch?"25%":"33%"}},y.default.createElement("div",{"data-index":"1","data-compindex":this.props.index,onClick:function(e){t.verticalListChangeEvaluate(e),e.stopPropagation()},className:1==a.selected?"selected":""},"商品")),y.default.createElement("div",{style:{width:a.customFeature.isShowSearch?"25%":"33%"}},y.default.createElement("div",{className:2==a.selected?"selected":"","data-index":"2","data-compindex":this.props.index,onClick:function(e){t.verticalListChangeEvaluate(e),e.stopPropagation()}},"评价")),y.default.createElement("div",{style:{width:a.customFeature.isShowSearch?"25%":"33%"}},y.default.createElement("div",{className:3==a.selected?"selected":"","data-index":"3","data-compindex":this.props.index,onClick:function(e){t.verticalListChangeEvaluate(e),e.stopPropagation()}},"店铺")),!!a.customFeature.isShowSearch&&y.default.createElement("div",{className:"waimai-list-search"},y.default.createElement("div",{onClick:this.verticalListShowGoodsSearch,"data-compindex":this.props.index},y.default.createElement("label",{className:"ico-moon icon-waimai-search"}),y.default.createElement("span",null,"搜索")))),!!a.showSearch&&y.default.createElement("div",{className:"waimai-goods-evaluate-search-mode2"},y.default.createElement("div",{className:"ico-moon icon-leftarrow",onClick:this.verticalListHideGoodsSearch,"data-compindex":this.props.index}),y.default.createElement("div",{className:"waimai-goods-search-input"},y.default.createElement("label",{className:"ico-moon icon-waimai-search",style:{float:"left"}}),!a.hideSearchInput&&y.default.createElement("input",{placeholder:"请输入商品名称",onInput:this.verticalListBindSearchTitle,onKeyDown:function(e){13===e.keyCode&&t.verticalListSearchByTitle(e)},"data-compindex":this.props.index})),y.default.createElement("div",{className:"evaluate-search-button",onClick:this.verticalListSearchByTitle,"data-compindex":this.props.index},"搜索")),!a.showSearch&&1==a.selected&&y.default.createElement("div",{className:"element waimai waimai-container-wrap",style:(0,l.default)({},(0,E.convertStyleData)(a.style),{height:"calc("+a.heightPx+"px "+(a.infoHeight?"":"- "+(a.shopHeight||0)+"px")+" - .68rem - .76rem "+(a.customFeature.is_together?"- .52rem":"- 0rem")+" "+(n?" - .98rem":"")+")"}),"data-compindex":this.props.index},y.default.createElement(N.ScrollView,{className:"typeList","scroll-y":!0,style:{width:"1.52rem",height:"100%",maxWidth:"1.52rem"}},a.content&&a.content.map(function(e,n){return y.default.createElement("div",{key:n,className:"waimaiCategory",style:(0,l.default)({},(0,E.convertStyleData)(a.customFeature.leftSpan),{padding:".32rem 0",backgroundColor:a.customFeature.selected==n?a.customFeature.selectedBackgroundColor:(0,E.convertStyleData)(a.customFeature.leftSpan).backgroundColor,color:a.customFeature.selected==n?a.customFeature.selectedColor:(0,E.convertStyleData)(a.customFeature.leftSpan).color,borderLeft:a.customFeature.selected==n?".08rem solid #ff7100":"",textAlign:a.customFeature.typeLeft&&"px"!=a.customFeature.typeLeft?k.pxToRpx(a.customFeature.typeLeft):"",maxWidth:"1.52rem"}),onClick:function(e){t.verticalListClickCategory(e),e.stopPropagation()},"data-index":n,"data-id":e.source,"data-compindex":t.props.index,"data-param":a.pagination&&JSON.stringify(a.pagination["category"+e.source].param),"data-cateindex":n},!!+(e.pic&&0==a.customFeature.directionLeft&&a.customFeature.isShowListIcon&&+a.customFeature.databind||e.pic&&0==a.customFeature.directionLeft&&!+a.customFeature.databind)&&y.default.createElement("img",{src:e.pic,style:{display:"inline-block",verticalAlign:"middle",marginRight:".10rem",width:a.customFeature.typeImgWidth?k.pxToRpx(a.customFeature.typeImgWidth):".30rem",height:a.customFeature.typeImgWidth?k.pxToRpx(a.customFeature.typeImgWidth):".30rem",borderRadius:k.pxToRpx(a.customFeature.iconRadius)}}),y.default.createElement("span",{className:"waimai-cate-text"},e.text),!!+(e.pic&&1==a.customFeature.directionLeft&&a.customFeature.isShowListIcon&&+a.customFeature.databind||e.pic&&1==a.customFeature.directionLeft&&!+a.customFeature.databind)&&y.default.createElement("img",{src:e.pic,style:{display:"inline-block",verticalAlign:"middle",marginLeft:".10rem",width:k.pxToRpx(a.customFeature.typeImgWidth),height:k.pxToRpx(a.customFeature.typeImgWidth),borderRadius:k.pxToRpx(a.customFeature.iconRadius)}}))}),y.default.createElement("div",{style:{height:"1.11rem"}})),!(!a.customFeature.loadAllData&&"0"!=a.customFeature.loadAllData)&&y.default.createElement("div",{className:"waimai-shoppingList",style:{left:"1.52rem",width:"calc(100% - 1.52rem)",display:"inline-block",verticalAlign:"top",height:"100%",minWidth:"calc(100% - 1.52rem)"}},y.default.createElement("div",null,!!("top"===a.scrollTopLoading&&a.customFeature.selected>0)&&y.default.createElement("span",{style:{height:"2.00rem",lineHeight:"2.00rem",textAlign:"center",color:"#999",fontSize:".24rem",display:"block"}},"上滑查看上一类")),a.content&&a.content.map(function(e,n){var o;return n==a.customFeature.selected&&y.default.createElement(N.ScrollView,(o={key:n,className:"waimaigoodslist"},(0,r.default)(o,"key",n),(0,r.default)(o,"style",{left:"1.52rem",verticalAlign:"top",height:"100%"}),(0,r.default)(o,"scroll-into-view",a.scrollId),(0,r.default)(o,"scroll-y",!(a.customFeature.showShopInfo&&!a.infoHeight&&0==a.customFeature.selected)),(0,r.default)(o,"data-compindex",t.props.index),(0,r.default)(o,"data-curpage",a.curpage),(0,r.default)(o,"data-categoryid",e.source),(0,r.default)(o,"data-param",a.pagination&&JSON.stringify(a.pagination["category"+e.source].param)),(0,r.default)(o,"bindscrolltolower",t.verticalListStyleScrollFunc),(0,r.default)(o,"scroll-top",a.scrollTop),(0,r.default)(o,"bindscrolltoupper",t.verticalListStyleScrollTop),(0,r.default)(o,"upper-threshold",".20rem"),(0,r.default)(o,"lower-threshold",".50rem"),(0,r.default)(o,"bindtouchstart",t.scrollStart),(0,r.default)(o,"bindtouchmove",t.scrollMove),(0,r.default)(o,"bindtouchend",t.scrollEnd),o),y.default.createElement("div",{className:"takeoutCategory","data-source":e.source},e.text,"1"==a.customFeature.listType&&y.default.createElement("div",{className:"price",onClick:t.sortVerticalList,"data-compindex":t.props.index,"data-curpage":a.curpage,"data-categoryid":e.source,"data-param":a.pagination&&JSON.stringify(a.pagination["category"+e.source].param),"data-sort_key":"price","data-direction":a.categorySort["category"+e.source]&&a.categorySort["category"+e.source].sort_direction},y.default.createElement("span",null,"价格"),y.default.createElement("label",{className:"ico-moon icon-news-up",style:{color:a.categorySort["category"+e.source]&&1==a.categorySort["category"+e.source].sort_direction&&"price"==a.categorySort["category"+e.source].sortKey?"#666":"#ccc"}}),y.default.createElement("label",{className:"ico-moon icon-news-down",style:{color:a.categorySort["category"+e.source]&&0==a.categorySort["category"+e.source].sort_direction&&"price"==a.categorySort["category"+e.source].sortKey?"#666":"#ccc"}})),"1"==a.customFeature.listType&&y.default.createElement("div",{className:"sales",onClick:t.sortVerticalList,"data-compindex":t.props.index,"data-curpage":a.curpage,"data-categoryid":e.source,"data-param":a.pagination&&JSON.stringify(a.pagination["category"+e.source].param),"data-sort_key":"sales","data-direction":a.categorySort["category"+e.source]&&a.categorySort["category"+e.source].sort_direction},y.default.createElement("span",null,"销量"),y.default.createElement("label",{className:"ico-moon icon-news-up",style:{color:a.categorySort["category"+e.source]&&1==a.categorySort["category"+e.source].sort_direction&&"sales"==a.categorySort["category"+e.source].sortKey?"#666":"#ccc"}}),y.default.createElement("label",{className:"ico-moon icon-news-down",style:{color:a.categorySort["category"+e.source]&&0==a.categorySort["category"+e.source].sort_direction&&"sales"==a.categorySort["category"+e.source].sortKey?"#666":"#ccc"}}))),a.show_goods_data&&a.show_goods_data["category"+e.source]&&a.show_goods_data["category"+e.source].map(function(n,o){return y.default.createElement(y.default.Fragment,{key:o},"0"==a.customFeature.listArrange&&y.default.createElement("div",{className:"waimaigoods-list-item list-item"},!(!a.customFeature.showIntegral&&"1"===n.integral)&&y.default.createElement("div",{"data-id":n.id,"data-compindex":t.props.index},y.default.createElement("div",{className:"inner-content"},y.default.createElement("img",{className:"waimai-img",src:n.cover,onClick:t.showVerticalListGoodsDetail,"data-id":n.id,"data-compindex":t.props.index,"data-index":o,"data-category":e.source}),a.customFeature.isShowStock&&n.stock<6&&y.default.createElement("label",{className:"goods-stock"},"仅剩",n.stock,"件"),!!+n.corner_mark&&y.default.createElement("img",{className:"new-goods",src:n.corner_url}),y.default.createElement("div",{className:"waimai-title",style:{width:"initial"}},y.default.createElement("div",{className:"waimai-title-text",onClick:t.showVerticalListGoodsDetail,"data-id":n.id,"data-compindex":t.props.index,"data-index":o,"data-category":e.source},n.max_can_use_integral>0&&y.default.createElement("span",{className:"jifen"},"积"),y.default.createElement("span",{className:"text"},n.title),!(!n.vipGoods||!a.customFeature.vipShopping)&&y.default.createElement("span",{className:"vip-goods"},"会员购")),y.default.createElement("div",{className:"waimai-title-dec"},!1!==a.customFeature.sale?y.default.createElement("span",null,"销量：",n.sales):y.default.createElement("span",null)),!!n.is_vip_goods&&y.default.createElement("div",{className:"vip_goods_price"},y.default.createElement("span",{style:{marginRight:".08rem"}},y.default.createElement("span",{style:{fontSize:".24rem",fontWeight:"normal"}},"¥"),n.vip_price),y.default.createElement("span",{className:"vip_goods_tips"},"会员价")),y.default.createElement("div",{className:"waimai-item-bottom",style:{paddingTop:0,marginTop:n.is_vip_goods?".26rem":".60rem"}},y.default.createElement("span",{className:"waimai-price-per"},y.default.createElement("span",{style:{fontSize:".24rem",fontWeight:"normal"}},"¥"),n.price),!(!a.customFeature.isShowVirtualPrice||!n.virtual_price||"0.00"==n.virtual_price)&&y.default.createElement("span",{style:{textDecoration:"line-through",fontSize:".22rem",color:"#999"}},"¥",n.virtual_price),y.default.createElement("label",{className:"waimai-number-change"},!(!(a.goods_data_list[n.id].totalNum>0)||a.customFeature.is_together)&&y.default.createElement("label",{className:"waimai-count-minus","data-goodsid":n.id,onClick:function(e){t.verticalListListMinus(e),e.stopPropagation()},"data-stock":a.goods_data_list[n.id].stock,"data-compindex":t.props.index,"data-model":n.goods_model,"data-is-in-business":n.is_in_business_time}),a.goods_data_list[n.id].totalNum>0&&y.default.createElement("span",{className:"waimai-number"},a.goods_data_list[n.id].totalNum),!n.goods_model&&y.default.createElement("label",{className:"waimai-count-plus "+(a.goods_data_list[n.id].totalNum>=a.goods_data_list[n.id].stock?"disabled":""),"data-goodsid":n.id,onClick:function(e){t.verticalListListPlus(e),e.stopPropagation()},"data-stock":a.goods_data_list[n.id].stock,"data-compindex":t.props.index,"data-model":n.goods_model,"data-is-in-business":n.is_in_business_time}),!!n.goods_model&&y.default.createElement("label",{className:"waimai-count-model-plus","data-goodsid":n.id,onClick:function(e){t.verticalListListPlus(e),e.stopPropagation()},"data-stock":a.goods_data_list[n.id].stock,"data-compindex":t.props.index,"data-model":n.goods_model,"data-is-in-business":n.is_in_business_time},"选规格"))))))),"1"==a.customFeature.listArrange&&y.default.createElement("div",{className:"waimai-list-mode2"},!(!a.customFeature.showIntegral&&"1"===n.integral)&&y.default.createElement("div",{"data-id":n.id,"data-compindex":t.props.index},y.default.createElement("div",{className:"inner-mode2-content"},y.default.createElement("div",{className:"image-content"},y.default.createElement("img",{className:"waimai-mode2-img",src:n.cover,onClick:t.showVerticalListGoodsDetail,"data-id":n.id,"data-compindex":t.props.index,"data-index":o,"data-category":e.source}),!!(a.customFeature.isShowStock&&n.stock<6)&&y.default.createElement("label",{className:"goods-stock"},"仅剩",n.stock,"件"),!!+n.corner_mark&&y.default.createElement("img",{className:"new-goods",src:n.corner_url})),y.default.createElement("div",{style:{width:"initial"},className:"waimai-title waimai-mode2-title"},y.default.createElement("div",{className:"waimai-title-mode2-text",onClick:t.showVerticalListGoodsDetail,"data-id":n.id,"data-compindex":t.props.index,"data-index":o,"data-category":e.source},n.max_can_use_integral>0&&y.default.createElement("span",{className:"jifen"},"积"),y.default.createElement("span",{className:"text"},n.title,"}"),n.vipGoods&&a.customFeature.vipShopping&&y.default.createElement("span",{className:"vip-goods"},"会员购")),y.default.createElement("div",{className:"waimai-title-mode2-dec"},!1!==a.customFeature.sale&&y.default.createElement("span",null,"销量：",n.sales)),!!n.is_vip_goods&&y.default.createElement("div",{className:"vip_goods_price"},y.default.createElement("span",{style:{marginRight:".08rem"}},y.default.createElement("span",{style:{fontSize:".24rem",fontWeight:"normal"}},"¥"),n.vip_price),y.default.createElement("span",{className:"vip_goods_tips"},"会员价")),y.default.createElement("div",{className:"waimai-item-bottom",style:{paddingTop:"0",marginTop:n.is_vip_goods?".02rem":".36rem"}},y.default.createElement("span",{className:"waimai-price-per"},y.default.createElement("span",{style:{fontSize:".24rem",fontWeight:"normal"}},"¥"),n.price),!(!a.customFeature.isShowVirtualPrice||!n.virtual_price||"0.00"==n.virtual_price)&&y.default.createElement("span",{style:{textDecoration:"line-through",fontSize:".22rem",color:"#999"}},"¥",n.virtual_price),y.default.createElement("label",{className:"waimai-number-change"},!n.goods_model&&y.default.createElement("label",{className:"waimai-count-plus "+(a.goods_data_list[n.id].totalNum>=a.goods_data_list[n.id].stock?"disabled":""),"data-goodsid":n.id,onClick:function(e){t.verticalListListPlus(e),e.stopPropagation()},"data-stock":a.goods_data_list[n.id].stock,"data-compindex":t.props.index,"data-model":n.goods_model,"data-is-in-business":n.is_in_business_time},a.goods_data_list[n.id].totalNum>0&&y.default.createElement("label",null,a.goods_data_list[n.id].totalNum)),!!n.goods_model&&y.default.createElement("label",{className:"waimai-count-model-plus","data-goodsid":n.id,onClick:function(e){t.verticalListListPlus(e),e.stopPropagation()},"data-stock":a.goods_data_list[n.id].stock,"data-compindex":t.props.index,"data-model":n.goods_model,"data-is-in-business":n.is_in_business_time},"选规格",a.goods_data_list[n.id].totalNum>0&&y.default.createElement("label",null,a.goods_data_list[n.id].totalNum)))))))))}),a.customFeature.selected!==a.content.length-1&&a.show_goods_data&&a.show_goods_data["category"+e.source]&&a.show_goods_data["category"+e.source].length>0&&y.default.createElement("div",{style:{height:"5.00rem",lineHeight:"5.00rem",textAlign:"center",color:"#999",fontSize:".24rem"}},"bottom"===a.scrollTopLoading&&0==a.pagination["category"+e.source].is_more&&y.default.createElement("span",null,"下滑查看下一分类")),a.customFeature.selected==a.content.length-1&&y.default.createElement("div",{style:{height:"2.00rem"}}),a.loading&&y.default.createElement(R.RequestStatus,{is:"requestLoading"}),!!(a.pagination&&0==a.pagination["category"+e.source].is_more&&a.show_goods_data&&a.show_goods_data["category"+e.source]&&0==a.show_goods_data["category"+e.source].length)&&y.default.createElement(R.RequestStatus,{is:"requestNone",data:{data:"暂无数据~"}}),a.loadingFail&&y.default.createElement(R.RequestStatus,{is:"requestFail",data:{refreshEvent:"verticalListStyleScrollFunc",compindex:t.props.index}}),!!(a.pagination&&0==a.pagination["category"+e.source].is_more&&a.show_goods_data&&a.show_goods_data["category"+e.source]&&a.show_goods_data["category"+e.source].length>0&&a.customFeature.selected==a.content.length-1)&&y.default.createElement(R.RequestStatus,{is:"requestAll"}))}),"1"==a.customFeature.loadAllData&&y.default.createElement("div",{style:{height:"1.11rem"}})),"1"==a.customFeature.loadAllData&&y.default.createElement("div",{className:"waimai-shoppingList",style:{left:"1.52rem",width:"calc(100% - 1.52rem)",display:"inline-block",verticalAlign:"top",height:"100%",minWidth:"calc(100% - 1.52rem)"}},y.default.createElement(N.ScrollView,{style:{height:"100%",verticalAlign:"top"},className:"waimaigoodslist","scroll-y":!0,"scroll-into-view":a.scrollInto,"scroll-with-animation":!0,onScroll:this.verticalListGoodsListScroll,"data-compindex":this.props.index},y.default.createElement("div",{className:"takeoutCategory"}),a.content&&a.content.map(function(e,n){return y.default.createElement(y.default.Fragment,{key:n},y.default.createElement("div",{id:"cate-"+n,style:{height:".38rem",paddingLeft:".20rem"}},e.text),a.loadFirstCate&&0==n&&y.default.createElement("div",{className:"firstCate",style:{height:"100%",position:"absolute",width:"100%",zIndex:"99"}},y.default.createElement(R.RequestStatus,{is:"requestLoading"})),a.show_goods_data&&a.show_goods_data["category"+e.source]&&a.show_goods_data["category"+e.source].map(function(n,o){return y.default.createElement(y.default.Fragment,{key:o},"0"==a.customFeature.listArrange&&y.default.createElement("div",{className:"waimaigoods-list-item list-item"},!(!a.customFeature.showIntegral&&"1"===n.integral)&&y.default.createElement("div",{"data-id":n.id,"data-compindex":t.props.index},y.default.createElement("div",{className:"inner-content"},y.default.createElement("img",{className:"waimai-img",src:n.cover,onClick:t.showVerticalListGoodsDetail,"data-id":n.id,"data-compindex":t.props.index,"data-index":o,"data-category":e.source}),!!(a.customFeature.isShowStock&&n.stock<6)&&y.default.createElement("label",{className:"goods-stock"},"仅剩",n.stock,"件"),!!+n.corner_mark&&y.default.createElement("img",{className:"new-goods",src:n.corner_url}),y.default.createElement("div",{style:{width:"initial"},className:"waimai-title"},y.default.createElement("div",{className:"waimai-title-text",onClick:t.showVerticalListGoodsDetail,"data-id":n.id,"data-compindex":t.props.index,"data-index":o,"data-category":e.source},n.max_can_use_integral>0&&y.default.createElement("span",{className:"jifen"},"积"),y.default.createElement("span",{className:"text"},n.title,"}"),n.vipGoods&&a.customFeature.vipShopping&&y.default.createElement("span",{className:"vip-goods"},"会员购")),y.default.createElement("div",{className:"waimai-title-dec"},!1!==a.customFeature.sale?y.default.createElement("span",null,"销量：",n.sales):y.default.createElement("span",null)),!!n.is_vip_goods&&y.default.createElement("div",{className:"vip_goods_price"},y.default.createElement("span",{style:{marginRight:".08rem"}},y.default.createElement("span",{style:{fontSize:".24rem",fontWeight:"normal"}},"¥"),n.vip_price),y.default.createElement("span",{className:"vip_goods_tips"},"会员价")),y.default.createElement("div",{className:"waimai-item-bottom",style:{paddingTop:"0",marginTop:n.is_vip_goods?".26rem":".60rem"}},y.default.createElement("span",{className:"waimai-price-per"},y.default.createElement("span",{style:{fontSize:".24rem",fontWeight:"normal"}},"¥"),n.price),!(!a.customFeature.isShowVirtualPrice||!n.virtual_price||"0.00"==n.virtual_price)&&y.default.createElement("span",{style:{textDecoration:"line-through",fontSize:".22rem",color:"#999"}},"¥",n.virtual_price),y.default.createElement("label",{className:"waimai-number-change"},!(!(a.goods_data_list[n.id].totalNum>0)||a.customFeature.is_together)&&y.default.createElement("label",{className:"waimai-count-minus","data-goodsid":n.id,onClick:function(e){t.verticalListListMinus(e),e.stopPropagation()},"data-stock":a.goods_data_list[n.id].stock,"data-compindex":t.props.index,"data-model":n.goods_model,"data-is-in-business":n.is_in_business_time}),a.goods_data_list[n.id].totalNum>0&&y.default.createElement("span",{className:"waimai-number"},a.goods_data_list[n.id].totalNum),!n.goods_model&&y.default.createElement("label",{className:"waimai-count-plus "+(a.goods_data_list[n.id].totalNum>=a.goods_data_list[n.id].stock?"disabled":""),"data-goodsid":n.id,onClick:function(e){t.verticalListListPlus(e),e.stopPropagation()},"data-stock":a.goods_data_list[n.id].stock,"data-compindex":t.props.index,"data-model":n.goods_model,"data-is-in-business":n.is_in_business_time}),!!n.goods_model&&y.default.createElement("label",{className:"waimai-count-model-plus","data-goodsid":n.id,onClick:function(e){t.verticalListListPlus(e),e.stopPropagation()},"data-stock":a.goods_data_list[n.id].stock,"data-compindex":t.props.index,"data-model":n.goods_model,"data-is-in-business":n.is_in_business_time},"选规格"))))))),"1"==a.customFeature.listArrange&&y.default.createElement("div",{className:"waimai-list-mode2"},!(!a.customFeature.showIntegral&&"1"===n.integral)&&y.default.createElement("div",{"data-id":n.id,"data-compindex":t.props.index},y.default.createElement("div",{className:"inner-mode2-content"},y.default.createElement("div",{className:"image-content"},y.default.createElement("img",{className:"waimai-mode2-img",src:n.cover,onClick:t.showVerticalListGoodsDetail,"data-id":n.id,"data-compindex":t.props.index,"data-index":o,"data-category":e.source}),!!(a.customFeature.isShowStock&&n.stock<6)&&y.default.createElement("label",{className:"goods-stock"},"仅剩",n.stock,"件"),!!+n.corner_mark&&y.default.createElement("img",{className:"new-goods",src:n.corner_url})),y.default.createElement("div",{style:{width:"initial"},className:"waimai-title waimai-mode2-title"},y.default.createElement("div",{className:"waimai-title-mode2-text",onClick:t.showVerticalListGoodsDetail,"data-id":n.id,"data-compindex":t.props.index,"data-index":o,"data-category":e.source},n.max_can_use_integral>0&&y.default.createElement("span",{className:"jifen"},"积"),y.default.createElement("span",{className:"text"},n.title,"}"),n.vipGoods&&a.customFeature.vipShopping&&y.default.createElement("span",{className:"vip-goods"},"会员购")),y.default.createElement("div",{className:"waimai-title-mode2-dec"},!1!==a.customFeature.sale&&y.default.createElement("span",null,"销量：",n.sales)),!!n.is_vip_goods&&y.default.createElement("div",{className:"vip_goods_price"},y.default.createElement("span",{style:{marginRight:".08rem"}},y.default.createElement("span",{style:{fontSize:".24rem",fontWeight:"normal"}},"¥"),n.vip_price),y.default.createElement("span",{className:"vip_goods_tips"},"会员价")),y.default.createElement("div",{className:"waimai-item-bottom",style:{paddingTop:"0",marginTop:n.is_vip_goods?".02rem":".36rem"}},y.default.createElement("span",{className:"waimai-price-per"},y.default.createElement("span",{style:{fontSize:".24rem",fontWeight:"normal"}},"¥"),n.price),!(!a.customFeature.isShowVirtualPrice||!n.virtual_price||"0.00"==n.virtual_price)&&y.default.createElement("span",{style:{textDecoration:"line-through",fontSize:".22rem",color:"#999"}},"¥",n.virtual_price),y.default.createElement("label",{className:"waimai-number-change"},!n.goods_model&&y.default.createElement("label",{className:"waimai-count-plus "+(a.goods_data_list[n.id].totalNum>=a.goods_data_list[n.id].stock?"disabled":""),"data-goodsid":n.id,onClick:function(e){t.verticalListListPlus(e),e.stopPropagation()},"data-stock":a.goods_data_list[n.id].stock,"data-compindex":t.props.index,"data-model":n.goods_model,"data-is-in-business":n.is_in_business_time},a.goods_data_list[n.id].totalNum>0&&y.default.createElement("label",null,a.goods_data_list[n.id].totalNum)),!!n.goods_model&&y.default.createElement("label",{className:"waimai-count-model-plus","data-goodsid":n.id,onClick:function(e){t.verticalListListPlus(e),e.stopPropagation()},"data-stock":a.goods_data_list[n.id].stock,"data-compindex":t.props.index,"data-model":n.goods_model,"data-is-in-business":n.is_in_business_time},"选规格",a.goods_data_list[n.id].totalNum>0&&y.default.createElement("label",null,a.goods_data_list[n.id].totalNum)))))))))}))}),y.default.createElement("div",{style:{height:"3.00rem"}})))),!!a.showSearch&&y.default.createElement("div",{className:"element waimai waimai-container-wrap searchResult","data-compindex":this.props.index},y.default.createElement(N.ScrollView,(e={"scroll-y":"true","data-compindex":this.props.index,style:{height:"calc("+a.searchHeight+"px "+(a.customFeature.is_together?"- .20rem":"- 0em")+(n?" - .98rem":"")+"})"}},(0,r.default)(e,"data-compindex",this.props.index),(0,r.default)(e,"bindscrolltolower","verticalListSearchScrollFunc"),e),a.show_goods_data.searchResult&&a.show_goods_data.searchResult.map(function(e,n){var o;return y.default.createElement("div",{key:n,"data-id":e.id,"data-compindex":t.props.index,className:"clearfix",style:{padding:".20rem"}},y.default.createElement("div",{className:"inner-content"},y.default.createElement("img",{className:"waimai-img",src:e.cover,onClick:t.showVerticalListGoodsDetail,"data-id":e.id,"data-compindex":t.props.index,"data-index":n,"data-category":e.source,"data-is_search":"search"}),!!(a.customFeature.isShowStock&&e.stock<6)&&y.default.createElement("label",{className:"goods-stock"},"仅剩",e.stock,"件"),y.default.createElement("div",{style:{width:"initial"},className:"waimai-title"},y.default.createElement("div",(o={className:"waimai-title-text",onClick:t.showVerticalListGoodsDetail,"data-id":e.id},(0,r.default)(o,"data-id",e.id),(0,r.default)(o,"data-compindex",t.props.index),(0,r.default)(o,"data-index",n),(0,r.default)(o,"data-category",e.source),(0,r.default)(o,"data-is_search","search"),o),e.max_can_use_integral>0&&y.default.createElement("span",{className:"jifen"},"积"),y.default.createElement("span",{className:"text"},e.title),e.vipGoods&&a.customFeature.vipShopping&&y.default.createElement("span",{className:"vip-goods"},"会员购")),y.default.createElement("div",{className:"waimai-title-dec"},!1!==a.customFeature.sale?y.default.createElement("span",null,"销量：",e.sales):y.default.createElement("span",null)),!!e.is_vip_goods&&y.default.createElement("div",{className:"vip_goods_price"},y.default.createElement("span",{style:{marginRight:".08rem"}},y.default.createElement("span",{style:{fontSize:".24rem",fontWeight:"normal"}},"¥"),e.vip_price),y.default.createElement("span",{className:"vip_goods_tips"},"会员价")),y.default.createElement("div",{className:"waimai-item-bottom",style:{paddingTop:"0",marginTop:e.is_vip_goods?".0rem":".60rem"}},y.default.createElement("span",{className:"waimai-price-per"},y.default.createElement("span",{style:{fontSize:".24rem",fontWeight:"normal"}},"¥"),e.price),!(!a.customFeature.isShowVirtualPrice||!e.virtual_price||"0.00"==e.virtual_price)&&y.default.createElement("span",{style:{fontSize:".28rem",color:"#666666",textDecoration:"line-through"}},"¥",e.virtual_price),y.default.createElement("label",{className:"waimai-number-change"},!(!(a.goods_data_list[e.id].totalNum>0)||a.customFeature.is_together)&&y.default.createElement("label",{className:"waimai-count-minus","data-goodsid":e.id,onClick:function(e){t.verticalListListMinus(e),e.stopPropagation()},"data-stock":a.goods_data_list[e.id].stock,"data-compindex":t.props.index,"data-model":e.goods_model,"data-is-in-business":e.is_in_business_time}),a.goods_data_list[e.id].totalNum>0&&y.default.createElement("span",{className:"waimai-number"},a.goods_data_list[e.id].totalNum),!e.goods_model&&y.default.createElement("label",{className:"waimai-count-plus "+(a.goods_data_list[e.id].totalNum>=a.goods_data_list[e.id].stock?"disabled":""),"data-goodsid":e.id,onClick:function(e){t.verticalListListPlus(e),e.stopPropagation()},"data-stock":a.goods_data_list[e.id].stock,"data-compindex":t.props.index,"data-model":e.goods_model,"data-is-in-business":e.is_in_business_time}),!!e.goods_model&&y.default.createElement("label",{className:"waimai-count-model-plus","data-goodsid":e.id,onClick:function(e){t.verticalListListPlus(e),e.stopPropagation()},"data-stock":a.goods_data_list[e.id].stock,"data-compindex":t.props.index,"data-model":e.goods_model,"data-is-in-business":e.is_in_business_time},"选规格"))))))}),a.searchLoading&&y.default.createElement(R.RequestStatus,{is:"requestLoading"}),!!(a.pagination.searchResult&&0==a.pagination.searchResult.is_more&&a.show_goods_data.searchResult.length>0)&&y.default.createElement(R.RequestStatus,{is:"requestAll"}),!(!a.pagination.searchResult||0!=a.pagination.searchResult.is_more||0!=a.show_goods_data.searchResult.length)&&y.default.createElement(R.RequestStatus,{is:"requestNone",data:{data:"暂无数据~"}}))),!(1!=a.selected&&!a.showSearch)&&y.default.createElement("div",{className:"goods-bottom-opt",style:{bottom:n?"1.18rem":".20rem"},"data-compindex":this.props.index,onClick:function(e){t.verticalListShowShoppingCartPop(e),e.stopPropagation()}},y.default.createElement("div",{className:"shoppingcart-total-money"},y.default.createElement("div",{className:"shopping-cart-wrap"},y.default.createElement("label",{className:"ico-moon icon-fn-cart","data-compindex":this.props.index,onClick:function(e){t.verticalListShowShoppingCartPop(e),e.stopPropagation()}}),0!=a.TotalNum&&y.default.createElement("label",{className:"waimai-count"},a.TotalNum)),y.default.createElement("div",{className:"shopping-money-wrap"},0!=a.TotalPrice?y.default.createElement("div",{className:"shopping-money-price"},y.default.createElement("span",{style:{marginRight:".06rem"}},"¥"),a.TotalPrice):y.default.createElement("div",{className:"classname",style:{color:"#9b9b9d",lineHeight:".88rem"}},"请选择商品"))),y.default.createElement("div",null,y.default.createElement("button",{className:"sure-waimai-order "+(0==a.TotalNum?"disabledBtn":""),onClick:function(e){t.verticalListSettlement(e),e.stopPropagation()},"data-compindex":this.props.index},"去结算"))),!a.showSearch&&2==a.selected&&y.default.createElement("div",{className:"verticalList-shop-evaluate"},!!(a.assessList&&a.assessList.length>0||a.moreAssess)&&y.default.createElement(N.ScrollView,{style:{height:"calc("+a.heightPx+"px "+(a.infoHeight?"":"- "+(a.shopHeight||0)+"px")+" - .90rem"+(n?" - .98rem":"")+")"},"scroll-y":!0},y.default.createElement("div",{style:{width:"100%",height:".12rem",background:"#F3F3F3"}}),y.default.createElement("div",{style:{padding:".30rem",display:"flex",justifyContent:"space-between"}},y.default.createElement("div",{className:"verticalList-assess-btn "+(0==a.assessActive?"active":""),"data-active":"0","data-compindex":this.props.index,onClick:function(e){t.verticalListChangeAssessType(e),e.stopPropagation()}},"有图(",a.assessNum[4]||0,")"),y.default.createElement("div",{className:"verticalList-assess-btn "+(1==a.assessActive?"active":""),"data-active":"1","data-compindex":this.props.index,onClick:function(e){t.verticalListChangeAssessType(e),e.stopPropagation()}},"好评(",a.assessNum[1]||0,")"),y.default.createElement("div",{className:"verticalList-assess-btn "+(2==a.assessActive?"active":""),"data-active":"2","data-compindex":this.props.index,onClick:function(e){t.verticalListChangeAssessType(e),e.stopPropagation()}},"中评(",a.assessNum[2]||0,")"),y.default.createElement("div",{className:"verticalList-assess-btn "+(3==a.assessActive?"active":""),"data-active":"3","data-compindex":this.props.index,onClick:function(e){t.verticalListChangeAssessType(e),e.stopPropagation()}},"差评(",a.assessNum[3]||0,")")),a.showAssess&&a.showAssess.map(function(e,a){return y.default.createElement("div",{key:a,className:"verticalListAssessList"},y.default.createElement("img",{src:e.buyer_headimgurl}),y.default.createElement("div",{className:"assessInfoTop"},y.default.createElement("div",{className:"verticalListNickname"},y.default.createElement("span",{className:"tackoutNickText"},e.buyer_nickname),y.default.createElement("span",{className:" pull-right"},e.add_time)),y.default.createElement("div",{className:"verticalListService"},"商家服务：",y.default.createElement("label",{className:"ico-moon icon-satisfied "+(1==e.assess_info.level?"active":"")}),y.default.createElement("span",{className:1==e.assess_info.level?"active":""}," 满意"),y.default.createElement("span",{style:{color:"#9b9b9b",margin:"0 .09rem"}},"|"),y.default.createElement("label",{className:"ico-moon icon-satisfied "+(2==e.assess_info.level?"active":"")}),y.default.createElement("span",{className:2==e.assess_info.level?"active":""}," 一般"),y.default.createElement("span",{style:{color:"#9b9b9b",margin:"0 .09rem"}},"|"),y.default.createElement("label",{className:"ico-moon icon-satisfied "+(3==e.assess_info.level?"active":"")}),y.default.createElement("span",{className:3==e.assess_info.level?"active":""}," 不满意"))),y.default.createElement("div",{className:"verticalList-assess-title"},y.default.createElement("span",{className:"verticalList-assess-goodsTitle"},e.goods_info.title,"："),y.default.createElement("span",{className:"verticalList-assess-goodsContent"},e.assess_info.content)),!!e.assess_info.has_img&&y.default.createElement("div",{style:{marginLeft:".74rem"}},e.assess_info.img_arr&&e.assess_info.img_arr.map(function(a,n){return y.default.createElement("img",{key:n,"data-imgarr":e.assess_info.img_arr,"data-src":a,src:a,onClick:function(e){t.previewImage(e),e.stopPropagation()}})})))}),!!a.moreAssess&&y.default.createElement("div",{className:"getMoreAssess",onClick:this.verticalListGetMoreAssess,"data-compindex":this.props.index,"data-nextpage":a.assessCurrentPage+1},"查看更多",y.default.createElement("label",{className:"ico-moon icon-downarrow"})),!a.moreAssess&&y.default.createElement("div",{className:"getMoreAssess"},a.assessList.length?"已经到底啦":"暂无评价")),!(a.moreAssess||a.assessList&&a.assessList.length)&&y.default.createElement("div",{className:"noMoreAssess"},y.default.createElement("img",{mode:"aspectFit",src:"https://www.zhichiwangluo.com/zhichi_frontend/static/webapp/images/moreAssess.png"}),y.default.createElement("div",{className:"getMoreAssess",style:{background:"#fff"}},"暂无任何评价"))),!a.showSearch&&3==a.selected&&y.default.createElement("div",{className:"tokeout-shop-info",style:{padding:"0"}},y.default.createElement("div",{style:{fontSize:".26rem",color:"#333333"}},y.default.createElement("div",{className:"info-title",style:{fontSize:".30rem"}},"商家信息"),y.default.createElement("div",{className:"info-shopInfo"},y.default.createElement("div",{className:"info-adress",onClick:function(e){t.openVerticalListLocation(e),e.stopPropagation()},"data-name":a.shopInfo.title,"data-address":a.shopInfo.address_detail,"data-lat":a.shopInfo.latitude,"data-lng":a.shopInfo.longitude},y.default.createElement("label",{className:"ico-moon icon-fesadress"}),y.default.createElement("span",null,a.shopInfo.address_detail)),y.default.createElement("div",{onClick:function(e){b.appMethod.callPhone(e),e.stopPropagation()},"data-phone":a.shopInfo.service_phone,className:"info-takeout-phone"},y.default.createElement("label",{className:"ico-moon icon-fn-phone",style:{marginRight:"0",fontSize:".40rem",color:"#d2d2d2"}}))),y.default.createElement("div",{style:{width:"auto",overflow:"hidden",margin:"0 .26rem",padding:".26rem 0",borderBottom:".02rem solid #F3F3F3"}},y.default.createElement("label",{className:"ico-moon icon-tokeout-info",style:{float:"left",marginTop:".08rem"}}),y.default.createElement("span",{style:{width:"6.50rem",whiteSpace:"normal"}},a.shopInfo.store_desc))),!!(a.shopInfo.shop_environment&&a.shopInfo.shop_environment.length>0)&&y.default.createElement("div",{className:"cutoffLine",style:{backgroundColor:"#f3f3f3",marginBottom:"0rem",paddingBottom:"0rem",height:".16rem"}}),!!(a.shopInfo.shop_environment&&a.shopInfo.shop_environment.length>0)&&y.default.createElement("div",null,y.default.createElement("div",{className:"info-title"},"店铺风采"),y.default.createElement("div",{className:"info-mien",style:{whiteSpace:"nowrap",overflowX:"auto"}},a.shopInfo.shop_environment&&a.shopInfo.shop_environment.map(function(e,n){return y.default.createElement("img",{key:n,"data-imgarr":a.shopInfo.shop_environment,"data-src":e,src:e,onClick:function(e){t.previewImage(e),e.stopPropagation()}})})))),!!a.goodsDetailShow&&y.default.createElement("div",{className:"takeout-goods-picture","data-compindex":this.props.index},y.default.createElement("div",{style:{paddingBottom:"1.20rem"}},y.default.createElement("div",{className:"takeout-goods-pic"},y.default.createElement("label",{className:"ico-moon icon-closes","data-compindex":this.props.index,onClick:this.verticalListHideDetailPop}),a.goodsDetail.img_urls.length?y.default.createElement(i.default,{dots:!0,infinite:!0,autoplay:!0,autoplayInterval:5e3},a.goodsDetail.img_urls.map(function(e,t){return y.default.createElement("img",{key:t,src:e})})):y.default.createElement("img",{src:a.goodsDetail.cover,mode:"aspectFit"})),y.default.createElement("div",{className:"goods-info",style:{borderBottom:a.goodsDetail.description?".02rem solid #F3F3F3":"none"}},y.default.createElement("div",{className:"goods-detail-title"},y.default.createElement("span",{className:"text"},a.goodsDetail.title),a.goodsDetail.vipGoods&&a.customFeature.vipShopping&&y.default.createElement("span",{className:"vip-goods"},"会员购")),y.default.createElement("div",{className:"goods-sales-detail"},!1!==a.customFeature.sale&&y.default.createElement("span",{style:{marginRight:".16rem"}},"销量",a.goodsDetail.sales,"份")),y.default.createElement("div",{className:"waimai-title clearfix",style:{position:"relative"}},a.goodsDetail.is_vip_goods?y.default.createElement("div",{className:"goodsDetail_vip_goods"},y.default.createElement("span",{className:"detail_vip_price"},"¥",a.goodsDetail.vip_price),y.default.createElement("span",{className:"detail_vip_text"},"会员价"),y.default.createElement("span",{className:"detail_price"},"¥",a.goodsDetail.price)):y.default.createElement("span",{style:{marginRight:".18rem",color:"#FF6500",fontSize:".32rem"}},"¥",a.goodsDetail.price),a.customFeature.isShowVirtualPrice&&"0.00"!=a.goodsDetail.virtual_price&&y.default.createElement("span",{style:{color:"#666666",fontSize:".28rem",textDecoration:"line-through"}},"¥",a.goodsDetail.virtual_price),y.default.createElement("label",{className:"waimai-number-change",style:{top:"-.08rem"}},!(!(a.goods_data_list[a.goodsDetail.id].totalNum>0)||a.customFeature.is_together)&&y.default.createElement("label",{className:"waimai-count-minus","data-goodsid":a.goodsDetail.id,onClick:function(e){t.verticalListListMinus(e),e.stopPropagation()},"data-stock":a.goods_data_list[a.goodsDetail.id].stock,"data-compindex":this.props.index,"data-model":a.goodsDetail.goods_model,"data-is-in-business":a.goodsDetail.is_in_business_time}),a.goods_data_list[a.goodsDetail.id].totalNum>0&&y.default.createElement("span",{className:"waimai-number"},a.goods_data_list[a.goodsDetail.id].totalNum),!a.goodsDetail.goods_model&&y.default.createElement("label",{className:"waimai-count-plus "+(a.goods_data_list[a.goodsDetail.id].totalNum>=a.goods_data_list[a.goodsDetail.id].stock?"disabled":""),"data-goodsid":a.goodsDetail.id,onClick:function(e){t.verticalListListPlus(e),e.stopPropagation()},"data-stock":a.goods_data_list[a.goodsDetail.id].stock,"data-compindex":this.props.index,"data-model":a.goodsDetail.goods_model,"data-is-in-business":a.goodsDetail.is_in_business_time}),!!a.goodsDetail.goods_model&&y.default.createElement("label",{className:"waimai-count-model-plus","data-goodsid":a.goodsDetail.id,onClick:function(e){t.verticalListListPlus(e),e.stopPropagation()},"data-stock":a.goods_data_list[a.goodsDetail.id].stock,"data-compindex":this.props.index,"data-model":a.goodsDetail.goods_model,"data-is-in-business":a.goodsDetail.is_in_business_time},"选规格")))),!!a.goodsDetail.description&&y.default.createElement("div",{className:"goods-desc"},y.default.createElement("div",{style:{color:"#323232",fontSize:".26rem",marginBottom:".16rem"}},"商品描述"),y.default.createElement("div",{className:"rich-text",dangerouslySetInnerHTML:{__html:a.goodsDetail.des}})),a.goodsDetail.goodsAssess.count>0&&y.default.createElement("div",{className:"goods-evaluate"},y.default.createElement("div",{className:"evaluate-title"},y.default.createElement("span",null,"评价"),y.default.createElement("div",{className:"evaluate-count pull-right",style:{color:"#999999"}},a.goodsDetail.goodsAssess.count,"条评价")),a.goodsDetail.goodsAssess.data&&a.goodsDetail.goodsAssess.data.map(function(e,a){return y.default.createElement("div",{key:a,className:"evaluate-info"},y.default.createElement("div",{className:"evaluate-userInfo"},y.default.createElement("div",{className:"evaluate-userInfo-pic"},y.default.createElement("img",{src:e.buyer_headimgurl})),y.default.createElement("div",{className:"evaluate-userInfo-info"},y.default.createElement("div",{className:"evaluate-userInfo-nickname"},e.buyer_nickname),y.default.createElement("div",{className:"evaluate-userInfo-time"},e.add_time))),y.default.createElement("div",{className:"evaluate-desc"},y.default.createElement("div",{className:"assess"},e.assess_info.content)),y.default.createElement("div",{className:"evaluate-pics"},e.assess_info.i_arr&&e.assess_info.i_arr.map(function(a,n){return y.default.createElement("img",{key:n,"data-imgarr":e.assess_info.img_arr,"data-src":a,src:a,onClick:function(e){t.previewImage(e),e.stopPropagation()}})})))}),0==a.goodsDetail.goodsAssess.is_more&&y.default.createElement(R.RequestStatus,{is:"requestAll"}),1==a.goodsDetail.goodsAssess.is_more&&y.default.createElement("div",{className:"request-all","data-compindex":this.props.index,onClick:function(e){t.verticalListGetMoreGoodsAssess(e),e.stopPropagation()}},"点击加载更多")))),!!a.goodsModelShow&&y.default.createElement("div",{className:"takeout-model-choose","data-compindex":this.props.index,onClick:this.verticalListHideModelPop},y.default.createElement("div",{onClick:this.stopPropagation},y.default.createElement("div",{className:"takeout-title"},a.goods_data_list[a.modelGoodsId].model.name,y.default.createElement("div",{className:"takeout-title-close","data-compindex":this.props.index,onClick:this.verticalListHideModelPop},y.default.createElement("span",{className:"ico-moon icon-closes"}))),y.default.createElement(N.ScrollView,{style:{paddingLeft:".40rem",height:"4.84rem",width:"6.10rem"},"scroll-y":!0},a.goods_data_list[a.modelGoodsId].model.modelData&&a.goods_data_list[a.modelGoodsId].model.modelData.map(function(e,n){return y.default.createElement(y.default.Fragment,{key:n},y.default.createElement("div",{className:"",style:{paddingTop:".30rem",paddingBottom:".20rem",color:"#666",fontSize:".26rem"}},e.name,"："),y.default.createElement("div",{className:"model-btn"},e.subModelName&&e.subModelName.map(function(o,i){return y.default.createElement("span",{key:i,className:"attr-btn "+(e.subModelId[i]==a.modelIdArr[n]?"active":""),"data-id":e.subModelId[i],"data-goodsid":a.modelGoodsId,"data-index":i,"data-parentindex":n,"data-modelname":o,"data-compindex":t.props.index,onClick:function(e){t.verticalListChooseModel(e),e.stopPropagation()}},o)})))})),y.default.createElement("div",{className:"takeoutGoodsModelBtn"},y.default.createElement("span",{style:{paddingLeft:".40rem"}},y.default.createElement("span",{style:{fontSize:".24rem",fontWeight:"normal",marginRight:".10rem"}},"¥"),y.default.createElement("span",null,a.modelPrice),!!a.modelNum&&y.default.createElement("span",{style:{fontSize:".32rem",color:"#000",fontWeight:"normal"}}," (",a.modelNum,")")),!!(a.modelPrice>0&&a.isModelPrice)&&y.default.createElement("span",{className:"modle_vip_text"},"会员价"),!a.modelNum&&y.default.createElement("div",{"data-modelprice":a.modelPrice,"data-goodsid":a.clickGoodsId,"data-compindex":this.props.index,onClick:function(e){t.verticalListSureChooseModel(e),e.stopPropagation()},style:{background:a.modelChoose.length>0&&a.modelChoose.length==a.modelIdArr.length?"#ff7100":"#aaaaaa"}},a.modelChoose.length>0&&a.modelChoose.length==a.modelIdArr.length?"加入购物车":"请选择规格"),!!a.modelNum&&y.default.createElement("div",{className:"cart-btn",style:{background:"none"}},!a.customFeature.is_together&&y.default.createElement("label",{className:"takeout-count-minus",onClick:function(e){t.verticalListMinuModel(e),e.stopPropagation()},"data-modelprice":a.modelPrice,"data-goodsid":a.clickGoodsId,"data-compindex":this.props.index}),y.default.createElement("input",{type:"text",style:{width:".60rem",display:"inline-block",verticalAlign:"middle",color:"#000"},disabled:"disabled",value:a.modelNum}),y.default.createElement("label",{className:"takeout-count-plus "+((a.mdelInfo&&a.mdelInfo.totalNum)>=(a.modelInfo&&a.mdelInfo.stock)?"disabled":""),"data-modelprice":a.modelPrice,"data-goodsid":a.clickGoodsId,"data-compindex":this.props.index,onClick:function(e){t.verticalListSureChooseModel(e),e.stopPropagation()}}))))),!(!a.shoppingCartShow||a.customFeature.is_together)&&y.default.createElement("div",{className:"verticalList-shopping-carts-list","data-compindex":this.props.index,onClick:this.verticalListHideShoppingCart},y.default.createElement("div",{onClick:this.stopPropagation,style:{maxHeight:"calc("+(a.customFeature.showShopInfo?(a.heightPx+181)/2:(a.heightPx+86)/2)+"px + .76rem)",height:"auto"},className:"carts-content"},y.default.createElement("div",{className:"chosen-title"},"已选商品",!!+a.TotalNum&&y.default.createElement("div",{className:"pull-right ico-moon icon-delete",onClick:function(e){t.verticalListDeleteAllCarts(e),e.stopPropagation()},"data-compindex":this.props.index,style:{display:"inline-block",fontSize:".26rem",fontWeight:"400",color:"#333",marginRight:".50rem"}}," 清空")),0==+a.TotalNum&&y.default.createElement("div",{className:"noGoods"},"暂未选购商品"),y.default.createElement(N.ScrollView,{style:{maxHeight:"calc("+(a.customFeature.showShopInfo?(a.heightPx+181)/2-37:(a.heightPx+86)/2-37)+"px + .50rem)"},"scroll-y":!0},a.cartGoodsIdList&&a.cartGoodsIdList.map(function(e,n){return y.default.createElement(y.default.Fragment,{key:n},a.cartList[0][e]&&Object.values(a.cartList[0][e]).map(function(e,n){return y.default.createElement(y.default.Fragment,{key:n},0!=e.modelId?!!+e.num&&y.default.createElement("div",{key:n,className:"shopping-cart-list "+(0==e.in_business_time?"gray":""),style:{margin:"0 .30rem"}},y.default.createElement("div",{className:"cart-info"},y.default.createElement("div",{className:"cart-title",style:{marginTop:".30rem"}},e.gooodsName),y.default.createElement("div",{className:"cart-model"},e.modelName)),y.default.createElement("div",{className:"cart-price"},!!e.is_vip_goods&&y.default.createElement("span",{className:"cart_vip_tips"},"会员"),y.default.createElement("span",null,"¥",e.totalPrice)),y.default.createElement("div",{className:"cart-btn"},0!=e.in_business_time?y.default.createElement(y.default.Fragment,null,y.default.createElement("label",{className:"verticalList-count-minus "+(0==e.in_business_time?"disabled":""),onClick:function(e){t.verticalListCartListMinus(e),e.stopPropagation()},"data-id":e.cart_id,"data-modelid":e.modelId,"data-is-in-business":e.in_business_time,"data-compindex":t.props.index,"data-goodsid":e.id,"data-stock":e.stock,"data-index":"0","data-num":e.num,"data-price":e.price}),y.default.createElement("input",{type:"text",style:{width:".50rem",display:"inline-block"},disabled:"disabled",value:e.num}),!(a.customFeature.is_together&&0!=buyer_index)&&y.default.createElement("label",{className:"verticalList-count-plus "+(0==e.in_business_time||e.num>=e.stock?"disabled":""),onClick:function(e){t.verticalListCartListPlus(e),e.stopPropagation()},"data-modelid":e.modelId,"data-compindex":t.props.index,"data-is-in-business":e.in_business_time,"data-goodsid":e.id,"data-index":"0","data-stock":e.stock,"data-num":e.num,"data-id":e.cart_id})):y.default.createElement("span",{className:"delete-single-cart",onClick:function(e){t.deleteSingleCarts(e),e.stopPropagation()},"data-modelid":e.modelId,"data-compindex":t.props.index,"data-goodsid":e.id},"删除"))):!!+e.num&&y.default.createElement("div",{className:"shopping-cart-list",style:{margin:"0 .30rem"}},y.default.createElement("div",{className:"cart-info"},0!=e.in_business_time?y.default.createElement("div",{className:"cart-title",style:{lineHeight:"1.30rem"}},e.gooodsName):y.default.createElement(y.default.Fragment,null,y.default.createElement("div",{className:"cart-title",style:{marginTop:".30rem"}},e.gooodsName),y.default.createElement("div",{className:"cart-model"},"(不在出售时间)"))),y.default.createElement("div",{className:"cart-price"},!!e.is_vip_goods&&y.default.createElement("span",{className:"cart_vip_tips"},"会员"),y.default.createElement("span",null,"¥",e.totalPrice)),y.default.createElement("div",{className:"cart-btn"},0!=e.in_business_time?y.default.createElement(y.default.Fragment,null,y.default.createElement("label",{className:"verticalList-count-minus "+(0==e.in_business_time?"disabled":""),"data-is-in-business":e.in_business_time,onClick:function(e){t.verticalListCartListMinus(e),e.stopPropagation()},"data-modelid":e.modelId,"data-compindex":t.props.index,"data-goodsid":e.id,"data-stock":e.stock,"data-id":e.cart_id,"data-index":"0","data-price":e.price,"data-num":e.num}),y.default.createElement("input",{type:"text",style:{width:".50rem",display:"inline-block"},disabled:"disabled",value:e.num}),!(a.customFeature.is_together&&0!=buyer_index)&&y.default.createElement("label",{className:"verticalList-count-plus "+(0==e.in_business_time||e.num>=e.stock?"disabled":""),onClick:function(e){t.verticalListCartListPlus(e),e.stopPropagation()},"data-modelid":e.modelId,"data-is-in-business":e.in_business_time,"data-compindex":t.props.index,"data-goodsid":e.id,"data-stock":e.stock,"data-num":e.num,"data-index":"0","data-id":e.cart_id})):y.default.createElement("span",{className:"delete-single-cart",onClick:function(e){t.deleteSingleCarts(e),e.stopPropagation()},"data-modelid":e.modelId,"data-compindex":t.props.index,"data-goodsid":e.id},"删除"))))}))})))),!(!a.shoppingCartShow||!a.customFeature.is_together)&&y.default.createElement("div",{className:"verticalList-shopping-carts-list","data-compindex":this.props.index,onClick:this.verticalListHideShoppingCart,catchtouchmove:!0},y.default.createElement("div",{onClick:this.stopPropagation,style:{maxHeight:"calc("+(a.customFeature.showShopInfo?(a.heightPx+181)/2:(a.heightPx+86)/2)+"px + .76rem)",height:"auto"},className:"carts-content"},y.default.createElement(N.ScrollView,{style:{maxHeight:"calc("+(a.customFeature.showShopInfo?(a.heightPx+181)/2-37:(a.heightPx+86)/2-37)+"px + .50rem)"},"scroll-y":!0},a.buyer_info&&a.buyer_info.map(function(e,n){return y.default.createElement(y.default.Fragment,{key:n},y.default.createElement("div",{className:"chosen-title",style:{borderRadius:0===n?".20rem .20rem 0 0":null}},y.default.createElement("img",{src:e.cover_thumb,className:"cart_cover_thumb"}),y.default.createElement("span",{style:{verticalAlign:"middle"}},e.nickname,0===n?"（我）":""),!!a.TotalNum&&y.default.createElement("div",{className:"pull-right",onClick:function(e){t.verticalListDeleteBuyerCarts(e),e.stopPropagation()},"data-compindex":t.props.index,"data-index":n,style:{display:"inline-block",fontSize:".26rem",fontWeight:"400",color:"#333",marginRight:".50rem"}},y.default.createElement("span",{className:"ico-moon icon-delete",style:{verticalAlign:"middle"}}),y.default.createElement("span",{style:{display:"inline-block",verticalAlign:"middle",marginLeft:".06rem"}}," 清空"))),!(0!==a.cartGoodsIdList.length&&0!==a.myCartNum||0!==n)&&y.default.createElement("div",{className:"noGoods"},"暂未选购商品"),a.cartGoodsIdList&&a.cartGoodsIdList.map(function(e,o){return y.default.createElement(y.default.Fragment,{key:o},a.cartList[n][e]&&y.default.createElement("div",null,0!=item.modelId?!!+item.num&&y.default.createElement("div",{key:o,className:"shopping-cart-list "+(0==item.in_business_time?"gray":""),style:{margin:"0 .30rem"}},y.default.createElement("div",{className:"cart-info"},y.default.createElement("div",{className:"cart-title",style:{marginTop:".30rem"}},item.gooodsName),y.default.createElement("div",{className:"cart-model"},item.modelName)),y.default.createElement("div",{className:"cart-price"},!!item.is_vip_goods&&y.default.createElement("span",{className:"cart_vip_tips"},"会员"),y.default.createElement("span",null,"¥",item.totalPrice)),y.default.createElement("div",{className:"cart-btn"},0!=item.in_business_time?y.default.createElement(y.default.Fragment,null,y.default.createElement("label",{className:"verticalList-count-minus "+(0==item.in_business_time?"disabled":""),onClick:function(e){t.verticalListCartListMinus(e),e.stopPropagation()},"data-id":item.cart_id,"data-modelid":item.modelId,"data-is-in-business":item.in_business_time,"data-compindex":t.props.index,"data-goodsid":item.id,"data-stock":item.stock,"data-index":n,"data-num":item.num,"data-price":item.price}),y.default.createElement("input",{type:"text",style:{width:".50rem",display:"inline-block"},disabled:"disabled",value:item.num}),!(a.customFeature.is_together&&0!=n)&&y.default.createElement("label",{className:"verticalList-count-plus "+(0==item.in_business_time||item.num>=item.stock?"disabled":""),onClick:function(e){t.verticalListCartListPlus(e),e.stopPropagation()},"data-id":item.cart_id,"data-modelid":item.modelId,"data-compindex":t.props.index,"data-is-in-business":item.in_business_time,"data-goodsid":item.id,"data-index":n,"data-stock":item.stock,"data-num":item.num})):y.default.createElement("span",{className:"delete-single-cart",onClick:function(e){t.deleteSingleCarts(e),e.stopPropagation()},"data-modelid":item.modelId,"data-compindex":t.props.index,"data-goodsid":item.id},"删除"))):!!+item.num&&y.default.createElement("div",{className:"shopping-cart-list",style:{margin:"0 .30rem"}},y.default.createElement("div",{className:"cart-info"},0!=item.in_business_time?y.default.createElement("div",{className:"cart-title",style:{lineHeight:"1.30rem"}},item.gooodsName):y.default.createElement(y.default.Fragment,null,y.default.createElement("div",{className:"cart-title",style:{marginTop:".30rem"}},item.gooodsName),y.default.createElement("div",{className:"cart-model"},"(不在出售时间)"))),y.default.createElement("div",{className:"cart-price"},!!item.is_vip_goods&&y.default.createElement("span",{className:"cart_vip_tips"},"会员"),y.default.createElement("span",null,"¥",item.totalPrice)),y.default.createElement("div",{className:"cart-btn"},0!=item.in_business_time?y.default.createElement(y.default.Fragment,null,y.default.createElement("label",{className:"verticalList-count-minus "+(0==item.in_business_time?"disabled":""),"data-is-in-business":item.in_business_time,"data-id":item.cart_id,onClick:function(e){t.verticalListCartListMinus(e),e.stopPropagation()},"data-modelid":item.modelId,"data-compindex":t.props.index,"data-goodsid":item.id,"data-stock":item.stock,"data-index":n,"data-price":item.price,"data-num":item.num}),y.default.createElement("input",{type:"text",style:{width:".50rem",display:"inline-block"},disabled:"disabled",value:item.num}),!(a.customFeature.is_together&&0!=n)&&y.default.createElement("label",{className:"verticalList-count-plus "+(0==item.in_business_time||item.num>=item.stock?"disabled":""),onClick:function(e){t.verticalListCartListPlus(e),e.stopPropagation()},"data-id":item.cart_id,"data-modelid":item.modelId,"data-is-in-business":item.in_business_time,"data-compindex":t.props.index,"data-goodsid":item.id,"data-stock":item.stock,"data-num":item.num,"data-index":n})):y.default.createElement("span",{className:"delete-single-cart",onClick:function(e){t.deleteSingleCarts(e),e.stopPropagation()},"data-modelid":item.modelId,"data-compindex":t.props.index,"data-goodsid":item.id},"删除")))))}))})))),!!a.showSettlementMask&&y.default.createElement("div",{className:"settlement-mask"},y.default.createElement("div",{className:"settlement-box"},y.default.createElement("div",{className:"settlement-title"},"请分开结算以下商品"),a.canUsePickUpType[1]&&!!a.canUsePickUpType[1].cart_list.length&&y.default.createElement("div",{className:"settlement-type"},y.default.createElement("div",{className:"settlement-type-content"},y.default.createElement("div",null,y.default.createElement("span",{className:"settlement-type-title"},"快递商品"),y.default.createElement("span",{className:"settlement-type-express"},"配送费",a.canUsePickUpType[1].express_data&&a.canUsePickUpType[1].express_data.express_fee,"元")),y.default.createElement("div",null,y.default.createElement("span",{className:"settlement-type-count"},"共",a.canUsePickUpType[1].goods_num,"件，合计："),y.default.createElement("span",{className:"settlement-type-price",style:{color:a.storeStyle&&a.storeStyle.theme}},"¥",a.canUsePickUpType[1].goods_price))),y.default.createElement("div",{className:"settlement-btn-box"},y.default.createElement("div",{"data-type":"1","data-cart-id":a.canUsePickUpType[1].cart_list,className:"settlement-btn",style:{color:a.storeStyle&&a.storeStyle.theme,borderColor:a.storeStyle&&a.storeStyle.theme},onClick:function(e){t.goodsPay(e),e.stopPropagation()},"data-compindex":this.props.index},"去结算"))),a.canUsePickUpType[3]&&!!a.canUsePickUpType[3].cart_list.length&&y.default.createElement("div",{className:"settlement-type"},y.default.createElement("div",{className:"settlement-type-content"},y.default.createElement("div",null,y.default.createElement("span",{className:"settlement-type-title"},"上门自提商品"),y.default.createElement("span",{className:"settlement-type-express"},"配送费0元")),y.default.createElement("div",null,y.default.createElement("span",{className:"settlement-type-count"},"共",a.canUsePickUpType[3].goods_num,"件，合计："),y.default.createElement("span",{className:"settlement-type-price",style:{color:a.storeStyle&&a.storeStyle.theme}},"¥",a.canUsePickUpType[3].goods_price))),y.default.createElement("div",{className:"settlement-btn-box"},y.default.createElement("div",{"data-type":"3","data-cart-id":a.canUsePickUpType[3].cart_list,className:"settlement-btn",style:{color:a.storeStyle&&a.storeStyle.theme,borderColor:a.storeStyle&&a.storeStyle.theme},onClick:function(e){t.goodsPay(e),e.stopPropagation()},"data-compindex":this.props.index},"去结算"))),a.canUsePickUpType[2]&&!!a.canUsePickUpType[2].cart_list.length&&y.default.createElement("div",{className:"settlement-type"},y.default.createElement("div",{className:"settlement-type-content "+(1!=a.intraCityData.is_enough_price||1!=a.intraCityData.in_distance?"no-achieve-intra-box":"")},y.default.createElement("div",null,y.default.createElement("span",{className:"settlement-type-title"},"同城配送商品"),y.default.createElement("span",{className:"settlement-type-express"},"配送费",a.intraCityData.express_fee,"元")),y.default.createElement("div",null,y.default.createElement("span",{className:"settlement-type-count"},"共",a.canUsePickUpType[2].goods_num,"件，合计："),y.default.createElement("span",{className:"settlement-type-price",style:{color:a.storeStyle&&a.storeStyle.theme}},"¥",a.canUsePickUpType[2].goods_price)),1!=a.intraCityData.in_business_time?y.default.createElement("div",{className:"no-achieve-intra",style:{color:a.storeStyle&&a.storeStyle.theme}},"店铺已打烊"):1!=a.intraCityData.is_enough_price?y.default.createElement("div",{className:"no-achieve-intra",style:{color:a.storeStyle&&a.storeStyle.theme}},"未达到起送价 还差",a.intraCityData.min_deliver_price_balance,"元"):1!=a.intraCityData.in_distance?y.default.createElement("div",{className:"no-achieve-intra",style:{color:a.storeStyle&&a.storeStyle.theme}},"不在配送范围"):null),y.default.createElement("div",{className:"settlement-btn-box"},y.default.createElement("div",{"data-type":"2","data-cart-id":a.canUsePickUpType[2].cart_list,className:"settlement-btn "+(1!=a.intraCityData.is_enough_price||1!=a.intraCityData.in_distance||1!=a.intraCityData.in_business_time?"no-achieve-intra-btn":""),style:{color:a.storeStyle&&a.storeStyle.theme,borderColor:a.storeStyle&&a.storeStyle.theme},onClick:1!=a.intraCityData.is_enough_price||1!=a.intraCityData.in_distance||1!=a.intraCityData.in_business_time?null:function(e){t.goodsPay(e),e.stopPropagation()},"data-compindex":this.props.index},"去结算"),1==a.intraCityData.in_business_time&&1==a.intraCityData.is_enough_price&&1!=a.intraCityData.in_distance&&y.default.createElement("div",{className:"settlement-btn",style:{marginLeft:".20rem",color:a.storeStyle&&a.storeStyle.theme,borderColor:a.storeStyle&&a.storeStyle.theme},onClick:function(e){t.vlSelectGoodsSameJourney(e),e.stopPropagation()},"data-compindex":this.props.index},"修改地址"))),a.canUsePickUpType[4]&&!!a.canUsePickUpType[4].cart_list.length&&y.default.createElement("div",{className:"settlement-type"},y.default.createElement("div",{className:"settlement-type-content "+(1!=a.dining_data.in_business_time?"no-achieve-intra-box":"")},y.default.createElement("div",null,y.default.createElement("span",{className:"settlement-type-title"},"堂食点餐")),y.default.createElement("div",null,y.default.createElement("span",{className:"settlement-type-count"},"共",a.canUsePickUpType[4].goods_num,"件，合计："),y.default.createElement("span",{className:"settlement-type-price",style:{color:a.storeStyle&&a.storeStyle.theme}},"¥",a.canUsePickUpType[4].goods_price)),1!=a.dining_data.in_business_time&&y.default.createElement("div",{className:"no-achieve-intra",style:{color:a.storeStyle&&a.storeStyle.theme}},"店铺已打烊")),y.default.createElement("div",{className:"settlement-btn-box"},y.default.createElement("button",{"form-type":"submit",className:"settlement-btn "+(1!=a.dining_data.in_business_time?"no-achieve-intra-btn":""),style:{color:a.storeStyle&&a.storeStyle.theme,borderColor:a.storeStyle&&a.storeStyle.theme},onClick:1!=a.dining_data.in_business_time?null:function(e){t.goodsPay(e),e.stopPropagation()},"data-type":"4","data-cart-id":a.canUsePickUpType[4].cart_list,"data-compindex":this.props.index},"去结算")))),y.default.createElement("div",{className:"close-settlement-mask","data-compindex":this.props.index,onClick:function(e){t.verticalListCloseSettlement(e),e.stopPropagation()}},"关闭")),a.shoppingCouponsList&&y.default.createElement("div",{className:"takeout-shopping-carts-list coupons-list"},y.default.createElement("div",{className:"shop-info-detail"},y.default.createElement(N.ScrollView,null,y.default.createElement("div",{className:"shop-name"},a.shopInfo.title),y.default.createElement("div",{className:"shop-info-content"},y.default.createElement("div",{className:"content-text"},"营业时间"),y.default.createElement("div",{className:"info-deliver-content"},a.shopInfo.business_time_str)),y.default.createElement("div",{className:"shop-info-content"},y.default.createElement("div",{className:"content-text"},"店铺地址"),y.default.createElement("div",{className:"info-deliver-content"},a.shopInfo.address)),!!a.customFeature.isShowNotice&&a.shopInfo.shop_notice&&y.default.createElement("div",{className:"shop-info-content"},y.default.createElement("div",{className:"content-text"},"公告"),y.default.createElement("div",{className:"info-deliver-content"},"公告：",a.shopInfo.shop_notice))),y.default.createElement("div",{className:"detail-close","data-compindex":this.props.index,onClick:this.verticalListHideCouponsList},y.default.createElement("label",{className:"ico-moon icon-closes"})))),a.showVipDialog&&y.default.createElement("div",{className:"verticalList-vipDialog","data-compindex":this.props.index,onClick:function(e){t.verticalListCloseVipDialog(e),e.stopPropagation()}},y.default.createElement("div",{onClick:this.stopPropagation},y.default.createElement("label",{onClick:this.verticalListCloseVipDialog,className:"ico-moon icon-closes","data-compindex":this.props.index}),y.default.createElement("div",{className:"vipCardUp"},y.default.createElement("img",{src:"http://test.zhichiwangluo.com/zhichi_frontend/static/webapp/images/takeout/vip_card_up.png"})),y.default.createElement("div",{className:"cardTips"},y.default.createElement("span",null,"您当前的会员卡，暂无购买该商品权限，可升级会员卡")),y.default.createElement(N.ScrollView,null,a.vipCondtionInfo.vip_card_data.length>0&&a.vipCondtionInfo.vip_card_data&&a.vipCondtionInfo.vip_card_data.map(function(e,t){return y.default.createElement("div",{key:t,className:"cardContent"},y.default.createElement("div",{className:"card-content-title"},e.title,"会员卡(V",e.level,")达成条件："),e.trade_count>-1&&y.default.createElement("div",{className:"card-content-tips"},"累计交易成功",e.trade_count,"笔"),e.consume_count>-1&&y.default.createElement("div",{className:"card-content-tips"},"或累计消费金额",e.consume_count,"元"),e.integral_count>-1&&y.default.createElement("div",{className:"card-content-tips"},"或累计积分达到",e.integral_count,"笔"))}),a.vipCondtionInfo.paid_vip_card_data.length>0&&a.vipCondtionInfo.paid_vip_card_data&&a.vipCondtionInfo.paid_vip_card_data.map(function(e,t){return y.default.createElement("div",{key:t,className:"cardContent"},y.default.createElement("div",{className:"card-content-title"},e.title,"会员卡(V",e.level,")达成条件："),y.default.createElement("div",{className:"card-content-tips"},"价格：每月",e.price))})))),!(!a.customFeature.showScanCode||1!=a.selected)&&y.default.createElement("div",{className:"scanCode",onClick:function(e){t.scanShopping(e),e.stopPropagation()},onTouchMove:this.scanMove,"data-compindex":this.props.index,style:{top:a.scanCode+"px"}},y.default.createElement("span",{className:"ico-moon icon-shopping-scan"}),y.default.createElement("div",{className:"scan-word"},"扫码"))))}}]),t}(y.default.Component),x=function(){var e=this;this.init=function(t,a){var n,o=a.data.eles[t],i=o.customFeature,s={};s.pick_up_type=[],i.pickUpArr&&(i.is_together?i.pickUpArr.dining&&s.pick_up_type.push(4):(i.pickUpArr.express&&s.pick_up_type.push(1),i.pickUpArr.sameJourney&&s.pick_up_type.push(2),i.pickUpArr.selfLifting&&s.pick_up_type.push(3),i.pickUpArr.dining&&s.pick_up_type.push(4))),0===s.pick_up_type.length&&s.pick_up_type.push(0),s.form="goods",s.is_count=0,a.setData((n={},(0,r.default)(n,"eles["+t+"].pick_up_type",s.pick_up_type),(0,r.default)(n,"eles["+t+"].buyer_info",[]),(0,r.default)(n,"eles["+t+"].user_list",[]),n)),o.timer=null,o.loopRequest=!0,o.is_init=!0,o.addCartComplete=!0;var c=b.appMethod.getPageFranchiseeId();o.location_id=c?b.appMethod.globalData[c]?b.appMethod.globalData[c].ec_location_id:"":b.appMethod.globalData.ec_location_id||"",e.verticalListCompsInit(t,a,s)},this.verticalListCompsInit=function(t,a,n){var o=e,i=n;a.returnToVerticalFlag=0;var s=a.data.eles[t];s.heightFlag=!0,s.flag=!0,clearInterval(s.timer);var c={};c["eles["+t+"].goodsDetailShow"]=!1,c["eles["+t+"].goodsModelShow"]=!1,c["eles["+t+"].hideSearchInput"]=!1,a.data.page_hasNavBar?(c["eles["+t+"].heightPx"]=b.appMethod.returnListHeight(s.customFeature.showShopInfo,2,a.data.eles[t].customFeature.mode)-b.appMethod.globalData.topNavBarHeight+(s.customFeature.pickUpArr.sameJourney?0:40),c["eles["+t+"].searchHeight"]=b.appMethod.getSystemInfoSync().windowHeight-100-b.appMethod.globalData.topNavBarHeight):(c["eles["+t+"].heightPx"]=b.appMethod.returnListHeight(s.customFeature.showShopInfo,2,a.data.eles[t].customFeature.mode)+(s.customFeature.pickUpArr.sameJourney?0:40),c["eles["+t+"].searchHeight"]=b.appMethod.getSystemInfoSync().windowHeight-100),c["eles["+t+"].selected"]=1,c["eles["+t+"].customFeature.selected"]=0,void 0==s.TotalNum&&(c["eles["+t+"].TotalNum"]=0,c["eles["+t+"].TotalPrice"]=0),c["eles["+t+"].cartList"]=[{}],c["eles["+t+"].cartGoodsIdList"]=[],c["eles["+t+"].loading"]=!0,c["eles["+t+"].loadingFail"]=!1,s.goods_data_list&&(c["eles["+t+"].show_goods_data"]={},c["eles["+t+"].goods_data_list"]={}),c["eles["+t+"].categorySort"]={},c["eles["+t+"].showSearch"]=!1,c["eles["+t+"].goodsCateHeight"]={},c["eles["+t+"].requestNum"]=0,c["eles["+t+"].isChangeTab"]=0,c["eles["+t+"].showSettlementMask"]=!1,c["eles["+t+"].franchiseeId"]=b.appMethod.getPageFranchiseeId()||"",a.setData(c),a["verticalList"+t]||(a["verticalList"+t]={}),i.sort_key="",i.sort_direction=0,i.page=1,i.page_size=10,i.take_out_style=1,1==s.pick_up_type.length&&4==s.pick_up_type[0]||s.currentLocationData||s.selectSameJourney||e.getCurrentLocation(t,a);var l=b.appMethod.getPageFranchiseeId();if(b.appMethod.sendRequest({url:"/index.php?r=AppEcommerce/getPickUpGoodsTypeSetting",data:{pick_up_type:2,sub_shop_app_id:l||""},success:function(e){e.data?e.data:e.data={};var n={};e.data?e.data:e.data={};var o=e.data;o.app_store_data?(n["eles["+t+"].shopInfo"]=o.app_store_data||{},n["eles["+t+"].config_data"]=o.config_data||{},n["eles["+t+"].infoHeight"]=0,a.setData(n,function(){b.appMethod.getBoundingClientRect(".shopInfoHeight",function(e){var n={};a["verticalList"+t].shopInfoHeight||(a["verticalList"+t].shopInfoHeight=void 0!=e[0]?e[0].height:0),n["eles["+t+"].shopHeight"]=a["verticalList"+t].shopInfoHeight,a.setData(n)})})):b.appMethod.sendRequest({url:"/index.php?r=AppEcommerce/getPickUpGoodsTypeSetting",data:{pick_up_type:4,sub_shop_app_id:l||""},success:function(e){e.data?e.data:e.data={};var n={};e.data?e.data:e.data={};var o=e.data;n["eles["+t+"].shopInfo"]=o.app_store_data||{},n["eles["+t+"].config_data"]=o.config_data||{},n["eles["+t+"].infoHeight"]=0,a.setData(n,function(){b.appMethod.getBoundingClientRect(".shopInfoHeight",function(e){var n={};a["verticalList"+t].shopInfoHeight||(a["verticalList"+t].shopInfoHeight=void 0!=e[0]?e[0].height:0),n["eles["+t+"].shopHeight"]=a["verticalList"+t].shopInfoHeight,a.setData(n)})})}})}}),s.customFeature.databind&&1==s.customFeature.databind)b.appMethod.sendRequest({hideLoading:!0,url:"/index.php?r=AppShop/getGoodsCategory",method:"post",data:{filter_null:1,goods_type:0,pick_up_type:s.pick_up_type,sub_shop_app_id:b.appMethod.getPageFranchiseeId()||""},success:function(e){for(var n=[],c={},l=0;l<e.data.length;l++)n.push({text:e.data[l].name,source:e.data[l].id,pic:e.data[l].logo});c["eles["+t+"].content"]=n;for(var d in n){var u={};u.param={},Object.assign(u.param,i),u.param.idx_arr={idx:"category",idx_value:"all"==n[d].source?"":n[d].source},c["eles["+t+"].pagination.category"+n[d].source]=u}if(a.data.page_hasNavBar?(c["eles["+t+"].heightPx"]=b.appMethod.returnListHeight(s.customFeature.showShopInfo,2,a.data.eles[t].customFeature.mode)-b.appMethod.globalData.topNavBarHeight+(s.customFeature.pickUpArr.sameJourney?0:40),c["eles["+t+"].searchHeight"]=b.appMethod.getSystemInfoSync().windowHeight-100-b.appMethod.globalData.topNavBarHeight):(c["eles["+t+"].heightPx"]=b.appMethod.returnListHeight(s.customFeature.showShopInfo,2,a.data.eles[t].customFeature.mode)+(s.customFeature.pickUpArr.sameJourney?0:40),c["eles["+t+"].searchHeight"]=b.appMethod.getSystemInfoSync().windowHeight-100),c["eles["+t+"].route"]=a.route,a.setData(c),0!==s.content.length)if("1"==s.customFeature.loadAllData){i.page=-1,s.loading=!0,a.setData((0,r.default)({},"eles["+t+"].loadFirstCate",!0)),i.idx_arr={idx:"category",idx_value:"all"==s.content[0].source?"":s.content[0].source},o._getTakeoutStyleGoodsList(i,a,t,1);for(var m=1;m<s.content.length;m++)i.idx_arr={idx:"category",idx_value:"all"==s.content[m].source?"":s.content[m].source},i.page=-1,o._getTakeoutStyleGoodsList(i,a,t,1)}else i.page=1,i.page_size=10,n[0]&&(i.idx_arr={idx:"category",idx_value:"all"==n[0].source?"":n[0].source},s.loading=!0,o._getTakeoutStyleGoodsList(i,a,t,1))}});else{var d=s.content,u={};for(var m in d){var p={};p.param={},Object.assign(p.param,i),p.param.idx_arr={idx:"category",idx_value:"all"==d[m].source?"":d[m].source},u["eles["+t+"].pagination.category"+d[m].source]=p}if(a.data.page_hasNavBar?(u["eles["+t+"].heightPx"]=b.appMethod.returnListHeight(s.customFeature.showShopInfo,2,a.data.eles[t].customFeature.mode)-b.appMethod.globalData.topNavBarHeight+(s.customFeature.pickUpArr.sameJourney?0:40),u["eles["+t+"].searchHeight"]=b.appMethod.getSystemInfoSync().windowHeight-100-b.appMethod.globalData.topNavBarHeight):(u["eles["+t+"].heightPx"]=b.appMethod.returnListHeight(s.customFeature.showShopInfo,2,a.data.eles[t].customFeature.mode)+(s.customFeature.pickUpArr.sameJourney?0:40),u["eles["+t+"].searchHeight"]=b.appMethod.getSystemInfoSync().windowHeight-100),u["eles["+t+"].route"]=a.route,a.setData(u),"1"==s.customFeature.loadAllData){i.page=-1,a.setData((0,r.default)({},"eles["+t+"].loadFirstCate",!0)),i.idx_arr={idx:"category",idx_value:"all"==s.content[0].source?"":s.content[0].source},o._getTakeoutStyleGoodsList(i,a,t,1);for(var f=1;f<s.content.length;f++)i.idx_arr={idx:"category",idx_value:"all"==s.content[f].source?"":s.content[f].source},i.page=-1,o._getTakeoutStyleGoodsList(i,a,t,1)}else i.page=1,i.page_size=10,i.idx_arr={idx:"category",idx_value:"all"==d[0].source?"":d[0].source},s.loading=!0,o._getTakeoutStyleGoodsList(i,a,t,1)}},this.verticalListChangeEvaluate=function(t){var a=b.appMethod.getAppCurrentPage(),n={},o=t.currentTarget.dataset.compindex;2==t.currentTarget.dataset.index&&(a.hasRequireAssess=!0,e._getAssessList(a,o)),n["eles["+o+"].selected"]=t.currentTarget.dataset.index,a.setData(n)},this.verticalListTouchstart=function(e){var t={},a=b.appMethod.getAppCurrentPage(),n=e.currentTarget.dataset,o=n.compindex,i={x:e.touches[0].pageX,y:e.touches[0].pageY};t["eles["+o+"].startPoint"]=i,a.setData(t)},this.verticalListTouchmove=function(e){var t={},a=b.appMethod.getAppCurrentPage(),n=e.currentTarget.dataset,o=n.compindex,i=a.data.eles[o];i.showSearch||i.customFeature.selected>0||"1"!=i.customFeature.loadAllData&&(!i.shopInfo||!a["verticalList"+o]||a["verticalList"+o]&&void 0==a["verticalList"+o].shopInfoHeight||(i.startPoint.y-e.touches[0].pageY>40&&i.heightFlag&&0===i.infoHeight&&b.appMethod.getBoundingClientRect(".shopInfoHeight",function(e){a["verticalList"+o].shopInfoHeight=void 0!=e[0]?e[0].height:0,t["eles["+o+"].infoHeight"]=a["verticalList"+o].shopInfoHeight,a.setData(t)}),e.touches[0].pageY-i.startPoint.y>40&&i.heightFlag&&0!==i.infoHeight&&(t["eles["+o+"].infoHeight"]=0,a.setData(t))))},this.stopAnimation=function(e){var t=b.appMethod.getAppCurrentPage(),a=e.currentTarget.dataset,n=a.compindex;t.data.eles[n].heightFlag=!0},this.verticalListShowGoodsSearch=function(e){var t=b.appMethod.getAppCurrentPage(),a=e.currentTarget.dataset,n=a.compindex,o=t.data.eles[n],i={};i["eles["+n+"].showSearch"]=!0,!o.shopInfo||!t["verticalList"+n]||t["verticalList"+n]&&void 0==t["verticalList"+n].shopInfoHeight||(o.show_goods_data&&o.show_goods_data.searchResult&&(i["eles["+n+"].show_goods_data.searchResult"]=[]),i["eles["+n+"].infoHeight"]=t["verticalList"+n].shopInfoHeight,t.setData(i))},this.verticalListHideGoodsSearch=function(e){var t=b.appMethod.getAppCurrentPage(),a=e.currentTarget.dataset,n=a.compindex,o={};o["eles["+n+"].showSearch"]=!1,o["eles["+n+"].infoHeight"]=0,t.data.eles[n].heightFlag=!0,t.setData(o)},this.verticalListBindSearchTitle=function(e){var t=b.appMethod.getAppCurrentPage(),a=e.currentTarget.dataset,n=a.compindex,o={};o["eles["+n+"].searchTitle"]=e.target.value,t.setData(o)},this.verticalListSearchByTitle=function(t){var a=b.appMethod.getAppCurrentPage(),n=t.currentTarget.dataset,o=n.compindex,i=a.data.eles[o],s={},r={};r=i.pagination.searchResult?i.pagination.searchResult:i.pagination["category"+i.content[0].source];for(var c=JSON.parse(JSON.stringify(r.param)),l=[],d=!1,u=0;u<i.content.length;u++){if("all"==i.content[u].source){d=!0;break}l.push(i.content[u].source)}d||(c.category_arr=l),c.idx_arr.idx="title",c.idx_arr.idx_value=i.searchTitle,c.page=1,s["eles["+o+"].pagination.searchResult.param"]=c,s["eles["+o+"].pagination.searchResult.requesting"]=!1,a.setData(s),e._getVerticalListListByTitle(c,a,o,1)},this.verticalListClickCategory=function(t){var a=b.appMethod.getAppCurrentPage(),n=t.currentTarget.dataset,o=n.compindex,i=n.index,s=n.id,r={},c=JSON.parse(n.param),l=a.data.eles[o],d=Number(n.cateindex);l.loading||a["verticalList"+o]&&void 0==a["verticalList"+o].shopInfoHeight||(l.customFeature.loadAllData&&"0"!=l.customFeature.loadAllData?(r["eles["+o+"].customFeature.selected"]=i,r["eles["+o+"].scrollInto"]="cate-"+d,r["eles["+o+"].currentCate"]=l.content[i].text):(l.show_goods_data&&l.show_goods_data["category"+s]||(r["eles["+o+"].loading"]=!0,e._getTakeoutStyleGoodsList(c,a,o,0)),r["eles["+o+"].scrollTopLoading"]=!1,r["eles["+o+"].scrollTop"]=".02rem",r["eles["+o+"].customFeature.selected"]=i,r["eles["+o+"].loadingFail"]=!1),i>0&&(r["eles["+o+"].infoHeight"]=a["verticalList"+o].shopInfoHeight),a.setData(r),l.isChangeTab=!0)},this.verticalListStyleScrollFunc=function(t){var a=b.appMethod.getAppCurrentPage(),n=t.currentTarget.dataset,o=n.compindex,i=a.data.eles[o],s=i.content[i.customFeature.selected].source,r={},c=i.pagination["category"+s],l=c.param,d=e;if((c.requesting||0===c.is_more||i.loading)&&!i.loadingFail){if(c.requesting)return;return void(i.customFeature.selected<i.content.length-1&&(i.scrollTo="bottom"))}r["eles["+o+"].pagination.category"+s+".requesting"]=!0,r["eles["+o+"].loading"]=!0,r["eles["+o+"].loadingFail"]=!1,a.setData(r),d._getTakeoutStyleGoodsList(l,a,o,0)},this.verticalListStyleScrollTop=function(e){var t=b.appMethod.getAppCurrentPage(),a=e.currentTarget.dataset,n=a.compindex,o=t.data.eles[n],i=o.content[o.customFeature.selected].source,s=o.pagination["category"+i];s.param;s.requesting||o.customFeature.selected>0&&(o.scrollTo="top")},this.scrollStart=function(e){var t=b.appMethod.getAppCurrentPage(),a=e.currentTarget.dataset,n=a.compindex,o=t.data.eles[n],i={x:e.touches[0].pageX,y:e.touches[0].pageY};o.scrollStratPoint=i},this.scrollMove=function(e){var t=b.appMethod.getAppCurrentPage(),a=e.currentTarget.dataset,n=a.compindex,o=t.data.eles[n];if("bottom"===o.scrollTo){if(o.scrollStratPoint.y-e.touches[0].pageY>20&&"bottom"!==o.scrollTopLoading){var i={};o.scrollTopLoading="bottom",i["eles["+n+"].scrollTopLoading"]="bottom",t.setData(i)}o.startPoint.y-e.touches[0].pageY>150&&(o.toCate="next")}else if("top"===o.scrollTo){if(e.touches[0].pageY-o.scrollStratPoint.y>50&&"top"!==o.scrollTopLoading){var s={};o.scrollTopLoading="top",s["eles["+n+"].scrollTopLoading"]="top",t.setData(s)}e.touches[0].pageY-o.startPoint.y>100&&(o.toCate="prev")}},this.scrollEnd=function(t){var a=b.appMethod.getAppCurrentPage(),n=t.currentTarget.dataset,o=n.compindex,i=a.data.eles[o],s=i.content[i.customFeature.selected].source,r={},c=i.pagination["category"+s],l=c.param,d=e,u={};if(u["eles["+o+"].scrollTopLoading"]=!1,a.setData(u),!i.loading&&i.toCate){var m=+i.customFeature.selected||0;"next"===i.toCate?m=+i.customFeature.selected+1:"prev"===i.toCate&&(m=+i.customFeature.selected-1),i.toCate=!1;var p=i.content[m].source;i.show_goods_data&&i.show_goods_data["category"+p]||(i.loading=!0,r["eles["+o+"].loading"]=!0,l.page=1,l.idx_arr.idx_value="all"==p?"":p,d._getTakeoutStyleGoodsList(l,a,o,0)),r["eles["+o+"].customFeature.selected"]=m,r["eles["+o+"].scrollTopLoading"]=!1,a.setData(r,function(){i.scrollTo=!1})}},this.sortVerticalList=function(t){var a=b.appMethod.getAppCurrentPage(),n=t.currentTarget.dataset,o=n.compindex,i=a.data.eles[o],s=i.content[i.customFeature.selected].source,r={},c=i.pagination["category"+s],l=c.param;l.idx_arr.idx_value="all"==s?"":s;var d=n.sort_key,u=n.direction;u=0==+u?1:0,i.categorySort?i.categorySort["category"+s]&&i.categorySort["category"+s].sortKey!==d&&(u=0):u=0,l.sort_key=d,l.sort_direction=u,l.page=1,r["eles["+o+"].categorySort"]=i.categorySort,r["eles["+o+"].categorySort"]||(r["eles["+o+"].categorySort"]={}),r["eles["+o+"].categorySort"]["category"+s]={sortKey:d,sort_direction:u},a.setData(r),e._getTakeoutStyleGoodsList(l,a,o,1)},this.showVerticalListGoodsDetail=function(e){var t=b.appMethod.getAppCurrentPage(),a=e.currentTarget.dataset,n=a.id,o=a.index,i=a.compindex,s=a.category,r=a.is_search||"",c=t.data.eles[i],l=void 0;l="search"==r?c.show_goods_data.searchResult[o]:c.show_goods_data["category"+s][o];var d=l.business_time?l.business_time.business_time:"";if(d){var u="";for(var m in d)u+=d[m].start_time.slice(0,2)+":"+d[m].start_time.slice(2,4)+"-"+d[m].end_time.slice(0,2)+":"+d[m].end_time.slice(2,4)+" ";l.businessTime=u}l.des=b.appMethod.getWxParseResult(l.description);var p=b.appMethod.getPageFranchiseeId();b.appMethod.sendRequest({url:"/index.php?r=AppShop/getAssessList",method:"post",data:{goods_id:n,"idx_arr[0][idx]":"level","idx_arr[0][idx_value]":0,page:1,page_size:20,sub_shop_app_id:p||""},success:function(e){var a={};a["eles["+i+"].goodsDetailShow"]=!0,a["eles["+i+"].hideSearchInput"]=!0,a["eles["+i+"].goodsDetail"]=l,a["eles["+i+"].goodsDetail"].goodsData=c.goods_data_list[n],a["eles["+i+"].goodsDetail"].goodsAssess=e,t.setData(a),b.appMethod.sendRequest({hideLoading:!0,url:"/index.php?r=AppShop/GoodsView",data:{goods_id:n},success:function(){}})}})},this.verticalListListMinus=function(t){clearTimeout(e.takeoutTimeout);var a=b.appMethod.getAppCurrentPage(),n=t.target.dataset,o=n.goodsid,i=n.compindex,s=a.data.eles[i],r=e,c=+s.TotalNum,l=+s.TotalPrice,d={},u=Number(n.model);return 0==n.isInBusiness?void b.appMethod.showModal({content:"该商品不在出售时间"}):u?void b.appMethod.showModal({content:"多规格商品只能去购物车操作"}):void(0!=s.cartList[0][o][0].num&&(d["eles["+i+"].goods_data_list."+o]=s.goods_data_list[o],d["eles["+i+"].cartList[0]."+o]=s.cartList[0][o],d["eles["+i+"].TotalNum"]=--c,d["eles["+i+"].TotalPrice"]=(+l-Number(d["eles["+i+"].goods_data_list."+o].calculationPrice)).toFixed(2),d["eles["+i+"].isDeliver"]=(+s.shopInfo.min_deliver_price-d["eles["+i+"].TotalPrice"]).toFixed(2),d["eles["+i+"].goods_data_list."+o].totalNum--,d["eles["+i+"].cartList[0]."+o][0].num--,d["eles["+i+"].cartList[0]."+o][0].totalPrice=Number(d["eles["+i+"].cartList[0]."+o][0].num*d["eles["+i+"].cartList[0]."+o][0].calculationPrice).toFixed(2),a.setData(d,function(){r.takeoutTimeout=setTimeout(function(){var e={goods_type:0,cartListData:s.cartList,thisPage:a,compindex:i};r._addTakeoutCart(e,r.eachCartList(e),null,o)},300)})))},this.verticalListListPlus=function(t){clearTimeout(e.takeoutTimeout);var a=b.appMethod.getAppCurrentPage(),n=t.target.dataset,o=n.goodsid,i=n.compindex,s=a.data.eles[i],r=e;if(!s.flag){s.addCartComplete=!1;var c=Number(n.model),l=s.goods_data_list[o],d=s.TotalNum,u=+s.TotalPrice,m=n.isInBusiness,p={};p["eles["+i+"].modelPrice"]=0;var f=s.cartList[0],g=0;for(var h in f)for(var v in f[h])g+=f[h][v].num;if(0==m)return void b.appMethod.showModal({content:"该商品不在出售时间"});if(c){p["eles["+i+"].goodsModelShow"]=!0,p["eles["+i+"].hideSearchInput"]=!0,p["eles["+i+"].modelGoodsId"]=o,p["eles["+i+"].modelIdArr"]=[];for(var _=0;_<s.goods_data_list[o].model.modelData.length;_++)p["eles["+i+"].modelIdArr"].push(0);a.setData(p)}else{p["eles["+i+"].goods_data_list."+o]=l,p["eles["+i+"].cartList[0]."+o]=s.cartList[0][o]||{};p["eles["+i+"].TotalNum"]=+d+1,p["eles["+i+"].TotalPrice"]=(+u+ +l.calculationPrice).toFixed(2),p["eles["+i+"].isDeliver"]=(+s.shopInfo.min_deliver_price-p["eles["+i+"].TotalPrice"]).toFixed(2),p["eles["+i+"].goods_data_list."+o].totalNum++,p["eles["+i+"].cartList[0]."+o][0]?(p["eles["+i+"].cartList[0]."+o][0].num++,p["eles["+i+"].cartList[0]."+o][0].totalPrice=(+p["eles["+i+"].cartList[0]."+o][0].num*l.calculationPrice).toFixed(2)):p["eles["+i+"].cartList[0]."+o][0]={list:"list",id:o,modelId:0,num:1,price:l.calculationPrice,gooodsName:l.name,totalPrice:(1*l.calculationPrice).toFixed(2),stock:l.stock,cart_id:0,in_business_time:s.goods_data_list[o].in_business_time,pick_up_type:l.pick_up_type,is_vip_goods:l.is_vip_goods||0},-1==s.cartGoodsIdList.indexOf(+o)&&(p["eles["+i+"].cartGoodsIdList"]=s.cartGoodsIdList,p["eles["+i+"].cartGoodsIdList"].push(+o)),g+=1,p["eles["+i+"].myCartNum"]=g,clearInterval(s.timer),s.loopRequest=!1,a.setData(p,function(){r.takeoutTimeout=setTimeout(function(){var e={goods_type:0,cartListData:s.cartList,thisPage:a,compindex:i};r._addTakeoutCart(e,r.eachCartList(e),null,o)},300)})}}},this.verticalListSearchScrollFunc=function(t){var a=b.appMethod.getAppCurrentPage(),n=t.currentTarget.dataset,o=n.compindex,i=a.data.eles[o],s={},r=i.pagination.searchResult,c=r.param;(!r.requesting&&0!==r.is_more||i.loadingFail)&&(s["eles["+o+"].loading"]=!0,s["eles["+o+"].loadingFail"]=!1,a.setData(s),e._getVerticalListListByTitle(c,a,o,0))},this._getVerticalListListByTitle=function(t,a,n,o){var i=e;a.requesting=!0;var s={};s["eles["+n+"].searchLoading"]=!0,a.setData(s),t.form="goods",t.only_display_common=0,b.appMethod.sendRequest({hideLoading:!0,url:"/index.php?r=AppShop/GetGoodsList",data:t,method:"post",success:function(e){if(0==e.status){a.requesting=!1,s["eles["+n+"].searchLoading"]=!1;var c=a.data.eles[n],l={},d={};l["eles["+n+"].pagination.searchResult"]=c.pagination.searchResult,l["eles["+n+"].pagination.searchResult"].requesting=!1,a.setData(l),!c.show_goods_data||c.show_goods_data&&!c.show_goods_data.searchResult||1==o?d.searchResult=[]:d.searchResult=c.show_goods_data.searchResult,c.goods_data_list?s["eles["+n+"].goods_data_list"]=c.goods_data_list:s["eles["+n+"].goods_data_list"]={},a["verticalList"+n].goods_model_list||(a["verticalList"+n].goods_model_list={});for(var u in e.data){var m,p=e.data[u].form_data;if(d.searchResult.push({app_id:p.app_id,cover:p.cover,description:p.description,goods_model:p.goods_model?p.goods_model.length:0,id:p.id,price:p.price,sales:p.sales,title:p.title,business_time:p.business_time,is_in_business_time:p.goods_in_business_time,stock:p.stock,virtual_price:p.virtual_price,vipGoods:!!(p.paid_vip_card_condition||p.paid_vip_level_condition||p.vip_card_condition||p.vip_level_condition),integral:p.integral,img_urls:p.img_urls||[],vip_price:p.vip_min_price==p.vip_max_price?p.vip_min_price:p.vip_min_price+"~"+p.vip_max_price,vip_goods_price:p.vip_goods_price&&0!==p.vip_goods_price&&!c.customFeature.is_together?Number(p.vip_goods_price).toFixed(2):null,calculationPrice:p.vip_goods_price&&0!==p.vip_goods_price&&!c.customFeature.is_together?Number(p.vip_goods_price).toFixed(2):p.price,is_vip_goods:p.is_vip_goods||0}),s["eles["+n+"].goods_data_list"][""+p.id]=(m={totalNum:0,stock:p.stock,goods_model:p.goods_model?p.goods_model.length:0,name:p.title,price:p.price,in_business_time:p.goods_in_business_time,model:{}},(0,r.default)(m,"goods_model",{}),(0,r.default)(m,"vip_price",p.vip_min_price==p.vip_max_price?p.vip_min_price:p.vip_min_price+"~"+p.vip_max_price),(0,r.default)(m,"vip_goods_price",p.vip_goods_price&&0!==p.vip_goods_price&&!c.customFeature.is_together?Number(p.vip_goods_price).toFixed(2):null),(0,r.default)(m,"calculationPrice",p.vip_goods_price&&0!==p.vip_goods_price&&!c.customFeature.is_together?Number(p.vip_goods_price).toFixed(2):p.price),(0,r.default)(m,"is_vip_goods",p.is_vip_goods||0),m),p.goods_model){var f={};for(var g in p.goods_model)f[p.goods_model[g].id]={model:p.goods_model[g].model,stock:p.goods_model[g].stock,price:p.goods_model[g].price,goods_id:p.goods_model[g].goods_id,totalNum:0,vip_price:p.vip_price&&0!==p.vip_price?Number(p.vip_price).toFixed(2):null,calculationPrice:p.vip_price&&0!==p.vip_price?Number(p.vip_price).toFixed(2):p.price,is_vip_goods:p.is_vip_goods||0};s["eles["+n+"].goods_data_list"][""+p.id].model={modelData:[],name:p.title},a["verticalList"+n].goods_model_list[p.id]={goods_model:f};for(var h in p.model)s["eles["+n+"].goods_data_list"][""+p.id].model.modelData.push({name:p.model[h].name,subModelName:p.model[h].subModelName,subModelId:p.model[h].subModelId})}else s["eles["+n+"].goods_data_list"][""+p.id].model={},s["eles["+n+"].goods_data_list"][""+p.id].model[0]={price:p.price,num:0,stock:p.stock,vip_price:p.vip_price&&0!==p.vip_price?Number(p.vip_price).toFixed(2):null,calculationPrice:p.vip_price&&0!==p.vip_price?Number(p.vip_price).toFixed(2):p.price,is_vip_goods:p.is_vip_goods&&p.vip_goods_price!=p.price||0}}s["eles["+n+"].show_goods_data.searchResult"]=d.searchResult,s["eles["+n+"].in_business_time"]=e.in_business_time,s["eles["+n+"].pagination.searchResult"]=c.pagination.searchResult,t.page=e.current_page+1,s["eles["+n+"].pagination.searchResult"].param=t,s["eles["+n+"].pagination.searchResult"].is_more=e.is_more,s["eles["+n+"].pagination.searchResult"].current_page=e.current_page,s["eles["+n+"].modelChoose"]=[],s["eles["+n+"].modelIdArr"]=[],s["eles["+n+"].loading"]=!1,s["eles["+n+"].loadingFail"]=!1,a.setData(s),c.customFeature.is_together?(c.loopRequest=!0,i.getMultiOrderingVerticalCart(n,a)):i._getTakeoutStyleCartList(a,n)}},fail:function(){s["eles["+n+"].loadingFail"]=!0,s["eles["+n+"].loading"]=!1,s["eles["+n+"].searchLoading"]=!1,a.setData(s)},complete:function(){setTimeout(function(){a.requesting=!1},300)}})},this.verticalListShowShoppingCartPop=function(e){var t=b.appMethod.getAppCurrentPage(),a=e.currentTarget.dataset,n=a.compindex,o=a.isshow,i={};i["eles["+n+"].shoppingCartShow"]=!o,t.setData(i)},this.verticalListChooseComplete=function(t){clearTimeout(e.takeoutTimeout);var a=b.appMethod.getAppCurrentPage(),n=t.target.dataset.compindex,o=a.data.eles[n],i=e;o.TotalNum&&(e.takeoutTimeout=setTimeout(function(){var e={goods_type:0,cartListData:o.cartList,thisPage:a,compindex:n};i._addTakeoutCart(e,i.eachCartList(e),function(e){var t=b.appMethod.getPageFranchiseeId(),n=t?"&franchisee="+t:"";a.returnToVerticalFlag=1,b.appMethod.turnToPage("/orderMeal/pages/previewOrderDetail/previewOrderDetail?cart_arr="+e+n)})},300))},this.verticalListChangeAssessType=function(e){var t=b.appMethod.getAppCurrentPage(),a={},n=e.currentTarget.dataset.active,o=[],i=e.currentTarget.dataset.compindex,s=t.data.eles[i];a["eles["+i+"].assessActive"]=n;for(var r=0;r<s.assessList.length;r++){var c=s.assessList[r];0==n?1==c.assess_info.has_img&&o.push(c):c.assess_info.level==n&&o.push(c)}a["eles["+i+"].showAssess"]=o,t.setData(a)},this.verticalListGetMoreAssess=function(e){var t=e.currentTarget.dataset,a=t.nextpage,n=t.compindex,o=b.appMethod.getAppCurrentPage(),i=o.data.eles[n],s={};b.appMethod.sendRequest({hideLoading:!0,url:"/index.php?r=AppShop/getAssessList",method:"post",data:{"idx_arr[0][idx]":"goods_type","idx_arr[0][idx_value]":0,page:a,page_size:20,obj_name:"app_id"},chain:!0,subshop:o.franchiseeId||"",success:function(e){var t=i.assessList;for(var r in e.data)t.push(e.data[r]);s["eles["+n+"].assessList"]=t;for(var c=[],l=[],d=0,u=0,m=0,p=0,f=0;f<t.length;f++){var g=t[f];1==g.assess_info.has_img&&d++,3==g.assess_info.level?u++:1==g.assess_info.level?p++:m++,1==g.assess_info.has_img&&0==i.assessActive?l.push(g):3==g.assess_info.level&&3==i.assessActive?l.push(g):1==g.assess_info.level&&1==i.assessActive?l.push(g):2==g.assess_info.level&&2==i.assessActive&&l.push(g)}c=[d,u,m,p],s["eles["+n+"].commentNums"]=c,s["eles["+n+"].assessCurrentPage"]=a,s["eles["+n+"].showAssess"]=l,s["eles["+n+"].moreAssess"]=e.is_more,o.setData(s)}})},this.openVerticalListLocation=function(e){var t=e.currentTarget.dataset;b.appMethod.openLocation({latitude:+t.lat,longitude:+t.lng,name:t.name,address:t.address})},this.verticalListHideDetailPop=function(e){var t=b.appMethod.getAppCurrentPage(),a=e.currentTarget.dataset,n=a.compindex,o={};o["eles["+n+"].goodsDetailShow"]=!1,o["eles["+n+"].hideSearchInput"]=!1,t.setData(o)},this.verticalListGetMoreGoodsAssess=function(e){var t=b.appMethod.getAppCurrentPage(),a=e.currentTarget.dataset,n=a.compindex,o=b.appMethod.getPageFranchiseeId(),i=t.data.eles[n],s={};b.appMethod.sendRequest({url:"/index.php?r=AppShop/getAssessList",method:"post",data:{goods_id:i.goodsDetail.id,"idx_arr[0][idx]":"level","idx_arr[0][idx_value]":0,page:i.goodsDetail.goodsAssess.current_page+1,page_size:20,sub_shop_app_id:o||""},success:function(e){s["eles["+n+"].goodsDetail"]=i.goodsDetail,s["eles["+n+"].goodsDetail"].goodsAssess.data=i.goodsDetail.goodsAssess.data.concat(e.data),s["eles["+n+"].goodsDetail"].goodsAssess.is_more=e.is_more,s["eles["+n+"].goodsDetail"].goodsAssess.current_page=e.current_page,t.setData(s)}})},this.verticalListHideModelPop=function(e){var t=b.appMethod.getAppCurrentPage(),a=e.currentTarget.dataset,n=a.compindex,o={};o["eles["+n+"].goodsModelShow"]=!1,o["eles["+n+"].hideSearchInput"]=!1,o["eles["+n+"].modelPrice"]=0,o["eles["+n+"].modelChoose"]=[],o["eles["+n+"].modelIdArr"]=[],o["eles["+n+"].modelNum"]=0,o["eles["+n+"].addCartComplete"]=!0,t.setData(o)},this.verticalListChooseModel=function(t){var a=b.appMethod.getAppCurrentPage(),n=t.currentTarget.dataset,o=n.parentindex,i=n.index,s=n.compindex,r=n.goodsid,c=a.data.eles[s],l=c.goods_data_list[r].model.modelData,d={};d["eles["+s+"].modelChoose"]=c.modelChoose,d["eles["+s+"].modelIdArr"]=c.modelIdArr,d["eles["+s+"].modelChoose"][o]=l[o].subModelName[i],d["eles["+s+"].modelIdArr"][o]=l[o].subModelId[i],a.setData(d),e._ModelPirce(n,[].concat(d["eles["+s+"].modelIdArr"]))},this._ModelPirce=function(e,t){var a=b.appMethod.getAppCurrentPage(),n={},o=e.compindex,i=a["verticalList"+o].goods_model_list[e.goodsid].goods_model,s=a.data.eles[o];for(var r in i)i[r].model.split(",").sort().join(",")==t.sort().join(",")&&(n["eles["+o+"].modelChooseId"]=r,i[r].is_vip_goods&&!s.customFeature.is_together?(n["eles["+o+"].modelPrice"]=i[r].vip_price,i[r].vip_price!=i[r].price?n["eles["+o+"].isModelPrice"]=!0:n["eles["+o+"].isModelPrice"]=!1):(n["eles["+o+"].modelPrice"]=i[r].price,n["eles["+o+"].isModelPrice"]=!1),s.cartList[0][e.goodsid]&&s.cartList[0][e.goodsid][r]?n["eles["+o+"].modelNum"]=s.cartList[0][e.goodsid][r].num:n["eles["+o+"].modelNum"]=0);a.setData(n)},this.verticalListSureChooseModel=function(t){clearTimeout(e.takeoutTimeout);var a=b.appMethod.getAppCurrentPage(),n=t.currentTarget.dataset,o={},i=n.compindex,s=a.data.eles[i],c=s.modelGoodsId,l=+s.modelPrice,d=s.modelChooseId,u=a["verticalList"+i].goods_model_list[c].goods_model[d];if(!s.modelPrice)return void b.appMethod.showModal({content:"请选择规格"});if(u.stock<=u.totalNum)return void b.appMethod.showModal({content:"该规格库存不足"});o["eles["+i+"].mdelInfo"]=u,o["eles["+i+"].cartGoodsIdList"]=s.cartGoodsIdList;var m=u.totalNum+1;o["eles["+i+"].goods_data_list."+c]=s.goods_data_list[c],o["eles["+i+"].goods_data_list."+c].totalNum=s.goods_data_list[c].totalNum+1,o["eles["+i+"].goods_data_list."+c].goods_model[d]=u,o["eles["+i+"].goods_data_list."+c].goods_model[d].totalNum++,o["eles["+i+"].TotalPrice"]=(Number(s.TotalPrice)+Number(l)).toFixed(2),o["eles["+i+"].isDeliver"]=(+s.shopInfo.min_deliver_price-o["eles["+i+"].TotalPrice"]).toFixed(2),o["eles["+i+"].TotalNum"]=++s.TotalNum,o["eles["+i+"].hideSearchInput"]=!1,o["eles["+i+"].cartList[0]."+c]=s.cartList[0][c]||{},o["eles["+i+"].cartList[0]."+c][d]={modelName:s.modelChoose.join(" | "),modelId:d,num:m,price:l,id:c,gooodsName:s.goods_data_list[c].name,totalPrice:(u.totalNum*l).toFixed(2),stock:u.stock,cart_id:0,pick_up_type:s.goods_data_list[c].pick_up_type},!s.customFeature.is_together&&s.goods_data_list[c].is_vip_goods&&(o["eles["+i+"].cartList[0]."+c][d].is_vip_goods=1),-1==o["eles["+i+"].cartGoodsIdList"].indexOf(+c)&&o["eles["+i+"].cartGoodsIdList"].push(+c),s.modelNum?o["eles["+i+"].modelNum"]=+s.modelNum+1:o["eles["+i+"].modelNum"]=1,a.setData(o,function(){var e=s.cartList[0],t=0;for(var n in e)for(var o in e[n])t+=e[n][o].num;a.setData((0,r.default)({},"eles["+i+"].myCartNum",t))}),e.takeoutTimeout=setTimeout(function(){var t={goods_type:0,cartListData:s.cartList,thisPage:a,compindex:i};e._addTakeoutCart(t,e.eachCartList(t),null,c)},300)},this.verticalListMinuModel=function(t){clearTimeout(e.takeoutTimeout);var a=b.appMethod.getAppCurrentPage(),n=t.currentTarget.dataset,o={},i=n.compindex,s=a.data.eles[i],c=s.modelGoodsId,l=+s.modelPrice,d=s.modelChooseId;o["eles["+i+"].cartList[0]."+c]=s.cartList[0][c],o["eles["+i+"].goods_data_list."+c]=s.goods_data_list[c],o["eles["+i+"].TotalNum"]=--s.TotalNum,o["eles["+i+"].TotalPrice"]=(Number(s.TotalPrice)-Number(l)).toFixed(2),o["eles["+i+"].isDeliver"]=(+s.shopInfo.min_deliver_price-o["eles["+i+"].TotalPrice"]).toFixed(2),o["eles["+i+"].cartList[0]."+c][d].num--,o["eles["+i+"].cartList[0]."+c][d].totalPrice=Number(l*o["eles["+i+"].cartList[0]."+c][d].num).toFixed(2),o["eles["+i+"].modelNum"]=--s.modelNum,o["eles["+i+"].goods_data_list."+c]&&o["eles["+i+"].goods_data_list."+c].totalNum--;var u=a["verticalList"+i].goods_model_list[c];u&&u.goods_model&&u.goods_model[d].totalNum--,a.setData(o,function(){var e=s.cartList[0],t=0;for(var n in e)for(var o in e[n])t+=e[n][o].num;a.setData((0,r.default)({},"eles["+i+"].myCartNum",t))}),e.takeoutTimeout=setTimeout(function(){var t={goods_type:0,cartListData:a.data.eles[i].cartList,thisPage:a,compindex:i};e._addTakeoutCart(t,e.eachCartList(t),null,c)},300)},this.verticalListHideShoppingCart=function(e){var t=b.appMethod.getAppCurrentPage(),a=e.currentTarget.dataset,n=a.compindex,o={};o["eles["+n+"].shoppingCartShow"]=!1,t.setData(o)},this.verticalListDeleteAllCarts=function(t){var a=t.currentTarget.dataset.compindex,n=b.appMethod.getAppCurrentPage(),o=n.data.eles[a],i=[];if(i=e.getCartIdArray(a,n),0==i.length)return void b.appMethod.showModal({content:"请先添加商品"});e._removeFromCart(i,function(){e._removeFromCartCallback({compData:o,compindex:a,thisPage:n})},a)},this._removeFromCartCallback=function(e){var t={},a=e.compindex,n=e.compData.goods_data_list,o=b.appMethod.getAppCurrentPage(),i=o.data.eles[a].goods_model_list;t["eles["+a+"].cartList"]=[{}],t["eles["+a+"].cart_data"]=[];for(var s in n)n[s].totalNum=0;for(var r in i)for(var c in i[r].goods_model)i[r].goods_model[c].totalNum=0;t["eles["+a+"].goods_data_list"]=n,t["eles["+a+"].cartGoodsIdList"]=[],t["eles["+a+"].TotalNum"]=0,t["eles["+a+"].TotalPrice"]=0,e.compData.shopInfo.min_deliver_price&&(t["eles["+a+"].isDeliver"]=e.compData.shopInfo.min_deliver_price),t["eles["+a+"].shoppingCartShow"]=!0,e.thisPage.setData(t)},this.verticalListCartListMinus=function(t){clearTimeout(e.takeoutTimeout);var a=b.appMethod.getAppCurrentPage(),n=t.currentTarget.dataset,o=(a.data,{}),i=n.compindex,s=n.goodsid,r=n.price,c=n.modelid,l=a.data.eles[i],d=n.index;n.id;if(0!=l.cartList[d][s][c].num){if(o["eles["+i+"].cartList["+d+"]."+s]=l.cartList[d][s],l.goods_data_list[s]&&(o["eles["+i+"].goods_data_list."+s]=l.goods_data_list[s]),0!=c&&a["verticalList"+i].goods_model_list[s]&&a["verticalList"+i].goods_model_list[s].goods_model&&a["verticalList"+i].goods_model_list[s].goods_model[c].totalNum--,o["eles["+i+"].TotalNum"]=--l.TotalNum,o["eles["+i+"].TotalPrice"]=(Number(l.TotalPrice)-Number(r)).toFixed(2),o["eles["+i+"].isDeliver"]=(+l.shopInfo.min_deliver_price-o["eles["+i+"].TotalPrice"]).toFixed(2),o["eles["+i+"].cartList["+d+"]."+s][c].num--,o["eles["+i+"].cartList["+d+"]."+s][c].totalPrice=Number(r*o["eles["+i+"].cartList["+d+"]."+s][c].num).toFixed(2),o["eles["+i+"].goods_data_list."+s]&&o["eles["+i+"].goods_data_list."+s].totalNum--,0===d){var u=l.cartList[0],m=0;for(var p in u)for(var f in u[p])m+=u[p][f].num;o["eles["+i+"].myCartNum"]=m}clearInterval(l.timer),l.loopRequest=!1,a.setData(o),e.takeoutTimeout=setTimeout(function(){var t={goods_type:0,cartListData:l.cartList,thisPage:a,compindex:i,index:d||0};e._addTakeoutCart(t,e.eachCartList(t),null,s)},300)}},this.verticalListCartListPlus=function(t){clearTimeout(e.takeoutTimeout);var a=b.appMethod.getAppCurrentPage(),n={},o=t.currentTarget.dataset,i=o.goodsid,s=o.modelid,r=o.isInBusiness,c=o.num,l=o.stock,d=o.compindex,u=a.data.eles[d],m=o.index;o.id;return c==l?void b.appMethod.showModal({content:"该商品库存不足"}):0==r?void b.appMethod.showModal({content:"该商品不在出售时间"}):(u.goods_data_list[i]&&(n["eles["+d+"].goods_data_list."+i]=u.goods_data_list[i]),n["eles["+d+"].cartList["+m+"]."+i]=u.cartList[m][i],n["eles["+d+"].TotalNum"]=u.TotalNum+1,n["eles["+d+"].TotalPrice"]=(Number(u.TotalPrice)+Number(u.cartList[m][i][s].price)).toFixed(2),n["eles["+d+"].isDeliver"]=(+u.shopInfo.min_deliver_price-n["eles["+d+"].TotalPrice"]).toFixed(2),+s?(u.goods_data_list[i]&&(n["eles["+d+"].goods_data_list."+i].totalNum=++u.goods_data_list[i].totalNum),n["eles["+d+"].cartList["+m+"]."+i][s].num=++u.cartList[m][i][s].num,n["eles["+d+"].cartList["+m+"]."+i][s].totalPrice=Number(n["eles["+d+"].cartList["+m+"]."+i][s].num*u.cartList[m][i][s].price).toFixed(2),a["verticalList"+d].goods_model_list[i]&&a["verticalList"+d].goods_model_list[i].goods_model[s].totalNum++):u.goods_data_list[i]&&u.goods_data_list[i].totalNum?(n["eles["+d+"].goods_data_list."+i].totalNum=++u.goods_data_list[i].totalNum,n["eles["+d+"].cartList["+m+"]."+i][0].num++,n["eles["+d+"].cartList["+m+"]."+i][0].totalPrice=Number(n["eles["+d+"].cartList["+m+"]."+i][0].num*n["eles["+d+"].cartList["+m+"]."+i][0].price).toFixed(2)):(n["eles["+d+"].cartList["+m+"]."+i][0].num++,n["eles["+d+"].cartList["+m+"]."+i][0].totalPrice=Number(n["eles["+d+"].cartList["+m+"]."+i][0].num*n["eles["+d+"].cartList["+m+"]."+i][0].price).toFixed(2)),clearInterval(u.timer),u.loopRequest=!1,a.setData(n),void(e.takeoutTimeout=setTimeout(function(){var t={goods_type:0,cartListData:u.cartList,thisPage:a,compindex:d,index:m||0};e._addTakeoutCart(t,e.eachCartList(t),null,i)},300)))},this.verticalListHideCouponsList=function(e){var t=b.appMethod.getAppCurrentPage(),a=e.currentTarget.dataset,n=a.compindex,o={};o["eles["+n+"].shoppingCouponsList"]=!1,t.setData(o)},this.tapVerticalListCoupon=function(e){var t=e.currentTarget.dataset.id,a=b.appMethod.getPageFranchiseeId(),n=a?"&franchisee="+a:"";pageInstance.returnToVerticalFlag=1,b.appMethod.turnToPage("/pages/couponDetail/couponDetail?detail="+t+n)},this.deleteSingleCarts=function(t){var a=t.currentTarget.dataset,n=b.appMethod.getAppCurrentPage(),o=a.compindex,i=a.goodsid,s=a.modelid,r=n.data.eles[o];e._removeFromCart([r.cartList[0][i][s].cart_id],function(){var e={},t=r.cartList[0][i][s].num,a=(r.cartList[0][i][s].price*t).toFixed(2);delete r.cart_data[i][s],delete r.cartList[0][i][s],util.isPlainObject(r.cart_data[i])&&(delete r.cart_data[i],delete r.cartList[0][i]),e["eles["+o+"].goods_data_list."+i+".totalNum"]=r.goods_data_list[i].totalNum-t,e["eles["+o+"].cart_data"]=r.cart_data,e["eles["+o+"].cartList[0]"]=r.cartList[0],e["eles["+o+"].TotalNum"]=r.TotalNum-t,e["eles["+o+"].TotalPrice"]=(r.TotalPrice-+a).toFixed(2),n.setData(e)},o)},this._removeFromCart=function(t,a,n){var o=b.appMethod.getAppCurrentPage(),i=o.data.eles[n],s=e,r={cart_id_arr:t};i.location_id?r.location_id=i.location_id:r=r,i.loopRequest=!1,clearInterval(i.timer),b.appMethod.sendRequest({url:"/index.php?r=AppShop/deleteCart",method:"post",data:r,chain:!0,subshop:o.franchiseeId||"",hideLoading:!0,success:function(e){a&&a()},fail:function(e){b.appMethod.showModal({content:"清空购物车失败"})},complete:function(){i.loopRequest=!0,i.customFeature.is_together&&i.location_id&&s.getDiningCart(o,n)}})},this._getTakeoutStyleGoodsList=function(t,a,n,o){t.is_integral||(t.is_integral=5);var i=e,s=""==t.idx_arr.idx_value?"all":t.idx_arr.idx_value;t.form="goods",t.only_display_common=0,b.appMethod.sendRequest({hideLoading:!0,url:"/index.php?r=AppShop/GetGoodsList",data:t,method:"post",chain:!0,subshop:a.franchiseeId||"",success:function(e){if(0==e.status){a.requesting=!1;var c=a.data.eles[n],l={},d={},u={};if(d["eles["+n+"].pagination.category"+s]=c.pagination["category"+s],d["eles["+n+"].pagination.category"+s].requesting=!1,a.setData(d),"1"==c.customFeature.loadAllData){var m=void 0;m=b.appMethod.isWeixin()?b.appMethod.globalData.systemInfo.windowWidth?750/b.appMethod.globalData.systemInfo.windowWidth:2:window.innerWidth?750/window.innerWidth:2,c.requestNum++,c.goodsCateHeight[s]={},1==c.customFeature.listArrange?c.goodsCateHeight[s]=(474*Math.ceil(e.data.length/2)+38)/m:c.goodsCateHeight[s]=(226*e.data.length+38)/m}!c.show_goods_data||c.show_goods_data&&!c.show_goods_data["category"+s]||1==o?u["category"+s]=[]:u["category"+s]=c.show_goods_data["category"+s],c.goods_data_list?l["eles["+n+"].goods_data_list"]=c.goods_data_list:l["eles["+n+"].goods_data_list"]={},a["verticalList"+n].goods_model_list||(a["verticalList"+n].goods_model_list={});for(var p in e.data){var f,g=e.data[p].form_data;if(u["category"+s].push({app_id:g.app_id,cover:g.cover,description:g.description,goods_model:g.goods_model?g.goods_model.length:0,id:g.id,price:g.price,sales:g.sales,title:g.title,business_time:g.business_time,is_in_business_time:g.goods_in_business_time,stock:g.stock,virtual_price:g.virtual_price,corner_mark:g.corner_mark,corner_url:g.corner_url,vipGoods:!!(g.paid_vip_card_condition||g.paid_vip_level_condition||g.vip_card_condition||g.vip_level_condition),integral:g.integral,img_urls:g.img_urls||[],max_can_use_integral:Number(g.max_can_use_integral),vip_price:g.vip_min_price==g.vip_max_price?g.vip_min_price:g.vip_min_price+"~"+g.vip_max_price,vip_goods_price:g.vip_goods_price&&0!==g.vip_goods_price&&!c.customFeature.is_together?Number(g.vip_goods_price).toFixed(2):null,calculationPrice:g.vip_goods_price&&0!==g.vip_goods_price&&!c.customFeature.is_together?Number(g.vip_goods_price).toFixed(2):g.price,is_vip_goods:g.is_vip_goods||0}),l["eles["+n+"].goods_data_list"][""+g.id]=(f={totalNum:0,stock:g.stock,goods_model:g.goods_model?g.goods_model.length:0,name:g.title,price:g.price,in_business_time:g.goods_in_business_time,model:{}},(0,r.default)(f,"goods_model",{}),(0,r.default)(f,"pick_up_type",g.pick_up_type),(0,r.default)(f,"paid_vip_card_condition",g.paid_vip_card_condition),(0,r.default)(f,"paid_vip_level_condition",g.paid_vip_level_condition),(0,r.default)(f,"vip_card_condition",g.vip_card_condition),(0,r.default)(f,"vip_level_condition",g.vip_level_condition),(0,r.default)(f,"vip_price",g.vip_min_price==g.vip_max_price?g.vip_min_price:g.vip_min_price+"~"+g.vip_max_price),(0,r.default)(f,"vip_goods_price",g.vip_goods_price&&0!==g.vip_goods_price&&!c.customFeature.is_together?Number(g.vip_goods_price).toFixed(2):null),(0,r.default)(f,"calculationPrice",g.vip_goods_price&&0!==g.vip_goods_price&&!c.customFeature.is_together?Number(g.vip_goods_price).toFixed(2):g.price),(0,r.default)(f,"is_vip_goods",g.is_vip_goods||0),f),g.goods_model){var h={};for(var v in g.goods_model)h[g.goods_model[v].id]={model:g.goods_model[v].model,stock:g.goods_model[v].stock,price:g.goods_model[v].price,goods_id:g.goods_model[v].goods_id,totalNum:0,vip_price:g.goods_model[v].vip_price&&0!==g.goods_model[v].vip_price?Number(g.goods_model[v].vip_price).toFixed(2):null,is_vip_goods:g.is_vip_goods||0};l["eles["+n+"].goods_data_list"][""+g.id].model={modelData:[],name:g.title},a["verticalList"+n].goods_model_list[g.id]={goods_model:h};for(var _ in g.model)l["eles["+n+"].goods_data_list"][""+g.id].model.modelData.push({name:g.model[_].name,subModelName:g.model[_].subModelName,subModelId:g.model[_].subModelId})}else l["eles["+n+"].goods_data_list"][""+g.id].model={},l["eles["+n+"].goods_data_list"][""+g.id].model[0]={price:g.price,num:0,stock:g.stock,vip_price:g.vip_price&&0!==g.vip_price?Number(g.vip_price).toFixed(2):null,is_vip_goods:g.is_vip_goods&&g.vip_goods_price!=g.price||0}}l["eles["+n+"].show_goods_data.category"+s]=u["category"+s],l["eles["+n+"].in_business_time"]=e.in_business_time,l["eles["+n+"].pagination.category"+s]=c.pagination["category"+s],t.page=e.current_page+1,l["eles["+n+"].pagination.category"+s].param=t,l["eles["+n+"].pagination.category"+s].is_more=e.is_more,l["eles["+n+"].pagination.category"+s].current_page=e.current_page,l["eles["+n+"].modelChoose"]=[],l["eles["+n+"].modelIdArr"]=[],l["eles["+n+"].loading"]=!1,l["eles["+n+"].loadingFail"]=!1,l["eles["+n+"].loadFirstCate"]=!1,a.setData(l),"1"==c.customFeature.loadAllData?c.requestNum==c.content.length&&(c.customFeature.is_together?(c.loopRequest=!0,i.getMultiOrderingVerticalCart(n,a,!1),c.location_id&&i.getDiningCart(a,n)):i._getTakeoutStyleCartList(a,n)):c.customFeature.is_together?(c.loopRequest=!0,i.getMultiOrderingVerticalCart(n,a,!1),c.location_id&&i.getDiningCart(a,n)):b.appMethod.globalData.isLogin?i._parseTakeoutCartListData({data:[]},a,n):i._getTakeoutStyleCartList(a,n)}},fail:function(){var e={};e["eles["+n+"].loadingFail"]=!0,e["eles["+n+"].loading"]=!1,a.setData(e)},complete:function(){setTimeout(function(){a.requesting=!1},300)}})},this._getTakeoutStyleCartList=function(t,a){var n=e,o=b.appMethod.getPageFranchiseeId();b.appMethod.sendRequest({hideLoading:!0,url:"/index.php?r=AppShop/cartList",data:{page:-1,page_size:1e3,sub_shop_app_id:o||"",parent_shop_app_id:o?b.appMethod.getAppId():"",not_get_takeout:1},success:function(e){n._parseTakeoutCartListData(e,t,a)},fail:function(e){b.appMethod.showModal({content:"购物车数据请求失败，点击确定重新加载",confirm:function(){n._getTakeoutStyleCartList(t,a)}})}})},this._parseTakeoutCartListData=function(t,a,n){var o={},i=!1,s=a.data.eles[n],r=0,c=0;o["eles["+n+"].cart_data"]={};var l=s.goods_data_list||{};if(o["eles["+n+"].goods_data_list"]=l,o["eles["+n+"].cartGoodsIdList"]=[],s.flag=!1,t.data.length){for(var d in t.data){var u=t.data[d];l[u.goods_id]&&(l[u.goods_id].totalNum=0)}o["eles["+n+"].cartlistData"]=[];for(var m in t.data){var p=t.data[m];o["eles["+n+"].cartlistData"].push(p),0==p.goods_type&&(+p.num>+p.stock&&(p.num=p.stock,i=!0),o["eles["+n+"].cart_data"][p.goods_id]||(o["eles["+n+"].cart_data"][p.goods_id]={}),o["eles["+n+"].cart_data"][p.goods_id][p.model_id]={cart_id:p.id},s.goods_data_list[p.goods_id]&&(o["eles["+n+"].goods_data_list"][""+p.goods_id].totalNum+=+p.num,a["verticalList"+n].goods_model_list[p.goods_id+""]&&(a["verticalList"+n].goods_model_list[p.goods_id+""].goods_model?a["verticalList"+n].goods_model_list[p.goods_id+""].goods_model[p.model_id].totalNum+=+p.num:a["verticalList"+n].goods_model_list[p.goods_id+""][0].num+=+p.num)),o["eles["+n+"].cartList[0]."+p.goods_id]||(o["eles["+n+"].cartList[0]."+p.goods_id]={}),-1==o["eles["+n+"].cartGoodsIdList"].indexOf(+p.goods_id)&&o["eles["+n+"].cartGoodsIdList"].push(+p.goods_id),o["eles["+n+"].cartList[0]."+p.goods_id][p.model_id]={list:"list",id:p.goods_id,modelName:p.model_value?p.model_value.join(" | "):"",modelId:p.model_id,num:+p.num,price:+p.price,gooodsName:p.title,totalPrice:Number(p.num*p.price).toFixed(2),stock:p.stock,cart_id:p.id,in_business_time:s.goods_data_list[p.goods_id]&&s.goods_data_list[p.goods_id].in_business_time,pick_up_type:p.pick_up_type,is_vip_goods:p.cart_vip_goods&&p.original_price!=p.price||0},r+=Number(p.num),c+=Number(p.price)*p.num)}if(o["eles["+n+"].TotalNum"]=r,o["eles["+n+"].TotalPrice"]=Number(+c).toFixed(2),o["eles["+n+"].loadFirstCate"]=!1,a.setData(o),i){b.appMethod.showModal({content:"部分商品库存不足，购物车总数量已修改为最大库存"});var f={goods_type:0,cartListData:s.cartList,thisPage:a,compindex:n};e._addTakeoutCart(f,e.eachCartList(f))}}else o["eles["+n+"].TotalNum"]=0,o["eles["+n+"].TotalPrice"]=0,o["eles["+n+"].loadFirstCate"]=!1,a.setData(o)},this._addTakeoutCart=function(t,a,n,o){var i=e,s=t.compindex,r=t.thisPage.data.eles[s],c=b.appMethod.getPageFranchiseeId(),l=b.appMethod.getAppCurrentPage();a.map(function(e){e.pick_up_type&&delete e.pick_up_type});for(var d=[],u=0;u<a.length;u++)o==a[u].goods_id&&d.push(a[u]);var m={cart_info:d,goods_type:t.goods_type,sub_app_id:c||""};r.location_id&&r.customFeature.is_together&&(m.location_id=r.location_id),r.loopRequest=!1,r.addCartComplete=!1,b.appMethod.sendRequest({url:"/index.php?r=AppShop/addVerticalCart",method:"post",hideLoading:!1,data:m,success:function(e){if(0===e.status){var c={};c["eles["+s+"].cart_data."+o]=e.data[o]||{};var l=[],d=!0;for(var u in a){var m=a[u],p=e.data[m.goods_id];p&&p[m.model_id]&&p[m.model_id].stock<m.num&&(d=!1,c["eles["+s+"].cartList[0]."+m.goods_id+"."+m.model_id+".num"]=p[m.model_id].stock,c["eles["+s+"].cartList[0]."+m.goods_id+"."+m.model_id+".totalPrice"]=(p[m.model_id].stock*r.cartList[0][m.goods_id][m.model_id].price).toFixed(2),c["eles["+s+"].cartList[0]."+m.goods_id+"."+m.model_id+".cart_id"]=p[m.model_id].cart_id),m.num>0&&p&&p[m.model_id]&&l.push(p[m.model_id].cart_id)}i.changeStock(e.data,t),n&&n(l),t.thisPage.setData(c,function(){r.addCartComplete=!0}),d||(b.appMethod.showModal({content:"商品库存不足"}),i.updateGoodsListNum(s,o))}},successStatusAbnormal:function(e){if(1===e.status&&1===e.is_vip_limit&&(r.customFeature.is_together?(r.loopRequest=!0,i.getMultiOrderingVerticalCart(s,l,!0,1)):i._getTakeoutStyleCartList(l,s),o)){var t={},a=r.goods_data_list[o];t["eles["+s+"].goods_data_list."+o]=a,t["eles["+s+"].cartList[0]"]=r.cartList[0],t["eles["+s+"].goods_data_list."+o].totalNum=0;for(var n in r.cartList[0])for(var c in r.cartList[0][n])r.cartList[0][n]&&r.cartList[0][n][c].id==o&&(t["eles["+s+"].modelPrice"]=0,t["eles["+s+"].modelNum"]=0,t["eles["+s+"].goodsModelShow"]=!1,delete t["eles["+s+"].cartList[0]"][o]);return i.getGoodsVipCondtionInfo(s,o),t["eles["+s+"].showVipDialog"]=!0,l.setData(t),!1}},complete:function(){r.loopRequest=!0,r.addCartComplete=!0,r.customFeature.is_together&&r.location_id&&i.getDiningCart(l,s)}})},this.changeStock=function(e,t){var a={};for(var n in e)for(var o in e[n])a["eles["+t.compindex+"].cartList[0]."+n+"."+o+".stock"]=e[n][o].stock,a["eles["+t.compindex+"].goods_data_list."+n+".stock"]=e[n][o].stock,a["eles["+t.compindex+"].cartList[0]."+n+"."+o+".cart_id"]=e[n][o].cart_id;t.thisPage.setData(a)},this.updateGoodsListNum=function(t,a){var n=b.appMethod.getAppCurrentPage(),o=n.data.eles[t],i={},s=0;i["eles["+t+"].TotalNum"]=0,i["eles["+t+"].TotalPrice"]=0;for(var r in o.cartList[0]){var c=0,l=0;for(var d in o.cartList[0][r])c+=+o.cartList[0][r][d].num,l=+(l+ +o.cartList[0][r][d].num*o.cartList[0][r][d].price).toFixed(2);i["eles["+t+"].goods_data_list."+r+".totalNum"]=c,i["eles["+t+"].TotalNum"]+=c,s=(+s+ +l).toFixed(2),i["eles["+t+"].TotalPrice"]=s}n.setData(i),e.takeoutTimeout=setTimeout(function(){var i={goods_type:0,cartListData:o.cartList,thisPage:n,compindex:t};e._addTakeoutCart(i,e.eachCartList(i),null,a)},300)},this.eachCartList=function(e,t){var a=[],n=e.index||0;for(var o in e.cartListData[n])if(void 0!=o)for(var i in e.cartListData[n][o]){var s={goods_id:o.replace("goods",""),model_id:e.cartListData[n][o][i].modelId,num:e.cartListData[n][o][i].num,pick_up_type:e.cartListData[n][o][i].pick_up_type};e.cartListData[n][o][i].cart_id&&(s.id=e.cartListData[n][o][i].cart_id),a.push(s)}return a},this._getAssessList=function(e,t){b.appMethod.sendRequest({hideLoading:!0,url:"/index.php?r=AppShop/getAssessList&idx_arr[0][idx]=goods_type&idx_arr[0][idx_value]=0",data:{page:1,page_size:20,obj_name:"app_id"},chain:!0,subshop:e.franchiseeId||"",success:function(a){for(var n={},o=[],i=0,s=0,r=0,c=0,l=0;l<a.data.length;l++)1==a.data[l].assess_info.has_img&&(i++,o.push(a.data[l])),3==a.data[l].assess_info.level?s++:1==a.data[l].assess_info.level?c++:r++;for(var d=0;d<a.num.length;d++)a.num[d]=parseInt(a.num[d]);n["eles["+t+"].assessActive"]=0,n["eles["+t+"].assessList"]=a.data,n["eles["+t+"].showAssess"]=o,n["eles["+t+"].assessNum"]=a.num,n["eles["+t+"].moreAssess"]=a.is_more,n["eles["+t+"].assessCurrentPage"]=a.current_page,e.setData(n)}})},this.verticalListGoodsListScroll=function(e){var t=b.appMethod.getAppCurrentPage(),a=e.currentTarget.dataset,n=a.compindex,o=t.data.eles[n],i={},s=e.target.scrollTop,r=o.content,c=-40,l=o.goodsCateHeight,d=0;if(o.isChangeTab)return void(o.isChangeTab=!1);for(var u=0;u<r.length;u++)if(c+=l[r[u].source],s<c){r[u].source,d=u;break}if(o.customFeature.selected!==d){var m={};m["eles["+n+"].customFeature.selected"]=d,t.setData(m)}s>100&&o.heightFlag&&0===o.infoHeight?(o.heightFlag=!1,b.appMethod.getBoundingClientRect(".shopInfoHeight",function(e){o.heightFlag=!1,t["verticalList"+n].shopInfoHeight=void 0!=e[0]?e[0].height:0,i["eles["+n+"].infoHeight"]=t["verticalList"+n].shopInfoHeight,t.setData(i)})):s<20&&o.heightFlag&&0!==o.infoHeight&&(o.heightFlag=!1,i["eles["+n+"].infoHeight"]=0,t.setData(i))},this.vlSelectGoodsSameJourney=function(e,t){var a=b.appMethod.getAppCurrentPage(),n=e?e.currentTarget.dataset.compindex:t,o=(a.data.eles[n],a.data.selectSameJourney),i=b.appMethod.getPageFranchiseeId();a.returnToVerticalFlag=1,b.appMethod.turnToPage("/eCommerce/pages/goodsSameJourney/goodsSameJourney?sameJourneyId="+(o?o.id:"")+"&franchiseeId="+i+"&compindex="+n+"&from=preview")},this.getCurrentLocation=function(e,t){var a={};t.data.eles[e];b.appMethod.getLocation({success:function(n){var o=n.latitude,i=n.longitude;b.appMethod.sendRequest({url:"/index.php?r=Map/getAreaInfoByLatAndLng",method:"post",data:{latitude:o,longitude:i},success:function(n){a["eles["+e+"].currentLocationData"]=n.data,t.setData(a)}})}})},this.getCartIdArray=function(e,t){for(var a=t.data.eles[e],n=[],o=0;o<a.cartList.length;o++){var i=a.cartList[o];for(var s in i)for(var r in i[s])i[s][r].num>0&&n.push(i[s][r].cart_id)}return n},this.getMyCartIdArray=function(e,t){var a=t.data.eles[e],n=[],o=a.cartList[0];for(var i in o)for(var s in o[i])o[i][s].num>0&&n.push(o[i][s].cart_id);return n},this.verticalListSettlement=function(t){var a=b.appMethod.getAppCurrentPage(),n=t.currentTarget.dataset.compindex,o=a.data.eles[n],i=b.appMethod.getPageFranchiseeId()||"",s=[],r=e;if(e.saveFormId(t.target.formId),o.addCartComplete){if(s=e.getCartIdArray(n,a),!s.length)return void b.appMethod.showModal({content:"请选择结算的商品"});if(!(1===o.pick_up_type.length&&1==s.length||o.customFeature.is_together))return void r.showSettlement(n);var c=o.currentLocationData,l=o.selectSameJourney,d={cart_id_arr:s,filter_pick_up_type:o.pick_up_type};if(1!=o.pick_up_type.length||4!=o.pick_up_type[0]){if(!l&&!c)return void b.appMethod.turnToPage("/eCommerce/pages/goodsSameJourney/goodsSameJourney?sameJourneyId="+(l?l.id:"")+"&franchiseeId="+i+"&compindex="+n+"&from=preview");var u=l?l.latitude:c.location.lat,m=l?l.longitude:c.location.lng,p=l?l.address_info.district.id:c.region_id;d.latitude=u,d.longitude=m,d.region_id=p}b.appMethod.sendRequest({url:"/index.php?r=AppEcommerce/getCanUsePickUpTypeAtCart",method:"post",data:d,success:function(e){if(e.is_modify&&(o.customFeature.is_together?r.getMultiOrderingVerticalCart(n,a):r._getTakeoutStyleCartList(a,n)),o.customFeature.is_together){if(!e.data||!e.data[4])return void b.appMethod.showModal({content:"下单方式已关闭，无法下单，请联系管理员"});if(0===e.data[4].dining_data.in_business_time)return void b.appMethod.showModal({content:"不在营业时间"})}if(2==o.pick_up_type[0]&&0===e.data[2].intra_city_data.in_business_time)return void b.appMethod.showModal({content:"不在营业时间"});var t=o.selectSameJourneyId,c="/eCommerce/pages/previewGoodsOrder/previewGoodsOrder?cart_arr="+encodeURIComponent(s);i&&(c+="&franchisee="+i),t&&(c+="&addressId="+t),o.location_id&&(c+="&ec_location_id="+o.location_id),o.customFeature.is_together?c+="&is_together=true":c+="&is_together=false",c+="&type="+o.pick_up_type[0],a.returnToVerticalFlag=1,b.appMethod.turnToPage(c)}})}},this.showSettlement=function(t){var a=e,n=b.appMethod.getAppCurrentPage(),o=n.data.eles[t],i=b.appMethod.getPageFranchiseeId(),s=[];s=e.getCartIdArray(t,n);var r=o.currentLocationData,c=o.selectSameJourney;if(!r&&!c)return void b.appMethod.turnToPage("/eCommerce/pages/goodsSameJourney/goodsSameJourney?sameJourneyId="+(c?c.id:"")+"&franchiseeId="+i+"&compindex="+t+"&from=preview");var l=c?c.latitude:r.location.lat,d=c?c.longitude:r.location.lng,u=c?c.address_info.district.id:r.region_id;if(!s.length)return void b.appMethod.showModal({content:"请选择商品"});b.appMethod.sendRequest({url:"/index.php?r=AppEcommerce/getCanUsePickUpTypeAtCart",method:"post",data:{latitude:l,longitude:d,region_id:u,cart_id_arr:s,sub_shop_app_id:i||"",filter_pick_up_type:o.pick_up_type},success:function(e){e.is_modify&&(o.customFeature.is_together?a.getMultiOrderingVerticalCart(t,n):a._getTakeoutStyleCartList(n,t));var i=e.data,s=void 0,r=0;if(!i.hasOwnProperty(1)||i.hasOwnProperty(2)||i.hasOwnProperty(3)||i.hasOwnProperty(4)||(s=i[1].cart_list,r=1),i.hasOwnProperty(1)||!i.hasOwnProperty(2)||i.hasOwnProperty(3)||i.hasOwnProperty(4)||(s=i[2].cart_list,r=2),i.hasOwnProperty(1)||i.hasOwnProperty(2)||!i.hasOwnProperty(3)||i.hasOwnProperty(4)||(s=i[3].cart_list,r=3),i.hasOwnProperty(1)||i.hasOwnProperty(2)||i.hasOwnProperty(3)||!i.hasOwnProperty(4)||(s=i[4].cart_list,r=4),s){var c=b.appMethod.getPageFranchiseeId(),l=o.selectSameJourneyId?o.selectSameJourneyId.id:void 0,d="/eCommerce/pages/previewGoodsOrder/previewGoodsOrder?cart_arr="+encodeURIComponent(s);return c&&(d+="&franchisee="+c),l&&(d+="&addressId="+l),o.location_id&&(d+="&ec_location_id="+o.location_id),o.customFeature.is_together?d+="&is_together=true":d+="&is_together=false",d+="&type="+r,n.returnToVerticalFlag=1,void b.appMethod.turnToPage(d)}var u={};u["eles["+t+"].canUsePickUpType"]=i,u["eles["+t+"].intraCityData"]=i[2]&&i[2].intra_city_data||"",u["eles["+t+"].dining_data"]=i[4]&&i[4].dining_data||"",u["eles["+t+"].showSettlementMask"]=!0,n.setData(u)}})},this.verticalListCloseSettlement=function(e){var t=b.appMethod.getAppCurrentPage(),a={},n=e.currentTarget.dataset.compindex;t.data.eles[n];a["eles["+n+"].showSettlementMask"]=!1,t.setData(a)},this.goodsPay=function(e){var t=b.appMethod.getAppCurrentPage(),a=e.currentTarget.dataset,n=a.compindex,o=t.data.eles[n],i=b.appMethod.getPageFranchiseeId(),s=[],r=e.currentTarget.dataset.type,c=e.currentTarget.dataset.cartId,l=o.selectSameJourneyId?o.selectSameJourneyId.id:void 0;s=c;var d="/eCommerce/pages/previewGoodsOrder/previewGoodsOrder?type="+r+"&cart_arr="+encodeURIComponent(s);i&&(d+="&franchisee="+i),l&&(d+="&addressId="+l),o.location_id&&(d+="&ec_location_id="+o.location_id),o.customFeature.is_together?d+="&is_together=true":d+="&is_together=false",d+="&type="+r,t.returnToVerticalFlag=1,b.appMethod.turnToPage(d)},this.verticalListCloseVipDialog=function(e){var t=b.appMethod.getAppCurrentPage(),a=e.currentTarget.dataset,n=a.compindex,o={};o["eles["+n+"].showVipDialog"]=!1,t.setData(o)},this.getGoodsVipCondtionInfo=function(e,t){var a=b.appMethod.getAppCurrentPage(),n=(a.data.eles[e],{});b.appMethod.sendRequest({url:"/index.php?r=AppShop/getGoodsVipCondtionInfo",method:"post",hideLoading:!1,data:{goods_id:t},success:function(t){0==t.status&&(n["eles["+e+"].vipCondtionInfo"]=t.data,a.setData(n))}})},this.scanMove=function(e){e.stopPropagation;var t=b.appMethod.getAppCurrentPage(),a=e.currentTarget.dataset,n=a.compindex,o=e.changedTouches[0].clientY,i=b.appMethod.getSystemInfoSync().windowWidth,s=b.appMethod.getSystemInfoSync().windowHeight-208/750*i;o=o<120?120:o>s?s:o,t.setData((0,r.default)({},"eles["+n+"].scanCode",o))},this.scanShopping=function(t){var a=b.appMethod.getAppCurrentPage(),n=t.currentTarget.dataset,o=n.compindex,i=a.data.eles[o],s=e,c=i.location_id||0,l=[],d=b.appMethod.getPageFranchiseeId()||"";l=s.getMyCartIdArray(o,a),b.appMethod.scanCode({success:function(e){var t=e.path;if(!t)return void b.appMethod.showModal({content:"位置码错误"});var n=t.match(/\ec_location_id=(\S*)/)&&t.match(/\ec_location_id=(\S*)/)[1];if(!n)return void b.appMethod.showModal({content:"位置码错误"});b.appMethod.sendRequest({url:"/index.php?r=AppEcommerce/getEcLocationData",data:{id:n,sub_shop_app_id:d||""},hideLoading:!0,success:function(e){if(0===e.status){i.location_id=n,a.setData((0,r.default)({},"eles["+o+"].location_id",n));var t=b.appMethod.getPageFranchiseeId();if(t?(b.appMethod.globalData[t]={},b.appMethod.globalData[t].ec_location_id=n):b.appMethod.globalData.ec_location_id=n,setTimeout(function(){b.appMethod.hideToast(),b.appMethod.showToast({title:"已获取桌位号，可立即点餐啦",icon:"none",duration:2e3})},1e3),!i.customFeature.is_together)return;var u={location_id:n,cart_id_arr:l,sub_shop_app_id:d||""};c&&(u.pre_location_id=c),b.appMethod.sendRequest({url:"/index.php?r=AppEcommerce/scanQrcodeInitCartUserInfo",method:"post",data:u,hideLoading:!0,success:function(e){i.loopRequest=!0,s.getDiningCart(a,o)}})}}})},fail:function(e){console.log(e.errMsg)}})},this.getMultiOrderingVerticalCart=function(t,a,n,o){var i=e,s=a.data.eles[t],c={get_user_list:1,page:-1,page_size:1e3,sub_shop_app_id:b.appMethod.getPageFranchiseeId()||""};s.location_id&&(c.location_id=s.location_id),b.appMethod.sendRequest({url:"/index.php?r=AppEcommerce/getMultiOrderingVerticalCart",method:"get",data:c,hideLoading:!1!==n,success:function(e){if(s.flag=!1,s.loopRequest&&(s.loopRequest=!1,0==e.status)){e.is_notice&&(a.setData((0,r.default)({},"eles["+t+"].cartList",[{}])),b.appMethod.showModal({content:"您的同桌"+e.buyer_nickname+"已下单"})),s.user_list&&e.user_list.length===s.user_list.length||a.setData((0,r.default)({},"eles["+t+"].user_list",e.user_list));for(var n=e.buyer_info,c=e.user_list,l={},d=0;d<c.length;d++)c[d].is_myself&&(l=c[d]);for(var u=!1,m=0;m<n.length;m++)l.buyer_id===n[m].buyer_id&&(u=!0,n.unshift(n.splice(m,1)[0]));u||n.unshift(l),a.setData((0,r.default)({},"eles["+t+"].buyer_info",n)),(e.is_reload||o||s.is_init)&&(s.is_init=!1,a.setData({},function(){i._parseDinningCartListData(e,a,t)}))}},complete:function(){s.loopRequest=!0},fail:function(){b.appMethod.showModal({content:"购物车数据请求失败，点击确定重新加载",confirm:function(){i.getMultiOrderingVerticalCart(t,a,n,o)}})}})},this._parseDinningCartListData=function(t,a,n){var o={},i=!1,s=a.data.eles[n],r=0,c=0;o["eles["+n+"].cart_data"]={};var l=s.goods_data_list||{};o["eles["+n+"].cartGoodsIdList"]=[],s.flag=!1;for(var d in l)l[d].totalNum=0;if(o["eles["+n+"].goods_data_list"]=l,t.data.length){o["eles["+n+"].cartlistData"]=[];for(var u=t.buyer_info,m=t.data,p=[],f=0;f<u.length;f++){p[f]={};for(var g=0;g<m.length;g++){var h=m[g];o["eles["+n+"].cartlistData"].push(h),0==h.goods_type&&(+h.num>+h.stock&&(h.num=h.stock,i=!0),o["eles["+n+"].cart_data"][h.goods_id]||(o["eles["+n+"].cart_data"][h.goods_id]={}),o["eles["+n+"].cart_data"][h.goods_id][h.model_id]={cart_id:h.id},s.goods_data_list[h.goods_id]&&0==f&&(o["eles["+n+"].goods_data_list"][""+h.goods_id].totalNum+=+h.num,a["verticalList"+n].goods_model_list[h.goods_id+""]&&(a["verticalList"+n].goods_model_list[h.goods_id+""].goods_model?a["verticalList"+n].goods_model_list[h.goods_id+""].goods_model[h.model_id].totalNum=+h.num:a["verticalList"+n].goods_model_list[h.goods_id+""][0].num+=+h.num)),-1==o["eles["+n+"].cartGoodsIdList"].indexOf(+h.goods_id)&&o["eles["+n+"].cartGoodsIdList"].push(+h.goods_id),h.buyer_id===u[f].buyer_id&&(p[f][h.goods_id]=p[f][h.goods_id]||{},p[f][h.goods_id][h.model_id]={list:"list",id:h.goods_id,modelName:h.model_value?h.model_value.join(" | "):"",modelId:h.model_id,num:+h.num,price:+h.price,gooodsName:h.title,totalPrice:Number(h.num*h.price).toFixed(2),stock:h.stock,cart_id:h.id,in_business_time:s.goods_data_list[h.goods_id]&&s.goods_data_list[h.goods_id].in_business_time,pick_up_type:h.pick_up_type,is_vip_goods:h.cart_vip_goods&&h.original_price!=h.price||0})),0==f&&(r+=Number(h.num),c+=Number(h.price)*h.num)}}var v=p[0],_=0;for(var y in v)for(var E in v[y])_+=v[y][E].num;if(o["eles["+n+"].myCartNum"]=_,o["eles["+n+"].cartList"]=p,o["eles["+n+"].TotalNum"]=r,o["eles["+n+"].TotalPrice"]=Number(+c).toFixed(2),o["eles["+n+"].loadFirstCate"]=!1,a.setData(o),i){b.appMethod.showModal({content:"部分商品库存不足，购物车总数量已修改为最大库存"});var N={goods_type:0,cartListData:s.cartList,thisPage:a,compindex:n};e._addTakeoutCart(N,e.eachCartList(N))}}else o["eles["+n+"].TotalNum"]=0,o["eles["+n+"].TotalPrice"]=0,o["eles["+n+"].loadFirstCate"]=!1,a.setData(o);a.setData(o)},this.getDiningCart=function(t,a){var n=t.data.eles[a],o=e;clearInterval(n.timer),n.timer=setInterval(function(){o.getMultiOrderingVerticalCart(a,t,!0)},4e3)},this.verticalListDeleteBuyerCarts=function(t){var a=b.appMethod.getAppCurrentPage(),n=t.currentTarget.dataset,o=n.compindex,i=a.data.eles[o],s=e,r=n.index,c=[],l=i.cartList[r];for(var d in l)for(var u in l[d])l[d][u].num>0&&c.push(l[d][u].cart_id);if(0==c.length)return void b.appMethod.showModal({content:"请先添加商品"});e._removeFromCart(c,function(){s._removeByerCartCallback({compData:i,compindex:o,thisPage:a,index:r})},o)},this._removeByerCartCallback=function(e){var t={},a=e.compindex,n=e.compData.goods_data_list,o=b.appMethod.getAppCurrentPage(),i=o[a].goods_model_list,s=e.index;t["eles["+a+"].cartList["+s+"]"]=[{}];var r=e.compData.cartList[s],c=0,l=0;for(var d in r)for(var u in r[d])c+=Number(r[d][u].num),l+=Number((r[d][u].num*r[d][u].price).toFixed(2)),n[d]&&(n[d].totalNum-=r[d][u].num);for(var m in i)for(var p in i[m].goods_model)i[m].goods_model[p].totalNum=0;0===s&&(t["eles["+a+"].myCartNum"]=0),t["eles["+a+"].goods_data_list"]=n,t["eles["+a+"].TotalNum"]=e.compData.TotalNum-c,t["eles["+a+"].TotalPrice"]=Number(e.compData.TotalPrice-l).toFixed(2),e.compData.shopInfo.min_deliver_price&&(t["eles["+a+"].isDeliver"]=e.compData.shopInfo.min_deliver_price),t["eles["+a+"].shoppingCartShow"]=!0,e.thisPage.setData(t)},this.saveFormId=function(e){b.appMethod.sendRequest({hideLoading:!0,url:"/index.php?r=api/AppMsgTpl/SaveUserFormId",data:{form_id:e},method:"post",success:function(e){console.log(e)}})},this.scrollStart=function(e){b.appMethod.scrollStart(e)},this.scrollMove=function(e){b.appMethod.scrollMove(e)},this.scrollEnd=function(e){b.appMethod.scrollEnd(e)},this.stopAnimation=function(e){b.appMethod.stopAnimation(e)},this.previewImage=function(e){b.appMethod.previewImage(e)},this.stopPropagation=function(e){e.stopPropagation()}};t.default=w},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(0),i=n(o),s=a(3),r=n(s),c=a(1),l=n(c),d=a(2),u=n(d),m=a(4),p=n(m),f=a(5),g=a(6);a(723);var h=function(e){function t(e){(0,i.default)(this,t);var a=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));v.call(a);var n=e.index,o=f.appMethod.getAppCurrentPage();return a.init(n,o),a}return(0,u.default)(t,e),(0,r.default)(t,[{key:"render",value:function(){var e=this,t=this.props.data,a=t.customFeature,n=(0,g.convertStyleData)(t.style),o=a.styleColor;return p.default.createElement("div",{className:"custom-component stored-value",style:n},t.stored_value_list&&0!==t.stored_value_list.length&&t.stored_value_list.map(function(t,a){return p.default.createElement("div",{className:"value-item",key:a,style:{borderTopColor:o},onClick:e.turnToStoredValue,"data-storedid":t.id},p.default.createElement("div",{className:"item-info"},p.default.createElement("div",{className:"pirce-info"},p.default.createElement("div",{className:"title"},t.price,"元储值金"),p.default.createElement("div",{className:"gift"},t.instructions)),p.default.createElement("div",{className:"btn-wrap"},p.default.createElement("div",{className:"btn",style:{backgroundColor:o},onClick:e.gotoRecharge,"data-storedid":t.id},"立即充值"),p.default.createElement("div",{className:"fir-color",style:{backgroundColor:o}}),p.default.createElement("div",{className:"sec-color",style:{backgroundColor:o}}),p.default.createElement("div",{className:"thi-color",style:{backgroundColor:o}}))),p.default.createElement("div",{className:"desc"},"说明：",1==t.description_type?p.default.createElement("span",null,t.description):p.default.createElement("span",null,"请查看详情")))}),t.stored_value_list&&0===t.stored_value_list.length&&p.default.createElement("div",null,"暂无储值"))}}]),t}(p.default.Component),v=function(){var e=this;this.init=function(t,a){e.getItemInfo(t,a)},this.getItemInfo=function(t,a){var n=e,o={};f.appMethod.sendRequest({url:"/index.php?r=AppShop/getStoredItems",success:function(e){if(0!=e.data.length){var i=e.data;o["eles["+t+"].stored_value_list"]=n.givingInstructions(i)}a.setData(o)}})},this.givingInstructions=function(e){var t=!0,a=!1,n=void 0;try{for(var o,i=e[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var s=o.value,r=[],c="";s.g_price=Number(s.g_price),s.g_price&&r.push(s.g_price+"元"),s.g_integral=Number(s.g_integral),s.g_integral&&r.push(s.g_integral+"积分"),s.g_vip_card&&s.g_vip_card.title&&r.push(s.g_vip_card.title),s.g_coupon_list&&s.g_coupon_list.length&&r.push(s.g_coupon_list[0].num+"张"+s.g_coupon_list[0].title);for(var l=0;l<r.length;l++)l!=r.length-1?c=c+r[l]+"、":c+=r[l];c&&(s.instructions="赠送"+c)}}catch(e){a=!0,n=e}finally{try{!t&&i.return&&i.return()}finally{if(a)throw n}}return e},this.turnToStoredValue=function(e){var t=e.currentTarget.dataset.storedid,a="recharge?storedId="+t;f.appMethod.turnToPage(a)},this.gotoRecharge=function(e){var t={type:1};t.stored_id=e.currentTarget.dataset.storedid,t.form_id=e.detail.formId,f.appMethod.sendRequest({url:"/index.php?r=AppShop/creatStoredItemOrder",data:t,success:function(e){if(!e.status){var t=e.data;f.appMethod.goPay({orderId:t,successUrl:"/balance"})}}}),e.stopPropagation()}};t.default=h},function(e,t){},function(e,t,a){"use strict";function n(e){var t=this,a=e.data,n=(e.dynamicData,e.formCompindex),o=e.form_data||{},c=a.customFeature,l=c.segment,d=c.segment,u=(0,i.default)({paddingLeft:".17rem",paddingRight:".27rem"},(0,r.convertStyleData)(a.style)),m=function(e){var a=event.currentTarget.dataset;s.appMethod.getAppCurrentPage(),a.datakey,a.segment,a.formcompid;return void t.noDevelopCompleted()},p=function(){s.appMethod.showModal({content:"该组件【添加视频】在webapp端尚在开发中"})},f=function(){s.appMethod.showModal({content:"该组件【添加视频】未绑定字段 请在电脑编辑页绑定后使用"})},g=function(e){var t=s.appMethod.getAppCurrentPage(),a=n,i="eles["+a+"].form_data."+c.segment;s.appMethod.showModal({content:"确定删除该视频？",showCancel:!0,confirm:function(){var e={};o[l].splice(index,1),e[i]=o[l],t.setData(e)}})},h=function(e){console.log("暂未处理")},v=function(e){console.log("暂未处理")};return React.createElement("div",{className:"custom-component upload-video "+(a.segment_required?"must":""),style:u},o[l]&&o[l].map(function(e,t){return React.createElement("div",{key:e,className:"has-upload-video"},React.createElement("div",{className:"video-cover"},!e.isFull&&React.createElement("div",{className:"ico-moon icon-closes delete-img",onClick:function(){return g()}}),React.createElement("div",{className:"controls",hidden:e.fileName==e.virtual,onClick:h}),React.createElement("video",{controls:!0,className:"video",onPlay:v})))}),(!o[l]||o[l].length<d)&&React.createElement("div",{className:"plus-div","data-compindex":e.index,"data-formcompid":a.formCompid,"data-segment":a.customFeature.segment,"data-datakey":a.formCompid+".form_data."+a.customFeature.segment,onClick:m},React.createElement("span",null,"＋"),React.createElement("div",null,"添加视频"),l&&React.createElement("div",{onClick:p}),!l&&React.createElement("div",{onClick:f})))}Object.defineProperty(t,"__esModule",{value:!0});var o=a(8),i=function(e){return e&&e.__esModule?e:{default:e}}(o);t.default=n;var s=a(5),r=a(6);a(725)},function(e,t){},function(e,t,a){"use strict";function n(e){var t=e.data,a=e.formCompindex,n=(e.form_data,t.customFeature),o=(0,r.convertStyleData)(t.style),c=(0,r.convertStyleData)(n.titleStyle);c.height=c.lineHeight;var l=(0,r.convertStyleData)(n.contentStyle);l.height=l.lineHeight;var d=n.contents;d.forEach(function(e){e.optionsData=e.options.map(function(e,t){return{label:e,value:e}})});var u=function(o,i){var r=o,c=i,l=s.appMethod.getAppCurrentPage(),d=e.index,u=a,m=n.segment,p="eles["+u+"].content["+d+"]",f="eles["+a+"].form_data."+n.segment;if(!m)return void s.appMethod.showModal({content:"该组件【匿名组件】未绑定字段 请在电脑编辑页绑定后使用"});var g={};g[p+".anonymous"]=t.anonymous||[],g[p+".anonymous"][c]=r,g[f]="实名提交"==r?s.appMethod.globalData.userInfo.nickname||"获取失败":"匿名提交",l.setData(g)};return React.createElement("div",{className:"custom-component anonymous-ele"},React.createElement("div",{className:"drop-down",style:o},React.createElement("div",{style:c},n.name),d.map(function(e,a){return React.createElement(i.default,{key:a,cols:1,data:e.optionsData,onChange:function(e){return u(e,a)}},React.createElement("div",{className:"picker-title",style:l},t.anonymous&&t.anonymous[a]||e.name))})))}Object.defineProperty(t,"__esModule",{value:!0});var o=a(17),i=function(e){return e&&e.__esModule?e:{default:e}}(o);t.default=n,a(16);var s=a(5),r=a(6);a(727)},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(9),i=n(o),s=a(36),r=n(s),c=a(13),l=n(c),d=a(44),u=n(d),m=a(0),p=n(m),f=a(3),g=n(f),h=a(1),v=n(h),_=a(2),y=n(_);a(45);var E=a(4),b=n(E),N=a(5),R=a(6),k=a(11),w=a(21),x=a(40);a(729);var C={stockChange:function(e){var t=e;return e>1e4&&(t=parseInt(e/1e4)+"w"),t}},D=function(e){function t(e){(0,p.default)(this,t);var a=(0,v.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));S.call(a);var n=e.index,o=N.appMethod.getAppCurrentPage();return a.init(n,o),a}return(0,y.default)(t,e),(0,g.default)(t,[{key:"render",value:function(){var e=this,t=this.props.data;console.log("data",t);var a=(0,R.convertStyleData)(t.style);return b.default.createElement("div",{className:"custom-component community-goods-list"},b.default.createElement("div",{className:"element community-goods-list",style:a},t.customFeature.showSearch&&function(){return b.default.createElement("div",{className:"search-box",style:{height:t.customFeature.searchSetting.height,marginTop:t.customFeature.searchSetting["margin-top"]}},b.default.createElement("div",{className:"search-input"},b.default.createElement(u.default,{size:"xxs",type:"search",color:"#999"}),b.default.createElement("input",{type:"text",placeholder:"请输入搜索内容",onKeyDown:function(t){return e.searchGoodsList(t)},"data-compindex":e.props.index})))}(),t.customFeature.showGroup&&function(){return b.default.createElement("div",{className:"community-head",style:{height:t.customFeature.groupSetting.height,marginTop:t.customFeature.groupSetting["margin-top"],background:t.customFeature.groupSetting.background}},b.default.createElement("img",{className:"colone-avatar",src:t.leaderInfo&&t.leaderInfo.logo||"https://cdn.jisuapp.cn/static/jisuapp_editor/images/new-zhichi-default.png"}),b.default.createElement("div",{className:"colone-detail-box"},b.default.createElement("div",{className:"colone-name",style:{color:t.customFeature.groupSetting["group-color"],fontSize:t.customFeature.groupSetting["group-font-size"]}},t.leaderInfo&&t.leaderInfo.nick_name?t.leaderInfo.nick_name+"-":"暂无团长",t.leaderInfo&&t.leaderInfo.housing_estate||""),b.default.createElement("div",{className:"colone-address",style:{color:t.customFeature.groupSetting["address-color"],fontSize:t.customFeature.groupSetting["address-font-size"]}},"自提地址：",t.leaderInfo&&t.leaderInfo.address_detail||"暂未设置")),t.customFeature.groupSetting.changeCaptain&&b.default.createElement("div",{className:"change-captain","data-compindex":t.compindex,onClick:t.leaderInfo?e.chengeCommunityGroup:e.isOpenCommunityGroup,style:{color:t.customFeature.groupSetting["btn-color"],background:t.customFeature.groupSetting["btn-background"]}},b.default.createElement("span",{className:"ico-moon icon-change"}),t.leaderInfo?"切换团长":"申请团长"),!(!t.buyerInfoList||!t.buyerInfoList.length)&&b.default.createElement("div",{className:"scroll-avatar-box"},b.default.createElement("div",{className:"community-buyer-scrollling"},b.default.createElement("div",{className:"scroll-avatar"},b.default.createElement("img",{src:"{{data.buyerInfoList[data.buyerIndex].buyer_info.logo}}"}),b.default.createElement("span",{className:"scroll-name"},t.buyerInfoList[t.buyerIndex].buyer_info.nickname),"下单成功了"))))}(),1==t.customFeature.timeLineSetting.timeLineStyle&&t.customFeature.showTimeline&&function(){return b.default.createElement("div",{className:"time-line-box",onClick:e.getTimeLineGoods,"data-compindex":e.props.index,style:{background:t.customFeature.timeLineSetting.background,marginTop:t.customFeature.timeLineSetting["margin-top"]}},t.customFeature.timeLineSetting.content.map(function(e,a){return b.default.createElement(b.default.Fragment,{key:a},b.default.createElement("div",{"data-type":a,style:{fontWeight:t.status==a?600:"",color:t.status==a?t.customFeature.timeLineSetting["underline-color"]:""}},e.name,t.status==a&&b.default.createElement("span",{className:"under-line",style:{background:t.customFeature.timeLineSetting["underline-color"],height:t.customFeature.timeLineSetting["underline-height"]}})))}))}(),2==t.customFeature.timeLineSetting.timeLineStyle&&t.customFeature.showTimeline&&function(){return b.default.createElement("div",{className:"time-line-box",onClick:e.getTimeLineGoods,"data-compindex":e.props.index,style:{background:t.customFeature.timeLineSetting.background,marginTop:t.customFeature.timeLineSetting["margin-top"]}},t.customFeature.timeLineSetting.content.map(function(e,a){return b.default.createElement(b.default.Fragment,{key:a},e.show&&b.default.createElement("div",{"data-type":a,className:t.status==a?"selected":""},b.default.createElement("span",{"data-type":a,style:{background:t.status==a?t.customFeature.timeLineSetting["slected-color"]:null}},e.name)))}))}(),function(){return b.default.createElement(k.ScrollView,{className:"scroll-ele "+t.type,"scroll-y":"true",bindscrolltolower:e.communityGoodsScrollFunc,style:{height:t.customFeature.height},bindanimationend:"animationEnd","data-compindex":e.props.index,"data-type":t.type},t.communityGoodsData.map(function(a){return b.default.createElement("div",{className:"community-goods-item",key:a.id,"data-leader-token":t.leaderInfo&&t.leaderInfo.user_token,"data-goods-id":a.id,onClick:e.toCommunityGoodsDetail,"data-group-id":a.group_id,style:{marginTop:t.customFeature.margin,height:t.customFeature.goodsList.height}},b.default.createElement("div",{className:"community-goods-image",style:{width:t.customFeature.imgWidth,height:t.customFeature.imgHeight}},b.default.createElement("img",{src:a.cover}),a.form_data.corner_mark>0&&b.default.createElement("img",{className:"goods-subscript",src:a.form_data.corner_url}),2==a.dis_group_status&&b.default.createElement("img",{className:"group-end",src:"http://cdn.jisuapp.cn/static/webapp/images/promotion/group-end.png"}),0==a.stock&&b.default.createElement("img",{className:"group-no-stock",src:"http://cdn.jisuapp.cn/static/webapp/images/promotion/group-no-stock.png"})),b.default.createElement("div",{className:"item-content-box"},b.default.createElement("div",{className:"community-good-title",style:{fontSize:t.customFeature.goodsList["font-size"]}},a.title),(2==a.dis_group_status||0==a.stock)&&b.default.createElement("div",null,b.default.createElement("div",{className:"end-progress-bar-box"},b.default.createElement("span",{className:"ico-moon icon-community-group-fire"}),"已售",a.sales,"件"),b.default.createElement("span",{className:"community-stock"},"剩余",C.stockChange(a.stock),"件")),1==a.dis_group_status&&b.default.createElement("div",null,b.default.createElement("div",{className:"progress-bar-box"},b.default.createElement("span",{className:"ico-moon icon-community-group-fire"}),b.default.createElement("span",null,"已售",a.sales,"件")),b.default.createElement("span",{className:"community-stock"},"剩余",C.stockChange(a.stock),"件")),3==a.dis_group_status||4==a.dis_group_status||5==a.dis_group_status&&b.default.createElement("div",null,b.default.createElement("div",{className:"unstart-progress-bar-box"},b.default.createElement("span",{className:"ico-moon icon-about-start"}),"即将开始"),b.default.createElement("span",{className:"community-stock"},"仅剩",C.stockChange(a.stock),"件")),b.default.createElement("div",{className:"community-good-price "+(2==a.dis_group_status||0==a.stock?"end-pirce":"")},b.default.createElement("span",{className:"community-price-icon"},"¥"),a.form_data.max_price||a.price,0!=a.virtual_price&&b.default.createElement("span",{className:"community-virtual-price"},"¥",a.form_data.virtual_max_price||a.virtual_price)),1==a.dis_group_status&&0!=a.stock&&b.default.createElement("div",{className:"add-community-cart ico-moon icon-community-group-goods-cart",onClick:e.addCommunityCart,"data-compindex":e.props.index,"data-id":a.id})))}),t.loading&&b.default.createElement(w.RequestStatus,{is:"requestLoading"}),0==t.is_more&&0==t.communityGoodsData.length&&b.default.createElement(w.RequestStatus,{is:"requestNone",data:{data:"暂无活动商品~"}}),t.loadingFail&&b.default.createElement(w.RequestStatus,{is:"requestFail",data:{refreshEvent:"communityGoodsScrollFunc",compindex:e.props.index}}),0==t.is_more&&t.communityGoodsData.length>0&&t.customFeature.isShowFinishText&&b.default.createElement(w.RequestStatus,{is:"requestAll"}),1==t.customFeature.vesselAutoheight&&1==t.customFeature.loadingMethod&&!!+t.is_more&&0!=t.is_more&&!t.loading&&!t.loadingFail&&b.default.createElement(x.LoadingBtn,{customFeature:t.customFeature,"data-compindex":e.props.index,onClick:e.communityGoodsScrollFunc}))}(),function(){return b.default.createElement("div",{className:"goods-detail-dialog",hidden:!t.showGoodsDetail},b.default.createElement("div",{className:"goods-detail-contain"},b.default.createElement("div",{className:"ico-moon icon-closes",onClick:e.hideGoodsDialog,"data-compindex":e.props.index}),b.default.createElement("div",{className:"goods-detail-header"},b.default.createElement("img",{className:"community-goods-cover",src:t.selectGoodsModelInfo&&t.selectGoodsModelInfo.imgurl||t.goodsDetail&&t.goodsDetail.cover}),b.default.createElement("div",{className:"select-goods-info"},b.default.createElement("div",{className:"community-goods-price"},b.default.createElement("span",null,"¥",t.selectGoodsModelInfo&&t.selectGoodsModelInfo.price)),b.default.createElement("div",{className:"community-goods-stock"},"库存",t.selectGoodsModelInfo&&t.selectGoodsModelInfo.stock),t.selectGoodsModelInfo&&t.selectGoodsModelInfo.models_text&&b.default.createElement("div",{className:"select-model"},"已选：",t.selectGoodsModelInfo.models_text))),b.default.createElement("div",{className:"goods-detail-content"},b.default.createElement("div",{className:"goods-dialog-content",hidden:!(t.goodsDetail&&t.goodsDetail.model.length)},t.goodsDetail&&t.goodsDetail.model.map(function(a,n){return b.default.createElement("div",{className:"goods-model",key:n},b.default.createElement("div",{className:"model-title"},a.name),b.default.createElement("div",{className:"sub-model"},a.subModelName(function(o,i){return b.default.createElement("text",{key:i,"data-compindex":e.props.index,"data-model-index":n,"data-submodel-index":i,className:"subModel "+(t.selectGoodsModelInfo.models[n]==a.subModelId[i]?"select":""),"data-submodel-id":a.subModelId[i],onClick:e.selectGoodsSubModel},o)})))}))),b.default.createElement("div",{className:"goods-num-contain"},b.default.createElement("span",{className:"goods-num-title"},"购买数量："),b.default.createElement("div",{className:"good-number-box pull-right"})),b.default.createElement("div",{className:"goods-shopping-bottom"},b.default.createElement("div",{className:"add-shoppingcart",onClick:e.sureAddToShoppingCart,"data-compindex":e.props.index},"加入购物车"))))}()))}}]),t}(b.default.Component),S=function(){var e=this;this.init=function(t,a){e.getGoodsIdxList(t);var n=e,o=a.data.eles[t].customFeature,i=N.appMethod.globalData.locationInfo,s={},r={};if(r["eles["+t+"].communityGoodsData"]=[],a.setData(r),o.groupSetting.height.indexOf("rem")<0){o.margin=2.34*parseInt(o.margin)/100+"rem",o.imgWidth=2.34*parseInt(o.imgWidth)/100+"rem",o.imgHeight=2.34*parseInt(o.imgHeight)/100+"rem",o.groupSetting.height=2.34*parseInt(o.groupSetting.height)/100+"rem",o.groupSetting["margin-top"]=2.34*parseInt(o.groupSetting["margin-top"])/100+"rem",o.groupSetting["address-font-size"]=2.34*parseInt(o.groupSetting["address-font-size"])/100+"rem",o.groupSetting["group-font-size"]=2.34*parseInt(o.groupSetting["group-font-size"])/100+"rem",o.timeLineSetting.height=2.34*parseInt(o.timeLineSetting.height)/100+"rem",o.timeLineSetting["margin-top"]=2.34*parseInt(o.timeLineSetting["margin-top"])/100+"rem",o.timeLineSetting["underline-height"]=2.34*parseInt(o.timeLineSetting["underline-height"])/100+"rem",o.timeLineSetting["font-size"]=2.34*parseInt(o.timeLineSetting["font-size"])/100+"rem",o.searchSetting.height=2.34*parseInt(o.searchSetting.height)/100+"rem",o.searchSetting["margin-top"]=2.34*parseInt(o.searchSetting["margin-top"])/100+"rem",o.goodsList["font-size"]=2.34*parseInt(o.goodsList["font-size"])/100+"rem",o.goodsList.height=2.34*parseInt(o.goodsList.height)/100+"rem",1==o.vesselAutoheight||2==o.vesselAutoheight?o.height="auto":o.height=2.34*parseInt(o.height)/100+"rem";var c={};c["eles["+t+"].customFeature"]=o,a.setData(c)}if(o.showTimeline){for(var l={},d=o.timeLineSetting.content,u=0;u<d.length;u++)if(d[u].show){l["eles["+t+"].status"]=u;break}a.setData(l)}else{var m={};o.startActive&&!o.finishActive?m["eles["+t+"].status"]=5:!o.startActive&&o.finishActive?m["eles["+t+"].status"]=6:o.startActive&&o.finishActive?m["eles["+t+"].status"]=7:o.startActive||o.finishActive||(m["eles["+t+"].status"]=0),a.setData(m)}return a.data.eles[t].leaderInfo?void n.getCommunityGoodsList(t):N.appMethod.globalData.communityUserToken?void e.checkGroupGoodsLeader(t,N.appMethod.globalData.communityUserToken):void N.appMethod.getStorage({key:"groupToken",complete:function(e){e&&e.data?n.checkGroupGoodsLeader(t,e.data):i.latitude?(n.latitude=i.latitude,n.longitude=i.longitude,n.getGoodsGroupList(t,s)):N.appMethod.getLocation({type:"gcj02",success:function(e){var o=e.latitude,i=e.longitude;a.requestNum++,N.appMethod.sendRequest({hideLoading:!0,url:"/index.php?r=Map/GetAreaInfoByLatAndLng",data:{latitude:o,longitude:i},success:function(e){N.appMethod.setLocationInfo({latitude:o,longitude:i,address:e.data.formatted_addresses.recommend,info:e.data})}}),n.latitude=o,n.longitude=i,n.getGoodsGroupList(t)},fail:function(e){var n={};"getLocation:fail auth deny"===e.errMsg||"getLocation:fail:auth denied"===e.errMsg?n["eles["+t+"].location_address"]="已拒绝定位":n["eles["+t+"].location_address"]="定位失败",a.setData(n)}})}})},this.getGoodsGroupList=function(t){var a=e,n=N.appMethod.getAppCurrentPage();N.appMethod.sendRequest({url:"/index.php?r=AppDistributionExt/GetDistributorExtList",method:"post",data:{latitude:e.latitude,longitude:e.longitude,is_audit:1,filter_deleted:1},success:function(e){if(e.data.length){var o={};o["eles["+t+"].leaderInfo"]=e.data[0],N.appMethod.setStorage({key:"groupToken",data:e.data[0].user_token}),n.setData(o)}a.getCommunityGoodsList(t)}})},this.communityGoodsScrollFunc=function(t){var a=N.appMethod.getAppCurrentPage(),n="object"==(void 0===t?"undefined":(0,l.default)(t))?t.currentTarget.dataset.compindex:t,o=a.data.eles[n],i=o.page+1,s={};!o.loading&&o.is_more&&(s["eles["+n+"].page"]=i,s["eles["+n+"].loading"]=!0,s["eles["+n+"].loadingFail"]=!1,a.setData(s),e.getCommunityGoodsList(n))},this.chengeCommunityGroup=function(e){var t=N.appMethod.getAppCurrentPage(),a=e.currentTarget.dataset.compindex,n=t.data.eles[a].leaderInfo.user_token,o=N.appMethod.returnSubPackageRouter("communityGroupSearchVillage");N.appMethod.turnToPage(o+"?token="+n+"&compindex="+a)},this.toCommunityGoodsDetail=function(e){var t=e.currentTarget.dataset.goodsId,a=e.currentTarget.dataset.groupId,n=e.currentTarget.dataset.leaderToken||"",o=N.appMethod.returnSubPackageRouter("commuGroupGoods")+"?goodsId="+t+"&group_id="+a+"&leaderToken="+n;N.appMethod.turnToPage(o)},this.getCommunityGoodsList=function(e){var t=N.appMethod.getAppCurrentPage(),a=t.data.eles[e];N.appMethod.sendRequest({hideLoading:!0,url:"/index.php?r=AppDistributionExt/GetAppDistributionGroupGoodsList",method:"post",data:{idx_arr:{idx:"title",idx_value:a.idx_value},is_stock_gte_zero:a.customFeature.soldOut?1:0,status:a.status>=0?a.status+1:-1,page_size:a.customFeature.loadingNum||10,page:a.page||1,leader_token:a.leaderInfo?a.leaderInfo.user_token:""},success:function(n){var o={},i=a.communityGoodsData||[];o["eles["+e+"].communityGoodsData"]=[].concat((0,r.default)(i),(0,r.default)(n.data)),o["eles["+e+"].is_more"]=n.is_more,o["eles["+e+"].page"]=n.current_page,o["eles["+e+"].loading"]=!1,o["eles["+e+"].loadingFail"]=!1,t.setData(o)},fail:function(){var a={};a["eles["+e+"].loadingFail"]=!0,a["eles["+e+"].loading"]=!1,t.setData(a)}})},this.getTimeLineGoods=function(t){var a=N.appMethod.getAppCurrentPage(),n={},o=t.target.dataset.type,i=t.currentTarget.dataset.compindex;if(!a.data.eles[i].leaderInfo)return void N.appMethod.showModal({content:"暂无团长，无法搜索"});n["eles["+i+"].communityGoodsData"]=[],n["eles["+i+"].status"]=o,n["eles["+i+"].page"]=1,n["eles["+i+"].is_more"]=1,a.setData(n),e.getCommunityGoodsList(i)},this.searchGoodsList=function(t){if(13===t.keyCode){var a={},n=N.appMethod.getAppCurrentPage(),o=t.currentTarget.dataset.compindex,i=t.target.value;if(!n.data.eles[o].leaderInfo)return void N.appMethod.showModal({content:"暂无团长，无法搜索"});a["eles["+o+"].communityGoodsData"]=[],a["eles["+o+"].idx_value"]=i,a["eles["+o+"].page"]=1,a["eles["+o+"].is_more"]=1,n.setData(a),e.getCommunityGoodsList(o)}},this.hideGoodsDialog=function(e){var t=N.appMethod.getAppCurrentPage(),a=e.currentTarget.dataset.compindex,n={};n["eles["+a+"].showGoodsDetail"]=!1,t.setData(n)},this.addCommunityCart=function(e){e.stopPropagation();var t=N.appMethod.getAppCurrentPage(),a=e.currentTarget.dataset.id,n=e.currentTarget.dataset.compindex,o=t.data.eles[n];if(!t.data.eles[n].leaderInfo)return void N.appMethod.showModal({content:"暂无团长，无法加入购物车"});N.appMethod.sendRequest({url:"/index.php?r=AppDistributionExt/GetAppDistributionGroupGoodsList",method:"post",data:{leader_token:o.leaderInfo.user_token,goods_id:[a]},success:function(e){var a={},o=e.data[0],i=void 0,s=void 0,r=void 0,c=void 0,l=void 0,d=void 0,u=void 0,m=[],p=[],f="";o.form_data.goods_model?(s=o.form_data.goods_model[0],r=s.price,c=s.stock,u=s.id,l=s.img_url,d=s.virtual_price):(r=o.price,c=o.stock,l=o.cover,d=o.virtual_price);for(var g in o.form_data.model)if(g){var h=o.form_data.model[g];m.push(h),p.push(h.subModelId[0]),f+="“"+h.subModelName[0]+"” "}o.model=m,i={price:r,stock:c,buyCount:1,models:p,modelId:u||"",models_text:f,imgurl:l,virtual_price:d},a["eles["+n+"].selectGoodsModelInfo"]=i,a["eles["+n+"].showGoodsDetail"]=!0,a["eles["+n+"].goodsDetail"]=o,t.setData(a)}})},this.selectGoodsSubModel=function(t){var a=N.appMethod.getAppCurrentPage(),n=t.currentTarget.dataset.compindex,o=t.target.dataset,i=o.modelIndex,s=o.submodelIndex,r={},c=a.data.eles[n].selectGoodsModelInfo.models,l=a.data.eles[n].goodsDetail.model,d="";c[i]=l[i].subModelId[s];for(var u=0;u<c.length;u++)for(var m=l[u].subModelId,p=0;p<m.length;p++)c[u]==m[p]&&(d+="“"+l[u].subModelName[p]+"” ");r["eles["+n+"].selectGoodsModelInfo.models"]=c,r["eles["+n+"].selectGoodsModelInfo.models_text"]=d,a.setData(r),e.resetSelectCountPrice(n)},this.resetSelectCountPrice=function(e){var t=N.appMethod.getAppCurrentPage(),a=t.data.eles[e].selectGoodsModelInfo.models.join(","),n=t.data.eles[e].goodsDetail.form_data.goods_model,o={};o["eles["+e+"].selectGoodsModelInfo.buyCount"]=1;for(var i=n.length-1;i>=0;i--)if(n[i].model==a){o["eles["+e+"].selectGoodsModelInfo.stock"]=n[i].stock,o["eles["+e+"].selectGoodsModelInfo.price"]=n[i].price,o["eles["+e+"].selectGoodsModelInfo.modelId"]=n[i].id||"",o["eles["+e+"].selectGoodsModelInfo.imgurl"]=n[i].img_url||"",o["eles["+e+"].selectGoodsModelInfo.virtual_price"]=n[i].virtual_price;break}t.setData(o)},this.inputBuyCount=function(e){var t=N.appMethod.getAppCurrentPage(),a=event.currentTarget.dataset.compindex;t.setData((0,i.default)({},"eles["+a+"].selectGoodsModelInfo.buyCount",e.target.value))},this.clickGoodsMinusButton=function(e){var t=N.appMethod.getAppCurrentPage(),a=e.currentTarget.dataset.compindex,n=t.data.eles[a].selectGoodsModelInfo.buyCount;n<=1||t.setData((0,i.default)({},"eles["+a+"].selectGoodsModelInfo.buyCount",n-1))},this.clickGoodsPlusButton=function(e){var t=N.appMethod.getAppCurrentPage(),a=e.currentTarget.dataset.compindex,n=t.data.eles[a].selectGoodsModelInfo,o=n.buyCount;o>=n.stock||t.setData((0,i.default)({},"eles["+a+"].selectGoodsModelInfo.buyCount",o+1))},this.sureAddToShoppingCart=function(t){var a=e,n=N.appMethod.getAppCurrentPage(),o=t.currentTarget.dataset.compindex,i=n.data.eles[o],s={goods_id:i.goodsDetail.id,model_id:i.selectGoodsModelInfo.modelId||"",num:i.selectGoodsModelInfo.buyCount,dis_group_id:i.goodsDetail.group_id,leader_token:i.leaderInfo.user_token};N.appMethod.sendRequest({url:"/index.php?r=AppShop/addCart",data:s,success:function(e){a.hideGoodsDialog(t)}})},this.getGoodsIdxList=function(t){var a=e,n=N.appMethod.getAppCurrentPage();N.appMethod.sendRequest({hideLoading:!0,url:"/index.php?r=AppDistributionExt/GetAppDistributionGroupGoodsIdxList",success:function(e){var o;n.setData((o={},(0,i.default)(o,"eles["+t+"].buyerIndex",0),(0,i.default)(o,"eles["+t+"].buyerInfoList",e.data||[]),o)),e.data.length&&a.cycleGoodsBuyerList(t)}})},this.cycleGoodsBuyerList=function(e){var t=N.appMethod.getAppCurrentPage(),a=t.data.eles[e];a.buyerIndex<0||setInterval(function(){var n=a.buyerIndex,o=a.buyerInfoList;n++,n==o.length-1&&(n=0),t.setData((0,i.default)({},"eles["+e+"].buyerIndex",n))},8e3)},this.checkGroupGoodsLeader=function(t,a){var n=e,o=N.appMethod.getAppCurrentPage();N.appMethod.sendRequest({hideLoading:!0,url:"/index.php?r=AppDistributionExt/CheckIsDistributorGroupLeaderInfo",data:{leader_token:a},success:function(e){var a={};if(!e.data.learder_info)return N.appMethod.globalData.communityUserToken="",void N.appMethod.removeStorage({key:"groupToken",complete:function(){n.init(t,o)}});a["eles["+t+"].leaderInfo"]=e.data.learder_info,o.setData(a),n.getCommunityGoodsList(t)}})}};t.default=D},function(e,t){},function(e,t){},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.TechSupport=function(){return React.createElement("div",{style:{width:"100%",height:"1.30rem",overflow:"hidden",marginTop:".20rem"}},React.createElement("img",{src:"//cdn.jisuapp.cn/zhichi_frontend/static/webapp/images/tec-support-new.png",style:{width:"100%",height:"100%"}}))}},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Filter=void 0;var o=a(0),i=n(o),s=a(3),r=n(s),c=a(1),l=n(c),d=a(2),u=n(d),m=a(4),p=n(m),f=a(28),g=n(f),h=a(5),v=a(12),_=n(v);a(733);t.Filter=function(e){function t(e){(0,i.default)(this,t);var a=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.confirm="",a.show=function(e){var t=e.filterShow,n=e.chooseCateId,o=e.form,i=e.confirm;if(t&&!0===t){var s={};s.filterShow=!0,a.getCategory(),s.hasTabbar=h.appMethod.isTabBarPage(),n&&(s.chooseCateId=n),o&&(s.form=o||"goods",s.goodsType=_.default.getGoodsTypeByForm(o)),a.setData(s),i&&(a.confirm=i)}},a.getLocation=function(){var e=a;h.appMethod.getLocation({success:function(t){t.longitude&&(h.appMethod.sendRequest({url:"/index.php?r=Map/getAreaInfoByLatAndLng",data:{longitude:t.longitude,latitude:t.latitude},success:function(t){var a=t.data.address_component.province,n=t.data.address_component.city,o=t.data.address_component.district;e.setData({location:a+n+o,currentRegionId:t.data.region_id})}}),e.setData({longitude:t.longitude,latitude:t.latitude}))},fail:function(e){console.log(e)}})},a.hasGetCateGory=!1,a.getCategory=function(){var e=a;if(!e.hasGetCateGory){var t=h.appMethod.getAppCurrentPage();h.appMethod.sendRequest({url:"/index.php?r=appData/listCategory",data:{form:"goods",goods_type:e.data.goodsType},chain:!0,subshop:t.franchiseeId||"",success:function(t){var a=t.data,n={};e.hasGetCateGory=!0;for(var o=0;o<a.length;o++){var i=a[o].subclass;if(i&&i.length>0){var s=99*Math.ceil((i.length+1)/2)+15;a[o].height=s,0!=o&&1!=o||(a[o].isOpen=!0)}}n.category=a,e.setData(n)}})}},a.chooseCategory=function(e){var t=e.currentTarget.dataset.id,n={leastPrice:a.data.leastPrice,mostPrice:a.data.mostPrice,chooseCateId:t,currentRegionId:a.data.currentRegionId};a.setData(n),a.confirm&&a.confirm({detail:n})},a.openCate=function(e){var t=e.currentTarget.dataset.index,n={};n["category["+t+"].isOpen"]=!a.data.category[t].isOpen,a.setData(n)},a.showMyAddress=function(){a.setData({myAddress:!0}),a.getMyAddress()},a.hideMyAddress=function(){a.setData({myAddress:!1})},a.getMyAddress=function(){var e=a;h.appMethod.sendRequest({url:"/index.php?r=AppShop/addressList",data:{},success:function(t){var a=t.data,n={};n.myAddressList=a,e.setData(n)}})},a.chooseMyAddress=function(e){var t=e.currentTarget.dataset.index,n=a.data.myAddressList[t],o=e.currentTarget.dataset.region;a.setData({myAddressIndex:t,myAddress:!1,location:n.address_info.province.text+n.address_info.city.text+n.address_info.district.text,currentRegionId:o})},a.showChooseArea=function(){a.setData({chooseArea:!0,areaType:"province",province:{},city:{},town:{}}),a.getArea()},a.hideChooseArea=function(){a.setData({chooseArea:!1})},a.allAreaList=[],a.getArea=function(){var e=a;h.appMethod.sendRequest({url:"/index.php?r=AppShop/getAllRegionInfo",data:{},success:function(t){var a=t.data,n={};e.allAreaList=a,n.areaList=a,e.setData(n)}})},a.chooseArea=function(e){var t={},n=a,o=e.currentTarget.dataset.id,i=n.data.areaType,s=n.data.areaList;if("province"==i){for(var r in s)o==s[r].id&&(t[n.data.areaType]=s[r],t.areaList=s[r].cities);t.areaType="city"}else if("city"==i){for(var c in s)o==s[c].id&&(t[n.data.areaType]=s[c],t.areaList=s[c].towns);t.areaType="town"}else if("town"==i){for(var l in s)o==s[l].id&&(t[n.data.areaType]=s[l],t.currentRegionId=o);t.location=n.data.province.name+n.data.city.name+t.town.name,t.myAddress=!1,t.chooseArea=!1}t.areaId=o,a.setData(t)},a.resetProvince=function(){var e=a;e.setData({areaType:"province",areaId:"",areaList:e.allAreaList,province:{},city:{},town:{}})},a.resetCity=function(){var e=a;e.setData({areaType:"city",areaId:"",areaList:e.data.province.cities,city:{},town:{}})},a.filterHide=function(){a.setData({filterShow:!1,myAddress:!1,chooseArea:!1})},a.leastPriceInput=function(e){a.setData({leastPrice:e.target.value})},a.mostPriceInput=function(e){a.setData({mostPrice:e.target.value})},a.filterReset=function(){var e={leastPrice:"",mostPrice:"",chooseCateId:"",location:"",currentRegionId:""};a.setData(e),a.confirm&&a.confirm({detail:e})},a.filterConfirm=function(){var e=a;if(e.data.leastPrice||e.data.mostPrice){if(!/(^[1-9]\d*(\.\d{1,2})?$)|(^0(\.\d{1,2})?$)/.test(e.data.leastPrice)||!/(^[1-9]\d*(\.\d{1,2})?$)|(^0(\.\d{1,2})?$)/.test(e.data.mostPrice))return void h.appMethod.showModal({content:"价格区间填写有误"});if(+e.data.leastPrice>+e.data.mostPrice)return void h.appMethod.showModal({content:"价格区间中设置的最大值需大于最小值"})}var t={leastPrice:e.data.leastPrice||"",mostPrice:e.data.mostPrice||"",chooseCateId:e.data.chooseCateId,currentRegionId:e.data.currentRegionId};e.setData(t),a.confirm&&a.confirm({detail:t}),e.filterHide()},a.options=a.props.options,a.state={filterShow:!1,category:[],chooseCateId:"",location:"",myAddress:!1,myAddressList:[],myAddressIndex:"",chooseArea:!1,areaList:[],province:{},city:{},town:{},areaType:"province",areaId:"",leastPrice:"",mostPrice:"",currentRegionId:"",form:"goods",goodsType:0,hasTabbar:!1},a}return(0,u.default)(t,e),(0,r.default)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.filterShow,n=t.topNavBarHeight,o=t.category,i=t.chooseCateId,s=t.leastPrice,r=t.mostPrice,c=t.location,l=t.myAddress,d=t.myAddressList,u=t.myAddressIndex,m=t.chooseArea,f=t.areaType,g=t.province,h=t.city,v=t.town,_=t.areaList,y=t.areaId,E=t.hasTabbar;return a?p.default.createElement("div",{className:"common-component filter filter-wrap",style:{top:n+"px",bottom:E?"49px":"0px"}},p.default.createElement("div",{className:"filter-bg",onClick:this.filterHide}),p.default.createElement("div",{className:"filter-inner active"},p.default.createElement("div",{className:"filter-cate"},o.map(function(t,a){return t.subclass&&t.subclass.length>0?p.default.createElement("div",{className:"filter-box",key:t.id},p.default.createElement("div",{className:"filter-box-head clearfix","data-id":t.id,"data-index":a,onClick:e.openCate},p.default.createElement("div",{className:"filter-box-title"},t.name),t.isOpen?p.default.createElement("div",{className:"filter-box-all"},"收起 ",p.default.createElement("label",{className:"ico-moon icon-uparrow"})):p.default.createElement("div",{className:"filter-box-all"},"展开 ",p.default.createElement("label",{className:"ico-moon icon-downarrow"}))),p.default.createElement("div",{className:"filter-box-content cate-content",style:t.isOpen?{height:t.height/100+"rem"}:{}},p.default.createElement("div",{className:"filter-box-item "+(i==t.id?"active":""),"data-id":t.id,onClick:e.chooseCategory},p.default.createElement("label",{className:"filter-subcate-text filter-subcate-noimg"},"全部")),t.subclass.map(function(t){return p.default.createElement(p.default.Fragment,{key:t.id},t.logo?p.default.createElement("div",{className:"filter-box-item "+(i==t.id?"active":""),"data-id":t.id,onClick:e.chooseCategory},p.default.createElement("label",{className:"filter-subcate-text"},t.name),p.default.createElement("img",{className:"filter-subcate-img",src:t.logo,mode:"aspectFill"})):p.default.createElement("div",{className:"filter-box-item "+(i==t.id?"active":""),"data-id":t.id,onClick:e.chooseCategory},p.default.createElement("label",{className:"filter-subcate-text filter-subcate-noimg"},t.name)))}))):p.default.createElement("div",{className:"filter-box",key:t.id},p.default.createElement("div",{className:"filter-box-head clearfix "+(i==t.id?"active":""),"data-id":t.id,onClick:e.chooseCategory},p.default.createElement("div",{className:"filter-box-title"},t.name),p.default.createElement("div",{className:"filter-box-all"},"查看全部 ",p.default.createElement("label",{className:"ico-moon icon-rightarrow"})),p.default.createElement("div",{className:"filter-head-line"})))}),p.default.createElement("div",{className:"filter-box"},p.default.createElement("div",{className:"filter-box-head"},p.default.createElement("div",{className:"filter-box-title"},"价格区间（元）")),p.default.createElement("div",{className:"filter-box-content"},p.default.createElement("input",{className:"filter-price-input",type:"number",placeholder:"最低价",value:s,onInput:this.leastPriceInput,onChange:function(){}}),p.default.createElement("label",{className:"filter-price-line"},"-"),p.default.createElement("input",{className:"filter-price-input",type:"number",step:"0.1",placeholder:"最高价",value:r,onInput:this.mostPriceInput,onChange:function(){}}))),p.default.createElement("div",{className:"filter-box"},p.default.createElement("div",{className:"filter-box-head"},p.default.createElement("div",{className:"filter-box-title"},"城市选择")),p.default.createElement("div",{className:"filter-box-content"},p.default.createElement("div",{className:"filter-address "+(c?"active":""),onClick:this.showMyAddress},p.default.createElement("label",{className:"filter-address-icon ico-moon icon-fesadress"}),c||"无"),p.default.createElement("div",{className:"filter-location",onClick:this.getLocation},p.default.createElement("label",{className:"filter-location-icon ico-moon icon-fesadress"}),"定位")))),p.default.createElement("div",{className:"filter-bottom"},p.default.createElement("div",{className:"filter-reset",onClick:this.filterReset},"重置"),p.default.createElement("div",{className:"filter-confirm",onClick:this.filterConfirm},"确定"))),p.default.createElement("div",{className:"filter-inner filter-myaddress "+(l?"active":"")},p.default.createElement("div",{className:"filter-inner-head"},p.default.createElement("label",{className:"filter-inner-head-icon ico-moon icon-leftarrow",onClick:this.hideMyAddress}),"选择地址"),p.default.createElement("div",{className:"filter-myaddress-list"},d.map(function(t,a){return p.default.createElement("div",{key:t.id,className:"filter-myaddress-item "+(u===a?"active":""),"data-id":t.id,"data-index":a,"data-region":t.address_info.district.id,onClick:e.chooseMyAddress},p.default.createElement("label",{className:"filter-myaddress-icon ico-moon icon-community-location"}),p.default.createElement("span",{className:"filter-myaddress-text"},t.address_info.province.text+t.address_info.city.text+t.address_info.district.text+(t.detail_address||"")),p.default.createElement("label",{className:"filter-myaddress-icon filter-myaddress-gou ico-moon icon-gou"}))})),p.default.createElement("div",{className:"filter-bottom"},p.default.createElement("div",{className:"filter-confirm",onClick:this.showChooseArea},"选择其他地址"))),p.default.createElement("div",{className:"filter-inner filter-area "+(m?"active":"")},p.default.createElement("div",{className:"filter-inner-head"},p.default.createElement("label",{className:"filter-inner-head-icon ico-moon icon-leftarrow",onClick:this.hideChooseArea}),"选择地址"),p.default.createElement("div",{className:"filter-choose-area"},p.default.createElement("div",{className:"filter-choose-item "+("province"==f?"active":""),onClick:this.resetProvince},g.name||"请选择省"),h.name||"city"==f&&p.default.createElement("div",{className:"filter-choose-item "+("city"==f?"active":""),onClick:this.resetCity},h.name||"请选择市"),v.name||"town"==f&&p.default.createElement("div",{className:"filter-choose-item "+("town"==f?"active":"")},v.name||"请选择区")),p.default.createElement("div",{className:"filter-area-list"},Object.keys(_).map(function(t){return p.default.createElement("div",{className:"filter-area-item "+(y==_[t].id?"active":""),key:_[t].id,"data-id":_[t].id,onClick:e.chooseArea},p.default.createElement("span",{className:"filter-area-text"},_[t].name),p.default.createElement("label",{className:"filter-area-gou ico-moon icon-gou"}))})))):null}}]),t}(g.default)},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.FormPay=void 0;var o=a(31),i=n(o),s=a(17),r=n(s),c=a(0),l=n(c),d=a(3),u=n(d),m=a(1),p=n(m),f=a(2),g=n(f);a(32),a(16);var h=a(4),v=n(h),_=a(28),y=n(_),E=a(5);a(735);t.FormPay=function(e){function t(e){(0,l.default)(this,t);var a=(0,p.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.show=function(e){var t=e.formInfo;t&&!0===t.show&&a.setData({formInfo:t})},a.discountChange=function(e){var t=e;a.setData({"formInfo.selectDiscountInfo":a.data.formInfo.discountList[t]||"","formInfo.selectDiscountIndex":t,"formInfo.calculData.selected_benefit":a.data.formInfo.discountList[t]||""}),a.calculateTotalPrice()},a.closeDialog=function(){a.setData({"formInfo.show":!1,"formInfo.useBalance":!1}),E.appMethod.getAppCurrentPage().setData({"formInfo.show":!1})},a.inputRemark=function(e){a.setData({remark:e.target.value})},a.confirmPay=function(){var e=a,t=+a.data.formInfo.price,n=a.data.formInfo.totalPayment,o=a.data.formInfo.selectDiscountInfo;if(isNaN(n)||n<0)return void alertTip("error payment amount");a.data.requesting||(a.setData({requesting:!0}),1==o.no_use_benefit&&(o=""),E.appMethod.sendRequest({url:"/index.php?r=AppShop/createTransferOrder",method:"post",data:{price:t,check_price:n,message:a.data.remark,selected_benefit:o,is_balance:1==a.data.formInfo.useBalance?1:0,form_info:a.data.formInfo.submitData},success:function(t){e.setData({"formInfo.submitData.button_info.order_id":t.data}),e.payOrder(t.data)},fail:function(){e.setData({requesting:!1})}}))},a.payOrder=function(e){function t(){var e={"formInfo.show":!1,remark:"","formInfo.useBalance":!1};E.appMethod.getAppCurrentPage().setData(e),o.setData({requesting:!1})}function n(){E.appMethod.sendRequest({url:"/index.php?r=AppShop/cancelOrder",data:{order_id:e},success:function(e){},fail:function(){n()},complete:function(){o.setData({requesting:!1})}})}var o=a;if(0==a.data.formInfo.totalPayment)return void E.appMethod.sendRequest({url:"/index.php?r=AppShop/paygoods",data:{order_id:e,total_price:0},success:function(e){t()},fail:function(){n()}});E.appMethod.goPay({orderId:e}),t()},a.calculateTotalPrice=function(e){e&&a.setData({buttonInfo:e});var t=a;a.data.formInfo.price;E.appMethod.sendRequest({hideLoading:!0,url:"/index.php?r=AppShop/calculationPrice",method:"post",data:a.data.formInfo.calculData,success:function(e){var a=e.data,n=a.can_use_benefit.data,o=void 0,i=void 0;n.length&&n.unshift({title:"不使用优惠",name:"无",no_use_benefit:1}),o=a.selected_benefit_info;for(var s=0;s<=n.length-1;s++){var r=o.discount_type;if(r===n[s].discount_type){if("coupon"!==r){i=s;break}if(n[s].coupon_id==o.coupon_id){i=s;break}}}t.setData({"formInfo.totalPayment":a.price,"formInfo.discountList":n,"formInfo.selectDiscountInfo":o,"formInfo.selectDiscountIndex":i||"","formInfo.balance":a.balance,"formInfo.use_balance_count":a.use_balance,"formInfo.discount_cut_price":a.discount_cut_price})}})},a.ifUseBalance=function(e){a.setData({"formInfo.useBalance":e,"formInfo.calculData.is_balance":1==e?1:0}),a.calculateTotalPrice()},a.options=a.props.options,a.state={formInfo:{price:0,form_data:{}},buttonInfo:"",remark:""},a}return(0,g.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this.state,t=e.formInfo,a=e.remark;return t.show?v.default.createElement("div",{className:"common-component form-pay form-pay-dialog"},v.default.createElement("div",{className:"form-title"},"付款给 ",t.name," ",v.default.createElement("img",{className:"cheques-img",src:t.logo})),v.default.createElement("div",{className:"form-content"},v.default.createElement("div",{style:{color:"#333"}},v.default.createElement("span",null,"¥"),v.default.createElement("span",{className:"form-price"},t.price)),t.isDiscount&&v.default.createElement(v.default.Fragment,null,v.default.createElement(r.default,{data:t.discountList,cols:1,value:t.selectDiscountIndex,onChange:this.discountChange},v.default.createElement("div",{className:"picker"},v.default.createElement("span",{className:"left-label"},"使用优惠"),v.default.createElement("span",{style:{color:"#ff7100"}},t.selectDiscountInfo&&t.selectDiscountInfo.title||"无"),v.default.createElement("span",{className:"ico-moon icon-downarrow",style:{float:"right",lineHeight:"1em"}}))),v.default.createElement("div",null,v.default.createElement("span",{className:"left-label",style:{height:".64rem",lineHeight:".64rem"}},"使用储值抵扣"),t.useBalance&&v.default.createElement("span",{style:{color:"#ff7100"}},"抵",t.use_balance_count,"元"),v.default.createElement(i.default,{className:"pull-right",checked:t.useBalance,onChange:this.ifUseBalance,platform:"ios"}))),v.default.createElement("div",{className:"marign-top"},v.default.createElement("span",{className:"left-label"},"备注"),v.default.createElement("textarea",{className:"remarks",onInput:this.inputRemark,value:a})),v.default.createElement("div",{className:"marign-top actual-pay"},v.default.createElement("span",{className:"left-label"},"实际付款"),v.default.createElement("span",{style:{color:"#ff7100",float:"right"}},"¥",v.default.createElement("span",{className:"actual-price"},t.totalPayment))),v.default.createElement("button",{className:"pay-btn marign-top",onClick:this.confirmPay},"确认支付"),v.default.createElement("div",{className:"form-pay-close ico-moon icon-closes",onClick:this.closeDialog}))):null}}]),t}(y.default)},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.CommunityPublish=void 0;var o=a(17),i=n(o),s=a(31),r=n(s),c=a(0),l=n(c),d=a(3),u=n(d),m=a(1),p=n(m),f=a(2),g=n(f);a(16),a(32);var h=a(4),v=n(h),_=a(28),y=n(_),E=a(5);a(737);var b=!1,N=function(){return/^informationManagement/.test(E.appMethod.getAppCurrentPage().route)};t.CommunityPublish=function(e){function t(e){(0,l.default)(this,t);var a=(0,p.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.show=function(e){var t={publishType:0,detail:"",articleId:"",from:"",franchisee:"",reqAudit:""},n=Object.assign({},t,e.communityPublish);a.setData({communityPublish:n}),a.init(n)},a.init=function(e){var t=a,n=e.publishType,o=e.detail,i=e.articleId,s=e.from,r=e.franchisee,c=e.reqAudit;b=!1,E.appMethod.getStorage({key:"communityThemeColor-"+o,success:function(e){t.setData({theme_color:e.data})}}),a.setData({communityId:o||"",articleId:i||"",require_audit:c||"","articleData.section_id":o||"",fromCommunityPage:s||"",type:2==n?"link":"default","articleData.type":n,franchisee:r||"",showTopWrap:!1,selectedTime:[],selectedTimeIndex:0,isShowTop:!1,isBuyTop:!1,topOrderInfo:{}}),i?a.getArticle(i):a.getSections(o)},a.submitData=function(e){var t=a,n=a.data.articleData,o=n.title,i=n.text,s=t.data.require_loc,r=t.data.require_phone,c=s?n.latitude:"",l=s?n.longitude:"",d=s?t.data.address:"",u=r?n.phone:"",m=a.data.communityId||n.section_id,p=n.category_id,f=n.type||0,g=n.origin_url||n.origin_url||"";if(!o)return void E.appMethod.showModal({content:"请填写标题"});if(o.length>46)return void E.appMethod.showModal({content:"标题字数不得超过46"});if("default"==a.data.type){if(!i)return void E.appMethod.showModal({content:"请填写话题内容"})}else if("link"==a.data.type&&!g)return void E.appMethod.showModal({content:"请粘贴公众号文章或腾讯视频链接"});if(!a.data.selectedSectionName||!a.data.selectedCategoryName)return void E.appMethod.showModal({content:"请选择分类"});var h="/index.php?r=AppSNS/AddArticle",v=t.data.articleId;if(v&&(h="/index.php?r=AppSNS/UpdateArticle"),b)return void E.appMethod.showModal({content:"正在提交中，请勿重复点击",complete:function(){!b&&t.returnBack()}});b=!0;var _={audit_status:2,article_id:v,section_id:m||a.data.sectionList[a.data.selectedSectionIndex].id,category_id:p||a.data.categoryList[a.data.selectedCategoryIndex].id,title:o,text:i,imgs:n.imgs,is_carousel:0,top_flag:0,hot_flag:0,phone:u,latitude:c,longitude:l,address:d,type:f,origin_url:g,sub_app_id:t.data.franchisee};n.imgs.length>0?t.wxImgsCheck(n.imgs).then(function(){t.afterCheckSubmitData(h,_)},function(e){E.appMethod.showModal({content:e&&e.data||"网络错误或图片审核不通过"}),b=!1}):2==f?t.checkGrabLinkIsOk(g).then(function(e){e.unSupportable?E.appMethod.showModal({title:"提示",content:e.data||"暂不支持抓取含音频|视频|投票|小程序的图文文章",showCancel:!0,confirmText:"继续",cancelText:"放弃",confirm:function(){t.afterCheckSubmitData(h,_)},cancel:function(){b=!1}}):t.afterCheckSubmitData(h,_)},function(){b=!1}):t.afterCheckSubmitData(h,_)},a.afterCheckSubmitData=function(e,t){var n=a;n.data.isShowTop&&!n.data.isBuyTop?(t.topTime=n.data.selectedTime[n.data.selectedTimeIndex].days,t.topPrice=n.data.selectedTime[n.data.selectedTimeIndex].price,E.appMethod.sendRequest({url:"/index.php?r=AppSNS/AddSectionOrder",data:{days:n.data.selectedTime[n.data.selectedTimeIndex].days,section_id:n.data.communityId},method:"post",success:function(a){var o=a.data;o.success=function(){t.order_id=a.order_id,n.afterPaySubmitData(e,t)},o.fail=function(e){b=!1},E.appMethod.wxPay(o)},fail:function(){b=!1}})):n.afterPaySubmitData(e,t)},a.afterPaySubmitData=function(e,t){var n=a;E.appMethod.sendRequest({url:e,data:t,method:"post",success:function(e){var a=1==n.data.require_audit?"提交成功，待审核。":"提交成功";1==n.data.require_audit&&t.topTime&&(a="提交成功，待审核。审核如果失败，置顶费用将原路返回"),E.appMethod.showModal({content:a,confirm:function(){n.setData({"articleData.title":"","articleData.text":""}),n.returnBack(),N()?E.appMethod.globalData.communityPageRefresh=!0:E.appMethod.globalData.topicRefresh=!0,window.location.reload()}}),E.appMethod.globalData.communityPageRefresh=!0,E.appMethod.globalData.communityUsercenterRefresh=!0},complete:function(e){b=!1}})},a.bindTitleInput=function(e){var t=e.target.value;a.setData({"articleData.title":t})},a.bindTextInput=function(e){var t=e.target.value;a.setData({"articleData.text":t,"articleData.viewtext":t.replace(/\\n/g,"\n")})},a.bindTextBlur=function(e){var t=e.target.value;a.setData({"articleData.text":t,"articleData.viewtext":t.replace(/\\n/g,"\n")})},a.bindPhoneInput=function(e){var t=e.target.value;a.setData({"articleData.phone":t})},a.bindPhoneBlur=function(e){var t=e.target.value;a.setData({"articleData.phone":t})},a.uploadImg=function(){var e=a,t=e.data.articleData.imgs;E.appMethod.chooseImage(function(a){t=t.concat(a),e.setData({"articleData.imgs":t})},9)},a.deleteImg=function(e){var t=e.currentTarget.dataset.index,n=a.data.articleData.imgs;n.splice(t,1),a.setData({"articleData.imgs":n})},a.getSections=function(e,t){var n=a,o={page:-1,sub_app_id:n.data.franchisee};e&&(o.page=1,o.section_id=e),E.appMethod.sendRequest({url:"/index.php?r=AppSNS/GetSectionByPage",data:o,method:"post",success:function(a){var o={},i=a.data[0];o.require_loc=1==i.require_location,o.require_phone=1==i.require_phone,n.data.theme_color||(o.theme_color=i.theme_color),e&&(o.selectedSectionName=i.name,o.require_audit=i.require_audit,o.showCategoryList=!0,o.showTopWrap=!!a.data[0].price_set,o.selectedTime=a.data[0].price_set?a.data[0].price_set:{}),o.sectionList=a.data,n.setData(o),n.getCategory(e||a.data[0].id),"function"==typeof t&&t(a.data)}})},a.getCategory=function(e,t){var n=a;E.appMethod.sendRequest({url:"/index.php?r=AppSNS/GetCategoryByPage",data:{section_id:e||n.data.communityId,page:-1,page_size:100,sub_app_id:n.data.franchisee},method:"post",success:function(e){if(0==e.status){var a=e.data,o=[{id:"",name:"全部(默认)"}].concat(a);n.setData({categoryList:o}),"function"==typeof t&&t(o)}}})},a.getArticle=function(e){var t=a;E.appMethod.sendRequest({url:"/index.php?r=AppSNS/GetArticleByPage",data:{article_id:e,only_own_record:1,sub_app_id:t.data.franchisee},method:"post",success:function(e){if(0==e.status){var a=e.data[0],n={};n.communityId=a.section_id,n["articleData.title"]=a.title,n["articleData.text"]=a.content.text,n["articleData.viewtext"]=a.content.text.replace(/\\n/,"\n"),n["articleData.imgs"]=a.content.imgs||[],n["articleData.phone"]=a.phone,n["articleData.section_id"]=a.section_id,n["articleData.category_id"]=a.category_id,n["articleData.latitude"]=a.latitude,n["articleData.longitude"]=a.longitude,n["articleData.origin_url"]=a.content.origin_url,n["articleData.view_origin_url"]=a.content.origin_url.replace(/\\n/,"\n"),n.address=a.address,n.isBuyTop=!!a.is_paid_article,n.isShowTop=!!a.is_paid_article,n.topOrderInfo=a.order_info,t.getSections(a.section_id),t.getCategory(a.section_id,function(e){e.some(function(e,a){t.setData({selectedCategoryIndex:a,selectedCategoryName:e.name,showCategoryList:!0})})}),t.setData(n)}}})},a.getAddress=function(){var e=a;E.appMethod.chooseLocation({success:function(t){if(!t.longitude)return void E.appMethod.showModal({content:"请选择具体的地址"});e.setData({"articleData.latitude":t.latitude,"articleData.longitude":t.longitude,address:t.address||""}),t.address||e.getLocByLatAndLng(t.latitude,t.longitude,function(t){e.setData({address:t.address})})}})},a.addressInput=function(e){e.detail.value&&a.setData({"articleData.latitude":"","articleData.longitude":"",address:""})},a.getLocByLatAndLng=function(e,t,a){E.appMethod.sendRequest({url:"/index.php?r=Map/GetAreaInfoByLatAndLng",data:{latitude:e,longitude:t},method:"post",success:function(e){0==e.status&&"function"==typeof a&&a(e.data)}})},a.showClassifyBox=function(){var e=a.data.showClassifyBox;a.setData({showClassifyBox:!e}),a.data.articleData.category_id||a.setData({"articleData.category_id":0,selectedClassify:"全部（默认）"})},a.showSlectWindowAct=function(){a.data.showSlectWindow&&a.data.selectedCategoryName&&!a.data.showCategoryList&&a.setData({showCategoryList:!0}),a.setData({showSlectWindow:!a.data.showSlectWindow})},a.selectSectionAct=function(e){var t=e.currentTarget,n=t.dataset,o=n.index,i=a.data.sectionList[o];a.setData({selectedSectionIndex:o,selectedSectionName:i.name,require_audit:i.require_audit,require_loc:1==i.require_location,require_phone:1==i.require_phone,showTopWrap:!!i.price_set,selectedTime:i.price_set||[],communityId:i.id,selectedCategoryIndex:"",selectedCategoryName:"",showCategoryList:!0}),a.getCategory(i.id)},a.selectCategoryAct=function(e){var t=e.currentTarget,n=t.dataset,o=n.index,i=a.data.categoryList[o];a.setData({selectedCategoryIndex:o,selectedCategoryName:i.name,showSlectWindow:!1})},a.changeShowListAct=function(){a.data.fromCommunityPage||a.setData({showCategoryList:!a.data.showCategoryList})},a.stopPropagation=function(e){e.stopPropagation()},a.bindTextFocus=function(){a.data.showSlectWindow&&a.showSlectWindowAct()},a.bindLinkInput=function(e){var t=e.target.value;a.setData({"articleData.origin_url":t,"articleData.view_origin_url":t.replace(/\\n/g,"\n")})},a.bindLinkBlur=function(e){var t=e.target.value;a.setData({"articleData.origin_url":t,"articleData.view_origin_url":t.replace(/\\n/g,"\n")})},a.imgCheck=function(e){return new Promise(function(t,a){E.appMethod.sendRequest({url:"/index.php?r=AppShop/ImgSecCheck",data:{imgs:[e]},method:"post",success:function(a){t(e)},complete:function(e){e&&0==e.status||a(e)}})})},a.wxImgsCheck=function(e){return Promise.all(e.map(function(e){return a.imgCheck(e)}))},a.checkGrabLinkIsOk=function(e){return new Promise(function(t,a){E.appMethod.sendRequest({url:"/index.php?r=AppShop/WechatUrlCheck",data:{url:e},method:"post",success:function(e){t(e)},complete:function(e){e&&0==e.status||a(e)}})})},a.returnBack=function(){a.setData({"communityPublish.show":!1,showCategoryList:!1,articleData:{title:"",text:"",imgs:[],section_id:"",category_id:"",phone:"",latitude:"",longitude:"",type:0,origin_url:"",viewtext:"",view_origin_url:""},selectedSectionIndex:"",selectedSectionName:"",selectedCategoryIndex:"",selectedCategoryName:"",address:""})},a.chooseTopTime=function(e){a.setData({selectedTimeIndex:e.detail.value})},a.toSetingTop=function(e){a.setData({isShowTop:e.detail.value})},a.submitRegion=function(e){a.setData({selectedTimeIndex:e.detail.value})},a.state={communityPublish:{show:!1,publishType:0,detail:"",articleId:"",from:"",franchisee:"",reqAudit:""},communityId:"",articleData:{title:"",text:"",imgs:[],section_id:"",category_id:"",phone:"",latitude:"",longitude:"",type:0,origin_url:""},address:"",theme_color:"",selectedClassify:"",require_audit:"",require_loc:!0,require_phone:!0,fromCommunityPage:!1,showSlectWindow:!1,showClassifyBox:!1,showCategoryList:!1,selectedSectionIndex:"",selectedSectionName:"",sectionList:[],selectedCategoryIndex:"",selectedCategoryName:"",categoryList:[],showTopWrap:!1,selectedTime:[],selectedTimeIndex:0,isShowTop:!1},a}return(0,g.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.state,a=t.communityPublish,n=t.type,o=t.require_loc,s=t.require_phone,c=t.showClassifyBox,l=t.articleData,d=t.address,u=t.theme_color,m=t.selectedSectionName,p=t.selectedCategoryName,f=t.showTopWrap,g=t.isShowTop,h=t.isBuyTop,_=t.showSlectWindow,y=t.showCategoryList,E=t.categoryList,b=t.sectionList;return a.show?v.default.createElement("div",{className:"common-component"},v.default.createElement("div",{className:"communityPublish-wrap",id:"communityPublish"},v.default.createElement("div",{className:"communityPublish-main",style:o?{paddingBottom:0}:{}},v.default.createElement("div",{className:"communityPublish-title"},v.default.createElement("input",{className:"communityPublish-title-input "+(c?"hide":""),id:"communityPublish-title-input",placeholder:"请输入标题","placeholder-style":"color:#6e6e6e;font-size:14px;",type:"text",onInput:this.bindTitleInput,onChange:this.bindTitleInput,value:l.title})),"default"==n&&v.default.createElement("div",{className:"communityPublish-content"},v.default.createElement("textarea",{className:"communityPublish-content-input "+(c?"hide":""),id:"communityPublish-content-input",placeholder:"请输入内容...","placeholder-style":"color:#6e6e6e;font-size:12px;",onInput:this.bindTextInput,onChange:this.bindTextInput,value:l.text})),"link"==n&&v.default.createElement("div",{className:"communityPublish-content"},v.default.createElement("textarea",{className:"communityPublish-content-input "+(c?"hide":""),id:"communityPublish-content-input",placeholder:"请粘贴公众号文章或链接","placeholder-style":"color:#6e6e6e;font-size:12px;",onInput:this.bindLinkInput,onChange:this.bindLinkInput,value:l.origin_url})),"default"==n&&v.default.createElement("div",{className:"communityPublish-img-wrap"},v.default.createElement("div",{className:"communityPublish-ul clearfix",id:"communityPublish-ul"},l.imgs&&l.imgs.map(function(t,a){return v.default.createElement("div",{key:a,className:"communityPublish-item"},v.default.createElement("img",{className:"communityPublish-upload-image",src:t,mode:"aspectFill"}),v.default.createElement("div",{className:"communityPublish-item-delete","data-index":a,onClick:e.deleteImg},"×"))}),v.default.createElement("div",{className:"communityPublish-item-add",onClick:this.uploadImg},v.default.createElement("label",{className:"add-label"},"+")))),o&&v.default.createElement("div",{className:"communityPublish-address",onClick:this.getAddress},v.default.createElement("label",{className:"communityPublish-address-label ico-moon icon-community-location",style:{color:d?u:""}}),v.default.createElement("input",{className:"communityPublish-address-input "+(c?"hide":""),id:"communityPublish-address-input",placeholder:"所在位置","placeholder-style":"color:#6e6e6e;font-size:14px;",type:"text",disabled:!0,onInput:this.addressInput,onChange:this.addressInput,value:d}))),v.default.createElement("div",{className:"communityPublish-center"},s&&v.default.createElement("div",{className:"communityPublish-piece communityPublish-phone"},v.default.createElement("label",{className:"communityPublish-piece-icon ico-moon icon-takeout-cellphone",style:{color:l.phone?u:""}}),v.default.createElement("input",{className:"communityPublish-phone-input",id:"communityPublish-phone-input",placeholder:"电话号码","placeholder-style":"color:#6e6e6e;font-size:14px;",type:"number",onInput:this.bindPhoneInput,onBlur:this.bindPhoneBlur,onChange:this.bindPhoneInput,value:l.phone})),v.default.createElement("div",{className:"communityPublish-piece communityPublish-classify-title"},v.default.createElement("label",{className:"communityPublish-piece-icon ico-moon icon-community-category",style:{color:m&&p?u:""}}),v.default.createElement("span",null,"选择分类")),v.default.createElement("div",{className:"communityPublish-piece communityPublish-classify"},p?v.default.createElement("div",{className:"communityPublish-classify-view communityPublish-current-classify",onClick:this.showSlectWindowAct},v.default.createElement("span",{className:"communityPublish-classify-text"},m),"-",v.default.createElement("span",{className:"communityPublish-classify-text"},p)):v.default.createElement("div",{className:"communityPublish-classify-view communityPublish-select-classify",onClick:this.showSlectWindowAct},v.default.createElement("span",{className:"communityPublish-classify-text"},"请选择"),v.default.createElement("label",{className:"communityPublish-piece-icon ico-moon icon-filter-down"})))),f&&v.default.createElement("div",{className:"communityPublish-setTop"},v.default.createElement("div",{className:"communityPublish-seting-top flex-wrap"},v.default.createElement("div",null,"我要置顶"),v.default.createElement(r.default,{className:"switch",color:h?"#dedede":u,disabled:h,checked:g,onChange:this.toSetingTop})),g&&v.default.createElement(v.default.Fragment,null,v.default.createElement(i.default,{mode:"selector",disabled:h,value:selectedIndex,data:selectedTime,cols:1,onChange:this.submitRegion},v.default.createElement("div",{className:"communityPublish-seting-time flex-wrap"},v.default.createElement("div",null,"选择置顶时间"),v.default.createElement("div",{style:h?{color:"#dedede"}:{}},h?topOrderInfo.days:selectedTime[selectedTimeIndex].days,"天",v.default.createElement("div",{className:"ico-moon icon-rightarrow"})))),v.default.createElement("div",{className:"communityPublish-seting-money flex-wrap"},v.default.createElement("div",null,"置顶费用"),v.default.createElement("div",null,"¥",selectedTime[selectedTimeIndex].price)))),v.default.createElement("div",{className:"communityPublish-foot"},v.default.createElement("button",{className:"communityPublish-btn",onClick:this.submitData,style:{backgroundColor:u}},"立即发布")),v.default.createElement("div",{className:"return-btn",onClick:this.returnBack},v.default.createElement("label",{className:"ico-moon icon-closes"}))),_&&v.default.createElement("div",{className:"communityPublish-classify-select-wrap",onClick:this.showSlectWindowAct},v.default.createElement("div",{className:"communityPublish-catchtouchmove-layer"}),v.default.createElement("div",{className:"communityPublish-classify-select-window",onClick:this.stopPropagation},v.default.createElement("div",{className:"communityPublish-classify-select-top"},m&&v.default.createElement("span",{className:"communityPublish-cst-text",onClick:this.changeShowListAct},m),p&&y&&v.default.createElement("span",{className:"communityPublish-cst-text"},p),!p&&v.default.createElement("span",{className:"communityPublish-cst-text"},m?"选择分类":"请选择")),y?v.default.createElement("div",{className:"communityPublish-classify-select-list category-list"},E&&E.map(function(t,a){return v.default.createElement("div",{key:a,className:"communityPublish-classify-select-item","data-index":a,onClick:e.selectCategoryAct},v.default.createElement("span",{className:"communityPublish-csi-text"},t.name),v.default.createElement("label",{className:"communityPublish-csi-icon ico-moon icon-rightarrow"}))})):v.default.createElement("div",{className:"communityPublish-classify-select-list section-list"},b&&b.map(function(t,a){return v.default.createElement("div",{className:"communityPublish-classify-select-item",key:a,"data-index":a,onClick:e.selectSectionAct},v.default.createElement("img",{className:"communityPublish-csi-image",src:t.img,alt:""}),v.default.createElement("span",{className:"communityPublish-csi-text"},t.name),v.default.createElement("label",{className:"communityPublish-csi-icon ico-moon icon-rightarrow"}))}))))):null}}]),t}(y.default)},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.CommunityPublishType=void 0;var o=a(0),i=n(o),s=a(3),r=n(s),c=a(1),l=n(c),d=a(2),u=n(d),m=a(4),p=n(m),f=a(28),g=n(f),h=a(5);a(739);t.CommunityPublishType=function(e){function t(e){(0,i.default)(this,t);var a=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.show=function(e){a.setState({communityPublishType:e.communityPublishType})},a.turnToCommunityPublish=function(e){var t=Object.assign({},e.currentTarget.dataset,a.data.communityPublishType.communityPublish),n="link"===t.type?2:0,o=h.appMethod.getAppCurrentPage();a.setData({"communityPublishType.show":!1}),o.communityPublishRef.current.show({communityPublish:{show:!0,publishType:n,detail:t.detail||"",articleId:t.articleId||"",reqAudit:t.reqAudit||"",from:t.from||"",franchisee:t.franchisee||""}})},a.returnBack=function(e){a.setData({"communityPublishType.show":!1})},a.state={communityPublishType:{show:!1,communityPublish:{}}},a}return(0,u.default)(t,e),(0,r.default)(t,[{key:"render",value:function(){return this.state.communityPublishType.show?p.default.createElement("div",{className:"common-component communityPublishType-wrap"},p.default.createElement("div",{className:"communityPublishType-list"},p.default.createElement("div",{className:"type-default communityPublishType-type","data-type":"default",onClick:this.turnToCommunityPublish},p.default.createElement("div",{className:"type-image"},p.default.createElement("img",{className:"image-icon",src:"https://cdn.jisuapp.cn/zhichi_frontend/static/webapp/images/pocket/community_default.png",alt:""})),p.default.createElement("div",{className:"type-text"},p.default.createElement("div",{className:"type-title"},"图文"),p.default.createElement("div",{className:"type-desc"},"拍照或相册上传"))),p.default.createElement("div",{className:"type-link communityPublishType-type","data-type":"link",onClick:this.turnToCommunityPublish},p.default.createElement("div",{className:"type-image"},p.default.createElement("img",{className:"image-icon",src:"https://cdn.jisuapp.cn/zhichi_frontend/static/webapp/images/pocket/community_link.png",alt:""})),p.default.createElement("div",{className:"type-text"},p.default.createElement("div",{className:"type-title"},"文章/链接"),p.default.createElement("div",{className:"type-desc"},"公众号文章或链接")))),p.default.createElement("div",{className:"return-btn",onClick:this.returnBack},p.default.createElement("label",{className:"ico-moon icon-closes"}))):null}}]),t}(g.default)},function(e,t){},function(e,t){},function(e,t,a){"use strict";function n(){return React.createElement("div",{id:"loadingPage"},React.createElement("div",{className:"container"},React.createElement("div",{className:"spinner"},React.createElement("div",{className:"rect1"}),React.createElement("div",{className:"rect2"}),React.createElement("div",{className:"rect3"}),React.createElement("div",{className:"rect4"}),React.createElement("div",{className:"rect5"}))))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n,a(742)},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.TostoreShoppingCart=void 0;var o=a(0),i=n(o),s=a(3),r=n(s),c=a(1),l=n(c),d=a(2),u=n(d),m=a(4),p=n(m),f=a(28),g=n(f),h=a(5);a(744);t.TostoreShoppingCart=function(e){function t(e){(0,i.default)(this,t);var a=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.goodsId="",a.franchiseeId="",a.show=function(e){a.goodsId=e.goodsId,a.franchiseeId=e.franchisee||"";var t=h.appMethod.getAppCurrentPage();a.setData({isShowBottom:t.data.isShowBottom||""}),a.getGoodsDetail()},a.getGoodsDetail=function(){var e=a;h.appMethod.sendRequest({url:"/index.php?r=AppShop/getGoods",data:{data_id:e.goodsId,sub_shop_app_id:e.franchiseeId},method:"post",success:function(t){var a=t.data[0].form_data,n=a.model_items[0],o=[],i=[],s=0,r=0,c=void 0,l="",d="";a.model_items.length?(s=n.price,r=n.stock,c=n.id,d=n.img_url):(s=a.price,r=a.stock,d=a.cover);for(var u in a.model)if(u){var m=a.model[u];o.push(m),i.push(m.subModelId[0]),l+="“"+m.subModelName[0]+"” "}a.model=o;var p="";if(a.business_time&&a.business_time.business_time){for(var f=a.business_time.business_time,g=0;g<f.length;g++)p+=f[g].start_time.substring(0,2)+":"+f[g].start_time.substring(2,4)+"-"+f[g].end_time.substring(0,2)+":"+f[g].end_time.substring(2,4)+"/";p="出售时间："+p.substring(0,p.length-1)}e.getTostoreCartList(),e.setData({businesssTimeString:p,goodsInfo:a,addTostoreShoppingCartShow:!0,"selectGoodsModelInfo.price":s,"selectGoodsModelInfo.stock":r,"selectGoodsModelInfo.buyTostoreCount":0,"selectGoodsModelInfo.cart_id":"","selectGoodsModelInfo.models":i,"selectGoodsModelInfo.modelId":c||"","selectGoodsModelInfo.models_text":l,"selectGoodsModelInfo.imgurl":d})}})},a.selectGoodsSubModel=function(e){var t=e.target.dataset,n=t.modelIndex,o=t.submodelIndex,i={},s=a.data.selectGoodsModelInfo.models,r=a.data.goodsInfo.model,c="";s[n]=r[n].subModelId[o];for(var l=0;l<s.length;l++)for(var d=r[l].subModelId,u=0;u<d.length;u++)s[l]==d[u]&&(c+="“"+r[l].subModelName[u]+"” ");i["selectGoodsModelInfo.models"]=s,i["selectGoodsModelInfo.models_text"]=c,a.setData(i),a.resetSelectCountPrice()},a.resetSelectCountPrice=function(){var e=a.data.selectGoodsModelInfo.models.join(","),t=a.data.goodsInfo.model_items,n={},o=a.data.goodsInfo.cover;n["selectGoodsModelInfo.buyCount"]=1,n["selectGoodsModelInfo.buyTostoreCount"]=0;for(var i=t.length-1;i>=0;i--)if(t[i].model==e){n["selectGoodsModelInfo.stock"]=t[i].stock,n["selectGoodsModelInfo.price"]=t[i].price,n["selectGoodsModelInfo.modelId"]=t[i].id||"",n["selectGoodsModelInfo.imgurl"]=t[i].img_url||o,n["selectGoodsModelInfo.virtual_price"]=t[i].virtual_price,n["selectGoodsModelInfo.vipprice"]=t[i].vip_price;break}a.setData(n)},a.clickTostoreMinusButton=function(){var e=a,t=a.data.selectGoodsModelInfo.buyTostoreCount;if(!(t<=0)){if(t<=1)return h.appMethod.sendRequest({hideLoading:!0,url:"/index.php?r=AppShop/deleteCart",method:"post",data:{cart_id_arr:[e.data.selectGoodsModelInfo.cart_id],sub_shop_app_id:h.appMethod.getPageFranchiseeId()}}),a.setData({"selectGoodsModelInfo.buyTostoreCount":t-1}),void a.getTostoreCartList();a.setData({"selectGoodsModelInfo.buyTostoreCount":t}),a.sureAddTostoreShoppingCart("mins")}},a.clickTostorePlusButton=function(){var e=a.data.selectGoodsModelInfo,t=e.buyTostoreCount;if(t>=e.stock)return void a.showModal({content:"库存不足"});a.setData({"selectGoodsModelInfo.buyTostoreCount":t}),a.sureAddTostoreShoppingCart("plus")},a.sureAddTostoreShoppingCart=function(e){var t=a,n=t.data.selectGoodsModelInfo.buyTostoreCount;"plus"==e?n+=1:n-=1;var o=h.appMethod.getPageFranchiseeId(),i={goods_id:t.data.goodsInfo.id,model_id:t.data.selectGoodsModelInfo.modelId||"",num:n,sub_shop_app_id:o||""};h.appMethod.sendRequest({url:"/index.php?r=AppShop/addCart",data:i,success:function(e){var a=e.data;t.setData({"selectGoodsModelInfo.cart_id":a,"selectGoodsModelInfo.buyTostoreCount":n}),t.getTostoreCartList()},successStatusAbnormal:function(e){t.setData({"selectGoodsModelInfo.buyTostoreCount":0})}})},a.readyToTostorePay=function(){var e=h.appMethod.getPageFranchiseeId(),t="/orderMeal/pages/previewOrderDetail/previewOrderDetail"+(e?"?franchisee="+e:"");a.data.cartGoodsNum<=0||!a.data.tostoreTypeFlag||(a.hideAddShoppingcart(),h.appMethod.turnToPage(t))},a.goToShoppingCart=function(){var e=h.appMethod.getPageFranchiseeId(),t="/eCommerce/pages/shoppingCart/shoppingCart"+(e?"?franchisee="+e:"");a.hideAddShoppingcart(),h.appMethod.turnToPage(t)},a.getValidateTostore=function(){var e=a,t=h.appMethod.getPageFranchiseeId();h.appMethod.sendRequest({url:"/index.php?r=AppShop/precheckShoppingCart",data:{sub_shop_app_id:t||"",parent_shop_app_id:t?h.appMethod.getAppId():""},success:function(t){e.readyToTostorePay()},successShowModalConfirm:function(t){1===t.status&&e.goToShoppingCart()}})},a.hideAddShoppingcart=function(){a.setData({addTostoreShoppingCartShow:!1})},a.getTostoreCartList=function(){var e=a,t=h.appMethod.getPageFranchiseeId();h.appMethod.sendRequest({url:"/index.php?r=AppShop/cartList",data:{page:1,page_size:100,sub_shop_app_id:t||"",parent_shop_app_id:t?h.appMethod.getAppId():""},success:function(t){for(var a=0,n=0,o=0,i=!1,s=t.data.length-1;s>=0;s--){var r=t.data[s];3==r.goods_type&&(i=!0,a+=+r.num*+r.price,n+=+r.num),this.goodsId==r.goods_id&&(o=r.num,e.cart_id=r.id)}e.setData({tostoreTypeFlag:i,cartGoodsNum:n,cartGoodsTotalPrice:a.toFixed(2),addToShoppingCartCount:o})}})},a.stopPropagation=function(e){e.stopPropagation()},a.options=a.props.options,a.state={addTostoreShoppingCartShow:!1,goodsInfo:{},selectGoodsModelInfo:{buyCount:0},cartGoodsNum:0,cartGoodsTotalPrice:0,tostoreTypeFlag:!1,businesssTimeString:""},a}return(0,u.default)(t,e),(0,r.default)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.addTostoreShoppingCartShow,n=t.goodsInfo,o=t.selectGoodsModelInfo,i=t.cartGoodsNum,s=t.cartGoodsTotalPrice,r=t.tostoreTypeFlag,c=t.isShowBottom,l=t.businesssTimeString;return p.default.createElement("div",{className:"common-component tostore-shopping-cart tostorePayDialog page-addshoppingcart-dialog",hidden:!a,onClick:this.hideAddShoppingcart},p.default.createElement("div",{className:"page-bottom-dialog",style:c?{bottom:"1rem"}:{},onClick:this.stopPropagation},p.default.createElement("div",{className:"page-bottom-content"},p.default.createElement("div",{className:"pay-close-dialog page-dialog-close",onClick:this.hideAddShoppingcart},"×"),p.default.createElement("div",{className:"dialog-block-item"},p.default.createElement("div",{className:"pay-goods-baseinfo"},p.default.createElement("div",{className:"pay-goods-title ellipsis"},n.title))),p.default.createElement("div",{className:"dialog-block-item",hidden:!(n.model_items&&n.model_items.length),style:{marginBottom:0}},p.default.createElement("div",{className:"pay-goods-models"},n.model&&n.model.map(function(t,a){return p.default.createElement("div",{key:a},p.default.createElement("span",{style:{verticalAlign:"top",marginTop:"0.2rem",width:"1.2rem",display:"inline-block",textAlign:"right",fontSize:".24rem"}},t.name,"："),p.default.createElement("span",{className:"pills-list",style:{textAlign:"center",maxWidth:"5.28rem"}},t.subModelName.map(function(n,i){return p.default.createElement("label",{className:"subModel "+(o.models[a]==t.subModelId[i]?"select":""),key:i,"data-model-index":a,"data-submodel-index":i,"data-submodel-id":t.subModelId[i],onClick:e.selectGoodsSubModel},n)})))}))),p.default.createElement("div",{className:"dialog-block-item"},p.default.createElement("div",{className:"pay-goods-price clearfix"},p.default.createElement("div",{className:"pay-current-price",style:{fontSize:"16px"}},"¥",o.price),p.default.createElement("div",{className:"pull-right"},3!=n.goods_type&&p.default.createElement("label",null,"库存 ",p.default.createElement("span",{className:"pay-goods-stock"},o.stock)),p.default.createElement("div",{className:"quantity"},p.default.createElement("label",{className:"minus "+(o.buyTostoreCount<=0?"disabled":"")}),p.default.createElement("span",{className:"pay-buy-count",style:{margin:"auto 10px"}},o.buyTostoreCount),p.default.createElement("label",{className:"plus "+(o.buyTostoreCount>=o.stock?"disabled":"")}),p.default.createElement("div",{className:"response-area response-area-minus",onClick:this.clickTostoreMinusButton}),p.default.createElement("div",{className:"response-area response-area-plus",onClick:this.clickTostorePlusButton})))),p.default.createElement("div",{style:{fontSize:"12px",marginTop:"10px",color:"#c9c9c9",textAlign:"center"}},l)),p.default.createElement("div",{className:"toStore-bottom-nav"},p.default.createElement("div",{className:"bottom-nav-detail",onClick:this.goToShoppingCart},p.default.createElement("label",{className:"icon-shoppingcart ico-moon"},0!=i&&p.default.createElement("label",{className:"toStore-cart-tip"},i)),p.default.createElement("span",null,"¥",s)),p.default.createElement("div",{className:"bottom-nav-ready "+(0==i?"disabled":"")+" "+(r?"":"disabled"),onClick:this.getValidateTostore},"选好了")))))}}]),t}(g.default)},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.RewardPointModal=void 0;var o=a(0),i=n(o),s=a(3),r=n(s),c=a(1),l=n(c),d=a(2),u=n(d),m=a(4),p=n(m),f=a(28),g=n(f),h=a(5);a(746);t.RewardPointModal=function(e){function t(e){(0,i.default)(this,t);var a=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.show=function(e){if(e.rewardPointObj&&a.setState({rewardPointObj:e.rewardPointObj}),e.shareGiftsObj&&a.setState({shareGiftsObj:e.shareGiftsObj}),e.collectGiftsObj){if(e.collectGiftsObj&&e.collectGiftsObj.showModal){h.appMethod.getAppCurrentPage().data.page_hasNavBar&&a.setState({topNavBarHeight:h.appMethod.globalData.topNavBarHeight})}a.setState({collectGiftsObj:e.collectGiftsObj})}e.collectGetObj&&a.setState({collectGetObj:e.collectGetObj})},a.stopPropagation=function(e){e.stopPropagation()},a.closeModal=function(){a.setData({"rewardPointObj.showModal":!1}),h.appMethod.rewardPointCB(a.data.rewardPointObj.callback)},a.closeShareModal=function(){a.setData({"shareGiftsObj.showRewardsModal":!1})},a.closeExtraGifts=function(){a.setData({"shareGiftsObj.showExtraRewardModal":!1})},a.toshareGifts=function(){var e=a.data.shareGiftsObj;a.setData({"rewardPointObj.showModal":!1,"shareGiftsObj.showRewardsModal":!1}),h.appMethod.turnToPage("/eCommerce/pages/shareGifts/shareGifts?ids="+e.gifts.appoint_ids+"&extraIds="+e.gifts.extra_appoint_ids)},a.toShowGifts=function(e){var t=a,n=t.data.shareGiftsObj.extra_rewards[0].type,o=void 0;switch(n){case"1":o="/eCommerce/pages/couponList/couponList";break;case"2":o="/userCenter/pages/myIntegral/myIntegral";break;case"3":o="/eCommerce/pages/balance/balance";break;case"4":o="/userCenter/pages/vipCardList/vipCardList";break;case"5":o="/eCommerce/pages/vipBenefits/vipBenefits?id="+t.data.shareGiftsObj.extra_rewards[0].value;break;case"6":o="/awardManagement/pages/collectStars/collectStars";break;case"7":o="/awardManagement/pages/luckyWheelDetail/luckyWheelDetail";break;case"8":o="/awardManagement/pages/scratch/scratch";break;case"9":o="/awardManagement/pages/goldenEggs/goldenEggs"}a.setData({"rewardPointObj.showModal":!1,"shareGiftsObj.showExtraRewardModal":!1}),h.appMethod.turnToPage(o)},a.toCollectGifts=function(e){var t=e.currentTarget.dataset,n=t.type,o=void 0;switch(n){case"1":o="/eCommerce/pages/couponList/couponList";break;case"2":o="/userCenter/pages/myIntegral/myIntegral";break;case"3":o="/eCommerce/pages/balance/balance";break;case"4":o="/userCenter/pages/vipCardList/vipCardList";break;case"5":o="/eCommerce/pages/vipBenefits/vipBenefits";break;case"6":o="/awardManagement/pages/collectStars/collectStars";break;case"7":o="/awardManagement/pages/luckyWheelDetail/luckyWheelDetail";break;case"8":o="/awardManagement/pages/scratch/scratch";break;case"9":o="/awardManagement/pages/goldenEggs/goldenEggs"}a.setData({"rewardPointObj.showModal":!1,"shareGiftsObj.showExtraRewardModal":!1}),h.appMethod.turnToPage(o)},a.closeGiftsModal=function(){a.setData({"collectGiftsObj.showModal":!1})},a.closeGetModal=function(){a.setData({"collectGetObj.showModal":!1})},a.state={rewardPointObj:{showModal:!1,count:"",callback:""},collectGiftsObj:{showModal:!1,gifts:"",callback:""},collectGetObj:{showModal:!1,gifts:"",callback:""},shareGiftsObj:{showRewardsModal:!1,showExtraRewardModal:!1,gifts:"",immediately:"",callback:""},cdnUrl:h.appMethod.getCdnUrl(),topNavBarHeight:0},a}return(0,u.default)(t,e),(0,r.default)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.state,a=t.rewardPointObj,n=t.cdnUrl,o=t.shareGiftsObj,i=t.topNavBarHeight,s=t.collectGiftsObj,r=t.collectGetObj;return p.default.createElement(p.default.Fragment,null,a.showModal&&p.default.createElement("div",{className:"common-component rewardPointModal-wrap",onTouchMove:function(t){return e.stopPropagation(t)},style:{zIndex:11}},p.default.createElement("div",{className:"rewardPointModal-win"},p.default.createElement("div",{className:"rewardPointModal-bg",style:{backgroundImage:"url("+n+"/static/webapp/images/reward_bg.png),url("+n+"/static/webapp/images/reward_coin.png);"}},p.default.createElement("label",{onClick:"closeModal",className:"ico-moon icon-closes rewardPointModal-closes"})),p.default.createElement("div",{className:"rewardPointModal-text"},p.default.createElement("div",{className:"rewardPointModal-p1"},"恭喜你"),p.default.createElement("div",{className:"rewardPointModal-p2"},"获得",p.default.createElement("span",{className:"rewardPointModal-rewardCount"},a.count,"积分"))),p.default.createElement("button",{className:"rewardPointModal-button",onClick:"closeModal"},"知道了"))),o.showRewardsModal&&o.gifts.rewards.length>0&&p.default.createElement("div",{className:"common-component rewardPointModal-wrap",onTouchMove:function(t){return e.stopPropagation(t)},style:{zIndex:12}},p.default.createElement("div",{className:"share-gifts-wrap share-reward-wrap"},p.default.createElement("div",{className:"share-main-wrap"},p.default.createElement("div",{className:"share-top-wrap"},p.default.createElement("img",{className:"image-wrap",src:"http://cdn.jisuapp.cn/static/webapp/images/share-gifts/popup-top.png"})),p.default.createElement("div",{className:"share-content-wrap"},p.default.createElement("div",{className:"share-tips"},"分享有礼"),p.default.createElement("div",{className:"share-method"},(0==o.gifts.recv_limit||1==o.gifts.rewards.length)&&p.default.createElement("div",null,"恭喜你获得以下奖励"),1==o.gifts.recv_limit&&p.default.createElement("div",null,0==o.gifts.recv_chance?"奖励领取成功":o.gifts.recv_chance>1&&1==o.gifts.recv_limit&&o.gifts.rewards.length>1?"以下奖励可选":"以下奖励选一个"),p.default.createElement("div",{className:"share-method-list"},o.gifts&&o.gifts.rewards&&o.gifts.rewards.map(function(e,t){return 0!=e.stock&&p.default.createElement("div",{className:"list-item",key:t,style:{width:"80%",margin:"0 auto",wordBreak:"break-all"}},1==e.type&&p.default.createElement("img",{className:"image-wrap",src:"http://cdn.jisuapp.cn/static/webapp/images/share-gifts/coupon.png"}),2==e.type&&p.default.createElement("img",{className:"image-wrap",src:"http://cdn.jisuapp.cn/static/webapp/images/share-gifts/integral.png"}),3==e.type&&p.default.createElement("img",{className:"image-wrap",src:"http://cdn.jisuapp.cn/static/webapp/images/share-gifts/balance.png"}),(4==e.type||5==e.type)&&p.default.createElement("img",{className:"image-wrap",src:"http://cdn.jisuapp.cn/static/webapp/images/share-gifts/vip-card.png"}),6==e.type&&p.default.createElement("img",{className:"image-wrap",src:"http://cdn.jisuapp.cn/static/webapp/images/share-gifts/collect.png"}),7==e.type&&p.default.createElement("img",{className:"image-wrap",src:"http://cdn.jisuapp.cn/static/webapp/images/share-gifts/lucky-wheel.png"}),8==e.type&&p.default.createElement("img",{className:"image-wrap",src:"http://cdn.jisuapp.cn/static/webapp/images/share-gifts/scratch.png"}),9==e.type&&p.default.createElement("img",{className:"image-wrap",src:"http://cdn.jisuapp.cn/static/webapp/images/share-gifts/golden.png"}),p.default.createElement("span",{className:"list-item-text"},e.title))}))),o.gifts.rewards.length<=1||0==o.gifts.recv_limit?p.default.createElement("div",{className:"share-btn",onClick:this.toshareGifts,"data-type":o.gifts.rewards[0].type},"点击前往查看"):p.default.createElement("div",{className:"share-btn",onClick:this.toshareGifts},"点击前往领取"))),p.default.createElement("div",{className:"ico-moon icon-closed share-gifts-closes",onClick:this.closeShareModal}))),o.showExtraRewardModal&&o.extra_rewards.length>0&&(1==o.immediately||0==o.gifts.rewards.length)&&p.default.createElement("div",{className:"common-component rewardPointModal-wrap",onTouchMove:function(t){return e.stopPropagation(t)},style:{zIndex:11}},p.default.createElement("div",{className:"share-gifts-wrap share-extraReward-wrap"},p.default.createElement("div",{className:"share-main-wrap"},p.default.createElement("div",{className:"share-top-wrap"},p.default.createElement("img",{className:"image-wrap",src:"http://cdn.jisuapp.cn/static/webapp/images/share-gifts/popup-top.png"})),p.default.createElement("div",{className:"share-content-wrap"},p.default.createElement("div",{className:"share-tips"},"拉新成功"),p.default.createElement("div",{className:"share-method"},p.default.createElement("div",{className:"share-new_comer"},"拉新成功：【",p.default.createElement("span",{className:"new-comer-nickname"},o.extra_rewards[0].new_comer),o.extra_rewards[0].num>1?"等":""),p.default.createElement("div",{className:"extra-text"},"恭喜你获得以下奖励"),p.default.createElement("div",{className:"share-method-list"},o.extra_rewards&&o.extra_rewards.map(function(e,t){return p.default.createElement("div",{className:"list-item",key:t,style:{width:"80%",margin:"0 auto",wordBreak:"break-all"}},1==o.extra_rewards[0].type&&p.default.createElement("img",{className:"image-wrap",src:"http://cdn.jisuapp.cn/static/webapp/images/share-gifts/coupon.png"}),2==o.extra_rewards[0].type&&p.default.createElement("img",{className:"image-wrap",src:"http://cdn.jisuapp.cn/static/webapp/images/share-gifts/integral.png"}),3==o.extra_rewards[0].type&&p.default.createElement("img",{className:"image-wrap",src:"http://cdn.jisuapp.cn/static/webapp/images/share-gifts/balance.png"}),(4==o.extra_rewards[0].type||5==o.extra_rewards[0].type)&&p.default.createElement("img",{className:"image-wrap",src:"http://cdn.jisuapp.cn/static/webapp/images/share-gifts/vip-card.png"}),6==o.extra_rewards[0].type&&p.default.createElement("img",{className:"image-wrap",src:"http://cdn.jisuapp.cn/static/webapp/images/share-gifts/collect.png"}),7==o.extra_rewards[0].type&&p.default.createElement("img",{className:"image-wrap",src:"http://cdn.jisuapp.cn/static/webapp/images/share-gifts/lucky-wheel.png"}),8==o.extra_rewards[0].type&&p.default.createElement("img",{className:"image-wrap",src:"http://cdn.jisuapp.cn/static/webapp/images/share-gifts/scratch.png"}),9==o.extra_rewards[0].type&&p.default.createElement("img",{className:"image-wrap",src:"http://cdn.jisuapp.cn/static/webapp/images/share-gifts/golden.png"}),p.default.createElement("span",{className:"list-item-text"},e.reward_title," ",e.num>1?"*"+e.num:""))}))),p.default.createElement("div",{className:"share-btn",onClick:this.toShowGifts},"点击前往查看"))),p.default.createElement("div",{className:"ico-moon icon-closed share-gifts-closes",onClick:this.closeExtraGifts}))),s.showModal&&p.default.createElement("div",{className:"common-component rewardPointModal-wrap",onTouchMove:function(t){return e.stopPropagation(t)},style:1==s.style.type||2==s.style.type?{zIndex:15,top:i+"px",background:"rgba(0,0,0,.70)"}:{zIndex:15,top:i+"px",height:"4.5rem",background:"rgba(255,255,255,0)"}},1==s.style.type&&p.default.createElement("div",{className:"collect-gifts-wrap type1"},p.default.createElement("div",{className:"type1-arrow"}),p.default.createElement("div",{className:"collect-step"},p.default.createElement("div",{className:"type1-collect"}),p.default.createElement("div",{className:"section-tips"},p.default.createElement("div",{className:"tips-text",style:{color:"#ff7100"}},"点击",p.default.createElement("img",{className:"bottom-line",src:"http://cdn.jisuapp.cn/static/webapp/images/collect-gifts/toast1/bottom-line.png"})),"这里，选择添加到我的小程序")),p.default.createElement("img",{className:"section-logo",src:"http://cdn.jisuapp.cn/static/webapp/images/collect-gifts/toast1/section-arrow.png"}),p.default.createElement("div",{className:"collect-step"},p.default.createElement("div",{className:"type1-customer"}," "),p.default.createElement("div",{className:"section-tips"},"微信",p.default.createElement("div",{className:"tips-text",style:{color:"#ff7100"}},"下拉",p.default.createElement("image",{className:"bottom-line",src:"http://cdn.jisuapp.cn/static/webapp/images/collect-gifts/toast1/bottom-line.png"})),"，从【我的小程序】进入店铺")),p.default.createElement("img",{className:"section-logo",src:"http://cdn.jisuapp.cn/static/webapp/images/collect-gifts/toast1/section-arrow.png"}),p.default.createElement("div",{className:"method-wrap"},p.default.createElement("div",{className:"method-list method-list-show",style:{position:"absolute"}},s.gifts&&s.gifts.map(function(e,t){return p.default.createElement("div",{className:"method-item-list",key:t},p.default.createElement("div",{className:"method-item"},p.default.createElement("img",{className:"image",src:"http://cdn.jisuapp.cn/static/webapp/images/collect-gifts/toast1/hook.png"}),p.default.createElement("div",{className:"title"},e.title)))})),p.default.createElement("div",{style:{height:.5*s.gifts.length+"rem",marginBottom:".5rem"}}),p.default.createElement("div",{className:"section-tips",style:{fontSize:".3rem"}},"完成后，将获得以上",p.default.createElement("div",{className:"tips-text",style:{color:"#ff7100"}},"奖励",p.default.createElement("img",{className:"bottom-line",src:"http://cdn.jisuapp.cn/static/webapp/images/collect-gifts/toast1/bottom-line.png"}))),p.default.createElement("div",{className:"collect-gifts-closes",onClick:this.closeGiftsModal},s.manualClose.value))),2==s.style.type&&p.default.createElement("div",{className:"collect-gifts-wrap type2"},p.default.createElement("div",{className:"main-wrap"},p.default.createElement("div",{className:"collect-step"},p.default.createElement("div",{className:"image-wrap step-item"},"1. 点击右上角",p.default.createElement("img",{className:"image",src:"http://cdn.jisuapp.cn/static/webapp/images/collect-gifts/toast2/share.png",style:{marginLeft:".1rem"}}),"按钮")),p.default.createElement("div",{className:"collect-step"},p.default.createElement("div",{className:"step-item"},"2. 点击“添加到我的小程序”")),p.default.createElement("div",{className:"collect-step"},p.default.createElement("div",{className:"step-item"},"3. 在微信首页下拉打开任务栏，从“我的小程序”进入店铺。")),p.default.createElement("div",{className:"method-wrap"},p.default.createElement("div",{className:"image-wrap"},p.default.createElement("img",{src:"http://cdn.jisuapp.cn/static/webapp/images/collect-gifts/toast2/block.png",style:{width:".26rem",height:".18rem",marginRight:"12rpx"}}),"完成以上步骤你将获得以下奖励"),p.default.createElement("div",{className:"method-list"},s.gifts&&s.gifts.map(function(e,t){return p.default.createElement("div",{className:"method-item image-wrap",key:t},p.default.createElement("img",{className:"image",src:"http://cdn.jisuapp.cn/static/webapp/images/collect-gifts/toast2/hook.png",style:{height:".26rem",width:".32rem",marginRight:".17rem"}}),p.default.createElement("div",{className:"title"},e.title))})))),p.default.createElement("label",{onClick:this.closeGiftsModal,className:"ico-moon icon-closes rewardPointModal-closes"})),3==s.style.type&&p.default.createElement("div",{className:"collect-gifts-wrap type3 mode"+s.style.default,style:{background:s.style.bg}},p.default.createElement("div",null,p.default.createElement("div",{className:"main-wrap",style:{color:s.style.text}},p.default.createElement("div",{className:"header-tips"},p.default.createElement("div",{className:"logo-tips",style:{color:s.style.main}},p.default.createElement("label",{className:"ico-moon icon-collect-rect-left collect-rect",style:{marginRight:"-.06rem"}}),p.default.createElement("label",{className:"ico-moon icon-collect-rect-right collect-rect",style:{opacity:.2}})),p.default.createElement("span",{style:{opacity:.8}},"完成以下步骤有奖励")),p.default.createElement("div",{className:"collect-step"},p.default.createElement("div",{className:"image-wrap step-item"},p.default.createElement("span",{className:"step ico-moon icon-collect-first"}),"点击这里",p.default.createElement("img",{src:"http://cdn.jisuapp.cn/static/webapp/images/collect-gifts/toast2/share.png",onClick:this.closeGiftsModal,style:{width:".87rem",height:".48rem",margin:"0 0.07rem"}}),"选择添加到我的小程序")),p.default.createElement("div",{className:"collect-step"},p.default.createElement("div",null,p.default.createElement("span",{className:"step ico-moon icon-collect-second"}),"微信下拉，从“我的小程序”进入店铺")),p.default.createElement("div",{className:"method-wrap"},p.default.createElement("div",{className:"gifts-logo"},p.default.createElement("span",{className:"rewards-tips",style:{opacity:.8}},"奖励"),p.default.createElement("label",{className:"ico-moon icon-collect-line",style:{color:s.style.main}})),p.default.createElement("div",{className:"gifts-list"},s.gifts&&s.gifts.map(function(e,t){return p.default.createElement(p.default.Fragment,null,t==s.gifts.length-1?e.title:e.title+"、")})))),p.default.createElement("label",{onClick:this.closeGiftsModal,className:"ico-moon icon-collect-close rewardPointModal-closes",style:{color:s.style.btn}})),p.default.createElement("div",{className:"arrow-logo-wrap"},p.default.createElement("div",{className:"arrow-logo",style:{background:s.style.bg}})))),r.showModal&&p.default.createElement("div",{className:"common-component rewardPointModal-wrap",onTouchMove:function(t){return e.stopPropagation(t)},style:{zIndex:15,background:"rgba(0,0,0,.7)"}},p.default.createElement("div",{className:"collect-get-main-wrap"},p.default.createElement("div",{className:"image-wrap"},p.default.createElement("img",{className:"image",src:"http://cdn.jisuapp.cn/static/webapp/images/collect-gifts/toast-gifts/star.png"})),p.default.createElement("div",null,p.default.createElement("div",{className:"header-tips"},"欢迎回来 恭喜你获得以下奖励"),p.default.createElement("div",{className:"method-list"},r.gifts&&r.gifts.map(function(t,a){return p.default.createElement("div",{key:a,className:"method-item"},p.default.createElement("div",{className:"methods"},p.default.createElement("div",{className:"meth"},1==t.type&&p.default.createElement("div",{className:"gifts-logo",style:{background:"rgba(255, 129, 45, .1)"}},p.default.createElement("image",{className:"image-wrap",src:"http://cdn.jisuapp.cn/static/webapp/images/collect-gifts/gifts-logo/coupon.png"})),2==t.type&&p.default.createElement("div",{className:"gifts-logo",style:{background:"rgba(244, 90, 97, .1)"}},p.default.createElement("img",{className:"image-wrap",src:"http://cdn.jisuapp.cn/static/webapp/images/collect-gifts/gifts-logo/intergral.png"})),3==t.type&&p.default.createElement("div",{className:"gifts-logo",style:{background:"rgba(253, 181, 43, .1)"}},p.default.createElement("img",{className:"image-wrap",src:"http://cdn.jisuapp.cn/static/webapp/images/collect-gifts/gifts-logo/balance.png"})),(4==t.type||5==t.type)&&p.default.createElement("div",{className:"gifts-logo",style:{background:"rgba(244, 90, 97, .1)"}},p.default.createElement("img",{className:"image-wrap",src:"http://cdn.jisuapp.cn/static/webapp/images/collect-gifts/gifts-logo/vip-card.png"})),6==t.type&&p.default.createElement("div",{className:"gifts-logo",style:{background:"rgba(112, 212, 94, .1)"}},p.default.createElement("img",{className:"image-wrap",src:"http://cdn.jisuapp.cn/static/webapp/images/collect-gifts/gifts-logo/collect.png"})),7==t.type&&p.default.createElement("div",{className:"gifts-logo",style:{background:"rgba(63, 145, 230, .1)"}},p.default.createElement("img",{className:"image-wrap",src:"http://cdn.jisuapp.cn/static/webapp/images/collect-gifts/gifts-logo/luckyWheel.png"})),8==t.type&&p.default.createElement("div",{className:"gifts-logo",style:{background:"rgba(253, 181, 43, .1)"}},p.default.createElement("img",{className:"image-wrap",src:"http://cdn.jisuapp.cn/static/webapp/images/collect-gifts/gifts-logo/scratch.png"})),9==t.type&&p.default.createElement("div",{className:"gifts-logo",style:{background:"rgba(255, 129, 45, .1)"}},p.default.createElement("img",{className:"image-wrap",src:"http://cdn.jisuapp.cn/static/webapp/images/collect-gifts/gifts-logo/golden.png"})),p.default.createElement("div",{className:"gifts-name"},t.title)),p.default.createElement("div",{className:"show-btn",onClick:e.toCollectGifts,"data-type":t.type,"data-classify":"collect"},"查看")))}))),p.default.createElement("label",{className:"ico-moon icon-closes rewardPointModal-closes",onClick:this.closeGetModal}))))}}]),t}(g.default)},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ShowVipModal=void 0;var o=a(0),i=n(o),s=a(3),r=n(s),c=a(1),l=n(c),d=a(2),u=n(d),m=a(4),p=n(m),f=a(28),g=n(f),h=a(5);a(748);t.ShowVipModal=function(e){function t(e){(0,i.default)(this,t);var a=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.show=function(e){e.shopVipModal&&a.setState({shopVipModal:e.shopVipModal})},a.stopPropagation=function(e){e.stopPropagation()},a.closeModal=function(){a.setData({"shopVipModal.showModal":!1})},a.turnToVipCard=function(){h.appMethod.turnToPage("/userCenter/pages/vipCardList/vipCardList"),a.closeModal()},a.state={shopVipModal:{showModal:!1,isUp:!1},cdnUrl:h.appMethod.getCdnUrl()},a}return(0,u.default)(t,e),(0,r.default)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.state,a=t.shopVipModal,n=t.cdnUrl;return a.showModal?p.default.createElement("div",{className:"common-component shopVipModal-wrap",onTouchMove:function(t){return e.stopPropagation(t)}},!a.isUp&&p.default.createElement("div",{className:"shopVipModal-win shopVipModal-vip"},p.default.createElement("div",{className:"shopVipModal-vip-top",style:{backgroundImage:"url("+n+"/static/webapp/images/shop_vip.png)"}},p.default.createElement("div",{className:"shopVipModal-closes-wrap"},p.default.createElement("label",{onClick:this.closeModal,className:"ico-moon icon-closes shopVipModal-closes"})),p.default.createElement("div",{className:"shopVipModal-p"},"恭喜你成为本店会员"),p.default.createElement("div",{className:"shopVipModal-p"},"获得一张会员卡，请到个人中心查看")),p.default.createElement("button",{className:"shopVipModal-button",onClick:this.turnToVipCard},"去查看")),a.isUp&&p.default.createElement("div",{className:"shopVipModal-win shopVipModal-upgrade"},p.default.createElement("div",{className:"shopVipModal-upgrade-top",style:{backgroundImage:"url("+n+"/static/webapp/images/shop_vip_upgrade.png)"}},p.default.createElement("label",{onClick:this.closeModal,className:"ico-moon icon-closes shopVipModal-closes"})),p.default.createElement("div",{className:"shopVipModal-upgrade-text"},"请到个人中心查看最新会员权益吧"),p.default.createElement("button",{className:"shopVipModal-button",onClick:this.turnToVipCard},"去查看"))):null}}]),t}(g.default)},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.PageQrcode=void 0;var o=a(0),i=n(o),s=a(3),r=n(s),c=a(1),l=n(c),d=a(2),u=n(d),m=a(4),p=n(m),f=a(28),g=n(f),h=a(5);a(750);t.PageQrcode=function(e){function t(e){(0,i.default)(this,t);var a=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.ctx=null,a.show=function(e){a.setData({pageQRCodeData:e.pageQRCodeData||{shareDialogShow:"100%",shareMenuShow:!1}})},a.drawing=function(){var e=a,t=a.ctx;e.setDrawImage(t,e.data.pageQRCodeData.goodsInfo.goods_img,10,10,260,260,1),e.setDrawImage(t,e.data.pageQRCodeData.goodsInfo.qrcode_img_url,190,280,70,70,0),t.fillStyle="#ffffff",t.fillRect(0,0,280,390),e.setFillText(t,e.data.pageQRCodeData.goodsInfo.text,"#333333",300)},a.setFillText=function(e,t,n,o){var i=void 0;i=t.length>36?t.substr(0,33)+"...":t;for(var s=[],r=0;r<i.length;)s.push(i.substr(r,12)),r+=12;var c=!0,l=!1,d=void 0;try{for(var u,m=s[Symbol.iterator]();!(c=(u=m.next()).done);c=!0){var p=u.value;e.font="13px",e.fillStyle=n,e.fillText(p,10,o),o+=20}}catch(e){l=!0,d=e}finally{try{!c&&m.return&&m.return()}finally{if(l)throw d}}var f=a.data.pageQRCodeData.goodsInfo;f.isSeckill&&1==f.isSeckill&&(f.virtual_price=f.price,f.price=f.seckill_price?f.seckill_price:""),f.price&&(e.font="16px",e.fillStyle="#FF3600","2"==f.integral?"0.00"==f.price?e.fillText(f.max_can_use_integral+"积分",10,o+10):e.fillText("¥"+f.price+"+"+f.max_can_use_integral+"积分",10,o+10):e.fillText("¥"+f.price,10,o+10));var g=f.virtual_price;if(g){var h=9*(String(f.price).length+1)+20;e.font="12px",e.fillStyle="#999",e.fillText("¥"+g,h,o+10),e.beginPath(),e.strokeStyle="#999",e.moveTo(h,o+6),e.lineTo(h+6*(String(g).length+1)+12,o+6),e.stroke()}e.font="10px",e.fillStyle="#666666",e.fillText("长按识别二维码",190,365),e.beginPath(),e.lineWidth=1,e.lineJoin="miter",e.moveTo(260,280),e.lineTo(270,280),e.lineTo(270,290),e.moveTo(260,375),e.lineTo(270,375),e.lineTo(270,365),e.moveTo(190,280),e.lineTo(180,280),e.lineTo(180,290),e.moveTo(190,375),e.lineTo(180,375),e.lineTo(180,365),e.strokeStyle="#FF3600",e.stroke()},a.setDrawImage=function(e,t,n,o,i,s,r){var c=a,l=new Image;l.setAttribute("crossOrigin","anonymous"),l.onload=function(){e.drawImage(l,n,o,i,s),1==r&&c.data.pageQRCodeData.goodsInfo.isSeckill&&c.setDrawImage(e,"http://cdn.jisuapp.cn/zhichi_frontend/static/webapp/images/seckill-share-icon.png",10,252,62,18,0)},l.src=t},a.getShareToMomentsSwitch=function(){var e=a;h.appMethod.sendRequest({url:"/index.php?r=AppData/GetShareToMomentsSwitch",data:{},success:function(t){e.setData({showShare:t.data})}})},a.hideShareDialog=function(){a.setData({"pageQRCodeData.shareDialogShow":"100%","pageQRCodeData.shareMenuShow":!1,pageQRCodeShow:!1})},a.showAppMessageMenu=function(){h.appMethod.getAppCurrentPage().shareClickEvent(),a.hideShareDialog()},a.showPageCode=function(){a.setData({"pageQRCodeData.shareMenuShow":!1,pageQRCodeShow:!0}),setTimeout(function(){a.drawing()},200)},a.stopPropagation=function(e){e.stopPropagation()},a.savePageCode=function(){var e=document.getElementById("pageqrcode-canvas"),t=e.toDataURL("image/png").replace("image/png","image/octet-stream"),n=document.createElement("a");n.setAttribute("download","code.png"),n.setAttribute("href",t),n.click(),setTimeout(function(){h.appMethod.showToast({title:"保存成功",duration:4e3}),a.setData({"pageQRCodeData.shareDialogShow":"100%","pageQRCodeData.shareMenuShow":!1,pageQRCodeShow:!1})},2e3)},a.state={pageQRCodeShow:!1,pageQRCodeData:{shareDialogShow:"100%",shareMenuShow:!1},showShare:!1},a}return(0,u.default)(t,e),(0,r.default)(t,[{key:"componentDidMount",value:function(){this.getShareToMomentsSwitch();var e=document.getElementById("pageqrcode-canvas");this.ctx=e.getContext("2d")}},{key:"render",value:function(){var e=this.state,t=e.pageQRCodeData,a=e.pageQRCodeShow,n=e.showShare;return p.default.createElement("div",{className:"common-component page-qrcode page-qr-code-dialog",onClick:this.hideShareDialog,onTouchMove:this.stopPropagation,style:{top:t.shareDialogShow}},p.default.createElement("div",{className:"page-qr-code",hidden:!a,onClick:this.stopPropagation},p.default.createElement("canvas",{id:"pageqrcode-canvas",className:"goods-share-canvas",width:"280",height:"390"}),p.default.createElement("div",{className:"save-btn",onClick:this.savePageCode},"保存图片")),p.default.createElement("div",{className:"page-bottom-dialog",style:{position:"absolute",bottom:t.shareMenuShow?0:"-3.2rem",left:0,width:"7.50rem",backgroundColor:"rgba(238, 238, 238, 1)"},onClick:this.stopPropagation},p.default.createElement("button",{className:"button",onClick:this.showAppMessageMenu},"转发至好友"),n&&p.default.createElement("button",{className:"button shareToMoments",onClick:this.showPageCode},"转发至朋友圈"),p.default.createElement("button",{className:"button cancelShare",onClick:this.hideShareDialog},"取消")))}}]),t}(g.default)},function(e,t){},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Pay=void 0;var o=a(108),i=n(o),s=a(0),r=n(s),c=a(3),l=n(c),d=a(1),u=n(d),m=a(2),p=n(m);a(110);var f=a(4),g=n(f),h=a(5);a(752);t.Pay=function(e){function t(e){(0,r.default)(this,t);var a=(0,u.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.timer=null,a.showPay=function(e){if(!e.orderId)return void console.error("orderId 是必传字段");a.orderId=e.orderId,a.orderType=e.orderType||1,a.franchisee=e.franchisee||"",a.cancel=e.cancel||"",a.successUrl=e.successUrl||"",a.failUrl=e.failUrl||"",a.getOrder(),h.appMethod.isWeixin()?a.chooseWXPay():h.appMethod.isPC()?a.chooseWXCodePay():a.setState({payShow:!0,choosePayShow:!0}),a.setState({payLoading:!1,orderPrice:0})},a.closePayEvent=function(){a.closePay(),"function"==typeof a.cancel&&a.cancel()},a.changePayType=function(e){a.setState({choosePayType:e})},a.goPay=function(){var e=a.state.choosePayType;if(!a.state.payLoading){a.setState({payLoading:!0});var t=a.getTurnToPageUrl(a.successUrl),n=a.getTurnToPageUrl(a.failUrl);h.appMethod.setStorage({key:"payCallbackUrl",data:{successUrl:t,failUrl:n}}),"wxpay"==e?a.wxPay():"alipay"==e&&a.aliPay()}},a.wxPay=function(){h.appMethod.isWeixin()&&a.chooseWXPay(),h.appMethod.isPC()?a.chooseWXCodePay():a.chooseWXH5Pay()},a.chooseWXPay=function(){var e=a;e.getUniPay({payment_id:18,success:function(t){var a=t.data;wx.chooseWXPay({timestamp:a.timeStamp,nonceStr:a.nonceStr,package:a.package,signType:a.signType||"MD5",paySign:a.paySign,success:function(t){e.successUrl&&h.appMethod.turnToPage(e.successUrl,{},!0)},cancel:function(t){h.appMethod.showModal({content:"支付已取消",confirm:function(){e.failUrl&&h.appMethod.turnToPage(e.failUrl,{},!0)}})},fail:function(t){"requestPayment:fail"===t.errMsg&&(t.errMsg="支付失败"),t.errMsg.indexOf("ETIMEDOUT")&&(t.errMsg="支付超时！"),h.appMethod.showModal({content:t.errMsg}),e.failUrl&&h.appMethod.turnToPage(e.failUrl,{},!0)}})},fail:function(){},complete:function(){e.setState({payLoading:!1})}})},a.chooseWXCodePay=function(){var e=a;e.getUniPay({payment_id:0,success:function(t){e.checkOrderPay(),e.setState({wxcodePay:!0,payShow:!0,choosePayShow:!1,wxcodeUrl:t.data})},fail:function(){},complete:function(){e.setState({payLoading:!1})}})},a.chooseWXH5Pay=function(){var e=a;h.appMethod.turnToPage("/paying?orderId="+e.orderId,{},!0),e.getUniPay({payment_id:19,success:function(t){if("OK"==t.data.return_msg){var a=t.data.mweb_url,n=e.getIntactUrl("/paying?isPayBack=1&orderId="+e.orderId);a=a+"&redirect_url="+encodeURIComponent(n),window.location.href=a,e.setState({payShow:!1,choosePayShow:!1})}},fail:function(){},complete:function(){e.setState({payLoading:!1})}})},a.aliPay=function(){h.appMethod.isPC()?a.chooseALiPCPay():a.chooseALiH5Pay()},a.chooseALiPCPay=function(){var e=a,t=e.getIntactUrl("/paying?isPayBack=1&orderId="+e.orderId);h.appMethod.turnToPage("/paying?orderId="+e.orderId,{},!0),e.getUniPay({payment_id:21,return_url:t,success:function(t){var a=document.createElement("div");a.innerHTML=t.data,a.removeChild(a.childNodes[1]),document.body.appendChild(a),document.forms.alipaysubmit.submit(),setTimeout(function(){a.remove()},50),e.setState({payShow:!1,choosePayShow:!1})},fail:function(){},complete:function(){e.setState({payLoading:!1})}})},a.chooseALiH5Pay=function(){var e=a,t=e.getIntactUrl("/paying?isPayBack=1&orderId="+e.orderId);h.appMethod.turnToPage("/paying?orderId="+e.orderId,{},!0),e.getUniPay({payment_id:20,return_url:t,success:function(t){var a=document.createElement("div");a.innerHTML=t.data,a.removeChild(a.childNodes[1]),document.body.appendChild(a),document.forms.alipaysubmit.submit(),setTimeout(function(){a.remove()},50),e.setState({payShow:!1,choosePayShow:!1})},fail:function(){},complete:function(){e.setState({payLoading:!1})}})},a.wxPaySuccess=function(e){var t=e.orderId,a=e.goodsType,n=e.package.substr(10),o=1==a?"AT0104":"AT0009";h.appMethod.sendRequest({hideLoading:!0,url:"/index.php?r=AppShop/SendXcxOrderCompleteMsg",data:{formId:n,t_num:o,order_id:t}})},a.wxPayFail=function(e,t){var a=e.orderId,n=e.package.substr(10);h.appMethod.sendRequest({hideLoading:!0,url:"/index.php?r=AppShop/SendXcxOrderCompleteMsg",data:{formId:n,t_num:"AT0010",order_id:a,fail_reason:t}})},a.state={payShow:!1,choosePayShow:!1,choosePayType:"wxpay",wxcodePay:!1,wxcodeUrl:"",payLoading:!1,orderPrice:0},a.orderId="",a.orderType=1,a.franchisee="",a.success="",a.fail="",a.cancel="",a}return(0,p.default)(t,e),(0,l.default)(t,[{key:"getOrder",value:function(){var e=this;h.appMethod.sendRequest({url:"/index.php?r=AppShop/getOrder",data:{order_id:this.orderId,sub_shop_app_id:this.franchisee},hideLoading:!1,success:function(t){e.setState({orderPrice:t.data[0].form_data.total_price})},fail:function(){}})}},{key:"orderIsPay",value:function(){var e=this;h.appMethod.sendRequest({url:"/index.php?r=AppShop/getOrder",data:{order_id:this.orderId,sub_shop_app_id:this.franchisee},success:function(t){0!=t.data[0].form_data.status&&(e.closePay(),e.successUrl&&h.appMethod.turnToPage(e.successUrl,{},!0))},fail:function(){}})}},{key:"checkOrderPay",value:function(){var e=this;clearInterval(this.timer),this.timer=setInterval(function(){e.orderIsPay()},2e3)}},{key:"closePay",value:function(){clearInterval(this.timer),h.appMethod.removeStorage({key:"payCallbackUrl"}),this.setState({payShow:!1,choosePayShow:!1,wxcodePay:!1})}},{key:"getIntactUrl",value:function(e){var t=e.split("/");return e=window.location.origin+"/zc_webapp/"+t[t.length-1],/app_id/.test(e)||(e=e.indexOf("?")<0?e+"?app_id="+h.appMethod.getAppId():e+"&app_id="+h.appMethod.getAppId()),e}},{key:"getTurnToPageUrl",value:function(e){return e&&!/app_id/.test(e)&&(e=e.indexOf("?")<0?e+"?app_id="+h.appMethod.getAppId():e+"&app_id="+h.appMethod.getAppId()),e}},{key:"getUniPay",value:function(e){h.appMethod.sendRequest({url:"/index.php?r=pay/Pay/GetUniPay",data:{order_id:this.orderId,order_type:this.orderType,payment_id:e.payment_id||0,return_url:e.return_url||"",sub_shop_app_id:this.franchisee},hideLoading:!1,success:function(t){"function"==typeof e.success&&e.success(t)},fail:function(t){"function"==typeof e.fail&&e.fail(t)},complete:function(t){"function"==typeof e.complete&&e.complete(t)}})}},{key:"render",value:function(){var e=this,t=this.state,a=t.payShow,n=t.choosePayShow,o=t.choosePayType,s=t.wxcodePay,r=t.wxcodeUrl,c=t.payLoading,l=t.orderPrice;return a?g.default.createElement("div",{className:"common-api pay-wrap"},g.default.createElement("div",{className:"choose-pay",style:{bottom:n?0:"-7rem"}},g.default.createElement("div",{className:"choose-pay-head"},"支付"),g.default.createElement("div",{className:"pay-close icon-moon icon-closes",onClick:this.closePayEvent}),g.default.createElement("div",{className:"pay-money"},g.default.createElement("label",null,"¥"),g.default.createElement("span",null,l)),g.default.createElement("div",{className:"choose-item-warp"},g.default.createElement("div",{className:"choose-pay-item pay-item-wx",onClick:function(){return e.changePayType("wxpay")}},g.default.createElement("label",{className:"pay-item-logo icon-moon icon-weixin-pay"}),g.default.createElement("span",null,"微信支付"),g.default.createElement(i.default,{className:"pay-item-radio",checked:"wxpay"===o})),g.default.createElement("div",{className:"choose-pay-item pay-item-ali",onClick:function(){return e.changePayType("alipay")}},g.default.createElement("label",{className:"pay-item-logo icon-moon icon-alipay"}),g.default.createElement("span",null,"支付宝"),g.default.createElement(i.default,{className:"pay-item-radio",checked:"alipay"===o}))),g.default.createElement("div",{className:"choose-pay-btn "+(c?"choose-btn-disabled":""),onClick:this.goPay},"确认支付")),g.default.createElement("div",{className:"pay-qrcode-wrap",hidden:!s},g.default.createElement("div",{className:"pay-close icon-moon icon-closes",onClick:this.closePayEvent}),g.default.createElement("div",{className:"pay-qrcode"},g.default.createElement("img",{src:r})),g.default.createElement("div",{className:"pay-qrcode-tip"},"长按二维码扫描支付"))):null}}]),t}(g.default.Component)},function(e,t){},function(e,t){}],[166]);
//# sourceMappingURL=index.js.map